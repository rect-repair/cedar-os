;/*FB_PKG_DELIM*/

__d("IGDChatTabsTooltipWrapper.react",["IGDSTooltip.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.children,d=a.isVisible;a=a.tooltip;return a==null?b:i.jsx(c("IGDSTooltip.react"),{align:"middle",color:"primary",isVisible:d,position:"above",tooltip:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDChatTabsPOG.react",["CometPressable.react","I64","IGDChatTabsStateTypes","IGDChatTabsTooltipWrapper.react","IGDFallbackProfileUrl","IGDSBox.react","IGDSText.react","IGDSingleAvatar.react","IGDThreadListNewMessageLoggingDataContext","MessengerWebUXLogger","cr:610","getLSMediaContactProfilePictureUrl","getLSMediaThreadPictureUrl","react","useIGDOpenChatTab.react","useLSGetThreadTitle.react","useMWFacepileGetContactsToShow"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));e=h;var k=e.useCallback,l=e.useMemo,m=e.useState,n={pog:{borderTopColor:"xbe7ycp",borderInlineEndColor:"x1npm9xp",borderBottomColor:"x5p4dl0",borderInlineStartColor:"x179w5xb",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"xamhcws",borderInlineEndWidth:"x1alpsbp",borderBottomWidth:"xlxy82",borderInlineStartWidth:"xyumdvf",marginInlineStart:"xw01apr",zIndex:"x1vjfegm",$$css:!0}};function a(a){var e=a.isUnreadPOG,f=a.thread;a=c("getLSMediaThreadPictureUrl")(f);var g=c("useLSGetThreadTitle.react")(f),h=g.threadTitle;g=c("useMWFacepileGetContactsToShow")(f.threadKey,f.threadType);g=g[0]!=null?c("getLSMediaContactProfilePictureUrl")(g[0]):d("IGDFallbackProfileUrl").FALLBACK_PROFILE_PIC_URL;a=a!=null?a:g;var o=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),p=c("MessengerWebUXLogger").useInteractionLogger();g=c("MessengerWebUXLogger").useImpressionLoggerRef({eventName:"igd_chat_tabs_pog",extraData:{isUnreadPOG:String(e)},flowInstanceId:o});var q=l(function(){var a;return j.jsx(c("IGDSBox.react"),{maxWidth:95,children:j.jsx(c("IGDSText.react"),{maxLines:1,size:"footnote",weight:"medium",zeroMargin:!0,children:(a=f.threadName)!=null?a:h})})},[f.threadName,h]),r=b("cr:610")((i||(i=d("I64"))).to_string(f.threadKey)),s=c("useIGDOpenChatTab.react")(),t=k(function(){s((i||(i=d("I64"))).to_string(f.threadKey),d("IGDChatTabsStateTypes").IGDChatTabsMessagingInitiationSource.ChatTabsPOG),p==null||p({eventName:"igd_chat_tabs_pog",extraData:{isUnreadPOG:String(e)},flowInstanceId:o})},[o,e,p,s,f.threadKey]),u=m(!1),v=u[0],w=u[1];return j.jsx(c("IGDChatTabsTooltipWrapper.react"),{isVisible:v,tooltip:q,children:j.jsx(c("CometPressable.react"),{onHoverIn:function(){r==null||r(),w(!0)},onHoverOut:function(){w(!1)},onPress:t,ref:g,role:"button",xstyle:n.pog,children:j.jsx(c("IGDSingleAvatar.react"),{size:"tiny",src:a})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDChatTabsUnreadOverflowPlaceholder.react",["IGDSBox.react","IGDSConstants","IGDSGlimmer.react","IGDSPopoverLoadingState.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={glimmer:{height:"x5yr21d",width:"xh8yej3",$$css:!0},root:{borderStartStartRadius:"x1ua1ujl",borderStartEndRadius:"xksyday",borderEndEndRadius:"xshg46c",borderEndStartRadius:"xlej2ay",marginBottom:"x1hq5gj4",$$css:!0}};function k(){return i.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",children:[i.jsx(c("IGDSBox.react"),{height:c("IGDSConstants").AVATAR_SIZES.tiny,marginEnd:2,overflow:"hidden",shape:"circle",width:c("IGDSConstants").AVATAR_SIZES.tiny,children:i.jsx(c("IGDSGlimmer.react"),{index:0,xstyle:j.glimmer})}),i.jsx(c("IGDSBox.react"),{height:12,overflow:"hidden",width:160,children:i.jsx(c("IGDSGlimmer.react"),{index:1,xstyle:j.glimmer})})]})}k.displayName=k.name+" [from "+f.id+"]";function a(){return i.jsx(c("IGDSPopoverLoadingState.react"),{popoverContent:i.jsxs(c("IGDSBox.react"),{alignItems:"start",direction:"column",maxWidth:300,padding:3,children:[i.jsx(k,{}),i.jsx(k,{}),i.jsx(k,{})]}),popoverXStyle:j.root})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDChatTabsUnreadOverflowPopover.react",["fbt","CometPressable.react","IGDChatTabsEnv","IGDChatTabsUnreadOverflowPlaceholder.react","IGDSLazyPopoverTrigger.react","IGDSMoreHorizontalPanoOutlineIcon.react","IGDThreadListNewMessageLoggingDataContext","JSResourceForInteraction","MessengerWebUXLogger","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useCallback,l={moreUnreadIndicator:{alignItems:"x6s0dn4",backgroundColor:"x1gjpkn9",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",height:"xxk0z11",justifyContent:"xl56j7k",marginInlineStart:"xw01apr",width:"xvy4d1p",$$css:!0}},m=c("JSResourceForInteraction")("IGDChatTabsUnreadOverflow.react").__setRef("IGDChatTabsUnreadOverflowPopover.react");function a(a){var b=a.onChatTabJewelClick;a=a.unreadThreads;var e=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),f=c("MessengerWebUXLogger").useInteractionLogger(),g=c("MessengerWebUXLogger").useImpressionLoggerRef({eventName:"igd_chat_tabs_pog_overflow_icon",flowInstanceId:e}),i=a.length,n=h._(/*BTDS*/"_j{\"*\":\"{number of unread chats} unread chats\",\"_1\":\"{number of unread chats} unread chat\"}",[h._plural(i),h._param("number of unread chats",i)]);i=a.slice(d("IGDChatTabsEnv").MAX_POGS);var o=k(function(){b(),f==null||f({eventName:"igd_chat_tabs_pog_overflow_icon",flowInstanceId:e})},[e,f,b]);return j.jsx(c("IGDSLazyPopoverTrigger.react"),{align:"end",fallback:j.jsx(c("IGDChatTabsUnreadOverflowPlaceholder.react"),{}),popoverProps:{unreadThreads:i},popoverResource:m,popoverType:"menu",position:"above",children:function(a,b,d){return j.jsx(c("CometPressable.react"),{onHoverIn:b,onHoverOut:d,onPress:o,ref:a,xstyle:l.moreUnreadIndicator,children:j.jsx("div",{ref:g,children:j.jsx(c("IGDSMoreHorizontalPanoOutlineIcon.react"),{alt:n,size:16})})})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useIGDChatTabsGetTopThreads.react",["I64","LSIntEnum","LSThreadBitOffset","MWThreadListSupportedThreadTypes","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){var b=(j||(j=c("useReStore")))(),e=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableDescending(b.tables.threads.index("parentThreadKeyLastActivityTimestampMs"),["takedownState","threadType","lastReadWatermarkTimestampMs","lastActivityTimestampMs","muteExpireTimeMs","isHidden","threadKey","threadPictureUrl","threadPictureUrlExpirationTimestampMs","threadPictureUrlFallback","threadSubtype","threadName","consistentThreadFbid","memberCount","nullstateDescriptionText1","parentThreadKey","pauseThreadTimestamp"].concat(d("LSThreadBitOffset").threadCapabilityFields)).getKeyRange((h||(h=d("LSIntEnum"))).ofNumber(0)).filter(function(a){return c("MWThreadListSupportedThreadTypes").findIndex(function(b){return(i||(i=d("I64"))).equal(a.threadType,b)})!==-1}).take(a)},[b.tables.threads,a],f.id+":60");return e}g["default"]=a}),98);
__d("IGDChatTabsPOGs.react",["I64","IGDChatTabsEnv","IGDChatTabsPOG.react","IGDChatTabsUnreadOverflowPopover.react","IGDSBox.react","react","useIGDChatTabsGetTopThreads.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a){var b=a.onChatTabJewelClick;a=a.unreadThreads;var e=a.length,f=c("useIGDChatTabsGetTopThreads.react")(d("IGDChatTabsEnv").MAX_POGS),g=a.slice(0,d("IGDChatTabsEnv").MAX_POGS);g=e>0?g:f;return j.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"rowReverse",children:[e>d("IGDChatTabsEnv").MAX_POGS&&j.jsx(c("IGDChatTabsUnreadOverflowPopover.react"),{onChatTabJewelClick:b,unreadThreads:a}),g.toReversed().map(function(a){return j.jsx(c("IGDChatTabsPOG.react"),{isUnreadPOG:e>0,thread:a},(i||(i=d("I64"))).to_string(a.threadKey))})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWLSIndexedDBDelete",["FBLogger","MWLSIndexedDBName","ODS","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return new(i||(i=b("Promise")))(function(b,e){try{var f=d("MWLSIndexedDBName").dbName(),g=indexedDB.deleteDatabase(f);g.onerror=function(){(h||(h=d("ODS"))).bumpEntityKey(3185,"db_delete","error."+a),c("FBLogger")("maw_db").mustfix("[pdb] Failed to delete db"),e(g.error)};g.onblocked=function(){(h||(h=d("ODS"))).bumpEntityKey(3185,"db_delete","block."+a)};g.onsuccess=function(){(h||(h=d("ODS"))).bumpEntityKey(3185,"db_delete","success."+a),b()}}catch(a){c("FBLogger")("maw_db").mustfix("[pdb] error in db deletion"),e()}})}g.deleteIndexedDB=a}),98);