;/*FB_PKG_DELIM*/

__d("TCompactProtocol",["StringToUtf8","ThriftTypes","Utf8ToString"],(function(a,b,c,d,e,f,g){var h,i=Object.freeze({CT_STOP:0,CT_BOOLEAN_TRUE:1,CT_BOOLEAN_FALSE:2,CT_BYTE:3,CT_I16:4,CT_I32:5,CT_I64:6,CT_DOUBLE:7,CT_BINARY:8,CT_LIST:9,CT_SET:10,CT_MAP:11,CT_STRUCT:12,CT_FLOAT:13}),j=Object.freeze({NONE:-1,CT_BOOLEAN_TRUE:i.CT_BOOLEAN_TRUE,CT_BOOLEAN_FALSE:i.CT_BOOLEAN_FALSE}),k=[i.CT_STOP,0,i.CT_BOOLEAN_TRUE,i.CT_BYTE,i.CT_DOUBLE,0,i.CT_I16,0,i.CT_I32,0,i.CT_I64,i.CT_BINARY,i.CT_STRUCT,i.CT_MAP,i.CT_SET,i.CT_LIST,0,0,0,i.CT_FLOAT],l=Math.pow(2,7)-1,m=-1*Math.pow(2,7),n=Math.pow(2,15)-1,o=-1*Math.pow(2,15),p=Math.pow(2,31)-1,q=-1*Math.pow(2,31),r=Math.pow(2,32)-1,s=BigInt("9223372036854775807"),t=BigInt("-9223372036854775808"),u=BigInt("18446744073709551615"),v=BigInt(63),w=BigInt(1),x=BigInt(7),y=BigInt("0x7f"),z=BigInt("0x80"),A=Math.pow(2,4);a=function(){function a(a){this.$4=null,this.$5=null,this.$1=a,this.$2=[],this.$3=0,this.$6=new DataView(new ArrayBuffer(1))}var b=a.prototype;b.readStructBegin=function(){this.$2.push(this.$3),this.$3=0};b.readStructEnd=function(){this.$3=this.$2.pop();return 0};b.writeStructBegin=function(a){this.$2.push(this.$3);this.$3=0;return 0};b.writeStructEnd=function(){this.$3=this.$2.pop();return 0};b.writeFieldBegin=function(a){if(a.ftype===(h||(h=c("ThriftTypes"))).BOOL){this.$4={fid:a.fid,fname:a.fname,ftype:a.ftype};return 0}else return this.$7(a,j.NONE)};b.writeListBegin=function(a){return this.$8(a)};b.writeListEnd=function(){return 0};b.writeSetBegin=function(a){return this.$8(a)};b.writeSetEnd=function(){return 0};b.writeMapBegin=function(a){var b=0;if(a.size===0)b+=this.$1.writeByte(0);else{b+=this.writeVarint32(a.size);if(a.ktype!=null&&a.vtype!=null)b+=this.$1.writeByte(this.$9(a.ktype)<<4|this.$9(a.vtype));else throw new Error("received invalid map info: "+JSON.stringify(a))}return b};b.writeMapEnd=function(){return 0};b.$7=function(a,b){var c=0;b=b===j.NONE?this.$9(a.ftype):b;a.fid>this.$3&&a.fid-this.$3<=A-1?c+=this.$1.writeByte(a.fid-this.$3<<4|b):(c+=this.$1.writeByte(b),c+=this.writeI16(a.fid));this.$3=a.fid;return c};b.$8=function(a){var b=0,c=this.$9(a.etype);a.size<=A-2?b+=this.$1.writeByte(a.size<<4|c):(b+=this.$1.writeByte(240|c),b+=this.writeVarint32(a.size));return b};b.readFieldBegin=function(){var a=this.$1.readByte(),b=a&15;if(b===(h||(h=c("ThriftTypes"))).STOP)return{ftype:(h||(h=c("ThriftTypes"))).STOP,fid:0};a=(a&240)>>>4;var d;a===0?d=this.readI16():d=this.$3+a;a=this.$10(b);(b===i.CT_BOOLEAN_TRUE||b===i.CT_BOOLEAN_FALSE)&&(this.$5=b===i.CT_BOOLEAN_TRUE);this.$3=d;return{ftype:a,fid:d}};b.readListBegin=function(){return this.$11()};b.readListEnd=function(){return 0};b.readSetBegin=function(){return this.$11()};b.readSetEnd=function(){return 0};b.readMapBegin=function(){var a=this.readVarint32();if(a>0){var b=this.$1.readByte(),c=this.$12(b>>4,"readMapBegin:key");b=this.$12(b&15,"readMapBegin:value");return{ktype:this.$10(c),vtype:this.$10(b),size:a}}return{size:a}};b.readMapEnd=function(){return 0};b.$12=function(a,b){if(a<0||a>13)throw new Error(b+" read invalid compact type: "+a);return a};b.$11=function(){var a=this.$1.readByte(),b=this.$12(a&15,"_readListOrSetBegin");b=this.$10(b);a=a>>4&15;a===15&&(a=this.readVarint32());return{etype:b,size:a}};b.readFieldEnd=function(){return 0};b.readByte=function(){this.$6.setUint8(0,this.$1.readByte());return this.$6.getInt8(0)};b.writeByte=function(a){if(a<m||a>l)throw new Error("byte to write is out of range: "+a);this.$6.setInt8(0,a);return this.$1.writeByte(this.$6.getUint8(0))};b.readFloat=function(){return this.$1.readFloatBE()};b.writeFloat=function(a){return this.$1.writeFloatBE(a)};b.readDouble=function(){return this.$1.readDoubleBE()};b.writeDouble=function(a){return this.$1.writeDoubleBE(a)};b.writeString=function(a){return this.writeBinary(d("StringToUtf8").StringToUtf8(a))};b.skip=function(a){switch(a){case(h||(h=c("ThriftTypes"))).STOP:return;case(h||(h=c("ThriftTypes"))).BOOL:this.readBool();break;case(h||(h=c("ThriftTypes"))).BYTE:this.readByte();break;case(h||(h=c("ThriftTypes"))).DOUBLE:this.readDouble();break;case(h||(h=c("ThriftTypes"))).I16:this.readI16();break;case(h||(h=c("ThriftTypes"))).I32:this.readI32();break;case(h||(h=c("ThriftTypes"))).I64:this.readI64();break;case(h||(h=c("ThriftTypes"))).STRING:this.readString();break;case(h||(h=c("ThriftTypes"))).STRUCT:this.readStructBegin();var b;while(!0){b=this.readFieldBegin();if(b.ftype===(h||(h=c("ThriftTypes"))).STOP)break;this.skip(b.ftype)}this.readStructEnd();break;case(h||(h=c("ThriftTypes"))).MAP:b=this.readMapBegin();if(b.size>0&&b.ktype!=null&&b.vtype!=null){var d=b.ktype,e=b.vtype;for(var f=0;f<b.size;f++)this.skip(d),this.skip(e)}break;case(h||(h=c("ThriftTypes"))).SET:case(h||(h=c("ThriftTypes"))).LIST:f=this.$11();for(d=0;d<f.size;d++)this.skip(f.etype);break;case(h||(h=c("ThriftTypes"))).FLOAT:this.readFloat();break;default:throw new Error("encoutered unknow thrift type: "+a+" in skip")}};b.toByteArray=function(){return this.$1.toByteArray()};b.writeFieldEnd=function(){return 0};b.writeFieldStop=function(){return this.$1.writeByte((h||(h=c("ThriftTypes"))).STOP)};b.writeI16=function(a){if(a<o||a>n)throw new Error("trying to write i16 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};b.readI16=function(){var a=this.zigzagToI32(this.readVarint32());if(a<o||a>n)throw new Error("read invalid i16: "+a);return a};b.writeI32=function(a){if(a<q||a>p)throw new Error("i32 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};b.readI32=function(){return this.zigzagToI32(this.readVarint32())};b.writeI64=function(a){return this.writeVarint64(this.i64ToZigzag(a))};b.readI64=function(){return this.zigzagToI64(this.readVarint64())};b.readBool=function(){var a;this.$5!=null?(a=this.$5,this.$5=null):a=this.$1.readByte()===i.CT_BOOLEAN_TRUE;return a};b.writeBool=function(a){var b=0;this.$4!=null?(b+=this.$7(this.$4,a?j.CT_BOOLEAN_TRUE:j.CT_BOOLEAN_FALSE),this.$4=null):b+=this.$1.writeByte(a?i.CT_BOOLEAN_TRUE:i.CT_BOOLEAN_FALSE);return b};b.readBinary=function(){var a=this.readVarint32();return a===0?new Uint8Array(0):this.$1.readBytes(a)};b.writeBinary=function(a){var b=0;b+=this.writeVarint32(a.length);b+=this.$1.write(a);return b};b.i32ToZigzag=function(a){if(a<q||a>p)throw new Error("number: "+a+" is out of range of i32");return(a<<1^(a<0?4294967295:0))>>>0};b.zigzagToI32=function(a){if(a<0||a>r)throw new Error("number: "+a+" is out of range of uint32");return a>>>1^-1*(a&1)};b.i64ToZigzag=function(a){if(a>s||a<t)throw new Error("i64 out of range: "+a.toString());return a>>v^a<<w};b.zigzagToI64=function(a){if(a<0||a>u)throw new Error("invalid uint64: "+a.toString());return(a&w)===w?~(a>>w):a>>w};b.writeVarint32=function(a){if(a<0||a>r)throw new Error("writeVarint32 received out of range uint32: "+a);a=a;var b=0;while(!0)if(a>>>7===0){this.$1.writeByte(a);b++;break}else this.$1.writeByte(a&127|128),b++,a>>>=7;return b};b.readVarint32=function(){var a=0,b=0,c;while(!0){c=this.$1.readByte();a=(a|(c&127)<<b)>>>0;b+=7;if((c&128)==0){if(b===35&&(c&240)!=0)throw new Error("result exceeded 32 bit limit");break}if(b>28)throw new Error("result exceeded 32 bit limit")}return a};b.writeVarint64=function(a){if(a<0||a>u)throw new Error("invalid uint64: "+a.toString());a=a;var b=0;while(!0)if(a>>x==0){this.$1.writeByte(Number(a));b++;break}else this.$1.writeByte(Number(a&y|z)),b++,a>>=x;return b};b.readVarint64=function(){var a=BigInt(0),b=BigInt(0),c;while(!0){c=BigInt(this.$1.readByte());a|=(c&y)<<b;b+=x;if((c&z)==0){if(b==70&&c!==w)throw new Error("result exceeded 64 bit limit");break}if(b>63)throw new Error("result exceeded 64 bit limit")}return a};b.readString=function(){return d("Utf8ToString").Utf8ToString(this.readBinary())};b.getLastFieldId=function(){return this.$3};b.getLastField=function(){return this.$2};b.getBooleanFieldInfo=function(){return this.$4};b.getBooleanValue=function(){return this.$5};b.$9=function(a){return k[a]};b.$10=function(a){switch(a){case i.CT_STOP:return(h||(h=c("ThriftTypes"))).STOP;case i.CT_BOOLEAN_FALSE:case i.CT_BOOLEAN_TRUE:return(h||(h=c("ThriftTypes"))).BOOL;case i.CT_BYTE:return(h||(h=c("ThriftTypes"))).BYTE;case i.CT_I16:return(h||(h=c("ThriftTypes"))).I16;case i.CT_I32:return(h||(h=c("ThriftTypes"))).I32;case i.CT_I64:return(h||(h=c("ThriftTypes"))).I64;case i.CT_DOUBLE:return(h||(h=c("ThriftTypes"))).DOUBLE;case i.CT_FLOAT:return(h||(h=c("ThriftTypes"))).FLOAT;case i.CT_BINARY:return(h||(h=c("ThriftTypes"))).STRING;case i.CT_LIST:return(h||(h=c("ThriftTypes"))).LIST;case i.CT_SET:return(h||(h=c("ThriftTypes"))).SET;case i.CT_MAP:return(h||(h=c("ThriftTypes"))).MAP;case i.CT_STRUCT:return(h||(h=c("ThriftTypes"))).STRUCT;default:throw new Error("don't know what type")}};return a}();g["default"]=a}),98);
__d("CompactSerializer",["TCompactProtocol","TNoOpWriteBuffer","TReadBuffer","TWriteBuffer"],(function(a,b,c,d,e,f,g){function a(a,b,c){try{return h(a,b)}catch(a){c!=null&&c(a)}return null}function h(a,b){a=new(c("TReadBuffer"))(a);a=new(c("TCompactProtocol"))(a);return b(a)}function b(a,b,c,d){c===void 0&&(c=!1);try{return i(a,b,c)}catch(a){d!=null&&d(a)}return null}function i(a,b,d){d===void 0&&(d=!1);if(d){d=new(c("TNoOpWriteBuffer"))();var e=new(c("TCompactProtocol"))(d);b(a,e);e=new(c("TWriteBuffer"))(d.currentSize())}else e=new(c("TWriteBuffer"))();d=new(c("TCompactProtocol"))(e);b(a,d);return d.toByteArray()}g.deserializeNoThrow=a;g.deserialize=h;g.serializeNoThrow=b;g.serialize=i}),98);
__d("MultiwaySharedTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({UNKNOWN:0,SFU:1,P2P:2});d=a({UNKNOWN:0,IGVIDEOCALL:9,ROOM:15,CRUCIBLE:20,MBS_WA:21,BOT:22,HORIZON:23,ULLC:24});f=a({OFFER:0,PRANSWER:1,ANSWER:2,PROFFER:3});b=a({LOW:0,MEDIUM:1,HIGH:2,HD:3,NUM_QUALITIES:4});var g=a({E2EE_NOT_MANDATED:0,DEPRECATED_NO_REQUIREMENT:1,E2EE_MANDATED:2}),h=a({NOT_SET:0,CONTROL:1,TEST:2}),i=a({NOT_SET:0,CONTROL:1,TEST:2}),j=a({NotPaused:0,Paused:1}),k=a({AUDIO:0,VIDEO:1,DATA:2}),l=a({UNKNOWN:0,COMPOSITING_SERVICE:1,MEDIA_SERVER:2,CATHODE_AMBISONIC:3,CATHODE_CAPTIONS:4,CATHODE_MEETING_SUMMARIZER:5,CATHODE_REALTIME_SHARED_STATE:6,RP_GENAI_SERVICE:7,SMART_GLASSES_ASSISTANT:8}),m=a({CNAME:0,TRACK:1,DOMINANT_SPEAKER:2}),n=a({UNKNOWN:0,DEFAULT:1,SCREEN_SHARE:2}),o=a({UNSPECIFIED:0,FNA:1,FNA_PREFERRED:2}),p=a({NONE:0,EXTENSION_SELF_PARTICIPANT:1});a=a({IntValue:"intValue",StringValue:"stringValue"});e.exports={ConferenceType:d,CustomMediaRoutingType:p,E2eeInfraMandatedExpStatus:h,E2eeMode:g,EdgerayType:o,EndpointServiceType:l,MediaPath:c,MediaPauseStatus:j,MediaType:k,P2PSFrameExpStatus:i,QuickExperimentValue$Types:a,RenderedStreamType:n,SdpType:f,SubscriptionType:m,VideoQuality:b}}),null);
__d("WebrtcSignalingCommonTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({DEFAULT_AUDIO:0,DEFAULT_VIDEO:1,SCREEN_AUDIO:2,SCREEN_VIDEO:3,CUSTOM_VIDEO:4,CUSTOM_AUDIO:5});d=a({OLD_CLIENT_PLATFORM_STACK:0,RSYS_X:1,IG_OLD_STACK:2,MLITE_OLD_STACK:3,SCOTCH:4,ZENON:5});f=a({NONE:0,AVATAR:1,AUGMENTED_CALLING:2,SCENE_COMPOSITION:3,STEREO_VIDEO:4,SHARED_STATE:5,CODEC_AVATAR_2D:6,CODEC_AVATAR_2D_IMU:7});b=a({NONE:0,AMBISONIC:1,CONVERSATION_BOT:2,MONOMIX:3,MONOSTREAM:4});e.exports={ClientStack:d,CustomAudioContentType:b,CustomVideoContentType:f,TrackLabel:c}}),null);
__d("MultiwaySharedSerializers",["MultiwaySharedTypes","ThriftTypes","WebrtcSignalingCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{cluster:"",nonce:""}}function b(){return{cluster:"",conferenceName:"",nonce:"",userId:"",clientSessionId:""}}function e(){return{userId:"",deviceId:"",appId:"",appVersion:"",appBuildNumber:""}}function f(){return{mode:d("MultiwaySharedTypes").E2eeMode.cast(0),preventSfuMode:!1,infraMandatedExpStatus:d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(0),p2pSFrameExpStatus:d("MultiwaySharedTypes").P2PSFrameExpStatus.cast(0)}}function i(){return{semantics:"",ssrcs:[]}}function j(){return{type:d("MultiwaySharedTypes").MediaType.cast(0),id:"",ssrcs:[],enabled:!1,customVideoContentType:d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0),customAudioContentType:d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0)}}function k(){return{parameters:{},conditionFbid:"0",exposureHasBeenLogged:!1,canExposureLog:!1,universeShortName:"",userFbid:"0",unitId:""}}function l(){return{experiments:{},userFbid:"0"}}function m(){return{conditionFbid:"0",userFbid:"0",universeName:"",unitId:""}}function n(){return{enabled:!1,customVideoContentType:d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0),customAudioContentType:d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0)}}function o(){return{tracks:{}}}function p(){return{videoQuality:d("MultiwaySharedTypes").VideoQuality.cast(0)}}function q(){return{cname:"",type:d("MultiwaySharedTypes").SubscriptionType.cast(0)}}function r(){return{restrictiveLogging:!0,verboseLogging:!1}}function s(){return{userId:"",streamId:"",streamType:0,renderWidth:0,renderHeight:0}}function t(){return{}}function u(){return{}}function v(){return{}}function w(){return{host:Uint8Array.of(),port:0}}function x(){return{}}function y(a,b){b.writeStructBegin("ServerInfo");b.writeFieldBegin({fname:"cluster",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.cluster!=null)b.writeString(a.cluster);else{var d="";b.writeString(d)}b.writeFieldEnd();a.conferenceName_deprecated!=null&&(b.writeFieldBegin({fname:"conferenceName_deprecated",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.conferenceName_deprecated),b.writeFieldEnd());b.writeFieldBegin({fname:"nonce",ftype:h.STRING,fid:3});if(a.nonce!=null)b.writeString(a.nonce);else{d="";b.writeString(d)}b.writeFieldEnd();a.conferenceId!=null&&(b.writeFieldBegin({fname:"conferenceId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:4}),b.writeI64(BigInt(a.conferenceId)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function z(a,b){b.writeStructBegin("ClientSessionInfo");b.writeFieldBegin({fname:"cluster",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.cluster!=null)b.writeString(a.cluster);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"conferenceName",ftype:h.STRING,fid:2});if(a.conferenceName!=null)b.writeString(a.conferenceName);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"nonce",ftype:h.STRING,fid:3});if(a.nonce!=null)b.writeString(a.nonce);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"userId",ftype:h.STRING,fid:4});if(a.userId!=null)b.writeString(a.userId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"clientSessionId",ftype:h.STRING,fid:5});if(a.clientSessionId!=null)b.writeString(a.clientSessionId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function A(a,b){b.writeStructBegin("Endpoint");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"deviceId",ftype:h.STRING,fid:2});if(a.deviceId!=null)b.writeString(a.deviceId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"appId",ftype:h.STRING,fid:3});if(a.appId!=null)b.writeString(a.appId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"appVersion",ftype:h.STRING,fid:4});if(a.appVersion!=null)b.writeString(a.appVersion);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"appBuildNumber",ftype:h.STRING,fid:5});if(a.appBuildNumber!=null)b.writeString(a.appBuildNumber);else{d="";b.writeString(d)}b.writeFieldEnd();a.clientStackInfo!=null&&(b.writeFieldBegin({fname:"clientStackInfo",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:6}),b.writeString(a.clientStackInfo),b.writeFieldEnd());a.familyDeviceId!=null&&(b.writeFieldBegin({fname:"familyDeviceId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeString(a.familyDeviceId),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function B(a,b){b.writeStructBegin("E2eeEnforcement");b.writeFieldBegin({fname:"mode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.mode!=null){var e;b.writeI32((e=a.mode)!=null?e:0)}else{e=d("MultiwaySharedTypes").E2eeMode.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"preventSfuMode",ftype:h.BOOL,fid:2});if(a.preventSfuMode!=null)b.writeBool(a.preventSfuMode);else{e=!1;b.writeBool(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"infraMandatedExpStatus",ftype:h.I32,fid:3});if(a.infraMandatedExpStatus!=null){b.writeI32((e=a.infraMandatedExpStatus)!=null?e:0)}else{e=d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"p2pSFrameExpStatus",ftype:h.I32,fid:4});if(a.p2pSFrameExpStatus!=null){b.writeI32((e=a.p2pSFrameExpStatus)!=null?e:0)}else{a=d("MultiwaySharedTypes").P2PSFrameExpStatus.cast(0);b.writeI32(a!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function C(a,b){b.writeStructBegin("SsrcGroup");b.writeFieldBegin({fname:"semantics",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.semantics!=null)b.writeString(a.semantics);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"ssrcs",ftype:h.LIST,fid:2});if(a.ssrcs!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I64,size:a.ssrcs.length});for(d of a.ssrcs)b.writeI64(BigInt(d));b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I64,size:a.length});for(d of a)b.writeI64(BigInt(d));b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function D(a,b){b.writeStructBegin("Media");b.writeFieldBegin({fname:"type",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.type!=null){var e;b.writeI32((e=a.type)!=null?e:0)}else{e=d("MultiwaySharedTypes").MediaType.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"id",ftype:h.STRING,fid:2});if(a.id!=null)b.writeString(a.id);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"ssrcs",ftype:h.LIST,fid:3});if(a.ssrcs!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I64,size:a.ssrcs.length});for(e of a.ssrcs)b.writeI64(BigInt(e));b.writeListEnd()}else{e=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I64,size:e.length});for(e of e)b.writeI64(BigInt(e));b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"enabled",ftype:h.BOOL,fid:4});if(a.enabled!=null)b.writeBool(a.enabled);else{e=!1;b.writeBool(e)}b.writeFieldEnd();if(a.pausedDownlink!=null){b.writeFieldBegin({fname:"pausedDownlink",ftype:(h||(h=c("ThriftTypes"))).I32,fid:5});b.writeI32((e=a.pausedDownlink)!=null?e:0);b.writeFieldEnd()}if(a.pausedUplink!=null){b.writeFieldBegin({fname:"pausedUplink",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6});b.writeI32((e=a.pausedUplink)!=null?e:0);b.writeFieldEnd()}a.owner!=null&&(b.writeFieldBegin({fname:"owner",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeString(a.owner),b.writeFieldEnd());if(a.label!=null){b.writeFieldBegin({fname:"label",ftype:(h||(h=c("ThriftTypes"))).I32,fid:8});b.writeI32((e=a.label)!=null?e:0);b.writeFieldEnd()}b.writeFieldBegin({fname:"customVideoContentType",ftype:h.I32,fid:9});if(a.customVideoContentType!=null){b.writeI32((e=a.customVideoContentType)!=null?e:0)}else{e=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.name!=null&&(b.writeFieldBegin({fname:"name",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:10}),b.writeString(a.name),b.writeFieldEnd());b.writeFieldBegin({fname:"customAudioContentType",ftype:h.I32,fid:11});if(a.customAudioContentType!=null){b.writeI32((e=a.customAudioContentType)!=null?e:0)}else{a=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0);b.writeI32(a!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function E(a,b){b.writeStructBegin("QuickExperiment");b.writeFieldBegin({fname:"parameters",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.parameters!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.parameters).length});for(var d of Object.entries(a.parameters)){var e=d[0],f=d[1];b.writeString(e);R(f,b)}b.writeMapEnd()}else{e={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(e).length});for(f of Object.entries(e)){d=f[0];e=f[1];b.writeString(d);R(e,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"conditionFbid",ftype:h.I64,fid:2});if(a.conditionFbid!=null)b.writeI64(BigInt(a.conditionFbid));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"exposureHasBeenLogged",ftype:h.BOOL,fid:3});if(a.exposureHasBeenLogged!=null)b.writeBool(a.exposureHasBeenLogged);else{e=!1;b.writeBool(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"canExposureLog",ftype:h.BOOL,fid:4});if(a.canExposureLog!=null)b.writeBool(a.canExposureLog);else{f=!1;b.writeBool(f)}b.writeFieldEnd();b.writeFieldBegin({fname:"universeShortName",ftype:h.STRING,fid:5});if(a.universeShortName!=null)b.writeString(a.universeShortName);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"userFbid",ftype:h.I64,fid:6});if(a.userFbid!=null)b.writeI64(BigInt(a.userFbid));else{e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"unitId",ftype:h.STRING,fid:7});if(a.unitId!=null)b.writeString(a.unitId);else{f="";b.writeString(f)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function F(a,b){b.writeStructBegin("QuickExperimentResult");b.writeFieldBegin({fname:"experiments",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.experiments!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.experiments).length});for(var d of Object.entries(a.experiments)){var e=d[0],f=d[1];b.writeString(e);E(f,b)}b.writeMapEnd()}else{e={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(e).length});for(f of Object.entries(e)){d=f[0];e=f[1];b.writeString(d);E(e,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"userFbid",ftype:h.I64,fid:2});if(a.userFbid!=null)b.writeI64(BigInt(a.userFbid));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function G(a,b){b.writeStructBegin("QuickExperimentExposureLoggingEvent");b.writeFieldBegin({fname:"conditionFbid",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.conditionFbid!=null)b.writeI64(BigInt(a.conditionFbid));else{var d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"userFbid",ftype:h.I64,fid:2});if(a.userFbid!=null)b.writeI64(BigInt(a.userFbid));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"universeName",ftype:h.STRING,fid:3});if(a.universeName!=null)b.writeString(a.universeName);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"unitId",ftype:h.STRING,fid:4});if(a.unitId!=null)b.writeString(a.unitId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function H(a,b){b.writeStructBegin("ClientTrackInfo");b.writeFieldBegin({fname:"enabled",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:1});if(a.enabled!=null)b.writeBool(a.enabled);else{var e=!1;b.writeBool(e)}b.writeFieldEnd();if(a.pausedUplink!=null){b.writeFieldBegin({fname:"pausedUplink",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});b.writeI32((e=a.pausedUplink)!=null?e:0);b.writeFieldEnd()}if(a.pausedDownlink!=null){b.writeFieldBegin({fname:"pausedDownlink",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3});b.writeI32((e=a.pausedDownlink)!=null?e:0);b.writeFieldEnd()}a.owner!=null&&(b.writeFieldBegin({fname:"owner",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.owner),b.writeFieldEnd());if(a.label!=null){b.writeFieldBegin({fname:"label",ftype:(h||(h=c("ThriftTypes"))).I32,fid:5});b.writeI32((e=a.label)!=null?e:0);b.writeFieldEnd()}b.writeFieldBegin({fname:"customVideoContentType",ftype:h.I32,fid:6});if(a.customVideoContentType!=null){b.writeI32((e=a.customVideoContentType)!=null?e:0)}else{e=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.name!=null&&(b.writeFieldBegin({fname:"name",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeString(a.name),b.writeFieldEnd());b.writeFieldBegin({fname:"customAudioContentType",ftype:h.I32,fid:8});if(a.customAudioContentType!=null){b.writeI32((e=a.customAudioContentType)!=null?e:0)}else{e=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.nodeId!=null&&(b.writeFieldBegin({fname:"nodeId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:9}),b.writeI64(BigInt(a.nodeId)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function I(a,b){b.writeStructBegin("ClientMediaStatus");b.writeFieldBegin({fname:"tracks",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.tracks!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.tracks).length});for(a of Object.entries(a.tracks)){var d=a[0],e=a[1];b.writeString(d);H(e,b)}b.writeMapEnd()}else{d={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(d).length});for(e of Object.entries(d)){a=e[0];d=e[1];b.writeString(a);H(d,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function J(a,b){b.writeStructBegin("SubscriptionOptions");b.writeFieldBegin({fname:"videoQuality",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.videoQuality!=null){var e;b.writeI32((e=a.videoQuality)!=null?e:0)}else{e=d("MultiwaySharedTypes").VideoQuality.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.qualityIndex!=null&&(b.writeFieldBegin({fname:"qualityIndex",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2}),b.writeI32(a.qualityIndex),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function K(a,b){b.writeStructBegin("Subscription");b.writeFieldBegin({fname:"cname",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.cname!=null)b.writeString(a.cname);else{var e="";b.writeString(e)}b.writeFieldEnd();a.options!=null&&(b.writeFieldBegin({fname:"options",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),J(a.options,b),b.writeFieldEnd());b.writeFieldBegin({fname:"type",ftype:h.I32,fid:3});if(a.type!=null){b.writeI32((e=a.type)!=null?e:0)}else{e=d("MultiwaySharedTypes").SubscriptionType.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.trackId!=null&&(b.writeFieldBegin({fname:"trackId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.trackId),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function L(a,b){b.writeStructBegin("LoggingOptions");b.writeFieldBegin({fname:"restrictiveLogging",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:1});if(a.restrictiveLogging!=null)b.writeBool(a.restrictiveLogging);else{var d=!0;b.writeBool(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"verboseLogging",ftype:h.BOOL,fid:2});if(a.verboseLogging!=null)b.writeBool(a.verboseLogging);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function M(a,b){b.writeStructBegin("ResolutionData");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"streamId",ftype:h.STRING,fid:2});if(a.streamId!=null)b.writeString(a.streamId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"streamType",ftype:h.I32,fid:3});if(a.streamType!=null)b.writeI32(a.streamType);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"renderWidth",ftype:h.I32,fid:4});if(a.renderWidth!=null)b.writeI32(a.renderWidth);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"renderHeight",ftype:h.I32,fid:5});if(a.renderHeight!=null)b.writeI32(a.renderHeight);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function N(a,b){b.writeStructBegin("TurnInfo"),a.ipv4!=null&&(b.writeFieldBegin({fname:"ipv4",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeBinary(a.ipv4),b.writeFieldEnd()),a.ipv6!=null&&(b.writeFieldBegin({fname:"ipv6",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.ipv6),b.writeFieldEnd()),a.udpPort!=null&&(b.writeFieldBegin({fname:"udpPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3}),b.writeI32(a.udpPort),b.writeFieldEnd()),a.tcpPort!=null&&(b.writeFieldBegin({fname:"tcpPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:4}),b.writeI32(a.tcpPort),b.writeFieldEnd()),a.sslTcpPort!=null&&(b.writeFieldBegin({fname:"sslTcpPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:5}),b.writeI32(a.sslTcpPort),b.writeFieldEnd()),a.portInfoIdx!=null&&(b.writeFieldBegin({fname:"portInfoIdx",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6}),b.writeI32(a.portInfoIdx),b.writeFieldEnd()),a.tlsPort!=null&&(b.writeFieldBegin({fname:"tlsPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:7}),b.writeI32(a.tlsPort),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function O(a,b){b.writeStructBegin("EdgerayInfo");if(a.edgerayType!=null){var d;b.writeFieldBegin({fname:"edgerayType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});b.writeI32((d=a.edgerayType)!=null?d:0);b.writeFieldEnd()}a.ipv4!=null&&(b.writeFieldBegin({fname:"ipv4",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.ipv4),b.writeFieldEnd());a.ipv6!=null&&(b.writeFieldBegin({fname:"ipv6",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeBinary(a.ipv6),b.writeFieldEnd());a.token!=null&&(b.writeFieldBegin({fname:"token",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.token),b.writeFieldEnd());a.tokenIdx!=null&&(b.writeFieldBegin({fname:"tokenIdx",ftype:(h||(h=c("ThriftTypes"))).I32,fid:5}),b.writeI32(a.tokenIdx),b.writeFieldEnd());a.secret!=null&&(b.writeFieldBegin({fname:"secret",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:6}),b.writeBinary(a.secret),b.writeFieldEnd());a.secretIdx!=null&&(b.writeFieldBegin({fname:"secretIdx",ftype:(h||(h=c("ThriftTypes"))).I32,fid:7}),b.writeI32(a.secretIdx),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function P(a,b){b.writeStructBegin("RelayInfo");if(a.turns!=null){b.writeFieldBegin({fname:"turns",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});b.writeListBegin({etype:h.STRUCT,size:a.turns.length});for(var d of a.turns)N(d,b);b.writeListEnd();b.writeFieldEnd()}if(a.edgerays!=null){b.writeFieldBegin({fname:"edgerays",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.edgerays.length});for(d of a.edgerays)O(d,b);b.writeListEnd();b.writeFieldEnd()}a.turnUsername!=null&&(b.writeFieldBegin({fname:"turnUsername",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.turnUsername),b.writeFieldEnd());a.turnPassword!=null&&(b.writeFieldBegin({fname:"turnPassword",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.turnPassword),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function Q(a,b){b.writeStructBegin("TSocketAddress");b.writeFieldBegin({fname:"host",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.host!=null)b.writeBinary(a.host);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"port",ftype:h.I16,fid:2});if(a.port!=null)b.writeI16(a.port);else{d=0;b.writeI16(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function R(a,b){b.writeStructBegin("QuickExperimentValue");if(a.intValue!=null){b.writeFieldBegin({fname:"intValue",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});b.writeI64(BigInt(a.intValue));b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.stringValue!=null){b.writeFieldBegin({fname:"stringValue",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});b.writeString(a.stringValue);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}b.writeFieldStop();b.writeStructEnd()}function S(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.cluster=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.conferenceName_deprecated=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.nonce=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I64?b.conferenceId=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.cluster===void 0&&(b.cluster="");b.nonce===void 0&&(b.nonce="");return b}function T(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.cluster=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.conferenceName=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.nonce=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRING?b.clientSessionId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.cluster===void 0&&(b.cluster="");b.conferenceName===void 0&&(b.conferenceName="");b.nonce===void 0&&(b.nonce="");b.userId===void 0&&(b.userId="");b.clientSessionId===void 0&&(b.clientSessionId="");return b}function U(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.deviceId=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.appId=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.appVersion=a.readString():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRING?b.appBuildNumber=a.readString():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).STRING?b.clientStackInfo=a.readString():a.skip(e);break;case 7:e===(h||(h=c("ThriftTypes"))).STRING?b.familyDeviceId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");b.deviceId===void 0&&(b.deviceId="");b.appId===void 0&&(b.appId="");b.appVersion===void 0&&(b.appVersion="");b.appBuildNumber===void 0&&(b.appBuildNumber="");return b}function aa(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.mode=d("MultiwaySharedTypes").E2eeMode.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).BOOL?b.preventSfuMode=a.readBool():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.infraMandatedExpStatus=d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.p2pSFrameExpStatus=d("MultiwaySharedTypes").P2PSFrameExpStatus.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.mode===void 0&&(b.mode=d("MultiwaySharedTypes").E2eeMode.cast(0));b.preventSfuMode===void 0&&(b.preventSfuMode=!1);b.infraMandatedExpStatus===void 0&&(b.infraMandatedExpStatus=d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(0));b.p2pSFrameExpStatus===void 0&&(b.p2pSFrameExpStatus=d("MultiwaySharedTypes").P2PSFrameExpStatus.cast(0));return b}function ba(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.semantics=a.readString():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.ssrcs=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readI64().toString();b.ssrcs.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.semantics===void 0&&(b.semantics="");b.ssrcs===void 0&&(b.ssrcs=[]);return b}function ca(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.type=d("MultiwaySharedTypes").MediaType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.id=a.readString():a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).LIST){b.ssrcs=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=a.readI64().toString();b.ssrcs.push(i)}}else a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).BOOL?b.enabled=a.readBool():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.pausedDownlink=d("MultiwaySharedTypes").MediaPauseStatus.cast(a.readI32()):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.pausedUplink=d("MultiwaySharedTypes").MediaPauseStatus.cast(a.readI32()):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRING?b.owner=a.readString():a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).I32?b.label=d("WebrtcSignalingCommonTypes").TrackLabel.cast(a.readI32()):a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).I32?b.customVideoContentType=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32()):a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRING?b.name=a.readString():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).I32?b.customAudioContentType=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.type===void 0&&(b.type=d("MultiwaySharedTypes").MediaType.cast(0));b.id===void 0&&(b.id="");b.ssrcs===void 0&&(b.ssrcs=[]);b.enabled===void 0&&(b.enabled=!1);b.customVideoContentType===void 0&&(b.customVideoContentType=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0));b.customAudioContentType===void 0&&(b.customAudioContentType=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0));return b}function V(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.parameters={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readString(),i=$(a);b.parameters[g]=i}}else a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.conditionFbid=a.readI64().toString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).BOOL?b.exposureHasBeenLogged=a.readBool():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).BOOL?b.canExposureLog=a.readBool():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRING?b.universeShortName=a.readString():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).I64?b.userFbid=a.readI64().toString():a.skip(e);break;case 7:e===(h||(h=c("ThriftTypes"))).STRING?b.unitId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.parameters===void 0&&(b.parameters={});b.conditionFbid===void 0&&(b.conditionFbid="0");b.exposureHasBeenLogged===void 0&&(b.exposureHasBeenLogged=!1);b.canExposureLog===void 0&&(b.canExposureLog=!1);b.universeShortName===void 0&&(b.universeShortName="");b.userFbid===void 0&&(b.userFbid="0");b.unitId===void 0&&(b.unitId="");return b}function da(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.experiments={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readString(),i=V(a);b.experiments[g]=i}}else a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.userFbid=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.experiments===void 0&&(b.experiments={});b.userFbid===void 0&&(b.userFbid="0");return b}function ea(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.conditionFbid=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.userFbid=a.readI64().toString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.universeName=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.unitId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.conditionFbid===void 0&&(b.conditionFbid="0");b.userFbid===void 0&&(b.userFbid="0");b.universeName===void 0&&(b.universeName="");b.unitId===void 0&&(b.unitId="");return b}function W(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).BOOL?b.enabled=a.readBool():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.pausedUplink=d("MultiwaySharedTypes").MediaPauseStatus.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.pausedDownlink=d("MultiwaySharedTypes").MediaPauseStatus.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.owner=a.readString():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.label=d("WebrtcSignalingCommonTypes").TrackLabel.cast(a.readI32()):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.customVideoContentType=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32()):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRING?b.name=a.readString():a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).I32?b.customAudioContentType=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(a.readI32()):a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).I64?b.nodeId=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.enabled===void 0&&(b.enabled=!1);b.customVideoContentType===void 0&&(b.customVideoContentType=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0));b.customAudioContentType===void 0&&(b.customAudioContentType=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0));return b}function fa(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.tracks={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readString(),i=W(a);b.tracks[g]=i}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.tracks===void 0&&(b.tracks={});return b}function X(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.videoQuality=d("MultiwaySharedTypes").VideoQuality.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.qualityIndex=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.videoQuality===void 0&&(b.videoQuality=d("MultiwaySharedTypes").VideoQuality.cast(0));return b}function ga(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.cname=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.options=X(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.type=d("MultiwaySharedTypes").SubscriptionType.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.trackId=a.readString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.cname===void 0&&(b.cname="");b.type===void 0&&(b.type=d("MultiwaySharedTypes").SubscriptionType.cast(0));return b}function ha(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).BOOL?b.restrictiveLogging=a.readBool():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).BOOL?b.verboseLogging=a.readBool():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.restrictiveLogging===void 0&&(b.restrictiveLogging=!0);b.verboseLogging===void 0&&(b.verboseLogging=!1);return b}function ia(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.streamId=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.streamType=a.readI32():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I32?b.renderWidth=a.readI32():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).I32?b.renderHeight=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");b.streamId===void 0&&(b.streamId="");b.streamType===void 0&&(b.streamType=0);b.renderWidth===void 0&&(b.renderWidth=0);b.renderHeight===void 0&&(b.renderHeight=0);return b}function Y(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.ipv4=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.ipv6=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.udpPort=a.readI32():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I32?b.tcpPort=a.readI32():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).I32?b.sslTcpPort=a.readI32():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).I32?b.portInfoIdx=a.readI32():a.skip(e);break;case 7:e===(h||(h=c("ThriftTypes"))).I32?b.tlsPort=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Z(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.edgerayType=d("MultiwaySharedTypes").EdgerayType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.ipv4=a.readBinary():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.ipv6=a.readBinary():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.token=a.readBinary():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.tokenIdx=a.readI32():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRING?b.secret=a.readBinary():a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).I32?b.secretIdx=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function ja(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).LIST){b.turns=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=Y(a);b.turns.push(g)}}else a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.edgerays=[];g=a.readListBegin();for(f=0;f<g.size;f++){d=Z(a);b.edgerays.push(d)}}else a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.turnUsername=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.turnPassword=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function ka(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.host=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I16?b.port=a.readI16():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.host===void 0&&(b.host=Uint8Array.of());b.port===void 0&&(b.port=0);return b}function $(a){var b,d={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).I64)if(b==null)d.intValue=a.readI64().toString(),b="intValue";else throw new Error("more than one field have been deserialized in union type: QuickExperimentValue; current field: intValue, previous deserialized field: "+b);else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).STRING)if(b==null)d.stringValue=a.readString(),b="stringValue";else throw new Error("more than one field have been deserialized in union type: QuickExperimentValue; current field: stringValue, previous deserialized field: "+b);else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return d}g.ServerInfo$DefaultConstructor=a;g.ClientSessionInfo$DefaultConstructor=b;g.Endpoint$DefaultConstructor=e;g.E2eeEnforcement$DefaultConstructor=f;g.SsrcGroup$DefaultConstructor=i;g.Media$DefaultConstructor=j;g.QuickExperiment$DefaultConstructor=k;g.QuickExperimentResult$DefaultConstructor=l;g.QuickExperimentExposureLoggingEvent$DefaultConstructor=m;g.ClientTrackInfo$DefaultConstructor=n;g.ClientMediaStatus$DefaultConstructor=o;g.SubscriptionOptions$DefaultConstructor=p;g.Subscription$DefaultConstructor=q;g.LoggingOptions$DefaultConstructor=r;g.ResolutionData$DefaultConstructor=s;g.TurnInfo$DefaultConstructor=t;g.EdgerayInfo$DefaultConstructor=u;g.RelayInfo$DefaultConstructor=v;g.TSocketAddress$DefaultConstructor=w;g.QuickExperimentValue$DefaultConstructor=x;g.serializeServerInfo=y;g.serializeClientSessionInfo=z;g.serializeEndpoint=A;g.serializeE2eeEnforcement=B;g.serializeSsrcGroup=C;g.serializeMedia=D;g.serializeQuickExperiment=E;g.serializeQuickExperimentResult=F;g.serializeQuickExperimentExposureLoggingEvent=G;g.serializeClientTrackInfo=H;g.serializeClientMediaStatus=I;g.serializeSubscriptionOptions=J;g.serializeSubscription=K;g.serializeLoggingOptions=L;g.serializeResolutionData=M;g.serializeTurnInfo=N;g.serializeEdgerayInfo=O;g.serializeRelayInfo=P;g.serializeTSocketAddress=Q;g.serializeQuickExperimentValue=R;g.deserializeServerInfo=S;g.deserializeClientSessionInfo=T;g.deserializeEndpoint=U;g.deserializeE2eeEnforcement=aa;g.deserializeSsrcGroup=ba;g.deserializeMedia=ca;g.deserializeQuickExperiment=V;g.deserializeQuickExperimentResult=da;g.deserializeQuickExperimentExposureLoggingEvent=ea;g.deserializeClientTrackInfo=W;g.deserializeClientMediaStatus=fa;g.deserializeSubscriptionOptions=X;g.deserializeSubscription=ga;g.deserializeLoggingOptions=ha;g.deserializeResolutionData=ia;g.deserializeTurnInfo=Y;g.deserializeEdgerayInfo=Z;g.deserializeRelayInfo=ja;g.deserializeTSocketAddress=ka;g.deserializeQuickExperimentValue=$}),98);
__d("WebrtcSignalingCommonSerializers",["ThriftTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{topic:"",data:Uint8Array.of()}}function b(a,b){b.writeStructBegin("GenericDataMessage");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"data",ftype:h.STRING,fid:2});if(a.data!=null)b.writeBinary(a.data);else{d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.e2eEncryptedData!=null&&(b.writeFieldBegin({fname:"e2eEncryptedData",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeBinary(a.e2eEncryptedData),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function d(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.data=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.e2eEncryptedData=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.data===void 0&&(b.data=Uint8Array.of());return b}g.GenericDataMessage$DefaultConstructor=a;g.serializeGenericDataMessage=b;g.deserializeGenericDataMessage=d}),98);
__d("DataMessageSerializers",["MultiwaySharedSerializers","MultiwaySharedTypes","ThriftTypes","WebrtcSignalingCommonSerializers"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){return{topic_DEPRECATED:""}}function a(){return{userId:""}}function b(){return{userId:"",cname:"",trackIds:[],transactionId:"0"}}function e(){return{cname:"",quality_DEPRECATED:d("MultiwaySharedTypes").VideoQuality.cast(0)}}function f(){return{userId:"",bottleneckBps:0}}function j(){return{bottleneckUplinksByLayer:{}}}function k(){return{duplicationAmount:0,delayMs:0}}function l(){return{}}function m(){return{}}function n(){return{primarySpeakerUserId:"",transactionId:"0"}}function o(){return{}}function p(){return{signalingMessagePayload:Uint8Array.of()}}function q(){return{signalingMessagePayload:Uint8Array.of()}}function r(){return{subscriptionMessagePayload:[]}}function s(){return{}}function t(){return{}}function u(){return{nodeIdToUserIdMap:{},nodeIdToServiceTypeMap:{}}}function v(){return{}}function w(){return{header:i()}}function x(a,b){b.writeStructBegin("DataHeader");a.sender!=null&&(b.writeFieldBegin({fname:"sender",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.sender),b.writeFieldEnd());b.writeFieldBegin({fname:"topic_DEPRECATED",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.topic_DEPRECATED!=null)b.writeString(a.topic_DEPRECATED);else{var d="";b.writeString(d)}b.writeFieldEnd();if(a.recipients!=null){b.writeFieldBegin({fname:"recipients",ftype:(h||(h=c("ThriftTypes"))).SET,fid:3});b.writeSetBegin({etype:h.STRING,size:a.recipients.size});for(d of a.recipients)b.writeString(d);b.writeSetEnd();b.writeFieldEnd()}if(a.serviceSender!=null){b.writeFieldBegin({fname:"serviceSender",ftype:(h||(h=c("ThriftTypes"))).I32,fid:4});b.writeI32((d=a.serviceSender)!=null?d:0);b.writeFieldEnd()}if(a.serviceRecipients!=null){b.writeFieldBegin({fname:"serviceRecipients",ftype:(h||(h=c("ThriftTypes"))).SET,fid:5});b.writeSetBegin({etype:h.I32,size:a.serviceRecipients.size});for(d of a.serviceRecipients)b.writeI32(d!=null?d:0);b.writeSetEnd();b.writeFieldEnd()}a.shouldSendToAllUsers!=null&&(b.writeFieldBegin({fname:"shouldSendToAllUsers",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:6}),b.writeBool(a.shouldSendToAllUsers),b.writeFieldEnd());a.senderE2eeId!=null&&(b.writeFieldBegin({fname:"senderE2eeId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeBinary(a.senderE2eeId),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function y(a,b){b.writeStructBegin("SpeakerDetail");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{a="";b.writeString(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function z(a,b){b.writeStructBegin("DominantSpeakerNotification");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"cname",ftype:h.STRING,fid:2});if(a.cname!=null)b.writeString(a.cname);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"trackIds",ftype:h.LIST,fid:4});if(a.trackIds!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.trackIds.length});for(d of a.trackIds)b.writeString(d);b.writeListEnd()}else{d=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:d.length});for(d of d)b.writeString(d);b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"transactionId",ftype:h.I64,fid:5});if(a.transactionId!=null)b.writeI64(BigInt(a.transactionId));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();if(a.dominantSpeakers!=null){b.writeFieldBegin({fname:"dominantSpeakers",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:6});b.writeListBegin({etype:h.STRUCT,size:a.dominantSpeakers.length});for(d of a.dominantSpeakers)y(d,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function A(a,b){b.writeStructBegin("VideoUploadRequest");b.writeFieldBegin({fname:"cname",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.cname!=null)b.writeString(a.cname);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"quality_DEPRECATED",ftype:h.I32,fid:2});if(a.quality_DEPRECATED!=null){b.writeI32((e=a.quality_DEPRECATED)!=null?e:0)}else{e=d("MultiwaySharedTypes").VideoQuality.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.qualityMask!=null&&(b.writeFieldBegin({fname:"qualityMask",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3}),b.writeI32(a.qualityMask),b.writeFieldEnd());if(a.perSsrcTargetBitrateBpsMap!=null){b.writeFieldBegin({fname:"perSsrcTargetBitrateBpsMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:4});b.writeMapBegin({ktype:h.I64,vtype:h.I64,size:Object.keys(a.perSsrcTargetBitrateBpsMap).length});for(e of Object.entries(a.perSsrcTargetBitrateBpsMap)){a=e[0];var f=e[1];b.writeI64(BigInt(a));b.writeI64(BigInt(f))}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function B(a,b){b.writeStructBegin("ReceiverBottleneck");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"bottleneckBps",ftype:h.I32,fid:2});if(a.bottleneckBps!=null)b.writeI32(a.bottleneckBps);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function C(a,b){b.writeStructBegin("BweDebugInfo");b.writeFieldBegin({fname:"bottleneckUplinksByLayer",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.bottleneckUplinksByLayer!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(a.bottleneckUplinksByLayer).length});for(a of Object.entries(a.bottleneckUplinksByLayer)){var d=a[0],e=a[1];b.writeI32(Number(d));B(e,b)}b.writeMapEnd()}else{d={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(d).length});for(e of Object.entries(d)){a=e[0];d=e[1];b.writeI32(Number(a));B(d,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function D(a,b){b.writeStructBegin("AudioDuplicationDebugInfo");b.writeFieldBegin({fname:"duplicationAmount",ftype:(h||(h=c("ThriftTypes"))).I16,fid:1});if(a.duplicationAmount!=null)b.writeI16(a.duplicationAmount);else{var d=0;b.writeI16(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"delayMs",ftype:h.I16,fid:2});if(a.delayMs!=null)b.writeI16(a.delayMs);else{d=0;b.writeI16(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function E(a,b){b.writeStructBegin("ReceiveTrackDebugInfo"),a.trackId!=null&&(b.writeFieldBegin({fname:"trackId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.trackId),b.writeFieldEnd()),a.numSimulcastLayersSupported!=null&&(b.writeFieldBegin({fname:"numSimulcastLayersSupported",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2}),b.writeI32(a.numSimulcastLayersSupported),b.writeFieldEnd()),a.numSimulcastLayersAllocated!=null&&(b.writeFieldBegin({fname:"numSimulcastLayersAllocated",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3}),b.writeI32(a.numSimulcastLayersAllocated),b.writeFieldEnd()),a.spatialLayerIndex!=null&&(b.writeFieldBegin({fname:"spatialLayerIndex",ftype:(h||(h=c("ThriftTypes"))).I32,fid:4}),b.writeI32(a.spatialLayerIndex),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function F(a,b){b.writeStructBegin("DebugInfo");a.audioDuplicationDebugInfo!=null&&(b.writeFieldBegin({fname:"audioDuplicationDebugInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),D(a.audioDuplicationDebugInfo,b),b.writeFieldEnd());if(a.receiveTrackDebugInfo!=null){b.writeFieldBegin({fname:"receiveTrackDebugInfo",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.receiveTrackDebugInfo.length});for(a of a.receiveTrackDebugInfo)E(a,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function G(a,b){b.writeStructBegin("DominantSpeakerInfo");b.writeFieldBegin({fname:"primarySpeakerUserId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.primarySpeakerUserId!=null)b.writeString(a.primarySpeakerUserId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"transactionId",ftype:h.I64,fid:2});if(a.transactionId!=null)b.writeI64(BigInt(a.transactionId));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function H(a,b){b.writeStructBegin("VideoUploadInfo");a.qualityMask!=null&&(b.writeFieldBegin({fname:"qualityMask",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1}),b.writeI32(a.qualityMask),b.writeFieldEnd());if(a.perSsrcTargetBitrateBpsMap!=null){b.writeFieldBegin({fname:"perSsrcTargetBitrateBpsMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:2});b.writeMapBegin({ktype:h.I64,vtype:h.I64,size:Object.keys(a.perSsrcTargetBitrateBpsMap).length});for(a of Object.entries(a.perSsrcTargetBitrateBpsMap)){var d=a[0],e=a[1];b.writeI64(BigInt(d));b.writeI64(BigInt(e))}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function I(a,b){b.writeStructBegin("SignalingMessageToClient");b.writeFieldBegin({fname:"signalingMessagePayload",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.signalingMessagePayload!=null)b.writeBinary(a.signalingMessagePayload);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.version!=null&&(b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2}),b.writeI64(BigInt(a.version)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function J(a,b){b.writeStructBegin("SignalingMessageFromClient");b.writeFieldBegin({fname:"signalingMessagePayload",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.signalingMessagePayload!=null)b.writeBinary(a.signalingMessagePayload);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.version!=null&&(b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2}),b.writeI64(BigInt(a.version)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function K(a,b){b.writeStructBegin("SubscriptionMessageFromClient");b.writeFieldBegin({fname:"subscriptionMessagePayload",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});if(a.subscriptionMessagePayload!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.subscriptionMessagePayload.length});for(a of a.subscriptionMessagePayload)d("MultiwaySharedSerializers").serializeSubscription(a,b);b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.length});for(a of a)d("MultiwaySharedSerializers").serializeSubscription(a,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function L(a,b){b.writeStructBegin("RenderResolutionMessageFromClient");if(a.renderResolutionMap!=null){b.writeFieldBegin({fname:"renderResolutionMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});b.writeMapBegin({ktype:h.STRING,vtype:h.MAP,size:Object.keys(a.renderResolutionMap).length});for(a of Object.entries(a.renderResolutionMap)){var e=a[0],f=a[1];b.writeString(e);b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(f).length});for(e of Object.entries(f)){f=e[0];var g=e[1];b.writeI32((f=Number(f))!=null?f:0);d("MultiwaySharedSerializers").serializeResolutionData(g,b)}b.writeMapEnd()}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function aa(a,b){b.writeStructBegin("RenderResolutionMessageToClient");if(a.renderResolutionMap!=null){b.writeFieldBegin({fname:"renderResolutionMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});b.writeMapBegin({ktype:h.STRING,vtype:h.MAP,size:Object.keys(a.renderResolutionMap).length});for(a of Object.entries(a.renderResolutionMap)){var e=a[0],f=a[1];b.writeString(e);b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(f).length});for(e of Object.entries(f)){f=e[0];var g=e[1];b.writeI32((f=Number(f))!=null?f:0);d("MultiwaySharedSerializers").serializeResolutionData(g,b)}b.writeMapEnd()}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function ba(a,b){b.writeStructBegin("NodeIdNotification");b.writeFieldBegin({fname:"nodeIdToUserIdMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.nodeIdToUserIdMap!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I64,vtype:h.I64,size:Object.keys(a.nodeIdToUserIdMap).length});for(var d of Object.entries(a.nodeIdToUserIdMap)){var e=d[0],f=d[1];b.writeI64(BigInt(e));b.writeI64(BigInt(f))}b.writeMapEnd()}else{e={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I64,vtype:h.I64,size:Object.keys(e).length});for(f of Object.entries(e)){d=f[0];e=f[1];b.writeI64(BigInt(d));b.writeI64(BigInt(e))}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"nodeIdToServiceTypeMap",ftype:h.MAP,fid:2});if(a.nodeIdToServiceTypeMap!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I64,vtype:h.I32,size:Object.keys(a.nodeIdToServiceTypeMap).length});for(d of Object.entries(a.nodeIdToServiceTypeMap)){e=d[0];f=d[1];b.writeI64(BigInt(e));b.writeI32(f!=null?f:0)}b.writeMapEnd()}else{a={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I64,vtype:h.I32,size:Object.keys(a).length});for(e of Object.entries(a)){f=e[0];d=e[1];b.writeI64(BigInt(f));b.writeI32(d!=null?d:0)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function M(a,b){b.writeStructBegin("DataMessageBody"),a.genericMessage!=null&&(b.writeFieldBegin({fname:"genericMessage",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),d("WebrtcSignalingCommonSerializers").serializeGenericDataMessage(a.genericMessage,b),b.writeFieldEnd()),a.dominantSpeakerNotification!=null&&(b.writeFieldBegin({fname:"dominantSpeakerNotification",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),z(a.dominantSpeakerNotification,b),b.writeFieldEnd()),a.videoUploadRequest!=null&&(b.writeFieldBegin({fname:"videoUploadRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),A(a.videoUploadRequest,b),b.writeFieldEnd()),a.dominantSpeakerSignalingInfo!=null&&(b.writeFieldBegin({fname:"dominantSpeakerSignalingInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),G(a.dominantSpeakerSignalingInfo,b),b.writeFieldEnd()),a.bweDebugInfo!=null&&(b.writeFieldBegin({fname:"bweDebugInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5}),C(a.bweDebugInfo,b),b.writeFieldEnd()),a.debugInfo!=null&&(b.writeFieldBegin({fname:"debugInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),F(a.debugInfo,b),b.writeFieldEnd()),a.videoUploadSignalingInfo!=null&&(b.writeFieldBegin({fname:"videoUploadSignalingInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7}),H(a.videoUploadSignalingInfo,b),b.writeFieldEnd()),a.signalingMessageToClient!=null&&(b.writeFieldBegin({fname:"signalingMessageToClient",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:8}),I(a.signalingMessageToClient,b),b.writeFieldEnd()),a.signalingMessageFromClient!=null&&(b.writeFieldBegin({fname:"signalingMessageFromClient",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:9}),J(a.signalingMessageFromClient,b),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function ca(a,b){b.writeStructBegin("DataMessage");b.writeFieldBegin({fname:"header",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.header!=null)x(a.header,b);else{var d=i();x(d,b)}b.writeFieldEnd();a.data_DEPRECATED!=null&&(b.writeFieldBegin({fname:"data_DEPRECATED",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.data_DEPRECATED),b.writeFieldEnd());a.body!=null&&(b.writeFieldBegin({fname:"body",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),M(a.body,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function N(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.sender=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.topic_DEPRECATED=a.readString():a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).SET){b.recipients=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.recipients.add(i)}}else a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.serviceSender=d("MultiwaySharedTypes").EndpointServiceType.cast(a.readI32()):a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).SET){b.serviceRecipients=new Set();i=a.readSetBegin();for(g=0;g<i.size;g++){e=d("MultiwaySharedTypes").EndpointServiceType.cast(a.readI32());b.serviceRecipients.add(e)}}else a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).BOOL?b.shouldSendToAllUsers=a.readBool():a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRING?b.senderE2eeId=a.readBinary():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.topic_DEPRECATED===void 0&&(b.topic_DEPRECATED="");return b}function O(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");return b}function P(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.cname=a.readString():a.skip(e);break;case 4:if(e===(h||(h=c("ThriftTypes"))).LIST){b.trackIds=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readString();b.trackIds.push(g)}}else a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).I64?b.transactionId=a.readI64().toString():a.skip(e);break;case 6:if(e===(h||(h=c("ThriftTypes"))).LIST){b.dominantSpeakers=[];g=a.readListBegin();for(f=0;f<g.size;f++){d=O(a);b.dominantSpeakers.push(d)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");b.cname===void 0&&(b.cname="");b.trackIds===void 0&&(b.trackIds=[]);b.transactionId===void 0&&(b.transactionId="0");return b}function Q(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.cname=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.quality_DEPRECATED=d("MultiwaySharedTypes").VideoQuality.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.qualityMask=a.readI32():a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).MAP){b.perSsrcTargetBitrateBpsMap={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readI64().toString(),j=a.readI64().toString();b.perSsrcTargetBitrateBpsMap[i]=j}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.cname===void 0&&(b.cname="");b.quality_DEPRECATED===void 0&&(b.quality_DEPRECATED=d("MultiwaySharedTypes").VideoQuality.cast(0));return b}function R(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I32?b.bottleneckBps=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");b.bottleneckBps===void 0&&(b.bottleneckBps=0);return b}function S(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.bottleneckUplinksByLayer={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readI32(),i=R(a);b.bottleneckUplinksByLayer[g]=i}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.bottleneckUplinksByLayer===void 0&&(b.bottleneckUplinksByLayer={});return b}function T(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I16?b.duplicationAmount=a.readI16():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I16?b.delayMs=a.readI16():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.duplicationAmount===void 0&&(b.duplicationAmount=0);b.delayMs===void 0&&(b.delayMs=0);return b}function U(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.trackId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I32?b.numSimulcastLayersSupported=a.readI32():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.numSimulcastLayersAllocated=a.readI32():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I32?b.spatialLayerIndex=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function V(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.audioDuplicationDebugInfo=T(a):a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.receiveTrackDebugInfo=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=U(a);b.receiveTrackDebugInfo.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function W(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.primarySpeakerUserId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.transactionId=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.primarySpeakerUserId===void 0&&(b.primarySpeakerUserId="");b.transactionId===void 0&&(b.transactionId="0");return b}function X(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I32?b.qualityMask=a.readI32():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).MAP){b.perSsrcTargetBitrateBpsMap={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readI64().toString(),i=a.readI64().toString();b.perSsrcTargetBitrateBpsMap[g]=i}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Y(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.signalingMessagePayload=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.version=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.signalingMessagePayload===void 0&&(b.signalingMessagePayload=Uint8Array.of());return b}function Z(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.signalingMessagePayload=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.version=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.signalingMessagePayload===void 0&&(b.signalingMessagePayload=Uint8Array.of());return b}function da(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).LIST){b.subscriptionMessagePayload=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("MultiwaySharedSerializers").deserializeSubscription(a);b.subscriptionMessagePayload.push(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.subscriptionMessagePayload===void 0&&(b.subscriptionMessagePayload=[]);return b}function ea(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.renderResolutionMap={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j={},k=a.readMapBegin();for(var l=0;l<k.size;l++){var m=d("MultiwaySharedTypes").RenderedStreamType.cast(a.readI32()),n=d("MultiwaySharedSerializers").deserializeResolutionData(a);m!=null&&(j[m]=n)}b.renderResolutionMap[i]=j}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function fa(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.renderResolutionMap={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j={},k=a.readMapBegin();for(var l=0;l<k.size;l++){var m=d("MultiwaySharedTypes").RenderedStreamType.cast(a.readI32()),n=d("MultiwaySharedSerializers").deserializeResolutionData(a);m!=null&&(j[m]=n)}b.renderResolutionMap[i]=j}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function ga(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.nodeIdToUserIdMap={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readI64().toString(),j=a.readI64().toString();b.nodeIdToUserIdMap[i]=j}}else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).MAP){b.nodeIdToServiceTypeMap={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=a.readI64().toString();e=d("MultiwaySharedTypes").EndpointServiceType.cast(a.readI32());b.nodeIdToServiceTypeMap[g]=e}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.nodeIdToUserIdMap===void 0&&(b.nodeIdToUserIdMap={});b.nodeIdToServiceTypeMap===void 0&&(b.nodeIdToServiceTypeMap={});return b}function $(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.genericMessage=d("WebrtcSignalingCommonSerializers").deserializeGenericDataMessage(a):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.dominantSpeakerNotification=P(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRUCT?b.videoUploadRequest=Q(a):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRUCT?b.dominantSpeakerSignalingInfo=W(a):a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRUCT?b.bweDebugInfo=S(a):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRUCT?b.debugInfo=V(a):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRUCT?b.videoUploadSignalingInfo=X(a):a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).STRUCT?b.signalingMessageToClient=Y(a):a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).STRUCT?b.signalingMessageFromClient=Z(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function ha(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.header=N(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.data_DEPRECATED=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRUCT?b.body=$(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.header===void 0&&(b.header=i());return b}g.DataHeader$DefaultConstructor=i;g.SpeakerDetail$DefaultConstructor=a;g.DominantSpeakerNotification$DefaultConstructor=b;g.VideoUploadRequest$DefaultConstructor=e;g.ReceiverBottleneck$DefaultConstructor=f;g.BweDebugInfo$DefaultConstructor=j;g.AudioDuplicationDebugInfo$DefaultConstructor=k;g.ReceiveTrackDebugInfo$DefaultConstructor=l;g.DebugInfo$DefaultConstructor=m;g.DominantSpeakerInfo$DefaultConstructor=n;g.VideoUploadInfo$DefaultConstructor=o;g.SignalingMessageToClient$DefaultConstructor=p;g.SignalingMessageFromClient$DefaultConstructor=q;g.SubscriptionMessageFromClient$DefaultConstructor=r;g.RenderResolutionMessageFromClient$DefaultConstructor=s;g.RenderResolutionMessageToClient$DefaultConstructor=t;g.NodeIdNotification$DefaultConstructor=u;g.DataMessageBody$DefaultConstructor=v;g.DataMessage$DefaultConstructor=w;g.serializeDataHeader=x;g.serializeSpeakerDetail=y;g.serializeDominantSpeakerNotification=z;g.serializeVideoUploadRequest=A;g.serializeReceiverBottleneck=B;g.serializeBweDebugInfo=C;g.serializeAudioDuplicationDebugInfo=D;g.serializeReceiveTrackDebugInfo=E;g.serializeDebugInfo=F;g.serializeDominantSpeakerInfo=G;g.serializeVideoUploadInfo=H;g.serializeSignalingMessageToClient=I;g.serializeSignalingMessageFromClient=J;g.serializeSubscriptionMessageFromClient=K;g.serializeRenderResolutionMessageFromClient=L;g.serializeRenderResolutionMessageToClient=aa;g.serializeNodeIdNotification=ba;g.serializeDataMessageBody=M;g.serializeDataMessage=ca;g.deserializeDataHeader=N;g.deserializeSpeakerDetail=O;g.deserializeDominantSpeakerNotification=P;g.deserializeVideoUploadRequest=Q;g.deserializeReceiverBottleneck=R;g.deserializeBweDebugInfo=S;g.deserializeAudioDuplicationDebugInfo=T;g.deserializeReceiveTrackDebugInfo=U;g.deserializeDebugInfo=V;g.deserializeDominantSpeakerInfo=W;g.deserializeVideoUploadInfo=X;g.deserializeSignalingMessageToClient=Y;g.deserializeSignalingMessageFromClient=Z;g.deserializeSubscriptionMessageFromClient=da;g.deserializeRenderResolutionMessageFromClient=ea;g.deserializeRenderResolutionMessageToClient=fa;g.deserializeNodeIdNotification=ga;g.deserializeDataMessageBody=$;g.deserializeDataMessage=ha}),98);
__d("DataMessageTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({OK:200,NOT_FOUND:404});e.exports={DataMessageStatusCode:a}}),null);
__d("E2eeStateTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({NONE:0,NEGOTIATED:1,STATIC:2});d=a({NONE:0,MEDIA_CHANNEL_KEY_PROTOCOL:1});f=a({SENDER_KEY:0,SESSION_KEY:1});b=a({NOT_SET:0,CONTROL:1,TEST:2});var g=a({NOT_SET:0,CONTROL:1,TEST:2});a=a({ENABLED:0,DISABLED:1,FALLBACK:2});e.exports={E2eeKeyNegotiationProtocolEnum:f,E2eeStateCapabilitiesEnum:d,E2eeStateP2PSFrameExpStatus:g,InfraMandatedExpStatus:b,KeyNegotiationModeEnum:c,SignalingKeyMessageProtocolEnum:a}}),null);
__d("MqttThriftHeaderSerializers",["ThriftTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{}}function b(a,b){b.writeStructBegin("MqttThriftHeader"),a.traceInfo!=null&&(b.writeFieldBegin({fname:"traceInfo",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.traceInfo),b.writeFieldEnd()),a.coreContextRequestId!=null&&(b.writeFieldBegin({fname:"coreContextRequestId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.coreContextRequestId),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function d(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.traceInfo=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.coreContextRequestId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}g.MqttThriftHeader$DefaultConstructor=a;g.serializeMqttThriftHeader=b;g.deserializeMqttThriftHeader=d}),98);
__d("MultiwayCommonTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({STRING:0,THRIFT:1,BOTH:2});d=a({OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,METHOD_NOT_ALLOWED:406,CONFLICT:409,CONDITIONAL_REQUEST_FAILED:412,SERVER_INTERNAL_ERROR:500,SERVICE_UNAVAILABLE:503});f=a({UNKNOWN:1e3,EXCEEDED_MAX_ALLOWED_PARTICIPANTS:1001,MEMBERSHIP_CHECK_FAIL:1002,CONFERENCE_THROTTLED:1003,ENDPOINT_THROTTLED:1004,MWS_MESSAGE_SENT_TO_INCORRECT_REGION:1005,UNSUPPORTED_REQUEST_TYPE:2e3,CLIENT_REQUEST_UNACCEPTABLE:2001,CLIENT_RESPONSE_UNACCEPTABLE:2002,RING_RESPONSE_BODY_NOT_SET:2004,SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET:2005,INVALID_SDP:2006,INVALID_CONFERENCE_NAME:2007,SERVER_INFO_CONFERENCE_NAME_MISMATCH:2008,INVALID_USER_ID:2009,INCORRECT_VERSION_RANGE:2010,SENDER_ID_MISMATCH:2011,RECIPIENT_NOT_SPECIFIED:2012,FIELD_NOT_ALLOWED:2013,USERS_NOT_SPECIFIED:2015,REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE:2016,INVALID_CALL_ID:2017,SESSION_DESCRIPTION_ID_MISMATCH:2018,EMPTY_CLIENT_MEDIA_UPDATES:2019,INVALID_SERVER_INFO_DATA:2020,INCORRECT_STATE_VERSION:2021,MISMATCHED_STATE_FOR_VERSION:2022,INVALID_STATE_VERSION:2023,NO_RESOLVER_FOUND:2024,MISSING_APPROVERLIST:2025,FULL_SDP_REQUIRED_IN_APPROVED_STATE:2026,INVALID_BROADCAST_ID:2027,INVALID_ENDPOINT_CONFIG:2028,INVALID_E2EE_STATE:2029,SFU_MODE_PREVENTED:2030,INVALID_CONFERENCE_STATE:2031,JOIN_REQUEST_DENIED:2032,EMPTY_USER_IDS:2033,MISSING_SDP_CONNECT_REQUEST:2034,CALLER_HAS_APPEALABLE_CALLING_RESTRICTION:2035,MISSING_BODY_ENDPOINT:2101,MISSING_BODY_HEADER:2102,MISSING_BODY_BODY:2103,MISSING_BODY_PARAMS:2104,MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST:2105,MISSING_BODY_DATA_MESSAGE_REQUEST:2106,MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST:2107,MISSING_BODY_ADD_PARTICIPANTS_REQUEST:2108,MISSING_BODY_SUBSCRIPTION_REQUEST:2110,MISSING_BODY_JOIN_REQUEST:2111,MISSING_BODY_HANGUP_REQUEST:2112,MISSING_BODY_ICE_CANDIDATE_REQUEST:2113,MISSING_BODY_P2P_MESSAGE_REQUEST:2114,MISSING_BODY_UPDATE_REQUEST:2115,MISSING_BODY_CLIENT_EVENT_REQUEST:2116,MISSING_BODY_CONNECT_REQUEST:2117,MISSING_BODY_UNSUBSCRIBE_REQUEST:2118,MISSING_BODY_APPROVAL_REQUEST:2119,MISSING_ENDPOINT_USER_ID:2120,EMPTY_ENDPOINT_USER_ID:2121,MISSING_BODY_TRANSFER_REQUEST:2122,MISSING_BODY_GENERIC:2199,REQUESTOR_NOT_MEMBER_CONFERENCE:3002,NOT_BROADCAST_OWNER:3003,GUEST_NOT_INVITED:3004,GUEST_DISCONNECTED:3005,GUEST_INVITATION_EXPIRED:3006,PARTICIPANT_IN_PENDING_APPROVAL_STATE:3008,INVALID_MULTIWAY_PARAMS:3009,BROADCAST_ALREADY_STOPPED:4002,FAILED_TO_GENERATE_SDP_ANSWER:4003,FAILED_GENERATE_SESSION_DESCRIPTION:4004,SDP_SESSION_ID_MISMATCH:4005,MEDIA_ENDPOINT_GONE:4007,MEDIA_ENDPOINT_ALREADY_EXISTS:4008,MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID:4009,LEGACY_MESSENGER_SENDER_UNSET:4010,FAILED_TO_SET_TRANSPORT_INFO:4011,NON_PRIMARY_MULTIWAY_SERVER:4012,FAILED_TO_GET_REMOTE_DESCRIPTION:4013,LOCAL_DESCRIPTION_NOT_SET:4014,INVALID_SDP_TYPE:4015,CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO:4016,SDP_UNSET_ON_P2P_ANSWER:4017,MISSING_ICE_CANDIDATE_PAYLOAD:4018,P2P_PROTOCOL_UNSET:4019,CREATE_ACK_FOR_INVALID_MESSAGE_TYPE:4020,LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE:4021,CONNECT_UNSUPPORTED_IN_SFU_MODE:4022,CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS:4023,RESOLVE_STATE_API_ERROR:4024,EXTERNAL_RESOLUTION_ERROR:4025,INTERNAL_RESOLUTION_ERROR:4026,RESOLUTION_DISABLED:4027,BROADCAST_ID_MISSING:4028,SDP_UNSET_ON_P2P_OFFER:4029,LEGACY_OFFER_MISSING_REQUIRED_VALUE:4031,MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR:4032,CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS:4033,OTHER_USER_ANSWERED_THE_CALL:4034,MEDIA_SERVER_DESERIALIZATION_ERROR:4035,REMOTE_SDP_TRACKID_MISMATCH:4036,SIGNALING_MESSAGE_TO_CLIENT_DROPPED:4037,DATA_CHANNEL_ENDPOINT_GONE:4038,DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS:4039,CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION:4040,P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION:4041,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE:4042,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER:4043,REQUEST_TIMEOUT:4044,TOO_MANY_MEDIA_TRACKS_IN_SDP:4045,CONFERENCE_NOT_FOUND:5001,CONFERENCE_IS_TERMINATING:5002,CONFERENCE_IS_TERMINATED:5003,CONFERENCE_NAME_EMPTY:5004,NONCE_EMPTY:5005,NONCE_MISMATCH:5006,CONFERENCE_HAS_GONE:5007,PARTICIPANT_HAS_GONE:5008,MEDIA_SERVER_NOT_FOUND:5009,CLIENT_TERMINATED:5010,JOIN_SESSION_RESULT_MISSING:5012,LOGGING_POLICY_RESULT_MISSING:5013,INVITE_USERS_RESULT_MISSING:5014,STATE_SYNC_RESULT_MISSING:5015,ENDPOINT_INFO_RESULT_MISSING:5016,CONFERENCE_NAME_MISMATCH:5017,UNEXPECTED_TRANSPORT_PARAMS_CONFERENCE_NAME:5018,SESSION_CONFIGURATION_RESULT_MISSING:5019,MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE:6001,CONFERENCE_INCAPABLE_RENEGOTIATION:6002,REJECTING_CMU_WHEN_SMU_PENDING:6003,PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC:6004,PARTICIPANT_ALREADY_IN_WAITING_ROOM:6005,PARTICIPANT_NOT_IN_PENDING_APPROVAL:6006,USER_NOT_APPROVER_FOR_TARGET_USER:6007,UNSUPPORTED_CAPABILITIES:6008,PRODUCT_SERVER_DEFINED_END_REASON:6009,WWW_KILLSWITCHED_REQUEST:6010,CONFLICTING_MEDIA_PATH:6011,CONFLICTING_MEDIA_STATUS:6012,CONFLICTING_SESSION_DESCRIPTION:6013,OK:9e3});b=a({NONE:0,INFO:1,ERROR:2});var g=a({SUCCESS:0,ERROR:1,SESSION_NOT_FOUND:10,SESSION_MISMATCH:11,SESSION_TERMINATING:12,CONNECTION_ALREADY_EXIST:20,CONNECTION_OLD_EXIST:21,CONNECTION_NOT_FOUND:23,CONNECTION_MISMATCH:24,SDP_INVALID:30,SDP_NEGOTIATION_FAILED:31,EXCEEDED_MAX_PARTICIPANT_COUNT:40,UNAUTHORIZED:50}),h=a({JOIN:0,SERVER_MEDIA_UPDATE:1,HANGUP:2,ICE_CANDIDATE:3,RING:4,DISMISS:5,CONFERENCE_STATE:6,ADD_PARTICIPANTS:7,SUBSCRIPTION:8,CLIENT_MEDIA_UPDATE:9,DATA_MESSAGE:10,REMOVE_PARTICIPANTS:11,PING:18,UPDATE:20,NOTIFY:21,CONNECT:22,CLIENT_EVENT:23,UNSUBSCRIBE:25,APPROVAL:26,TRANSFER:27,WAKEUP:28}),i=a({IGNORE_CALL:0,HANGUP_CALL:1,NO_ANSWER_TIMEOUT:2,CLIENT_ERROR:3,IN_ANOTHER_CALL:4,CLIENT_INTERRUPTED:5,SESSION_MIGRATED:6,E2EE_MANDATED_BUT_OFFER_DID_NOT_CONTAIN_E2EE:7,E2EE_MANDATED_BUT_ANSWER_DID_NOT_NEGOTIATE_E2EE:8,WEBRTC_ERROR:9,CONNECTION_DROPPED:10}),j=a({CALL_ENDED:0,ANSWERED_ON_ANOTHER_DEVICE:1,IN_ANOTHER_CALL:2,CONNECTION_DROPPED:3,REJECTED_ON_ANOTHER_DEVICE:4,REMOVED_BY_PARTICIPANT:5,REJECTED_BY_CALLEE:6,INTERNAL_ERROR:7,CALL_ENDED_BY_PRODUCT:9,JOIN_APPROVAL_DENIED:10,JOIN_APPROVAL_TIMEDOUT:11,UNSUPPORTED_VERSION:12,LIVE_NOT_ACKED:13,TX_ACK_TIMEDOUT:14,ANSWERED_BY_OTHER_USER:15,PARTICIPANT_SELF_TERMINATION:16,PARTICIPANT_REJOIN:17,LONG_LASTING_AUDIO_ISSUE:18,PRIMARY_ENDPOINT_HANGUP:19,RECONNECT_FAILED:20,E2EE_HARDENING_ERROR:21,CALL_ENDED_BY_EXTENSION:22,CALL_ENDED_BY_OVER_CAPACITY:23}),k=a({SUPPORT_AUDIO_DEPRECATED:0,SUPPORT_VIDEO_DEPRECATED:1,SUPPORT_EXPERIMENTS_IN_JOIN_RESPONSE:2,SUPPORT_NEW_PARTICIPANT_STATES:3,SUPPORT_SDP_RENEGOTIATION:4,SUPPORT_MWPP:5,REQUIRE_FULL_SDP_IN_SMU:6,SUPPORT_PRECONNECT:7,SUPPORT_MWPP_DEESCALATION:8,SUPPORT_PARTICIPANT_STATE_UNCALLABLE:9,SUPPORT_MULTIPLE_VIDEO_STREAMS:10,REQUIRE_FULL_SDP_IN_SMU_OPTIMIZED:11,SUPPORT_MULTISTREAM_FEC:12,SUPPORT_DELTA_SMU:13,REQUIRE_DEFAULT_CHANNEL_SCREENSHARE:14,SUPPORT_SCREENSHARE_FLAG_IN_JOIN_RESPONSE_AND_SMU:15,SUPPORT_TEMPORAL_LAYER_JBE:16,REQUIRES_P2P_RELAY_INFO_VIA_SIGNALING:17,SUPPORT_NUMERIC_TOPICS:18,SUPPORT_PSEUDO_QUIC_CONNECTION:19,SUPPORT_SDP_SENDRECV:20}),l=a({GROUP_AUDIO_CALL:0,PEER_VIDEO_CALL:1,PEER_AUDIO_CALL:2,GROUP_VIDEO_CALL:3,LIVE_STREAM:4,PEER_ESCALATED_VIDEO_CALL:5,PEER_ESCALATED_AUDIO_CALL:6,LIVE_AUDIO_ROOM:7,LIVE_WITH_ROOM:8}),m=a({OK:0,NOT_SUPPORTED:1,IN_ANOTHER_CALL:10}),n=a({ACTIVE:0,TERMINATED:1}),o=a({UNKNOWN:0,ACTIVE:1,TERMINATED:2}),p=a({DENIED:0,APPROVED:1}),q=a({UNKNOWN:0,SIGNALING_DATA_MESSAGE:1,STATE_SYNC_UPDATE:2,STATE_SYNC_SNAPSHOT:3}),r=a({UNKNOWN:0,DISCONNECTED:1,NO_ANSWER:2,REJECTED:3,UNREACHABLE:4,CONNECTION_DROPPED:5,CONTACTING:6,RINGING:7,CONNECTING:8,CONNECTED:9,PARTICIPANT_LIMIT_REACHED:10,IN_ANOTHER_CALL:11,RING_TYPE_UNSUPPORTED:12,PENDING_APPROVAL:13,APPROVED:14,FAILED_APPROVAL:15,HANGUP_IN_WAITING_ROOM:16,UNCALLABLE:17,UNCALLABLE_DELAYED:18}),s=a({PRANSWER:1001,INITIAL_ANSWER_TO_P2P_CALLER:1002,DEESCALATE_OFFER_TO_P2P_CALLEE:1003,DEESCALATE_ANSWER_TO_P2P_CALLER:1004,REQUEST_DEESCALATE_TO_P2P_CALLER:1005,REQUEST_ESCALATE:1006,REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM:1007,REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS:1008,PARTICIPANT_ADDED:1009,PARTICIPANT_REMOVED:1010,FIRST_REMOTE_ALERTED_FOR_INITIATOR:2001,FIRST_REMOTE_ANSWERED_FOR_INITIATOR:2002,CONTAIN_PENDING_APPROVAL_PARTICIPANTS:2003,KEEP_ALIVE_PING:3001,IS_INITIATOR:4001,PREGEN_SDP:4002}),t=a({PRIMARY:0,SECONDARY:1}),u=a({UNKNOWN:0,MEDIA_CONNECTED:1});a=a({JoinRequest:"joinRequest",JoinResponse:"joinResponse",ServerMediaUpdateRequest:"serverMediaUpdateRequest",ServerMediaUpdateResponse:"serverMediaUpdateResponse",HangupRequest:"hangupRequest",IceCandidateRequest:"iceCandidateRequest",RingRequest:"ringRequest",RingResponse:"ringResponse",DismissRequest:"dismissRequest",ConferenceStateRequest:"conferenceStateRequest",ConferenceStateResponse:"conferenceStateResponse",AddParticipantsRequest:"addParticipantsRequest",SubscriptionRequest:"subscriptionRequest",ClientMediaUpdateRequest:"clientMediaUpdateRequest",ClientMediaUpdateResponse:"clientMediaUpdateResponse",DataMessageRequest:"dataMessageRequest",RemoveParticipantsRequest:"removeParticipantsRequest",DataMessageResponse:"dataMessageResponse",UpdateRequest:"updateRequest",UpdateResponse:"updateResponse",NotifyRequest:"notifyRequest",NotifyResponse:"notifyResponse",ConnectRequest:"connectRequest",ConnectResponse:"connectResponse",ClientEventRequest:"clientEventRequest",ClientEventResponse:"clientEventResponse",UnsubscribeRequest:"unsubscribeRequest",UnsubscribeResponse:"unsubscribeResponse",ApprovalRequest:"approvalRequest",TransferRequest:"transferRequest"});e.exports={ApprovalStatus:p,Capability:k,ClientEventType:u,DeviceStatus:m,DismissReason:j,E2eeDataMessageType:q,ExtensionSessionStatus:o,HangupReason:i,JoinMode:t,MediaConnectionStatus:n,MessageTag:s,MessageType:h,ParticipantCallState:r,RingType:l,RtcApiStatusCode:g,RtcLogSeverity:b,RtcMessageBodyVariant$Types:a,RtcResponseStatusCode:d,RtcResponseSubCode:f,SdpPayloadType:c}}),null);
__d("StateSyncSerializers",["ThriftTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{version:0}}function b(){return{stateStore:{}}}function i(a,b){b.writeStructBegin("State");b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.version!=null)b.writeI32(a.version);else{var d=0;b.writeI32(d)}b.writeFieldEnd();a.data!=null&&(b.writeFieldBegin({fname:"data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.data),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function d(a,b){b.writeStructBegin("Snapshot");b.writeFieldBegin({fname:"stateStore",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.stateStore!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.stateStore).length});for(a of Object.entries(a.stateStore)){var d=a[0],e=a[1];b.writeString(d);i(e,b)}b.writeMapEnd()}else{d={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(d).length});for(e of Object.entries(d)){a=e[0];d=e[1];b.writeString(a);i(d,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function j(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.data=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.version===void 0&&(b.version=0);return b}function e(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.stateStore={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readString(),i=j(a);b.stateStore[g]=i}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.stateStore===void 0&&(b.stateStore={});return b}g.State$DefaultConstructor=a;g.Snapshot$DefaultConstructor=b;g.serializeState=i;g.serializeSnapshot=d;g.deserializeState=j;g.deserializeSnapshot=e}),98);
__d("StateSyncTopicsConfigTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({UNKNOWN:0,INTERNAL:1,EXTERNAL:2});d=a({UNKNOWN:0,PARTICIPANT_JOIN:100,PARTICIPANT_UPDATE:101,PARTICIPANT_LEAVE:102,PARTICIPANT_NEGOTIATED:103,PARTICIPANT_SDP_CHANGED:104,EXTENSION_CREATION:201,EXTENSION_JOIN:202,EXTENSION_UPDATE:203,EXTENSION_LEAVE:204,EXTENSION_REQUEST:205,CONFERENCE_UPDATE:501,DOMINANT_SPEAKER_UPDATE:1001,MEDIA_ASPECT_RATIO_UPDATE:1002,TIMER_FIRED:1003,MEDIA_PATH_CHANGED:1004,PARTICIPANTS_ACKED_MEDIA:1005});f=a({UNKNOWN:0,ANY_PARTICIPANT_SUBSCRIBED:1,ALWAYS_RESOLVE:2});b=a({CACHIUS:1,IRIS:2});a=a({Config_engine:1,E2eeState:2,Media_information:3,Breakout:4,Countdown_timer:5,Effect_match:6,Emoji_reactions:7,Entered_avatars_mode:8,Moderator_controls:9,Polls:10,Raised_hands_queue:11,Xac_calling:12,Action_items:13,Can_you_see_my_screen:14,Collage:15,Companion:16,Coplay:17,Coview:18,Custom_video_capabilities:19,Dropin:20,Dtmf:21,E2ee_v2_msg:22,Effect_sync:23,Et_pluto_activity:24,Et_pluto_session:25,Et_test_activity:26,Et_test_session:27,Et_tubi_activity:28,Et_tubi_session:29,External_resolution_enabled:30,Hyperspace_copresence_state:31,Hyperspace_mic_state:32,Intenticons:33,Live_stream:34,Live_stream_app_message:35,Max_video_subscriptions:36,Media_sync:37,Media_sync_autoplay:38,Meeting_assistant:39,Meeting_transcription:40,Morpheo_grid:41,Multipeer_ar:42,Number_of_people:43,Opaque_blob:44,Photo_booth:45,Qna:46,Quizzes:47,Reactions:48,Role_assignments:49,Room_features_availability:50,Rooms_notes:51,Screenshare_floor_control:52,Screenshare_single_floor_control:53,Sctp_negotiation:54,Sideband:55,Simple:56,Simple_external:57,Simple_pass_through:58,Simple_passthrough:59,Snippets:60,Sound_effects:61,Whiteboard:62,Whiteboard_messenger:63,Workroom:64,Workrooms_ask_everyone_to_open:65,Workrooms_vr:66,Avatar_transport_state:67,Ambisonic:68,Cathode_extension:69,Biz_calling:70,Work_costreaming:71,Conversation_bot:72,Voip_zone:73,Admin_initiated_casting:74,Smart_glasses_assistant:75,Codec_avatar_2d:76,Custom_media_routing:77});e.exports={CryptoAuthVerifierIdentity:b,DataSource:d,DataSourceCondition:f,ResolutionPath:c,TopicId:a}}),null);
__d("WebrtcEnumsTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({OFFER:0,ANSWER:1,ICE_CANDIDATE:2,OK:3,HANG_UP:4,OTHER_DISMISS:5,PRANSWER:7,PING:8,PING_ACK:9,ICE_RESTART_OFFER:10,ICE_RESTART_ANSWER:11,OFFER_ACK:12,ANSWER_ACK:13,NOTIFY_MEDIA_STATE:14,ACK:15,INVALID:16,OFFER_NACK:17,NACK:18,VIDEO_REQUEST:19,SDP_UPDATE:20,SWITCH_TO_MULTIWAY:28,NEGOTIATE:30,PR_OFFER_ACK:32,CLIENT_REPORTED_EVENT:33});d=a({OFFER:0,ANSWER:1});f=a({LL_NIL:0,LL_BASIC:1,LL_DEBUG:2,LL_WARNING:3,LL_INFO:4,LL_VERBOSE:5});b=a({IGNORE_CALL:0,HANGUP_CALL:1,IN_ANOTHER_CALL:2,ACCEPT_AFTER_HANGUP:3,NO_ANSWER_TIMEOUT:4,INCOMING_TIMEOUT:5,OTHER_INSTANCE_HANDLED:6,SIGNALING_MESSAGE_FAILED:7,CONNECTION_DROPPED:8,CLIENT_INTERRUPTED:9,WEBRTC_ERROR:10,CLIENT_ERROR:11,NO_PERMISSION:12,OTHER_NOT_CAPABLE:13,NO_UI_ERROR:14,UNSUPPORTED_VERSION:15,CALLER_NOT_VISIBLE:16,CARRIER_BLOCKED:17,OTHER_CARRIER_BLOCKED:18,CLIENT_ENCRYPTION_ERROR:19,MICROPHONE_PERMISSION_DENIED:20,CAMERA_PERMISSION_DENIED:21,SESSION_MIGRATED:22,RING_MUTED:23,MAX_ALLOWED_PARTICIPANTS_REACHED:24,CALLEE_REQUIRES_MULTIWAY:25,LIVE_NOT_ACKED:26,TX_ACK_TIMEDOUT:27,E2EE_MANDATED_BUT_OFFER_DID_NOT_CONTAIN_E2EE:28,E2EE_MANDATED_BUT_ANSWER_DID_NOT_NEGOTIATE_E2EE:29,ANSWERED_BY_OTHER_USER:30,LONG_LASTING_AUDIO_ISSUE:31,ADMIN_CALLING_OWN_PAGE:32,PAGE_CALLS_BLOCKED:33});var g=a({UDP:0,TCP:1,SSLTCP:2}),h=a({HOST:0,SERVER_REFLEXIVE:1,PEER_REFLEXIVE:2,RELAY:3}),i=a({TCPTYPE_NONE:0,TCPTYPE_PASSIVE:1,TCPTYPE_ACTIVE:2,TCPTYPE_SIMOPEN:3}),j=a({SENDONLY:0,SENDRECV:1,RECVONLY:2,INACTIVE:3}),k=a({AUDIO:0,VIDEO:1,DATA:2}),l=a({AUDIO:0,VIDEO:1,SCREEN:2}),m=a({AES_CM_128_HMAC_SHA1_80:0,AES_CM_128_HMAC_SHA1_32:1,F8_128_HMAC_SHA1_80:2,AEAD_AES_256_GCM:8}),n=a({RTP_SAVPF:0,DTLS_SCTP:1,SCTP:2}),o=a({URN_IETF_PARAMS_RTP_HDREXT_SSRC_AUDIO_LEVEL:0,URN_IETF_PARAMS_RTP_HDREXT_TOFFSET:1,IETF_DRAFT_HOLMER_RMCAT_TRANSPORT_WIDE_CC_01:2,URN_3GPP_VIDEO_ORIENTATION:3,ABS_SEND_TIME:4,PLAYOUT_DELAY:5,VIDEO_CONTENT_TYPE:6,VIDEO_TIMING:7,RTP_MID:8,RTP_STREAM_ID:9,RTP_REPAIRED_STREAM_ID:10,ENCRYPT_EXTENSIONS:11,FRAME_MARKING:12,GENERIC_FRAME_DESCRIPTOR:13,RTP_LOSS_INFO:14,RTP_CONGESTION_INFO:15,RTP_AUDIO_DROP_INFO:16,FRAME_ENCRYPTION_INFO:17,GENERIC_FRAME_DESCRIPTOR_01:18,DEPENDENCY_DESCRIPTOR:19,COLOR_SPACE:20,ABS_CAPTURE_TIME:21,VIDEO_FRAME_TRACKING_ID:22,VIDEO_FRAME_INFO:23}),p=a({ISAC:0,SPEEX_ISAC_OBSOLETE:1,SPEEX:2,OPUS:3,PCMU_OBSOLETE:4,PCMA_OBSOLETE:5,CN:6,TELEPHONE_EVENT:7,VP8:8,RED:9,ULPFEC:10,H264:17,ISPX_WB_2:32,GOOGLE_DATA:33,AAC:36,AAC_LD:37,VP9:96,GOOGLE_SCTP_DATA:97,H265:98,RTX:99,FLEXFEC:100,MULTIPLEX:101,VIDEO_DATA:102,AV1:103}),q=a({SILENCEBIT_OBSOLETE:0,SPEEXUSEJITTERBIT_OBSOLETE:1,USEINBANDFEC:2,USEADAPTIVEFEC_OBSOLETE:3,EXTERNALBWE_OBSOLETE:4,FEC_BEI_OBSOLETE:5,ISPX_ADAPTIVE_FEC:6,CBR:7,USEDTX:8}),r=a({MINPTIME:0,MAXAVERAGEBITRATE:1,SPROP_STEREO:2,STEREO:3,MAXPTIME:4,PTIME:5,FEC_BEI_OBSOLETE:6,PORT:7,H264PROFILELEVELID:8,PACKETIZATION_MODE:9,LEVEL_ASYMMETRY_ALLOWED:10,APT:11,MAXPLAYBACKRATE:12,REPAIR_WINDOW:13,EMPTY_KEY:14}),s=a({CR_NONE:0,CR_ACTIVE:1,CR_PASSIVE:2,CR_ACTPASS:3,CR_HOLDCONN:4});a=a({EVENT_NONE:0,EVENT_MEDIA_CONNECTED:1});e.exports={CallEndReason:b,ClientReportedEventType:a,CodecName:p,CodecOption:r,CodecOptionBoolean:q,ConnectionRole:s,CryptoSuite:m,ExtmapUris:o,IceCandidateProtocolType:h,IceCandidateTcpType:i,IceCandidateTransport:g,MediaProtocol:n,MediaType:k,PayloadType:c,SdpNegotiateType:d,SendRecvMode:j,StreamType:l,UploadLogLevel:f}}),null);
__d("WebrtcSdpSerializers",["ThriftTypes","WebrtcEnumsTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{}}function b(){return{msid:"stream_label"}}function e(){return{id:""}}function f(){return{bwtype:"",bw:0}}function i(){return{numAudioChannels:1}}function j(){return{id:1,extensionAttributes:[]}}function k(){return{}}function l(){return{componentId:1,transport:d("WebrtcEnumsTypes").IceCandidateTransport.cast(0),generation:0}}function m(){return{port:1,protocol:d("WebrtcEnumsTypes").MediaProtocol.cast(0),sendRecvMode:d("WebrtcEnumsTypes").SendRecvMode.cast(1),hasRtcpMux:!0}}function n(){return{supportsMsid:!0}}function o(){return{}}function p(a,b){b.writeStructBegin("SsrcGroup");a.semantics!=null&&(b.writeFieldBegin({fname:"semantics",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.semantics),b.writeFieldEnd());if(a.ssrcIds!=null){b.writeFieldBegin({fname:"ssrcIds",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.I32,size:a.ssrcIds.length});for(a of a.ssrcIds)b.writeI32(a);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function q(a,b){b.writeStructBegin("SsrcObject");a.ssrcId!=null&&(b.writeFieldBegin({fname:"ssrcId",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1}),b.writeI32(a.ssrcId),b.writeFieldEnd());a.cname!=null&&(b.writeFieldBegin({fname:"cname",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.cname),b.writeFieldEnd());b.writeFieldBegin({fname:"msid",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3});if(a.msid!=null)b.writeString(a.msid);else{var d="stream_label";b.writeString(d)}b.writeFieldEnd();a.msidAppData!=null&&(b.writeFieldBegin({fname:"msidAppData",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.msidAppData),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function r(a,b){b.writeStructBegin("RtcpFbVal");b.writeFieldBegin({fname:"id",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.id!=null)b.writeString(a.id);else{var d="";b.writeString(d)}b.writeFieldEnd();a.param!=null&&(b.writeFieldBegin({fname:"param",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.param),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function s(a,b){b.writeStructBegin("Bandwidth");b.writeFieldBegin({fname:"bwtype",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.bwtype!=null)b.writeString(a.bwtype);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"bw",ftype:h.I32,fid:2});if(a.bw!=null)b.writeI32(a.bw);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function t(a,b){b.writeStructBegin("CodecDescription");a.payloadType!=null&&(b.writeFieldBegin({fname:"payloadType",ftype:(h||(h=c("ThriftTypes"))).BYTE,fid:1}),b.writeByte(a.payloadType),b.writeFieldEnd());if(a.encodingName!=null){var d;b.writeFieldBegin({fname:"encodingName",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});b.writeI32((d=a.encodingName)!=null?d:0);b.writeFieldEnd()}a.clockRateKhz!=null&&(b.writeFieldBegin({fname:"clockRateKhz",ftype:(h||(h=c("ThriftTypes"))).BYTE,fid:3}),b.writeByte(a.clockRateKhz),b.writeFieldEnd());b.writeFieldBegin({fname:"numAudioChannels",ftype:(h||(h=c("ThriftTypes"))).BYTE,fid:4});if(a.numAudioChannels!=null)b.writeByte(a.numAudioChannels);else{d=1;b.writeByte(d)}b.writeFieldEnd();if(a.fmtParameters!=null){b.writeFieldBegin({fname:"fmtParameters",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:5});b.writeMapBegin({ktype:h.I32,vtype:h.STRING,size:Object.keys(a.fmtParameters).length});for(d of Object.entries(a.fmtParameters)){var e=d[0],f=d[1];b.writeI32((e=Number(e))!=null?e:0);b.writeString(f)}b.writeMapEnd();b.writeFieldEnd()}if(a.enabledOptions!=null){b.writeFieldBegin({fname:"enabledOptions",ftype:(h||(h=c("ThriftTypes"))).SET,fid:6});b.writeSetBegin({etype:h.I32,size:a.enabledOptions.size});for(e of a.enabledOptions)b.writeI32(e!=null?e:0);b.writeSetEnd();b.writeFieldEnd()}if(a.rtcpFbParameters!=null){b.writeFieldBegin({fname:"rtcpFbParameters",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:7});b.writeMapBegin({ktype:h.STRING,vtype:h.STRING,size:Object.keys(a.rtcpFbParameters).length});for(f of Object.entries(a.rtcpFbParameters)){d=f[0];e=f[1];b.writeString(d);b.writeString(e)}b.writeMapEnd();b.writeFieldEnd()}if(a.rtcpFbParamList!=null){b.writeFieldBegin({fname:"rtcpFbParamList",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:10});b.writeListBegin({etype:h.STRUCT,size:a.rtcpFbParamList.length});for(d of a.rtcpFbParamList)r(d,b);b.writeListEnd();b.writeFieldEnd()}a.videoWidth!=null&&(b.writeFieldBegin({fname:"videoWidth",ftype:(h||(h=c("ThriftTypes"))).I32,fid:8}),b.writeI32(a.videoWidth),b.writeFieldEnd());a.videoHeight!=null&&(b.writeFieldBegin({fname:"videoHeight",ftype:(h||(h=c("ThriftTypes"))).I32,fid:9}),b.writeI32(a.videoHeight),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function u(a,b){b.writeStructBegin("Extmap");b.writeFieldBegin({fname:"id",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.id!=null)b.writeI32(a.id);else{var d=1;b.writeI32(d)}b.writeFieldEnd();if(a.uri!=null){b.writeFieldBegin({fname:"uri",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});b.writeI32((d=a.uri)!=null?d:0);b.writeFieldEnd()}b.writeFieldBegin({fname:"extensionAttributes",ftype:h.LIST,fid:3});if(a.extensionAttributes!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:a.extensionAttributes.length});for(d of a.extensionAttributes)b.writeI32(d!=null?d:0);b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:a.length});for(d of a)b.writeI32(d!=null?d:0);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function v(a,b){b.writeStructBegin("CryptoParam");a.tag!=null&&(b.writeFieldBegin({fname:"tag",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1}),b.writeI32(a.tag),b.writeFieldEnd());if(a.suite!=null){var d;b.writeFieldBegin({fname:"suite",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});b.writeI32((d=a.suite)!=null?d:0);b.writeFieldEnd()}a.keyParams!=null&&(b.writeFieldBegin({fname:"keyParams",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.keyParams),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function w(a,b){b.writeStructBegin("IceCandidateSdp");a.foundation!=null&&(b.writeFieldBegin({fname:"foundation",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.foundation),b.writeFieldEnd());b.writeFieldBegin({fname:"componentId",ftype:(h||(h=c("ThriftTypes"))).BYTE,fid:2});if(a.componentId!=null)b.writeByte(a.componentId);else{var e=1;b.writeByte(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"transport",ftype:h.I32,fid:3});if(a.transport!=null){b.writeI32((e=a.transport)!=null?e:0)}else{e=d("WebrtcEnumsTypes").IceCandidateTransport.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.priority!=null&&(b.writeFieldBegin({fname:"priority",ftype:(h||(h=c("ThriftTypes"))).I32,fid:4}),b.writeI32(a.priority),b.writeFieldEnd());a.address!=null&&(b.writeFieldBegin({fname:"address",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.address),b.writeFieldEnd());a.port!=null&&(b.writeFieldBegin({fname:"port",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6}),b.writeI32(a.port),b.writeFieldEnd());if(a.protocolType!=null){b.writeFieldBegin({fname:"protocolType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:7});b.writeI32((e=a.protocolType)!=null?e:0);b.writeFieldEnd()}a.relatedAddress!=null&&(b.writeFieldBegin({fname:"relatedAddress",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:8}),b.writeString(a.relatedAddress),b.writeFieldEnd());a.relatedPort!=null&&(b.writeFieldBegin({fname:"relatedPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:9}),b.writeI32(a.relatedPort),b.writeFieldEnd());a.username!=null&&(b.writeFieldBegin({fname:"username",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:10}),b.writeString(a.username),b.writeFieldEnd());a.password!=null&&(b.writeFieldBegin({fname:"password",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:11}),b.writeString(a.password),b.writeFieldEnd());b.writeFieldBegin({fname:"generation",ftype:h.I32,fid:12});if(a.generation!=null)b.writeI32(a.generation);else{e=0;b.writeI32(e)}b.writeFieldEnd();if(a.tcptype!=null){b.writeFieldBegin({fname:"tcptype",ftype:(h||(h=c("ThriftTypes"))).I32,fid:13});b.writeI32((e=a.tcptype)!=null?e:0);b.writeFieldEnd()}a.networkId!=null&&(b.writeFieldBegin({fname:"networkId",ftype:(h||(h=c("ThriftTypes"))).I16,fid:14}),b.writeI16(a.networkId),b.writeFieldEnd());a.networkCost!=null&&(b.writeFieldBegin({fname:"networkCost",ftype:(h||(h=c("ThriftTypes"))).I16,fid:15}),b.writeI16(a.networkCost),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function x(a,b){b.writeStructBegin("MediaDescription");if(a.mediaType!=null){var e;b.writeFieldBegin({fname:"mediaType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});b.writeI32((e=a.mediaType)!=null?e:0);b.writeFieldEnd()}b.writeFieldBegin({fname:"port",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});if(a.port!=null)b.writeI32(a.port);else{e=1;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"protocol",ftype:h.I32,fid:3});if(a.protocol!=null){b.writeI32((e=a.protocol)!=null?e:0)}else{e=d("WebrtcEnumsTypes").MediaProtocol.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.fmt!=null&&(b.writeFieldBegin({fname:"fmt",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:22}),b.writeString(a.fmt),b.writeFieldEnd());a.mediaIceUserFrag!=null&&(b.writeFieldBegin({fname:"mediaIceUserFrag",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.mediaIceUserFrag),b.writeFieldEnd());a.mediaIcePassword!=null&&(b.writeFieldBegin({fname:"mediaIcePassword",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.mediaIcePassword),b.writeFieldEnd());if(a.mediaIceOptions!=null){b.writeFieldBegin({fname:"mediaIceOptions",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:6});b.writeListBegin({etype:h.STRING,size:a.mediaIceOptions.length});for(e of a.mediaIceOptions)b.writeString(e);b.writeListEnd();b.writeFieldEnd()}a.mediaSslFingerprintHash!=null&&(b.writeFieldBegin({fname:"mediaSslFingerprintHash",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeString(a.mediaSslFingerprintHash),b.writeFieldEnd());a.mediaSslFingerprintDigest!=null&&(b.writeFieldBegin({fname:"mediaSslFingerprintDigest",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:8}),b.writeString(a.mediaSslFingerprintDigest),b.writeFieldEnd());if(a.extmaps!=null){b.writeFieldBegin({fname:"extmaps",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:9});b.writeListBegin({etype:h.STRUCT,size:a.extmaps.length});for(e of a.extmaps)u(e,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldBegin({fname:"sendRecvMode",ftype:h.I32,fid:10});if(a.sendRecvMode!=null){b.writeI32((e=a.sendRecvMode)!=null?e:0)}else{e=d("WebrtcEnumsTypes").SendRecvMode.cast(1);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"hasRtcpMux",ftype:h.BOOL,fid:11});if(a.hasRtcpMux!=null)b.writeBool(a.hasRtcpMux);else{e=!0;b.writeBool(e)}b.writeFieldEnd();a.rtcpReducedSize!=null&&(b.writeFieldBegin({fname:"rtcpReducedSize",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:25}),b.writeBool(a.rtcpReducedSize),b.writeFieldEnd());if(a.cryptoParams!=null){b.writeFieldBegin({fname:"cryptoParams",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:12});b.writeListBegin({etype:h.STRUCT,size:a.cryptoParams.length});for(e of a.cryptoParams)v(e,b);b.writeListEnd();b.writeFieldEnd()}if(a.codecs!=null){b.writeFieldBegin({fname:"codecs",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:13});b.writeListBegin({etype:h.STRUCT,size:a.codecs.length});for(e of a.codecs)t(e,b);b.writeListEnd();b.writeFieldEnd()}a.maxPTime!=null&&(b.writeFieldBegin({fname:"maxPTime",ftype:(h||(h=c("ThriftTypes"))).I32,fid:14}),b.writeI32(a.maxPTime),b.writeFieldEnd());a.pTime!=null&&(b.writeFieldBegin({fname:"pTime",ftype:(h||(h=c("ThriftTypes"))).I32,fid:15}),b.writeI32(a.pTime),b.writeFieldEnd());if(a.ssrcObjects!=null){b.writeFieldBegin({fname:"ssrcObjects",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:16});b.writeListBegin({etype:h.STRUCT,size:a.ssrcObjects.length});for(e of a.ssrcObjects)q(e,b);b.writeListEnd();b.writeFieldEnd()}if(a.candidates!=null){b.writeFieldBegin({fname:"candidates",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:17});b.writeListBegin({etype:h.STRUCT,size:a.candidates.length});for(e of a.candidates)w(e,b);b.writeListEnd();b.writeFieldEnd()}a.conferenceMode!=null&&(b.writeFieldBegin({fname:"conferenceMode",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:18}),b.writeBool(a.conferenceMode),b.writeFieldEnd());if(a.ssrcGroups!=null){b.writeFieldBegin({fname:"ssrcGroups",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:19});b.writeListBegin({etype:h.STRUCT,size:a.ssrcGroups.length});for(e of a.ssrcGroups)p(e,b);b.writeListEnd();b.writeFieldEnd()}if(a.connectionRole!=null){b.writeFieldBegin({fname:"connectionRole",ftype:(h||(h=c("ThriftTypes"))).I32,fid:20});b.writeI32((e=a.connectionRole)!=null?e:0);b.writeFieldEnd()}a.mid!=null&&(b.writeFieldBegin({fname:"mid",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:21}),b.writeString(a.mid),b.writeFieldEnd());a.bandwidth!=null&&(b.writeFieldBegin({fname:"bandwidth",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:23}),s(a.bandwidth,b),b.writeFieldEnd());a.sctpPort!=null&&(b.writeFieldBegin({fname:"sctpPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:24}),b.writeI32(a.sctpPort),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function y(a,b){b.writeStructBegin("SessionDescription");a.sessionId!=null&&(b.writeFieldBegin({fname:"sessionId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.sessionId),b.writeFieldEnd());a.sessionVersion!=null&&(b.writeFieldBegin({fname:"sessionVersion",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.sessionVersion),b.writeFieldEnd());b.writeFieldBegin({fname:"supportsMsid",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:3});if(a.supportsMsid!=null)b.writeBool(a.supportsMsid);else{var d=!0;b.writeBool(d)}b.writeFieldEnd();a.useIceLite!=null&&(b.writeFieldBegin({fname:"useIceLite",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:4}),b.writeBool(a.useIceLite),b.writeFieldEnd());if(a.features!=null){b.writeFieldBegin({fname:"features",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:5});b.writeListBegin({etype:h.STRING,size:a.features.length});for(d of a.features)b.writeString(d);b.writeListEnd();b.writeFieldEnd()}if(a.connectionRole!=null){b.writeFieldBegin({fname:"connectionRole",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6});b.writeI32((d=a.connectionRole)!=null?d:0);b.writeFieldEnd()}a.bandwidth!=null&&(b.writeFieldBegin({fname:"bandwidth",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7}),s(a.bandwidth,b),b.writeFieldEnd());if(a.transportBundle!=null){b.writeFieldBegin({fname:"transportBundle",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:8});b.writeListBegin({etype:h.STRING,size:a.transportBundle.length});for(d of a.transportBundle)b.writeString(d);b.writeListEnd();b.writeFieldEnd()}if(a.commonCryptos!=null){b.writeFieldBegin({fname:"commonCryptos",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:9});b.writeListBegin({etype:h.STRUCT,size:a.commonCryptos.length});for(d of a.commonCryptos)v(d,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function z(a,b){b.writeStructBegin("Sdp");a.sessionDescription!=null&&(b.writeFieldBegin({fname:"sessionDescription",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),y(a.sessionDescription,b),b.writeFieldEnd());if(a.mediaDescriptions!=null){b.writeFieldBegin({fname:"mediaDescriptions",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.mediaDescriptions.length});for(a of a.mediaDescriptions)x(a,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function A(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.semantics=a.readString():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.ssrcIds=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readI32();b.ssrcIds.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function B(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I32?b.ssrcId=a.readI32():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.cname=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.msid=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.msidAppData=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.msid===void 0&&(b.msid="stream_label");return b}function C(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.id=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.param=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.id===void 0&&(b.id="");return b}function D(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.bwtype=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I32?b.bw=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.bwtype===void 0&&(b.bwtype="");b.bw===void 0&&(b.bw=0);return b}function E(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).BYTE?b.payloadType=a.readByte():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.encodingName=d("WebrtcEnumsTypes").CodecName.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).BYTE?b.clockRateKhz=a.readByte():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).BYTE?b.numAudioChannels=a.readByte():a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).MAP){b.fmtParameters={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=d("WebrtcEnumsTypes").CodecOption.cast(a.readI32()),j=a.readString();i!=null&&(b.fmtParameters[i]=j)}}else a.skip(f);break;case 6:if(f===(h||(h=c("ThriftTypes"))).SET){b.enabledOptions=new Set();i=a.readSetBegin();for(j=0;j<i.size;j++){g=d("WebrtcEnumsTypes").CodecOptionBoolean.cast(a.readI32());b.enabledOptions.add(g)}}else a.skip(f);break;case 7:if(f===(h||(h=c("ThriftTypes"))).MAP){b.rtcpFbParameters={};e=a.readMapBegin();for(g=0;g<e.size;g++){j=a.readString();i=a.readString();b.rtcpFbParameters[j]=i}}else a.skip(f);break;case 10:if(f===(h||(h=c("ThriftTypes"))).LIST){b.rtcpFbParamList=[];j=a.readListBegin();for(i=0;i<j.size;i++){g=C(a);b.rtcpFbParamList.push(g)}}else a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).I32?b.videoWidth=a.readI32():a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).I32?b.videoHeight=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.numAudioChannels===void 0&&(b.numAudioChannels=1);return b}function F(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.id=a.readI32():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.uri=d("WebrtcEnumsTypes").ExtmapUris.cast(a.readI32()):a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).LIST){b.extensionAttributes=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("WebrtcEnumsTypes").ExtmapUris.cast(a.readI32());b.extensionAttributes.push(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.id===void 0&&(b.id=1);b.extensionAttributes===void 0&&(b.extensionAttributes=[]);return b}function G(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.tag=a.readI32():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.suite=d("WebrtcEnumsTypes").CryptoSuite.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.keyParams=a.readString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function H(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.foundation=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).BYTE?b.componentId=a.readByte():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.transport=d("WebrtcEnumsTypes").IceCandidateTransport.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.priority=a.readI32():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.address=a.readString():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.port=a.readI32():a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).I32?b.protocolType=d("WebrtcEnumsTypes").IceCandidateProtocolType.cast(a.readI32()):a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).STRING?b.relatedAddress=a.readString():a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).I32?b.relatedPort=a.readI32():a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRING?b.username=a.readString():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).STRING?b.password=a.readString():a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).I32?b.generation=a.readI32():a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).I32?b.tcptype=d("WebrtcEnumsTypes").IceCandidateTcpType.cast(a.readI32()):a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).I16?b.networkId=a.readI16():a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).I16?b.networkCost=a.readI16():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.componentId===void 0&&(b.componentId=1);b.transport===void 0&&(b.transport=d("WebrtcEnumsTypes").IceCandidateTransport.cast(0));b.generation===void 0&&(b.generation=0);return b}function I(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.mediaType=d("WebrtcEnumsTypes").MediaType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.port=a.readI32():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.protocol=d("WebrtcEnumsTypes").MediaProtocol.cast(a.readI32()):a.skip(f);break;case 22:f===(h||(h=c("ThriftTypes"))).STRING?b.fmt=a.readString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.mediaIceUserFrag=a.readString():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.mediaIcePassword=a.readString():a.skip(f);break;case 6:if(f===(h||(h=c("ThriftTypes"))).LIST){b.mediaIceOptions=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.mediaIceOptions.push(i)}}else a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRING?b.mediaSslFingerprintHash=a.readString():a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).STRING?b.mediaSslFingerprintDigest=a.readString():a.skip(f);break;case 9:if(f===(h||(h=c("ThriftTypes"))).LIST){b.extmaps=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=F(a);b.extmaps.push(e)}}else a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).I32?b.sendRecvMode=d("WebrtcEnumsTypes").SendRecvMode.cast(a.readI32()):a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).BOOL?b.hasRtcpMux=a.readBool():a.skip(f);break;case 25:f===(h||(h=c("ThriftTypes"))).BOOL?b.rtcpReducedSize=a.readBool():a.skip(f);break;case 12:if(f===(h||(h=c("ThriftTypes"))).LIST){b.cryptoParams=[];e=a.readListBegin();for(g=0;g<e.size;g++){i=G(a);b.cryptoParams.push(i)}}else a.skip(f);break;case 13:if(f===(h||(h=c("ThriftTypes"))).LIST){b.codecs=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=E(a);b.codecs.push(e)}}else a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).I32?b.maxPTime=a.readI32():a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).I32?b.pTime=a.readI32():a.skip(f);break;case 16:if(f===(h||(h=c("ThriftTypes"))).LIST){b.ssrcObjects=[];e=a.readListBegin();for(g=0;g<e.size;g++){i=B(a);b.ssrcObjects.push(i)}}else a.skip(f);break;case 17:if(f===(h||(h=c("ThriftTypes"))).LIST){b.candidates=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=H(a);b.candidates.push(e)}}else a.skip(f);break;case 18:f===(h||(h=c("ThriftTypes"))).BOOL?b.conferenceMode=a.readBool():a.skip(f);break;case 19:if(f===(h||(h=c("ThriftTypes"))).LIST){b.ssrcGroups=[];e=a.readListBegin();for(g=0;g<e.size;g++){i=A(a);b.ssrcGroups.push(i)}}else a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).I32?b.connectionRole=d("WebrtcEnumsTypes").ConnectionRole.cast(a.readI32()):a.skip(f);break;case 21:f===(h||(h=c("ThriftTypes"))).STRING?b.mid=a.readString():a.skip(f);break;case 23:f===(h||(h=c("ThriftTypes"))).STRUCT?b.bandwidth=D(a):a.skip(f);break;case 24:f===(h||(h=c("ThriftTypes"))).I32?b.sctpPort=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.port===void 0&&(b.port=1);b.protocol===void 0&&(b.protocol=d("WebrtcEnumsTypes").MediaProtocol.cast(0));b.sendRecvMode===void 0&&(b.sendRecvMode=d("WebrtcEnumsTypes").SendRecvMode.cast(1));b.hasRtcpMux===void 0&&(b.hasRtcpMux=!0);return b}function J(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.sessionId=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.sessionVersion=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).BOOL?b.supportsMsid=a.readBool():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).BOOL?b.useIceLite=a.readBool():a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).LIST){b.features=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.features.push(i)}}else a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.connectionRole=d("WebrtcEnumsTypes").ConnectionRole.cast(a.readI32()):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRUCT?b.bandwidth=D(a):a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).LIST){b.transportBundle=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=a.readString();b.transportBundle.push(e)}}else a.skip(f);break;case 9:if(f===(h||(h=c("ThriftTypes"))).LIST){b.commonCryptos=[];e=a.readListBegin();for(g=0;g<e.size;g++){i=G(a);b.commonCryptos.push(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.supportsMsid===void 0&&(b.supportsMsid=!0);return b}function K(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.sessionDescription=J(a):a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.mediaDescriptions=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=I(a);b.mediaDescriptions.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}g.SsrcGroup$DefaultConstructor=a;g.SsrcObject$DefaultConstructor=b;g.RtcpFbVal$DefaultConstructor=e;g.Bandwidth$DefaultConstructor=f;g.CodecDescription$DefaultConstructor=i;g.Extmap$DefaultConstructor=j;g.CryptoParam$DefaultConstructor=k;g.IceCandidateSdp$DefaultConstructor=l;g.MediaDescription$DefaultConstructor=m;g.SessionDescription$DefaultConstructor=n;g.Sdp$DefaultConstructor=o;g.serializeSsrcGroup=p;g.serializeSsrcObject=q;g.serializeRtcpFbVal=r;g.serializeBandwidth=s;g.serializeCodecDescription=t;g.serializeExtmap=u;g.serializeCryptoParam=v;g.serializeIceCandidateSdp=w;g.serializeMediaDescription=x;g.serializeSessionDescription=y;g.serializeSdp=z;g.deserializeSsrcGroup=A;g.deserializeSsrcObject=B;g.deserializeRtcpFbVal=C;g.deserializeBandwidth=D;g.deserializeCodecDescription=E;g.deserializeExtmap=F;g.deserializeCryptoParam=G;g.deserializeIceCandidateSdp=H;g.deserializeMediaDescription=I;g.deserializeSessionDescription=J;g.deserializeSdp=K}),98);
__d("MultiwayCommonSerializers",["DataMessageSerializers","DataMessageTypes","MultiwayCommonTypes","MultiwaySharedSerializers","MultiwaySharedTypes","StateSyncSerializers","StateSyncTopicsConfigTypes","ThriftTypes","Utf8ToString","WebrtcSdpSerializers","WebrtcSignalingCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a;return{message:"",responseStatusCode:(a=d("MultiwayCommonTypes")).RtcResponseStatusCode.cast(0),responseSubCode:a.RtcResponseSubCode.cast(0),apiStatusCode:a.RtcApiStatusCode.cast(0),rtcLogSeverity:a.RtcLogSeverity.cast(0)}}function i(){return{}}function b(){return{media:{}}}function e(){return{body:"",msid:"",mid:""}}function f(){return{sourceKey:"",media:[],ssrcGroups:[]}}function j(){return{mediaStatus:{}}}function k(){return{sdpMLineIndex:"0",sdpMid:""}}function l(){return{stateStore:{},stateStoreV2:{}}}function aa(){return{version:0}}function ba(){return{encryptedTopic:"",encryptedData:Uint8Array.of(),senderId:Uint8Array.of(),messageType:d("MultiwayCommonTypes").E2eeDataMessageType.cast(0)}}function ca(){return{fromVersion:"0",toVersion:"0",mediaUpdates:[]}}function da(){return{currentVersion:"0",mediaPath:d("MultiwaySharedTypes").MediaPath.cast(0)}}function ea(){return{callerUserId:"",calleeUserId:"",sessionId:""}}function fa(){return{fromVersion:"0",toVersion:"0",mediaUpdates:[],renegotiationRequested:!1,multipleVideoStreamsAllowed:!1,mediaPath:d("MultiwaySharedTypes").MediaPath.cast(0),screenShareStreamAllowed:!1}}function ga(){return{currentVersion:"0"}}function ha(){return{}}function ia(){return{reason:d("MultiwayCommonTypes").HangupReason.cast(0),detailedReasonString:""}}function ja(){return{iceCandidateSdps:[]}}function ka(){return{reason:d("MultiwayCommonTypes").DismissReason.cast(0),detailedReasonString:""}}function la(){return{joinMode:d("MultiwayCommonTypes").JoinMode.cast(0)}}function ma(){return{state:d("MultiwayCommonTypes").ParticipantCallState.cast(0)}}function na(){return{}}function oa(){return{}}function pa(){return{}}function qa(){return{version:"0",participantStates:{},groupsOfUsers:[]}}function ra(){return{currentVersion:"0"}}function sa(){return{subscriptions:[]}}function ta(){return{message:d("DataMessageSerializers").DataMessage$DefaultConstructor()}}function ua(){return{deliveryResult:{}}}function va(){return{usersToInvite:new Set()}}function wa(){return{smcTier:"",region:"",isUsfu:!1,isEdge:!1}}function xa(){return{offer:i(),deviceCapabilities:new Set()}}function ya(){return{answer:i(),mediaStatus:{},initiator:"",isPendingApproval:!1,multipleVideoStreamsAllowed:!1,mediaPath:d("MultiwaySharedTypes").MediaPath.cast(0),groupsOfUsers:[],screenShareStreamAllowed:!1}}function za(){return{deviceCapabilities:new Set()}}function Aa(){return{}}function Ba(){return{type:d("MultiwayCommonTypes").ClientEventType.cast(0)}}function Ca(){return{clientEvents:[]}}function Da(){return{}}function Ea(){return{}}function Fa(){return{caller:"",otherParticipants:new Set(),ringType:d("MultiwayCommonTypes").RingType.cast(0),mediaPath:d("MultiwaySharedTypes").MediaPath.cast(0),isTransferCall:!1}}function Ga(){return{deviceStatus:d("MultiwayCommonTypes").DeviceStatus.cast(0)}}function Ha(){return{usersToRemove:new Set()}}function Ia(){return{topic:"",version:0,topicId:d("StateSyncTopicsConfigTypes").TopicId.cast(0)}}function Ja(){return{topic:"",version:0}}function Ka(){return{syncPayload:l(),topic:"",version:0,topicId:d("StateSyncTopicsConfigTypes").TopicId.cast(0)}}function La(){return{topic:"",version:0}}function Ma(){return{topic:"",version:0,data:Uint8Array.of()}}function Na(){return{topic:"",version:0}}function Oa(){return{approvalStatus:d("MultiwayCommonTypes").ApprovalStatus.cast(0),targetUsers:new Set()}}function Pa(){return{id:""}}function Qa(){return{actorId:"",baseId:""}}function m(){return{type:d("MultiwayCommonTypes").MessageType.cast(0),conferenceName:"",transactionId:"",retryCount:0}}function n(){return{}}function Ra(){return{messageHeader:m(),messageBody:n()}}function Sa(){return{users:new Set(),allowMultipleJoins:!1,dismissOthersOnFirstJoin:!1,aliasId:""}}function Ta(){return{}}function Ua(a,b){b.writeStructBegin("RtcException");b.writeFieldBegin({fname:"message",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.message!=null)b.writeString(a.message);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"responseStatusCode",ftype:h.I32,fid:2});if(a.responseStatusCode!=null){b.writeI32((e=a.responseStatusCode)!=null?e:0)}else{e=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"responseSubCode",ftype:h.I32,fid:3});if(a.responseSubCode!=null){b.writeI32((e=a.responseSubCode)!=null?e:0)}else{e=d("MultiwayCommonTypes").RtcResponseSubCode.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"apiStatusCode",ftype:h.I32,fid:4});if(a.apiStatusCode!=null){b.writeI32((e=a.apiStatusCode)!=null?e:0)}else{e=d("MultiwayCommonTypes").RtcApiStatusCode.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"rtcLogSeverity",ftype:h.I32,fid:5});if(a.rtcLogSeverity!=null){b.writeI32((e=a.rtcLogSeverity)!=null?e:0)}else{a=d("MultiwayCommonTypes").RtcLogSeverity.cast(0);b.writeI32(a!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function o(a,b){b.writeStructBegin("SessionDescription"),a.sdpString!=null&&(b.writeFieldBegin({fname:"sdpString",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.sdpString),b.writeFieldEnd()),a.sdpThrift!=null&&(b.writeFieldBegin({fname:"sdpThrift",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),d("WebrtcSdpSerializers").serializeSdp(a.sdpThrift,b),b.writeFieldEnd()),a.sdpCompressionVersion!=null&&(b.writeFieldBegin({fname:"sdpCompressionVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(BigInt(a.sdpCompressionVersion)),b.writeFieldEnd()),a.sdpCompressedData!=null&&(b.writeFieldBegin({fname:"sdpCompressedData",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.sdpCompressedData),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function Va(a,b){b.writeStructBegin("SessionDescriptionUpdate");b.writeFieldBegin({fname:"media",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.media!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(a.media).length});for(a of Object.entries(a.media)){var d=a[0],e=a[1];b.writeI32(Number(d));p(e,b)}b.writeMapEnd()}else{d={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(d).length});for(e of Object.entries(d)){a=e[0];d=e[1];b.writeI32(Number(a));p(d,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function p(a,b){b.writeStructBegin("MediaDescriptionUpdate");b.writeFieldBegin({fname:"body",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.body!=null)b.writeString(a.body);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"msid",ftype:h.STRING,fid:2});if(a.msid!=null)b.writeString(a.msid);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"mid",ftype:h.STRING,fid:3});if(a.mid!=null)b.writeString(a.mid);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function q(a,b){b.writeStructBegin("ServerMediaUpdate");b.writeFieldBegin({fname:"sourceKey",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.sourceKey!=null)b.writeString(a.sourceKey);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"media",ftype:h.LIST,fid:2});if(a.media!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.media.length});for(e of a.media)d("MultiwaySharedSerializers").serializeMedia(e,b);b.writeListEnd()}else{e=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:e.length});for(e of e)d("MultiwaySharedSerializers").serializeMedia(e,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"ssrcGroups",ftype:h.LIST,fid:3});if(a.ssrcGroups!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.ssrcGroups.length});for(e of a.ssrcGroups)d("MultiwaySharedSerializers").serializeSsrcGroup(e,b);b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.length});for(e of a)d("MultiwaySharedSerializers").serializeSsrcGroup(e,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function r(a,b){b.writeStructBegin("ClientMediaUpdate");b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.mediaStatus!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.BOOL,size:Object.keys(a.mediaStatus).length});for(var e of Object.entries(a.mediaStatus)){var f=e[0],g=e[1];b.writeString(f);b.writeBool(g)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.BOOL,size:Object.keys(f).length});for(g of Object.entries(f)){e=g[0];f=g[1];b.writeString(e);b.writeBool(f)}b.writeMapEnd()}b.writeFieldEnd();a.mediaStatusEx!=null&&(b.writeFieldBegin({fname:"mediaStatusEx",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatusEx,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function s(a,b){b.writeStructBegin("IceCandidate");a.candidateSdpString!=null&&(b.writeFieldBegin({fname:"candidateSdpString",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.candidateSdpString),b.writeFieldEnd());b.writeFieldBegin({fname:"sdpMLineIndex",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2});if(a.sdpMLineIndex!=null)b.writeI64(BigInt(a.sdpMLineIndex));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"sdpMid",ftype:h.STRING,fid:3});if(a.sdpMid!=null)b.writeString(a.sdpMid);else{e="";b.writeString(e)}b.writeFieldEnd();a.candidateSdpThrift!=null&&(b.writeFieldBegin({fname:"candidateSdpThrift",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),d("WebrtcSdpSerializers").serializeIceCandidateSdp(a.candidateSdpThrift,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function t(a,b){b.writeStructBegin("SyncPayload");b.writeFieldBegin({fname:"stateStore",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.stateStore!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.stateStore).length});for(var e of Object.entries(a.stateStore)){var f=e[0],g=e[1];b.writeString(f);d("StateSyncSerializers").serializeState(g,b)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(f).length});for(g of Object.entries(f)){e=g[0];f=g[1];b.writeString(e);d("StateSyncSerializers").serializeState(f,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"stateStoreV2",ftype:h.MAP,fid:4});if(a.stateStoreV2!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(a.stateStoreV2).length});for(e of Object.entries(a.stateStoreV2)){f=e[0];g=e[1];b.writeI32((a=Number(f))!=null?a:0);d("StateSyncSerializers").serializeState(g,b)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(f).length});for(a of Object.entries(f)){g=a[0];e=a[1];b.writeI32((f=Number(g))!=null?f:0);d("StateSyncSerializers").serializeState(e,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function Wa(a,b){b.writeStructBegin("SyncAck");b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.version!=null)b.writeI32(a.version);else{a=0;b.writeI32(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function Xa(a,b){b.writeStructBegin("E2eeData");b.writeFieldBegin({fname:"encryptedTopic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.encryptedTopic!=null)b.writeString(a.encryptedTopic);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"encryptedData",ftype:h.STRING,fid:2});if(a.encryptedData!=null)b.writeBinary(a.encryptedData);else{e=Uint8Array.of();b.writeBinary(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"senderId",ftype:h.STRING,fid:3});if(a.senderId!=null)b.writeBinary(a.senderId);else{e=Uint8Array.of();b.writeBinary(e)}b.writeFieldEnd();if(a.targetIds!=null){b.writeFieldBegin({fname:"targetIds",ftype:(h||(h=c("ThriftTypes"))).SET,fid:4});b.writeSetBegin({etype:h.STRING,size:a.targetIds.size});for(e of a.targetIds)b.writeBinary(e);b.writeSetEnd();b.writeFieldEnd()}b.writeFieldBegin({fname:"messageType",ftype:h.I32,fid:5});if(a.messageType!=null){b.writeI32((e=a.messageType)!=null?e:0)}else{a=d("MultiwayCommonTypes").E2eeDataMessageType.cast(0);b.writeI32(a!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function u(a,b){b.writeStructBegin("ClientMediaUpdateRequest");b.writeFieldBegin({fname:"fromVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.fromVersion!=null)b.writeI64(BigInt(a.fromVersion));else{var d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"toVersion",ftype:h.I64,fid:2});if(a.toVersion!=null)b.writeI64(BigInt(a.toVersion));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"mediaUpdates",ftype:h.LIST,fid:3});if(a.mediaUpdates!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.mediaUpdates.length});for(d of a.mediaUpdates)r(d,b);b.writeListEnd()}else{d=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:d.length});for(d of d)r(d,b);b.writeListEnd()}b.writeFieldEnd();a.offer!=null&&(b.writeFieldBegin({fname:"offer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),o(a.offer,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function v(a,b){b.writeStructBegin("ClientMediaUpdateResponse");b.writeFieldBegin({fname:"currentVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.currentVersion!=null)b.writeI64(BigInt(a.currentVersion));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();a.answer!=null&&(b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),o(a.answer,b),b.writeFieldEnd());a.mediaStatus!=null&&(b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatus,b),b.writeFieldEnd());a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd());a.renegotiationOffer!=null&&(b.writeFieldBegin({fname:"renegotiationOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5}),o(a.renegotiationOffer,b),b.writeFieldEnd());b.writeFieldBegin({fname:"mediaPath",ftype:h.I32,fid:6});if(a.mediaPath!=null){b.writeI32((e=a.mediaPath)!=null?e:0)}else{e=d("MultiwaySharedTypes").MediaPath.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();if(a.stateStore!=null){b.writeFieldBegin({fname:"stateStore",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:7});b.writeMapBegin({ktype:h.STRING,vtype:h.STRUCT,size:Object.keys(a.stateStore).length});for(e of Object.entries(a.stateStore)){var f=e[0],g=e[1];b.writeString(f);d("StateSyncSerializers").serializeState(g,b)}b.writeMapEnd();b.writeFieldEnd()}if(a.stateStoreV2!=null){b.writeFieldBegin({fname:"stateStoreV2",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:8});b.writeMapBegin({ktype:h.I32,vtype:h.STRUCT,size:Object.keys(a.stateStoreV2).length});for(f of Object.entries(a.stateStoreV2)){g=f[0];e=f[1];b.writeI32((a=Number(g))!=null?a:0);d("StateSyncSerializers").serializeState(e,b)}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function Ya(a,b){b.writeStructBegin("MultipleRelaysAllocationParameters");b.writeFieldBegin({fname:"callerUserId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.callerUserId!=null)b.writeString(a.callerUserId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"calleeUserId",ftype:h.STRING,fid:2});if(a.calleeUserId!=null)b.writeString(a.calleeUserId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"sessionId",ftype:h.STRING,fid:3});if(a.sessionId!=null)b.writeString(a.sessionId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function w(a,b){b.writeStructBegin("ServerMediaUpdateRequest");b.writeFieldBegin({fname:"fromVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.fromVersion!=null)b.writeI64(BigInt(a.fromVersion));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"toVersion",ftype:h.I64,fid:2});if(a.toVersion!=null)b.writeI64(BigInt(a.toVersion));else{e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"mediaUpdates",ftype:h.LIST,fid:3});if(a.mediaUpdates!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.mediaUpdates.length});for(e of a.mediaUpdates)q(e,b);b.writeListEnd()}else{e=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:e.length});for(e of e)q(e,b);b.writeListEnd()}b.writeFieldEnd();a.offer!=null&&(b.writeFieldBegin({fname:"offer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),o(a.offer,b),b.writeFieldEnd());a.answer!=null&&(b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),o(a.answer,b),b.writeFieldEnd());a.mediaStatus!=null&&(b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatus,b),b.writeFieldEnd());b.writeFieldBegin({fname:"renegotiationRequested",ftype:h.BOOL,fid:8});if(a.renegotiationRequested!=null)b.writeBool(a.renegotiationRequested);else{e=!1;b.writeBool(e)}b.writeFieldEnd();a.prAnswer!=null&&(b.writeFieldBegin({fname:"prAnswer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:9}),o(a.prAnswer,b),b.writeFieldEnd());if(a.stateStore!=null){b.writeFieldBegin({fname:"stateStore",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:10});b.writeMapBegin({ktype:h.STRING,vtype:h.STRUCT,size:Object.keys(a.stateStore).length});for(e of Object.entries(a.stateStore)){var f=e[0],g=e[1];b.writeString(f);d("StateSyncSerializers").serializeState(g,b)}b.writeMapEnd();b.writeFieldEnd()}a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:11}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd());a.multipleRelaysParameters!=null&&(b.writeFieldBegin({fname:"multipleRelaysParameters",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:12}),Ya(a.multipleRelaysParameters,b),b.writeFieldEnd());b.writeFieldBegin({fname:"multipleVideoStreamsAllowed",ftype:h.BOOL,fid:13});if(a.multipleVideoStreamsAllowed!=null)b.writeBool(a.multipleVideoStreamsAllowed);else{f=!1;b.writeBool(f)}b.writeFieldEnd();a.renegotiationOffer!=null&&(b.writeFieldBegin({fname:"renegotiationOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14}),o(a.renegotiationOffer,b),b.writeFieldEnd());b.writeFieldBegin({fname:"mediaPath",ftype:h.I32,fid:15});if(a.mediaPath!=null){b.writeI32((g=a.mediaPath)!=null?g:0)}else{e=d("MultiwaySharedTypes").MediaPath.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.update!=null&&(b.writeFieldBegin({fname:"update",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16}),Va(a.update,b),b.writeFieldEnd());b.writeFieldBegin({fname:"screenShareStreamAllowed",ftype:h.BOOL,fid:17});if(a.screenShareStreamAllowed!=null)b.writeBool(a.screenShareStreamAllowed);else{f=!1;b.writeBool(f)}b.writeFieldEnd();if(a.stateStoreV2!=null){b.writeFieldBegin({fname:"stateStoreV2",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:18});b.writeMapBegin({ktype:h.I32,vtype:h.STRUCT,size:Object.keys(a.stateStoreV2).length});for(g of Object.entries(a.stateStoreV2)){e=g[0];f=g[1];b.writeI32((e=Number(e))!=null?e:0);d("StateSyncSerializers").serializeState(f,b)}b.writeMapEnd();b.writeFieldEnd()}if(a.allowedCustomVideoContentTypes!=null){b.writeFieldBegin({fname:"allowedCustomVideoContentTypes",ftype:(h||(h=c("ThriftTypes"))).SET,fid:19});b.writeSetBegin({etype:h.I32,size:a.allowedCustomVideoContentTypes.size});for(e of a.allowedCustomVideoContentTypes)b.writeI32(e!=null?e:0);b.writeSetEnd();b.writeFieldEnd()}a.relayInfo!=null&&(b.writeFieldBegin({fname:"relayInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:20}),d("MultiwaySharedSerializers").serializeRelayInfo(a.relayInfo,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function x(a,b){b.writeStructBegin("ServerMediaUpdateResponse");b.writeFieldBegin({fname:"currentVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.currentVersion!=null)b.writeI64(BigInt(a.currentVersion));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();a.answer!=null&&(b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),o(a.answer,b),b.writeFieldEnd());a.mediaStatus!=null&&(b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatus,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function y(a,b){b.writeStructBegin("TransferRequest"),b.writeFieldStop(),b.writeStructEnd()}function z(a,b){b.writeStructBegin("HangupRequest");b.writeFieldBegin({fname:"reason",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.reason!=null){var e;b.writeI32((e=a.reason)!=null?e:0)}else{e=d("MultiwayCommonTypes").HangupReason.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"detailedReasonString",ftype:h.STRING,fid:2});if(a.detailedReasonString!=null)b.writeString(a.detailedReasonString);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function A(a,b){b.writeStructBegin("IceCandidateRequest");b.writeFieldBegin({fname:"iceCandidateSdps",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});if(a.iceCandidateSdps!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.iceCandidateSdps.length});for(a of a.iceCandidateSdps)s(a,b);b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.length});for(a of a)s(a,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function B(a,b){b.writeStructBegin("DismissRequest");b.writeFieldBegin({fname:"reason",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.reason!=null){var e;b.writeI32((e=a.reason)!=null?e:0)}else{e=d("MultiwayCommonTypes").DismissReason.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"detailedReasonString",ftype:h.STRING,fid:2});if(a.detailedReasonString!=null)b.writeString(a.detailedReasonString);else{e="";b.writeString(e)}b.writeFieldEnd();a.callabilityResultErrorCode!=null&&(b.writeFieldBegin({fname:"callabilityResultErrorCode",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(BigInt(a.callabilityResultErrorCode)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function Za(a,b){b.writeStructBegin("EndpointSettings");b.writeFieldBegin({fname:"joinMode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.joinMode!=null){b.writeI32((a=a.joinMode)!=null?a:0)}else{a=d("MultiwayCommonTypes").JoinMode.cast(0);b.writeI32(a!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function C(a,b){b.writeStructBegin("ParticipantState");b.writeFieldBegin({fname:"state",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.state!=null){var e;b.writeI32((e=a.state)!=null?e:0)}else{e=d("MultiwayCommonTypes").ParticipantCallState.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.userCapabilities!=null&&(b.writeFieldBegin({fname:"userCapabilities",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.userCapabilities),b.writeFieldEnd());a.sctpNodeId!=null&&(b.writeFieldBegin({fname:"sctpNodeId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(BigInt(a.sctpNodeId)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function $a(a,b){b.writeStructBegin("ServerOnlyParticipantState"),a.userCountry!=null&&(b.writeFieldBegin({fname:"userCountry",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.userCountry),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function D(a,b){b.writeStructBegin("UserProfile"),a.name!=null&&(b.writeFieldBegin({fname:"name",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.name),b.writeFieldEnd()),a.profilePictureUri!=null&&(b.writeFieldBegin({fname:"profilePictureUri",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.profilePictureUri),b.writeFieldEnd()),a.aliasId!=null&&(b.writeFieldBegin({fname:"aliasId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.aliasId),b.writeFieldEnd()),a.thirdPartyId!=null&&(b.writeFieldBegin({fname:"thirdPartyId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.thirdPartyId),b.writeFieldEnd()),a.groupId!=null&&(b.writeFieldBegin({fname:"groupId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.groupId),b.writeFieldEnd()),a.avatarImageUri!=null&&(b.writeFieldBegin({fname:"avatarImageUri",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:6}),b.writeString(a.avatarImageUri),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function ab(a,b){b.writeStructBegin("ProductMetadata"),a.callerInfo!=null&&(b.writeFieldBegin({fname:"callerInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),D(a.callerInfo,b),b.writeFieldEnd()),a.liveBroadcastId!=null&&(b.writeFieldBegin({fname:"liveBroadcastId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.liveBroadcastId),b.writeFieldEnd()),a.callingTags!=null&&(b.writeFieldBegin({fname:"callingTags",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3}),b.writeI32(a.callingTags),b.writeFieldEnd()),a.backingIdentifier!=null&&(b.writeFieldBegin({fname:"backingIdentifier",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.backingIdentifier),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function E(a,b){b.writeStructBegin("ConferenceStateRequest");b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.version!=null)b.writeI64(BigInt(a.version));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"participantStates",ftype:h.MAP,fid:2});if(a.participantStates!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.participantStates).length});for(e of Object.entries(a.participantStates)){var f=e[0],g=e[1];b.writeString(f);C(g,b)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(f).length});for(g of Object.entries(f)){e=g[0];f=g[1];b.writeString(e);C(f,b)}b.writeMapEnd()}b.writeFieldEnd();if(a.userProfiles!=null){b.writeFieldBegin({fname:"userProfiles",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:3});b.writeMapBegin({ktype:h.STRING,vtype:h.STRUCT,size:Object.keys(a.userProfiles).length});for(e of Object.entries(a.userProfiles)){f=e[0];g=e[1];b.writeString(f);D(g,b)}b.writeMapEnd();b.writeFieldEnd()}if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:4});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(f of a.appMessages)d("DataMessageSerializers").serializeDataMessage(f,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldBegin({fname:"groupsOfUsers",ftype:h.LIST,fid:5});if(a.groupsOfUsers!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.groupsOfUsers.length});for(g of a.groupsOfUsers)Y(g,b);b.writeListEnd()}else{e=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:e.length});for(f of e)Y(f,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function F(a,b){b.writeStructBegin("ConferenceStateResponse");b.writeFieldBegin({fname:"currentVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.currentVersion!=null)b.writeI64(BigInt(a.currentVersion));else{a="0";b.writeI64(BigInt(a))}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function G(a,b){b.writeStructBegin("SubscriptionRequest");b.writeFieldBegin({fname:"subscriptions",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});if(a.subscriptions!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.subscriptions.length});for(a of a.subscriptions)d("MultiwaySharedSerializers").serializeSubscription(a,b);b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.length});for(a of a)d("MultiwaySharedSerializers").serializeSubscription(a,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function H(a,b){b.writeStructBegin("DataMessageRequest");b.writeFieldBegin({fname:"message",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.message!=null)d("DataMessageSerializers").serializeDataMessage(a.message,b);else{a=d("DataMessageSerializers").DataMessage$DefaultConstructor();d("DataMessageSerializers").serializeDataMessage(a,b)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function I(a,b){b.writeStructBegin("DataMessageResponse");b.writeFieldBegin({fname:"deliveryResult",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.deliveryResult!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.I32,size:Object.keys(a.deliveryResult).length});for(var d of Object.entries(a.deliveryResult)){var e=d[0],f=d[1];b.writeString(e);b.writeI32(f!=null?f:0)}b.writeMapEnd()}else{e={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.I32,size:Object.keys(e).length});for(f of Object.entries(e)){d=f[0];e=f[1];b.writeString(d);b.writeI32(e!=null?e:0)}b.writeMapEnd()}b.writeFieldEnd();if(a.serviceTypeDeliveryResult!=null){b.writeFieldBegin({fname:"serviceTypeDeliveryResult",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:2});b.writeMapBegin({ktype:h.I32,vtype:h.I32,size:Object.keys(a.serviceTypeDeliveryResult).length});for(d of Object.entries(a.serviceTypeDeliveryResult)){e=d[0];f=d[1];b.writeI32((a=Number(e))!=null?a:0);b.writeI32(f!=null?f:0)}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function J(a,b){b.writeStructBegin("AddParticipantsRequest");b.writeFieldBegin({fname:"usersToInvite",ftype:(h||(h=c("ThriftTypes"))).SET,fid:1});if(a.usersToInvite!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.usersToInvite.size});for(var e of a.usersToInvite)b.writeString(e);b.writeSetEnd()}else{e=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:e.size});for(e of e)b.writeString(e);b.writeSetEnd()}b.writeFieldEnd();if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(e of a.appMessages)d("DataMessageSerializers").serializeDataMessage(e,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function K(a,b){b.writeStructBegin("SfuAllocation");b.writeFieldBegin({fname:"smcTier",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.smcTier!=null)b.writeString(a.smcTier);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"region",ftype:h.STRING,fid:2});if(a.region!=null)b.writeString(a.region);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"isUsfu",ftype:h.BOOL,fid:3});if(a.isUsfu!=null)b.writeBool(a.isUsfu);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"isEdge",ftype:h.BOOL,fid:4});if(a.isEdge!=null)b.writeBool(a.isEdge);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function L(a,b){b.writeStructBegin("JoinRequest");b.writeFieldBegin({fname:"offer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.offer!=null)o(a.offer,b);else{var e=i();o(e,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"deviceCapabilities",ftype:h.SET,fid:2});if(a.deviceCapabilities!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:a.deviceCapabilities.size});for(e of a.deviceCapabilities)b.writeI32(e!=null?e:0);b.writeSetEnd()}else{e=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:e.size});for(e of e)b.writeI32(e!=null?e:0);b.writeSetEnd()}b.writeFieldEnd();if(a.usersToCall!=null){b.writeFieldBegin({fname:"usersToCall",ftype:(h||(h=c("ThriftTypes"))).SET,fid:3});b.writeSetBegin({etype:h.STRING,size:a.usersToCall.size});for(e of a.usersToCall)b.writeString(e);b.writeSetEnd();b.writeFieldEnd()}if(a.mediaStatus!=null){b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:4});b.writeMapBegin({ktype:h.STRING,vtype:h.BOOL,size:Object.keys(a.mediaStatus).length});for(e of Object.entries(a.mediaStatus)){var f=e[0],g=e[1];b.writeString(f);b.writeBool(g)}b.writeMapEnd();b.writeFieldEnd()}a.userCapabilities!=null&&(b.writeFieldBegin({fname:"userCapabilities",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeBinary(a.userCapabilities),b.writeFieldEnd());a.supportedExperiments!=null&&(b.writeFieldBegin({fname:"supportedExperiments",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:6}),b.writeString(a.supportedExperiments),b.writeFieldEnd());if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:9});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(f of a.appMessages)d("DataMessageSerializers").serializeDataMessage(f,b);b.writeListEnd();b.writeFieldEnd()}a.userToEscalate!=null&&(b.writeFieldBegin({fname:"userToEscalate",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:10}),b.writeString(a.userToEscalate),b.writeFieldEnd());a.escalatingCallId!=null&&(b.writeFieldBegin({fname:"escalatingCallId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:11}),b.writeI64(BigInt(a.escalatingCallId)),b.writeFieldEnd());if(a.conferenceType!=null){b.writeFieldBegin({fname:"conferenceType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:12});b.writeI32((g=a.conferenceType)!=null?g:0);b.writeFieldEnd()}a.mediaStatusEx!=null&&(b.writeFieldBegin({fname:"mediaStatusEx",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:13}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatusEx,b),b.writeFieldEnd());a.answer!=null&&(b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14}),o(a.answer,b),b.writeFieldEnd());a.syncPayload!=null&&(b.writeFieldBegin({fname:"syncPayload",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:15}),t(a.syncPayload,b),b.writeFieldEnd());if(a.usersToApproveFromWaitingRoom!=null){b.writeFieldBegin({fname:"usersToApproveFromWaitingRoom",ftype:(h||(h=c("ThriftTypes"))).SET,fid:16});b.writeSetBegin({etype:h.STRING,size:a.usersToApproveFromWaitingRoom.size});for(e of a.usersToApproveFromWaitingRoom)b.writeString(e);b.writeSetEnd();b.writeFieldEnd()}a.e2eeEnforcement!=null&&(b.writeFieldBegin({fname:"e2eeEnforcement",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:17}),d("MultiwaySharedSerializers").serializeE2eeEnforcement(a.e2eeEnforcement,b),b.writeFieldEnd());a.sfuAllocation!=null&&(b.writeFieldBegin({fname:"sfuAllocation",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:18}),K(a.sfuAllocation,b),b.writeFieldEnd());if(a.clientMediaMode!=null){b.writeFieldBegin({fname:"clientMediaMode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:19});b.writeI32((f=a.clientMediaMode)!=null?f:0);b.writeFieldEnd()}a.endpointSettings!=null&&(b.writeFieldBegin({fname:"endpointSettings",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:20}),Za(a.endpointSettings,b),b.writeFieldEnd());a.backupSfuAllocation!=null&&(b.writeFieldBegin({fname:"backupSfuAllocation",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:21}),K(a.backupSfuAllocation,b),b.writeFieldEnd());if(a.supportedCustomVideoContentTypes!=null){b.writeFieldBegin({fname:"supportedCustomVideoContentTypes",ftype:(h||(h=c("ThriftTypes"))).SET,fid:22});b.writeSetBegin({etype:h.I32,size:a.supportedCustomVideoContentTypes.size});for(g of a.supportedCustomVideoContentTypes)b.writeI32(g!=null?g:0);b.writeSetEnd();b.writeFieldEnd()}a.configIntegrityOpaqueToken!=null&&(b.writeFieldBegin({fname:"configIntegrityOpaqueToken",ftype:(h||(h=c("ThriftTypes"))).I32,fid:23}),b.writeI32(a.configIntegrityOpaqueToken),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function M(a,b){b.writeStructBegin("JoinResponse");b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.answer!=null)o(a.answer,b);else{var e=i();o(e,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"mediaStatus",ftype:h.MAP,fid:2});if(a.mediaStatus!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.BOOL,size:Object.keys(a.mediaStatus).length});for(e of Object.entries(a.mediaStatus)){var f=e[0],g=e[1];b.writeString(f);b.writeBool(g)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.BOOL,size:Object.keys(f).length});for(g of Object.entries(f)){e=g[0];f=g[1];b.writeString(e);b.writeBool(f)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"initiator",ftype:h.STRING,fid:3});if(a.initiator!=null)b.writeString(a.initiator);else{e="";b.writeString(e)}b.writeFieldEnd();a.negotiatedExperiments!=null&&(b.writeFieldBegin({fname:"negotiatedExperiments",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.negotiatedExperiments),b.writeFieldEnd());a.mediaStatusEx!=null&&(b.writeFieldBegin({fname:"mediaStatusEx",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatusEx,b),b.writeFieldEnd());if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:7});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(f of a.appMessages)d("DataMessageSerializers").serializeDataMessage(f,b);b.writeListEnd();b.writeFieldEnd()}if(a.stateStore!=null){b.writeFieldBegin({fname:"stateStore",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:8});b.writeMapBegin({ktype:h.STRING,vtype:h.STRUCT,size:Object.keys(a.stateStore).length});for(g of Object.entries(a.stateStore)){e=g[0];f=g[1];b.writeString(e);d("StateSyncSerializers").serializeState(f,b)}b.writeMapEnd();b.writeFieldEnd()}a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:9}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd());b.writeFieldBegin({fname:"isPendingApproval",ftype:h.BOOL,fid:10});if(a.isPendingApproval!=null)b.writeBool(a.isPendingApproval);else{e=!1;b.writeBool(e)}b.writeFieldEnd();a.renegotiationOffer!=null&&(b.writeFieldBegin({fname:"renegotiationOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:11}),o(a.renegotiationOffer,b),b.writeFieldEnd());b.writeFieldBegin({fname:"multipleVideoStreamsAllowed",ftype:h.BOOL,fid:12});if(a.multipleVideoStreamsAllowed!=null)b.writeBool(a.multipleVideoStreamsAllowed);else{f=!1;b.writeBool(f)}b.writeFieldEnd();b.writeFieldBegin({fname:"mediaPath",ftype:h.I32,fid:13});if(a.mediaPath!=null){b.writeI32((g=a.mediaPath)!=null?g:0)}else{e=d("MultiwaySharedTypes").MediaPath.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"groupsOfUsers",ftype:h.LIST,fid:14});if(a.groupsOfUsers!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.groupsOfUsers.length});for(f of a.groupsOfUsers)Y(f,b);b.writeListEnd()}else{g=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:g.length});for(e of g)Y(e,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"screenShareStreamAllowed",ftype:h.BOOL,fid:15});if(a.screenShareStreamAllowed!=null)b.writeBool(a.screenShareStreamAllowed);else{f=!1;b.writeBool(f)}b.writeFieldEnd();a.relayInfo!=null&&(b.writeFieldBegin({fname:"relayInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16}),d("MultiwaySharedSerializers").serializeRelayInfo(a.relayInfo,b),b.writeFieldEnd());a.selfSctpNodeId!=null&&(b.writeFieldBegin({fname:"selfSctpNodeId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:17}),b.writeI64(BigInt(a.selfSctpNodeId)),b.writeFieldEnd());if(a.stateStoreV2!=null){b.writeFieldBegin({fname:"stateStoreV2",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:18});b.writeMapBegin({ktype:h.I32,vtype:h.STRUCT,size:Object.keys(a.stateStoreV2).length});for(g of Object.entries(a.stateStoreV2)){e=g[0];f=g[1];b.writeI32((e=Number(e))!=null?e:0);d("StateSyncSerializers").serializeState(f,b)}b.writeMapEnd();b.writeFieldEnd()}if(a.allowedCustomVideoContentTypes!=null){b.writeFieldBegin({fname:"allowedCustomVideoContentTypes",ftype:(h||(h=c("ThriftTypes"))).SET,fid:19});b.writeSetBegin({etype:h.I32,size:a.allowedCustomVideoContentTypes.size});for(e of a.allowedCustomVideoContentTypes)b.writeI32(e!=null?e:0);b.writeSetEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function N(a,b){b.writeStructBegin("ConnectRequest");a.sdp!=null&&(b.writeFieldBegin({fname:"sdp",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),o(a.sdp,b),b.writeFieldEnd());b.writeFieldBegin({fname:"deviceCapabilities",ftype:(h||(h=c("ThriftTypes"))).SET,fid:3});if(a.deviceCapabilities!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:a.deviceCapabilities.size});for(var e of a.deviceCapabilities)b.writeI32(e!=null?e:0);b.writeSetEnd()}else{e=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:e.size});for(e of e)b.writeI32(e!=null?e:0);b.writeSetEnd()}b.writeFieldEnd();if(a.supportedCustomVideoContentTypes!=null){b.writeFieldBegin({fname:"supportedCustomVideoContentTypes",ftype:(h||(h=c("ThriftTypes"))).SET,fid:5});b.writeSetBegin({etype:h.I32,size:a.supportedCustomVideoContentTypes.size});for(e of a.supportedCustomVideoContentTypes)b.writeI32(e!=null?e:0);b.writeSetEnd();b.writeFieldEnd()}a.prOffer!=null&&(b.writeFieldBegin({fname:"prOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),o(a.prOffer,b),b.writeFieldEnd());a.e2eeEnforcement!=null&&(b.writeFieldBegin({fname:"e2eeEnforcement",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7}),d("MultiwaySharedSerializers").serializeE2eeEnforcement(a.e2eeEnforcement,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function O(a,b){b.writeStructBegin("ConnectResponse"),a.sdp!=null&&(b.writeFieldBegin({fname:"sdp",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),o(a.sdp,b),b.writeFieldEnd()),a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function P(a,b){b.writeStructBegin("ClientEvent");b.writeFieldBegin({fname:"type",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.type!=null){var e;b.writeI32((e=a.type)!=null?e:0)}else{e=d("MultiwayCommonTypes").ClientEventType.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.time!=null&&(b.writeFieldBegin({fname:"time",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2}),b.writeI64(BigInt(a.time)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function Q(a,b){b.writeStructBegin("ClientEventRequest");b.writeFieldBegin({fname:"clientEvents",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});if(a.clientEvents!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.clientEvents.length});for(a of a.clientEvents)P(a,b);b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.length});for(a of a)P(a,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function bb(a,b){b.writeStructBegin("ThreadIdInfo"),a.groupThreadId!=null&&(b.writeFieldBegin({fname:"groupThreadId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.groupThreadId),b.writeFieldEnd()),a.peerId!=null&&(b.writeFieldBegin({fname:"peerId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.peerId),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function R(a,b){b.writeStructBegin("ClientEventResponse"),b.writeFieldStop(),b.writeStructEnd()}function S(a,b){b.writeStructBegin("RingRequest");b.writeFieldBegin({fname:"caller",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.caller!=null)b.writeString(a.caller);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"otherParticipants",ftype:h.SET,fid:2});if(a.otherParticipants!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.otherParticipants.size});for(e of a.otherParticipants)b.writeString(e);b.writeSetEnd()}else{e=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:e.size});for(e of e)b.writeString(e);b.writeSetEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"ringType",ftype:h.I32,fid:4});if(a.ringType!=null){b.writeI32((e=a.ringType)!=null?e:0)}else{e=d("MultiwayCommonTypes").RingType.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.offeredExperiments!=null&&(b.writeFieldBegin({fname:"offeredExperiments",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.offeredExperiments),b.writeFieldEnd());a.isScheduledCall!=null&&(b.writeFieldBegin({fname:"isScheduledCall",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:6}),b.writeBool(a.isScheduledCall),b.writeFieldEnd());if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:8});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(e of a.appMessages)d("DataMessageSerializers").serializeDataMessage(e,b);b.writeListEnd();b.writeFieldEnd()}a.offer!=null&&(b.writeFieldBegin({fname:"offer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:10}),o(a.offer,b),b.writeFieldEnd());a.mediaStatusEx!=null&&(b.writeFieldBegin({fname:"mediaStatusEx",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:11}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatusEx,b),b.writeFieldEnd());a.isPreconnectSupported!=null&&(b.writeFieldBegin({fname:"isPreconnectSupported",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:12}),b.writeBool(a.isPreconnectSupported),b.writeFieldEnd());a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:13}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd());a.unifiedOffer!=null&&(b.writeFieldBegin({fname:"unifiedOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14}),o(a.unifiedOffer,b),b.writeFieldEnd());b.writeFieldBegin({fname:"mediaPath",ftype:h.I32,fid:15});if(a.mediaPath!=null){b.writeI32((e=a.mediaPath)!=null?e:0)}else{e=d("MultiwaySharedTypes").MediaPath.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.e2eeEnforcement!=null&&(b.writeFieldBegin({fname:"e2eeEnforcement",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16}),d("MultiwaySharedSerializers").serializeE2eeEnforcement(a.e2eeEnforcement,b),b.writeFieldEnd());a.isLegacyCall!=null&&(b.writeFieldBegin({fname:"isLegacyCall",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:17}),b.writeBool(a.isLegacyCall),b.writeFieldEnd());b.writeFieldBegin({fname:"isTransferCall",ftype:h.BOOL,fid:18});if(a.isTransferCall!=null)b.writeBool(a.isTransferCall);else{e=!1;b.writeBool(e)}b.writeFieldEnd();a.relayInfo!=null&&(b.writeFieldBegin({fname:"relayInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:20}),d("MultiwaySharedSerializers").serializeRelayInfo(a.relayInfo,b),b.writeFieldEnd());if(a.overlayConfigs!=null){b.writeFieldBegin({fname:"overlayConfigs",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:21});b.writeMapBegin({ktype:h.I32,vtype:h.I32,size:Object.keys(a.overlayConfigs).length});for(e of Object.entries(a.overlayConfigs)){var f=e[0],g=e[1];b.writeI32(Number(f));b.writeI32(g)}b.writeMapEnd();b.writeFieldEnd()}a.productMetadata!=null&&(b.writeFieldBegin({fname:"productMetadata",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:22}),ab(a.productMetadata,b),b.writeFieldEnd());a.callerClientSessionId!=null&&(b.writeFieldBegin({fname:"callerClientSessionId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:23}),b.writeString(a.callerClientSessionId),b.writeFieldEnd());a.threadIdInfo!=null&&(b.writeFieldBegin({fname:"threadIdInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:24}),bb(a.threadIdInfo,b),b.writeFieldEnd());a.linkUrl!=null&&(b.writeFieldBegin({fname:"linkUrl",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:25}),b.writeString(a.linkUrl),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function T(a,b){b.writeStructBegin("RingResponse");b.writeFieldBegin({fname:"deviceStatus",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});if(a.deviceStatus!=null){b.writeI32((a=a.deviceStatus)!=null?a:0)}else{a=d("MultiwayCommonTypes").DeviceStatus.cast(0);b.writeI32(a!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function U(a,b){b.writeStructBegin("RemoveParticipantsRequest");b.writeFieldBegin({fname:"usersToRemove",ftype:(h||(h=c("ThriftTypes"))).SET,fid:1});if(a.usersToRemove!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.usersToRemove.size});for(a of a.usersToRemove)b.writeString(a);b.writeSetEnd()}else{a=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.size});for(a of a)b.writeString(a);b.writeSetEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function V(a,b){b.writeStructBegin("UnsubscribeRequest");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.topic!=null)b.writeString(a.topic);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:2});if(a.version!=null)b.writeI32(a.version);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"topicId",ftype:h.I32,fid:3});if(a.topicId!=null){b.writeI32((e=a.topicId)!=null?e:0)}else{a=d("StateSyncTopicsConfigTypes").TopicId.cast(0);b.writeI32(a!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function W(a,b){b.writeStructBegin("UnsubscribeResponse");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:2});if(a.version!=null)b.writeI32(a.version);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function X(a,b){b.writeStructBegin("UpdateRequest");b.writeFieldBegin({fname:"syncPayload",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.syncPayload!=null)t(a.syncPayload,b);else{var e=l();t(e,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"topic",ftype:h.STRING,fid:2});if(a.topic!=null)b.writeString(a.topic);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:3});if(a.version!=null)b.writeI32(a.version);else{e=0;b.writeI32(e)}b.writeFieldEnd();a.data!=null&&(b.writeFieldBegin({fname:"data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.data),b.writeFieldEnd());b.writeFieldBegin({fname:"topicId",ftype:h.I32,fid:5});if(a.topicId!=null){b.writeI32((e=a.topicId)!=null?e:0)}else{a=d("StateSyncTopicsConfigTypes").TopicId.cast(0);b.writeI32(a!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function cb(a,b){b.writeStructBegin("UpdateResponse");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:3});if(a.version!=null)b.writeI32(a.version);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function db(a,b){b.writeStructBegin("NotifyRequest");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:3});if(a.version!=null)b.writeI32(a.version);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"data",ftype:h.STRING,fid:4});if(a.data!=null)b.writeBinary(a.data);else{d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.syncPayload!=null&&(b.writeFieldBegin({fname:"syncPayload",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5}),t(a.syncPayload,b),b.writeFieldEnd());if(a.topicId!=null){b.writeFieldBegin({fname:"topicId",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6});b.writeI32((d=a.topicId)!=null?d:0);b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function eb(a,b){b.writeStructBegin("NotifyResponse");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:3});if(a.version!=null)b.writeI32(a.version);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function fb(a,b){b.writeStructBegin("ApprovalRequest");b.writeFieldBegin({fname:"approvalStatus",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});if(a.approvalStatus!=null){var e;b.writeI32((e=a.approvalStatus)!=null?e:0)}else{e=d("MultiwayCommonTypes").ApprovalStatus.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"targetUsers",ftype:h.SET,fid:3});if(a.targetUsers!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.targetUsers.size});for(e of a.targetUsers)b.writeString(e);b.writeSetEnd()}else{a=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.size});for(e of a)b.writeString(e);b.writeSetEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function gb(a,b){b.writeStructBegin("RtcSender");b.writeFieldBegin({fname:"id",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.id!=null)b.writeString(a.id);else{a="";b.writeString(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function hb(a,b){b.writeStructBegin("RtcReceiver");b.writeFieldBegin({fname:"actorId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.actorId!=null)b.writeString(a.actorId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"baseId",ftype:h.STRING,fid:2});if(a.baseId!=null)b.writeString(a.baseId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function ib(a,b){b.writeStructBegin("RtcMessageHeader");b.writeFieldBegin({fname:"type",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.type!=null){var e;b.writeI32((e=a.type)!=null?e:0)}else{e=d("MultiwayCommonTypes").MessageType.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"conferenceName",ftype:h.STRING,fid:2});if(a.conferenceName!=null)b.writeString(a.conferenceName);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"transactionId",ftype:h.STRING,fid:3});if(a.transactionId!=null)b.writeString(a.transactionId);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"retryCount",ftype:h.I16,fid:4});if(a.retryCount!=null)b.writeI16(a.retryCount);else{e=0;b.writeI16(e)}b.writeFieldEnd();a.serverInfoData!=null&&(b.writeFieldBegin({fname:"serverInfoData",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.serverInfoData),b.writeFieldEnd());if(a.responseStatusCode!=null){b.writeFieldBegin({fname:"responseStatusCode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6});b.writeI32((e=a.responseStatusCode)!=null?e:0);b.writeFieldEnd()}if(a.extensions!=null){b.writeFieldBegin({fname:"extensions",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:7});b.writeMapBegin({ktype:h.STRING,vtype:h.STRING,size:Object.keys(a.extensions).length});for(e of Object.entries(a.extensions)){var f=e[0],g=e[1];b.writeString(f);b.writeString(g)}b.writeMapEnd();b.writeFieldEnd()}a.sequenceNumber!=null&&(b.writeFieldBegin({fname:"sequenceNumber",ftype:(h||(h=c("ThriftTypes"))).I64,fid:8}),b.writeI64(BigInt(a.sequenceNumber)),b.writeFieldEnd());a.clientSessionId!=null&&(b.writeFieldBegin({fname:"clientSessionId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:9}),b.writeString(a.clientSessionId),b.writeFieldEnd());a.responseStatusMessage!=null&&(b.writeFieldBegin({fname:"responseStatusMessage",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:10}),b.writeString(a.responseStatusMessage),b.writeFieldEnd());if(a.responseSubCode!=null){b.writeFieldBegin({fname:"responseSubCode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:11});b.writeI32((f=a.responseSubCode)!=null?f:0);b.writeFieldEnd()}a.collisionKey!=null&&(b.writeFieldBegin({fname:"collisionKey",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:12}),b.writeString(a.collisionKey),b.writeFieldEnd());if(a.conferenceType!=null){b.writeFieldBegin({fname:"conferenceType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:13});b.writeI32((g=a.conferenceType)!=null?g:0);b.writeFieldEnd()}a.serverSessionId!=null&&(b.writeFieldBegin({fname:"serverSessionId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:14}),b.writeString(a.serverSessionId),b.writeFieldEnd());a.rtcHandle!=null&&(b.writeFieldBegin({fname:"rtcHandle",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:15}),b.writeString(a.rtcHandle),b.writeFieldEnd());a.retryAfterMsec!=null&&(b.writeFieldBegin({fname:"retryAfterMsec",ftype:(h||(h=c("ThriftTypes"))).I32,fid:16}),b.writeI32(a.retryAfterMsec),b.writeFieldEnd());a.receiverUserId!=null&&(b.writeFieldBegin({fname:"receiverUserId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:17}),b.writeString(a.receiverUserId),b.writeFieldEnd());if(a.clientStack!=null){b.writeFieldBegin({fname:"clientStack",ftype:(h||(h=c("ThriftTypes"))).I32,fid:18});b.writeI32((e=a.clientStack)!=null?e:0);b.writeFieldEnd()}a.serverMsgTime!=null&&(b.writeFieldBegin({fname:"serverMsgTime",ftype:(h||(h=c("ThriftTypes"))).I64,fid:19}),b.writeI64(BigInt(a.serverMsgTime)),b.writeFieldEnd());a.sender!=null&&(b.writeFieldBegin({fname:"sender",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:20}),gb(a.sender,b),b.writeFieldEnd());a.receiver!=null&&(b.writeFieldBegin({fname:"receiver",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:21}),hb(a.receiver,b),b.writeFieldEnd());if(a.messageTags!=null){b.writeFieldBegin({fname:"messageTags",ftype:(h||(h=c("ThriftTypes"))).SET,fid:22});b.writeSetBegin({etype:h.I32,size:a.messageTags.size});for(f of a.messageTags)b.writeI32(f!=null?f:0);b.writeSetEnd();b.writeFieldEnd()}a.conferenceId!=null&&(b.writeFieldBegin({fname:"conferenceId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:23}),b.writeI64(BigInt(a.conferenceId)),b.writeFieldEnd());a.protocolVersion!=null&&(b.writeFieldBegin({fname:"protocolVersion",ftype:(h||(h=c("ThriftTypes"))).I32,fid:24}),b.writeI32(a.protocolVersion),b.writeFieldEnd());a.bodyCompressionVersion!=null&&(b.writeFieldBegin({fname:"bodyCompressionVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:25}),b.writeI64(BigInt(a.bodyCompressionVersion)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function jb(a,b){b.writeStructBegin("RtcMessageBody"),a.joinRequest!=null&&(b.writeFieldBegin({fname:"joinRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),L(a.joinRequest,b),b.writeFieldEnd()),a.joinResponse!=null&&(b.writeFieldBegin({fname:"joinResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),M(a.joinResponse,b),b.writeFieldEnd()),a.serverMediaUpdateRequest!=null&&(b.writeFieldBegin({fname:"serverMediaUpdateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),w(a.serverMediaUpdateRequest,b),b.writeFieldEnd()),a.serverMediaUpdateResponse!=null&&(b.writeFieldBegin({fname:"serverMediaUpdateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),x(a.serverMediaUpdateResponse,b),b.writeFieldEnd()),a.hangupRequest!=null&&(b.writeFieldBegin({fname:"hangupRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5}),z(a.hangupRequest,b),b.writeFieldEnd()),a.iceCandidateRequest!=null&&(b.writeFieldBegin({fname:"iceCandidateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),A(a.iceCandidateRequest,b),b.writeFieldEnd()),a.ringRequest!=null&&(b.writeFieldBegin({fname:"ringRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:8}),S(a.ringRequest,b),b.writeFieldEnd()),a.ringResponse!=null&&(b.writeFieldBegin({fname:"ringResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:9}),T(a.ringResponse,b),b.writeFieldEnd()),a.dismissRequest!=null&&(b.writeFieldBegin({fname:"dismissRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:10}),B(a.dismissRequest,b),b.writeFieldEnd()),a.conferenceStateRequest!=null&&(b.writeFieldBegin({fname:"conferenceStateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:11}),E(a.conferenceStateRequest,b),b.writeFieldEnd()),a.conferenceStateResponse!=null&&(b.writeFieldBegin({fname:"conferenceStateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:12}),F(a.conferenceStateResponse,b),b.writeFieldEnd()),a.addParticipantsRequest!=null&&(b.writeFieldBegin({fname:"addParticipantsRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:13}),J(a.addParticipantsRequest,b),b.writeFieldEnd()),a.subscriptionRequest!=null&&(b.writeFieldBegin({fname:"subscriptionRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14}),G(a.subscriptionRequest,b),b.writeFieldEnd()),a.clientMediaUpdateRequest!=null&&(b.writeFieldBegin({fname:"clientMediaUpdateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:15}),u(a.clientMediaUpdateRequest,b),b.writeFieldEnd()),a.clientMediaUpdateResponse!=null&&(b.writeFieldBegin({fname:"clientMediaUpdateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16}),v(a.clientMediaUpdateResponse,b),b.writeFieldEnd()),a.dataMessageRequest!=null&&(b.writeFieldBegin({fname:"dataMessageRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:17}),H(a.dataMessageRequest,b),b.writeFieldEnd()),a.removeParticipantsRequest!=null&&(b.writeFieldBegin({fname:"removeParticipantsRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:18}),U(a.removeParticipantsRequest,b),b.writeFieldEnd()),a.dataMessageResponse!=null&&(b.writeFieldBegin({fname:"dataMessageResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:19}),I(a.dataMessageResponse,b),b.writeFieldEnd()),a.updateRequest!=null&&(b.writeFieldBegin({fname:"updateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:30}),X(a.updateRequest,b),b.writeFieldEnd()),a.updateResponse!=null&&(b.writeFieldBegin({fname:"updateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:31}),cb(a.updateResponse,b),b.writeFieldEnd()),a.notifyRequest!=null&&(b.writeFieldBegin({fname:"notifyRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:32}),db(a.notifyRequest,b),b.writeFieldEnd()),a.notifyResponse!=null&&(b.writeFieldBegin({fname:"notifyResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:33}),eb(a.notifyResponse,b),b.writeFieldEnd()),a.connectRequest!=null&&(b.writeFieldBegin({fname:"connectRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:34}),N(a.connectRequest,b),b.writeFieldEnd()),a.connectResponse!=null&&(b.writeFieldBegin({fname:"connectResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:35}),O(a.connectResponse,b),b.writeFieldEnd()),a.clientEventRequest!=null&&(b.writeFieldBegin({fname:"clientEventRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:36}),Q(a.clientEventRequest,b),b.writeFieldEnd()),a.clientEventResponse!=null&&(b.writeFieldBegin({fname:"clientEventResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:37}),R(a.clientEventResponse,b),b.writeFieldEnd()),a.unsubscribeRequest!=null&&(b.writeFieldBegin({fname:"unsubscribeRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:40}),V(a.unsubscribeRequest,b),b.writeFieldEnd()),a.unsubscribeResponse!=null&&(b.writeFieldBegin({fname:"unsubscribeResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:41}),W(a.unsubscribeResponse,b),b.writeFieldEnd()),a.approvalRequest!=null&&(b.writeFieldBegin({fname:"approvalRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:42}),fb(a.approvalRequest,b),b.writeFieldEnd()),a.transferRequest!=null&&(b.writeFieldBegin({fname:"transferRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:43}),y(a.transferRequest,b),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function kb(a,b){b.writeStructBegin("RtcMultiwayMessage");b.writeFieldBegin({fname:"messageHeader",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.messageHeader!=null)ib(a.messageHeader,b);else{var d=m();ib(d,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"messageBody",ftype:h.STRUCT,fid:2});if(a.messageBody!=null)jb(a.messageBody,b);else{d=n();jb(d,b)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function Y(a,b){b.writeStructBegin("GroupOfUsers");b.writeFieldBegin({fname:"users",ftype:(h||(h=c("ThriftTypes"))).SET,fid:1});if(a.users!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.users.size});for(var d of a.users)b.writeString(d);b.writeSetEnd()}else{d=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:d.size});for(d of d)b.writeString(d);b.writeSetEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"allowMultipleJoins",ftype:h.BOOL,fid:2});if(a.allowMultipleJoins!=null)b.writeBool(a.allowMultipleJoins);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"dismissOthersOnFirstJoin",ftype:h.BOOL,fid:3});if(a.dismissOthersOnFirstJoin!=null)b.writeBool(a.dismissOthersOnFirstJoin);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"aliasId",ftype:h.STRING,fid:4});if(a.aliasId!=null)b.writeString(a.aliasId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function lb(a,b){b.writeStructBegin("RtcMessageBodyVariant");if(a.joinRequest!=null){b.writeFieldBegin({fname:"joinRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});L(a.joinRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.joinResponse!=null){b.writeFieldBegin({fname:"joinResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2});M(a.joinResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.serverMediaUpdateRequest!=null){b.writeFieldBegin({fname:"serverMediaUpdateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3});w(a.serverMediaUpdateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.serverMediaUpdateResponse!=null){b.writeFieldBegin({fname:"serverMediaUpdateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4});x(a.serverMediaUpdateResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.hangupRequest!=null){b.writeFieldBegin({fname:"hangupRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5});z(a.hangupRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.iceCandidateRequest!=null){b.writeFieldBegin({fname:"iceCandidateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6});A(a.iceCandidateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.ringRequest!=null){b.writeFieldBegin({fname:"ringRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:8});S(a.ringRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.ringResponse!=null){b.writeFieldBegin({fname:"ringResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:9});T(a.ringResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.dismissRequest!=null){b.writeFieldBegin({fname:"dismissRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:10});B(a.dismissRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.conferenceStateRequest!=null){b.writeFieldBegin({fname:"conferenceStateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:11});E(a.conferenceStateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.conferenceStateResponse!=null){b.writeFieldBegin({fname:"conferenceStateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:12});F(a.conferenceStateResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.addParticipantsRequest!=null){b.writeFieldBegin({fname:"addParticipantsRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:13});J(a.addParticipantsRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.subscriptionRequest!=null){b.writeFieldBegin({fname:"subscriptionRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14});G(a.subscriptionRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.clientMediaUpdateRequest!=null){b.writeFieldBegin({fname:"clientMediaUpdateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:15});u(a.clientMediaUpdateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.clientMediaUpdateResponse!=null){b.writeFieldBegin({fname:"clientMediaUpdateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16});v(a.clientMediaUpdateResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.dataMessageRequest!=null){b.writeFieldBegin({fname:"dataMessageRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:17});H(a.dataMessageRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.removeParticipantsRequest!=null){b.writeFieldBegin({fname:"removeParticipantsRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:18});U(a.removeParticipantsRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.dataMessageResponse!=null){b.writeFieldBegin({fname:"dataMessageResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:19});I(a.dataMessageResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.updateRequest!=null){b.writeFieldBegin({fname:"updateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:30});X(a.updateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.updateResponse!=null){b.writeFieldBegin({fname:"updateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:31});cb(a.updateResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.notifyRequest!=null){b.writeFieldBegin({fname:"notifyRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:32});db(a.notifyRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.notifyResponse!=null){b.writeFieldBegin({fname:"notifyResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:33});eb(a.notifyResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.connectRequest!=null){b.writeFieldBegin({fname:"connectRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:34});N(a.connectRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.connectResponse!=null){b.writeFieldBegin({fname:"connectResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:35});O(a.connectResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.clientEventRequest!=null){b.writeFieldBegin({fname:"clientEventRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:36});Q(a.clientEventRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.clientEventResponse!=null){b.writeFieldBegin({fname:"clientEventResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:37});R(a.clientEventResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.unsubscribeRequest!=null){b.writeFieldBegin({fname:"unsubscribeRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:40});V(a.unsubscribeRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.unsubscribeResponse!=null){b.writeFieldBegin({fname:"unsubscribeResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:41});W(a.unsubscribeResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.approvalRequest!=null){b.writeFieldBegin({fname:"approvalRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:42});fb(a.approvalRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.transferRequest!=null){b.writeFieldBegin({fname:"transferRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:43});y(a.transferRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}b.writeFieldStop();b.writeStructEnd()}function mb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.message=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.responseStatusCode=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.responseSubCode=d("MultiwayCommonTypes").RtcResponseSubCode.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.apiStatusCode=d("MultiwayCommonTypes").RtcApiStatusCode.cast(a.readI32()):a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.rtcLogSeverity=d("MultiwayCommonTypes").RtcLogSeverity.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.message===void 0&&(b.message="");b.responseStatusCode===void 0&&(b.responseStatusCode=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(0));b.responseSubCode===void 0&&(b.responseSubCode=d("MultiwayCommonTypes").RtcResponseSubCode.cast(0));b.apiStatusCode===void 0&&(b.apiStatusCode=d("MultiwayCommonTypes").RtcApiStatusCode.cast(0));b.rtcLogSeverity===void 0&&(b.rtcLogSeverity=d("MultiwayCommonTypes").RtcLogSeverity.cast(0));return b}function Z(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpString=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.sdpThrift=d("WebrtcSdpSerializers").deserializeSdp(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I64?b.sdpCompressionVersion=a.readI64().toString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpCompressedData=a.readBinary():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function nb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.media={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readI32(),i=ob(a);b.media[g]=i}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.media===void 0&&(b.media={});return b}function ob(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.body=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.msid=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.mid=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.body===void 0&&(b.body="");b.msid===void 0&&(b.msid="");b.mid===void 0&&(b.mid="");return b}function pb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.sourceKey=a.readString():a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).LIST){b.media=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("MultiwaySharedSerializers").deserializeMedia(a);b.media.push(i)}}else a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).LIST){b.ssrcGroups=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=d("MultiwaySharedSerializers").deserializeSsrcGroup(a);b.ssrcGroups.push(e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.sourceKey===void 0&&(b.sourceKey="");b.media===void 0&&(b.media=[]);b.ssrcGroups===void 0&&(b.ssrcGroups=[]);return b}function qb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.mediaStatus={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=a.readBool();b.mediaStatus[i]=j}}else a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatusEx=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.mediaStatus===void 0&&(b.mediaStatus={});return b}function rb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.candidateSdpString=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I64?b.sdpMLineIndex=a.readI64().toString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpMid=a.readString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRUCT?b.candidateSdpThrift=d("WebrtcSdpSerializers").deserializeIceCandidateSdp(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.sdpMLineIndex===void 0&&(b.sdpMLineIndex="0");b.sdpMid===void 0&&(b.sdpMid="");return b}function $(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStore={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=d("StateSyncSerializers").deserializeState(a);b.stateStore[i]=j}}else a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStoreV2={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32());e=d("StateSyncSerializers").deserializeState(a);g!=null&&(b.stateStoreV2[g]=e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.stateStore===void 0&&(b.stateStore={});b.stateStoreV2===void 0&&(b.stateStoreV2={});return b}function sb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.version===void 0&&(b.version=0);return b}function tb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.encryptedTopic=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.encryptedData=a.readBinary():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.senderId=a.readBinary():a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).SET){b.targetIds=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=d("Utf8ToString").Utf8ToString(a.readBinary());b.targetIds.add(i)}}else a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.messageType=d("MultiwayCommonTypes").E2eeDataMessageType.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.encryptedTopic===void 0&&(b.encryptedTopic="");b.encryptedData===void 0&&(b.encryptedData=Uint8Array.of());b.senderId===void 0&&(b.senderId=Uint8Array.of());b.messageType===void 0&&(b.messageType=d("MultiwayCommonTypes").E2eeDataMessageType.cast(0));return b}function ub(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.fromVersion=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.toVersion=a.readI64().toString():a.skip(e);break;case 3:if(e===(h||(h=c("ThriftTypes"))).LIST){b.mediaUpdates=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=qb(a);b.mediaUpdates.push(g)}}else a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRUCT?b.offer=Z(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.fromVersion===void 0&&(b.fromVersion="0");b.toVersion===void 0&&(b.toVersion="0");b.mediaUpdates===void 0&&(b.mediaUpdates=[]);return b}function vb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.currentVersion=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatus=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRUCT?b.renegotiationOffer=Z(a):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 7:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStore={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=d("StateSyncSerializers").deserializeState(a);b.stateStore[i]=j}}else a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStoreV2={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32());e=d("StateSyncSerializers").deserializeState(a);g!=null&&(b.stateStoreV2[g]=e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.currentVersion===void 0&&(b.currentVersion="0");b.mediaPath===void 0&&(b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(0));return b}function wb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.callerUserId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.calleeUserId=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.sessionId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.callerUserId===void 0&&(b.callerUserId="");b.calleeUserId===void 0&&(b.calleeUserId="");b.sessionId===void 0&&(b.sessionId="");return b}function xb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.fromVersion=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I64?b.toVersion=a.readI64().toString():a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).LIST){b.mediaUpdates=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=pb(a);b.mediaUpdates.push(i)}}else a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRUCT?b.offer=Z(a):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatus=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).BOOL?b.renegotiationRequested=a.readBool():a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).STRUCT?b.prAnswer=Z(a):a.skip(f);break;case 10:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStore={};i=a.readMapBegin();for(g=0;g<i.size;g++){e=a.readString();var j=d("StateSyncSerializers").deserializeState(a);b.stateStore[e]=j}}else a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).STRUCT?b.multipleRelaysParameters=wb(a):a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).BOOL?b.multipleVideoStreamsAllowed=a.readBool():a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).STRUCT?b.renegotiationOffer=Z(a):a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).I32?b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 16:f===(h||(h=c("ThriftTypes"))).STRUCT?b.update=nb(a):a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).BOOL?b.screenShareStreamAllowed=a.readBool():a.skip(f);break;case 18:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStoreV2={};e=a.readMapBegin();for(j=0;j<e.size;j++){g=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32());i=d("StateSyncSerializers").deserializeState(a);g!=null&&(b.stateStoreV2[g]=i)}}else a.skip(f);break;case 19:if(f===(h||(h=c("ThriftTypes"))).SET){b.allowedCustomVideoContentTypes=new Set();g=a.readSetBegin();for(i=0;i<g.size;i++){j=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32());b.allowedCustomVideoContentTypes.add(j)}}else a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).STRUCT?b.relayInfo=d("MultiwaySharedSerializers").deserializeRelayInfo(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.fromVersion===void 0&&(b.fromVersion="0");b.toVersion===void 0&&(b.toVersion="0");b.mediaUpdates===void 0&&(b.mediaUpdates=[]);b.renegotiationRequested===void 0&&(b.renegotiationRequested=!1);b.multipleVideoStreamsAllowed===void 0&&(b.multipleVideoStreamsAllowed=!1);b.mediaPath===void 0&&(b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(0));b.screenShareStreamAllowed===void 0&&(b.screenShareStreamAllowed=!1);return b}function yb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.currentVersion=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatus=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.currentVersion===void 0&&(b.currentVersion="0");return b}function zb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Ab(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.reason=d("MultiwayCommonTypes").HangupReason.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.detailedReasonString=a.readString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.reason===void 0&&(b.reason=d("MultiwayCommonTypes").HangupReason.cast(0));b.detailedReasonString===void 0&&(b.detailedReasonString="");return b}function Bb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).LIST){b.iceCandidateSdps=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=rb(a);b.iceCandidateSdps.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.iceCandidateSdps===void 0&&(b.iceCandidateSdps=[]);return b}function Cb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.reason=d("MultiwayCommonTypes").DismissReason.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.detailedReasonString=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I64?b.callabilityResultErrorCode=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.reason===void 0&&(b.reason=d("MultiwayCommonTypes").DismissReason.cast(0));b.detailedReasonString===void 0&&(b.detailedReasonString="");return b}function Db(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.joinMode=d("MultiwayCommonTypes").JoinMode.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.joinMode===void 0&&(b.joinMode=d("MultiwayCommonTypes").JoinMode.cast(0));return b}function Eb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.state=d("MultiwayCommonTypes").ParticipantCallState.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.userCapabilities=a.readBinary():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I64?b.sctpNodeId=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.state===void 0&&(b.state=d("MultiwayCommonTypes").ParticipantCallState.cast(0));return b}function Fb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userCountry=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Gb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.name=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.profilePictureUri=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.aliasId=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.thirdPartyId=a.readString():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRING?b.groupId=a.readString():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).STRING?b.avatarImageUri=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Hb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.callerInfo=Gb(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.liveBroadcastId=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.callingTags=a.readI32():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.backingIdentifier=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Ib(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.version=a.readI64().toString():a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).MAP){b.participantStates={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=Eb(a);b.participantStates[i]=j}}else a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).MAP){b.userProfiles={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=a.readString();e=Gb(a);b.userProfiles[g]=e}}else a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];g=a.readListBegin();for(e=0;e<g.size;e++){j=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(j)}}else a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).LIST){b.groupsOfUsers=[];i=a.readListBegin();for(j=0;j<i.size;j++){e=lc(a);b.groupsOfUsers.push(e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.version===void 0&&(b.version="0");b.participantStates===void 0&&(b.participantStates={});b.groupsOfUsers===void 0&&(b.groupsOfUsers=[]);return b}function Jb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.currentVersion=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.currentVersion===void 0&&(b.currentVersion="0");return b}function Kb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).LIST){b.subscriptions=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("MultiwaySharedSerializers").deserializeSubscription(a);b.subscriptions.push(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.subscriptions===void 0&&(b.subscriptions=[]);return b}function Lb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.message=d("DataMessageSerializers").deserializeDataMessage(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.message===void 0&&(b.message=d("DataMessageSerializers").DataMessage$DefaultConstructor());return b}function Mb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.deliveryResult={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=d("DataMessageTypes").DataMessageStatusCode.cast(a.readI32());b.deliveryResult[i]=j}}else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).MAP){b.serviceTypeDeliveryResult={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=d("MultiwaySharedTypes").EndpointServiceType.cast(a.readI32());e=d("DataMessageTypes").DataMessageStatusCode.cast(a.readI32());g!=null&&(b.serviceTypeDeliveryResult[g]=e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.deliveryResult===void 0&&(b.deliveryResult={});return b}function Nb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).SET){b.usersToInvite=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.usersToInvite.add(i)}}else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.usersToInvite===void 0&&(b.usersToInvite=new Set());return b}function Ob(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.smcTier=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.region=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).BOOL?b.isUsfu=a.readBool():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).BOOL?b.isEdge=a.readBool():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.smcTier===void 0&&(b.smcTier="");b.region===void 0&&(b.region="");b.isUsfu===void 0&&(b.isUsfu=!1);b.isEdge===void 0&&(b.isEdge=!1);return b}function Pb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.offer=Z(a):a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).SET){b.deviceCapabilities=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var j=d("MultiwayCommonTypes").Capability.cast(a.readI32());b.deviceCapabilities.add(j)}}else a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).SET){b.usersToCall=new Set();j=a.readSetBegin();for(g=0;g<j.size;g++){e=a.readString();b.usersToCall.add(e)}}else a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).MAP){b.mediaStatus={};e=a.readMapBegin();for(g=0;g<e.size;g++){j=a.readString();var k=a.readBool();b.mediaStatus[j]=k}}else a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.userCapabilities=a.readBinary():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRING?b.supportedExperiments=a.readString():a.skip(f);break;case 9:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];j=a.readListBegin();for(k=0;k<j.size;k++){g=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(g)}}else a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRING?b.userToEscalate=a.readString():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).I64?b.escalatingCallId=a.readI64().toString():a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).I32?b.conferenceType=d("MultiwaySharedTypes").ConferenceType.cast(a.readI32()):a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatusEx=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).STRUCT?b.syncPayload=$(a):a.skip(f);break;case 16:if(f===(h||(h=c("ThriftTypes"))).SET){b.usersToApproveFromWaitingRoom=new Set();e=a.readSetBegin();for(g=0;g<e.size;g++){k=a.readString();b.usersToApproveFromWaitingRoom.add(k)}}else a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).STRUCT?b.e2eeEnforcement=d("MultiwaySharedSerializers").deserializeE2eeEnforcement(a):a.skip(f);break;case 18:f===(h||(h=c("ThriftTypes"))).STRUCT?b.sfuAllocation=Ob(a):a.skip(f);break;case 19:f===(h||(h=c("ThriftTypes"))).I32?b.clientMediaMode=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).STRUCT?b.endpointSettings=Db(a):a.skip(f);break;case 21:f===(h||(h=c("ThriftTypes"))).STRUCT?b.backupSfuAllocation=Ob(a):a.skip(f);break;case 22:if(f===(h||(h=c("ThriftTypes"))).SET){b.supportedCustomVideoContentTypes=new Set();j=a.readSetBegin();for(k=0;k<j.size;k++){g=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32());b.supportedCustomVideoContentTypes.add(g)}}else a.skip(f);break;case 23:f===(h||(h=c("ThriftTypes"))).I32?b.configIntegrityOpaqueToken=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.offer===void 0&&(b.offer=i());b.deviceCapabilities===void 0&&(b.deviceCapabilities=new Set());return b}function Qb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).MAP){b.mediaStatus={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var j=a.readString(),k=a.readBool();b.mediaStatus[j]=k}}else a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.initiator=a.readString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.negotiatedExperiments=a.readString():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatusEx=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 7:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];j=a.readListBegin();for(k=0;k<j.size;k++){g=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(g)}}else a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStore={};e=a.readMapBegin();for(g=0;g<e.size;g++){k=a.readString();j=d("StateSyncSerializers").deserializeState(a);b.stateStore[k]=j}}else a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).BOOL?b.isPendingApproval=a.readBool():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).STRUCT?b.renegotiationOffer=Z(a):a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).BOOL?b.multipleVideoStreamsAllowed=a.readBool():a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).I32?b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 14:if(f===(h||(h=c("ThriftTypes"))).LIST){b.groupsOfUsers=[];k=a.readListBegin();for(j=0;j<k.size;j++){g=lc(a);b.groupsOfUsers.push(g)}}else a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).BOOL?b.screenShareStreamAllowed=a.readBool():a.skip(f);break;case 16:f===(h||(h=c("ThriftTypes"))).STRUCT?b.relayInfo=d("MultiwaySharedSerializers").deserializeRelayInfo(a):a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).I64?b.selfSctpNodeId=a.readI64().toString():a.skip(f);break;case 18:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStoreV2={};e=a.readMapBegin();for(g=0;g<e.size;g++){j=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32());k=d("StateSyncSerializers").deserializeState(a);j!=null&&(b.stateStoreV2[j]=k)}}else a.skip(f);break;case 19:if(f===(h||(h=c("ThriftTypes"))).SET){b.allowedCustomVideoContentTypes=new Set();j=a.readSetBegin();for(k=0;k<j.size;k++){g=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32());b.allowedCustomVideoContentTypes.add(g)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.answer===void 0&&(b.answer=i());b.mediaStatus===void 0&&(b.mediaStatus={});b.initiator===void 0&&(b.initiator="");b.isPendingApproval===void 0&&(b.isPendingApproval=!1);b.multipleVideoStreamsAllowed===void 0&&(b.multipleVideoStreamsAllowed=!1);b.mediaPath===void 0&&(b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(0));b.groupsOfUsers===void 0&&(b.groupsOfUsers=[]);b.screenShareStreamAllowed===void 0&&(b.screenShareStreamAllowed=!1);return b}function Rb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.sdp=Z(a):a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).SET){b.deviceCapabilities=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=d("MultiwayCommonTypes").Capability.cast(a.readI32());b.deviceCapabilities.add(i)}}else a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).SET){b.supportedCustomVideoContentTypes=new Set();i=a.readSetBegin();for(g=0;g<i.size;g++){e=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32());b.supportedCustomVideoContentTypes.add(e)}}else a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRUCT?b.prOffer=Z(a):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRUCT?b.e2eeEnforcement=d("MultiwaySharedSerializers").deserializeE2eeEnforcement(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.deviceCapabilities===void 0&&(b.deviceCapabilities=new Set());return b}function Sb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.sdp=Z(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Tb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.type=d("MultiwayCommonTypes").ClientEventType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I64?b.time=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.type===void 0&&(b.type=d("MultiwayCommonTypes").ClientEventType.cast(0));return b}function Ub(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).LIST){b.clientEvents=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=Tb(a);b.clientEvents.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.clientEvents===void 0&&(b.clientEvents=[]);return b}function Vb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.groupThreadId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.peerId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Wb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Xb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.caller=a.readString():a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).SET){b.otherParticipants=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.otherParticipants.add(i)}}else a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.ringType=d("MultiwayCommonTypes").RingType.cast(a.readI32()):a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.offeredExperiments=a.readString():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).BOOL?b.isScheduledCall=a.readBool():a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(e)}}else a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRUCT?b.offer=Z(a):a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatusEx=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).BOOL?b.isPreconnectSupported=a.readBool():a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).STRUCT?b.unifiedOffer=Z(a):a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).I32?b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 16:f===(h||(h=c("ThriftTypes"))).STRUCT?b.e2eeEnforcement=d("MultiwaySharedSerializers").deserializeE2eeEnforcement(a):a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).BOOL?b.isLegacyCall=a.readBool():a.skip(f);break;case 18:f===(h||(h=c("ThriftTypes"))).BOOL?b.isTransferCall=a.readBool():a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).STRUCT?b.relayInfo=d("MultiwaySharedSerializers").deserializeRelayInfo(a):a.skip(f);break;case 21:if(f===(h||(h=c("ThriftTypes"))).MAP){b.overlayConfigs={};e=a.readMapBegin();for(g=0;g<e.size;g++){i=a.readI32();var j=a.readI32();b.overlayConfigs[i]=j}}else a.skip(f);break;case 22:f===(h||(h=c("ThriftTypes"))).STRUCT?b.productMetadata=Hb(a):a.skip(f);break;case 23:f===(h||(h=c("ThriftTypes"))).STRING?b.callerClientSessionId=a.readString():a.skip(f);break;case 24:f===(h||(h=c("ThriftTypes"))).STRUCT?b.threadIdInfo=Vb(a):a.skip(f);break;case 25:f===(h||(h=c("ThriftTypes"))).STRING?b.linkUrl=a.readString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.caller===void 0&&(b.caller="");b.otherParticipants===void 0&&(b.otherParticipants=new Set());b.ringType===void 0&&(b.ringType=d("MultiwayCommonTypes").RingType.cast(0));b.mediaPath===void 0&&(b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(0));b.isTransferCall===void 0&&(b.isTransferCall=!1);return b}function Yb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 2:f===(h||(h=c("ThriftTypes"))).I32?b.deviceStatus=d("MultiwayCommonTypes").DeviceStatus.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.deviceStatus===void 0&&(b.deviceStatus=d("MultiwayCommonTypes").DeviceStatus.cast(0));return b}function Zb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).SET){b.usersToRemove=new Set();d=a.readSetBegin();for(var f=0;f<d.size;f++){var g=a.readString();b.usersToRemove.add(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.usersToRemove===void 0&&(b.usersToRemove=new Set());return b}function $b(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);b.topicId===void 0&&(b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(0));return b}function ac(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);return b}function bc(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.syncPayload=$(a):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.data=a.readBinary():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.syncPayload===void 0&&(b.syncPayload=l());b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);b.topicId===void 0&&(b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(0));return b}function cc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);return b}function dc(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.data=a.readBinary():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRUCT?b.syncPayload=$(a):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);b.data===void 0&&(b.data=Uint8Array.of());return b}function ec(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);return b}function fc(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 2:f===(h||(h=c("ThriftTypes"))).I32?b.approvalStatus=d("MultiwayCommonTypes").ApprovalStatus.cast(a.readI32()):a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).SET){b.targetUsers=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.targetUsers.add(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.approvalStatus===void 0&&(b.approvalStatus=d("MultiwayCommonTypes").ApprovalStatus.cast(0));b.targetUsers===void 0&&(b.targetUsers=new Set());return b}function gc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.id=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.id===void 0&&(b.id="");return b}function hc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.actorId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.baseId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.actorId===void 0&&(b.actorId="");b.baseId===void 0&&(b.baseId="");return b}function ic(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.type=d("MultiwayCommonTypes").MessageType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.conferenceName=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.transactionId=a.readString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I16?b.retryCount=a.readI16():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.serverInfoData=a.readString():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.responseStatusCode=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(a.readI32()):a.skip(f);break;case 7:if(f===(h||(h=c("ThriftTypes"))).MAP){b.extensions={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=a.readString();b.extensions[i]=j}}else a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).I64?b.sequenceNumber=a.readI64().toString():a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).STRING?b.clientSessionId=a.readString():a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRING?b.responseStatusMessage=a.readString():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).I32?b.responseSubCode=d("MultiwayCommonTypes").RtcResponseSubCode.cast(a.readI32()):a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).STRING?b.collisionKey=a.readString():a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).I32?b.conferenceType=d("MultiwaySharedTypes").ConferenceType.cast(a.readI32()):a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).STRING?b.serverSessionId=a.readString():a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).STRING?b.rtcHandle=a.readString():a.skip(f);break;case 16:f===(h||(h=c("ThriftTypes"))).I32?b.retryAfterMsec=a.readI32():a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).STRING?b.receiverUserId=a.readString():a.skip(f);break;case 18:f===(h||(h=c("ThriftTypes"))).I32?b.clientStack=d("WebrtcSignalingCommonTypes").ClientStack.cast(a.readI32()):a.skip(f);break;case 19:f===(h||(h=c("ThriftTypes"))).I64?b.serverMsgTime=a.readI64().toString():a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).STRUCT?b.sender=gc(a):a.skip(f);break;case 21:f===(h||(h=c("ThriftTypes"))).STRUCT?b.receiver=hc(a):a.skip(f);break;case 22:if(f===(h||(h=c("ThriftTypes"))).SET){b.messageTags=new Set();i=a.readSetBegin();for(j=0;j<i.size;j++){g=d("MultiwayCommonTypes").MessageTag.cast(a.readI32());b.messageTags.add(g)}}else a.skip(f);break;case 23:f===(h||(h=c("ThriftTypes"))).I64?b.conferenceId=a.readI64().toString():a.skip(f);break;case 24:f===(h||(h=c("ThriftTypes"))).I32?b.protocolVersion=a.readI32():a.skip(f);break;case 25:f===(h||(h=c("ThriftTypes"))).I64?b.bodyCompressionVersion=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.type===void 0&&(b.type=d("MultiwayCommonTypes").MessageType.cast(0));b.conferenceName===void 0&&(b.conferenceName="");b.transactionId===void 0&&(b.transactionId="");b.retryCount===void 0&&(b.retryCount=0);return b}function jc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.joinRequest=Pb(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRUCT?b.joinResponse=Qb(a):a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRUCT?b.serverMediaUpdateRequest=xb(a):a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRUCT?b.serverMediaUpdateResponse=yb(a):a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRUCT?b.hangupRequest=Ab(a):a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).STRUCT?b.iceCandidateRequest=Bb(a):a.skip(e);break;case 8:e===(h||(h=c("ThriftTypes"))).STRUCT?b.ringRequest=Xb(a):a.skip(e);break;case 9:e===(h||(h=c("ThriftTypes"))).STRUCT?b.ringResponse=Yb(a):a.skip(e);break;case 10:e===(h||(h=c("ThriftTypes"))).STRUCT?b.dismissRequest=Cb(a):a.skip(e);break;case 11:e===(h||(h=c("ThriftTypes"))).STRUCT?b.conferenceStateRequest=Ib(a):a.skip(e);break;case 12:e===(h||(h=c("ThriftTypes"))).STRUCT?b.conferenceStateResponse=Jb(a):a.skip(e);break;case 13:e===(h||(h=c("ThriftTypes"))).STRUCT?b.addParticipantsRequest=Nb(a):a.skip(e);break;case 14:e===(h||(h=c("ThriftTypes"))).STRUCT?b.subscriptionRequest=Kb(a):a.skip(e);break;case 15:e===(h||(h=c("ThriftTypes"))).STRUCT?b.clientMediaUpdateRequest=ub(a):a.skip(e);break;case 16:e===(h||(h=c("ThriftTypes"))).STRUCT?b.clientMediaUpdateResponse=vb(a):a.skip(e);break;case 17:e===(h||(h=c("ThriftTypes"))).STRUCT?b.dataMessageRequest=Lb(a):a.skip(e);break;case 18:e===(h||(h=c("ThriftTypes"))).STRUCT?b.removeParticipantsRequest=Zb(a):a.skip(e);break;case 19:e===(h||(h=c("ThriftTypes"))).STRUCT?b.dataMessageResponse=Mb(a):a.skip(e);break;case 30:e===(h||(h=c("ThriftTypes"))).STRUCT?b.updateRequest=bc(a):a.skip(e);break;case 31:e===(h||(h=c("ThriftTypes"))).STRUCT?b.updateResponse=cc(a):a.skip(e);break;case 32:e===(h||(h=c("ThriftTypes"))).STRUCT?b.notifyRequest=dc(a):a.skip(e);break;case 33:e===(h||(h=c("ThriftTypes"))).STRUCT?b.notifyResponse=ec(a):a.skip(e);break;case 34:e===(h||(h=c("ThriftTypes"))).STRUCT?b.connectRequest=Rb(a):a.skip(e);break;case 35:e===(h||(h=c("ThriftTypes"))).STRUCT?b.connectResponse=Sb(a):a.skip(e);break;case 36:e===(h||(h=c("ThriftTypes"))).STRUCT?b.clientEventRequest=Ub(a):a.skip(e);break;case 37:e===(h||(h=c("ThriftTypes"))).STRUCT?b.clientEventResponse=Wb(a):a.skip(e);break;case 40:e===(h||(h=c("ThriftTypes"))).STRUCT?b.unsubscribeRequest=$b(a):a.skip(e);break;case 41:e===(h||(h=c("ThriftTypes"))).STRUCT?b.unsubscribeResponse=ac(a):a.skip(e);break;case 42:e===(h||(h=c("ThriftTypes"))).STRUCT?b.approvalRequest=fc(a):a.skip(e);break;case 43:e===(h||(h=c("ThriftTypes"))).STRUCT?b.transferRequest=zb(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function kc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.messageHeader=ic(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRUCT?b.messageBody=jc(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.messageHeader===void 0&&(b.messageHeader=m());b.messageBody===void 0&&(b.messageBody=n());return b}function lc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).SET){b.users=new Set();d=a.readSetBegin();for(var f=0;f<d.size;f++){var g=a.readString();b.users.add(g)}}else a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).BOOL?b.allowMultipleJoins=a.readBool():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).BOOL?b.dismissOthersOnFirstJoin=a.readBool():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.aliasId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.users===void 0&&(b.users=new Set());b.allowMultipleJoins===void 0&&(b.allowMultipleJoins=!1);b.dismissOthersOnFirstJoin===void 0&&(b.dismissOthersOnFirstJoin=!1);b.aliasId===void 0&&(b.aliasId="");return b}function mc(a){var b,d={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.joinRequest=Pb(a),b="joinRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: joinRequest, previous deserialized field: "+b);else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.joinResponse=Qb(a),b="joinResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: joinResponse, previous deserialized field: "+b);else a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.serverMediaUpdateRequest=xb(a),b="serverMediaUpdateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: serverMediaUpdateRequest, previous deserialized field: "+b);else a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.serverMediaUpdateResponse=yb(a),b="serverMediaUpdateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: serverMediaUpdateResponse, previous deserialized field: "+b);else a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.hangupRequest=Ab(a),b="hangupRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: hangupRequest, previous deserialized field: "+b);else a.skip(f);break;case 6:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.iceCandidateRequest=Bb(a),b="iceCandidateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: iceCandidateRequest, previous deserialized field: "+b);else a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.ringRequest=Xb(a),b="ringRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: ringRequest, previous deserialized field: "+b);else a.skip(f);break;case 9:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.ringResponse=Yb(a),b="ringResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: ringResponse, previous deserialized field: "+b);else a.skip(f);break;case 10:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.dismissRequest=Cb(a),b="dismissRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: dismissRequest, previous deserialized field: "+b);else a.skip(f);break;case 11:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.conferenceStateRequest=Ib(a),b="conferenceStateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: conferenceStateRequest, previous deserialized field: "+b);else a.skip(f);break;case 12:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.conferenceStateResponse=Jb(a),b="conferenceStateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: conferenceStateResponse, previous deserialized field: "+b);else a.skip(f);break;case 13:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.addParticipantsRequest=Nb(a),b="addParticipantsRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: addParticipantsRequest, previous deserialized field: "+b);else a.skip(f);break;case 14:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.subscriptionRequest=Kb(a),b="subscriptionRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: subscriptionRequest, previous deserialized field: "+b);else a.skip(f);break;case 15:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.clientMediaUpdateRequest=ub(a),b="clientMediaUpdateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientMediaUpdateRequest, previous deserialized field: "+b);else a.skip(f);break;case 16:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.clientMediaUpdateResponse=vb(a),b="clientMediaUpdateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientMediaUpdateResponse, previous deserialized field: "+b);else a.skip(f);break;case 17:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.dataMessageRequest=Lb(a),b="dataMessageRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: dataMessageRequest, previous deserialized field: "+b);else a.skip(f);break;case 18:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.removeParticipantsRequest=Zb(a),b="removeParticipantsRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: removeParticipantsRequest, previous deserialized field: "+b);else a.skip(f);break;case 19:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.dataMessageResponse=Mb(a),b="dataMessageResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: dataMessageResponse, previous deserialized field: "+b);else a.skip(f);break;case 30:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.updateRequest=bc(a),b="updateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: updateRequest, previous deserialized field: "+b);else a.skip(f);break;case 31:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.updateResponse=cc(a),b="updateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: updateResponse, previous deserialized field: "+b);else a.skip(f);break;case 32:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.notifyRequest=dc(a),b="notifyRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: notifyRequest, previous deserialized field: "+b);else a.skip(f);break;case 33:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.notifyResponse=ec(a),b="notifyResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: notifyResponse, previous deserialized field: "+b);else a.skip(f);break;case 34:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.connectRequest=Rb(a),b="connectRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: connectRequest, previous deserialized field: "+b);else a.skip(f);break;case 35:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.connectResponse=Sb(a),b="connectResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: connectResponse, previous deserialized field: "+b);else a.skip(f);break;case 36:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.clientEventRequest=Ub(a),b="clientEventRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientEventRequest, previous deserialized field: "+b);else a.skip(f);break;case 37:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.clientEventResponse=Wb(a),b="clientEventResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientEventResponse, previous deserialized field: "+b);else a.skip(f);break;case 40:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.unsubscribeRequest=$b(a),b="unsubscribeRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: unsubscribeRequest, previous deserialized field: "+b);else a.skip(f);break;case 41:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.unsubscribeResponse=ac(a),b="unsubscribeResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: unsubscribeResponse, previous deserialized field: "+b);else a.skip(f);break;case 42:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.approvalRequest=fc(a),b="approvalRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: approvalRequest, previous deserialized field: "+b);else a.skip(f);break;case 43:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.transferRequest=zb(a),b="transferRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: transferRequest, previous deserialized field: "+b);else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return d}g.RtcException$DefaultConstructor=a;g.SessionDescription$DefaultConstructor=i;g.SessionDescriptionUpdate$DefaultConstructor=b;g.MediaDescriptionUpdate$DefaultConstructor=e;g.ServerMediaUpdate$DefaultConstructor=f;g.ClientMediaUpdate$DefaultConstructor=j;g.IceCandidate$DefaultConstructor=k;g.SyncPayload$DefaultConstructor=l;g.SyncAck$DefaultConstructor=aa;g.E2eeData$DefaultConstructor=ba;g.ClientMediaUpdateRequest$DefaultConstructor=ca;g.ClientMediaUpdateResponse$DefaultConstructor=da;g.MultipleRelaysAllocationParameters$DefaultConstructor=ea;g.ServerMediaUpdateRequest$DefaultConstructor=fa;g.ServerMediaUpdateResponse$DefaultConstructor=ga;g.TransferRequest$DefaultConstructor=ha;g.HangupRequest$DefaultConstructor=ia;g.IceCandidateRequest$DefaultConstructor=ja;g.DismissRequest$DefaultConstructor=ka;g.EndpointSettings$DefaultConstructor=la;g.ParticipantState$DefaultConstructor=ma;g.ServerOnlyParticipantState$DefaultConstructor=na;g.UserProfile$DefaultConstructor=oa;g.ProductMetadata$DefaultConstructor=pa;g.ConferenceStateRequest$DefaultConstructor=qa;g.ConferenceStateResponse$DefaultConstructor=ra;g.SubscriptionRequest$DefaultConstructor=sa;g.DataMessageRequest$DefaultConstructor=ta;g.DataMessageResponse$DefaultConstructor=ua;g.AddParticipantsRequest$DefaultConstructor=va;g.SfuAllocation$DefaultConstructor=wa;g.JoinRequest$DefaultConstructor=xa;g.JoinResponse$DefaultConstructor=ya;g.ConnectRequest$DefaultConstructor=za;g.ConnectResponse$DefaultConstructor=Aa;g.ClientEvent$DefaultConstructor=Ba;g.ClientEventRequest$DefaultConstructor=Ca;g.ThreadIdInfo$DefaultConstructor=Da;g.ClientEventResponse$DefaultConstructor=Ea;g.RingRequest$DefaultConstructor=Fa;g.RingResponse$DefaultConstructor=Ga;g.RemoveParticipantsRequest$DefaultConstructor=Ha;g.UnsubscribeRequest$DefaultConstructor=Ia;g.UnsubscribeResponse$DefaultConstructor=Ja;g.UpdateRequest$DefaultConstructor=Ka;g.UpdateResponse$DefaultConstructor=La;g.NotifyRequest$DefaultConstructor=Ma;g.NotifyResponse$DefaultConstructor=Na;g.ApprovalRequest$DefaultConstructor=Oa;g.RtcSender$DefaultConstructor=Pa;g.RtcReceiver$DefaultConstructor=Qa;g.RtcMessageHeader$DefaultConstructor=m;g.RtcMessageBody$DefaultConstructor=n;g.RtcMultiwayMessage$DefaultConstructor=Ra;g.GroupOfUsers$DefaultConstructor=Sa;g.RtcMessageBodyVariant$DefaultConstructor=Ta;g.serializeRtcException=Ua;g.serializeSessionDescription=o;g.serializeSessionDescriptionUpdate=Va;g.serializeMediaDescriptionUpdate=p;g.serializeServerMediaUpdate=q;g.serializeClientMediaUpdate=r;g.serializeIceCandidate=s;g.serializeSyncPayload=t;g.serializeSyncAck=Wa;g.serializeE2eeData=Xa;g.serializeClientMediaUpdateRequest=u;g.serializeClientMediaUpdateResponse=v;g.serializeMultipleRelaysAllocationParameters=Ya;g.serializeServerMediaUpdateRequest=w;g.serializeServerMediaUpdateResponse=x;g.serializeTransferRequest=y;g.serializeHangupRequest=z;g.serializeIceCandidateRequest=A;g.serializeDismissRequest=B;g.serializeEndpointSettings=Za;g.serializeParticipantState=C;g.serializeServerOnlyParticipantState=$a;g.serializeUserProfile=D;g.serializeProductMetadata=ab;g.serializeConferenceStateRequest=E;g.serializeConferenceStateResponse=F;g.serializeSubscriptionRequest=G;g.serializeDataMessageRequest=H;g.serializeDataMessageResponse=I;g.serializeAddParticipantsRequest=J;g.serializeSfuAllocation=K;g.serializeJoinRequest=L;g.serializeJoinResponse=M;g.serializeConnectRequest=N;g.serializeConnectResponse=O;g.serializeClientEvent=P;g.serializeClientEventRequest=Q;g.serializeThreadIdInfo=bb;g.serializeClientEventResponse=R;g.serializeRingRequest=S;g.serializeRingResponse=T;g.serializeRemoveParticipantsRequest=U;g.serializeUnsubscribeRequest=V;g.serializeUnsubscribeResponse=W;g.serializeUpdateRequest=X;g.serializeUpdateResponse=cb;g.serializeNotifyRequest=db;g.serializeNotifyResponse=eb;g.serializeApprovalRequest=fb;g.serializeRtcSender=gb;g.serializeRtcReceiver=hb;g.serializeRtcMessageHeader=ib;g.serializeRtcMessageBody=jb;g.serializeRtcMultiwayMessage=kb;g.serializeGroupOfUsers=Y;g.serializeRtcMessageBodyVariant=lb;g.deserializeRtcException=mb;g.deserializeSessionDescription=Z;g.deserializeSessionDescriptionUpdate=nb;g.deserializeMediaDescriptionUpdate=ob;g.deserializeServerMediaUpdate=pb;g.deserializeClientMediaUpdate=qb;g.deserializeIceCandidate=rb;g.deserializeSyncPayload=$;g.deserializeSyncAck=sb;g.deserializeE2eeData=tb;g.deserializeClientMediaUpdateRequest=ub;g.deserializeClientMediaUpdateResponse=vb;g.deserializeMultipleRelaysAllocationParameters=wb;g.deserializeServerMediaUpdateRequest=xb;g.deserializeServerMediaUpdateResponse=yb;g.deserializeTransferRequest=zb;g.deserializeHangupRequest=Ab;g.deserializeIceCandidateRequest=Bb;g.deserializeDismissRequest=Cb;g.deserializeEndpointSettings=Db;g.deserializeParticipantState=Eb;g.deserializeServerOnlyParticipantState=Fb;g.deserializeUserProfile=Gb;g.deserializeProductMetadata=Hb;g.deserializeConferenceStateRequest=Ib;g.deserializeConferenceStateResponse=Jb;g.deserializeSubscriptionRequest=Kb;g.deserializeDataMessageRequest=Lb;g.deserializeDataMessageResponse=Mb;g.deserializeAddParticipantsRequest=Nb;g.deserializeSfuAllocation=Ob;g.deserializeJoinRequest=Pb;g.deserializeJoinResponse=Qb;g.deserializeConnectRequest=Rb;g.deserializeConnectResponse=Sb;g.deserializeClientEvent=Tb;g.deserializeClientEventRequest=Ub;g.deserializeThreadIdInfo=Vb;g.deserializeClientEventResponse=Wb;g.deserializeRingRequest=Xb;g.deserializeRingResponse=Yb;g.deserializeRemoveParticipantsRequest=Zb;g.deserializeUnsubscribeRequest=$b;g.deserializeUnsubscribeResponse=ac;g.deserializeUpdateRequest=bc;g.deserializeUpdateResponse=cc;g.deserializeNotifyRequest=dc;g.deserializeNotifyResponse=ec;g.deserializeApprovalRequest=fc;g.deserializeRtcSender=gc;g.deserializeRtcReceiver=hc;g.deserializeRtcMessageHeader=ic;g.deserializeRtcMessageBody=jc;g.deserializeRtcMultiwayMessage=kc;g.deserializeGroupOfUsers=lc;g.deserializeRtcMessageBodyVariant=mc}),98);
__d("OverlayConfigConstants",[],(function(a,b,c,d,e,f){"use strict";a={OverlayConfigNumParameters:5517,OverlayConfigNotPresentFlagValue:-1};b=a;f["default"]=b}),66);
__d("OverlayConfigLayerSource",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({UNKNOWN:0,DEFAULT:1,MOBILECONFIG:2,APP_CRUCIBLE:3,APP_JNI:4,UNITTEST_CONFIG:5,SERVER:6,PLACEHOLDER:7,LS_MOBILECONFIG:8,APP_LS:9,APP_JS:10,BROWSER:11,APP_OVRRTC:12,APP_IG:13,MLITE4A_LEGACY_QE:14,APP_MLITE4A:15,APP_PORTAL:16,IG_LAUNCHER:17,APP_ARCHON:18,APP_WS:19,APP_NOX:20,APP_WEARABLE_MSNGR:21,APP_WEARABLE_IG:22,APP_ORCA_RSYS:23,APP_WILDE:24,APP_MKIOS:25,APP_MK4A:26,DYNAMIC:27,SDK_DEFAULT:28,APP_FB4A:29,APP_RSYS_SDK_SAMPLE:30,APP_BIZAPP:31,APP_WORKCHAT:32,APP_ARCHON_LOCAL_OVERRIDES:33,APP_CATHODE:34,APP_WR4I:35,APP_WR4A:36,APP_METACAM:37,HORIZON_EMERGENCY:38,APP_SOCIALPLATFORM:39,APP_TWILIGHT:40,APP_AR_CALLING_LOCAL_OVERRIDES:41,APP_TWILIGHT_CASTING:42,TWILIGHT_EMERGENCY:43,METACAM_EMERGENCY:44,CALL_SCOPED:45,APP_CASE50:46,APP_GENERIC:47,HORIZON_EXPERIMENTAL:48});b=a;f["default"]=b}),66);
__d("OverlayConfigServerLayer",["OverlayConfigConstants","OverlayConfigLayerSource"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a}a.createFromHeader=function(b){try{var c;b=b==null||(c=b.extensions)==null?void 0:c.oc1_json;if(b==null)return null;b=JSON.parse(b);b=b==null?void 0:b.values;return b==null?null:new a(b)}catch(a){return null}};var b=a.prototype;b.getLayerSource=function(){return c("OverlayConfigLayerSource").SERVER};b.getValue=function(a){a=this.$1[String(a)];return a!=null?a:c("OverlayConfigConstants").OverlayConfigNotPresentFlagValue};b.logExposure=function(a){};return a}();g["default"]=a}),98);
__d("RequestStreamBodyUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){return g(atob(a))};b=function(a){return btoa(h(a))};c=function(a){a=btoa(a);var b=a.indexOf("=");return b===-1?a:a.substring(0,b)};var g=function(a){a=a;var b=a.length,c=new Uint8Array(b);for(var d=0;d<b;d++)c[d]=a.charCodeAt(d);return c},h=function(a){var b="",c=a.byteLength;for(var d=0;d<c;d++)b+=String.fromCharCode(a[d]);return b};f.base64ToUint8Array=a;f.uint8ArrayToBase64=b;f.stringToBase64WithoutPadding=c;f.stringToUint8Array=g;f.uint8ArrayToString=h}),66);
__d("RpWebInfraActionsLoggerEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744334");b=d("FalcoLoggerInternal").create("rp_web_infra_actions_logger_event",a);e=b;g["default"]=e}),98);
__d("RtcWebUserActionsDebugFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744337");b=d("FalcoLoggerInternal").create("rtc_web_user_actions_debug",a);e=b;g["default"]=e}),98);
__d("RtcWebUserActionsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744338");b=d("FalcoLoggerInternal").create("rtc_web_user_actions",a);e=b;g["default"]=e}),98);
__d("ZenonAuditedCheckpointLogId",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["RP_ROOMS_INFRA_WWW__E2EE","RP_ROOMS_INFRA_WWW__WASM","RP_ROOMS_INFRA_WWW__LOGGER_INFRA","RP_ROOMS_INFRA_WWW__STATE_MACHINE","RP_ROOMS_INFRA_WWW__ERROR","RP_ROOMS_INFRA_WWW__E2EE_DEVICE_VERIFIER","RP_ROOMS_INFRA_WWW__PLATFORM"]);c=a;f["default"]=c}),66);
__d("ZenonBrowsers",["UserAgent","UserAgentData"],(function(a,b,c,d,e,f,g){"use strict";function h(){return c("UserAgent").isBrowser("Chrome")}function i(){return!!navigator.webkitGetUserMedia}function a(){return c("UserAgent").isBrowser("Edge (Chromium Based)")||c("UserAgent").isBrowser("Edge PWA (Chromium Based)")}function j(){return c("UserAgent").isBrowser("Safari")}function k(){return c("UserAgent").isBrowser("Firefox")}function b(){return c("UserAgent").isBrowser("Opera")}function l(){return c("UserAgent").isBrowser("Mobile Safari")}function m(){return c("UserAgent").isBrowser("Oculus Browser")}function n(){return c("UserAgent").isBrowser("Samsung Browser")}function d(){return l()||c("UserAgent").isPlatform("Android")||n()}function e(){return c("UserAgent").isPlatform("Android")||c("UserAgent").isPlatform("iOS")}function o(){if(k()){var a;return(a=c("UserAgentData").browserVersion)!=null?a:0}if(i()){a=navigator.userAgent.match(/Chrom(e|ium)\/(\d+)\./);return a!=null?parseInt(a[2],10):999}return 0}function f(){return c("UserAgent").isBrowser("FBLite")||c("UserAgent").isBrowser("Facebook for Android")}function p(){return k()}function q(){return!m()}function r(){return!m()}function s(){return!l()&&!j()&&!((i()||h())&&o()<80)&&!(k()&&o()<70)}function t(){return(i()||h())&&o()>=77||c("UserAgent").isBrowser("Firefox >= 70")||c("UserAgent").isBrowser("Safari >= 14.1")}function u(){return!(c("UserAgent").isBrowser("Chrome > 105")&&c("UserAgent").isBrowser("Chrome < 115"))}function v(){return c("UserAgent").isBrowser("Chrome >= 89")||c("UserAgent").isBrowser("Opera >= 75")||c("UserAgent").isBrowser("Edge (Chromium Based) >= 89")||c("UserAgent").isBrowser("Edge PWA (Chromium Based) >= 89")}function w(){var a=c("UserAgent").isBrowser("Chrome >= 113")&&c("UserAgent").isBrowser("Chrome < 114"),b=(c("UserAgent").isBrowser("Edge (Chromium Based) >= 113")||c("UserAgent").isBrowser("Edge PWA (Chromium Based) >= 113"))&&(c("UserAgent").isBrowser("Edge (Chromium Based) < 114")||c("UserAgent").isBrowser("Edge PWA (Chromium Based) < 114")),d=c("UserAgent").isBrowser("Safari >= 16")&&c("UserAgent").isBrowser("Safari < 17");return a||b||d}function x(){return!(c("UserAgent").isBrowser("Chrome <= 113")||c("UserAgent").isBrowser("Edge (Chromium Based) <= 113")||c("UserAgent").isBrowser("Edge PWA (Chromium Based) <= 113"))}g.isChrome=h;g.isChromium=i;g.isChromiumBasedEdge=a;g.isDesktopSafari=j;g.isFirefox=k;g.isOpera=b;g.isMobileSafari=l;g.isOculusBrowser=m;g.isSamsung=n;g.isSupportedMobileBrowser=d;g.isMobileDevice=e;g.webrtcVersion=o;g.isFBWebview=f;g.noTransceiverForNegotiations=p;g.supportsMWAVEscalation=q;g.supportsVideoCalls=r;g.supportsRollback=s;g.supportsIceRestart=t;g.supportsPranswer=u;g.isVideoLayersAllocationSupported=v;g.isSctpdataChannelDisabled=w;g.isMidCallSCTPSupported=x}),98);
__d("ZenonCallsModelTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum")).Mirrored(["Disconnected","Precontacting","Contacting","Ringing","PendingApproval","Approved","FailedApproval","Connecting","Connected","Reconnecting","ProvisionalRinging"]);d=a.Mirrored(["Facebook","Instagram","Messenger","Guest","WhatsApp","Workplace"]);e=a.Mirrored(["New","Connecting","PendingApproval","Connected","Terminating","Terminated"]);b=a.Mirrored(["Unknown","CallsBlocked","PageAdminPressedDecline"]);a=a.Mirrored(["None","PendingPeerFeedback","Declined","RemoteDeclined","LocalDeclined","Cancelled","TimedOut","Accepted","InitiatedFromPeer"]);f.ZenonCallParticipantState=c;f.ZenonCallParticipantType=d;f.ZenonCallState=e;f.ZenonEndCallSubreason=b;f.ZenonVideoEscalationStatus=a}),66);
__d("isEmployeeTestUserZenonLogging",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("25162")||c("gkx")("25152")||c("gkx")("25209")}g["default"]=a}),98);
__d("ZenonInfraActionsLogger",["Log","RpWebInfraActionsLoggerEventFalcoEvent","ZenonAuditedCheckpointLogId","formatDate","isEmployeeTestUserZenonLogging","justknobx"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1={callTrigger:void 0,conferenceName:void 0,deviceID:void 0,mediaPath:"sfu",peerID:void 0,serverInfoData:void 0,signalingID:void 0},this.$2=new Set(),this.$3=new Map(),this.$4=new Map()}var b=a.prototype;b.updateCachedValues=function(a){Object.assign(this.$1,a)};b.setE2eeIsMandatedForCall=function(a){this.$3.set(a,!0)};b.logCheckpointEmployeesTestUsersOnly=function(a){if(!c("isEmployeeTestUserZenonLogging")())return;this.logCheckpoint(a)};b.logCheckpoint=function(a){this.logEvent(babelHelpers["extends"]({},a))};b.logCheckpointOnceForDomain=function(a){var b=a.checkpoint;this.$2.has(b)||(this.$2.add(b),this.logCheckpoint(a))};b.logError=function(a){this.logEvent(babelHelpers["extends"]({},a))};b.startTimer=function(a){var b=Date.now();this.$4.set(a,b);this.logEvent({checkpoint:a+"_timerStart"})};b.stopTimer=function(a){var b=this.$4.get(a);this.$4["delete"](a);b=b!=null?Date.now()-b:null;this.logEvent({checkpoint:a+"_timerEnd",eventTimeElapsed:b});return parseInt(b,10)};b.logEvent=function(a){var b;b=(b=this.$3.get((b=this.$1.signalingID)!=null?b:""))!=null?b:!1;if(b&&!c("justknobx")._("1021"))return;if(b&&a.auditId==null){b="Encountered an unaudited log line, dropping it.";a.error!=null?this.logEvent({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__LOGGER_INFRA,error:b}):this.logEvent({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__LOGGER_INFRA,checkpoint:b});return}if(((b=a.checkpoint)==null?void 0:b.length)!=null&&a.checkpoint.length>3e5)return;var d={call_id:(b=a.signalingID)!=null?b:this.$1.signalingID==null?void 0:String(this.$1.signalingID),call_trigger:this.$1.callTrigger,call_type:(b=a.callType)!=null?b:null,checkpoint:a.checkpoint,client_session_id:this.$1.signalingID,client_time:Date.now().toString(),conference_name:(b=a.conferenceName)!=null?b:this.$1.conferenceName,connection:(b=a.connectionState)!=null?b:this.$1.connectionState,device_id:this.$1.deviceID,error:a.error,error_domain:a.errorDomain,event_time_elapsed:(b=a.eventTimeElapsed)==null?void 0:b.toString(),is_caller:(b=a.isCaller)!=null?b:null,media_path:(b=a.mediaPath)!=null?b:this.$1.mediaPath,message_id:a.messageID,peer_connection:(b=a.peerConnectionState)!=null?b:this.$1.peerConnectionState,peer_id:this.$1.peerID,sdp_format:(b=a.sdpFormat)!=null?b:null,server_info_data:(b=a.serverInfoData)!=null?b:this.$1.serverInfoData,signaling:(b=a.signalingState)!=null?b:this.$1.signalingState,state_machine_id:a.stateMachineID};c("RpWebInfraActionsLoggerEventFalcoEvent").log(function(){return d})};return a}();b=new a();g["default"]=b}),98);
__d("ZenonLoggingUtils",["ZenonAppProvider"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("ZenonAppProvider").isHorizonApp()||d("ZenonAppProvider").isHorizonWorldsApp()?!1:!0}g.shouldAllowLogging=a}),98);
__d("ZenonMachineToQPLEvent",["qpl"],(function(a,b,c,d,e,f,g){"use strict";b={ConnectionStateMachine:(a=c("qpl"))._(64243854,"2452"),ParentSignalingClient:a._(64234815,"1094"),PeerConnectionStateMachine:a._(64239068,"6172"),SignalingStateMachine:a._(64245348,"8823")};g["default"]=b}),98);
__d("ZenonODSLogger",["ODS"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(){}var b=a.prototype;b.logCounter=function(a){(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway",a),h.flush()};b.logE2eeCounter=function(a){(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_e2ee",a),h.flush()};return a}();b=new a();g["default"]=b}),98);
__d("ZenonDebugLogger",["ChannelClientID","CurrentUser","FBLogger","IGDWebUtils","Log","LogHistory","ODS","QuickLogActionType","QuickPerformanceLogger","RpWebStateMachineLoggingBlocklist","UserAgentData","WebDriverConfig","ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonLoggingUtils","ZenonMachineToQPLEvent","ZenonODSLogger","formatDate","isEmployeeTestUserZenonLogging"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=null;a=function(){function a(){var a;this.$1=d("LogHistory").getInstance("webrtc");this.$2=d("ChannelClientID").getID();this.$3=JSON.stringify({browser:(a=c("UserAgentData")).browserName,browser_version:a.browserFullVersion,device:a.deviceName,msg_source:"web",os:a.platformName,os_version:a.platformFullVersion,version:2});a=c("CurrentUser").getAppID();a!=null&&d("IGDWebUtils").isInstagramWebSupportedApp(Number(a))?this.$4=parseInt(a,10):this.$4=219994525426954;this.$5=new Set(c("RpWebStateMachineLoggingBlocklist").EVENT_TYPES);this.$6=new Set(c("RpWebStateMachineLoggingBlocklist").STATES)}a.getInstance=function(){j||(j=new a());return j};a.getFBLogger=function(a){var b;a===void 0&&(a={});return c("FBLogger")("rpweb").addMetadata("RT_WEB","CALL_ID",""+((b=a.signalingID)!=null?b:"null")).addMetadata("RT_WEB","PEER_ID",""+((b=a.peerID)!=null?b:"null"))};var b=a.prototype;b.$7=function(a,b,e){b===void 0&&(b=!0);var f=c("formatDate")(new Date(),"[H:i:s:X]",{skipPatternLocalization:!0});c("WebDriverConfig").isJestE2ETestRun&&d("Log").debug(a);this.$1.log("Console",f+" "+a);b&&c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] "+a,messageID:e})};b.$8=function(a,b,d){var e=c("formatDate")(new Date(),"[H:i:s:X]",{skipPatternLocalization:!0});this.$1.log("Console",e+" "+a+". StateMachineID:  "+(b!=null?b:""));e={auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"[ZP] "+a+".",stateMachineID:b};d!=null&&(e.messageID=d);c("ZenonInfraActionsLogger").logCheckpoint(e)};b.$9=function(a,b,e,f){f===void 0&&(f=0);a=c("ZenonMachineToQPLEvent")==null?void 0:c("ZenonMachineToQPLEvent")[a];if(!(a&&(i||(i=c("QuickPerformanceLogger")))&&c("QuickLogActionType")&&d("ZenonLoggingUtils").shouldAllowLogging()))return;e==="terminated"?(i||(i=c("QuickPerformanceLogger"))).markerEnd(a,2,f):(i||(i=c("QuickPerformanceLogger"))).markerPoint(a,b,{data:{string:{data:e}},instanceKey:f})};b.$10=function(a){return isNaN(+a)?0:+a};b.getLogHistory=function(){return this.$1};b.logStateMachine=function(a,b,d,e,f){if(!c("isEmployeeTestUserZenonLogging")())return;if(this.$5.has(d))return;var g="["+a+"] [Current State: "+b+"] Processing event: "+d;g={auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:""+g,stateMachineID:e};f!=null&&(g.messageID=f);c("ZenonInfraActionsLogger").logCheckpoint(g);this.$9(a,d,b,this.$10(e))};b.logStateMachineTransition=function(a,b,d,e,f,g,h,i){if(this.$6.has(d)||this.$5.has(f))return;if(!c("isEmployeeTestUserZenonLogging")())return;var j="";g!=null&&g.length===1&&g[0].type==="defer"?j="["+a+"] [[DEFERRED] "+f+" did not trigger transition. Current state remains "+d:d!==e?j="["+a+"] [[PROCESSED] "+f+" caused transition from "+(e||"")+" to "+d+".":b?j="["+a+"] [[PROCESSED] "+f+" did not trigger transition. Current state remains "+d:(j="["+a+"] [[DROPPED] "+f+" did not trigger transition. Current state remains "+d,this.$11(a));this.$8(j,h,i)};b.startQPL=function(a,b){b===void 0&&(b=0),(i||(i=c("QuickPerformanceLogger")))&&d("ZenonLoggingUtils").shouldAllowLogging()&&(i||(i=c("QuickPerformanceLogger"))).markerStart(a,this.$10(b))};b.endQPL=function(a,b){b===void 0&&(b=0),(i||(i=c("QuickPerformanceLogger")))&&c("QuickLogActionType")&&d("ZenonLoggingUtils").shouldAllowLogging()&&(i||(i=c("QuickPerformanceLogger"))).markerEnd(a,2,this.$10(b))};b.logConsole=function(a){this.$7(a,!1)};b.logMQTTStateChange=function(a){var b="mqtt_client_state_"+a;c("ZenonODSLogger").logCounter(b);c("isEmployeeTestUserZenonLogging")()&&c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] onMQTTStateChanged: "+a+", document.visibility: "+document.visibilityState+", document.hasFocus: "+String(document.hasFocus())+", navigator.onLine: "+String(navigator.onLine)})};b.logMQTTConnectStats=function(a,b){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] MQTT Connection time: "+String(a)+"ms, Retry Count: "+String(b)})};b.$11=function(a){(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_state_machine",a+"_event_dropped"),h.flush()};return a}();g["default"]=a}),98);
__d("ZenonEndCallReason",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({BREAKOUT_SESSION_SWITCH_ROOM:"BreakoutSessionSwitchRoom",CALL_END_ACCEPT_AFTER_HANG_UP:"CallEndAcceptAfterHangUp",CALLER_HAS_APPEALABLE_CALLING_RESTRICTION:"CallerHasAppealableCallingRestriction",CALLER_NOT_VISIBLE:"CallerNotVisible",CAMERA_PERMISSION_DENIED:"CameraPermissionDenied",CARRIER_BLOCKED:"CarrierBlocked",CLIENT_ENCRYPTION_ERROR:"ClientEncryptionError",CLIENT_ERROR:"ClientError",CLIENT_INTERRUPTED:"ClientInterrupted",CONNECTION_DROPPED:"ConnectionDropped",END_TO_END_ENCRYPTION_INVARIANT_VIOLATED:"EndToEndEncryptionInvariantViolated",HANGUP_CALL:"HangupCall",IGNORE_CALL:"IgnoreCall",IN_ANOTHER_CALL:"InAnotherCall",INACTIVE_TIMEOUT:"InactiveTimeout",INCOMING_TIMEOUT:"IncomingTimeout",MAX_ALLOWED_PARTICIPANTS_REACHED:"MaxAllowedParticipantsReached",MICROPHONE_PERMISSION_DENIED:"MicrophonePermissionDenied",NO_ANSWER_TIMEOUT:"NoAnswerTimeout",NO_PERMISSION:"NoPermission",NO_UI_SHOWN:"NoUIShown",OTHER_CARRIER_BLOCKED:"OtherCarrierBlocked",OTHER_INSTANCE_HANDLED:"OtherInstanceHandled",OTHER_NOT_CAPABLE:"OtherNotCapable",PRODUCT_SERVER_DEFINED_END_REASON:"ProductServerDefinedEndReason",REMOVED_BY_PARTICIPANT:"RemovedByParticipant",RING_MUTED:"RingMuted",SESSION_MIGRATED:"SessionMigrated",SIGNALING_MESSAGE_FAILED:"SignalingMessageFailed",TX_ACK_TIMEOUT:"TxAckTimeout",UNEXPECTED_END_OF_CALL:"UnexpectedEndOfCall",UNKNOWN:"Unknown",VERSION_UNSUPPORTED:"VersionUnsupported",WEBRTC_ERROR:"WebRTCError"});c=a;f["default"]=c}),66);
__d("ZenonIncomingRingSDKTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["Hangup","OtherDismiss"]);f.ZenonCancelReason=a}),66);
__d("fbwebrtc_ClientStack",[],(function(a,b,c,d,e,f){a=Object.freeze({OLD_CLIENT_PLATFORM_STACK:0,RSYS_X:1,IG_OLD_STACK:2,MLITE_OLD_STACK:3,SCOTCH:4,ZENON:5});f["default"]=a}),66);
__d("multiway_ApprovalStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({DENIED:0,APPROVED:1});f["default"]=a}),66);
__d("multiway_Capability",[],(function(a,b,c,d,e,f){a=Object.freeze({SUPPORT_AUDIO_DEPRECATED:0,SUPPORT_VIDEO_DEPRECATED:1,SUPPORT_EXPERIMENTS_IN_JOIN_RESPONSE:2,SUPPORT_NEW_PARTICIPANT_STATES:3,SUPPORT_SDP_RENEGOTIATION:4,SUPPORT_MWPP:5,REQUIRE_FULL_SDP_IN_SMU:6,SUPPORT_PRECONNECT:7,SUPPORT_MWPP_DEESCALATION:8,SUPPORT_PARTICIPANT_STATE_UNCALLABLE:9,SUPPORT_MULTIPLE_VIDEO_STREAMS:10,REQUIRE_FULL_SDP_IN_SMU_OPTIMIZED:11,SUPPORT_MULTISTREAM_FEC:12,SUPPORT_DELTA_SMU:13,REQUIRE_DEFAULT_CHANNEL_SCREENSHARE:14,SUPPORT_SCREENSHARE_FLAG_IN_JOIN_RESPONSE_AND_SMU:15,SUPPORT_TEMPORAL_LAYER_JBE:16,REQUIRES_P2P_RELAY_INFO_VIA_SIGNALING:17,SUPPORT_NUMERIC_TOPICS:18,SUPPORT_PSEUDO_QUIC_CONNECTION:19,SUPPORT_SDP_SENDRECV:20});f["default"]=a}),66);
__d("multiway_ClientEventType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,MEDIA_CONNECTED:1});f["default"]=a}),66);
__d("multiway_ConferenceType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,IGVIDEOCALL:9,ROOM:15,CRUCIBLE:20,MBS_WA:21,BOT:22,HORIZON:23,ULLC:24});f["default"]=a}),66);
__d("multiway_DeviceStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({OK:0,NOT_SUPPORTED:1,IN_ANOTHER_CALL:10});f["default"]=a}),66);
__d("multiway_DismissReason",[],(function(a,b,c,d,e,f){a=Object.freeze({CALL_ENDED:0,ANSWERED_ON_ANOTHER_DEVICE:1,IN_ANOTHER_CALL:2,CONNECTION_DROPPED:3,REJECTED_ON_ANOTHER_DEVICE:4,REMOVED_BY_PARTICIPANT:5,REJECTED_BY_CALLEE:6,INTERNAL_ERROR:7,CALL_ENDED_BY_PRODUCT:9,JOIN_APPROVAL_DENIED:10,JOIN_APPROVAL_TIMEDOUT:11,UNSUPPORTED_VERSION:12,LIVE_NOT_ACKED:13,TX_ACK_TIMEDOUT:14,ANSWERED_BY_OTHER_USER:15,PARTICIPANT_SELF_TERMINATION:16,PARTICIPANT_REJOIN:17,LONG_LASTING_AUDIO_ISSUE:18,PRIMARY_ENDPOINT_HANGUP:19,RECONNECT_FAILED:20,E2EE_HARDENING_ERROR:21,CALL_ENDED_BY_EXTENSION:22,CALL_ENDED_BY_OVER_CAPACITY:23});f["default"]=a}),66);
__d("multiway_E2eeMode",[],(function(a,b,c,d,e,f){a=Object.freeze({E2EE_NOT_MANDATED:0,DEPRECATED_NO_REQUIREMENT:1,E2EE_MANDATED:2});f["default"]=a}),66);
__d("multiway_EndpointServiceType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,COMPOSITING_SERVICE:1,MEDIA_SERVER:2,CATHODE_AMBISONIC:3,CATHODE_CAPTIONS:4,CATHODE_MEETING_SUMMARIZER:5,CATHODE_REALTIME_SHARED_STATE:6,RP_GENAI_SERVICE:7,SMART_GLASSES_ASSISTANT:8});f["default"]=a}),66);
__d("multiway_HangupReason",[],(function(a,b,c,d,e,f){a=Object.freeze({IGNORE_CALL:0,HANGUP_CALL:1,NO_ANSWER_TIMEOUT:2,CLIENT_ERROR:3,IN_ANOTHER_CALL:4,CLIENT_INTERRUPTED:5,SESSION_MIGRATED:6,E2EE_MANDATED_BUT_OFFER_DID_NOT_CONTAIN_E2EE:7,E2EE_MANDATED_BUT_ANSWER_DID_NOT_NEGOTIATE_E2EE:8,WEBRTC_ERROR:9,CONNECTION_DROPPED:10});f["default"]=a}),66);
__d("multiway_JoinMode",[],(function(a,b,c,d,e,f){a=Object.freeze({PRIMARY:0,SECONDARY:1});f["default"]=a}),66);
__d("multiway_MediaPath",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,SFU:1,P2P:2});f["default"]=a}),66);
__d("multiway_MediaPauseStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NotPaused:0,Paused:1});f["default"]=a}),66);
__d("multiway_MessageTag",[],(function(a,b,c,d,e,f){a=Object.freeze({PRANSWER:1001,INITIAL_ANSWER_TO_P2P_CALLER:1002,DEESCALATE_OFFER_TO_P2P_CALLEE:1003,DEESCALATE_ANSWER_TO_P2P_CALLER:1004,REQUEST_DEESCALATE_TO_P2P_CALLER:1005,REQUEST_ESCALATE:1006,REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM:1007,REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS:1008,PARTICIPANT_ADDED:1009,PARTICIPANT_REMOVED:1010,FIRST_REMOTE_ALERTED_FOR_INITIATOR:2001,FIRST_REMOTE_ANSWERED_FOR_INITIATOR:2002,CONTAIN_PENDING_APPROVAL_PARTICIPANTS:2003,KEEP_ALIVE_PING:3001,IS_INITIATOR:4001,PREGEN_SDP:4002});f["default"]=a}),66);
__d("multiway_MessageType",[],(function(a,b,c,d,e,f){a=Object.freeze({JOIN:0,SERVER_MEDIA_UPDATE:1,HANGUP:2,ICE_CANDIDATE:3,RING:4,DISMISS:5,CONFERENCE_STATE:6,ADD_PARTICIPANTS:7,SUBSCRIPTION:8,CLIENT_MEDIA_UPDATE:9,DATA_MESSAGE:10,REMOVE_PARTICIPANTS:11,PING:18,UPDATE:20,NOTIFY:21,CONNECT:22,CLIENT_EVENT:23,UNSUBSCRIBE:25,APPROVAL:26,TRANSFER:27,WAKEUP:28});f["default"]=a}),66);
__d("multiway_ParticipantCallState",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,DISCONNECTED:1,NO_ANSWER:2,REJECTED:3,UNREACHABLE:4,CONNECTION_DROPPED:5,CONTACTING:6,RINGING:7,CONNECTING:8,CONNECTED:9,PARTICIPANT_LIMIT_REACHED:10,IN_ANOTHER_CALL:11,RING_TYPE_UNSUPPORTED:12,PENDING_APPROVAL:13,APPROVED:14,FAILED_APPROVAL:15,HANGUP_IN_WAITING_ROOM:16,UNCALLABLE:17,UNCALLABLE_DELAYED:18});f["default"]=a}),66);
__d("multiway_RingType",[],(function(a,b,c,d,e,f){a=Object.freeze({GROUP_AUDIO_CALL:0,PEER_VIDEO_CALL:1,PEER_AUDIO_CALL:2,GROUP_VIDEO_CALL:3,LIVE_STREAM:4,PEER_ESCALATED_VIDEO_CALL:5,PEER_ESCALATED_AUDIO_CALL:6,LIVE_AUDIO_ROOM:7,LIVE_WITH_ROOM:8});f["default"]=a}),66);
__d("multiway_RtcResponseStatusCode",[],(function(a,b,c,d,e,f){a=Object.freeze({OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,METHOD_NOT_ALLOWED:406,CONFLICT:409,CONDITIONAL_REQUEST_FAILED:412,SERVER_INTERNAL_ERROR:500,SERVICE_UNAVAILABLE:503});f["default"]=a}),66);
__d("multiway_RtcResponseSubCode",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:1e3,EXCEEDED_MAX_ALLOWED_PARTICIPANTS:1001,MEMBERSHIP_CHECK_FAIL:1002,CONFERENCE_THROTTLED:1003,ENDPOINT_THROTTLED:1004,MWS_MESSAGE_SENT_TO_INCORRECT_REGION:1005,UNSUPPORTED_REQUEST_TYPE:2e3,CLIENT_REQUEST_UNACCEPTABLE:2001,CLIENT_RESPONSE_UNACCEPTABLE:2002,RING_RESPONSE_BODY_NOT_SET:2004,SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET:2005,INVALID_SDP:2006,INVALID_CONFERENCE_NAME:2007,SERVER_INFO_CONFERENCE_NAME_MISMATCH:2008,INVALID_USER_ID:2009,INCORRECT_VERSION_RANGE:2010,SENDER_ID_MISMATCH:2011,RECIPIENT_NOT_SPECIFIED:2012,FIELD_NOT_ALLOWED:2013,USERS_NOT_SPECIFIED:2015,REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE:2016,INVALID_CALL_ID:2017,SESSION_DESCRIPTION_ID_MISMATCH:2018,EMPTY_CLIENT_MEDIA_UPDATES:2019,INVALID_SERVER_INFO_DATA:2020,INCORRECT_STATE_VERSION:2021,MISMATCHED_STATE_FOR_VERSION:2022,INVALID_STATE_VERSION:2023,NO_RESOLVER_FOUND:2024,MISSING_APPROVERLIST:2025,FULL_SDP_REQUIRED_IN_APPROVED_STATE:2026,INVALID_BROADCAST_ID:2027,INVALID_ENDPOINT_CONFIG:2028,INVALID_E2EE_STATE:2029,SFU_MODE_PREVENTED:2030,INVALID_CONFERENCE_STATE:2031,JOIN_REQUEST_DENIED:2032,EMPTY_USER_IDS:2033,MISSING_SDP_CONNECT_REQUEST:2034,CALLER_HAS_APPEALABLE_CALLING_RESTRICTION:2035,MISSING_BODY_ENDPOINT:2101,MISSING_BODY_HEADER:2102,MISSING_BODY_BODY:2103,MISSING_BODY_PARAMS:2104,MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST:2105,MISSING_BODY_DATA_MESSAGE_REQUEST:2106,MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST:2107,MISSING_BODY_ADD_PARTICIPANTS_REQUEST:2108,MISSING_BODY_SUBSCRIPTION_REQUEST:2110,MISSING_BODY_JOIN_REQUEST:2111,MISSING_BODY_HANGUP_REQUEST:2112,MISSING_BODY_ICE_CANDIDATE_REQUEST:2113,MISSING_BODY_P2P_MESSAGE_REQUEST:2114,MISSING_BODY_UPDATE_REQUEST:2115,MISSING_BODY_CLIENT_EVENT_REQUEST:2116,MISSING_BODY_CONNECT_REQUEST:2117,MISSING_BODY_UNSUBSCRIBE_REQUEST:2118,MISSING_BODY_APPROVAL_REQUEST:2119,MISSING_ENDPOINT_USER_ID:2120,EMPTY_ENDPOINT_USER_ID:2121,MISSING_BODY_TRANSFER_REQUEST:2122,MISSING_BODY_GENERIC:2199,REQUESTOR_NOT_MEMBER_CONFERENCE:3002,NOT_BROADCAST_OWNER:3003,GUEST_NOT_INVITED:3004,GUEST_DISCONNECTED:3005,GUEST_INVITATION_EXPIRED:3006,PARTICIPANT_IN_PENDING_APPROVAL_STATE:3008,INVALID_MULTIWAY_PARAMS:3009,BROADCAST_ALREADY_STOPPED:4002,FAILED_TO_GENERATE_SDP_ANSWER:4003,FAILED_GENERATE_SESSION_DESCRIPTION:4004,SDP_SESSION_ID_MISMATCH:4005,MEDIA_ENDPOINT_GONE:4007,MEDIA_ENDPOINT_ALREADY_EXISTS:4008,MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID:4009,LEGACY_MESSENGER_SENDER_UNSET:4010,FAILED_TO_SET_TRANSPORT_INFO:4011,NON_PRIMARY_MULTIWAY_SERVER:4012,FAILED_TO_GET_REMOTE_DESCRIPTION:4013,LOCAL_DESCRIPTION_NOT_SET:4014,INVALID_SDP_TYPE:4015,CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO:4016,SDP_UNSET_ON_P2P_ANSWER:4017,MISSING_ICE_CANDIDATE_PAYLOAD:4018,P2P_PROTOCOL_UNSET:4019,CREATE_ACK_FOR_INVALID_MESSAGE_TYPE:4020,LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE:4021,CONNECT_UNSUPPORTED_IN_SFU_MODE:4022,CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS:4023,RESOLVE_STATE_API_ERROR:4024,EXTERNAL_RESOLUTION_ERROR:4025,INTERNAL_RESOLUTION_ERROR:4026,RESOLUTION_DISABLED:4027,BROADCAST_ID_MISSING:4028,SDP_UNSET_ON_P2P_OFFER:4029,LEGACY_OFFER_MISSING_REQUIRED_VALUE:4031,MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR:4032,CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS:4033,OTHER_USER_ANSWERED_THE_CALL:4034,MEDIA_SERVER_DESERIALIZATION_ERROR:4035,REMOTE_SDP_TRACKID_MISMATCH:4036,SIGNALING_MESSAGE_TO_CLIENT_DROPPED:4037,DATA_CHANNEL_ENDPOINT_GONE:4038,DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS:4039,CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION:4040,P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION:4041,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE:4042,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER:4043,REQUEST_TIMEOUT:4044,TOO_MANY_MEDIA_TRACKS_IN_SDP:4045,CONFERENCE_NOT_FOUND:5001,CONFERENCE_IS_TERMINATING:5002,CONFERENCE_IS_TERMINATED:5003,CONFERENCE_NAME_EMPTY:5004,NONCE_EMPTY:5005,NONCE_MISMATCH:5006,CONFERENCE_HAS_GONE:5007,PARTICIPANT_HAS_GONE:5008,MEDIA_SERVER_NOT_FOUND:5009,CLIENT_TERMINATED:5010,JOIN_SESSION_RESULT_MISSING:5012,LOGGING_POLICY_RESULT_MISSING:5013,INVITE_USERS_RESULT_MISSING:5014,STATE_SYNC_RESULT_MISSING:5015,ENDPOINT_INFO_RESULT_MISSING:5016,CONFERENCE_NAME_MISMATCH:5017,UNEXPECTED_TRANSPORT_PARAMS_CONFERENCE_NAME:5018,SESSION_CONFIGURATION_RESULT_MISSING:5019,MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE:6001,CONFERENCE_INCAPABLE_RENEGOTIATION:6002,REJECTING_CMU_WHEN_SMU_PENDING:6003,PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC:6004,PARTICIPANT_ALREADY_IN_WAITING_ROOM:6005,PARTICIPANT_NOT_IN_PENDING_APPROVAL:6006,USER_NOT_APPROVER_FOR_TARGET_USER:6007,UNSUPPORTED_CAPABILITIES:6008,PRODUCT_SERVER_DEFINED_END_REASON:6009,WWW_KILLSWITCHED_REQUEST:6010,CONFLICTING_MEDIA_PATH:6011,CONFLICTING_MEDIA_STATUS:6012,CONFLICTING_SESSION_DESCRIPTION:6013,OK:9e3});f["default"]=a}),66);
__d("multiway_SubscriptionType",[],(function(a,b,c,d,e,f){a=Object.freeze({CNAME:0,TRACK:1,DOMINANT_SPEAKER:2});f["default"]=a}),66);
__d("multiway_VideoQuality",[],(function(a,b,c,d,e,f){a=Object.freeze({LOW:0,MEDIUM:1,HIGH:2,HD:3,NUM_QUALITIES:4});f["default"]=a}),66);
__d("ZenonMWMessageTypes",["$InternalEnum","fbwebrtc_ClientStack","multiway_ApprovalStatus","multiway_Capability","multiway_ClientEventType","multiway_ConferenceType","multiway_DeviceStatus","multiway_DismissReason","multiway_E2eeMode","multiway_EndpointServiceType","multiway_HangupReason","multiway_JoinMode","multiway_MediaPath","multiway_MediaPauseStatus","multiway_MessageTag","multiway_MessageType","multiway_ParticipantCallState","multiway_RingType","multiway_RtcResponseStatusCode","multiway_RtcResponseSubCode","multiway_SubscriptionType","multiway_VideoQuality"],(function(a,b,c,d,e,f,g){"use strict";a=b("$InternalEnum")({DEFAULT_AUDIO:0,DEFAULT_VIDEO:1,SCREEN_AUDIO:2,SCREEN_VIDEO:3});g.ZenonMWClientStack=c("fbwebrtc_ClientStack");g.ZenonMWApprovalStatus=c("multiway_ApprovalStatus");g.ZenonMWCapability=c("multiway_Capability");g.ZenonMWClientEventType=c("multiway_ClientEventType");g.ZenonMWConferenceType=c("multiway_ConferenceType");g.ZenonMWDeviceStatus=c("multiway_DeviceStatus");g.ZenonMWDismissReason=c("multiway_DismissReason");g.ZenonMWE2eeMode=c("multiway_E2eeMode");g.ZenonMWEndpointServiceType=c("multiway_EndpointServiceType");g.ZenonMWHangupReason=c("multiway_HangupReason");g.ZenonMWMediaPath=c("multiway_MediaPath");g.ZenonMWJoinMode=c("multiway_JoinMode");g.ZenonMWMediaPauseStatus=c("multiway_MediaPauseStatus");g.ZenonMWMessageTag=c("multiway_MessageTag");g.ZenonMWSignalingPayloadType=c("multiway_MessageType");g.ZenonMWParticipantCallState=c("multiway_ParticipantCallState");g.ZenonMWRingType=c("multiway_RingType");g.ZenonMWResponseStatusCode=c("multiway_RtcResponseStatusCode");g.ZenonMWResponseSubCode=c("multiway_RtcResponseSubCode");g.ZenonMWSubscriptionType=c("multiway_SubscriptionType");g.ZenonMWVideoQuality=c("multiway_VideoQuality");g.ZenonMWTrackLabel=a}),98);
__d("ZenonMediaError",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["ConnectionClosed","IceDisconnected","IceFailure","SetLocalSdpFailed","SetRemoteSdpFailed","RollbackSdpFailed","UnknownError"]);f.ZenonMediaError=a}),66);
__d("ZenonDismissReason",["$InternalEnum","FBLogger","ZenonIncomingRingSDKTypes","ZenonMWMessageTypes","ZenonMediaError"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("$InternalEnum")({IgnoreCall:0,HangupCall:1,InAnotherCall:2,AcceptAfterHangUp:3,NoAnswerTimeout:4,IncomingTimeout:5,OtherInstanceHandled:6,SignalingMessageFailed:7,ConnectionDropped:8,ClientInterrupted:9,WebRTCError:10,ClientError:11,NoPermission:12,OtherNotCapable:13,NoUIShown:14,VersionUnsupported:15,CallerNotVisible:16,CarrierBlocked:17,OtherCarrierBlocked:18,ClientEncryptionError:19,MicrophonePermissionDenied:20,CameraPermissionDenied:21,SessionMigrated:22,RingMuted:23,JoinApprovalDenied:24,RejectedByCallee:25,CallEndedByProduct:26,CallEnded:27,AnsweredOnAnotherDevice:28,RejectedOnAnotherDevice:29,CallCollision:30,MaxAllowedParticipantsReached:31,UnexpectedEndOfCall:32,TxAckTimeout:33,EndToEndEncryptionInvariantViolated:34,ProductServerDefinedEndReason:35,RemovedByParticipant:39,AnsweredByOtherUser:40,CallerHasAppealableCallingRestriction:41});function a(a){switch(a){case"BreakoutSessionSwitchRoom":return i.HangupCall;case"CallEndAcceptAfterHangUp":return i.AcceptAfterHangUp;case"CallerNotVisible":return i.CallerNotVisible;case"CarrierBlocked":return i.CarrierBlocked;case"ClientEncryptionError":return i.ClientEncryptionError;case"ClientError":return i.ClientError;case"ClientInterrupted":return i.ClientInterrupted;case"ConnectionDropped":return i.ConnectionDropped;case"HangupCall":return i.HangupCall;case"IgnoreCall":return i.IgnoreCall;case"InAnotherCall":return i.InAnotherCall;case"EndToEndEncryptionInvariantViolated":return i.EndToEndEncryptionInvariantViolated;case"InactiveTimeout":return i.CallEnded;case"IncomingTimeout":return i.IncomingTimeout;case"MaxAllowedParticipantsReached":return i.MaxAllowedParticipantsReached;case"NoAnswerTimeout":return i.NoAnswerTimeout;case"NoPermission":return i.NoPermission;case"NoUIShown":return i.NoUIShown;case"OtherCarrierBlocked":return i.OtherCarrierBlocked;case"OtherInstanceHandled":return i.OtherInstanceHandled;case"OtherNotCapable":return i.OtherNotCapable;case"SignalingMessageFailed":return i.SignalingMessageFailed;case"UnexpectedEndOfCall":return i.UnexpectedEndOfCall;case"Unknown":return i.CallEnded;case"VersionUnsupported":return i.VersionUnsupported;case"WebRTCError":return i.WebRTCError;case"MicrophonePermissionDenied":return i.MicrophonePermissionDenied;case"CameraPermissionDenied":return i.CameraPermissionDenied;case"SessionMigrated":return i.SessionMigrated;case"RingMuted":return i.RingMuted;case"TxAckTimeout":return i.TxAckTimeout;case"ProductServerDefinedEndReason":return i.ProductServerDefinedEndReason;case"RemovedByParticipant":return i.RemovedByParticipant;case"CallerHasAppealableCallingRestriction":return i.CallerHasAppealableCallingRestriction}}function e(a){switch(a){case i.CallEnded:case i.CallEndedByProduct:case i.HangupCall:return"HangupCall";case i.IgnoreCall:case i.JoinApprovalDenied:case i.RejectedByCallee:return"IgnoreCall";case i.InAnotherCall:return"InAnotherCall";case i.AcceptAfterHangUp:return"CallEndAcceptAfterHangUp";case i.NoAnswerTimeout:return"NoAnswerTimeout";case i.IncomingTimeout:return"IncomingTimeout";case i.AnsweredOnAnotherDevice:case i.CallCollision:case i.RejectedOnAnotherDevice:case i.OtherInstanceHandled:case i.AnsweredByOtherUser:return"OtherInstanceHandled";case i.SignalingMessageFailed:return"SignalingMessageFailed";case i.ConnectionDropped:return"ConnectionDropped";case i.ClientInterrupted:return"ClientInterrupted";case i.WebRTCError:return"WebRTCError";case i.ClientError:return"ClientError";case i.NoPermission:return"NoPermission";case i.OtherNotCapable:return"OtherNotCapable";case i.NoUIShown:return"NoUIShown";case i.VersionUnsupported:return"VersionUnsupported";case i.CallerNotVisible:return"CallerNotVisible";case i.CarrierBlocked:return"CarrierBlocked";case i.OtherCarrierBlocked:return"OtherCarrierBlocked";case i.ClientEncryptionError:return"ClientEncryptionError";case i.UnexpectedEndOfCall:return"UnexpectedEndOfCall";case i.MaxAllowedParticipantsReached:return"MaxAllowedParticipantsReached";case i.MicrophonePermissionDenied:return"MicrophonePermissionDenied";case i.CameraPermissionDenied:return"CameraPermissionDenied";case i.SessionMigrated:return"SessionMigrated";case i.RingMuted:return"RingMuted";case i.TxAckTimeout:return"TxAckTimeout";case i.EndToEndEncryptionInvariantViolated:return"EndToEndEncryptionInvariantViolated";case i.ProductServerDefinedEndReason:return"ProductServerDefinedEndReason";case i.RemovedByParticipant:return"RemovedByParticipant";case i.CallerHasAppealableCallingRestriction:return"CallerHasAppealableCallingRestriction"}c("FBLogger")("rtc_www").mustfix("Unknown dismiss reason: %s",a);return"Unknown"}function f(a){switch(a){case i.OtherInstanceHandled:case i.AnsweredOnAnotherDevice:case i.AnsweredByOtherUser:case i.RejectedOnAnotherDevice:return d("ZenonIncomingRingSDKTypes").ZenonCancelReason.OtherDismiss;default:return d("ZenonIncomingRingSDKTypes").ZenonCancelReason.Hangup}}function j(a){switch(a){case d("ZenonMediaError").ZenonMediaError.IceDisconnected:return i.ConnectionDropped;case d("ZenonMediaError").ZenonMediaError.ConnectionClosed:return i.HangupCall;case d("ZenonMediaError").ZenonMediaError.IceFailure:case d("ZenonMediaError").ZenonMediaError.SetLocalSdpFailed:case d("ZenonMediaError").ZenonMediaError.SetRemoteSdpFailed:case d("ZenonMediaError").ZenonMediaError.RollbackSdpFailed:return i.WebRTCError;case d("ZenonMediaError").ZenonMediaError.UnknownError:return i.UnexpectedEndOfCall}}function k(a){return l[a]}var l=Object.freeze((b={},b[(h=d("ZenonMWMessageTypes")).ZenonMWDismissReason.CALL_ENDED]=i.CallEnded,b[h.ZenonMWDismissReason.ANSWERED_ON_ANOTHER_DEVICE]=i.AnsweredOnAnotherDevice,b[h.ZenonMWDismissReason.ANSWERED_BY_OTHER_USER]=i.AnsweredByOtherUser,b[h.ZenonMWDismissReason.IN_ANOTHER_CALL]=i.InAnotherCall,b[h.ZenonMWDismissReason.CONNECTION_DROPPED]=i.ConnectionDropped,b[h.ZenonMWDismissReason.REJECTED_ON_ANOTHER_DEVICE]=i.RejectedOnAnotherDevice,b[h.ZenonMWDismissReason.REJECTED_BY_CALLEE]=i.RejectedByCallee,b[h.ZenonMWDismissReason.CALL_ENDED_BY_PRODUCT]=i.CallEndedByProduct,b[h.ZenonMWDismissReason.INTERNAL_ERROR]=i.SignalingMessageFailed,b[h.ZenonMWDismissReason.REMOVED_BY_PARTICIPANT]=i.RemovedByParticipant,b[h.ZenonMWDismissReason.TX_ACK_TIMEDOUT]=i.TxAckTimeout,b));g.ZenonDismissReason=i;g.endCallToDismissReason=a;g.dismissToEndCallReason=e;g.dismissReasonToCancelReason=f;g.mediaErrorToDismissReason=j;g.mwDismissToDmissReason=k}),98);
__d("ZenonIGMediaUtil",["ZenonAppProvider","gkx"],(function(a,b,c,d,e,f,g){"use strict";a={shouldUseSFUOnly:function(){return d("ZenonAppProvider").isInstagramApp()&&!c("gkx")("2274")}};b=a;g["default"]=b}),98);
__d("ZenonIceStatsParser",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=[];a=a.split("\r\n");a.forEach(function(a){g(a)&&b.push({gen:h(a),type:i(a)})});return b}function g(a){return a.indexOf("candidate:")>-1}function h(a){var b=0;a=a.match(/generation (\d+)/);a&&(b=parseInt(a[1],10));return b}function i(a){a=a.match(/typ (host|relay|srflx|prflx)/);if(a)return a[1];else return"unknown"}f.extractIceInfo=a}),66);
__d("ZenonJoiningContext",[],(function(a,b,c,d,e,f){"use strict";b="joining_context";function a(a){var b=a.callablePostID,c=a.callingTags,d=a.callTrigger,e=a.conferenceName,f=a.groupThreadID,g=a.igThreadID,h=a.immersiveModeDoorID,i=a.isMetaAiCall,j=a.linkUrl,k=a.liveBroadcastID,l=a.meetingID,m=a.peerID,n=a.rtcDoorID;a=a.serverInfoData;return{call_trigger:d,callable_post_id:b,calling_tags:c,conference_name:e,group_thread_id:f,ig_thread_id:g,immersive_mode_door_id:h,is_meta_ai_call:i,link_url:j,live_broadcast_id:k,meeting_id:l,peer_id:m,rtc_door_id:n,server_info_data:a}}f.JOINING_CONTEXT_TOPIC=b;f.convertCollisionToJoiningContext=a}),66);
__d("ZenonLoggingEventTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["Send","Receive"]);c=b("$InternalEnum")({Primary:"primary",Secondary:"secondary"});d="rtc_www";f.ZenonUpdateIceInfoDirection=a;f.ZenonJoinMode=c;f.tslogSource=d}),66);
__d("ZenonMWCommonUtils",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.split("\n");if(a.length<2)throw c("FBLogger")("rtc_www").mustfixThrow("Expected SDP string with two or more lines, but got %s",a.length);a=a[1].trim();a=a.split(" ");if(a.length<3)throw c("FBLogger")("rtc_www").mustfixThrow("Session line should have at least 3 tokens, but got %s",a.length);a=parseInt(a[2],10);if(isNaN(a))throw c("FBLogger")("rtc_www").mustfixThrow("SDP version could not be parsed as number.");return a}function b(a){return a.includes("BUNDLE 0")}g.getSdpVersion=a;g.isUnifiedPlan=b}),98);
__d("shouldUseSFUMediaPath",["UserAgent"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("UserAgent").isBrowser("Chrome <= 88")?!0:!1}g["default"]=a}),98);
__d("ZenonMWJoinUtils",["ZenonActorHooks","ZenonBrowsers","ZenonIGMediaUtil","shouldUseSFUMediaPath"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("ZenonBrowsers").isFirefox()&&a!=="answer"?!1:!c("ZenonIGMediaUtil").shouldUseSFUOnly()}function b(){return c("shouldUseSFUMediaPath")(!1)?!1:!d("ZenonBrowsers").isMobileSafari()&&!d("ZenonBrowsers").isDesktopSafari()&&!d("ZenonBrowsers").isFirefox()&&!d("ZenonBrowsers").isFBWebview()&&!d("ZenonActorHooks").ZenonActor.isInstagramUser()}g.canUseMwpp=a;g.canDeescalate=b}),98);
__d("ZenonMWMessageReliabilityLogTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["RECEIVED_REQUEST","RECEIVED_RESPONSE","PROCESSING_REQUEST","START_PROCESSING_RESPONSE","PROCESSING_RESPONSE","PROCESSED_REQUEST","PROCESSED_RESPONSE","SENDING_REQUEST","SENDING_RESPONSE","SENT_REQUEST","SENT_REQUEST_FROM_HANDLER","SENT_RESPONSE","SEND_REQUEST_FAILED","SEND_REQUEST_FAILED_FROM_HANDLER","SEND_RESPONSE_FAILED","SENT_SM_EVENT","PROCESSED_SM_EVENT","REQUEST_AFTER_NULL_CHECK","REQUEST_AFTER_TRANSLATION"]);f.ZenonMWMessageReliabilityEvent=a}),66);
__d("ZenonMWThriftMessageTagUtils",["MultiwayCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";function h(a){switch(a){case d("MultiwayCommonTypes").MessageTag.PRANSWER:return 1001;case d("MultiwayCommonTypes").MessageTag.INITIAL_ANSWER_TO_P2P_CALLER:return 1002;case d("MultiwayCommonTypes").MessageTag.DEESCALATE_OFFER_TO_P2P_CALLEE:return 1003;case d("MultiwayCommonTypes").MessageTag.DEESCALATE_ANSWER_TO_P2P_CALLER:return 1004;case d("MultiwayCommonTypes").MessageTag.REQUEST_DEESCALATE_TO_P2P_CALLER:return 1005;case d("MultiwayCommonTypes").MessageTag.REQUEST_ESCALATE:return 1006;case d("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM:return 1007;case d("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS:return 1008;case d("MultiwayCommonTypes").MessageTag.PARTICIPANT_ADDED:return 1009;case d("MultiwayCommonTypes").MessageTag.PARTICIPANT_REMOVED:return 1010;case d("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ALERTED_FOR_INITIATOR:return 2001;case d("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ANSWERED_FOR_INITIATOR:return 2002;case d("MultiwayCommonTypes").MessageTag.CONTAIN_PENDING_APPROVAL_PARTICIPANTS:return 2003;case d("MultiwayCommonTypes").MessageTag.KEEP_ALIVE_PING:return 3001;case d("MultiwayCommonTypes").MessageTag.IS_INITIATOR:return 4001;case d("MultiwayCommonTypes").MessageTag.PREGEN_SDP:return 4002}}function a(a){switch(a){case 1001:return d("MultiwayCommonTypes").MessageTag.PRANSWER;case 1002:return d("MultiwayCommonTypes").MessageTag.INITIAL_ANSWER_TO_P2P_CALLER;case 1003:return d("MultiwayCommonTypes").MessageTag.DEESCALATE_OFFER_TO_P2P_CALLEE;case 1004:return d("MultiwayCommonTypes").MessageTag.DEESCALATE_ANSWER_TO_P2P_CALLER;case 1005:return d("MultiwayCommonTypes").MessageTag.REQUEST_DEESCALATE_TO_P2P_CALLER;case 1006:return d("MultiwayCommonTypes").MessageTag.REQUEST_ESCALATE;case 1007:return d("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM;case 1008:return d("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS;case 1009:return d("MultiwayCommonTypes").MessageTag.PARTICIPANT_ADDED;case 1010:return d("MultiwayCommonTypes").MessageTag.PARTICIPANT_REMOVED;case 2001:return d("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ALERTED_FOR_INITIATOR;case 2002:return d("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ANSWERED_FOR_INITIATOR;case 2003:return d("MultiwayCommonTypes").MessageTag.CONTAIN_PENDING_APPROVAL_PARTICIPANTS;case 3001:return d("MultiwayCommonTypes").MessageTag.KEEP_ALIVE_PING;case 4001:return d("MultiwayCommonTypes").MessageTag.IS_INITIATOR;case 4002:return d("MultiwayCommonTypes").MessageTag.PREGEN_SDP}}function b(a){var b=[];a==null||a.forEach(function(a){a&&b.push(h(a))});return b}g.toThriftMessageTag=a;g.fromThriftMessageTags=b}),98);
__d("ZenonParticipantState",["$InternalEnum","ZenonCallsModelTypes"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({UNKNOWN:0,ADDING:1,CONTACTING:2,RINGING:3,ACCEPTING:4,PRECONNECTING:5,CONNECTING:6,CONNECTED:7,REMOVING:8,DISCONNECTED:9,NO_ANSWER:10,REJECTED:11,UNREACHABLE:12,CONNECTION_DROPPED:13,PARTICIPANT_LIMIT_REACHED:14,IN_ANOTHER_CALL:15,RING_TYPE_UNSUPPORTED:16,PENDING_APPROVAL:17,APPROVING:18,DENYING:19,APPROVED:20,FAILED_APPROVAL:21,HANGUP_IN_WAITING_ROOM:22,RECONNECTING:23});function a(a){if(a==null)return d("ZenonCallsModelTypes").ZenonCallParticipantState.Disconnected;switch(a){case h.CONTACTING:case h.PRECONNECTING:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Contacting;case h.RINGING:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Ringing;case h.CONNECTING:case h.RECONNECTING:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Connecting;case h.CONNECTED:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Connected;case h.PENDING_APPROVAL:case h.APPROVING:case h.DENYING:case h.ACCEPTING:case h.ADDING:case h.REMOVING:return d("ZenonCallsModelTypes").ZenonCallParticipantState.PendingApproval;case h.APPROVED:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Approved;case h.FAILED_APPROVAL:return d("ZenonCallsModelTypes").ZenonCallParticipantState.FailedApproval;case h.HANGUP_IN_WAITING_ROOM:case h.UNKNOWN:case h.DISCONNECTED:case h.NO_ANSWER:case h.REJECTED:case h.UNREACHABLE:case h.CONNECTION_DROPPED:case h.PARTICIPANT_LIMIT_REACHED:case h.IN_ANOTHER_CALL:case h.RING_TYPE_UNSUPPORTED:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Disconnected}return d("ZenonCallsModelTypes").ZenonCallParticipantState.Disconnected}g.ZenonParticipantState=h;g.toCallParticipantState=a}),98);
__d("ZenonScreenShare",["UserAgent","ZenonAppProvider"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.length===1&&((a=a[0])==null?void 0:a.contentType)==="screen"}function h(){return!c("UserAgent").isBrowser("Safari")}function i(){return d("ZenonAppProvider").isOculusCastingSite()?!1:!0}function b(){return!h()||!i()}g.isScreenSharingTrack=a;g.screenShareWithReplaceTrack=b}),98);
__d("ZenonSignalingTypes",[],(function(a,b,c,d,e,f){"use strict";a={OK:0,REJECTED_FROM_VERSION_DOES_NOT_MATCH:1,METHOD_NOT_ALLOWED:2};b={CLIENT_TERMINATED:0};f.ZenonSignalingStatusCode=a;f.ZenonSignalingStatusSubCode=b}),66);
__d("addDevTierOverridesToHeaderExtensions",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b={multiwayCoreTier:"",multiwayWwwTier:""};if(!c("gkx")("25224"))return b;b.multiwayWwwTier=h(a,"multiway_www_tier");b.multiwayCoreTier=h(a,"multiway_core_tier");return b}function h(a,b){b=b+"=";a=a.split(b);return a[1]?a.pop().split("&").shift():""}g["default"]=a}),98);
__d("ZenonMWThriftTranslatorUtils",["MultiwayCommonTypes","MultiwaySharedTypes","OverlayConfigServerLayer","RequestStreamBodyUtils","WebrtcSignalingCommonTypes","ZenonDismissReason","ZenonMWMessageTypes","ZenonMWThriftMessageTagUtils","ZenonParticipantState","ZenonScreenShare","ZenonSignalingProtocol","ZenonSignalingTypes","addDevTierOverridesToHeaderExtensions","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k="signalingDominantSpeakerUpdate",l="signalingVideoUploadUpdate",m="E2eeState",n=new Map(Array.from(d("MultiwaySharedTypes").ConferenceType.members(),function(a){return[d("MultiwaySharedTypes").ConferenceType.getName(a),a]}));function a(a,b,c,d){c===void 0&&(c=!1),a&&Object.keys(a).forEach(function(e){if(e===m&&d)return;var f=a[e],g=f.data;f=f.version;if(g!=null){g={data:g,eventName:"stateSyncNotifyRequest",responseRequired:c,topic:e,version:f};b.push(g)}})}function b(a){if(a){a=a[m];return a==null?void 0:a.data}}function e(a){if(a==null)return d("ZenonMWMessageTypes").ZenonMWMediaPath.UNKNOWN;switch(a){case d("MultiwaySharedTypes").MediaPath.SFU:return d("ZenonMWMessageTypes").ZenonMWMediaPath.SFU;case d("MultiwaySharedTypes").MediaPath.P2P:return d("ZenonMWMessageTypes").ZenonMWMediaPath.P2P;default:return d("ZenonMWMessageTypes").ZenonMWMediaPath.UNKNOWN}}function f(a){if(a==null)return d("ZenonParticipantState").ZenonParticipantState.UNKNOWN;switch(a){case d("MultiwayCommonTypes").ParticipantCallState.DISCONNECTED:return d("ZenonParticipantState").ZenonParticipantState.DISCONNECTED;case d("MultiwayCommonTypes").ParticipantCallState.NO_ANSWER:return d("ZenonParticipantState").ZenonParticipantState.NO_ANSWER;case d("MultiwayCommonTypes").ParticipantCallState.REJECTED:return d("ZenonParticipantState").ZenonParticipantState.REJECTED;case d("MultiwayCommonTypes").ParticipantCallState.UNREACHABLE:case d("MultiwayCommonTypes").ParticipantCallState.UNCALLABLE:return d("ZenonParticipantState").ZenonParticipantState.UNREACHABLE;case d("MultiwayCommonTypes").ParticipantCallState.CONNECTION_DROPPED:return d("ZenonParticipantState").ZenonParticipantState.CONNECTION_DROPPED;case d("MultiwayCommonTypes").ParticipantCallState.CONTACTING:return d("ZenonParticipantState").ZenonParticipantState.CONTACTING;case d("MultiwayCommonTypes").ParticipantCallState.RINGING:return d("ZenonParticipantState").ZenonParticipantState.RINGING;case d("MultiwayCommonTypes").ParticipantCallState.CONNECTING:return d("ZenonParticipantState").ZenonParticipantState.CONNECTING;case d("MultiwayCommonTypes").ParticipantCallState.CONNECTED:return d("ZenonParticipantState").ZenonParticipantState.CONNECTED;case d("MultiwayCommonTypes").ParticipantCallState.PARTICIPANT_LIMIT_REACHED:return d("ZenonParticipantState").ZenonParticipantState.PARTICIPANT_LIMIT_REACHED;case d("MultiwayCommonTypes").ParticipantCallState.IN_ANOTHER_CALL:return d("ZenonParticipantState").ZenonParticipantState.IN_ANOTHER_CALL;case d("MultiwayCommonTypes").ParticipantCallState.RING_TYPE_UNSUPPORTED:return d("ZenonParticipantState").ZenonParticipantState.RING_TYPE_UNSUPPORTED;case d("MultiwayCommonTypes").ParticipantCallState.PENDING_APPROVAL:return d("ZenonParticipantState").ZenonParticipantState.PENDING_APPROVAL;case d("MultiwayCommonTypes").ParticipantCallState.APPROVED:return d("ZenonParticipantState").ZenonParticipantState.APPROVED;case d("MultiwayCommonTypes").ParticipantCallState.FAILED_APPROVAL:return d("ZenonParticipantState").ZenonParticipantState.FAILED_APPROVAL;case d("MultiwayCommonTypes").ParticipantCallState.HANGUP_IN_WAITING_ROOM:return d("ZenonParticipantState").ZenonParticipantState.HANGUP_IN_WAITING_ROOM;default:return d("ZenonParticipantState").ZenonParticipantState.UNKNOWN}}function o(a){var b=null;a!=null&&a.forEach(function(a){a=(a=a.body)==null?void 0:a.genericMessage;if(a!=null&&a.topic==="collision_context_payload"){a=a.data;if(a!=null){var c;a=JSON.parse(d("RequestStreamBodyUtils").uint8ArrayToString(a));b={groupThreadID:(c=a.group_thread_id)!=null?c:null,peerID:(c=a.peer_id)!=null?c:null,serverInfoData:(c=a.server_info_data)!=null?c:null}}}});return b}function p(a){a=a&&a.length>0?a.find(function(a){return((a=a.body)==null||(a=a.genericMessage)==null?void 0:a.topic)==="room_metadata"}):null;if(a){var b;b=(b=a.body)==null||(b=b.genericMessage)==null?void 0:b.data;if(b!=null){b=JSON.parse(d("RequestStreamBodyUtils").uint8ArrayToString(b));a=(a=a.header)==null?void 0:a.sender;if(b.link_hash!=null&&b.room_name!=null&&a!=null)return{linkHash:b.link_hash,profileURL:b.profile_url,ringSubtitle:b.ring_subtitle,roomName:b.room_name,sender:a}}}return null}function q(a){return a.reduce(function(a,b){var c;c=(c=b.body)==null||(c=c.genericMessage)==null?void 0:c.topic;b=(b=b.body)==null||(b=b.genericMessage)==null?void 0:b.data;c!=null&&b!=null&&(a[c]=d("RequestStreamBodyUtils").uint8ArrayToString(b));return a},{})}function r(a){switch(a){case d("ZenonMWMessageTypes").ZenonMWMediaPath.SFU:return d("MultiwaySharedTypes").MediaPath.SFU;case d("ZenonMWMessageTypes").ZenonMWMediaPath.P2P:return d("MultiwaySharedTypes").MediaPath.P2P;default:return d("MultiwaySharedTypes").MediaPath.UNKNOWN}}function s(a,b,c){c===void 0&&(c=0);var d={fromVersion:b,tracks:[],version:c};a!=null&&Object.keys(a.tracks).forEach(function(b){var c,e=a.tracks[b];c={enabled:e.enabled,name:(c=e.name)!=null?c:"",participantID:(c=e.owner)!=null?c:"0",trackID:b,type:t(e.label)};d.tracks.push(c)});return d}function t(a){if(a==null)return null;switch(a){case d("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_AUDIO:return"audio";case d("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_VIDEO:return"video";case d("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_AUDIO:return"screen_audio";case d("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_VIDEO:return"screen";default:return null}}function u(a,b){b=c("OverlayConfigServerLayer").createFromHeader(b);if(b){b={eventName:"overlayConfigServerUpdateRequest",serverLayer:b};a.push(b)}}function v(a){var b=a.header,c=a.rtcMessageBody;a=a.type;b=A(b,a);a={messageBody:c,messageHeader:b};return a}function w(a){var b=a.header,c=a.rtcMessageBody,d=a.statusCode,e=a.subCode;a=a.type;b=H(b,a,d,e);a={messageBody:c,messageHeader:b};return a}var x={IN_ANOTHER_CALL:(i=d("MultiwayCommonTypes")).DeviceStatus.IN_ANOTHER_CALL,NO_OP:null,NOT_SUPPORTED:i.DeviceStatus.NOT_SUPPORTED,OK:i.DeviceStatus.OK};function y(a,b){return Object.keys(a).map(function(c){var e=a[c];return{body:{genericMessage:{data:d("RequestStreamBodyUtils").stringToUint8Array(e),topic:c}},header:{recipients:new Set(b),topic_DEPRECATED:c}}})}function z(a){var b=a.clientSessionId,e=a.conferenceName,f=a.receiver,g=a.receiverUserId,h=a.sequenceNumber,i=a.serverInfoData,j=a.transactionId;if(g==null)throw c("err")("Incoming Thrift MW messages should have receiverUserId populated.");b=b;var k={userID:"2"};f={actorID:(f=f==null?void 0:f.actorId)!=null?f:null,messageID:j,messageTags:d("ZenonMWThriftMessageTagUtils").fromThriftMessageTags(a.messageTags),protocol:c("ZenonSignalingProtocol").MW,remoteInfo:k,retryCount:a.retryCount,roomInfo:{name:e},sequenceNumber:Number(h),signalingID:b,userInfo:{userID:g!=null?g:"1"}};i!=null&&(f.remoteSignalingID=i);return f}function A(a,b){var e,f=a.messageID,g=a.messageTags,h=a.remoteSignalingID,i=a.roomInfo,j=a.signalingID,k=c("addDevTierOverridesToHeaderExtensions")(window.location.href);e={clientStack:d("WebrtcSignalingCommonTypes").ClientStack.ZENON,conferenceName:(e=i.name)!=null?e:"",conferenceType:I((e=i.name)!=null?e:""),messageTags:new Set(g==null?void 0:g.map(function(a){return d("ZenonMWThriftMessageTagUtils").toThriftMessageTag(a)})),retryCount:a.retryCount,sequenceNumber:(i=a.sequenceNumber)==null?void 0:i.toString(),transactionId:f,type:b};(k.multiwayCoreTier!==""||k.multiwayWwwTier!=="")&&(e.extensions=k);j!=null&&(e.clientSessionId=j);h!=null&&(e.serverInfoData=h);a.actorID!=null&&(e.sender={id:a.actorID});return e}function B(a){switch(a){case d("ZenonDismissReason").ZenonDismissReason.IgnoreCall:return d("MultiwayCommonTypes").HangupReason.IGNORE_CALL;case d("ZenonDismissReason").ZenonDismissReason.HangupCall:return d("MultiwayCommonTypes").HangupReason.HANGUP_CALL;case d("ZenonDismissReason").ZenonDismissReason.NoAnswerTimeout:return d("MultiwayCommonTypes").HangupReason.NO_ANSWER_TIMEOUT;case d("ZenonDismissReason").ZenonDismissReason.ClientError:return d("MultiwayCommonTypes").HangupReason.CLIENT_ERROR;case d("ZenonDismissReason").ZenonDismissReason.InAnotherCall:return d("MultiwayCommonTypes").HangupReason.IN_ANOTHER_CALL;case d("ZenonDismissReason").ZenonDismissReason.ClientInterrupted:return d("MultiwayCommonTypes").HangupReason.CLIENT_INTERRUPTED;case d("ZenonDismissReason").ZenonDismissReason.SessionMigrated:return d("MultiwayCommonTypes").HangupReason.SESSION_MIGRATED;default:return d("MultiwayCommonTypes").HangupReason.HANGUP_CALL}}function C(a){a=(a=a.message.body)!=null?a:{};var b=a.dominantSpeakerSignalingInfo,c=a.genericMessage;a=a.videoUploadSignalingInfo;if(c)return d("RequestStreamBodyUtils").uint8ArrayToString(c.data);else if(b)return JSON.stringify(b);else if(a)return JSON.stringify(a);return null}function D(a){a=(a=a.message.body)!=null?a:{};var b=a.dominantSpeakerSignalingInfo,c=a.genericMessage;a=a.videoUploadSignalingInfo;if(c)return c.topic;else if(b)return k;else if(a)return l;return null}function E(a){if(a==null)return null;if(a===1)return d("MultiwaySharedTypes").EndpointServiceType.COMPOSITING_SERVICE;else return d("MultiwaySharedTypes").EndpointServiceType.UNKNOWN}function F(a){a=G(a);return a!=null?a:d("ZenonDismissReason").ZenonDismissReason.CallEnded}function G(a){if(a==null)return null;switch(a){case d("MultiwayCommonTypes").DismissReason.CALL_ENDED:return d("ZenonDismissReason").ZenonDismissReason.CallEnded;case d("MultiwayCommonTypes").DismissReason.ANSWERED_ON_ANOTHER_DEVICE:return d("ZenonDismissReason").ZenonDismissReason.AnsweredOnAnotherDevice;case d("MultiwayCommonTypes").DismissReason.ANSWERED_BY_OTHER_USER:return d("ZenonDismissReason").ZenonDismissReason.AnsweredByOtherUser;case d("MultiwayCommonTypes").DismissReason.IN_ANOTHER_CALL:return d("ZenonDismissReason").ZenonDismissReason.InAnotherCall;case d("MultiwayCommonTypes").DismissReason.CONNECTION_DROPPED:return d("ZenonDismissReason").ZenonDismissReason.ConnectionDropped;case d("MultiwayCommonTypes").DismissReason.PRIMARY_ENDPOINT_HANGUP:return d("ZenonDismissReason").ZenonDismissReason.HangupCall;case d("MultiwayCommonTypes").DismissReason.REJECTED_ON_ANOTHER_DEVICE:return d("ZenonDismissReason").ZenonDismissReason.RejectedOnAnotherDevice;case d("MultiwayCommonTypes").DismissReason.REMOVED_BY_PARTICIPANT:return d("ZenonDismissReason").ZenonDismissReason.RemovedByParticipant;case d("MultiwayCommonTypes").DismissReason.REJECTED_BY_CALLEE:return d("ZenonDismissReason").ZenonDismissReason.RejectedByCallee;case d("MultiwayCommonTypes").DismissReason.INTERNAL_ERROR:return d("ZenonDismissReason").ZenonDismissReason.SignalingMessageFailed;case d("MultiwayCommonTypes").DismissReason.CALL_ENDED_BY_PRODUCT:return d("ZenonDismissReason").ZenonDismissReason.CallEndedByProduct;case d("MultiwayCommonTypes").DismissReason.TX_ACK_TIMEDOUT:return d("ZenonDismissReason").ZenonDismissReason.TxAckTimeout;default:return null}}function H(a,b,c,e){a=A(a,b);a.responseStatusCode=c!=null?c:d("MultiwayCommonTypes").RtcResponseStatusCode.OK;a.responseSubCode=e;return a}function I(a){var b=a.indexOf(":");if(b===-1)return null;a=a.slice(0,b);return(b=n.get(a))!=null?b:null}function J(a){var b={},c=!d("ZenonScreenShare").screenShareWithReplaceTrack();a.tracks.forEach(function(a){var e={customAudioContentType:d("WebrtcSignalingCommonTypes").CustomAudioContentType.NONE,customVideoContentType:d("WebrtcSignalingCommonTypes").CustomVideoContentType.NONE,enabled:a.enabled},f=c?P(a.type):null;f!=null&&(e.label=f);b[a.trackID]=e});return{tracks:b}}function K(a){a=x[a];return a!=null?a:d("MultiwayCommonTypes").DeviceStatus.OK}function L(a){var b={};a.tracks.forEach(function(a){b[a.trackID]=a.enabled});return b}function M(a){return R[a]}function N(a){return a==null?null:S[a]}function O(a){var b={};a.forEach(function(a,c){b[c]={data:a.data,version:a.version}});return b}function P(a){switch(a){case"audio":return d("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_AUDIO;case"video":return d("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_VIDEO;case"screen":return d("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_VIDEO;case"screen_audio":return d("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_AUDIO;default:return null}}function Q(a){if(a===d("MultiwaySharedTypes").EndpointServiceType.COMPOSITING_SERVICE)return 1;else return 0}var R=Object.freeze((h={},h[(j=d("ZenonSignalingTypes")).ZenonSignalingStatusCode.OK]=i.RtcResponseStatusCode.OK,h[j.ZenonSignalingStatusCode.REJECTED_FROM_VERSION_DOES_NOT_MATCH]=i.RtcResponseStatusCode.CONDITIONAL_REQUEST_FAILED,h[j.ZenonSignalingStatusCode.METHOD_NOT_ALLOWED]=i.RtcResponseStatusCode.METHOD_NOT_ALLOWED,h)),S=Object.freeze((h={},h[j.ZenonSignalingStatusSubCode.CLIENT_TERMINATED]=i.RtcResponseSubCode.CLIENT_TERMINATED,h));g.addThriftStateStoreSignalingEvents=a;g.fetchE2eeServerState=b;g.fromThriftMediaPath=e;g.fromThriftParticipantState=f;g.getCollisionContextFromThriftAppMessages=o;g.getRoomMetadataFromThriftAppMessages=p;g.mwThriftAppMessagesToSignalingAppMessages=q;g.toThriftMediaPath=r;g.toZenonMediaStatesFromThrift=s;g.toMWClientTrackContentTypeFromThrift=t;g.maybeAddOverlayConfigServerUpdateRequestFromThrift=u;g.createMWThriftRequest=v;g.createMWThriftResponse=w;g.signalingMessageAppMessagesToThriftMWAppMessages=y;g.mwThriftMessageHeaderToSignalingMessageHeader=z;g.toMWThriftHangupReason=B;g.getGenericMWThriftDataMessageData=C;g.getGenericMWThriftDataMessageTopic=D;g.toThriftServiceRecipient=E;g.fromMWThriftDismissReason=F;g.getConferenceTypeFromName=I;g.toThriftMWMediaStatusEx=J;g.toMWThriftDeviceStatus=K;g.toMWThriftMediaStatus=L;g.toMWThriftResponseStatusCode=M;g.toMWThriftResponseStatusSubCode=N;g.toThriftMWSyncStateStore=O;g.toMWThriftTrackLabel=P;g.toServiceRecipientType=Q}),98);
__d("ZenonMWThriftAddParticipantsTranslator",["MultiwayCommonTypes","RequestStreamBodyUtils","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";var h="new_room_context";function a(a,b){var c={usersToInvite:new Set(b.participants)};if(b.groupThreadId!=null){b={calling_tags:2,group_thread_id:b.groupThreadId};if(b){b=[{body:{genericMessage:{data:d("RequestStreamBodyUtils").stringToUint8Array(JSON.stringify(b)),topic:h}},header:{topic_DEPRECATED:h}}];c.appMessages=b}}return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{addParticipantsRequest:c},type:d("MultiwayCommonTypes").MessageType.ADD_PARTICIPANTS})}g.NEW_ROOM_CONTEXT=h;g.toThriftAddParticipantsRequest=a}),98);
__d("ZenonMWThriftApprovalTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=b.approvalStatus;b=b.targetUsers;c={approvalStatus:c===0?d("MultiwayCommonTypes").ApprovalStatus.DENIED:d("MultiwayCommonTypes").ApprovalStatus.APPROVED,targetUsers:new Set(b)};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{approvalRequest:c},type:d("MultiwayCommonTypes").MessageType.APPROVAL})}g.toThriftApprovalRequest=a}),98);
__d("ZenonMWThriftClientEventTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b={clientEvents:[{type:b.clientEventType===0?d("MultiwayCommonTypes").ClientEventType.UNKNOWN:d("MultiwayCommonTypes").ClientEventType.MEDIA_CONNECTED}]};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{clientEventRequest:b},type:d("MultiwayCommonTypes").MessageType.CLIENT_EVENT})}g.toThriftClientEventRequest=a}),98);
__d("ZenonMWThriftResponseStatusCodeUtils",["MultiwayCommonTypes","ZenonMWMessageTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case d("MultiwayCommonTypes").RtcResponseStatusCode.OK:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.OK;case d("MultiwayCommonTypes").RtcResponseStatusCode.BAD_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.BAD_REQUEST;case d("MultiwayCommonTypes").RtcResponseStatusCode.UNAUTHORIZED:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.UNAUTHORIZED;case d("MultiwayCommonTypes").RtcResponseStatusCode.NOT_FOUND:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.NOT_FOUND;case d("MultiwayCommonTypes").RtcResponseStatusCode.METHOD_NOT_ALLOWED:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.METHOD_NOT_ALLOWED;case d("MultiwayCommonTypes").RtcResponseStatusCode.CONFLICT:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.CONFLICT;case d("MultiwayCommonTypes").RtcResponseStatusCode.CONDITIONAL_REQUEST_FAILED:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.CONDITIONAL_REQUEST_FAILED;case d("MultiwayCommonTypes").RtcResponseStatusCode.SERVER_INTERNAL_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.SERVER_INTERNAL_ERROR;case d("MultiwayCommonTypes").RtcResponseStatusCode.SERVICE_UNAVAILABLE:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.SERVICE_UNAVAILABLE}}function b(a){switch(a){case d("MultiwayCommonTypes").RtcResponseSubCode.UNKNOWN:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.UNKNOWN;case d("MultiwayCommonTypes").RtcResponseSubCode.EXCEEDED_MAX_ALLOWED_PARTICIPANTS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EXCEEDED_MAX_ALLOWED_PARTICIPANTS;case d("MultiwayCommonTypes").RtcResponseSubCode.MEMBERSHIP_CHECK_FAIL:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEMBERSHIP_CHECK_FAIL;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_THROTTLED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_THROTTLED;case d("MultiwayCommonTypes").RtcResponseSubCode.ENDPOINT_THROTTLED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.ENDPOINT_THROTTLED;case d("MultiwayCommonTypes").RtcResponseSubCode.MWS_MESSAGE_SENT_TO_INCORRECT_REGION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MWS_MESSAGE_SENT_TO_INCORRECT_REGION;case d("MultiwayCommonTypes").RtcResponseSubCode.UNSUPPORTED_REQUEST_TYPE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.UNSUPPORTED_REQUEST_TYPE;case d("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_REQUEST_UNACCEPTABLE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_REQUEST_UNACCEPTABLE;case d("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_RESPONSE_UNACCEPTABLE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_RESPONSE_UNACCEPTABLE;case d("MultiwayCommonTypes").RtcResponseSubCode.RING_RESPONSE_BODY_NOT_SET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.RING_RESPONSE_BODY_NOT_SET;case d("MultiwayCommonTypes").RtcResponseSubCode.SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_SDP:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_SDP;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_CONFERENCE_NAME:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_CONFERENCE_NAME;case d("MultiwayCommonTypes").RtcResponseSubCode.SERVER_INFO_CONFERENCE_NAME_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SERVER_INFO_CONFERENCE_NAME_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_USER_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_USER_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.INCORRECT_VERSION_RANGE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INCORRECT_VERSION_RANGE;case d("MultiwayCommonTypes").RtcResponseSubCode.SENDER_ID_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SENDER_ID_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.RECIPIENT_NOT_SPECIFIED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.RECIPIENT_NOT_SPECIFIED;case d("MultiwayCommonTypes").RtcResponseSubCode.FIELD_NOT_ALLOWED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FIELD_NOT_ALLOWED;case d("MultiwayCommonTypes").RtcResponseSubCode.USERS_NOT_SPECIFIED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.USERS_NOT_SPECIFIED;case d("MultiwayCommonTypes").RtcResponseSubCode.REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_CALL_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_CALL_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.SESSION_DESCRIPTION_ID_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SESSION_DESCRIPTION_ID_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.EMPTY_CLIENT_MEDIA_UPDATES:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EMPTY_CLIENT_MEDIA_UPDATES;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_SERVER_INFO_DATA:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_SERVER_INFO_DATA;case d("MultiwayCommonTypes").RtcResponseSubCode.INCORRECT_STATE_VERSION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INCORRECT_STATE_VERSION;case d("MultiwayCommonTypes").RtcResponseSubCode.MISMATCHED_STATE_FOR_VERSION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISMATCHED_STATE_FOR_VERSION;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_STATE_VERSION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_STATE_VERSION;case d("MultiwayCommonTypes").RtcResponseSubCode.NO_RESOLVER_FOUND:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NO_RESOLVER_FOUND;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_APPROVERLIST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_APPROVERLIST;case d("MultiwayCommonTypes").RtcResponseSubCode.FULL_SDP_REQUIRED_IN_APPROVED_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FULL_SDP_REQUIRED_IN_APPROVED_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_BROADCAST_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_BROADCAST_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_ENDPOINT_CONFIG:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_ENDPOINT_CONFIG;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_E2EE_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_E2EE_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.SFU_MODE_PREVENTED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SFU_MODE_PREVENTED;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_CONFERENCE_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_CONFERENCE_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.JOIN_REQUEST_DENIED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.JOIN_REQUEST_DENIED;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_ENDPOINT:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_ENDPOINT;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_HEADER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_HEADER;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_BODY:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_BODY;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_PARAMS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_PARAMS;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_DATA_MESSAGE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_DATA_MESSAGE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_ADD_PARTICIPANTS_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_ADD_PARTICIPANTS_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_SUBSCRIPTION_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_SUBSCRIPTION_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_JOIN_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_JOIN_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_HANGUP_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_HANGUP_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_ICE_CANDIDATE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_ICE_CANDIDATE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_P2P_MESSAGE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_P2P_MESSAGE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_UPDATE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_UPDATE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_CLIENT_EVENT_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_CLIENT_EVENT_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_CONNECT_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_CONNECT_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_UNSUBSCRIBE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_UNSUBSCRIBE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_APPROVAL_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_APPROVAL_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_ENDPOINT_USER_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_ENDPOINT_USER_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.EMPTY_ENDPOINT_USER_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EMPTY_ENDPOINT_USER_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_TRANSFER_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_TRANSFER_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_GENERIC:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_GENERIC;case d("MultiwayCommonTypes").RtcResponseSubCode.REQUESTOR_NOT_MEMBER_CONFERENCE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REQUESTOR_NOT_MEMBER_CONFERENCE;case d("MultiwayCommonTypes").RtcResponseSubCode.NOT_BROADCAST_OWNER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NOT_BROADCAST_OWNER;case d("MultiwayCommonTypes").RtcResponseSubCode.GUEST_NOT_INVITED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.GUEST_NOT_INVITED;case d("MultiwayCommonTypes").RtcResponseSubCode.GUEST_DISCONNECTED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.GUEST_DISCONNECTED;case d("MultiwayCommonTypes").RtcResponseSubCode.GUEST_INVITATION_EXPIRED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.GUEST_INVITATION_EXPIRED;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_IN_PENDING_APPROVAL_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_IN_PENDING_APPROVAL_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_MULTIWAY_PARAMS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_MULTIWAY_PARAMS;case d("MultiwayCommonTypes").RtcResponseSubCode.BROADCAST_ALREADY_STOPPED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.BROADCAST_ALREADY_STOPPED;case d("MultiwayCommonTypes").RtcResponseSubCode.FAILED_TO_GENERATE_SDP_ANSWER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_TO_GENERATE_SDP_ANSWER;case d("MultiwayCommonTypes").RtcResponseSubCode.FAILED_GENERATE_SESSION_DESCRIPTION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_GENERATE_SESSION_DESCRIPTION;case d("MultiwayCommonTypes").RtcResponseSubCode.SDP_SESSION_ID_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SDP_SESSION_ID_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_ENDPOINT_GONE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_ENDPOINT_GONE;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_ENDPOINT_ALREADY_EXISTS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_ENDPOINT_ALREADY_EXISTS;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.LEGACY_MESSENGER_SENDER_UNSET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.LEGACY_MESSENGER_SENDER_UNSET;case d("MultiwayCommonTypes").RtcResponseSubCode.FAILED_TO_SET_TRANSPORT_INFO:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_TO_SET_TRANSPORT_INFO;case d("MultiwayCommonTypes").RtcResponseSubCode.NON_PRIMARY_MULTIWAY_SERVER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NON_PRIMARY_MULTIWAY_SERVER;case d("MultiwayCommonTypes").RtcResponseSubCode.FAILED_TO_GET_REMOTE_DESCRIPTION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_TO_GET_REMOTE_DESCRIPTION;case d("MultiwayCommonTypes").RtcResponseSubCode.LOCAL_DESCRIPTION_NOT_SET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.LOCAL_DESCRIPTION_NOT_SET;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_SDP_TYPE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_SDP_TYPE;case d("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO;case d("MultiwayCommonTypes").RtcResponseSubCode.SDP_UNSET_ON_P2P_ANSWER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SDP_UNSET_ON_P2P_ANSWER;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_ICE_CANDIDATE_PAYLOAD:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_ICE_CANDIDATE_PAYLOAD;case d("MultiwayCommonTypes").RtcResponseSubCode.P2P_PROTOCOL_UNSET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.P2P_PROTOCOL_UNSET;case d("MultiwayCommonTypes").RtcResponseSubCode.CREATE_ACK_FOR_INVALID_MESSAGE_TYPE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CREATE_ACK_FOR_INVALID_MESSAGE_TYPE;case d("MultiwayCommonTypes").RtcResponseSubCode.LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_IN_SFU_MODE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_IN_SFU_MODE;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS;case d("MultiwayCommonTypes").RtcResponseSubCode.RESOLVE_STATE_API_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.RESOLVE_STATE_API_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.EXTERNAL_RESOLUTION_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EXTERNAL_RESOLUTION_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.INTERNAL_RESOLUTION_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INTERNAL_RESOLUTION_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.RESOLUTION_DISABLED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.RESOLUTION_DISABLED;case d("MultiwayCommonTypes").RtcResponseSubCode.BROADCAST_ID_MISSING:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.BROADCAST_ID_MISSING;case d("MultiwayCommonTypes").RtcResponseSubCode.SDP_UNSET_ON_P2P_OFFER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SDP_UNSET_ON_P2P_OFFER;case d("MultiwayCommonTypes").RtcResponseSubCode.LEGACY_OFFER_MISSING_REQUIRED_VALUE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.LEGACY_OFFER_MISSING_REQUIRED_VALUE;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS;case d("MultiwayCommonTypes").RtcResponseSubCode.OTHER_USER_ANSWERED_THE_CALL:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.OTHER_USER_ANSWERED_THE_CALL;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_SERVER_DESERIALIZATION_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_SERVER_DESERIALIZATION_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.REMOTE_SDP_TRACKID_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REMOTE_SDP_TRACKID_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.SIGNALING_MESSAGE_TO_CLIENT_DROPPED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SIGNALING_MESSAGE_TO_CLIENT_DROPPED;case d("MultiwayCommonTypes").RtcResponseSubCode.DATA_CHANNEL_ENDPOINT_GONE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.DATA_CHANNEL_ENDPOINT_GONE;case d("MultiwayCommonTypes").RtcResponseSubCode.DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_NOT_FOUND:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_NOT_FOUND;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_IS_TERMINATING:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_IS_TERMINATING;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_IS_TERMINATED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_IS_TERMINATED;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_NAME_EMPTY:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_NAME_EMPTY;case d("MultiwayCommonTypes").RtcResponseSubCode.NONCE_EMPTY:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NONCE_EMPTY;case d("MultiwayCommonTypes").RtcResponseSubCode.NONCE_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NONCE_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_HAS_GONE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_HAS_GONE;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_HAS_GONE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_HAS_GONE;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_SERVER_NOT_FOUND:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_SERVER_NOT_FOUND;case d("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_TERMINATED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_TERMINATED;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_INCAPABLE_RENEGOTIATION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_INCAPABLE_RENEGOTIATION;case d("MultiwayCommonTypes").RtcResponseSubCode.REJECTING_CMU_WHEN_SMU_PENDING:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REJECTING_CMU_WHEN_SMU_PENDING;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_ALREADY_IN_WAITING_ROOM:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_ALREADY_IN_WAITING_ROOM;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_NOT_IN_PENDING_APPROVAL:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_NOT_IN_PENDING_APPROVAL;case d("MultiwayCommonTypes").RtcResponseSubCode.USER_NOT_APPROVER_FOR_TARGET_USER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.USER_NOT_APPROVER_FOR_TARGET_USER;case d("MultiwayCommonTypes").RtcResponseSubCode.UNSUPPORTED_CAPABILITIES:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.UNSUPPORTED_CAPABILITIES;case d("MultiwayCommonTypes").RtcResponseSubCode.PRODUCT_SERVER_DEFINED_END_REASON:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PRODUCT_SERVER_DEFINED_END_REASON;case d("MultiwayCommonTypes").RtcResponseSubCode.WWW_KILLSWITCHED_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.WWW_KILLSWITCHED_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFLICTING_MEDIA_PATH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFLICTING_MEDIA_PATH;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFLICTING_MEDIA_STATUS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFLICTING_MEDIA_STATUS;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFLICTING_SESSION_DESCRIPTION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFLICTING_SESSION_DESCRIPTION;case d("MultiwayCommonTypes").RtcResponseSubCode.EMPTY_USER_IDS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EMPTY_USER_IDS;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_SDP_CONNECT_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_SDP_CONNECT_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.CALLER_HAS_APPEALABLE_CALLING_RESTRICTION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CALLER_HAS_APPEALABLE_CALLING_RESTRICTION;case d("MultiwayCommonTypes").RtcResponseSubCode.P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER;case d("MultiwayCommonTypes").RtcResponseSubCode.REQUEST_TIMEOUT:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REQUEST_TIMEOUT;case d("MultiwayCommonTypes").RtcResponseSubCode.TOO_MANY_MEDIA_TRACKS_IN_SDP:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.TOO_MANY_MEDIA_TRACKS_IN_SDP;case d("MultiwayCommonTypes").RtcResponseSubCode.OK:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.OK;case d("MultiwayCommonTypes").RtcResponseSubCode.ENDPOINT_INFO_RESULT_MISSING:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.ENDPOINT_INFO_RESULT_MISSING;case d("MultiwayCommonTypes").RtcResponseSubCode.INVITE_USERS_RESULT_MISSING:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVITE_USERS_RESULT_MISSING;case d("MultiwayCommonTypes").RtcResponseSubCode.JOIN_SESSION_RESULT_MISSING:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.JOIN_SESSION_RESULT_MISSING;case d("MultiwayCommonTypes").RtcResponseSubCode.LOGGING_POLICY_RESULT_MISSING:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.LOGGING_POLICY_RESULT_MISSING;case d("MultiwayCommonTypes").RtcResponseSubCode.STATE_SYNC_RESULT_MISSING:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.STATE_SYNC_RESULT_MISSING;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_NAME_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_NAME_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.SESSION_CONFIGURATION_RESULT_MISSING:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SESSION_CONFIGURATION_RESULT_MISSING;case d("MultiwayCommonTypes").RtcResponseSubCode.UNEXPECTED_TRANSPORT_PARAMS_CONFERENCE_NAME:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.UNEXPECTED_TRANSPORT_PARAMS_CONFERENCE_NAME}}g.getResponseStatusCodeFromThrift=a;g.getResponseSubCodeFromThrift=b}),98);
__d("ZenonMWThriftClientMediaUpdateTranslator",["MultiwayCommonTypes","ZenonMWCommonUtils","ZenonMWThriftResponseStatusCodeUtils","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[],c=a.messageBody;a=a.messageHeader;c=c.clientMediaUpdateResponse;var e=a.responseStatusCode,f=a.responseSubCode,g=a.retryAfterMsec;if(c){var h=c.answer,i=c.mediaStatus,j=h!=null&&i!=null;d("ZenonMWThriftTranslatorUtils").addThriftStateStoreSignalingEvents(c.stateStore,b,!1,j);var k=d("ZenonMWThriftTranslatorUtils").fetchE2eeServerState(c.stateStore);if(j){h=(j=h==null?void 0:h.sdpString)!=null?j:"";j=d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(i);i={ackMessageId:a.transactionId,eventName:"localSdpResponse",hasAnswerInJoinResponse:!1,source:"clientMediaUpdate"};var l=c.renegotiationOffer,m=null;l!=null&&l.sdpString!=null&&(m={sdp:l.sdpString,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(l.sdpString)});l={e2eeServerState:k,eventName:"remoteSdpRequest",mediaPath:d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(c.mediaPath),mediaStates:j,negotiateType:!1,renegotiationOffer:m,sdp:{sdp:h,type:"answer",version:d("ZenonMWCommonUtils").getSdpVersion(h)},sdpOriginLocalId:c.sdpOriginLocalId,source:"clientMediaUpdateResponse"};b.push(i);b.push(l)}k={ackMessageId:a.transactionId,acknowledgedVersion:Number(c.currentVersion),eventName:"mediaUpdateResponse",retryAfter:g!=null?g:0};e!=null&&(k.responseStatusCode=d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(e));f!=null&&(k.responseSubCode=d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(f));b.push(k)}return b}function b(a,b,c){b={fromVersion:String(b.version),mediaUpdates:[{mediaStatus:d("ZenonMWThriftTranslatorUtils").toMWThriftMediaStatus(b),mediaStatusEx:d("ZenonMWThriftTranslatorUtils").toThriftMWMediaStatusEx(b)}],toVersion:String(b.version)};c!==void 0&&(b.offer={sdpString:c.sdp});return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{clientMediaUpdateRequest:b},type:d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE})}g.fromThriftClientMediaUpdateResponse=a;g.toThriftClientMediaUpdateRequest=b}),98);
__d("ZenonMWThriftConferenceStateTranslator",["MultiwayCommonTypes","RequestStreamBodyUtils","ZenonMWMessageTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[],c=a.messageBody.conferenceStateRequest;if(c){var e=c.appMessages,f=c.participantStates,g={eventName:"participantUpdateRequest",participantStates:new Map(),sctpUserIdNodeIdMap:new Map(),versionId:+c.version},h={actorRepresentatives:new Map(),eventName:"clientInfoRequest",mediaPath:d("ZenonMWMessageTypes").ZenonMWMediaPath.UNKNOWN,userCapabilities:new Map()};Object.keys(f).forEach(function(a){var b=f[a],c=b.sctpNodeId,e=b.state;b=b.userCapabilities;g.participantStates.set(a,d("ZenonMWThriftTranslatorUtils").fromThriftParticipantState(e));c!=null&&g.sctpUserIdNodeIdMap.set(a,+c);h.userCapabilities.set(a,b?d("RequestStreamBodyUtils").uint8ArrayToString(b):"")});b.push(g);b.push(h);c=d("ZenonMWThriftTranslatorUtils").getCollisionContextFromThriftAppMessages(e);if(c){c.serverInfoData=a.messageHeader.serverInfoData;e={context:c,eventName:"roomContextUpdateRequest"};b.push(e)}}return b}function b(a,b){b={currentVersion:String(b.requestVersionId)};return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{conferenceStateResponse:b},type:d("MultiwayCommonTypes").MessageType.CONFERENCE_STATE})}g.fromThriftConferenceStateRequest=a;g.toThriftConferenceStateResponse=b}),98);
__d("ZenonMWThriftDataMessageTranslator",["MultiwayCommonTypes","RequestStreamBodyUtils","ZenonActorHooks","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageBody.dataMessageRequest;if(a){var c=a.message.header,e=d("ZenonMWThriftTranslatorUtils").getGenericMWThriftDataMessageData(a);a=d("ZenonMWThriftTranslatorUtils").getGenericMWThriftDataMessageTopic(a);var f=h(c.serviceRecipients);if(e!=null&&a!=null){c={data:e,eventName:"genericDataMessageRequest",recipientIDs:Array.from((e=c.recipients)!=null?e:[]),serviceRecipients:f,topic:a};b.push(c)}}return b}function b(a,b){var c={data:d("RequestStreamBodyUtils").stringToUint8Array(b.data),topic:b.topic},e=new Set(b.serviceRecipients.map(d("ZenonMWThriftTranslatorUtils").toThriftServiceRecipient));return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{dataMessageRequest:{message:{body:{genericMessage:c},header:{recipients:new Set(b.recipientIDs),sender:d("ZenonActorHooks").ZenonActor.getID(),serviceRecipients:e,topic_DEPRECATED:""}}}},type:d("MultiwayCommonTypes").MessageType.DATA_MESSAGE})}function c(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{dataMessageResponse:{deliveryResult:{}}},type:d("MultiwayCommonTypes").MessageType.DATA_MESSAGE})}function h(a){var b=[];a==null||a.forEach(function(a){return b.push(d("ZenonMWThriftTranslatorUtils").toServiceRecipientType(a))});return b}g.fromThriftDataMessageRequest=a;g.toThriftDataMessageRequest=b;g.toThriftDataMessageResponse=c}),98);
__d("ZenonMWThriftDismissTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageBody.dismissRequest;if(a){var c=a.detailedReasonString;a=a.reason;a={eventName:"terminateRequest",fromJoinResponse:!1,reason:d("ZenonMWThriftTranslatorUtils").fromMWThriftDismissReason(a),shouldInformPeer:!0,subreason:c};b.push(a)}return b}function b(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{},type:d("MultiwayCommonTypes").MessageType.DISMISS})}g.fromThriftDismissRequest=a;g.toThriftDismissResponse=b}),98);
__d("ZenonMWThriftHangupTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageHeader;a={ackMessageId:a.transactionId,eventName:"hangupResponse"};b.push(a);return b}function b(a,b){b=b.reason;b={detailedReasonString:"",reason:d("ZenonMWThriftTranslatorUtils").toMWThriftHangupReason(b)};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{hangupRequest:b},type:d("MultiwayCommonTypes").MessageType.HANGUP})}g.fromThriftHangupResponse=a;g.toThriftHangupRequest=b}),98);
__d("ZenonMWThriftIceCandidateTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageBody.iceCandidateRequest;if(a){a={eventName:"iceCandidateRequest",iceCandidates:a.iceCandidateSdps.map(function(a){var b;return{candidateSdpString:(b=a.candidateSdpString)!=null?b:"",sdpMid:a.sdpMid,sdpMLineIndex:parseInt(a.sdpMLineIndex,10)}})};b.push(a)}return b}function b(a){var b=[];a=a.messageHeader;a={ackMessageId:a.transactionId,eventName:"iceCandidateResponse"};b.push(a);return b}function c(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{},type:d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE})}function e(a,b){b=b.iceCandidates;b=b.map(function(a){return{candidateSdpString:a.candidateSdpString,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex.toString()}});b={iceCandidateSdps:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{iceCandidateRequest:b},type:d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE})}g.fromThriftIceCandidateRequest=a;g.fromThriftIceCandidateResponse=b;g.toThriftIceCandidateResponse=c;g.toThriftIceCandidateRequest=e}),98);
__d("ZenonMWThriftJoinTranslator",["MultiwayCommonTypes","MultiwaySharedTypes","RequestStreamBodyUtils","RoboticsPermission","ZenonAuditedCheckpointLogId","ZenonBrowsers","ZenonDismissReason","ZenonInfraActionsLogger","ZenonJoiningContext","ZenonMWCommonUtils","ZenonMWJoinUtils","ZenonMWThriftTranslatorUtils","ZenonScreenShare","gkx","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[],e=a.messageHeader,f=e.responseStatusCode,g=e.responseSubCode;if(f&&f!==d("MultiwayCommonTypes").RtcResponseStatusCode.OK){var i;g="JOIN response status code: "+String(f)+" subcode "+String(g!=null?g:"[undefined]");c("ZenonInfraActionsLogger").logError({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,callType:"mw",checkpoint:"[ZP] Got non-OK "+g,errorDomain:"ZenonMWThriftMessageTranslator.fromThriftJoinResponse"});i={detailedReasonFromMW:(i=e.responseStatusMessage)!=null?i:"",eventName:"terminateRequest",fromJoinResponse:!0,reason:h(f,e.responseSubCode),shouldInformPeer:!1,subreason:g};b.push(i);return b}f=a.messageBody.joinResponse;if(!f)return b;a=(i=(g=f.answer)==null?void 0:g.sdpString)!=null?i:"";g=a!=="";d("ZenonMWThriftTranslatorUtils").addThriftStateStoreSignalingEvents(f.stateStore,b,!1,g);d("ZenonMWThriftTranslatorUtils").maybeAddOverlayConfigServerUpdateRequestFromThrift(b,e);i=d("ZenonMWThriftTranslatorUtils").fetchE2eeServerState(f.stateStore);e={ackMessageId:e.transactionId,eventName:"localSdpResponse",hasAnswerInJoinResponse:g,source:"joinResponse"};b.push(e);if(g){e={sdp:a,type:"answer",version:d("ZenonMWCommonUtils").getSdpVersion(a)};g=d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(f.mediaStatusEx);a=f.renegotiationOffer;var j=null;a!=null&&a.sdpString!=null&&(j={sdp:a.sdpString,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(a.sdpString)});a={e2eeServerState:i,eventName:"remoteSdpRequest",mediaPath:d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(f.mediaPath),mediaStates:g,negotiateType:!1,renegotiationOffer:j,sdp:e,sdpOriginLocalId:f.sdpOriginLocalId,source:"joinResponse"};b.push(a)}i={capabilities:{addParticipantEnabled:!0,cowatchEnabled:!0,cowatchGroupEnabled:!0,multipleVideoStreamsAllowed:f.multipleVideoStreamsAllowed},eventName:"capabilitiesRequest"};b.push(i);if(f.isPendingApproval){g={eventName:"pendingApprovalRequest"};b.push(g)}j=f.groupsOfUsers;var k=new Map();j.forEach(function(a){var b=a.aliasId;a=a.users;b!=null&&a.forEach(function(a){k.set(a,b)})});e={actorRepresentatives:k,eventName:"clientInfoRequest",mediaPath:d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(f.mediaPath),userCapabilities:new Map()};b.push(e);return b}function b(a,b,e,f){var g=b.initialSyncStates,h=b.isSecondaryJoinRole,j=b.userCapabilities;j={clientMediaMode:e.mediaMode==="p2p"?d("MultiwaySharedTypes").MediaPath.P2P:d("MultiwaySharedTypes").MediaPath.SFU,deviceCapabilities:new Set([d("MultiwayCommonTypes").Capability.SUPPORT_NEW_PARTICIPANT_STATES,d("MultiwayCommonTypes").Capability.REQUIRE_FULL_SDP_IN_SMU,d("MultiwayCommonTypes").Capability.SUPPORT_SDP_RENEGOTIATION,d("MultiwayCommonTypes").Capability.REQUIRE_FULL_SDP_IN_SMU_OPTIMIZED].concat(c("gkx")("16526")?[d("MultiwayCommonTypes").Capability.SUPPORT_DELTA_SMU]:[],d("ZenonBrowsers").supportsPranswer()?[d("MultiwayCommonTypes").Capability.SUPPORT_PRECONNECT]:[])),mediaStatus:d("ZenonMWThriftTranslatorUtils").toMWThriftMediaStatus(e.mediaStates),mediaStatusEx:d("ZenonMWThriftTranslatorUtils").toThriftMWMediaStatusEx(e.mediaStates),offer:{},syncPayload:g?{stateStore:d("ZenonMWThriftTranslatorUtils").toThriftMWSyncStateStore(g),stateStoreV2:{}}:void 0,userCapabilities:d("RequestStreamBodyUtils").stringToUint8Array((g=j.get(a.userInfo.userID))!=null?g:"")};h!=null&&(j.endpointSettings={joinMode:h?d("MultiwayCommonTypes").JoinMode.SECONDARY:d("MultiwayCommonTypes").JoinMode.PRIMARY});g=b.isE2eeMandated===!0;j.e2eeEnforcement={infraMandatedExpStatus:b.e2eeInfraMandatedExpStatus,mode:g?d("MultiwaySharedTypes").E2eeMode.E2EE_MANDATED:d("MultiwaySharedTypes").E2eeMode.E2EE_NOT_MANDATED,p2pSFrameExpStatus:d("MultiwaySharedTypes").P2PSFrameExpStatus.NOT_SET,preventSfuMode:!1};e.sdp.type==="offer"&&(j.offer={sdpString:e.sdp.sdp});d("ZenonMWJoinUtils").canUseMwpp(e.sdp.type)&&(j.deviceCapabilities.add(d("MultiwayCommonTypes").Capability.SUPPORT_MWPP),e.sdp.type==="answer"&&(j.answer={sdpString:e.sdp.sdp}),d("ZenonMWJoinUtils").canDeescalate()&&j.deviceCapabilities.add(d("MultiwayCommonTypes").Capability.SUPPORT_MWPP_DEESCALATION));(!d("ZenonScreenShare").screenShareWithReplaceTrack()||c("RoboticsPermission").is_authorized_robot)&&j.deviceCapabilities.add(d("MultiwayCommonTypes").Capability.SUPPORT_MULTIPLE_VIDEO_STREAMS);h=f==null?void 0:f.otherParticipants;h&&(j.usersToCall=new Set(h));b=[];e=(e=f==null?void 0:f.roomInfo.context)!=null?e:a.roomInfo.context;if(e!=null){var k=d("ZenonJoiningContext").convertCollisionToJoiningContext(e);g&&(k.calling_tags=2);b=[].concat(b,[{body:{genericMessage:{data:d("RequestStreamBodyUtils").stringToUint8Array(JSON.stringify(k)),topic:d("ZenonJoiningContext").JOINING_CONTEXT_TOPIC}},header:{topic_DEPRECATED:d("ZenonJoiningContext").JOINING_CONTEXT_TOPIC}}])}(f==null?void 0:f.appMessages)!=null&&(b=[].concat(b,d("ZenonMWThriftTranslatorUtils").signalingMessageAppMessagesToThriftMWAppMessages(f.appMessages,h)));j.appMessages=b;g=d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{joinRequest:j},type:d("MultiwayCommonTypes").MessageType.JOIN});e&&e.serverInfoData!=null&&(g.messageHeader.serverInfoData=e.serverInfoData);i(e,g.messageHeader)&&(g.messageHeader.conferenceType=d("MultiwaySharedTypes").ConferenceType.ROOM);return g}function h(a,b){if(b===d("MultiwayCommonTypes").RtcResponseSubCode.EXCEEDED_MAX_ALLOWED_PARTICIPANTS)return d("ZenonDismissReason").ZenonDismissReason.MaxAllowedParticipantsReached;if(b===d("MultiwayCommonTypes").RtcResponseSubCode.PRODUCT_SERVER_DEFINED_END_REASON)return d("ZenonDismissReason").ZenonDismissReason.ProductServerDefinedEndReason;if(b===d("MultiwayCommonTypes").RtcResponseSubCode.CALLER_HAS_APPEALABLE_CALLING_RESTRICTION)return d("ZenonDismissReason").ZenonDismissReason.CallerHasAppealableCallingRestriction;switch(a){case d("MultiwayCommonTypes").RtcResponseStatusCode.METHOD_NOT_ALLOWED:case d("MultiwayCommonTypes").RtcResponseStatusCode.UNAUTHORIZED:return d("ZenonDismissReason").ZenonDismissReason.NoPermission;case d("MultiwayCommonTypes").RtcResponseStatusCode.SERVICE_UNAVAILABLE:return d("ZenonDismissReason").ZenonDismissReason.SignalingMessageFailed;case d("MultiwayCommonTypes").RtcResponseStatusCode.OK:throw c("unrecoverableViolation")("Response status code is OK; should not return a dismiss reason","rtc_www");default:c("ZenonInfraActionsLogger").logError({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,callType:"mw",error:"[ZP] Got unexpected JOIN response status: "+String(a)+" subcode "+String(b!=null?b:"[undefined]"),errorDomain:"fromMWThriftJoinResponseStatusToDismissReason"});return d("ZenonDismissReason").ZenonDismissReason.UnexpectedEndOfCall}}function i(a,b){return((a==null?void 0:a.peerID)!=null||(a==null?void 0:a.groupThreadID)!=null)&&b.conferenceName===""}g.fromThriftJoinResponse=a;g.toThriftJoinRequest=b}),98);
__d("ZenonMWThriftMessageMap",["MultiwayCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)return"UNKNOWN";switch(a){case d("MultiwayCommonTypes").MessageType.JOIN:return"JOIN";case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:return"SERVER_MEDIA_UPDATE";case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:return"ICE_CANDIDATE";case d("MultiwayCommonTypes").MessageType.HANGUP:return"HANGUP";case d("MultiwayCommonTypes").MessageType.RING:return"RING";case d("MultiwayCommonTypes").MessageType.DISMISS:return"DISMISS";case d("MultiwayCommonTypes").MessageType.CONFERENCE_STATE:return"CONFERENCE_STATE";case d("MultiwayCommonTypes").MessageType.ADD_PARTICIPANTS:return"ADD_PARTICIPANTS";case d("MultiwayCommonTypes").MessageType.SUBSCRIPTION:return"SUBSCRIPTION";case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:return"CLIENT_MEDIA_UPDATE";case d("MultiwayCommonTypes").MessageType.DATA_MESSAGE:return"DATA_MESSAGE";case d("MultiwayCommonTypes").MessageType.REMOVE_PARTICIPANTS:return"REMOVE_PARTICIPANTS";case d("MultiwayCommonTypes").MessageType.PING:return"PING";case d("MultiwayCommonTypes").MessageType.NOTIFY:return"NOTIFY";case d("MultiwayCommonTypes").MessageType.CONNECT:return"CONNECT";case d("MultiwayCommonTypes").MessageType.CLIENT_EVENT:return"CLIENT_EVENT";case d("MultiwayCommonTypes").MessageType.UNSUBSCRIBE:return"UNSUBSCRIBE";case d("MultiwayCommonTypes").MessageType.UPDATE:return"UPDATE";case d("MultiwayCommonTypes").MessageType.APPROVAL:return"APPROVAL";case d("MultiwayCommonTypes").MessageType.WAKEUP:return"WAKEUP";default:return"UNKNOWN"}}function b(a){switch(a.toLowerCase()){case"join":return d("MultiwayCommonTypes").MessageType.JOIN;case"server_media_update":return d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE;case"ice_candidate":return d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE;case"hangup":return d("MultiwayCommonTypes").MessageType.HANGUP;case"ring":return d("MultiwayCommonTypes").MessageType.RING;case"dismiss":return d("MultiwayCommonTypes").MessageType.DISMISS;case"conference_state":return d("MultiwayCommonTypes").MessageType.CONFERENCE_STATE;case"add_participants":return d("MultiwayCommonTypes").MessageType.ADD_PARTICIPANTS;case"subscription":return d("MultiwayCommonTypes").MessageType.SUBSCRIPTION;case"client_media_update":return d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE;case"data_message":return d("MultiwayCommonTypes").MessageType.DATA_MESSAGE;case"remove_participants":return d("MultiwayCommonTypes").MessageType.REMOVE_PARTICIPANTS;case"ping":return d("MultiwayCommonTypes").MessageType.PING;case"notify":return d("MultiwayCommonTypes").MessageType.NOTIFY;case"connect":return d("MultiwayCommonTypes").MessageType.CONNECT;case"client_event":return d("MultiwayCommonTypes").MessageType.CLIENT_EVENT;case"unsubscribe":return d("MultiwayCommonTypes").MessageType.UNSUBSCRIBE;case"update":return d("MultiwayCommonTypes").MessageType.UPDATE;case"approval":return d("MultiwayCommonTypes").MessageType.APPROVAL;case"wakeup":return d("MultiwayCommonTypes").MessageType.WAKEUP;default:return null}}g.messageTypeToString=a;g.messageTypeFromString=b}),98);
__d("ZenonMWThriftMessageDebugLogger",["Log","LogHistory","MultiwayCommonTypes","ODS","RequestStreamBodyUtils","RpWebStateMachineLoggingBlocklist","ZenonAuditedCheckpointLogId","ZenonIceStatsParser","ZenonInfraActionsLogger","ZenonMWThriftMessageMap","ZenonMWThriftTranslatorUtils","formatDate","isEmployeeTestUserZenonLogging"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(){this.$1=d("LogHistory").getInstance("webrtc"),this.$2=new Set(c("RpWebStateMachineLoggingBlocklist").MESSAGE_TYPES)}var b=a.prototype;b.$3=function(a,b,d){b===void 0&&(b=!0);var e=c("formatDate")(new Date(),"[H:i:s:X]",{skipPatternLocalization:!0});this.$1.log("Console",e+" "+a);b&&c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] "+a,messageID:d})};b.$4=function(a){a=a.messageHeader.responseStatusCode;return a!=null};b.logMWThriftMessage=function(a,b,e){this.$5(a,b,e);if(!c("isEmployeeTestUserZenonLogging")())return;var f=e.messageHeader,g=d("ZenonMWThriftMessageMap").messageTypeToString(e.messageHeader.type),h=this.$4(e)?"RESPONSE":"REQUEST";e=this.$6(e);a="[ms] "+a+" ["+b+"] "+g+" "+h+" [retryCount: "+f.retryCount+(e!=null?" details: "+e:"")+"]";this.$2.has(g)||this.$3(a,!0,f.transactionId)};b.$5=function(a,b,c){a=this.$7(a,b,c);a!==null&&(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_signaling",a)};b.$7=function(a,b,c){var e=c.messageBody,f=c.messageHeader,g="";if(f.type!=null)switch(f.type){case d("MultiwayCommonTypes").MessageType.DATA_MESSAGE:if(e.dataMessageRequest){g=(e=d("ZenonMWThriftTranslatorUtils").getGenericMWThriftDataMessageTopic(e.dataMessageRequest))!=null?e:"undefined"}break;default:break}e=this.$4(c)?"RESPONSE":"REQUEST";c=d("ZenonMWThriftMessageMap").messageTypeToString(f.type);if(g==="")return a+"-"+b+"-"+c+"-"+e;else return a+"-"+b+"-"+c+"-"+e+"-"+g};b.$6=function(a){var b=a.messageHeader;if(d("MultiwayCommonTypes").MessageType==null||b.type==null)return null;switch(b.type){case d("MultiwayCommonTypes").MessageType.JOIN:return this.$8(a);case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:return this.$9(a);case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:return this.$10(a);case d("MultiwayCommonTypes").MessageType.SUBSCRIPTION:return this.$11(a);case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:return this.$12(a);default:return null}};b.$8=function(a){var b=a.messageBody,c=a.messageHeader;if(this.$4(a)){return JSON.stringify({hasAnswer:((a=b.joinResponse)==null?void 0:a.answer)!=null,hasRenegotiationOffer:((a=b.joinResponse)==null?void 0:a.renegotiationOffer)!=null,isPendingApproval:(a=b.joinResponse)==null?void 0:a.isPendingApproval,multipleVideoStreamsAllowed:(a=b.joinResponse)==null?void 0:a.multipleVideoStreamsAllowed,statusCode:c.responseStatusCode,subCode:c.responseSubCode})}return JSON.stringify({deviceCapabilities:(a=b.joinRequest)==null?void 0:a.deviceCapabilities,sdpType:((c=b.joinRequest)==null?void 0:c.offer)!=null?"offer":((a=b.joinRequest)==null?void 0:a.answer)!=null?"answer":"null",userCapabilities:(c=b.joinRequest)!=null&&c.userCapabilities?d("RequestStreamBodyUtils").uint8ArrayToString(b.joinRequest.userCapabilities):""})};b.$9=function(a){var b=a.messageBody,c=a.messageHeader;if(this.$4(a)){return JSON.stringify({currentVersion:(a=b.serverMediaUpdateResponse)==null?void 0:a.currentVersion,hasAnswer:((a=b.serverMediaUpdateResponse)==null?void 0:a.answer)!=null,statusCode:c.responseStatusCode,subCode:c.responseSubCode})}return JSON.stringify({fromVersion:(a=b.serverMediaUpdateRequest)==null?void 0:a.fromVersion,messageTags:c.messageTags,renegotiationRequested:(c=(a=b.serverMediaUpdateRequest)==null?void 0:a.renegotiationRequested)!=null?c:!1,sdpType:(a=b.serverMediaUpdateRequest)!=null&&a.offer?"offer":(c=b.serverMediaUpdateRequest)!=null&&c.answer?"answer":(a=b.serverMediaUpdateRequest)!=null&&a.update?"delta":"empty",toVersion:(a=(c=b.serverMediaUpdateRequest)==null?void 0:c.toVersion)!=null?a:""})};b.$10=function(a){var b=a.messageBody,c=a.messageHeader;if(this.$4(a)){return JSON.stringify({currentVersion:(a=(a=b.clientMediaUpdateResponse)==null?void 0:a.currentVersion)!=null?a:"",statusCode:c.responseStatusCode,subCode:c.responseSubCode})}return JSON.stringify({fromVersion:(c=(a=b.clientMediaUpdateRequest)==null?void 0:a.fromVersion)!=null?c:"",toVersion:(c=(a=b.clientMediaUpdateRequest)==null?void 0:a.toVersion)!=null?c:""})};b.$11=function(a){var b=a.messageBody;return this.$4(a)?null:JSON.stringify({subscriptions:(b=(a=b.subscriptionRequest)==null?void 0:a.subscriptions)!=null?b:""})};b.$12=function(a){var b=a.messageBody;if(this.$4(a))return null;b=(a=b.iceCandidateRequest)==null?void 0:a.iceCandidateSdps.map(function(a){a=a.candidateSdpString;if(a!=null)return d("ZenonIceStatsParser").extractIceInfo(a)});return JSON.stringify({iceCandidates:b})};b.logSendMultiwayThriftMessageFailure=function(a,b,e){(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","send_message_failure");h.flush();e=e?"Stack Trace: "+e.stack+".":"Error msg: "+a;c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"Failed to send MW Thrift message of type "+b+". "+e})};return a}();b=new a();g["default"]=b}),98);
__d("ZenonMWThriftMessageLogger",["MultiwayCommonTypes","ZenonLoggingEventTypes"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set(),i=new Set();function a(a,b){var c=a.messageHeader;a=a.messageBody;if(h.has(c.transactionId)||c.type==null)return;switch(c.type){case d("MultiwayCommonTypes").MessageType.JOIN:a.joinRequest&&j(a.joinRequest,b);break;case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:a.iceCandidateRequest&&l(a.iceCandidateRequest,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send);break;case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:a.clientMediaUpdateRequest&&m(a.clientMediaUpdateRequest,b);break;case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:a.serverMediaUpdateResponse&&p(a.serverMediaUpdateResponse,b);break;default:break}h.add(c.transactionId)}function b(a,b){var c=a.messageHeader;a=a.messageBody;if(i.has(c.transactionId)||c.type==null)return;switch(c.type){case d("MultiwayCommonTypes").MessageType.JOIN:a.joinResponse&&k(a.joinResponse,b);break;case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:a.iceCandidateRequest&&l(a.iceCandidateRequest,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive);break;case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:a.clientMediaUpdateResponse&&n(a.clientMediaUpdateResponse,b);break;case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:a.serverMediaUpdateRequest&&o(a.serverMediaUpdateRequest,b);break;default:break}i.add(c.transactionId)}function j(a,b){var c=a.answer;a=a.offer;b({name:"inviteSent"});q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send);c&&q(c,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function k(a,b){a=a.answer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function l(a,b,c){a=a.iceCandidateSdps;a.forEach(function(a){a.candidateSdpString!=null&&b({direction:c,name:"updateIceInfo",sdpString:a.candidateSdpString})})}function m(a,b){a=a.offer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function n(a,b){a=a.answer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function o(a,b){var c=a.answer;a=a.offer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive);c&&q(c,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function p(a,b){a=a.answer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function q(a,b,c){a.sdpString!=null&&b({direction:c,name:"updateIceInfo",sdpString:a.sdpString})}g.logSentMessage=a;g.logReceivedMessage=b}),98);
__d("ZenonTransportChannelStatus",["cr:17347"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:17347")}),98);
__d("ZenonMWThriftMessageQPLLogger",["DateConsts","QPLMsgTypesSitevarConfig","QPLUserFlow","ZenonLoggingUtils","ZenonMWMessageReliabilityLogTypes","ZenonMWThriftMessageMap","ZenonMWThriftMessageTagUtils","ZenonMWThriftResponseStatusCodeUtils","ZenonTransportChannelStatus","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=30*d("DateConsts").MS_PER_SEC,i=new Map(),j=new(c("ZenonTransportChannelStatus"))();function a(a,b,e){if(!d("ZenonLoggingUtils").shouldAllowLogging())return;var f=a.messageHeader,g=d("ZenonMWThriftMessageMap").messageTypeToString(a.messageHeader.type).toLowerCase();if(!c("QPLMsgTypesSitevarConfig").QPL_MSG_TYPES.includes(g))return;f=k(f.transactionId);switch(b){case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_REQUEST:l(f,g,{connectionState:(b=e==null?void 0:e.connectionState)!=null?b:"",peerConnectionState:(b=e==null?void 0:e.peerConnectionState)!=null?b:"",signalingState:(b=e==null?void 0:e.signalingState)!=null?b:""},a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_REQUEST:m(f);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_RESPONSE:n(f,a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_RESPONSE:o(f,a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_RESPONSE_FAILED:p(f,a,e==null?void 0:e.errorMessage);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_REQUEST:q(f,g,{connectionState:(b=e==null?void 0:e.connectionState)!=null?b:"",peerConnectionState:(g=e==null?void 0:e.peerConnectionState)!=null?g:"",signalingState:(b=e==null?void 0:e.signalingState)!=null?b:""},a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_REQUEST:r(f);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_REQUEST_FAILED:s(f,e==null?void 0:e.errorMessage);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_RESPONSE:t(f,a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_SM_EVENT:u(f,e==null?void 0:e.smEvent);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_SM_EVENT:v(f,e==null?void 0:e.smEvent);return;default:return}}function b(a,b){if(!d("ZenonLoggingUtils").shouldAllowLogging())return;c("QPLUserFlow").addAnnotations(c("qpl")._(398988976,"737"),{string:babelHelpers["extends"]({},b)},{instanceKey:+a})}function k(a){a=isNaN(+a)?0:+a;var b=9223372036854776e3;return Math.round(a%b)}function l(a,b,e,f){var g=j.getTransportName()+"State";e=babelHelpers["extends"]({},e,{messageType:b});e[g]=j.getConnectionState();c("QPLUserFlow").start(c("qpl")._(398988976,"737"),{annotations:{"int":{retryCount:f.messageHeader.retryCount},int_array:{messageTags:d("ZenonMWThriftMessageTagUtils").fromThriftMessageTags(f.messageHeader.messageTags)},string:e},instanceKey:a,timeoutInMs:h});if(f.messageBody.serverMediaUpdateRequest){b=f.messageBody.serverMediaUpdateRequest;g=b.answer;e=b.offer;f=b.update;c("QPLUserFlow").addAnnotations(c("qpl")._(398988976,"737"),{string:{sdpType:e?"offer":g?"answer":f?"delta":"empty"}},{instanceKey:a})}b=function(b){c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),j.getTransportName()+"_"+b,{instanceKey:a})};e=j.addListener("connectionStateEvent",b);i.set(a,e);return}function m(a){c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"processed_request",{instanceKey:a})}function n(a,b){b=b.messageHeader;var e=b.responseStatusCode;b=b.responseSubCode;c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"sending_response",{instanceKey:a});c("QPLUserFlow").addAnnotations(c("qpl")._(398988976,"737"),{"int":{responseStatusCode:e?d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(e):200,responseSubCode:b?d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(b):9e3}},{instanceKey:a})}function o(a,b){b=b.messageHeader;var e=b.responseStatusCode;b=b.responseSubCode;c("QPLUserFlow").endSuccess(c("qpl")._(398988976,"737"),{annotations:{"int":{responseStatusCode:e?d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(e):200,responseSubCode:b?d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(b):9e3}},instanceKey:a});e=i.get(a);e&&(j.removeListener(e),i["delete"](a))}function p(a,b,e){b=b.messageHeader;var f=b.responseStatusCode;b=b.responseSubCode;c("QPLUserFlow").endFailure(c("qpl")._(398988976,"737"),"send_response_failed",{annotations:{"int":{responseStatusCode:f?d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(f):200,responseSubCode:b?d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(b):9e3},string:{errorMessage:e}},instanceKey:a});f=i.get(a);f&&(j.removeListener(f),i["delete"](a))}function q(a,b,e,f){var g=j.getTransportName()+"State";e=babelHelpers["extends"]({},e,{messageType:b});e[g]=j.getConnectionState();c("QPLUserFlow").start(c("qpl")._(398988976,"737"),{annotations:{"int":{retryCount:f.messageHeader.retryCount},int_array:{messageTags:d("ZenonMWThriftMessageTagUtils").fromThriftMessageTags(f.messageHeader.messageTags)},string:e},instanceKey:a,timeoutInMs:h})}function r(a){c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"sending_request",{instanceKey:a})}function s(a,b){c("QPLUserFlow").endFailure(c("qpl")._(398988976,"737"),"send_request_failed",{annotations:{string:{errorMessage:b}},instanceKey:a})}function t(a,b){b=b.messageHeader;var e=b.responseStatusCode;b=b.responseSubCode;c("QPLUserFlow").endSuccess(c("qpl")._(398988976,"737"),{annotations:{"int":{responseStatusCode:e?d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(e):200,responseSubCode:b?d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(b):9e3}},instanceKey:a})}function u(a,b){b!=null&&c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"sent_sm_event:"+b,{instanceKey:a})}function v(a,b){b!=null&&c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"processed_sm_event:"+b,{instanceKey:a})}g.log=a;g.updateState=b}),98);
__d("ZenonMWThriftMessageReliabilityLogger",["ODS","ZenonMWMessageReliabilityLogTypes","ZenonMWThriftMessageMap","ZenonMWThriftMessageQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map(),j=new Map(),k=new Map();function a(a){k.set(a,!0)}function b(a,b,c){a=j.get(a);if(!a)return;u(a,b,c)}function c(a){q(a)?u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_RESPONSE):u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_REQUEST)}function e(a){q(a)?u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSING_RESPONSE):u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSING_REQUEST)}function f(a){q(a)||u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_NULL_CHECK)}function l(a){q(a)||u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_TRANSLATION)}function m(a){q(a)?u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_RESPONSE):u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_REQUEST)}function n(a){q(a)?u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_RESPONSE):u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_REQUEST)}function o(a){q(a)?u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_RESPONSE):u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_REQUEST)}function p(a,b){var c=q(a)?d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_RESPONSE_FAILED:d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_REQUEST_FAILED;u(a,c,{errorMessage:b})}function q(a){a=a.messageHeader.responseStatusCode;return a!=null}function r(a,b){var c=d("ZenonMWThriftMessageMap").messageTypeToString(a.messageHeader.type).toLowerCase();a=q(a)?"response":"request";switch(b){case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_REQUEST:case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_RESPONSE:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","receive_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSING_REQUEST:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","processing_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_REQUEST:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","processed_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_RESPONSE:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","sending_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_TRANSLATION:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","after_translation_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_NULL_CHECK:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","after_null_check_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_RESPONSE:case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_REQUEST:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","sent_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;default:return}}var s={connectionState:"",peerConnectionState:"",signalingState:""};function t(a){var b=babelHelpers["extends"]({},s,a);if(s.connectionState!==b.connectionState||s.peerConnectionState!==b.peerConnectionState||s.signalingState!==b.signalingState){s=b;for(b of i.keys())d("ZenonMWThriftMessageQPLLogger").updateState(b,a)}}function u(a,b,c){var e,f=a.messageHeader;e=(e=i.get(f.transactionId))!=null?e:new Set();i.set(f.transactionId,e);if(b!==d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_SM_EVENT&&b!==d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_SM_EVENT&&e.has(b))return;e.add(b);j.set(f.transactionId,a);r(a,b);d("ZenonMWThriftMessageQPLLogger").log(a,b,babelHelpers["extends"]({},c,s))}g.setE2eeIsMandatedForCall=a;g.logEventForTxid=b;g.logReceivedMessage=c;g.logProcessingMessage=e;g.logMessageAfterNullCheck=f;g.logMessageAfterTranslation=l;g.logProcessedMessage=m;g.logSendingMessage=n;g.logSentMessage=o;g.logSendMessageFailed=p;g.updateState=t}),98);
__d("ZenonMWThriftMessageSerializer",["CompactSerializer","MqttThriftHeaderSerializers","MultiwayCommonSerializers","TCompactProtocol","TReadBuffer"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b=!1);var c=d("CompactSerializer").serialize(a.messageHeader,d("MultiwayCommonSerializers").serializeRtcMessageHeader);a=d("CompactSerializer").serialize(a.messageBody,d("MultiwayCommonSerializers").serializeRtcMessageBody);if(b){b=new Uint8Array(c.length+a.length);b.set(c);b.set(a,c.length);return b}b={};b=d("CompactSerializer").serialize(b,d("MqttThriftHeaderSerializers").serializeMqttThriftHeader);var e=new Uint8Array(b.length+c.length+a.length);e.set(b);e.set(c,b.length);e.set(a,b.length+c.length);return e}function b(a,b){b===void 0&&(b=!1);a=new(c("TReadBuffer"))(a);a=new(c("TCompactProtocol"))(a);b||d("MqttThriftHeaderSerializers").deserializeMqttThriftHeader(a);b=d("MultiwayCommonSerializers").deserializeRtcMessageHeader(a);a=d("MultiwayCommonSerializers").deserializeRtcMessageBody(a);return{messageBody:a,messageHeader:b}}g.serializeMWThriftMessage=a;g.deserializeMWThriftMessage=b}),98);
__d("ZenonMWThriftPingTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageHeader;a={ackMessageId:a.transactionId,eventName:"pingResponse"};b.push(a);return b}function b(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{},type:d("MultiwayCommonTypes").MessageType.PING})}g.fromThriftPingResponse=a;g.toThriftPingRequest=b}),98);
__d("ZenonMWThriftRemoveParticipantsTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b={usersToRemove:new Set(b.participants)};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{removeParticipantsRequest:b},type:d("MultiwayCommonTypes").MessageType.REMOVE_PARTICIPANTS})}g.toThriftRemoveParticipantsRequest=a}),98);
__d("ZenonMWThriftRingTranslator",["MultiwayCommonTypes","MultiwaySharedTypes","ZenonMWCommonUtils","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){if(b)return{groupThreadID:b.groupThreadId,peerID:b.peerId,serverInfoData:c};b=d("ZenonMWThriftTranslatorUtils").getCollisionContextFromThriftAppMessages(a);b&&(b.serverInfoData=c);return b!=null?b:{groupThreadID:null,peerID:null,serverInfoData:c}}function a(a,b){var c=[],e=a.messageBody;a=a.messageHeader;e=e.ringRequest;if(e){var f=e.appMessages,g=e.caller,i=e.e2eeEnforcement,j=e.otherParticipants,k=e.ringType,l=e.sdpOriginLocalId,m=e.threadIdInfo;g=g;k=k===d("MultiwayCommonTypes").RingType.PEER_VIDEO_CALL||k===d("MultiwayCommonTypes").RingType.GROUP_VIDEO_CALL||k===d("MultiwayCommonTypes").RingType.LIVE_STREAM||k===d("MultiwayCommonTypes").RingType.PEER_ESCALATED_AUDIO_CALL;var n=a.conferenceName;a=a.serverInfoData;m=h(f,m,a);var o=d("ZenonMWThriftTranslatorUtils").getRoomMetadataFromThriftAppMessages(f);g={actorID:b.actorID,e2eeInfraMandatedExpStatus:i==null?void 0:i.infraMandatedExpStatus,eventName:"inviteRequest",inviterID:g,isE2eeMandated:(i==null?void 0:i.mode)===d("MultiwaySharedTypes").E2eeMode.E2EE_MANDATED,isRemoteOfferer:!1,otherParticipants:Array.from(j),requestingVideo:k,roomInfo:babelHelpers["extends"]({context:m,name:n},o==null?{}:{room:o,sender:o.sender}),userID:b.userInfo.userID};a!=null&&(g.serverInfoData=a);f!=null&&(g.appMessages=d("ZenonMWThriftTranslatorUtils").mwThriftAppMessagesToSignalingAppMessages(f));c.push(g);k=(j=(i=e.offer)==null?void 0:i.sdpString)!=null?j:"";n=(m=e.mediaStatusEx)!=null?m:null;if(k!==""&&n!=null){o={sdp:k,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(k)};b=d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(n);a={eventName:"remoteSdpRequest",mediaPath:d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(e.mediaPath),mediaStates:b,negotiateType:!1,sdp:o,sdpOriginLocalId:l,source:"ringRequest"};c.push(a)}}return c}function b(a,b){b=b.status;b==="IN_ANOTHER_CALL"&&(a.signalingID=null);b=d("ZenonMWThriftTranslatorUtils").toMWThriftDeviceStatus(b);b={deviceStatus:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{ringResponse:b},type:d("MultiwayCommonTypes").MessageType.RING})}g.fromThriftRingRequest=a;g.toThriftRingResponse=b}),98);
__d("ZenonMWThriftServerMediaUpdateTranslator",["FBLogger","MultiwayCommonTypes","ZenonAuditedCheckpointLogId","ZenonBrowsers","ZenonInfraActionsLogger","ZenonMWCommonUtils","ZenonMWThriftMessageReliabilityLogger","ZenonMWThriftMessageTagUtils","ZenonMWThriftTranslatorUtils","ZenonScreenShare"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[],e=a.messageBody.serverMediaUpdateRequest,f=a.messageHeader,g=f.messageTags,i=f.transactionId;if(!e)return b;var j=e.answer,k=e.fromVersion,l=e.mediaPath,m=e.mediaStatus,n=e.multipleVideoStreamsAllowed,o=e.offer,p=e.prAnswer,q=e.renegotiationRequested,r=e.sdpOriginLocalId,s=e.stateStore,t=e.toVersion;e=e.update;o=(o=o==null?void 0:o.sdpString)!=null?o:"";j=(j=j==null?void 0:j.sdpString)!=null?j:"";p=(p=p==null?void 0:p.sdpString)!=null?p:"";k=+k;t=+t;l=d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(l);g=d("ZenonMWThriftMessageTagUtils").fromThriftMessageTags(g);var u=function(){d("ZenonMWThriftMessageReliabilityLogger").logProcessedMessage(a)},v=o!=="",w=j!=="",x=d("ZenonBrowsers").supportsPranswer()&&p!=="",y=e!==null;y=v||w||x||y;d("ZenonMWThriftTranslatorUtils").addThriftStateStoreSignalingEvents(s,b,!1,y);y=d("ZenonMWThriftTranslatorUtils").fetchE2eeServerState(s);if(q){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 1: renegotationRequested"});s={ackMessageId:i,eventName:"initiateRenegotiationRequest",fromVersion:k,hasRemoteOffer:o!=="",mediaPath:l,messageTags:g!=null?g:[],onProcessed:u,version:t};b.push(s);if(v){q=h(i,k,l,m,{sdp:o,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(o)},r,u,g,y);b.push(q)}}else if(w){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 2: answer SDP"});s=h(i,k,l,m,{sdp:j,type:"answer",version:d("ZenonMWCommonUtils").getSdpVersion(j)},r,u,g,y);if(s.sdp.sdp!=null&&d("ZenonMWCommonUtils").isUnifiedPlan(s.sdp.sdp)){q={sdp:j,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(j)};s.renegotiationOffer=q}b.push(s)}else if(v){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 3: offer SDP"});w=h(i,k,l,m,{sdp:o,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(o)},r,u,g,y);b.push(w)}else if(e){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 4: delta SDP"});j=h(i,k,l,m,{type:"offer",update:e,version:t},r,u,g,y);b.push(j)}else if(x){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 5: prAnswer SDP"});q=h(i,k,l,m,{sdp:p,type:"pranswer",version:d("ZenonMWCommonUtils").getSdpVersion(p)},r,u,g,y);b.push(q)}else if(m){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 6: media update"});s={ackMessageId:i,eventName:"mediaUpdateRequest",mediaStates:d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(m,k,t),messageTags:g!=null?g:[],onProcessed:u};b.push(s)}else{v="Warning: unsupported SMU type. TXID: "+i;c("FBLogger")("rpweb").warn(v);c("ZenonInfraActionsLogger").logError({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,error:v,errorDomain:"ZenonMWThriftServerMediaUpdateTranslator"})}d("ZenonMWThriftTranslatorUtils").maybeAddOverlayConfigServerUpdateRequestFromThrift(b,f);o={capabilities:{multipleVideoStreamsAllowed:n},eventName:"capabilitiesRequest",messageTags:g!=null?g:[]};b.push(o);return b}function h(a,b,c,e,f,g,h,i,j){return{ackMessageId:a,e2eeServerState:j,eventName:"remoteSdpRequest",fromVersion:b,mediaPath:c,mediaStates:d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(e),messageTags:i!=null?i:[],negotiateType:!1,onProcessed:h,sdp:f,sdpOriginLocalId:g,source:"serverMediaUpdateRequest"}}function b(a,b,c,e){return i({acknowledgedVersion:b.acknowledgedVersion,answer:e,header:a,mediaStates:c,statusCode:d("ZenonMWThriftTranslatorUtils").toMWThriftResponseStatusCode(b.statusCode),subCode:(e=d("ZenonMWThriftTranslatorUtils").toMWThriftResponseStatusSubCode(b.subCode))!=null?e:void 0})}function e(a,b){return i({acknowledgedVersion:b.acknowledgedVersion,header:a,statusCode:d("ZenonMWThriftTranslatorUtils").toMWThriftResponseStatusCode(b.statusCode),subCode:(a=d("ZenonMWThriftTranslatorUtils").toMWThriftResponseStatusSubCode(b.subCode))!=null?a:void 0})}function f(a,b){return i({acknowledgedVersion:b.acknowledgedVersion,header:a,statusCode:(a=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(b.responseStatusCode))!=null?a:d("MultiwayCommonTypes").RtcResponseStatusCode.CONDITIONAL_REQUEST_FAILED,subCode:d("MultiwayCommonTypes").RtcResponseSubCode.cast(b.responseSubCode)})}function i(a){var b=a.acknowledgedVersion,c=a.answer,e=a.header,f=a.mediaStates,g=a.statusCode;a=a.subCode;b={currentVersion:String(b)};f&&(b.mediaStatus=j(f));c&&(b.answer={sdpString:c.sdp});return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:e,rtcMessageBody:{serverMediaUpdateResponse:b},statusCode:g,subCode:a,type:d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE})}function j(a){var b={tracks:{}},c=!d("ZenonScreenShare").screenShareWithReplaceTrack();a.tracks.forEach(function(a){var e={customAudioContentType:void 0,customVideoContentType:void 0,enabled:a.enabled,name:a.name,owner:a.participantID},f=c?d("ZenonMWThriftTranslatorUtils").toMWThriftTrackLabel(a.type):null;f!=null&&(e.label=f);b.tracks[a.trackID]=e});return b}g.fromThriftServerMediaUpdateRequest=a;g.toThriftServerMediaUpdateResponse=b;g.toThriftServerMediaUpdateRenegotiationResponse=e;g.toThriftServerMediaUpdateNoSdpResponse=f}),98);
__d("ZenonMWThriftStateSyncTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.messageBody.updateResponse;a=a.messageHeader.transactionId;if(!b)return[];var c=b.topic;b=b.version;a={ackMessageId:a,eventName:"stateSyncUpdateResponse",topic:c,version:b};return[a]}function b(a){a=a.messageBody.notifyRequest;if(!a)return[];var b=[];if(a.syncPayload!=null)d("ZenonMWThriftTranslatorUtils").addThriftStateStoreSignalingEvents(a.syncPayload.stateStore,b,!0,!1);else{var c=a.data,e=a.topic;a=a.version;c={data:c,eventName:"stateSyncNotifyRequest",responseRequired:!0,topic:e,version:a};b.push(c)}return b}function c(a){var b=a.messageBody.unsubscribeResponse;a=a.messageHeader.transactionId;if(!b)return[];var c=b.topic;b=b.version;a={ackMessageId:a,eventName:"stateSyncUnsubscribeResponse",topic:c,version:b};return[a]}function e(a,b){var c=b.data,e=b.topic;b=b.version;c={data:c,syncPayload:{stateStore:{},stateStoreV2:{}},topic:e,topicId:null,version:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{updateRequest:c},type:d("MultiwayCommonTypes").MessageType.UPDATE})}function f(a,b){var c=b.topic;b=b.version;c={topic:c,version:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{notifyResponse:c},type:d("MultiwayCommonTypes").MessageType.NOTIFY})}function h(a,b){var c=b.topic;b=b.version;c={topic:c,topicId:null,version:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{unsubscribeRequest:c},type:d("MultiwayCommonTypes").MessageType.UNSUBSCRIBE})}g.fromThriftUpdateResponse=a;g.fromThriftNotifyRequest=b;g.fromThriftUnsubscribeResponse=c;g.toThriftUpdateRequest=e;g.toThriftNotifyResponse=f;g.toThriftUnsubscribeRequest=h}),98);
__d("ZenonMWThriftSubscriptionTranslator",["MultiwayCommonTypes","MultiwaySharedTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b=b.subscriptions;b={subscriptions:b.map(function(a){var b;return{cname:"",options:{videoQuality:d("MultiwaySharedTypes").VideoQuality.cast((b=a.options)==null?void 0:b.videoQuality)},trackId:a.trackId,type:d("MultiwaySharedTypes").SubscriptionType.cast(a.type)}})};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{subscriptionRequest:b},type:d("MultiwayCommonTypes").MessageType.SUBSCRIPTION})}g.toThriftSubscriptionRequest=a}),98);
__d("ZenonMWThriftWakeupTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageHeader;a={ackMessageId:a.transactionId,eventName:"wakeupRequest"};b.push(a);return b}function b(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{},type:d("MultiwayCommonTypes").MessageType.WAKEUP})}g.fromThriftWakeupRequest=a;g.toThriftWakeupResponse=b}),98);
__d("ZenonSignalingMessage",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.getHeader=function(){return this.$1};b.getEvents=function(){return this.$2};b.setSignalingID=function(a){this.$1.signalingID=a};b.setRetryCount=function(a){this.$1.retryCount=a};return a}();f["default"]=a}),66);
__d("ZenonMWThriftMessageTranslator",["DGWWebConfig","FBLogger","MultiwayCommonTypes","ZenonActorHooks","ZenonMWThriftAddParticipantsTranslator","ZenonMWThriftApprovalTranslator","ZenonMWThriftClientEventTranslator","ZenonMWThriftClientMediaUpdateTranslator","ZenonMWThriftConferenceStateTranslator","ZenonMWThriftDataMessageTranslator","ZenonMWThriftDismissTranslator","ZenonMWThriftHangupTranslator","ZenonMWThriftIceCandidateTranslator","ZenonMWThriftJoinTranslator","ZenonMWThriftPingTranslator","ZenonMWThriftRemoveParticipantsTranslator","ZenonMWThriftRingTranslator","ZenonMWThriftServerMediaUpdateTranslator","ZenonMWThriftStateSyncTranslator","ZenonMWThriftSubscriptionTranslator","ZenonMWThriftTranslatorUtils","ZenonMWThriftWakeupTranslator","ZenonSignalingMessage","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.getHeader();a=a.getEvents();if(a.length===0)throw c("unrecoverableViolation")("Unexpected Translation: called toMWThriftMessage with empty signaling events","rtc_www");else{var e=a[0];switch(e.eventName){case"addParticipantsRequest":return d("ZenonMWThriftAddParticipantsTranslator").toThriftAddParticipantsRequest(b,e);case"clientEventRequest":return d("ZenonMWThriftClientEventTranslator").toThriftClientEventRequest(b,e);case"clientInfoRequest":if(a.length>=2&&a[1].eventName==="localSdpRequest"&&(a[1].sdp.type==="offer"||a[1].sdp.type==="answer"))return d("ZenonMWThriftJoinTranslator").toThriftJoinRequest(b,e,a[1]);break;case"dismissResponse":return d("ZenonMWThriftDismissTranslator").toThriftDismissResponse(b);case"genericDataMessageRequest":return d("ZenonMWThriftDataMessageTranslator").toThriftDataMessageRequest(b,e);case"genericDataMessageResponse":return d("ZenonMWThriftDataMessageTranslator").toThriftDataMessageResponse(b);case"terminateRequest":return d("ZenonMWThriftHangupTranslator").toThriftHangupRequest(b,e);case"initiateRenegotiationResponse":if(a.length>=3&&a[1].eventName==="remoteSdpResponse"&&a[2].eventName==="localSdpRequest"&&a[2].sdp.type==="answer")return d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateResponse(b,a[1],a[2].mediaStates,a[2].sdp);else return d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateRenegotiationResponse(b,e);case"inviteRequest":if(a.length>=3&&a[1].eventName==="clientInfoRequest"&&a[2].eventName==="localSdpRequest"&&a[2].sdp.type==="offer")return d("ZenonMWThriftJoinTranslator").toThriftJoinRequest(b,a[1],a[2],e);break;case"inviteResponse":return d("ZenonMWThriftRingTranslator").toThriftRingResponse(b,e);case"iceCandidateRequest":return d("ZenonMWThriftIceCandidateTranslator").toThriftIceCandidateRequest(b,e);case"iceCandidateResponse":return d("ZenonMWThriftIceCandidateTranslator").toThriftIceCandidateResponse(b);case"participantUpdateResponse":return d("ZenonMWThriftConferenceStateTranslator").toThriftConferenceStateResponse(b,e);case"localSdpRequest":return d("ZenonMWThriftClientMediaUpdateTranslator").toThriftClientMediaUpdateRequest(b,e.mediaStates,e.sdp);case"mediaUpdateRequest":return d("ZenonMWThriftClientMediaUpdateTranslator").toThriftClientMediaUpdateRequest(b,e.mediaStates);case"mediaUpdateResponse":return d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateNoSdpResponse(b,e);case"pingRequest":return d("ZenonMWThriftPingTranslator").toThriftPingRequest(b);case"remoteSdpResponse":return e.type==="offer"&&(a.length>=2&&a[1].eventName==="localSdpRequest"&&a[1].sdp.type==="answer")?a[1].mediaMode!=="p2p"?d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateResponse(b,e,a[1].mediaStates):d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateResponse(b,e,a[1].mediaStates,a[1].sdp):d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateResponse(b,e);case"removeParticipantsRequest":return d("ZenonMWThriftRemoveParticipantsTranslator").toThriftRemoveParticipantsRequest(b,e);case"subscriptionRequest":return d("ZenonMWThriftSubscriptionTranslator").toThriftSubscriptionRequest(b,e);case"stateSyncNotifyResponse":return d("ZenonMWThriftStateSyncTranslator").toThriftNotifyResponse(b,e);case"stateSyncUpdateRequest":return d("ZenonMWThriftStateSyncTranslator").toThriftUpdateRequest(b,e);case"stateSyncUnsubscribeRequest":return d("ZenonMWThriftStateSyncTranslator").toThriftUnsubscribeRequest(b,e);case"usersApprovalRequest":return d("ZenonMWThriftApprovalTranslator").toThriftApprovalRequest(b,e);case"wakeupResponse":return d("ZenonMWThriftWakeupTranslator").toThriftWakeupResponse(b)}}return null}function b(a){var b=a.messageHeader;if(!h(b)){c("FBLogger")("rtc_www").info("Ignoring Thrift MW message; receiver does not match self ID","rtc_www");return null}var e=b.type,f=b.responseStatusCode==null;b=d("ZenonMWThriftTranslatorUtils").mwThriftMessageHeaderToSignalingMessageHeader(b);var g=[];if(e==null)return new(c("ZenonSignalingMessage"))(b,g);switch(e){case d("MultiwayCommonTypes").MessageType.RING:f&&(g=d("ZenonMWThriftRingTranslator").fromThriftRingRequest(a,b));break;case d("MultiwayCommonTypes").MessageType.JOIN:f||(g=d("ZenonMWThriftJoinTranslator").fromThriftJoinResponse(a));break;case d("MultiwayCommonTypes").MessageType.CONFERENCE_STATE:f&&(g=d("ZenonMWThriftConferenceStateTranslator").fromThriftConferenceStateRequest(a));break;case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:f||(g=d("ZenonMWThriftClientMediaUpdateTranslator").fromThriftClientMediaUpdateResponse(a));break;case d("MultiwayCommonTypes").MessageType.HANGUP:f||(g=d("ZenonMWThriftHangupTranslator").fromThriftHangupResponse(a));break;case d("MultiwayCommonTypes").MessageType.PING:f||(g=d("ZenonMWThriftPingTranslator").fromThriftPingResponse(a));break;case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:!f?g=d("ZenonMWThriftIceCandidateTranslator").fromThriftIceCandidateResponse(a):g=d("ZenonMWThriftIceCandidateTranslator").fromThriftIceCandidateRequest(a);break;case d("MultiwayCommonTypes").MessageType.DATA_MESSAGE:f&&(g=d("ZenonMWThriftDataMessageTranslator").fromThriftDataMessageRequest(a));break;case d("MultiwayCommonTypes").MessageType.DISMISS:f&&(g=d("ZenonMWThriftDismissTranslator").fromThriftDismissRequest(a));break;case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:f&&(g=d("ZenonMWThriftServerMediaUpdateTranslator").fromThriftServerMediaUpdateRequest(a));break;case d("MultiwayCommonTypes").MessageType.NOTIFY:f&&(g=d("ZenonMWThriftStateSyncTranslator").fromThriftNotifyRequest(a));break;case d("MultiwayCommonTypes").MessageType.UPDATE:f||(g=d("ZenonMWThriftStateSyncTranslator").fromThriftUpdateResponse(a));break;case d("MultiwayCommonTypes").MessageType.UNSUBSCRIBE:f||(g=d("ZenonMWThriftStateSyncTranslator").fromThriftUnsubscribeResponse(a));break;case d("MultiwayCommonTypes").MessageType.WAKEUP:f&&(g=d("ZenonMWThriftWakeupTranslator").fromThriftWakeupRequest(a));break;default:break}return new(c("ZenonSignalingMessage"))(b,g)}function h(a){var b;return d("ZenonActorHooks").ZenonActor.isInstagramUser()||d("ZenonActorHooks").ZenonActor.isOculusUser()||d("ZenonActorHooks").ZenonActor.isKadabraUser()||d("ZenonActorHooks").ZenonActor.isLiveChatOnlyPerson()||d("ZenonActorHooks").ZenonActor.isManagedMetaAccount()||d("ZenonActorHooks").ZenonActor.isMDCUser()||a.receiverUserId==null||a.receiverUserId===d("ZenonActorHooks").ZenonActor.getID()||((b=a.receiver)==null?void 0:b.baseId)===d("ZenonActorHooks").ZenonActor.getAccountID()||a.receiverUserId===c("DGWWebConfig").fbId}g.toMWThriftMessage=a;g.toSignalingMessage=b}),98);
__d("ZenonProductConnectFunnel",["FBLogger","performanceNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(){return Math.trunc((h||(h=c("performanceNow")))())};a=function(){function a(){this.$6=null,this.$7=null,this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$8=new Map(),this.$9=new Map()}var b=a.prototype;b.$10=function(a){var b=this.$8.get(a);if(b!=null)return b;b={acceptedTs:this.$3,connectedTs:null,connectingTs:null,contactingTs:null,endCallTs:null,permissionsReceivedTs:this.$5,permissionsRequestTs:this.$4,ringingTs:this.$2,triggeredTs:this.$1};var c={cameraPermission:this.$6,microphonePermission:this.$7};this.clearPreJoinTimings();this.$8.set(a,b);this.$9.set(a,c);return b};b.$11=function(a,b){var d;a=a==null||(d=a.getLogIdentifiers())==null?void 0:d.clientSessionID;if(a==null){c("FBLogger")("rtc_www").warn("ProductConnectFunnel: could not record UI event due to missing signaling ID");return}a=this.$10(a);if(a[b]!=null)return;a[b]=i()};b.getTimings=function(a){return this.$8.get(a)};b.getPreJoinTimings=function(){return{acceptedTs:this.$3,ringingTs:this.$2,triggeredTs:this.$1}};b.clearPreJoinTimings=function(){this.$3=null,this.$2=null,this.$1=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null};b.setPreJoinTimings=function(a){this.$3=a.acceptedTs,this.$2=a.ringingTs,this.$1=a.triggeredTs};b.getAnnotations=function(a){return this.$9.get(a)};b.remove=function(a){this.clearPreJoinTimings(),this.$8["delete"](a),this.$9["delete"](a)};b.setUITriggered=function(){var a;(a=this.$1)!=null?a:this.$1=i()};b.setUIPermissionsRequest=function(){var a=this;if(this.$4!=null||!navigator.permissions)return;this.$4=i();var b=navigator.permissions;c("promiseDone")(b.query({name:"microphone"}).then(function(b){a.$7=b.state}));c("promiseDone")(b.query({name:"camera"}).then(function(b){a.$6=b.state}))};b.setUIPermissionsReceived=function(){var a;if(this.$4==null)return;(a=this.$5)!=null?a:this.$5=i()};b.setUIAccepted=function(){var a;(a=this.$3)!=null?a:this.$3=i()};b.setUIConnected=function(a){this.$11(a,"connectedTs")};b.setUIConnecting=function(a){this.$11(a,"connectingTs")};b.setUIRinging=function(){var a;(a=this.$2)!=null?a:this.$2=i()};b.setUIContacting=function(a){this.$11(a,"contactingTs")};b.setUIEnded=function(a){this.$11(a,"endCallTs")};return a}();b=new a();g["default"]=b}),98);
__d("ZenonSDESKeyDetector",[],(function(a,b,c,d,e,f){"use strict";var g=/inline:\s*[0-9a-zA-z+/]{40}(\b|\s|$)/;function a(a){return g.test(JSON.stringify(a))}f["default"]=a}),66);
__d("ZenonUserActionLogger",["FBLogger","RtcWebUserActionsDebugFalcoEvent","RtcWebUserActionsFalcoEvent","ZenonDebugLogger","ZenonLoggingUtils","ZenonSDESKeyDetector"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=window.location.hostname.search("facebook")!==-1?"facebook":window.location.hostname.search("messenger")!==-1?"messenger_dot_com":null,j={logCheckpoint:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"checkpoint"}))},logClick:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"tap"}))},logError:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"error"}))},logEvent:function(a){var b;if(c("ZenonSDESKeyDetector")(a))throw c("FBLogger")("rtc_www").mustfixThrow("ZenonUserActionLogger event contains SDES crypto key! This log entry must be removed!");if(!d("ZenonLoggingUtils").shouldAllowLogging())return;b=babelHelpers["extends"]({},a,{page:(b=a.page)!=null?b:i});var e=babelHelpers["extends"]({},b,{client_time:Date.now().toString()});c("RtcWebUserActionsDebugFalcoEvent").log(function(){return e});c("RtcWebUserActionsFalcoEvent").log(function(){return e});c("ZenonDebugLogger").getInstance().getLogHistory().log((a=a.event)!=null?a:"null",JSON.stringify(b))},logImpression:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"impression"}))},logPreCallClick:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"tap"}))},logPreCallImpression:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"impression"}))},startTimer:function(a){var b=Date.now();h=h.set(a,b);j.logCheckpoint({checkpoint:a+"_timerStart"})},stopTimer:function(a){var b=a.checkpointName===void 0?a.timerName:a.checkpointName,c=a.event||{},d=function(a){var b=h.get(a);if(b!=null){h["delete"](a);return parseInt(Date.now()-b,10)}return null};d=d(a.timerName);j.logCheckpoint(babelHelpers["extends"]({},c,{checkpoint:b+"_timerEnd",event_time_elapsed:d==null?void 0:d.toString()}));return parseInt(d,10)}};f.exports=j}),34);
__d("ZenonValidateMWThriftMessage",["FBLogger","MultiwayCommonTypes","ZenonInfraActionsLogger","ZenonMWThriftMessageMap"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.messageHeader.type,e=d("ZenonMWThriftMessageMap").messageTypeToString(b);if(a.messageHeader.serverInfoData==null&&b!=null&&b!==d("MultiwayCommonTypes").MessageType.JOIN){c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP][DROP] No remoteSignalingID in message: "+e});c("FBLogger")("rtc_www").warn("[ZP][DROP] No remoteSignalingID in message: "+e);return!1}return!0}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("EBEnableUnifiedAttachment",[],(function(a,b,c,d,e,f){"use strict";var g=!1;function a(a){g=a}function b(){return g}f.setEbEnableUnifiedAttachment=a;f.getEbEnableUnifiedAttachment=b}),66);
__d("EBLogger",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return c("FBLogger")("wmi_eb",a)};g.EBLogger=a}),98);
__d("EBMinosCheckWasmFeatureSupport",["asyncToGeneratorRuntime","gkx","wasm-feature-detect"],(function(a,b,c,d,e,f,g){"use strict";function h(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("wasm-feature-detect").bulkMemory()),b=(yield d("wasm-feature-detect").bigInt()),c=(yield d("wasm-feature-detect").referenceTypes());return a&&b&&c});return i.apply(this,arguments)}function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield h());if(!a)return!1;a=c("gkx")("2760");return a});return j.apply(this,arguments)}g.checkWasmFeatureSupport=h;g.checkWasFeatureSupportAndGK=a}),98);
__d("MWEBUseLocalStorage",["WALogger","WebStorage","getMWEncryptedBackupsIsLocalStorageSupported"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){a=a;b=b!=null?b:"true";if(d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var e;d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Encrypted Backups key "," written to local storage"])),a);(e=(i||(i=c("WebStorage"))).getLocalStorage())==null||e.setItem(a,b)}}function b(a){a=a;if(d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var b;(b=(i||(i=c("WebStorage"))).getLocalStorage())==null||b.removeItem(a)}}function e(a){if(d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var b;a=a;return(b=(i||(i=c("WebStorage"))).getLocalStorageForRead())==null?void 0:b.getItem(a)}return null}function f(a){if(d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var b;a=a;return((b=(i||(i=c("WebStorage"))).getLocalStorageForRead())==null?void 0:b.getItem(a))!=null}return!0}g.mwEBCreateLocalStorageEntry=a;g.mwEBDeleteLocalStorageEntry=b;g.mwEBGetLocalStorageEntryValue=e;g.mwEBGetIsLocalStorageEntryValuePresent=f}),98);
__d("EBReenrollmentTriggerHandler",["EBLogger","LSIntEnum","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("EBLogger").EBLogger().tags(["DefaultEBReenrollmentTriggerHandler"]);a=function(){function a(){}var b=a.prototype;b.handle=function(a){i.debug("Running default reenrollment trigger handler for reason: "+(h||(h=d("LSIntEnum"))).toNumber(a.deviceReenrollmentReason));for(a of c("MWEncryptedBackupsLocalStorageEntryEnum").members())i.debug("Clearing local storage key: "+a),a!==c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_OPTED_OUT_OF_AUTO_RESTORE&&d("MWEBUseLocalStorage").mwEBDeleteLocalStorageEntry(a)};return a}();g.DefaultEBReenrollmentTriggerHandler=a}),98);
__d("MWEBODSCategory",[],(function(a,b,c,d,e,f){"use strict";a=7319;f["default"]=a}),66);
__d("MWEBODSEntityName.enum",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({MW_EB_PIN_RESTORE_AUTH:"mw_eb_pin_restore_auth",MW_EB_RC_RESTORE_AUTH:"mw_eb_rc_restore_auth",MW_EB_AUTO_RESTORE_AUTH:"mw_eb_auto_restore_auth",MW_EB_OTC_AUTH:"mw_eb_otc_auth",MW_EB_ONBOARDING_AUTH:"mw_eb_onboarding_auth",MW_EBSM_HYDRATION:"mw_ebsm_hydration",MW_EBSM_IDB:"mw_eb_ebsm_idb",MW_EBSM_CORRUPTION:"mw_ebsm_corruption",MW_EBSM_CORRUPTION_RELOAD:"mw_ebsm_corruption_reload",MW_EBSM_RESTORE_PERSISTENCE_ERROR:"mw_ebsm_restore_persistence",MW_EBSM_IDB_TABLE_DELETION:"mw_ebsm_idb_table_deletion",MW_EBSM_WORKER_SUFFIX:"_worker",MW_EBSM_COUNTERS:"mw_ebsm_counters",MW_EBSM_FETCH_BACKUP_IDS:"mw_ebsm_fetch_backup_ids",MW_EB_SWITCH_CONSISTENCY:"mw_eb_switch_consistency",MAW_EB_UPLOAD_TRACKING:"maw_eb_upload_tracking",MAW_EB_UPLOAD_COUNTER:"maw_eb_upload_counter",MAW_EB_RESTORE_COUNTER:"maw_eb_restore_counter",EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST:"eb_symmetric_encryption_js_rust_shadow_test",MAW_EB_FRONTEND_QPL_IN_WORKER:"maw_eb_frontend_qpl_in_worker",MW_EB_RETROACTIVE_BACKUP:"mw_eb_retroactive_backup"});c=a;f["default"]=c}),66);
__d("EBReenrollmentTriggerListener",["EBReenrollmentTriggerHandler","LSIntEnum","MWEBODSCategory","MWEBODSEntityName.enum","ODS","ReQL","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(){function a(a){this.$1=new Map(),this.$4=new(d("EBReenrollmentTriggerHandler").DefaultEBReenrollmentTriggerHandler)(),this.$2=a,this.$5()}var b=a.prototype;b.$5=function(){var a=this;this.$3==null&&(this.$3=d("ReQL").fromTableAscending(this.$2.tables.encrypted_backups_reenrollment_trigger).take(1).subscribe(function(b,e){if(e.operation==="add"||e.operation==="put"){(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_COUNTERS,"reenrollment_trigger");b=a.getDefaultHandler();if(e.value.deviceReenrollmentReason!=null){var g;b=(g=a.$1.get((i||(i=d("LSIntEnum"))).unwrapIntEnum(e.value.deviceReenrollmentReason)))!=null?g:b}b.handle(e.value);c("promiseDone")(a.$2.runInTransaction(function(a){return a.encrypted_backups_reenrollment_trigger["delete"](e.value.pk)},"readwrite",void 0,void 0,f.id+":77"))}}));return this.$3};b.attachHandler=function(a,b){this.$1.set(a,b)};b.getDefaultHandler=function(){return this.$4};return a}(),k;function l(a){if(k!=null)return k;k=new j(a);return k}function a(a){k==null&&l(a);return k}g.initEBReenrollmentTriggerListener=l;g.getEBReenrollmentTriggerListener_TESTING_ONLY=a}),98);
__d("EBUnifyLegacyMediaUpload",[],(function(a,b,c,d,e,f){"use strict";var g=!1;function a(a){g=a}function b(){return g}f.setEnableUnifyLegacyMediaUpload=a;f.getEnableUnifyLegacyMediaUpload=b}),66);
__d("EncryptedBackupTaskIssuedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5726");b=d("FalcoLoggerInternal").create("encrypted_backup_task_issued",a);e=b;g["default"]=e}),98);
__d("EncryptedBackupsUtils",["FBLogger","WAJids","WAStanzaUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";f=function(a){return Date.now()-a>d("WATimeUtils").DAY_MILLISECONDS*30};var h=function(a){return Date.now()-a>d("WATimeUtils").DAY_MILLISECONDS*30};function a(a,b,c,d,e){d={frankingTag:d==null?void 0:d.frankingTag,reportingTag:d==null?void 0:d.reportingTag};d={frankingMetadata:d,messageId:b,senderId:a,timestampMs:c};return{encryptedTransportMessage:e,metadata:d}}function b(a){return JSON.stringify([a.author,a.chat,a.externalId])}function e(a){a=JSON.parse(a);if(!Array.isArray(a))throw c("FBLogger")("wmi_eb").mustfixThrow("Unable to parse msg id string as proper json");if(a.length!==3)throw c("FBLogger")("wmi_eb").mustfixThrow("Parsed array should have 3 components");var b=d("WAJids").unsafeCoerceToUserJid(a[0]),e=d("WAJids").unsafeCoerceToChatJid(a[1]);a=d("WAStanzaUtils").toStanzaId(a[2]);return{author:b,chat:e,externalId:a}}g.entryOlderThan30Days=f;g.timestampOlderThan30Days=h;g.asBackupMessage=a;g.convertWAMsgIdToStringId=b;g.convertStringIdToWAMsgId=e}),98);
__d("MAWExtractMsFromExternalId",["I64","MAWExternalId","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=2199023255551;function a(a){try{a=(i||(i=d("I64"))).of_string_opt(a);if(a!=null){return(a=k(a))!=null?a:0}}catch(a){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to convert externalId to number: ",""])),a)}return 0}function k(a){a=Number((i||(i=d("I64"))).to_string(i.and_(i.lsr_(a,22),i.of_float(j))));return d("MAWExternalId").getThreeMostSignificantDigitsForSortOrderTimestamp(a)}g.extractMsFromStanzaId=a;g.extractMsFromExternalId=k}),98);
__d("IGDWEBUploadMessageUtils",["I64","MAWExtractMsFromExternalId","WALogger","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){var c=d("MAWExtractMsFromExternalId").extractMsFromExternalId((i||(i=d("I64"))).of_string(a));c==null&&d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[sortOrder] Could not extract ms from externalId: ",""])),a);return d("WATimeUtils").castToMillisTime(Number(b)*1e3+(c!=null?c:0))}g.generateProtobufServerTs=a}),98);
__d("WAArmadilloBackupCommon.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.name="Subprotocol";a.internalSpec={payload:[1,d("WAProtoConst").TYPES.BYTES],version:[2,d("WAProtoConst").TYPES.INT32]};g.SubprotocolSpec=a}),98);
__d("WAArmadilloBackupMessage.pb",["WAArmadilloBackupCommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};a.name="BackupMessage";a.internalSpec={metadata:[1,(e=d("WAProtoConst")).TYPES.MESSAGE,b],encryptedTransportMessage:[2,e.TYPES.BYTES],encryptedTransportEvent:[5,e.TYPES.MESSAGE,d("WAArmadilloBackupCommon.pb").SubprotocolSpec],encryptedTransportLocallyTransformedMessage:[6,e.TYPES.MESSAGE,d("WAArmadilloBackupCommon.pb").SubprotocolSpec],miTransportAdminMessage:[7,e.TYPES.MESSAGE,d("WAArmadilloBackupCommon.pb").SubprotocolSpec],__oneofs__:{payload:["encryptedTransportMessage","encryptedTransportEvent","encryptedTransportLocallyTransformedMessage","miTransportAdminMessage"]}};b.name="BackupMessage$Metadata";b.internalSpec={senderId:[1,e.TYPES.STRING],messageId:[2,e.TYPES.STRING],timestampMs:[3,e.TYPES.INT64],frankingMetadata:[4,e.TYPES.MESSAGE,c],payloadVersion:[5,e.TYPES.INT32],futureProofBehavior:[6,e.TYPES.INT32],threadTypeTag:[7,e.TYPES.INT32],clientTimestampMs:[8,e.TYPES.INT64]};c.name="BackupMessage$Metadata$FrankingMetadata";c.internalSpec={frankingTag:[3,e.TYPES.BYTES],reportingTag:[4,e.TYPES.BYTES]};g.BackupMessageSpec=a;g.BackupMessage$MetadataSpec=b;g.BackupMessage$Metadata$FrankingMetadataSpec=c}),98);
__d("WAByteArray",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=b;var c=new Uint8Array(a);for(a=a-1;a>=0;a--)c[a]=b&255,b>>>=8;return c}function b(a){return a.buffer.slice(a.byteOffset,a.byteLength+a.byteOffset)}function c(a,b){if(!a||!b)return!1;a=new Uint8Array(a);b=new Uint8Array(b);var c=a.length,d=b.length;if(c!==d)return!1;for(d=0;d<c;d++)if(a[d]!==b[d])return!1;return!0}f.intToBytes=a;f.uint8ArrayToBuffer=b;f.compareArrayBuffer=c}),66);
__d("EncryptedBackupsUploadEntity",["$InternalEnum","EncryptedBackupsUtils","IGDWEBUploadMessageUtils","WAArmadilloBackupMessage.pb","WAByteArray","WAGlobals","WAJids","WATimeUtils","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a instanceof ArrayBuffer?new Uint8Array(a):a}var h=b("$InternalEnum").Mirrored(["NEEDS_BACKUP","COMPLETED","NEEDS_BACKUP_RETRY","PERMANENT_FAILURE","EXPIRED","THREAD_DELETED","DELETION_PURGED","MESSAGE_DELETED","UPLOADING"]);b=b("$InternalEnum")({INVALID:"-1",IMAGE:"0",PTT:"1",DOCUMENT:"3",VIDEO:"4",GIF:"5",STICKER:"6",XMA:"22",MESSENGER_PREVIEW:"25"});function c(a){return a}function i(a){var b=a.messageApplication,c=a.msgId,e=a.reportingMeta;a=a.sortOrderMs;var f=d("WAJids").authorToUserId(c.author,d("WAJids").extractUserId(d("WAGlobals").getMyUserJid()));return d("encodeProtobuf").encodeProtobuf(d("WAArmadilloBackupMessage.pb").BackupMessageSpec,d("EncryptedBackupsUtils").asBackupMessage(f,c.externalId,a,e!=null?e:{frankingKey:null,frankingTag:null,frankingVersion:null,reportingContent:null,reportingTag:null},b)).readByteArrayView()}function e(a){return d("WAByteArray").uint8ArrayToBuffer(a)}function f(a){var b=a.attachmentContext,c=a.backupDirective,e=a.dbMsgType,f=a.instanceKey,g=a.isOpenEB,j=a.isRetroactiveUpload,k=a.legacyAttachmentContext,l=a.messageApplication,m=a.msgId,n=a.originalMsgProtocolId,o=a.reportingMeta,p=a.retryCount,q=a.senderId,r=a.serverTs,s=a.sortOrderMs,t=a.tags;a=a.triggerSource;l=i({messageApplication:l,msgId:m,reportingMeta:o,sortOrderMs:c.actionType===4?d("IGDWEBUploadMessageUtils").generateProtobufServerTs(m.externalId,r):s});o={backupActionType:c.actionType,backupDirective:c,dbMsgType:e,failTsMs:d("WATimeUtils").castToMillisTime(0),instanceKey:f,isOpenEB:g,isRetroactiveUpload:j,msgId:m,msgIdKey:d("EncryptedBackupsUtils").convertWAMsgIdToStringId(m),msgType:"text",originalMsgProtocolId:n,protobuf:l,retryCount:p,senderId:q,serverTs:r,sortOrderMs:s,supplementalKey:c.supplementalKey,tags:t,triggerSource:a,uploadStatus:h.NEEDS_BACKUP,uploadTsSec:d("WATimeUtils").unixTime()};b!=null&&(o=babelHelpers["extends"]({},o,{attachmentContext:b,legacyAttachmentContext:k,msgType:"media"}));return o}g.toEbBackupMessageBytes=a;g.EbUploadStatus=h;g.AttachmentContextMediaType=b;g.castToEBQueueId=c;g.encodeBackupMessage=i;g.getEbBackupMessageBytesBuffer=e;g.asEBUploadEntity=f}),98);
__d("EphemeralMediaViewMode",[],(function(a,b,c,d,e,f){a=Object.freeze({READ_ONCE:0,REPLAYABLE:1,PERMANENT:2});f["default"]=a}),66);
__d("LSAppendDataTraceAddonStoredProcedure",["LSAppendDataTraceAddon","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSAppendDataTraceAddon"),e.dataTraceId,e.checkPointId,e.syncChannel,e.errorMessage,e.tags);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSContactGender",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FEMALE:1,MALE:2,NEUTER:3});f["default"]=a}),66);
__d("LSContactIdType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FBID:1,SMS_LOCAL_ID:2});f["default"]=a}),66);
__d("LSContactUserBlockAction",[],(function(a,b,c,d,e,f){a=Object.freeze({MN_UNBLOCK:0,MN_BLOCK:1,FB_UNBLOCK:2,FB_BLOCK:3});f["default"]=a}),66);
__d("LSContactViewerRelationship",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,NOT_CONTACT:1,CONTACT_OF_VIEWER:2,FACEBOOK_FRIEND:3,SOFT_CONTACT:4});f["default"]=a}),66);
__d("LSContactWorkForeignEntityType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FOREIGN:1,NOT_FOREIGN:2,NOT_FOREIGN_LIMITED:3});f["default"]=a}),66);
__d("LSDataTraceTag",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;e=4;var g=5,h=6,i=7,j=20,k=21,l=22,m=23,n=24,o=25,p=26,q=27,r=28,s=29,t=30,u=31,v=32,w=33,x=34,y=35,z=36,A=37,B=38,C=39,D=40,E=41,F=42;f.none=a;f.sticker=b;f.image=c;f.animatedImage=d;f.video=e;f.audio=g;f.file=h;f.xma=i;f.messageTypeNone=j;f.messageTypeText=k;f.messageTypeFutureproof=l;f.messageTypeCiphertext=m;f.messageTypeUnavailable=n;f.messageTypeImage=o;f.messageTypeVideo=p;f.messageTypePtt=q;f.messageTypeAdmin=r;f.messageTypeRevoked=s;f.messageTypeGif=t;f.messageTypeSticker=u;f.messageTypeExpiredEphemeral=v;f.messageTypeEphemeralSettingAdmin=w;f.messageTypeEphemeralSyncResponse=x;f.messageTypeEphemeralScreenshotAction=y;f.messageTypeDeleteForMe=z;f.messageTypeEphemeralSettingChangeFromCurrentDevice=A;f.messageTypeAlertICDC=B;f.messageTypeGroupInvite=C;f.messageTypeXMA=D;f.messageTypeReaction=E;f.messageTypeSenderKeyDistribution=F}),66);
__d("LSHotEmojiSize",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,SMALL:1,MEDIUM:2,LARGE:3});f["default"]=a}),66);
__d("LSMEBTaskCreationSource",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:-1,TEST_ONLY:0,TAM:1,MEM:2,RETROACTIVE_BACKUP:3,TAM_WEB:4,ACT_MESSAGE_DELETE:5,ACT_THREAD_DELETE:6,ACT_UPDATE_ATTACHMENT:7,TAM_PERSISTENCE_TASK:8,TAM_XMA_TOMBSTONE:9,MEM_RECEIVE:10,MEM_SEND:11,MEM_PEER_SYNC:12,MEM_RECEIVE_PROTOBUF:13,MEM_SEND_PROTOBUF:14,MEM_PEER_SYNC_PROTOBUF:15,EB_ADD_DEVICE:21,OPTIMISTIC_THREAD_CREATE_VIA_SHIM:22,ACT_THREAD_INSERT_VIA_SHIM:23,MI_THREAD_INSERT_VIA_SHIM:24,POINT_QUERY_FROM_EB:25,MESSENGER_SEARCH:26,ACT_MESSAGE_RANGE_TASK_HANDLER:27,POINT_QUERY_ON_FULLY_LOADED_THREAD:28,THREAD_CUTOVER:29,HYBRID_THREAD_VERIFY_OR_CREATE_VIA_SHIM:30,BURNER_INTERNAL_LOAD_TESTING_FRAMEWORK:31,THREAD_GALLERY_RESTORE:32,ACT_SURROUNDING_QUERY:33,EB_SNAPSHOT_RESTORE:34,PROTOBUF_RESTORE:39,FTS_INDEX_EB_MESSAGES:40,INSTAMADILLO_DYI:41,MESSENGER_MESSAGE_LIST_PAGINATION:45,DELTA_GENERIC_MESSAGE_SYNC:55,MEDIA_GALLERY_RESTORE:57,EB_PROTOBUF_RESTORE_NO_OP:58,NEW_MEMBER_EXPORT:59,THREAD_POINT_QUERY:76,EB_RESTORE_REPLIED_MESSAGES_AFTER_RANGE_RESTORE:35,REPL_TESTING:36,EB_POINT_QUERY_IN_ACT:37,EB_POINT_QUERY_RETRY_DECRYPTION_FAILURES:38,IGD_DYI:42,FTS_INDEX_EB_MESSAGES_WEB:43,BULK_QUERY_FOR_SEARCH_RESULT:44,MSGR_DYI:46,EB_RESTORE_ON_REGISTRATION:47,EB_RESTORE_ON_OFFLINE_QUEUE_COUNT_LIMIT:48,EB_POINT_QUERY_RESTORE_ON_ACK_DROP:49,EB_POINT_QUERY_RESTORE_ON_DECRYPTION_FAILURE:50,EB_POINT_QUERY_RESTORE_ON_UNAVAILABLE_DEVICE:51,EB_RANGE_QUERY_RESTORE_ON_THREAD_SESSION_ACTIVATE:52,EB_POINT_QUERY_PINNED_MESSAGES:53,EB_POINT_QUERY_RESTORE_PROTOBUF:54,EB_POINT_QUERY_IN_ACT_REACTIONS:56,EB_POINT_QUERY_BUMP_MESSAGES:60,EB_POINT_QUERY_IN_ACT_FOR_INCOMING_RETRY_RECEIPT:61,EB_POINT_QUERY_IN_ACT_FOR_REPORTING:62,EB_POINT_QUERY_IN_ACT_FOR_MESSAGE_STATUS_UPDATE:63,EB_POINT_QUERY_IN_ACT_FOR_REPL_TEST:64,EB_POINT_QUERY_IN_ACT_FOR_FACEBOOK_APP_NSE_NOTIFICATION_RENDERING:65,EB_POINT_QUERY_IN_ACT_FOR_MESSAGE_EXPORT_HANDLING:66,EB_POINT_QUERY_IN_ACT_FOR_TAM_ACT_PROXY:67,EB_POINT_QUERY_IN_ACT_FOR_REALTIME_INCOMING_MESSAGE:68,EB_POINT_QUERY_IN_ACT_FOR_REALTIME_INCOMING_AI_BOT_MESSAGE:69,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_PERSISTENCE:70,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_INDEXING:71,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_NEW_MEMBER_HYDRATION:72,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_ECHO_TO_PROTO_CONVERSION:73,EB_POINT_QUERY_IN_ACT_FOR_PENDING_MESSAGE_RECOVERY_HISTORICAL_FUTURE_PROOF:74,EB_POINT_QUERY_IN_ACT_FOR_PENDING_MESSAGE_RECOVERY_REALTIME_BLOCKED:75,EB_POINT_QUERY_TO_FETCH_SENDER_DEVICE_KEYS:77,RESONANCE_UTILS:80,MPS_RESTORE_REVERB_RESTORE:81,REPORTING:82,CLIENT_MESSAGE_TRUNCATION:83,CALLING_XMA:84,EB_ACT_ATTACHMENT_RESTORE:85,EB_MEB_ATTACHMENT_ACCESS_CONTROL_RESTORE:86,FORCE_CLIENT_MESSAGE_TRUNCATION:87,ACT_EDIT_MESSAGE_VALIDATION:88,ACT_REVOKE_MESSAGE_VALIDATION:89,REVERB_CLEANUP_HANDLER_SINGLE_MESSAGE_POINT_QUERY:90,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_BEFORE_QUERY:91,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_AFTER_QUERY:92,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_SURROUNDING_QUERY:93,ACT_FETCH_LOCAL_ONLY_MESSAGE_PK_AND_LOCAL_BACKUP_RESTORE:94,ACT_FETCH_LOCAL_ONLY_MESSAGE_PK_AND_ENCRYPTED_BACKUP_RESTORE:95});f["default"]=a}),66);
__d("LSRequestId",["uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h="0123456789abcdef",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function a(){var a=c("uuidv4")().replace(/[^0-9a-f]/gi,""),b=0,d=["#"];while(b<33){var e=h.indexOf(a.charAt(b))<<8,f=h.indexOf(a.charAt(b+1))<<4,g=h.indexOf(a.charAt(b+2));g=g|(f|e);f=g>>6;d.push(i.charAt(f));d.push(i.charAt(g&63));b+=3}return d.join("")}b={generate:a};g["default"]=b}),98);
__d("LSVerifyContactRowExistsStoredProcedure",["LSSynchronousPromise","LSVerifyContactRowExists","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSVerifyContactRowExists"),e.id,e.contactIdType,e.profilePictureUrl,e.name,e.contactType,e.profilePictureFallbackUrl,e.profilePictureUrlExpirationTimestampMs,e.urlExpirationTimestampMs,e.normalizedNameForSearch,e.isMemorialized,e.isBlocked,e.blockedByViewerStatus,e.canViewerMessage,e.isSelf,e.authorityLevel,e.capabilities,e.capabilities2,e.workForeignEntityType,e.gender,e.contactViewerRelationship,e.secondaryName,e.firstName,e.friendshipStatus);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWAckLevel",["LSIntEnum","LSMessageSendStatus"],(function(a,b,c,d,e,f,g){"use strict";var h,i={clock:0,contentGone:-3,contentTooBig:-4,contentUnuploadable:-5,expired:-2,failed:-1,failedRetryable:-9,inactiveReceived:-6,partialOptimistic:-8,played:4,read:3,received:2,senderBackFillSent:-7,sent:1};function a(a){return a>0}function b(a){switch(a){case i.partialOptimistic:return(h||(h=d("LSIntEnum"))).ofNumber(0);case i.clock:return(h||(h=d("LSIntEnum"))).ofNumber(1);case i.sent:case i.received:case i.read:case i.played:return(h||(h=d("LSIntEnum"))).ofNumber(2);case i.failedRetryable:return(h||(h=d("LSIntEnum"))).ofNumber(5);default:return(h||(h=d("LSIntEnum"))).ofNumber(4)}}function e(a){switch(a){case i.partialOptimistic:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").NONE);case i.clock:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").SENDING_TO_SERVER);case i.sent:case i.received:case i.read:case i.played:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").SERVER_RECEIVED);case i.failedRetryable:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").RETRIABLE_ERROR);default:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").NON_RETRIABLE_ERROR)}}g.ACK=i;g.isMsgAuthoritative=a;g.levelToMessagingSendStatusV2=b;g.levelToMessagingSendStatus=e}),98);
__d("WAAckLevel",[],(function(a,b,c,d,e,f){"use strict";a={SENDER_BACKFILL_SENT:-7,INACTIVE_RECEIVED:-6,CONTENT_UNUPLOADABLE:-5,CONTENT_TOO_BIG:-4,CONTENT_GONE:-3,EXPIRED:-2,FAILED:-1,CLOCK:0,SENT:1,RECEIVED:2,READ:3,PLAYED:4};f.ACK=a}),66);
__d("MAWAdminMsgHelpers",["MAWCreateParticipantAdminMsg","MAWExternalId","MAWRemoveParticipantAdminMsg","WAAckLevel","WAGlobals","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h="Facebook User",i=1;function a(a){return a==null||a===""?h:a}function b(a){return a!=null?d("WAJids").userIdFromJid(a):h}function c(a,b,c,e){return{ack:d("WAAckLevel").ACK.SENT,id:{author:d("WAJids").AUTHOR_SYSTEM,chat:a,externalId:d("MAWExternalId").generateExternalId()},msgContent:d("MAWCreateParticipantAdminMsg").createParticipantAdminMessage(c==="@me"?d("WAGlobals").getMyUserJid():c,b),serverTs:e,ts:e,type:"Admin"}}function e(a,b,c,e){return{ack:d("WAAckLevel").ACK.SENT,id:{author:d("WAJids").AUTHOR_SYSTEM,chat:a,externalId:d("MAWExternalId").generateExternalId()},msgContent:d("MAWRemoveParticipantAdminMsg").removeParticipantAdminMessage(c==="@me"?d("WAGlobals").getMyUserJid():c,b),serverTs:e,ts:e,type:"Admin"}}function f(a,b){return babelHelpers["extends"]({},j(a,b),{version:i})}function j(a,b){var c,e=d("WAGlobals").getMyUserJid();b=b==="@me"?e:b;if(b===e)c={adminMsgContent:[d("WAJids").userIdFromJid(a)],adminType:"currentUserPromotedParticipant"};else if(b==null)c=a===e?{adminMsgContent:[],adminType:"currentUserGotPromoted"}:{adminMsgContent:[d("WAJids").userIdFromJid(a)],adminType:"participantGotPromoted"};else{b=d("WAJids").userIdFromJid(b);c=a===e?{adminMsgContent:[b],adminType:"participantPromotedYou"}:{adminMsgContent:[b,d("WAJids").userIdFromJid(a)],adminType:"participantPromotedParticipant"}}return c}function k(a,b,c,e){b=j(b,c);return{ack:d("WAAckLevel").ACK.SENT,id:{author:d("WAJids").AUTHOR_SYSTEM,chat:a,externalId:d("MAWExternalId").generateExternalId()},msgContent:b,serverTs:e,ts:e,type:"Admin"}}function l(a,b){return babelHelpers["extends"]({},m(a,b),{version:i})}function m(a,b){var c,e=d("WAGlobals").getMyUserJid();b=b==="@me"?e:b;if(b===e)c=a===e?{adminMsgContent:[],adminType:"currentUserSelfDemoted"}:{adminMsgContent:[d("WAJids").userIdFromJid(a)],adminType:"currentUserDemotedParticipant"};else if(b==null)c=a===e?{adminMsgContent:[],adminType:"currentUserGotDemoted"}:{adminMsgContent:[d("WAJids").userIdFromJid(a)],adminType:"participantGotDemoted"};else{var f=d("WAJids").userIdFromJid(b);c=a===e?{adminMsgContent:[f],adminType:"participantDemotedYou"}:{adminMsgContent:[f,d("WAJids").userIdFromJid(a)],adminType:b===a?"participantSelfDemoted":"participantDemotedParticipant"}}return c}function n(a,b,c,e){b=m(b,c);return{ack:d("WAAckLevel").ACK.SENT,id:{author:d("WAJids").AUTHOR_SYSTEM,chat:a,externalId:d("MAWExternalId").generateExternalId()},msgContent:b,serverTs:e,ts:e,type:"Admin"}}function o(a,b,c,e){var f=[],g=b.subject.content;if(g==null)return;b.subject.user===d("WAGlobals").getMyUserJid()?(b="currentUserNamedGroup",f.push(g)):c==null?(b="unkonwnUserNamedGroup",f.push(g)):(b="participantNamedGroup",f.push(c,g));return{ack:d("WAAckLevel").ACK.SENT,id:{author:d("WAJids").AUTHOR_SYSTEM,chat:a,externalId:d("MAWExternalId").generateExternalId()},msgContent:{adminMsgContent:f,adminType:b},serverTs:e,ts:e,type:"Admin"}}function p(a,b){a=q(a,b);if(a==null)return;return babelHelpers["extends"]({},a,{version:i})}function q(a,b){var c,e=[];if(a===d("WAGlobals").getMyUserJid())switch(b){case"all_member_add":c="currentUserSetAddModeAllMembers";break;case"admin_add":c="currentUserSetAddModeAdminOnly";break}else if(a!=null){e.push(d("WAJids").userIdFromJid(a));switch(b){case"all_member_add":c="participantSetAddModeAllMembers";break;case"admin_add":c="participantSetAddModeAdminOnly";break}}else switch(b){case"all_member_add":c="serverSetAddModeAllMembers";break;case"admin_add":c="serverSetAddModeAdminOnly";break}if(c==null)return;return{adminMsgContent:e,adminType:c}}function r(a,b,c,e){c=q(c,b);if(c==null)return;return{ack:d("WAAckLevel").ACK.SENT,id:{author:d("WAJids").AUTHOR_SYSTEM,chat:a,externalId:d("MAWExternalId").generateExternalId()},msgContent:c,serverTs:e,ts:e,type:"Admin"}}g.UNKNOWN_USER=h;g.maybeUnknownParticipantName=a;g.createAdminMsgContactId=b;g.createParticipantAddAdminMessage=c;g.createParticipantRemoveAdminMsg=e;g.createParticipantPromoteAdminMessage=f;g.createParticipantPromoteAdminMsg=k;g.createParticipantDemoteAdminMessage=l;g.createParticipantDemoteAdminMsg=n;g.createGroupNameChangeAdminMsg=o;g.createMemberAddModeChangeAdminMessage=p;g.createMemberAddModeChangeAdminMsg=r}),98);
__d("MAWCreateParticipantAdminMsg",["MAWAdminMsgHelpers","WAGlobals"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){switch(a){case 1:return{adminMsgContent:[b],adminType:"participantAddedYou"};case 2:return{adminMsgContent:[b,c],adminType:"participantAddedYouAndOneUser"};default:return{adminMsgContent:[b,a.toString()],adminType:"participantAddedYouAndMoreThanOneUsers"}}}function i(a,b,c){switch(a){case 1:return{adminMsgContent:[b],adminType:"currentUserAddedOneParticipant"};case 2:return{adminMsgContent:[b,c],adminType:"currentUserAddedTwoParticipant"};default:return{adminMsgContent:[b,a.toString()],adminType:"currentUserAddedMoreThanTwoParticipant"}}}function j(a,b,c,d){switch(a){case 1:return{adminMsgContent:[b,c],adminType:"participantAddedOneUser"};case 2:return{adminMsgContent:[b,c,d],adminType:"participantAddedTwoUser"}}return{adminMsgContent:[b,c,a.toString()],adminType:"participantAddedMoreThanTwoUser"}}function a(a,b,c,e){e=e==null?b.map(d("MAWAdminMsgHelpers").createAdminMsgContactId):e;var f=e[0];e=e[1];c=c==null?d("MAWAdminMsgHelpers").createAdminMsgContactId(a):d("MAWAdminMsgHelpers").maybeUnknownParticipantName(c);if(a===d("WAGlobals").getMyUserJid())return i(b.length,d("MAWAdminMsgHelpers").maybeUnknownParticipantName(f),d("MAWAdminMsgHelpers").maybeUnknownParticipantName(e));return b.includes(d("WAGlobals").getMyUserJid())?h(b.length,d("MAWAdminMsgHelpers").maybeUnknownParticipantName(c),d("MAWAdminMsgHelpers").maybeUnknownParticipantName(b[0]===d("WAGlobals").getMyUserJid()?e:f)):j(b.length,c,d("MAWAdminMsgHelpers").maybeUnknownParticipantName(f),d("MAWAdminMsgHelpers").maybeUnknownParticipantName(e))}g.createParticipantAdminMessage=a}),98);
__d("MAWRemoveParticipantAdminMsg",["MAWAdminMsgHelpers","WAGlobals"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){switch(a){case 1:return{adminMsgContent:[b],adminType:"participantRemovedYou"};case 2:return{adminMsgContent:[b,c],adminType:"participantRemovedYouAndOneUser"};default:return{adminMsgContent:[b,a.toString()],adminType:"participantRemovedYouAndMoreThanOneUsers"}}}function i(a,b,c,d){switch(a){case 1:return d?{adminMsgContent:[],adminType:"currentUserLeftGroup"}:{adminMsgContent:[b],adminType:"currentUserRemovedOneParticipant"};case 2:return{adminMsgContent:[b,c],adminType:"currentUserRemovedTwoParticipant"};default:return{adminMsgContent:[b,a.toString()],adminType:"currentUserRemovedMoreThanTwoParticipant"}}}function j(a,b,c,d,e){switch(a){case 1:return e?{adminMsgContent:[b],adminType:"participantLeftGroup"}:{adminMsgContent:[b,c],adminType:"participantRemovedOneUser"};case 2:return{adminMsgContent:[b,c,d],adminType:"participantRemovedTwoUser"}}return{adminMsgContent:[b,c,a.toString()],adminType:"participantRemovedMoreThanTwoUser"}}function a(a,b,c,e){e=e==null?b.map(d("MAWAdminMsgHelpers").createAdminMsgContactId):e;var f=e[0];e=e[1];c=c==null?d("MAWAdminMsgHelpers").createAdminMsgContactId(a):d("MAWAdminMsgHelpers").maybeUnknownParticipantName(c);if(a===d("WAGlobals").getMyUserJid())return i(b.length,d("MAWAdminMsgHelpers").maybeUnknownParticipantName(f),d("MAWAdminMsgHelpers").maybeUnknownParticipantName(e),b[0]===d("WAGlobals").getMyUserJid());return b.includes(d("WAGlobals").getMyUserJid())?h(b.length,c,d("MAWAdminMsgHelpers").maybeUnknownParticipantName(b[0]===d("WAGlobals").getMyUserJid()?e:f)):j(b.length,c,d("MAWAdminMsgHelpers").maybeUnknownParticipantName(f),d("MAWAdminMsgHelpers").maybeUnknownParticipantName(e),b[0]===a)}g.removeParticipantAdminMessage=a}),98);
__d("MAWAdminMsgType",[],(function(a,b,c,d,e,f){"use strict";a="currentUserAddedDevice";b="participantAddedDevice";c="currentUserRemovedDevice";d="participantRemovedDevice";e="currentUserUpdatedDevice";var g="participantUpdatedDevice",h="participantAddedYou",i="participantAddedYouAndOneUser",j="participantAddedYouAndMoreThanOneUsers",k="unknowUserAddedYou",l="unknowUserAddedYouAndOneUser",m="unknowUserAddedYouAndMoreThanOneUser",n="unknownUserAddedOneUser",o="unknownUserAddedTwoUser",p="unknownUserAddedMoreThanTwoUser",q="participantAddedOneUser",aa="participantAddedTwoUser",ba="participantAddedMoreThanTwoUser",ca="currentUserRemovedOneParticipant",da="currentUserRemovedTwoParticipant",ea="currentUserRemovedMoreThanTwoParticipant",fa="currentUserAddedOneParticipant",ga="currentUserAddedTwoParticipant",r="currentUserAddedMoreThanTwoParticipant",ha="participantRemovedYou",ia="participantRemovedYouAndOneUser",ja="participantRemovedYouAndMoreThanOneUsers",ka="unknowUserRemovedYou",la="unknowUserRemovedYouAndOneUser",ma="unknowUserRemovedYouAndMoreThanOneUser",na="unknownUserRemovedOneUser",oa="unknownUserRemovedTwoUser",pa="unknownUserRemovedMoreThanTwoUser",qa="participantRemovedOneUser",ra="participantRemovedTwoUser",sa="participantRemovedMoreThanTwoUser",ta="participantLeftGroup",ua="currentUserLeftGroup",va="participantCustomizeParticipantNickname",wa="participantClearParticipantNickname",xa="participantCustomizeCurrentUserNickname",ya="currentUserSetOwnNickname",za="currentUserClearOwnNickname",Aa="currentUserClearParticipantNickname",Ba="participantSetOwnNickname",Ca="participantClearOwnNickname",Da="participantClearCurrentUserNickname",Ea="currentUserCustomizeNickname",Fa="currentUserNamedGroup",Ga="unkonwnUserNamedGroup",Ha="participantNamedGroup",Ia="currentUserCustomizeHotlike",Ja="participantCustomizeHotlike",Ka="currentUserCustomizeTheme",La="currentUserCustomizeAITheme",Ma="currentUserCustomizePhoto",Na="participantCustomizeTheme",Oa="participantCustomizeAITheme",Pa="participantCustomizePhoto",Qa="currentUserSetAddModeAdminOnly",Ra="currentUserSetAddModeAllMembers",Sa="participantSetAddModeAdminOnly",Ta="participantSetAddModeAllMembers",Ua="serverSetAddModeAdminOnly",Va="serverSetAddModeAllMembers",s="currentUserPinnedMessage",t="currentUserUnpinnedMessage",u="participantPinnedMessage",v="participantUnpinnedMessage",w="currentUserLimitSharingDisabled",x="currentUserLimitSharingEnabled",y="participantLimitSharingDisabled",z="participantLimitSharingEnabled",A="cutoverThreadAdminMessage",B="cutoverIGDThreadAdminMessage",C="cutoverRollbackAdminMessage",D="dualThreadCutoverAdminMessage",Wa="dualThreadCutoverAdminMessageSelfThread",Xa="dualThreadCutoverAdminMessageWithOtherUserName",Ya="dualThreadCutoverAdminMessageOtherUserNameUnknown",E="e2eeThreadDescription",F="e2eeThreadUKOSAAdminMessage",Za="debugMsg",$a="reachabilityError",ab="twoUsersConnected",bb="twoUsersConnectedOneMSplit",G="CurrentUserCreatedPoll",H="ParticipantCreatedPoll",I="CurrentUserAddedPollOption",J="ParticipantAddedPollOption",K="CurrentUserAddedMultiplePollOptions",L="ParticipantAddedMultiplePollOptions",M="CurrentUserAddedPollVote",N="ParticipantAddedPollVote",O="CurrentUserAddedMultiplePollVotes",P="ParticipantAddedMultiplePollVotes",Q="CurrentUserRemovedPollVote",R="ParticipantRemovedPollVote",S="CurrentUserRemovedMultiplePollVotes",T="ParticipantRemovedMultiplePollVotes",U="CurrentUserMixedPollUpdate",V="ParticipantMixedPollUpdate",W="CurrentUserChangedPollVote",X="ParticipantChangedPollVote",Y="CurrentUserChangedMultiplePollVotes",Z="ParticipantChangedMultiplePollVotes",$="PollUnsentUpdate";r={CURRENT_USER_ADDED_DEVICE:a,CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:r,CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:K,CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:O,CURRENT_USER_ADDED_ONE_PARTICIPANT:fa,CURRENT_USER_ADDED_POLL_OPTION:I,CURRENT_USER_ADDED_POLL_VOTE:M,CURRENT_USER_ADDED_TWO_PARTICIPANTS:ga,CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:Y,CURRENT_USER_CHANGED_POLL_VOTE:W,CURRENT_USER_CLEAR_OWN_NICKNAME:za,CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:Aa,CURRENT_USER_CREATED_POLL:G,CURRENT_USER_CUSTOMIZE_AI_THEME:La,CURRENT_USER_CUSTOMIZE_HOTLIKE:Ia,CURRENT_USER_CUSTOMIZE_NICKNAME:Ea,CURRENT_USER_CUSTOMIZE_PHOTO:Ma,CURRENT_USER_CUSTOMIZE_THEME:Ka,CURRENT_USER_LEFT_GROUP:ua,CURRENT_USER_LIMIT_SHARING_DISABLED:w,CURRENT_USER_LIMIT_SHARING_ENABLED:x,CURRENT_USER_MIXED_POLL_UPDATE:U,CURRENT_USER_NAMED_GROUP:Fa,CURRENT_USER_PINNED_MESSAGE:s,CURRENT_USER_REMOVED_DEVICE:c,CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:ea,CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:S,CURRENT_USER_REMOVED_ONE_PARTICIPANT:ca,CURRENT_USER_REMOVED_POLL_VOTE:Q,CURRENT_USER_REMOVED_TWO_PARTICIPANTS:da,CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY:Qa,CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS:Ra,CURRENT_USER_SET_OWN_NICKNAME:ya,CURRENT_USER_UNPINNED_MESSAGE:t,CURRENT_USER_UPDATED_DEVICE:e,CUTOVER_IGD_THREAD_ADMIN_MESSAGE:B,CUTOVER_ROLLBACK_ADMIN_MESSAGE:C,CUTOVER_THREAD_ADMIN_MESSAGE:A,DEBUG_MSG:Za,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:D,E2EE_THREAD_DESCRIPTION:E,E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:F,PARTICIPANT_ADDED_DEVICE:b,PARTICIPANT_ADDED_MORE_THAN_TWO_USER:ba,PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:L,PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:P,PARTICIPANT_ADDED_ONE_USER:q,PARTICIPANT_ADDED_POLL_OPTION:J,PARTICIPANT_ADDED_POLL_VOTE:N,PARTICIPANT_ADDED_TWO_USER:aa,PARTICIPANT_ADDED_YOU:h,PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:j,PARTICIPANT_ADDED_YOU_AND_ONE_USER:i,PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:Z,PARTICIPANT_CHANGED_POLL_VOTE:X,PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:Da,PARTICIPANT_CLEAR_OWN_NICKNAME:Ca,PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:wa,PARTICIPANT_CREATED_POLL:H,PARTICIPANT_CUSTOMIZE_AI_THEME:Oa,PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:xa,PARTICIPANT_CUSTOMIZE_HOTLIKE:Ja,PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:va,PARTICIPANT_CUSTOMIZE_PHOTO:Pa,PARTICIPANT_CUSTOMIZE_THEME:Na,PARTICIPANT_LEFT_GROUP:ta,PARTICIPANT_LIMIT_SHARING_DISABLED:y,PARTICIPANT_LIMIT_SHARING_ENABLED:z,PARTICIPANT_MIXED_POLL_UPDATE:V,PARTICIPANT_NAMED_GROUP:Ha,PARTICIPANT_PINNED_MESSAGE:u,PARTICIPANT_REMOVED_DEVICE:d,PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:sa,PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:T,PARTICIPANT_REMOVED_ONE_USER:qa,PARTICIPANT_REMOVED_POLL_VOTE:R,PARTICIPANT_REMOVED_TWO_USER:ra,PARTICIPANT_REMOVED_YOU:ha,PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:ja,PARTICIPANT_REMOVED_YOU_AND_ONE_USER:ia,PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:Sa,PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:Ta,PARTICIPANT_SET_OWN_NICKNAME:Ba,PARTICIPANT_UNPINNED_MESSAGE:v,PARTICIPANT_UPDATED_DEVICE:g,POLL_UNSENT_UPDATE:$,REACHABILITY_ERROR:$a,SERVER_SET_ADD_MODE_ADMIN_ONLY:Ua,SERVER_SET_ADD_MODE_ALL_MEMBERS:Va,TWO_USERS_CONNECTED:ab,TWO_USERS_CONNECTED_ONE_MSPLIT:bb,UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:p,UNKNOWN_USER_ADDED_ONE_USER:n,UNKNOWN_USER_ADDED_TWO_USER:o,UNKNOWN_USER_ADDED_YOU:k,UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:m,UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:l,UNKNOWN_USER_NAMED_GROUP:Ga,UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER:pa,UNKNOWN_USER_REMOVED_ONE_USER:na,UNKNOWN_USER_REMOVED_TWO_USER:oa,UNKNOWN_USER_REMOVED_YOU:ka,UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER:ma,UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER:la};f.CURRENT_USER_ADDED_DEVICE=a;f.CURRENT_USER_PINNED_MESSAGE=s;f.CURRENT_USER_UNPINNED_MESSAGE=t;f.PARTICIPANT_PINNED_MESSAGE=u;f.PARTICIPANT_UNPINNED_MESSAGE=v;f.CURRENT_USER_LIMIT_SHARING_DISABLED=w;f.CURRENT_USER_LIMIT_SHARING_ENABLED=x;f.PARTICIPANT_LIMIT_SHARING_DISABLED=y;f.PARTICIPANT_LIMIT_SHARING_ENABLED=z;f.CUTOVER_THREAD_ADMIN_MESSAGE=A;f.CUTOVER_IGD_THREAD_ADMIN_MESSAGE=B;f.CUTOVER_ROLLBACK_ADMIN_MESSAGE=C;f.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE=D;f.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD=Wa;f.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME=Xa;f.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN=Ya;f.E2EE_THREAD_DESCRIPTION=E;f.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE=F;f.CURRENT_USER_CREATED_POLL=G;f.PARTICIPANT_CREATED_POLL=H;f.CURRENT_USER_ADDED_POLL_OPTION=I;f.PARTICIPANT_ADDED_POLL_OPTION=J;f.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS=K;f.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS=L;f.CURRENT_USER_ADDED_POLL_VOTE=M;f.PARTICIPANT_ADDED_POLL_VOTE=N;f.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES=O;f.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES=P;f.CURRENT_USER_REMOVED_POLL_VOTE=Q;f.PARTICIPANT_REMOVED_POLL_VOTE=R;f.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES=S;f.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES=T;f.CURRENT_USER_MIXED_POLL_UPDATE=U;f.PARTICIPANT_MIXED_POLL_UPDATE=V;f.CURRENT_USER_CHANGED_POLL_VOTE=W;f.PARTICIPANT_CHANGED_POLL_VOTE=X;f.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES=Y;f.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES=Z;f.POLL_UNSENT_UPDATE=$;f.ADMIN_MSG_TYPE=r}),66);
__d("MAWLocalizationType",["MAWAdminMsgType"],(function(a,b,c,d,e,f,g){"use strict";a="emptySnippet";b="currentUserCreatedGroup";c="participantCreatedGroup";e="unknownUserCreatedGroup";f="currentUserGotPromoted";var h="currentUserGotDemoted",i="participantGotPromoted",j="participantGotDemoted",k="participantPromotedYou",l="participantDemotedYou",m="currentUserPromotedParticipant",n="currentUserDemotedParticipant",o="participantDemotedParticipant",p="participantPromotedParticipant",q="participantSelfDemoted",r="currentUserSelfDemoted",s="currentUserSendText",t="currentUserSendImage",u="currentUserSendVideo",v="currentUserSendAudio",w="currentUserSendGif",x="currentUserSendSticker",y="participantSendText",z="participantSendTextInGroup",A="participantSendImage",B="participantSendVideo",C="participantSendAudio",D="participantSendGif",E="participantSendSticker",F="unavailableSnippet",G="unknownUserEphemeralSettingTurnedOnSeconds",H="unknownUserEphemeralSettingTurnedOnMinutes",I="unknownUserEphemeralSettingTurnedOnHours",J="unknownUserEphemeralSettingTurnedOnDays",K="youEphemeralSettingTurnedOnSeconds",L="youEphemeralSettingTurnedOnMinutes",M="youEphemeralSettingTurnedOnHours",N="youEphemeralSettingTurnedOnDays",O="participantEphemeralSettingTurnedOnSeconds",P="participantEphemeralSettingTurnedOnMinutes",Q="participantEphemeralSettingTurnedOnHours",R="participantEphemeralSettingTurnedOnDays",S="unknownUserEphemeralSettingChangeSeconds",T="unknownUserEphemeralSettingChangeMinutes",U="unknownUserEphemeralSettingChangeHours",V="unknownUserEphemeralSettingChangeDays",aa="youEphemeralSettingChangeSeconds",ba="youEphemeralSettingChangeMinutes",ca="youEphemeralSettingChangeHours",da="youEphemeralSettingChangeDays",ea="participantEphemeralSettingChangeSeconds",fa="participantEphemeralSettingChangeMinutes",ga="participantEphemeralSettingChangeHours",ha="participantEphemeralSettingChangeDays",ia="unknownUserEphemeralSettingTurnedOff",ja="youEphemeralSettingTurnedOff",ka="participantEphemeralSettingTurnedOff",la="ephemeralSettingsAutoReset",ma="currentUserUnsentMessage",na="participantUnsentMessage",oa="participantReactMessage",pa="participantReactMessageInGroup",W="unknownUserEphemeralTakeScreenshot",qa="unknownUserEphemeralRecordScreen",ra="youEphemeralTakeScreenshot",sa="youEphemeralRecordScreen",ta="participantEphemeralTakeScreenshot",ua="participantEphemeralRecordScreen",va="icdcAlertAdminMessage",wa="yourDeviceICDCAlertAdminMessage",X="currentUserSendAttachment",xa="participantSendAttachment",ya="currentUserSentPost",za="currentUserSentReel",Aa="currentUserSentStory",Ba="currentUserSentEvent",Ca="currentUserMentionedStoryIG",Da="currentUserReceivedStoryMentionIG",Ea="participantSentPost",Fa="participantSentReel",Ga="participantSentStory",Ha="participantSentEvent",Ia="currentUserSentStoryHighlight",Ja="participantSentStoryHighlight",Ka="currentUserMissedAudioCall",La="participantMissedAudioCall",Ma="currentUserMissedVideoCall",Na="participantMissedVideoCall",Oa="currentUserAudioCalled",Pa="participantAudioCalled",Qa="currentUserVideoCalled",Ra="participantVideoCalled",Sa="currentUserStartedGroupAudioCall",Ta="participantStartedGroupAudioCall",Ua="currentUserStartedGroupVideoCall",Va="participantStartedGroupVideoCall",Wa="currentUserBumpedOwnMessage",Xa="currentUserBumpedMessage",Ya="participantBumpedOwnMessage",Za="participantBumpedParticipantMessage",$a="participantBumpedCurrentUserMessage",ab="userSendUnavailableMessage",bb="userSendEncryptedMessage",cb="currentUserSendUnrenderableMessage",db="participantSendUnrenderableMessage",eb="currentUserSendLocationFallback",fb="participantSendLocation",gb="currentUserSendLiveLocationFallback",hb="participantSendLiveLocation",ib="currentUserSendLocation",jb="participantSendLocation",kb="currentUserSendPollCreationFallback",lb="participantSendPollCreation",mb="currentUserSendContactShareFallback",nb="participantSendContactShareFallback",ob="currentUserSendContactShare",pb="participantSendContactShare",qb="currentUserSendAIContactShare",rb="participantSendAIContactShare",sb="currentUserSendStoryMentionFallback",tb="currentUserSendStoryMention",ub="participantSendStoryMention",vb="participantSendStoryMentionFallback",wb="currentUserSendPostMentionFallback",xb="participantSendPostMentionFallback",yb="currentUserSendMemoriesShare",zb="participantSendMemoriesShare",Ab="currentUserSendPostMention",Bb="participantSendPostMention",Cb="currentUserSendNoteMentionFallback",Db="participantSendNoteMentionFallback",Eb="messengerMemoryEncryptedMessageFallback",Fb="rtcXMAMessageFallback",Gb="metaAISendMessageFallback",Hb="currentUserSendBumpMessageFallback",Ib="participantSendBumpMessageFallback",Jb="participantSendBumpMessageOriginalUnavailable",Kb="currentUserSendStickerReceiverFetchMessageFallback",Lb="participantSendStickerReceiverFetchMessageFallback",Mb="viewOncePhotoMessageFallback",Nb="viewOnceVideoMessageFallback",Ob="unavailableStory",Pb="currentUserLimitSharingDisabled",Qb="currentUserLimitSharingEnabled",Rb="participantLimitSharingDisabled",Sb="participantLimitSharingEnabled",Y="dualThreadCutoverAdminMessageOtherUserNameUnknown",Z="dualThreadCutoverAdminMessageSelfThread",$="dualThreadCutoverAdminMessageWithOtherUserName";d=babelHelpers["extends"]({},d("MAWAdminMsgType").ADMIN_MSG_TYPE,{CURRENT_USER_AUDIO_CALLED:Oa,CURRENT_USER_BUMPED_MESSAGE:Xa,CURRENT_USER_BUMPED_OWN_MESSAGE:Wa,CURRENT_USER_CREATED_GROUP:b,CURRENT_USER_DEMOTED_PARTICIPANT:n,CURRENT_USER_GOT_DEMOTED:h,CURRENT_USER_GOT_PROMOTED:f,CURRENT_USER_LIMIT_SHARING_DISABLED:Pb,CURRENT_USER_LIMIT_SHARING_ENABLED:Qb,CURRENT_USER_MENTIONED_STORY_IG:Ca,CURRENT_USER_MISSED_AUDIO_CALL:Ka,CURRENT_USER_MISSED_VIDEO_CALL:Ma,CURRENT_USER_PROMOTED_PARTICIPANT:m,CURRENT_USER_RECEIVED_STORY_MENTION_IG:Da,CURRENT_USER_SELF_DEMOTED:r,CURRENT_USER_SEND_AI_CONTACT_SHARE:qb,CURRENT_USER_SEND_ATTACHMENT:X,CURRENT_USER_SEND_AUDIO:v,CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK:Hb,CURRENT_USER_SEND_CONTACT_SHARE:ob,CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK:mb,CURRENT_USER_SEND_GIF:w,CURRENT_USER_SEND_IMAGE:t,CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK:gb,CURRENT_USER_SEND_LOCATION:ib,CURRENT_USER_SEND_LOCATION_FALLBACK:eb,CURRENT_USER_SEND_MEMORIES_SHARE:yb,CURRENT_USER_SEND_NOTE_MENTION_FALLBACK:Cb,CURRENT_USER_SEND_POLL_CREATION_FALLBACK:kb,CURRENT_USER_SEND_POST_MENTION:Ab,CURRENT_USER_SEND_POST_MENTION_FALLBACK:wb,CURRENT_USER_SEND_STICKER:x,CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:Kb,CURRENT_USER_SEND_STORY_MENTION:tb,CURRENT_USER_SEND_STORY_MENTION_FALLBACK:sb,CURRENT_USER_SEND_TEXT:s,CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK:cb,CURRENT_USER_SEND_VIDEO:u,CURRENT_USER_SENT_EVENT:Ba,CURRENT_USER_SENT_POST:ya,CURRENT_USER_SENT_REEL:za,CURRENT_USER_SENT_STORY:Aa,CURRENT_USER_SENT_STORY_HIGHLIGHT:Ia,CURRENT_USER_STARTED_GROUP_AUDIO_CALL:Sa,CURRENT_USER_STARTED_GROUP_VIDEO_CALL:Ua,CURRENT_USER_UNSENT_MESSAGE:ma,CURRENT_USER_VIDEO_CALLED:Qa,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN:Y,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD:Z,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:$,EMPTY_SNIPPET:a,EPHEMERAL_SETTINGS_AUTO_RESET:la,ICDC_ALERT_ADMIN_MESSAGE:va,MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK:Eb,META_AI_SEND_MESSAGE_FALLBACK:Gb,PARTICIPANT_AUDIO_CALLED:Pa,PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:$a,PARTICIPANT_BUMPED_OWN_MESSAGE:Ya,PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:Za,PARTICIPANT_CREATED_GROUP:c,PARTICIPANT_DEMOTED_PARTICIPANT:o,PARTICIPANT_DEMOTED_YOU:l,PARTICIPANT_EPHEMERAL_RECORD_SCREEN:ua,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:ha,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:ga,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:fa,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:ea,PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:ka,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:R,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:Q,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:P,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:O,PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:ta,PARTICIPANT_GOT_DEMOTED:j,PARTICIPANT_GOT_PROMOTED:i,PARTICIPANT_LIMIT_SHARING_DISABLED:Rb,PARTICIPANT_LIMIT_SHARING_ENABLED:Sb,PARTICIPANT_MISSED_AUDIO_CALL:La,PARTICIPANT_MISSED_VIDEO_CALL:Na,PARTICIPANT_PROMOTED_PARTICIPANT:p,PARTICIPANT_PROMOTED_YOU:k,PARTICIPANT_REACT_MESSAGE:oa,PARTICIPANT_REACT_MESSAGE_IN_GROUP:pa,PARTICIPANT_SELF_DEMOTED:q,PARTICIPANT_SEND_AI_CONTACT_SHARE:rb,PARTICIPANT_SEND_ATTACHMENT:xa,PARTICIPANT_SEND_AUDIO:C,PARTICIPANT_SEND_BUMP_MESSAGE:Ib,PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_FALLBACK:Jb,PARTICIPANT_SEND_CONTACT_SHARE:pb,PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK:nb,PARTICIPANT_SEND_GIF:D,PARTICIPANT_SEND_IMAGE:A,PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK:hb,PARTICIPANT_SEND_LOCATION:jb,PARTICIPANT_SEND_LOCATION_FALLBACK:fb,PARTICIPANT_SEND_MEMORIES_SHARE:zb,PARTICIPANT_SEND_NOTE_MENTION_FALLBACK:Db,PARTICIPANT_SEND_POLL_CREATION_FALLBACK:lb,PARTICIPANT_SEND_POST_MENTION:Bb,PARTICIPANT_SEND_POST_MENTION_FALLBACK:xb,PARTICIPANT_SEND_STICKER:E,PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:Lb,PARTICIPANT_SEND_STORY_MENTION:ub,PARTICIPANT_SEND_STORY_MENTION_FALLBACK:vb,PARTICIPANT_SEND_TEXT:y,PARTICIPANT_SEND_TEXT_IN_GROUP:z,PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK:db,PARTICIPANT_SEND_VIDEO:B,PARTICIPANT_SENT_EVENT:Ha,PARTICIPANT_SENT_POST:Ea,PARTICIPANT_SENT_REEL:Fa,PARTICIPANT_SENT_STORY:Ga,PARTICIPANT_SENT_STORY_HIGHLIGHT:Ja,PARTICIPANT_STARTED_GROUP_AUDIO_CALL:Ta,PARTICIPANT_STARTED_GROUP_VIDEO_CALL:Va,PARTICIPANT_UNSENT_MESSAGE:na,PARTICIPANT_VIDEO_CALLED:Ra,RTC_XMA_FALLBACK:Fb,UNAVAILABLE_SNIPPET:F,UNAVAILABLE_STORY:Ob,UNKNOWN_USER_CREATED_GROUP:e,UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN:qa,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS:V,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS:U,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES:T,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS:S,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:ia,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:J,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:I,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:H,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:G,UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT:W,USER_SEND_ENCRYPTED_MESSAGE_FALLBACK:bb,USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK:ab,VIEW_ONCE_PHOTO_MESSAGE:Mb,VIEW_ONCE_VIDEO_MESSAGE:Nb,YOU_EPHEMERAL_RECORD_SCREEN:sa,YOU_EPHEMERAL_SETTING_CHANGE_DAYS:da,YOU_EPHEMERAL_SETTING_CHANGE_HOURS:ca,YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:ba,YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:aa,YOU_EPHEMERAL_SETTING_TURNED_OFF:ja,YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:N,YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:M,YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:L,YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:K,YOU_EPHEMERAL_TAKE_SCREENSHOT:ra,YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:wa});g.CURRENT_USER_CREATED_GROUP=b;g.CURRENT_USER_SEND_TEXT=s;g.CURRENT_USER_SEND_IMAGE=t;g.CURRENT_USER_SEND_VIDEO=u;g.CURRENT_USER_SEND_AUDIO=v;g.CURRENT_USER_SEND_GIF=w;g.CURRENT_USER_SEND_STICKER=x;g.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS=G;g.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT=W;g.CURRENT_USER_SEND_ATTACHMENT=X;g.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN=Y;g.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD=Z;g.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME=$;g.LOCALIZATION_TYPE=d}),98);
__d("MAWAdminMsgNormalized",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:return{contactIds:b,contents:[]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:a=b[0];var c=b[1];return{contactIds:[a],contents:[c]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:a=b[0];c=b[1];var e=b[2];return{contactIds:[a,c],contents:[e]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:a=b[0];c=b[1];e=b[2];return{contactIds:[a],contents:[c,e]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION:a=b[0];c=b[1];b[2];return{contactIds:[a],contents:[c]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:e=b[0];a=b[1];c=b[2];b[3];return{contactIds:[e],contents:[a,c]};case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.POLL_UNSENT_UPDATE:default:return{contactIds:[],contents:b}}}g.deconstructContactIdsFromAdminContent=a}),98);
__d("MAWAdminMsgTypesGrouped",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";b=[(a=d("MAWLocalizationType")).LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE,a.LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE,a.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE];c=[a.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME,a.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD,a.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN];e=[a.LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE,a.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE,a.LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE,a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE,a.LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE];f=[a.LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS,a.LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT,a.LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS,a.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS,a.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT,a.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS];d=[a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER,a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER,a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER,a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU,a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS,a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU,a.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_TWO_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU,a.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER];var h=[a.LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT,a.LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT,a.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT,a.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT,a.LOCALIZATION_TYPE.CURRENT_USER_GOT_DEMOTED,a.LOCALIZATION_TYPE.CURRENT_USER_GOT_PROMOTED,a.LOCALIZATION_TYPE.CURRENT_USER_SELF_DEMOTED,a.LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED,a.LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED,a.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU,a.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU,a.LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED,a.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY,a.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS,a.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY,a.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS,a.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ADMIN_ONLY,a.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ALL_MEMBERS],i=[a.LOCALIZATION_TYPE.CURRENT_USER_LEFT_GROUP,a.LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP],j=[a.LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP,a.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE,a.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME,a.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO,a.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME,a.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME,a.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME,a.LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME,a.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME],k=[a.LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP,a.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME,a.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE,a.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME,a.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO,a.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME,a.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME,a.LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP,a.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME,a.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME,a.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME,a.LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME],l=[a.LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE,a.LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE,a.LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE,a.LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE],m=[a.LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED,a.LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED,a.LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED,a.LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED],n=[a.LOCALIZATION_TYPE.TWO_USERS_CONNECTED,a.LOCALIZATION_TYPE.TWO_USERS_CONNECTED_ONE_MSPLIT],o=[a.LOCALIZATION_TYPE.CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK],p=[a.LOCALIZATION_TYPE.PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_FALLBACK,a.LOCALIZATION_TYPE.RTC_XMA_FALLBACK],q=[a.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE,a.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE],r=[a.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE,a.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE,a.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE],s=[a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS,a.LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET],t=[a.LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE,a.LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE],u=[a.LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL,a.LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL,a.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_AUDIO_CALL,a.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_VIDEO_CALL],v=[a.LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED,a.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_AUDIO_CALL,a.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_VIDEO_CALL,a.LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED,a.LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL,a.LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL,a.LOCALIZATION_TYPE.PARTICIPANT_AUDIO_CALLED,a.LOCALIZATION_TYPE.PARTICIPANT_VIDEO_CALLED],w=[a.LOCALIZATION_TYPE.CURRENT_USER_CREATED_GROUP,a.LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG,a.LOCALIZATION_TYPE.CURRENT_USER_SENT_EVENT,a.LOCALIZATION_TYPE.CURRENT_USER_SENT_POST,a.LOCALIZATION_TYPE.CURRENT_USER_SENT_REEL,a.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY,a.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY_HIGHLIGHT,a.LOCALIZATION_TYPE.CURRENT_USER_RECEIVED_STORY_MENTION_IG,a.LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT,a.LOCALIZATION_TYPE.CURRENT_USER_UNSENT_MESSAGE],x=[a.LOCALIZATION_TYPE.PARTICIPANT_CREATED_GROUP,a.LOCALIZATION_TYPE.UNKNOWN_USER_CREATED_GROUP,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_AUDIO,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,a.LOCALIZATION_TYPE.PARTICIPANT_SENT_EVENT,a.LOCALIZATION_TYPE.PARTICIPANT_SENT_POST,a.LOCALIZATION_TYPE.PARTICIPANT_SENT_REEL,a.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,a.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY_HIGHLIGHT,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT,a.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE,a.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE_IN_GROUP,a.LOCALIZATION_TYPE.PARTICIPANT_UNSENT_MESSAGE,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT];a=[a.LOCALIZATION_TYPE.EMPTY_SNIPPET];g.cutoverAdminMsgs=b;g.dualThreadCutoverAdminMsgs=c;g.deviceChanges=e;g.currentUserAddRemoveParticipant=f;g.otherUserAddRemoveParticipant=d;g.groupPermissionsChanged=h;g.participantLeftGroup=i;g.chatCustomizedByCurrentUser=j;g.chatCustomizedByOtherUser=k;g.pinnedMessageUpdate=l;g.limitSharingUpdate=m;g.twoUsersConnected=n;g.fallbackMsgFromCurrentUser=o;g.fallbackMsgFromOtherUser=p;g.currentUserBumpsMessage=q;g.otherUserBumpsMessage=r;g.ephemeralSettingChanges=s;g.icdcAlerts=t;g.callActionToNotifyAbout=u;g.callActionNotToNotifyAbout=v;g.otherNonAdminMsgToBeBumped=w;g.otherNonAdminMsgToBeMarkedAsUnread=x;g.otherNonAdminMsgToNotTriggerUpdate=a}),98);
__d("MAWAnimatedImageThumbnailStore",[],(function(a,b,c,d,e,f){"use strict";var g=new Map();function a(a){return(a=g.get(a))!=null?a:null}function b(a,b){g.set(a,b)}f.getThumbnailSpec=a;f.setThumbnailSpec=b}),66);
__d("MAWBlockUtils",["I64","LSContactUserBlockAction","LSIntEnum","LSThreadBitOffset","ReQL","asyncToGeneratorRuntime","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k||d("react")).useCallback,m=[0,31,35,55,56,58,24,25,19,85],n=[0,31,35,55,56,58,24,25,19,85,8,22],o=[35,19,85,56,24,25];function a(){var a=(h||(h=c("useReStore")))();return l(function(e,g){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.participants).getKeyRange(e)));if(b==null)return;var h=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(b.threadKey).filter(function(a){return(i||(i=d("I64"))).equal(a.threadType,(j||(j=d("LSIntEnum"))).ofNumber(15))})));if(h==null)return;b=(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactUserBlockAction").MN_BLOCK))?d("LSThreadBitOffset").clear(m,h.capabilities,h.capabilities2,h.capabilities3,h.capabilities4,h.capabilities5):(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactUserBlockAction").FB_BLOCK))?d("LSThreadBitOffset").clear(n,h.capabilities,h.capabilities2,h.capabilities3,h.capabilities4,h.capabilities5):d("LSThreadBitOffset").set(o,h.capabilities,h.capabilities2,h.capabilities3,h.capabilities4,h.capabilities5);var k=b[0],l=b[1];yield a.runInTransaction(function(a){var b=babelHelpers["extends"]({},h,{capabilities:k,capabilities2:l});return a.threads.put(b)},"readwrite",void 0,void 0,f.id+":137")})())},[a])}g.clearedMnBlockCapabilities=m;g.clearedFbBlockCapabilities=n;g.useChangeThreadBlockCapabilities=a}),98);
__d("MAWMediaPreProcessQpl",["MAWSendQplToServer","Random","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=typeof self.BigInt==="function",i=c("justknobx")._("3427")*1e3;function a(a,b){var e=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);a=d("MAWSendQplToServer").startQplUserFlow(c("qpl")._(1056840460,"718"),{bool:{has_big_int_support:h},string:{preprocess_type:a}},e,i);b&&a.addAnnotations({"int":{input_file_size:b.size},string:{mimetype:b.type}});return a}g.startMediaPreProcessQpl=a}),98);
__d("WABlobToArrayBuffer",["Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return"arrayBuffer"in a&&typeof a.arrayBuffer==="function"?a.arrayBuffer():new(h||(h=b("Promise")))(function(b,d){var e=new FileReader();e.onload=function(){var a=e.result;a instanceof ArrayBuffer?b(a):d(c("err")("blobToArrayBuffer got error because result is not ArrayBuffer: "+typeof a))};e.onerror=function(){var a;d((a=e.error)!=null?a:c("err")("blobToArrayBuffer got unknown error"))};e.readAsArrayBuffer(a)})}g.blobToArrayBuffer=a}),98);
__d("WABlobToImage",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a){var c;return new(g||(g=b("Promise")))(function(b,d){c=new Image();var e=URL.createObjectURL(a),f=function(){return URL.revokeObjectURL(e)};c.onload=function(){b({image:c,releaseImageMemory:f})};c.onerror=function(){f(),d("loadBlobToImage error")};c.src=e})}f.blobToImage=a}),66);
__d("WACalculateBoundOutputSize",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return b!=null?g(a.width,a.height,b.width,b.height):{outputWidth:a.width,outputHeight:a.height}}function g(a,b,c,d){var e=a,f=b;a>b?a>c&&(f*=c/e,e=c):f>d&&(e*=d/f,f=d);return{outputWidth:Math.round(Math.max(e,1)),outputHeight:Math.round(Math.max(f,1))}}f.calculateBoundOutputSize=a}),66);
__d("WADecodeImage",["WABlobToImage","WACalculateBoundOutputSize","WATagsLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("WATagsLogger").TAGS(["decodeImage"]);e=typeof self.createImageBitmap==="function"&&typeof self.OffscreenCanvas==="function";f=e?a:c;function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){j.DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["start decoding image without DOM: ",""])),a.name);a=(yield self.createImageBitmap(a));var c=a.width,e=a.height;b=d("WACalculateBoundOutputSize").calculateBoundOutputSize({width:c,height:e},b);var f=b.outputWidth;b=b.outputHeight;var g=new self.OffscreenCanvas(f,b);g=m({canvas:g,inputWidth:c,inputHeight:e,outputWidth:f,outputHeight:b,image:a});return g});return k.apply(this,arguments)}function c(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){j.DEV(i||(i=babelHelpers.taggedTemplateLiteralLoose(["start decoding image with DOM: ",""])),a.name);a=(yield d("WABlobToImage").blobToImage(a));var c=a.image;a=a.releaseImageMemory;var e=c.width,f=c.height;b=d("WACalculateBoundOutputSize").calculateBoundOutputSize({width:e,height:f},b);var g=b.outputWidth;b=b.outputHeight;var h=document.createElement("canvas");h=m({canvas:h,inputWidth:e,inputHeight:f,outputWidth:g,outputHeight:b,image:c});a();return h});return l.apply(this,arguments)}function m(a){var b=a.canvas,c=a.image,d=a.inputWidth,e=a.inputHeight,f=a.outputWidth;a=a.outputHeight;b.width=f;b.height=a;var g=b.getContext("2d");g.fillStyle="rgb(255,255,255)";g.fillRect(0,0,b.width,b.height);g.drawImage(c,0,0,d,e,0,0,f,a);b=g.getImageData(0,0,f,a);return b}g.canDecodeWithoutDOM=e;g.decodeImage=f;g.decodeImageWithoutDOM=a;g.decodeImageWithDOM=c}),98);
__d("WAPromiseTimeout",["Promise","WACustomError"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,c,e){var f=null,g=new(h||(h=b("Promise")))(function(a,b){f=setTimeout(function(){b(new(d("WACustomError").TimeoutError)(e)),clearTimeout(f)},c)});return h.race([a,g])["finally"](function(){clearTimeout(f)})};g.promiseTimeout=a}),98);
__d("XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/static_resources/webworker_v1/init_script/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("WorkerBundleResource",["TrustedTypesWebWorkerScriptURLPolicy","XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder","getWorkerInitScriptSPINParams","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d,e,f,g=(d=b==null?void 0:b.logImportScriptsErrors)!=null?d:!1,i=(e=b==null?void 0:b.name)!=null?e:a.name,j=new window.URL(a.url,window.location.href).href;if(j==null){var k=new Error("Can't start up worker without a resource url.");k.stack;throw k}var l=c("nullthrows")((f=c("XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder").buildUri({}).addQueryParams(c("getWorkerInitScriptSPINParams")()))==null||(f=f.addQueryParams(h()))==null?void 0:f.toString()),m=new Worker(c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(l),{name:i});for(var n=arguments.length,o=new Array(n>2?n-2:0),p=2;p<n;p++)o[p-2]=arguments[p];m.postMessage({bundleUrl:j,initArgs:o,isDev:!1,resource:a,logImportScriptsErrors:g,type:"sr-init"});return m}function h(){var a=new URLSearchParams(window.location.search),b=new Map();a.forEach(function(a,c){["gk_enable","gk_enable[]","gk_disable","gk_disable[]"].includes(c)&&b.set(c,a)});return b}g.createDedicatedWebWorker=a}),98);
__d("WAMediaWasmWorkerClient",["Promise","WAByteArray","WACustomError","WAMediaWasmWorkerResource","WAPromiseTimeout","WAResultOrError","WATagsLogger","WorkerBundleResource","WorkerClient","WorkerMessagePort","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=d("WATagsLogger").TAGS(["WAMediaWasmWorkerClient"]);c=d("WorkerBundleResource").createDedicatedWebWorker(c("WAMediaWasmWorkerResource"));var F=new(d("WorkerMessagePort").WorkerSyncedMessagePort)(c,"WAMediaWasmWorker");d("WorkerClient").init(F);E.DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["initiated."])));F.addMessageListener("log",function(a){var b=a.logType;a=a.message;switch(b){case"dev":E.DEV(i||(i=babelHelpers.taggedTemplateLiteralLoose(["from worker: ",""])),a);break;case"error":E.ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["worker error: ",""])),a);break;default:b}});function a(a){var b=a.input;a=a.eventFlow;return M({operation:"webpCheck",input:d("WAByteArray").uint8ArrayToBuffer(b)},a)}function e(a){var b=a.input;a=a.eventFlow;E.LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["mp4RepairMuxInWorker processing video"])));return M({operation:"mp4RepairMux",input:d("WAByteArray").uint8ArrayToBuffer(b)},a)}function f(a){return G.apply(this,arguments)}function G(){G=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.input,e=a.forceTranscode;a=a.eventFlow;E.LOG(n||(n=babelHelpers.taggedTemplateLiteralLoose(["transcodeToMp4InWorker processing video"])));var f=L();E.LOG(o||(o=babelHelpers.taggedTemplateLiteralLoose(["sending input bytes to worker, requestId: ",""])),f);var g=(yield O());if(!g.success)return g;g=g.value;var h=g.onMessageOnce("transcodeToMp4Response",function(a){return a.requestId===f});c=d("WAByteArray").uint8ArrayToBuffer(c);var i=c?[c]:void 0;g.postMessage({input:c,requestId:f,forceTranscode:e,type:"transcodeToMp4Request"},i);a==null||a.addPoint("sent_request_to_media_worker_start");g=(yield h);E.LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",", success: ",""])),f,g.output.success);if(g.output.success){c=g.output.value;a==null||a.addPoint("sent_request_to_media_worker_end");return d("WAResultOrError").makeResult(c)}E.ERROR(q||(q=babelHelpers.taggedTemplateLiteralLoose(["requestId: ",", error: ",""])),f,g.output.error.errorMessage);a==null||a.addPoint("sent_request_to_media_worker_end");return(D||(D=b("Promise"))).reject((e=g.output.error)==null?void 0:e.errorType)});return G.apply(this,arguments)}function H(a){var b=a.imageData,c=a.quality,e=a.useHdScanConfig;a=a.eventFlow;return M({operation:"progressiveJpegEncode",input:d("WAByteArray").uint8ArrayToBuffer(b.data),height:b.height,width:b.width,quality:c,useHdScanConfig:e},a)}function I(a){return J.apply(this,arguments)}function J(){J=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.file,c=a.quality,d=a.useHdScanConfig,e=a.eventFlow;a=a.maxOutputResolution;var f=(yield b.arrayBuffer());return M({operation:"progressiveJpegEncodeWithFile",input:f,fileName:b.name,fileType:b.type,quality:c,useHdScanConfig:d,maxOutputWidth:a==null?void 0:a.width,maxOutputHeight:a==null?void 0:a.height},e)});return J.apply(this,arguments)}function K(a){E.LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["start prewarming media wasm worker, operation: ",""])),a),F.postMessage({type:"prewarm",operation:a})}var L=function(){var a=0;return function(){return++a}}();function M(a,b){return N.apply(this,arguments)}function N(){N=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=L();E.LOG(r||(r=babelHelpers.taggedTemplateLiteralLoose(["sending input bytes to worker, requestId: ",""])),c);var e=(yield O(b));if(!e.success)return e;e=e.value;var f=e.onMessageOnce("mediaOperationResponse",function(a){return a.requestId===c}),g=a.input?[a.input]:void 0;e.postMessage(babelHelpers["extends"]({},a,{requestId:c,type:"mediaOperationRequest"}),g);b==null||b.addPoint("sent_request_to_media_worker_start");e=(yield f);a=e.output;if(a.success){E.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",""])),c);b==null||b.addPoint("sent_request_to_media_worker_end",{bool:{isOpfsSyncSupported:a.value.isOpfsSyncSupported}});return d("WAResultOrError").makeResult(a.value.bytes)}E.ERROR(t||(t=babelHelpers.taggedTemplateLiteralLoose(["requestId: ",", error: ",""])),c,a.error.errorMessage);b==null||b.addPoint("sent_request_to_media_worker_fail");return d("WAResultOrError").makeError(a.error.errorType)});return N.apply(this,arguments)}function O(a){a==null||a.addPoint("get_connected_worker_port_start");var b=3e4;return d("WAPromiseTimeout").promiseTimeout(F.fullyConnected,b).then(function(b){a==null||a.addPoint("get_connected_worker_port_end");return d("WAResultOrError").makeResult(b)})["catch"](function(b){a==null||a.addPoint("get_connected_worker_port_fail",{string:{workerPortFailure:b instanceof d("WACustomError").TimeoutError?"timeout":"runtime-error"}});if(b instanceof d("WACustomError").TimeoutError)return d("WAResultOrError").makeError("worker-connection-timeout");E.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["worker-connection-runtime-error: ",""])),b);return d("WAResultOrError").makeError("worker-connection-runtime-error")})}function P(a){return Q.apply(this,arguments)}function Q(){Q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.file,e=a.maxDimension,f=a.thumbnailBlobByteSizeLimitBytes;a=a.thumbnailQualityPercentageWhenAboveByteSizeLimit;var g=L();E.LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["sending input to worker, requestId: ",""])),g);var h=(yield O());if(!h.success)return h;h=h.value;var i=h.onMessageOnce("mediaGenerateImageThumbnailResponse",function(a){return a.requestId===g}),j=(yield c.arrayBuffer()),k=j?[j]:void 0;h.postMessage({input:j,fileName:c.name,fileType:c.type,maxDimension:e,requestId:g,thumbnailBlobByteSizeLimitBytes:f,thumbnailQualityPercentageWhenAboveByteSizeLimit:a,type:"mediaGenerateImageThumbnailRequest"},k);h=(yield i);E.LOG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",", success: ",""])),g,h.output.success);if(h.output.success)return d("WAResultOrError").makeResult(h.output.value);E.ERROR(w||(w=babelHelpers.taggedTemplateLiteralLoose(["requestId: ",", error: ",""])),g,h.output.error.errorMessage);return(D||(D=b("Promise"))).reject(h.output.error.errorMessage)});return Q.apply(this,arguments)}function R(a,b){return S.apply(this,arguments)}function S(){S=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){E.LOG(x||(x=babelHelpers.taggedTemplateLiteralLoose(["start media storage shadow test"])));var c=L(),e=(yield O());if(!e.success)return d("WAResultOrError").makeError({errorName:"port-init",errorMessage:e.error});e=e.value;var f=e.onMessageOnce("mediaStorageShadowTestResponse",function(a){return a.requestId===c});e.postMessage({input:a,requestId:c,storageType:b,type:"mediaStorageShadowTestRequest"});e=(yield f);a=e.output;if(a.success){E.LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["received storage results from worker, requestId: ",""])),c);return d("WAResultOrError").makeResult(a.value)}E.ERROR(z||(z=babelHelpers.taggedTemplateLiteralLoose(["media storage test failed for storageType: ",", error: ",""])),b,a.error);return d("WAResultOrError").makeError({errorName:a.error.errorName,errorMessage:a.error.errorMessage})});return S.apply(this,arguments)}function T(a){return U.apply(this,arguments)}function U(){U=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.rawMimeType,c=a.input;a=a.eventFlow;var e=L();E.LOG(A||(A=babelHelpers.taggedTemplateLiteralLoose(["start kaleidoscope classifiy in worker, requestId: ",""])),e);var f=(yield O(a));if(!f.success)return f;f=f.value;var g=f.onMessageOnce("kaleidoscopeClassifyResponse",function(a){return a.requestId===e});f.postMessage({rawMimeType:b,input:c,requestId:e,type:"kaleidoscopeClassifyRequest"});a==null||a.addPoint("sent_request_to_media_worker_start");f=(yield g);b=f.output;if(b.success){E.LOG(B||(B=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",""])),e);a==null||a.addPoint("sent_request_to_media_worker_end");return b}E.ERROR(C||(C=babelHelpers.taggedTemplateLiteralLoose(["kaleidoscope classifiy error: ",", requestId: ",","])),b.error,e);a==null||a.addPoint("sent_request_to_media_worker_fail");return d("WAResultOrError").makeError(b.error)});return U.apply(this,arguments)}g.webpCheckInWorker=a;g.mp4RepairMuxInWorker=e;g.transcodeToMp4InWorker=f;g.progressiveJpegEncodeInWorker=H;g.progressiveJpegEncodeInWorkerWithFile=I;g.prewarmMediaWasmWorker=K;g.getConnectedWorkerPortWithTimeout=O;g.generateImageThumbnailInWorker=P;g.runMediaStorageShadowTestWasmWorker=R;g.kaleidoscopeClassifyInWorker=T}),98);
__d("cometIsMimeTypeForMedia",["FBLogger","UFICommentFileInputAcceptValues"],(function(a,b,c,d,e,f,g){"use strict";var h={file:null,photo:null,video:null},i={"image/gif":"video","image/webp":"video"};function j(a){return a.split(",").map(function(a){return a.trim()}).map(function(a){return a.replace(/\/\*$/,"/")})}function k(a,b,d){h[a]==null&&(h[a]=j(d));d=h[a];if(d==null)throw c("FBLogger")("ufi2").mustfixThrow("CometIsMimeTypeForMedia prefixes can't be null");var e=i[b];return e!=null?e===a:d.some(function(a){return b.startsWith(a)})}function a(a){return k("photo",a,d("UFICommentFileInputAcceptValues").photos)}function b(a){return k("video",a,d("UFICommentFileInputAcceptValues").videos)}function e(a){return k("file",a,d("UFICommentFileInputAcceptValues").files)}g.mimeTypeAcceptStringToArray=j;g.isMimeTypeForPhoto=a;g.isMimeTypeForVideo=b;g.isMimeTypeForFile=e}),98);
__d("MAWImagePreProcess",["MAWGetImageSpec","MAWImageUtils","MAWMediaPreProcessQpl","MWFBLogger","Promise","WABlobToArrayBuffer","WACustomError","WADecodeImage","WAMediaWasmWorkerClient","WAPromiseTimeout","WAResultOrError","asyncToGeneratorRuntime","cometIsMimeTypeForMedia","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p=12e4,q=d("MWFBLogger").MWMediaLogger().tags(["ImagePreProcess"]),r=85,s=["image/heic"];function e(a,e,f,g){g===!0?g={height:c("justknobx")._("187"),width:c("justknobx")._("187")}:g={height:c("justknobx")._("2144"),width:c("justknobx")._("2144")};var h;e?h=a.type==="image/webp"?(o||(o=b("Promise"))).resolve(a):v(a,"image/webp",e,f,g):h=a.type==="image/gif"?(o||(o=b("Promise"))).resolve(a):v(a,"image/jpeg",!1,f,g);f=a.type==="image/gif";return f?h.then(function(a){return(o||(o=b("Promise"))).all([d("MAWGetImageSpec").getImageSpec(a),a])}).then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b[0];b=b[1];return{file:b,imageSpec:c,plaintext:yield d("WABlobToArrayBuffer").blobToArrayBuffer(b),thumbnailUrlAndSpec:null,type:u(a,e)}});return function(a){return c.apply(this,arguments)}}()):h.then(function(e){return(o||(o=b("Promise"))).all([B(a,c("justknobx")._("2033")),d("MAWGetImageSpec").getImageSpec(e),e])}).then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var f=c[0],g=c[1];c=c[2];return(o||(o=b("Promise"))).resolve({file:c,imageSpec:g,plaintext:yield d("WABlobToArrayBuffer").blobToArrayBuffer(c),thumbnailUrlAndSpec:f,type:u(a,e)})});return function(a){return c.apply(this,arguments)}}())}function f(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){var f=a.URL.createObjectURL(b),g=e===!0?c("justknobx")._("2545"):c("justknobx")._("2033");g=(yield d("MAWImageUtils").urlToThumbnailSpec(f,g));var h={height:g.height,width:g.width};return{file:b,imageSpec:h,thumbnailSpec:g,type:u(b,e),url:f}});return t.apply(this,arguments)}function u(a,b){return b===!0?"sticker":a.type==="image/gif"?"animated_image":"image"}function v(a,b,c,d,e){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g){q.DEBUG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["start image transcode ",""])),a.name);var h=d("MAWMediaPreProcessQpl").startMediaPreProcessQpl("image",a);h.addAnnotations({"int":{total_number_of_files:f!=null?f:1},string:{targetMimetype:c}});var i=function(){return y(a,c,r,e,g).then(function(a){return a.success?a.value:(o||(o=b("Promise"))).reject("runtime-error")})["catch"](function(a){q.MUSTFIX(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Error while transcoding image through browser api: ",""])),String(a));h.addPoint("native_encode_failure",{string:{native_encode_error:a.toString()}});return null})};f=c==="image/jpeg"?yield d("WAPromiseTimeout").promiseTimeout(z(a,r,h,g).then(function(a){return a.success?a.value:(o||(o=b("Promise"))).reject(a.error)}),p)["catch"](function(a){a instanceof d("WACustomError").TimeoutError?h.addPoint("mozjpeg_encode_timeout"):h.addPoint("mozjpeg_encode_failure",{string:{mozjpeg_encode_error:a.toString()}});return i()}):yield i();if(f==null){h.endFail("unable_to_transcode_image");throw q.mustfixThrow("unable to transcode image")}h.endSuccess({"int":{compressed_file_size:f.size}});return f});return w.apply(this,arguments)}function x(b,c){b=a.URL.createObjectURL(b);return d("MAWImageUtils").urlToThumbnail(b,c)}function y(b,c,e,f,g){q.DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["start image transcoding through browser api"])));var j=a.URL.createObjectURL(b),k=b.name;return d("MAWImageUtils").urlToFile(j,c,e,f,g).then(function(a){a=a.blob;q.DEBUG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["finished image transcoding through browser api: "," bytes"])),a.size);return d("WAResultOrError").makeResult(new File([a],k,{type:c}))})}function z(a,b,c,d){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){q.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["start process image through wasm, file name: ",""])),a.name);d("WAMediaWasmWorkerClient").prewarmMediaWasmWorker("progressiveJpegEncode");c.addPoint("prewarm_worker_started");var f;d("WADecodeImage").canDecodeWithoutDOM&&(f=(yield d("WAMediaWasmWorkerClient").progressiveJpegEncodeInWorkerWithFile({eventFlow:c,file:a,maxOutputResolution:e,quality:b,useHdScanConfig:!0})));if(f==null||!f.success&&f.error==="decode-image-error"){e=(yield d("WADecodeImage").decodeImageWithDOM(a,e)["catch"](function(a){c.addPoint("image_decode_failure");throw a}));c.addPoint("image_decode_success");f=(yield d("WAMediaWasmWorkerClient").progressiveJpegEncodeInWorker({eventFlow:c,imageData:e,quality:b,useHdScanConfig:!0}))}if(!f.success)return f;c.addPoint("pjpeg_encode_success");q.DEBUG(n||(n=babelHelpers.taggedTemplateLiteralLoose(["finished jpeg transcoding through mozjpeg: "," bytes"])),f.value.byteLength);return d("WAResultOrError").makeResult(new File([f.value],a.name,{type:"image/jpeg"}))});return A.apply(this,arguments)}function B(e,f){var g=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=a.URL.createObjectURL(e),c=(yield d("MAWImageUtils").urlToThumbnail(b,f));a.URL.revokeObjectURL(b);return c});return function(){return c.apply(this,arguments)}}();if(!d("WADecodeImage").canDecodeWithoutDOM)return g();var h=c("justknobx")._("2338")*1024,i=c("justknobx")._("2340");return d("WAPromiseTimeout").promiseTimeout(d("WAMediaWasmWorkerClient").generateImageThumbnailInWorker({file:e,maxDimension:f,thumbnailBlobByteSizeLimitBytes:h,thumbnailQualityPercentageWhenAboveByteSizeLimit:i}).then(function(a){if(!a.success)throw q.mustfixThrow("urlToFileInWorker error: "+a.error);return{height:a.value.height,jpegThumbnail:a.value.blob,width:a.value.width}})["catch"](function(a){q.catching(a).MUSTFIX(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Error while processing url to thumbnail in worker"])));throw a}),p)["catch"](function(a){return g()})}function C(a){if(a==="image/gif"||a==="image/webp")return!0;return!d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a)?!1:!s.includes(a)}g.imagePreprocess=e;g.optimisticImagePreprocess=f;g.getJpegThumbnailInfo=x;g.generateImageThumbnailInWorkerWithFallback=B;g.isSupportedImageFileType=C}),98);
__d("WAWebDataUrlToBlob",["err"],(function(a,b,c,d,e,f,g){var h=/^data:((.*?)(;charset=.*?)?)(;base64)?,/;function a(a){var b=a.match(h);if(!b)throw c("err")("invalid data URI");var d=b[2]?b[1]:"text/plain"+(b[3]||";charset=US-ASCII"),e=!!b[4];a=a.slice(b[0].length);e?b=atob(a):b=decodeURIComponent(a);e=new ArrayBuffer(b.length);a=new Uint8Array(e);for(e=0;e<b.length;e+=1)a[e]=b.charCodeAt(e);return new Blob([a],{type:d})}g.dataURLtoBlob=a}),98);
__d("MAWImageUtils",["FBLogger","MAWAnimatedImageThumbnailStore","MAWDbMedia","MAWFrontendMediaUtils","MAWImagePreProcess","MWPBumpEntityKey","Promise","WABlobToArrayBuffer","WACalculateBoundOutputSize","WAWebDataUrlToBlob","err","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i="image/jpeg",j=100,k=c("justknobx")._("2338")*1024,l=c("justknobx")._("2340"),m=c("justknobx")._("2545");function n(a,d){d===void 0&&(d=!0);var e;return new(h||(h=b("Promise")))(function(b,f){e=new Image();var g=/^(?:data|blob):/.test(a);d&&!g&&e.setAttribute("crossOrigin","anonymous");e.onload=b;e.onabort=function(){f(c("FBLogger")("messenger_web").mustfixThrow("Error loading image from provided URL"))};e.onerror=function(){f(c("FBLogger")("messenger_web").mustfixThrow("Wrong blob type"))};e.src=a}).then(function(){return e})}function o(a){return window.fetch(a,{cache:"no-store",method:"GET",mode:"cors"}).then(function(a){if(!a.ok)throw c("FBLogger")("messenger_web").mustfixThrow("Failed to fetch image: %s %s",a.status,a.statusText);return a.blob()}).then(function(a){return new(h||(h=b("Promise")))(function(b,d){var e=new FileReader();e.onloadend=function(){var a=new Image();a.onload=function(){b(a)};a.onerror=function(){d(function(){throw c("FBLogger")("messenger_web").mustfixThrow("Error loading image from blob data")})};typeof e.result==="string"?a.src=e.result:d(c("err")("FileReader result is not a string"))};e.onerror=function(){d(c("err")("Error reading blob as data URL"))};e.readAsDataURL(a)})})["catch"](function(b){throw c("FBLogger")("messenger_web").mustfixThrow("Failed to load image from URL: %s, %s",a,String(b))})}function p(a,c,e,f){e===void 0&&(e=!1);if(a.toBlob)return new(h||(h=b("Promise")))(function(b){var d=f==null?void 0:f/100;a.toBlob(b,c,d)}).then(function(d){var f=k,g=l/100;return e&&d.size>=f?new(h||(h=b("Promise")))(function(b){a.toBlob(b,c,g)}):d});else{var g;d("MWPBumpEntityKey").bumpEntityKey("maw","data_url_to_blob");var i=(g=d("WAWebDataUrlToBlob").dataURLtoBlob)!=null?g:window.dataURLtoBlob;return(h||(h=b("Promise"))).resolve(i(a.toDataURL(c))).then(function(d){var f=k,g=l/100;return e&&d.size>=f?(h||(h=b("Promise"))).resolve(i(a.toDataURL(c,g))):d})}}function q(a,e,f,g,i,j){j===void 0&&(j=!1);j=j?o(a):n(a);return j.then(function(a){var b=a.naturalWidth,c=a.naturalHeight,h=d("WACalculateBoundOutputSize").calculateBoundOutputSize({height:c,width:b},i),j=h.outputHeight,k=h.outputWidth;h=document.createElement("canvas");h.width=k;h.height=j;var l=h.getContext("2d");g!==!0&&s(h);l.drawImage(a,0,0,b,c,0,0,k,j);return p(h,e,!1,f).then(function(a){return{blob:a,height:j,width:k}})})["catch"](function(a){return(h||(h=b("Promise"))).reject(a!=null?a:c("err")("Error loading image from URL"))})}function a(a,b){return n(a).then(function(a){var c=document.createElement("canvas"),e=a.naturalWidth,f=a.naturalHeight,g=c.getContext("2d");f=t(f,e,b);c.width=f.width;c.height=f.height;var h=c.width,j=c.height;r(c);g.drawImage(a,0,0,h,j);return p(c,i,!0).then(function(a){return d("WABlobToArrayBuffer").blobToArrayBuffer(a).then(function(a){return{height:j,jpegThumbnail:a,width:h}})})})}function e(a,b){return n(a).then(function(a){a=t(a.naturalHeight,a.naturalWidth,b);return{height:a.height,width:a.width}})}function r(a){var b=a.getContext("2d");b.fillStyle="rgb(247,247,247)";b.fillRect(0,0,a.width,a.height)}function s(a){var b=a.getContext("2d");b.fillStyle="rgb(255,255,255)";b.fillRect(0,0,a.width,a.height)}function t(a,b,c){b=b!=null?b:c;a=a!=null?a:c;b>a?b>c&&(a*=c/b,b=c):a>c&&(b*=c/a,a=c);return{height:Math.round(Math.max(a,1)),width:Math.round(Math.max(b,1))}}function f(a){return n(a).then(function(a){return{height:a.naturalHeight,width:a.naturalWidth}})}function u(a,e,f,g){g===void 0&&(g=!1);var i=d("MAWAnimatedImageThumbnailStore").getThumbnailSpec(a);if(i)return(h||(h=b("Promise"))).resolve(i);i=q(a,"image/gif",void 0,void 0,void 0,g);return i==null?null:i.then(function(b){var c=new File([b.blob],"gif",{type:"image/gif"});return d("MAWImagePreProcess").generateImageThumbnailInWorkerWithFallback(c,Math.max(f!=null?f:b.width,e!=null?e:b.height)).then(function(b){d("MAWAnimatedImageThumbnailStore").setThumbnailSpec(a,b);return b})})["catch"](function(b){throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed while generating thumbnail for GIF. URL: ",a,b)})}function v(a){var c=a==null?void 0:a.file,e=a==null?void 0:a.width,f=a==null?void 0:a.height;if(c==null||e==null||f==null)return(h||(h=b("Promise"))).resolve(a);var g=d("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(c.type,!0);g=g.mediaType;return g!==d("MAWDbMedia").MEDIA_TYPE.GIF?(h||(h=b("Promise"))).resolve(a):d("MAWImagePreProcess").generateImageThumbnailInWorkerWithFallback(c,Math.max(e,f)).then(function(a){var b=new File([a.jpegThumbnail],"secure_threads_xma_preview_thumbnail",{type:"image/jpeg"});return{file:b,height:a.height,width:a.width}})}g.TYPE_JPEG=i;g.IMG_THUMB_MAX_EDGE=j;g.STICKER_THUMBNAIL_MAX_SIZE=m;g.canvasToBlob=p;g.urlToFile=q;g.urlToThumbnail=a;g.urlToThumbnailSpec=e;g.boundHeightWidth=t;g.urlToImageSpec=f;g.generateGIFThumbnail=u;g.generatePreviewBlobForShare=v}),98);
__d("MAWGetImageSpec",["MAWImageUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function c(b,c){var e=a.URL.createObjectURL(b);return d("MAWImageUtils").urlToFile(e,c!=null?c:b.type).then(function(a){var b=a.height;a=a.width;return{height:b,width:a}})}function e(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=a.URL.createObjectURL(b);var c=(yield d("MAWImageUtils").urlToImageSpec(b));a.URL.revokeObjectURL(b);return c});return h.apply(this,arguments)}g.getImageSpec_DEPRECATED=c;g.getImageSpec=e}),98);
__d("MAWMpsGating",["gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function h(){return c("gkx")("10465")}function a(){return c("gkx")("10536")||j()}function b(){return c("gkx")("6272")||j()}function d(){return c("justknobx")._("3406")}function e(){return c("gkx")("5823")||j()}function i(){return c("gkx")("16913")||j()}function f(){return j()||c("gkx")("16365")}function j(){return h()||c("gkx")("17181")}function k(){return h()||c("gkx")("17846")}function l(){return c("gkx")("17946")}function m(){return i()&&(j()||c("gkx")("18142"))}g.isFullMpsEnabled=h;g.isMpsWaAdminMsgsEnabled=a;g.isMpsAppDataAndForwardingEnabled=b;g.isMpsAdminMsgsGroupNotification=d;g.isMpsThreadsConsistencyEnabled=e;g.isMpsMessagePublishSeviceEnabled=i;g.isSearchOnMpsEnabled=f;g.isMpsMessageRendering=j;g.isMpsSnippetsCacheServiceEnabled=k;g.isEBMessageProbeEnabled=l;g.isXmaWithoutAssociatedMsg=m}),98);
__d("MsgrWebGating",["MAWMpsGating","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("15418")||d("MAWMpsGating").isMpsMessageRendering()}g.isQuotedMessagesInLsEnabled=a}),98);
__d("WAHashUtils",["WABase64"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("WABase64").encodeB64UrlSafe(a,b)}function b(a,b){return d("WABase64").encodeB64UrlSafe(a,b)}function c(a){return a}function e(a){return a}function f(a){return""+a.slice(0,3)}g.toPlaintextHash=a;g.toCiphertextHash=b;g.stringToPlaintextHash=c;g.toHashedPlaintextHash=e;g.sanitisePlaintextHash=f}),98);
__d("getReplyContentForNoteReply",["WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=a.author,e=a.msgId;c=d("WAJids").authorToUserId(c,b);b=(b=a.quote)==null||(b=b.content.msgContent)==null?void 0:b.content;a=(a=a.quote)==null?void 0:a.content.expirationTs;return{isNoteReply:!0,replyMediaExpirationTimestampMs:a!=null?a*1e3:void 0,replyMessageText:b,replySourceId:e,replyToUserId:c}}g["default"]=a}),98);
__d("MAWBridgeMsg",["FBLogger","LSHotEmojiSize","LSIntEnum","MAWDbMsg","MAWImageUtils","MAWMsgType","MAWUserJidWrapper","MAWVault","MAWXMAUtils","MWPBumpEntityKey","MsgrWebGating","WAAssertUnreachable","WAHashUtils","WAJids","WALogger","WAMsgType","WATimeUtils","getReplyContentForNoteReply","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return;if(a.isForwarded===!0&&a.type!==d("MAWMsgType").MSG_TYPE.STICKER)return{replyType:"FORWARD"};if(d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType))return{replyToMsgId:a.msgId,replyToUserId:d("WAJids").authorToUserId(a.author,b),replyType:"HIGHLIGHTS_TAB_POST_REPLY",timestampMs:a.sortOrderMs!=null?d("WATimeUtils").castToMillisTime(a.sortOrderMs):null};if(d("MAWXMAUtils").isXMAStoryMention(a.xmaMessageType)||d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType)){var c=a.threadJid;c=d("WAJids").interpretAsUserJid(c);var e;c!=null&&(e=d("WAJids").userIdFromJid(c));return d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType)?{mentionedUserId:e!=null?e:b,replyType:"FB_POST_MENTION",timestampMs:a.sortOrderMs!=null?d("WATimeUtils").castToMillisTime(a.sortOrderMs):null}:{mentionedUserId:e!=null?e:b,replyType:"FB_STORY_MENTION",timestampMs:a.sortOrderMs!=null?d("WATimeUtils").castToMillisTime(a.sortOrderMs):null}}if(d("MAWXMAUtils").isXMAStoryShare(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType)||d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType))return;c=(c=a.quote)==null?void 0:c.content;if(c==null)return;var f=c.author,g=c.expirationTs,h=c.mediaId,i=c.msgContent,j=c.msgId,k=c.plaintextHash,l=c.sourceId,m=c.ts,n=c.type;c=c.xmaMessageType;f=d("WAJids").authorToUserId(f,b);if(n===d("WAMsgType").NOTE_REPLY)return{noteContent:i==null?void 0:i.content,replyMediaExpirationTimestampMs:g!=null?d("WATimeUtils").castToMillisTime(g*1e3):void 0,replyToMsgId:a.msgId,replyToUserId:f,replyType:"LIGHTWEIGHT_STATUS"};if(n===d("MAWMsgType").MSG_TYPE.XMA&&d("MAWXMAUtils").isXMAStoryReply(c)){if(l==null)return;b=d("MAWXMAUtils").isXMAStoryProducerReply(c);return b?{replyType:"FB_PRODUCER_STORY_REPLY",storyMediaId:h!=null?h:void 0,storyMediaPlaintextHash:k,storyMsgType:h!=null?d("MAWMsgType").MSG_TYPE.IMAGE:void 0,storyOwnerId:f,storyUrl:l,timestampMs:m!=null?d("WATimeUtils").castUnixTimeToMillisTime(m):null}:{replyType:"STORY",storyMediaPlaintextHash:k,storyOwnerId:f,storyUrl:l,timestampMs:m!=null?d("WATimeUtils").castUnixTimeToMillisTime(m):null}}if(j!=null)return{isBumpMsg:a.type===d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE,replyToMsgId:j,replyType:"MESSAGE"}}function k(a,b,e){var f,g;f=((f=a.quote)==null?void 0:f.content.type)===d("WAMsgType").NOTE_REPLY;if(f)return c("getReplyContentForNoteReply")(a,e);f=(f=a.quote)==null?void 0:f.content;if(d("MAWXMAUtils").isXMAStoryShare(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryMention(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType)||d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType)||d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType)){var h=a.author,i=a.mediaId,j=a.msgId,k=d("WAJids").authorToUserId(h,e);if(d("MAWXMAUtils").isXMAStoryMention(a.xmaMessageType)||d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType)){var l=a.threadJid,m;l!=null&&(m=d("WAJids").interpretAsUserJid(l));m!=null&&(k=d("WAJids").userIdFromJid(m))}i!=null&&a.plaintextHash==null&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","bridge_msg_get_reply_content");return{isFBPostMention:d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType),isFBStoryMention:d("MAWXMAUtils").isFBXMAStoryMention(a.xmaMessageType),isIGStoryMention:d("MAWXMAUtils").isIGXMAStoryMention(a.xmaMessageType),isIGXMAStoryShare:d("MAWXMAUtils").isIGXMAStoryShare(a.xmaMessageType),isMsgHighlightsTabFriendUpdatesReply:d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType),isStoryHighlightShare:d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType),isStoryReaction:d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType),isStoryReply:d("MAWXMAUtils").isXMAStoryReply(a.xmaMessageType),replyMediaExpirationTimestampMs:f==null?void 0:f.expirationTs,replyMediaId:i,replyPlaintextHash:(l=a.plaintextHash)!=null?l:void 0,replySenderIsMe:h===d("WAJids").AUTHOR_ME||k===e,replySourceId:j,replySourceTimestampMs:a.sortOrderMs,replyStatusType:i!=null?d("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:k}}if(f==null||(f==null?void 0:f.msgId)==null&&(f==null?void 0:f.sourceId)==null)return;l=f||{};h=l.author;j=l.mediaId;a=l.msgId;i=l.plaintextHash;k=l.sourceId;var n=l.specialTextSize,o=l.ts,p=l.type;l=l.xmaMessageType;o=o!=null?o*1e3:void 0;g=f.type===d("MAWMsgType").MSG_TYPE.TEXT||d("MAWXMAUtils").isXMAExternalLinkShare(l)?(g=f.msgContent)==null?void 0:g.content:void 0;var q=d("WAJids").authorToUserId(h,e),r=f.type===d("MAWMsgType").MSG_TYPE.TEXT?f.msgContent.mentionedJids:void 0;h=h===d("WAJids").AUTHOR_ME||q===e;e=b||{};b=e.replyMediaId;var s=e.replyMediaPreviewHeight,t=e.replyMediaPreviewWidth,u=e.replyMediaUrlFallback,v=e.replyPlaintextHash;e=e.replyXMAId;if(d("MAWXMAUtils").isXMAStoryReply(l)){return{isStoryProducerReply:d("MAWXMAUtils").isXMAStoryProducerReply(l),isStoryReaction:d("MAWXMAUtils").isXMAStoryReaction(l),isStoryReply:!0,replyMediaExpirationTimestampMs:f==null?void 0:f.expirationTs,replyMediaId:j,replyPlaintextHash:(f=v!=null?d("WAHashUtils").stringToPlaintextHash(v):i)!=null?f:void 0,replySenderIsMe:h,replySourceId:k,replySourceTimestampMs:o,replyStatusType:j!=null?d("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:q}}i=d("MAWImageUtils").boundHeightWidth(s,t,96*.8);f=i.height;k=i.width;return{isIGXMAPostShare:d("MAWXMAUtils").isIGXMAPostShare(l),isIGXMAStoryShare:d("MAWXMAUtils").isIGXMAStoryShare(l),isStoryReply:!1,replyMediaId:b,replyMediaPreviewHeight:p===d("MAWMsgType").MSG_TYPE.STICKER?f:s,replyMediaPreviewWidth:p===d("MAWMsgType").MSG_TYPE.STICKER?k:t,replyMediaUrlFallback:u,replyMentionedJids:r,replyMessageText:g,replyPlaintextHash:v!=null?d("WAHashUtils").stringToPlaintextHash(v):void 0,replySenderIsMe:h,replySourceId:a,replySourceTimestampMs:o,replyStatusType:n===1||n===2||n===3?d("MAWMsgType").MSG_TYPE.STICKER:p,replyToUserId:q,replyXMAId:e}}function a(a){a=a.specialTextSize;switch(a){case 1:return(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL);case 2:return(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM);case 3:return(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE);default:return(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").NONE)}}function l(a){if(c("justknobx")._("3424")&&a==="media_restore")return"EncryptedBackupsMedia";switch(a){case"eb_restore":return"EncryptedBackups";case"media_restore":return"EncryptedBackupsMedia";case"whatsapp":return"WhatsApp";default:return void 0}}function b(a,b,e){var f,g,i=d("WAJids").extractUserId(d("MAWUserJidWrapper").getMyUserJid());f=((f=a.isForwarded)!=null?f:!1)&&a.type!==d("MAWMsgType").MSG_TYPE.STICKER;g=(g=a.forwardingScore)!=null?g:0;var m=d("MAWDbMsg").getCanonicalTsFromMsg(a),n=k(a,b,i),o=j(a,i),p=d("MAWXMAUtils").isXMAStoryShare(a.xmaMessageType),q=d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType),r=d("MAWXMAUtils").isXMAExternalLinkShare(a.xmaMessageType),s=d("MAWXMAUtils").isIGXMAStoryMention(a.xmaMessageType),t=d("MAWXMAUtils").isFBXMAStoryMention(a.xmaMessageType),u=d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType),v=d("MAWXMAUtils").isXMAPostPrivateReply(a.xmaMessageType),w=d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType),x=a.messageExpirationTs!=null&&a.messageExpirationTs<=d("WATimeUtils").unixTime(),y=d("MAWDbMsg").getSortOrderWithFallback(a),z=a.externalId,A=l(a.source);(b==null?void 0:b.replyPlaintextHash)!==(n==null?void 0:n.replyPlaintextHash)&&c("FBLogger")("messenger_web").warn("replyPlaintextHash mismatch. From replyMeta is null: %s, from replyContent is null: %s. Message type: %s",(b==null?void 0:b.replyPlaintextHash)==null,(n==null?void 0:n.replyPlaintextHash)==null,a.type);b=(b==null?void 0:b.replyPlaintextHash)!=null?d("WAHashUtils").stringToPlaintextHash(b==null?void 0:b.replyPlaintextHash):(b=n==null?void 0:n.replyPlaintextHash)!=null?b:void 0;switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:var B=d("MAWVault").isVaulted(a.msgContent.content)?a.msgContent.content:d("MAWVault").vault(a.msgContent.content);return babelHelpers["extends"]({},n,{_META_loaded_as_quoted_msg:e,ack:a.ack,applicationErrorCode:a.applicationErrorCode,chatJid:a.threadJid,commands:a.msgContent.commands,content:B,editCount:a.editCount,ephemeralDurationInSec:(B=a.ephemeralSetting)==null?void 0:B.ephemeralExpirationInSec,externalId:z,forwardingScore:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,mentionedJids:a.msgContent.mentionedJids,msgId:a.msgId,replyContent:o,replyPlaintextHash:b,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,specialTextSize:a.specialTextSize,transportKey:A,ts:m,type_:a.type});case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return babelHelpers["extends"]({},n,{_META_loaded_as_quoted_msg:e,ack:a.ack,applicationErrorCode:a.applicationErrorCode,chatJid:a.threadJid,ephemeralDurationInSec:(B=a.ephemeralSetting)==null?void 0:B.ephemeralExpirationInSec,externalId:z,forwardingScore:g,groupId:a.groupId,groupIndex:a.groupIndex,groupSize:a.groupSize,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,replyContent:o,replyPlaintextHash:b,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type});case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:return babelHelpers["extends"]({},n,{_META_loaded_as_quoted_msg:e,ack:a.ack,chatJid:a.threadJid,externalId:z,forwardingScore:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,replyContent:o,replyPlaintextHash:b,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type,unsupportedType:a.msgContent.subtype});case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:return{_META_loaded_as_quoted_msg:e,ack:a.ack,chatJid:a.threadJid,externalId:z,forwardingScore:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers["extends"]({},n,{_META_loaded_as_quoted_msg:e,ack:a.ack,chatJid:a.threadJid,externalId:z,forwardingScore:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,replyContent:o,replyPlaintextHash:b,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type});case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:return{_META_loaded_as_quoted_msg:e,ack:a.ack,adminContent:[a.msgContent.authorName],adminType:a.msgContent.adminType,chatJid:a.threadJid,externalId:z,forwardingScore:g,isAdminMessage:!0,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:return{_META_loaded_as_quoted_msg:e,ack:a.ack,adminContent:(B=a.msgContent)==null||(B=B.adminMsgContent)==null?void 0:B.map(function(a){return a==="Facebook User"?"0":a}),adminType:(B=a.msgContent)==null?void 0:B.adminType,adminVersion:(B=a.msgContent)==null?void 0:B.version,chatJid:a.threadJid,externalId:z,forwardingScore:g,isAdminMessage:!0,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.REVOKED:return{_META_loaded_as_quoted_msg:e,ack:a.ack,chatJid:a.threadJid,externalId:z,forwardingScore:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,originalTs:a.originalTs,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.XMA:var C;B=(B=a.msgContent)==null?void 0:B.content;C=B!=null?d("MAWVault").isVaulted(B)?(C=a.msgContent)==null?void 0:C.content:d("MAWVault").vault(B):void 0;r&&C==null&&d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[MAWBridgeMsg] Missing content for external link share XMA message"])));B=C;return babelHelpers["extends"]({},n,{_META_loaded_as_quoted_msg:e,ack:a.ack,applicationErrorCode:a.applicationErrorCode,chatJid:a.threadJid,commands:(r=a.msgContent)==null?void 0:r.commands,content:B,ephemeralDurationInSec:(C=a.ephemeralSetting)==null?void 0:C.ephemeralExpirationInSec,externalId:z,forwardingScore:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isCollapsed:a.isCollapsed,isExpiredMsg:x,isExpiredXmaMsg:a.isExpiredXmaMsg,isFBPostMention:d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType),isFBStoryMention:t,isForwarded:f,isIGStoryMention:s,isMsgHighlightsTabFriendUpdatesReply:w,isPostPrivateReply:v,isStoryHighlightShare:u,isStoryReaction:q,isStoryShare:p,mentionedJids:(n=a.msgContent)==null?void 0:n.mentionedJids,msgId:a.msgId,replyContent:o,replyPlaintextHash:b,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type,xmaMessageType:a.xmaMessageType});default:return c("WAAssertUnreachable")(a.type)}}g.getSpecialTextSize=a;g.convertDbMsgSourceToLSTransportKey=l;g.createBridgeMsg=b}),98);
__d("MAWMessageRequestUtil",["I64","LSContactBitOffset","LSContactViewerRelationship","LSIntEnum","LSMessagingThreadTypeUtil","MWFBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,e){if(a==="pending"||a==="other"){d("MWFBLogger").MWLogger().debug("isMessagerRequestV2 returns true: folderName is "+a+", contactViewerRelationship is "+(h||(h=d("I64"))).to_string(e.contactViewerRelationship));return!0}var f=d("LSContactBitOffset").hasWithDefault(64,e,!0);if(a==="inbox"&&(h||(h=d("I64"))).equal(e.contactViewerRelationship,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactViewerRelationship").NOT_CONTACT))&&!f){b&&d("MWFBLogger").MWLogger().debug("isMessagerRequestV2 returns true: folderName is inbox, contactViewerRelationship is "+(h||(h=d("I64"))).to_string(e.contactViewerRelationship)+", isViewerUnconnected is false, hasActivity is true");return b}return!1}function k(a){return a==="pending"||a==="other"}function a(a){return d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)?k(a.folderName):!1}function l(a,b){return b!=null?j(a.folderName,(h||(h=d("I64"))).gt(a.lastActivityTimestampMs,h.zero),b[1]):!1}function b(a,b){return d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)?l(a,b):!1}function e(a){return d("LSMessagingThreadTypeUtil").isGroup(a.threadType)?k(a.folderName):!1}f=[8,18,19,34,24,25,122];var m=[21,48];g.isMessageRequestV2=j;g.isOneOnOneMessageRequest=a;g.isOneOnOneMessageRequestV2=b;g.isGroupMessageRequest=e;g.disabledThreadCapabilitiesForIncomingRequest=f;g.enabledThreadCapabilitiesForIncomingRequest=m}),98);
__d("clearedMAWMnRestrictCapabilities",[],(function(a,b,c,d,e,f){"use strict";a=[0,31,35,55,56,58,24,25,35,19];b=a;f["default"]=b}),66);
__d("MAWUpdateLSThreadCapabilities",["fbt","I64","LSBitOffset","LSContactBitOffset","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWBlockUtils","MAWCurrentUser","MAWMessageRequestUtil","Promise","ReQL","asyncToGeneratorRuntime","clearedMAWMnRestrictCapabilities","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=d("MAWCurrentUser").getID(),m=(k||(k=d("I64"))).of_string(l);function a(a,e){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(e)).then(function(c){if(c==null)return(i||(i=b("Promise"))).resolve();var e=d("LSBitOffset").set((j||(j=d("LSIntEnum"))).ofNumber(27),c.capabilities);c=babelHelpers["extends"]({},c,{capabilities:e});return a.threads.put(c)}).then(c("emptyFunction"))}function e(a,e){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(e)).then(function(c){if(c==null)return(i||(i=b("Promise"))).resolve();var e=d("LSBitOffset").clear((j||(j=d("LSIntEnum"))).ofNumber(27),c.capabilities);c=babelHelpers["extends"]({},c,{capabilities:e});return a.threads.put(c)}).then(c("emptyFunction"))}function f(a,e){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(e)).then(function(c){if(c==null)return(i||(i=b("Promise"))).resolve([void 0,void 0]);var f=d("ReQL").firstAsync(d("LSMessagingThreadTypeUtil").isOneToOne(c.threadType)?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(a.participants).getKeyRange(e),d("ReQL").fromTableAscending(a.contacts)).filter(function(a){a=a[1];return!(k||(k=d("I64"))).equal(a.id,m)}).map(function(a){a=a[1];return a}):d("ReQL").empty());return(i||(i=b("Promise"))).all([i.resolve(c),f])}).then(function(e){var f=e[0];if(f==null)return(i||(i=b("Promise"))).resolve();e=e[1];if(e==null)return(i||(i=b("Promise"))).resolve();var g=(k||(k=d("I64"))).equal(e.blockedByViewerStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").MESSAGE_BLOCKED)),h=k.equal(e.blockedByViewerStatus,j.ofNumber(c("LSContactBlockedByViewerStatus").FULLY_BLOCKED));e=d("LSContactBitOffset").has(66,e);h=h?d("LSThreadBitOffset").clear(d("MAWBlockUtils").clearedFbBlockCapabilities,f.capabilities,f.capabilities2,f.capabilities3,f.capabilities4,f.capabilities5):g?d("LSThreadBitOffset").clear(d("MAWBlockUtils").clearedMnBlockCapabilities,f.capabilities,f.capabilities2,f.capabilities3,f.capabilities4,f.capabilities5):e?d("LSThreadBitOffset").clear(c("clearedMAWMnRestrictCapabilities"),f.capabilities,f.capabilities2,f.capabilities3,f.capabilities4,f.capabilities5):[f.capabilities,f.capabilities2,f.capabilities3,f.capabilities4,f.capabilities5];g=h[0];e=h[1];var l=h[2],m=h[3];h=h[4];return a.threads.put(babelHelpers["extends"]({},f,{capabilities:g,capabilities2:e,capabilities3:l,capabilities4:m,capabilities5:h})).then(c("emptyFunction"))})}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){a=a.threads;c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a).getKeyRange(c)));if(c==null)return(i||(i=b("Promise"))).resolve();var e=d("LSThreadBitOffset").set.apply(d("LSThreadBitOffset"),[d("MAWMessageRequestUtil").disabledThreadCapabilitiesForIncomingRequest].concat(d("LSThreadBitOffset").clear(d("MAWMessageRequestUtil").enabledThreadCapabilitiesForIncomingRequest,c.capabilities,c.capabilities2,c.capabilities3,c.capabilities4,c.capabilities5))),f=e[0],g=e[1],h=e[2],j=e[3];e=e[4];yield a.put(babelHelpers["extends"]({},c,{additionalThreadContext:void 0,capabilities:f,capabilities2:g,capabilities3:h,capabilities4:j,capabilities5:e}))});return o.apply(this,arguments)}function p(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b)));if(b==null)return;c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.contacts,["name"]).getKeyRange(c)));if(c==null)return;c=h._(/*BTDS*/"{Inviter Name} invited you to join",[h._param("Inviter Name",c.name)]).toString();var e=d("LSThreadBitOffset").set([105],b.capabilities,b.capabilities2,b.capabilities3,b.capabilities4,b.capabilities5),f=e[0],g=e[1],i=e[2],j=e[3];e=e[4];yield a.threads.put(babelHelpers["extends"]({},b,{capabilities:f,capabilities2:g,capabilities3:i,capabilities4:j,capabilities5:e,snippet:c}))});return q.apply(this,arguments)}function r(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(c)));if(e==null)return;c=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.group_invites).getKeyRange(c)));var f=d("LSThreadBitOffset").clear([105],e.capabilities,e.capabilities2,e.capabilities3,e.capabilities4,e.capabilities5),g=f[0],h=f[1],i=f[2],j=f[3];f=f[4];yield a.threads.put(babelHelpers["extends"]({},e,{capabilities:g,capabilities2:h,capabilities3:i,capabilities4:j,capabilities5:f,snippet:void 0}));yield c.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield a.group_invites["delete"](b.threadKey,b.inviterId,b.inviteeId)});return function(a){return c.apply(this,arguments)}}())});return s.apply(this,arguments)}g.enableAddMembersTxn=a;g.disableAddMembersTxn=e;g.disableBlockerCapabilitiesTxn=f;g.updateNonMessageRequestThreadTxn=n;g.setGroupInviteTxn=p;g.clearGroupInviteTxn=r}),226);
__d("uniqueArray",[],(function(a,b,c,d,e,f){"use strict";function g(a){return a}function a(a,b){var c=b!=null?b:g,d=[],e=new Set();a.forEach(function(a){var b=c(a);if(e.has(b))return;e.add(b);d.push(a)});return d}f["default"]=a}),66);
__d("MAWBridgeParticipantsUpdatedHandler",["fbt","I64","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSGroupParticipantJoinState","LSIntEnum","LSVerifyContactRowExistsStoredProcedure","MAWCurrentUser","MAWJids","MAWMiActMappingTableAPI","MAWUpdateLSThreadCapabilities","Promise","asyncToGeneratorRuntime","uniqueArray"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=d("MAWCurrentUser").getID(),m=(k||(k=d("I64"))).of_string(l);function a(a,b){b=b.map(function(a){var b=a.chatJid,c=a.type;a=a.userJid;return babelHelpers["extends"]({chatJid:b},x(c),{userJid:a})});return n(a,b)}function e(a,b){b=b.participants.map(function(a){return{chatJid:a.threadJid,isAdmin:a.isAdmin,isInvited:a.isInvited,isSuperAdmin:a.isSuperAdmin,userJid:d("MAWJids").toUserJid(a.fbid)}});return n(a,b)}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c=(yield r(a,c));yield (i||(i=b("Promise"))).all(c.map(function(c){var e=c.mawParticipant,f=c.threadKey,g=d("MAWJids").convertChatJidToIntJid(e.userJid);return[a.participants.get(f,g).then(function(c){var d=v(c,e,f);return c!=null?a.participants.put(d):(i||(i=b("Promise"))).all([a.participants.add(d),p(a,g)])}),t(a,g,f,e.isAdmin)]}).flat(Infinity))});return o.apply(this,arguments)}function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(a),{authorityLevel:(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),blockedByViewerStatus:j.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:j.ofNumber(c("LSContactIdType").FBID),contactType:j.ofNumber(c("LSContactType").USER),contactViewerRelationship:j.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:j.ofNumber(c("LSContactGender").UNKNOWN),id:b,isBlocked:!1,isMemorialized:!1,isSelf:l===(k||(k=d("I64"))).to_string(b),workForeignEntityType:j.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)})});return q.apply(this,arguments)}function r(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=c("uniqueArray")(e.map(function(a){return a.chatJid})),g=new Map();yield (i||(i=b("Promise"))).all(f.map(function(b){return d("MAWMiActMappingTableAPI").getThreadKeyForChatJid(a,b).then(function(a){return a!=null&&g.set(b,a)})}));return e.map(function(a){var b=g.get(a.chatJid);return b==null?null:{mawParticipant:a,threadKey:b}}).filter(Boolean)});return s.apply(this,arguments)}function t(a,b,c,d){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){yield d("MAWUpdateLSThreadCapabilities").disableBlockerCapabilitiesTxn(a,c),(k||(k=d("I64"))).equal(m,b)&&(e?yield d("MAWUpdateLSThreadCapabilities").enableAddMembersTxn(a,c):yield d("MAWUpdateLSThreadCapabilities").disableAddMembersTxn(a,c))});return u.apply(this,arguments)}function v(a,b,c){return a==null?babelHelpers["extends"]({},w(b),{authorityLevel:(k||(k=d("I64"))).zero,contactId:d("MAWJids").convertChatJidToIntJid(b.userJid),deliveredWatermarkTimestampMs:k.zero,isSuperAdmin:b.isSuperAdmin,nickname:void 0,normalizedSearchTerms:void 0,participantCapabilities:void 0,readActionTimestampMs:k.zero,readWatermarkTimestampMs:k.zero,threadKey:c,threadRoles:k.zero}):babelHelpers["extends"]({},a,w(b))}function w(a){return{groupParticipantJoinState:a.isInvited?(j||(j=d("LSIntEnum"))).ofNumber(c("LSGroupParticipantJoinState").INVITED):(j||(j=d("LSIntEnum"))).ofNumber(c("LSGroupParticipantJoinState").MEMBER),isAdmin:a.isAdmin,isModerator:!1,subscribeSource:a.isSuperAdmin?h._(/*BTDS*/"Group creator").toString():void 0}}function x(a){return{isAdmin:a==="superadmin"||a==="admin",isInvited:a==="invitedParticipant",isSuperAdmin:a==="superadmin"}}g.callFromMainThread=a;g.call=e;g.mawToLsParticipantTypeConversion=x}),226);
__d("MAWBridgeSafeActionsWorkerAndUI",["ExecutionEnvironment","FBLogger","MAWBridge","Promise","ifRequireable"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,f){return(i||(i=c("ExecutionEnvironment"))).isInWorker?d("MAWBridge").getBridge().sendAndReceive("backend",a,e,f==null?void 0:f.isLoggingDisabled):new(h||(h=b("Promise")))(function(b,d){return c("ifRequireable")("MAWBridgeSendAndReceive",function(c){c=c.sendAndReceive;return b(c("backend",a,e,f))},function(){return d("MAWBridgeSendAndReceive not available in UI ifRequired")})})}function e(a,b,e){return(i||(i=c("ExecutionEnvironment"))).isInWorker?d("MAWBridge").getBridge().fireAndForget("backend",a,b,e):c("ifRequireable")("MAWBridgeFireAndForget",function(c){c=c.fireAndForget;return c("backend",a,b,e)},function(){throw c("FBLogger")("messenger_web").mustfixThrow("MAWBridgeFireAndForget not available in UI ifRequired")})}g.sendAndReceiveBackendWorkerAndUIShared=a;g.fireAndForgetBackendWorkerAndUIShared=e}),98);
__d("MAWBridgeUIEventDataValidation",["FBLogger","I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){try{return(h||(h=d("I64"))).of_string(a)}catch(b){c("FBLogger")("messenger_web").catching(b).mustfix("Cannot convert string to i64: %s",a)}}g.stringToI64Opt=a}),98);
__d("MAWConvertExtendedContentTypeToLSXmaContentType",["LSXmaContentType","WAArmadilloXMA.pb"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)return null;switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:return c("LSXmaContentType").FB_FEED_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:return c("LSXmaContentType").FB_STORY_REPLY;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:return c("LSXmaContentType").FB_STORY_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return c("LSXmaContentType").FB_STORY_MENTION;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:return c("LSXmaContentType").FB_FEED_VIDEO_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:return c("LSXmaContentType").FB_GAMING_CUSTOM_UPDATE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:return c("LSXmaContentType").FB_PRODUCER_STORY_REPLY;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:return c("LSXmaContentType").FB_EVENT;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:return c("LSXmaContentType").FB_FEED_POST_PRIVATE_REPLY;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:return c("LSXmaContentType").MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:return c("LSXmaContentType").FB_SHORT;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return c("LSXmaContentType").MSG_LOCATION_SHARING;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return c("LSXmaContentType").MSG_LOCATION_SHARING_V2;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return c("LSXmaContentType").FB_POST_MENTION;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return c("LSXmaContentType").MSG_CONTACT;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return c("LSXmaContentType").MSG_AI_CONTACT;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return c("LSXmaContentType").MSG_MEMORIES_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:return c("LSXmaContentType").MSG_EXTERNAL_LINK_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:return c("LSXmaContentType").RTC_AUDIO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return c("LSXmaContentType").RTC_VIDEO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:return c("LSXmaContentType").RTC_MISSED_AUDIO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:return c("LSXmaContentType").RTC_MISSED_VIDEO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return c("LSXmaContentType").FB_PROFILE_DIRECTORY_ITEM;default:return null}}g.convertExtendedContentTypeToLSXmaContentType=a}),98);
__d("MAWBridgeXMAUtils",["I64","LSIntEnum","MAWBridgeUIEventDataValidation","MAWConvertExtendedContentTypeToLSXmaContentType","MAWMpsGating","MAWXMAUtils","MNLSXMALayoutType","MNXMAPreviewImageDecorationType","MWPBumpEntityKey","MessagingAttachmentType","Promise","Random","ReQL","WAArmadilloXMA.pb","WAJids","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b,c,d,e,f){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g,i){var k=c.ctas,l=c.defaultCTA,o=m(c.targetId,c.targetType),s=(j||(j=d("I64"))).of_int32(d("Random").uint32());if(l!=null){var t=p(l,s,f,e,g,o,c.targetType);yield r(a,t,s,i.defaultCta)}t=d("MAWXMAUtils").isFBXMAPostMention(c.targetType)&&c.author===d("WAJids").AUTHOR_ME;c=[];k!=null&&!t&&(c=(yield (h||(h=b("Promise"))).all(k.map(function(b,c){var d=n(s,c);b=q(b,d,f,e,g,o);c=c===0?i.attachmentCta1:c===1?i.attachmentCta2:c===2?i.attachmentCta3:void 0;return r(a,b,d,c)}))));return{attachmentCta1Id:c.length>0?c[0]:void 0,attachmentCta2Id:c.length>1?c[1]:void 0,attachmentCta3Id:c.length>2?c[2]:void 0,defaultCtaId:l==null?void 0:s}});return k.apply(this,arguments)}function l(a){var b="xma_web_url";switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:b="xma_rtc_audio";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:b="xma_rtc_video";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:b="xma_rtc_missed_audio";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:b="xma_rtc_missed_video";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:b="igd_web_post_share";break}return b}function m(a,b){return d("MAWXMAUtils").isFBXMAPostMention(b)?void 0:a!=null?d("MAWBridgeUIEventDataValidation").stringToI64Opt(a):void 0}function n(a,b){return(j||(j=d("I64"))).add(a,j.of_int32(b+1))}function o(a,b,c,e,f,g,h){h===void 0&&(h="xma_web_url");var i=a.actionUrl,k=a.nativeUrl;return{actionContentBlob:void 0,actionUrl:i!=null?i:k,attachmentFbid:f,attachmentIndex:(j||(j=d("I64"))).zero,ctaId:b,enableExtensions:!1,extensionHeightType:void 0,messageId:c,nativeUrl:k!=null?k:i,platformToken:void 0,targetId:g!=null?g:void 0,threadKey:e,title:(f=a.title)!=null?f:"Tap to view status update",type_:h!=null?h:"xma_web_url",urlWebviewType:void 0}}function p(a,b,c,d,e,f,g){g=l(g);return o(a,b,c,d,e,f,g)}function q(a,b,c,d,e,f){var g;switch(a.ctaType){case"contact_sharing_profile":g="contact_sharing_profile";break;case"contact_sharing_message":g="contact_sharing_message";break}return o(a,b,c,d,e,f,g)}function r(a,b,c,d){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){d!=null?yield a.attachment_ctas.upsert([d.ctaId],b):yield a.attachment_ctas.add(b);return c});return s.apply(this,arguments)}function e(a,b,c){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=null,f={attachmentCta1:void 0,attachmentCta2:void 0,attachmentCta3:void 0,defaultCta:void 0};e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(b,c)));e!=null&&(f.defaultCta=(yield u(a,e.defaultCtaId)),f.attachmentCta1=(yield u(a,e.attachmentCta1Id)),f.attachmentCta2=(yield u(a,e.attachmentCta2Id)),f.attachmentCta3=(yield u(a,e.attachmentCta3Id)));return[e,f]});return t.apply(this,arguments)}function u(a,c){return c==null?(h||(h=b("Promise"))).resolve(void 0):(a=d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachment_ctas).getKeyRange(c)))!=null?a:void 0}function f(a,b,e,f,g,h,k,l,m){var n,o,p,q=(j||(j=d("I64"))).zero,r=v(a),s=d("MAWConvertExtendedContentTypeToLSXmaContentType").convertExtendedContentTypeToLSXmaContentType(a.targetType);s=s?(j||(j=d("I64"))).of_int32(s):void 0;n=(n=a==null||(o=a.defaultCTA)==null?void 0:o.actionUrl)!=null?n:a==null||(p=a.defaultCTA)==null?void 0:p.nativeUrl;a.defaultPreviewMediaId!=null&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_xma_handler","xma_preview_media_has_plaintext_hash."+m+"."+a.targetType+"."+(a.defaultPreviewMediaPlaintextHash!=null?"true":"false"));m=d("MAWMpsGating").isMpsMessageRendering();return{accessibilitySummaryText:void 0,actionUrl:n!=null?n:void 0,attachmentCta1Id:g,attachmentCta2Id:h,attachmentCta3Id:k,attachmentFbid:e,attachmentIndex:j.zero,attachmentLoggingType:void 0,attachmentType:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA),attributionAppIcon:void 0,attributionAppIconFallback:void 0,attributionAppIconUrlExpirationTimestampMs:void 0,attributionAppId:void 0,attributionAppName:void 0,authorityLevel:j.zero,avatarCount:void 0,avatarViewAccessibilityLabel:void 0,avatarViewSize:void 0,avatarViewTitleList:void 0,avatarViewUrlExpirationTimestampList:void 0,avatarViewUrlFallbackList:void 0,avatarViewUrlList:void 0,captionBodyText:void 0,cta1Title:x(a.ctas,1),cta1Type:w(a.ctas,1),cta2Title:x(a.ctas,2),cta2Type:w(a.ctas,2),cta3Title:x(a.ctas,3),cta3Type:w(a.ctas,3),dashManifest:void 0,decryptionKey:void 0,defaultCtaId:l,defaultCtaTitle:(n=a.defaultCTA)==null?void 0:n.title,defaultCtaType:r.xmaContentType,descriptionText:void 0,ephemeralMediaState:void 0,faviconUrl:void 0,faviconUrlExpirationTimestampMs:void 0,faviconUrlFallback:void 0,filename:void 0,filesize:a.filesize!=null?(j||(j=d("I64"))).of_int32(a.filesize):void 0,gatingTitle:a.overlayTitle,gatingType:a.overlayIconGlyph!=null?String(a.overlayIconGlyph):void 0,hasMedia:a.hasMedia!=null?a.hasMedia:!1,hasXma:!0,hasXmaFavicon:m?a.faviconPlaintextHash!=null:a.faviconMediaId!=null,hasXmaHeaderImage:m?a.headerMediaPlaintextHash!=null:a.headerMediaId!=null,hasXmaPreview:m?a.defaultPreviewMediaPlaintextHash!=null:a.defaultPreviewMediaId!=null,headerImageUrl:void 0,headerImageUrlExpirationTimestampMs:void 0,headerImageUrlFallback:void 0,headerImageUrlMimeType:void 0,headerTitle:a.headerTitle,imageUrl:void 0,imageUrlExpirationTimestampMs:void 0,imageUrlFallback:void 0,imageUrlMimeType:void 0,isBorderless:void 0,isPreviewImage:void 0,isSharable:!0,listItemAccessibilityText1:void 0,listItemAccessibilityText2:void 0,listItemAccessibilityText3:void 0,listItemContactUrlExpirationTimestampList1:void 0,listItemContactUrlExpirationTimestampList2:void 0,listItemContactUrlExpirationTimestampList3:void 0,listItemContactUrlFallbackList1:void 0,listItemContactUrlFallbackList2:void 0,listItemContactUrlFallbackList3:void 0,listItemContactUrlList1:void 0,listItemContactUrlList2:void 0,listItemContactUrlList3:void 0,listItemId1:void 0,listItemId2:void 0,listItemId3:void 0,listItemProfilePictureUrl1:void 0,listItemProfilePictureUrl2:void 0,listItemProfilePictureUrl3:void 0,listItemProfilePictureUrlExpirationTimestamp1:void 0,listItemProfilePictureUrlExpirationTimestamp2:void 0,listItemProfilePictureUrlExpirationTimestamp3:void 0,listItemProfilePictureUrlFallback1:void 0,listItemProfilePictureUrlFallback2:void 0,listItemProfilePictureUrlFallback3:void 0,listItemProgressBarFilledPercentage1:void 0,listItemProgressBarFilledPercentage2:void 0,listItemProgressBarFilledPercentage3:void 0,listItemsDescriptionSubtitleText:void 0,listItemsDescriptionText:void 0,listItemsId:void 0,listItemsSecondaryDescriptionText:void 0,listItemTitleText1:void 0,listItemTitleText2:void 0,listItemTitleText3:void 0,localPlayableUrl:void 0,maxSubtitleNumOfLines:a.maxSubtitleNumOfLines!=null?(j||(j=d("I64"))).of_int32(a.maxSubtitleNumOfLines):void 0,maxTitleNumOfLines:a.maxTitleNumOfLines!=null?(j||(j=d("I64"))).of_int32(a.maxTitleNumOfLines):void 0,messageId:f,miniPreview:void 0,offlineAttachmentId:(g=a.offlineAttachmentId)!=null?g:e,originalFileHash:void 0,originalPageSenderId:void 0,playableDurationMs:void 0,playableUrl:void 0,playableUrlExpirationTimestampMs:void 0,playableUrlFallback:void 0,playableUrlMimeType:void 0,preheaderText:void 0,previewHeight:r.height,previewHeightLarge:a.previewHeightLarge!=null?(j||(j=d("I64"))).of_int32(a.previewHeightLarge):void 0,previewImageDecorationType:z(a.targetType),previewUrl:void 0,previewUrlExpirationTimestampMs:void 0,previewUrlFallback:void 0,previewUrlLarge:void 0,previewUrlMimeType:void 0,previewWidth:r.width,previewWidthLarge:a.previewWidthLarge!=null?(j||(j=d("I64"))).of_int32(a.previewWidthLarge):void 0,samplingFrequencyHz:void 0,shouldAutoplayVideo:void 0,shouldHighlightHeaderTitleInTitle:void 0,shouldRespectServerPreviewSize:void 0,sourceText:void 0,subtitleIconUrl:void 0,subtitleText:a.subtitleText,targetId:void 0,threadKey:b,timestampMs:q,titleText:a.titleText,transportKey:"WhatsApp",viewerSeenTimestampMs:void 0,waveformData:void 0,xmaContentType:s,xmaDataclass:a.xmaDataclass,xmaFaviconFbid:m?a.faviconPlaintextHash:(h=a.faviconMediaId)==null?void 0:h.toString(),xmaHeaderImageFbid:m?a.headerMediaPlaintextHash:(k=a.headerMediaId)==null?void 0:k.toString(),xmaLayoutType:a.xmaLayoutType!=null?y(a.xmaLayoutType):void 0,xmaPreviewFbid:m?a.defaultPreviewMediaPlaintextHash:(l=a.defaultPreviewMediaId)==null?void 0:l.toString(),xmasTemplateType:a.xmaLayoutType!=null?y(a.xmaLayoutType):void 0}}function v(a){var b;switch(a.targetType){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:b={height:(j||(j=d("I64"))).of_int32(108),width:(j||(j=d("I64"))).of_int32(72),xmaContentType:"xma_montage_share"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:b={xmaContentType:"xma_rtc_audio"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:b={xmaContentType:"xma_rtc_video"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:b={xmaContentType:"xma_rtc_missed_audio"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:b={xmaContentType:"xma_rtc_missed_video"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:b={xmaContentType:"xma_rtc_missed_group_audio"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:b={xmaContentType:"xma_rtc_missed_group_video"};break;default:b={height:a.previewHeight!=null?(j||(j=d("I64"))).of_int32(a.previewHeight):void 0,width:a.previewWidth!=null?(j||(j=d("I64"))).of_int32(a.previewWidth):void 0,xmaContentType:"xma_web_url"};break}return b}function w(a,b){if(a==null)return;a=a[b-1];if(a==null)return;b=a.buttonType;a=a.ctaType;switch(a){case"contact_sharing_profile":return"contact_sharing_profile";case"contact_sharing_message":return"contact_sharing_message";default:return b===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE?"xma_open_native":void 0}}function x(a,b){if(a==null)return;a=a[b-1];if(a!=null)return a.title}function y(a){return a===0||a!==3?(i||(i=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").SINGLE):(i||(i=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").PORTRAIT)}function z(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").COLLAGE);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").REEL);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").INSTAGRAM_ICON);default:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").DEFAULT)}}g.addAttachmentCtas=a;g.maybeBridgeToLSTargetId=m;g.getCtaIdFromDefaultCtaId=n;g.composeDefaultAttachmentCta=p;g.composeAttachmentCta=q;g.getExistingAttachmentAndAttachmentCtas=e;g.composeAttachmentXMA=f}),98);
__d("MAWBridgeXMA",["MAWBridgeXMAUtils","MAWDbMedia","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){if(a==null)return void 0;switch(a){case"Image":case"Sticker":return"image/png";case"Gif":return"image/gif";case"Video":return"video/mp4";case"Ptt":return"audio/wav"}}function a(a,b,c){var e,f,g,j,k=b.author,l=b.contentRef,m=b.ctas,n=b.defaultCTA,o=b.defaultPreviewMediaId,p=b.defaultPreviewMediaPlaintextHash,q=b.faviconMediaId,r=b.faviconPlaintextHash,s=b.headerMediaId,t=b.headerMediaPlaintextHash,u=b.headerTitle,v=b.maxSubtitleNumOfLines,w=b.maxTitleNumOfLines,x=b.msgId,y=b.offlineAttachmentId,z=b.overlayIconGlyph,A=b.overlayTitle,B=b.subtitleText,C=b.targetId,D=b.targetType,E=b.targetUsername,F=b.threadJid,G=b.titleText,H=b.xmaDataclass,I=b.xmaId;b=b.xmaLayoutType;a!=null&&a.mediaType!==d("MAWDbMedia").MEDIA_TYPE.IMAGE&&d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["MAWBridge - createBridgeXMA received unexpected media type - ",""])),a.mediaType);C!=null&&d("MAWBridgeXMAUtils").maybeBridgeToLSTargetId(C,D);var J=c.hasMedia,K=c.hasXmaFaviconMedia;c=c.hasXmaHeaderMedia;return{author:k,contentRef:l,ctas:m==null?void 0:m.filter(function(a){return a.ctaType!=null}),defaultCTA:n,defaultPreviewMediaId:o,defaultPreviewMediaPlaintextHash:p,duration:null,faviconMediaId:q,faviconPlaintextHash:r,filesize:a==null?void 0:a.size,hasMedia:J,hasXmaFaviconMedia:K,hasXmaHeaderMedia:c,headerMediaId:s,headerMediaPlaintextHash:t,headerTitle:u,maxSubtitleNumOfLines:v,maxTitleNumOfLines:w,mediaType:a==null?void 0:a.mediaType,msgId:x,offlineAttachmentId:y,overlayIconGlyph:z,overlayTitle:A,playableUrlMimeType:i(a==null?void 0:a.mediaType),previewHeight:a==null||(e=a.validatedImageInfo)==null?void 0:e.jpegThumbnailHeight,previewHeightLarge:a==null||(f=a.validatedImageInfo)==null?void 0:f.height,previewUrlMimeType:i(a==null?void 0:a.mediaType),previewWidth:a==null||(g=a.validatedImageInfo)==null?void 0:g.jpegThumbnailWidth,previewWidthLarge:a==null||(j=a.validatedImageInfo)==null?void 0:j.width,subtitleText:B,targetId:C,targetType:D,targetUsername:E,threadJid:F,titleText:G,ts:a==null?void 0:a.ts,xmaDataclass:H,xmaId:I,xmaLayoutType:b}}function b(a,b){var c=a.msgId;a=a.threadJid;return{msgId:c,threadJid:a,xmaId:b}}function c(a,b){var c=a.msgId;a=a.threadJid;return{msgId:c,threadJid:a,xmaId:b}}g.mediaTypeToMimeType=i;g.createBridgeXMA=a;g.createBridgeXMAShareExpired=b;g.createBridgeXMAShareTombstoned=c}),98);
__d("MAWCacheServiceDB",["FBLogger","MAWCurrentUser","MAWIndexedDbMetadata","MAWWormOdsLogger","MessengerWebInitData","Promise","WAHex","Worm","WormDump","WormEAR","WormIDbDriver","asyncToGeneratorRuntime","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;f={autoIncrement:!0,indexes:{key:{fields:["key"],unique:!0}},primaryKey:"id",secure:!0};var i={messageComposerDrafts:f,snippets:f},j=null,k=function(a,b,e){var f="maw_cache_service";b=new(d("WormEAR").WormEAR)(e,f,b);a=new(d("WormIDbDriver").WormIDbDriver)(a,f,e,b,d("MAWWormOdsLogger").wormOdsWorkerLogger,{onTransactionError:m});return new(d("Worm").WormDatabase)(a,c("qpl")._(1056840657,"2716"))};function l(){if(j!==null)return j;j=new(h||(h=b("Promise")))(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{var e=k(d("MAWIndexedDbMetadata").MAWcacheServiceDbName(d("MAWCurrentUser").getID()),d("WAHex").parseHex(c("MessengerWebInitData").accountKeyV2),i);yield e.init();a(e)}catch(a){c("FBLogger")("messenger_web").catching(a).mustfix("Failed to create cache service DB"),j=null,b(a)}});return function(b,c){return a.apply(this,arguments)}}());return j}function m(a){if(a instanceof d("WormEAR").DecryptionError){var b=a;c("FBLogger")("MAWCacheService").mustfix("EAR decryption error in store: %s. Attempting to delete the store:",b.store);c("promiseDone")(l().then(function(a){return a.runInTransaction([b.store],"readwrite",function(a){return a.stores[b.store].clear()},"delete-corrupted-entity")}).then(function(){c("FBLogger")("MAWCacheService").info("Successfully deleted corrupted store %s",b.store)})["catch"](function(a){c("FBLogger")("MAWCacheService").catching(a).mustfix("Failed to delete corrupted store %s, err: %s",b.store,a.message)}))}}function a(a){return a.map(function(a){a[0];a=a[1];return a})}function e(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield l());return a.dump({snippets:{customFields:{id:d("WormDump").wormNonSensitiveField,key:d("WormDump").wormNonSensitiveField,timestamp:d("WormDump").wormNonSensitiveField,value:function(a){var b;return{snippet:(b=d("WormDump")).wormRedact(a.snippet),snippetMsgAckLevel:b.wormNonSensitiveField(a.snippetMsgAckLevel),snippetMsgId:b.wormNonSensitiveField(a.snippetMsgId),snippetNewestIncomingMsgs:b.wormNonSensitiveField(a.snippetNewestIncomingMsgs),snippetReactionId:b.wormRedact(a.snippetReactionId)}}}}})});return n.apply(this,arguments)}g.getOrSetupMAWCacheDB=l;g.convertCacheValueToDBRawValue=a;g.getDbDump=e}),98);
__d("MAWCacheServiceQPL",["ExecutionEnvironment","MAWCurrentUser","MAWQplProxy","QPLUserFlow","performanceAbsoluteNow","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new Set(),k=new Set(),l=3e3,m=c("qpl")._(1056836703,"2955");function a(a,b){var e=(h||(h=c("ExecutionEnvironment"))).isInWorker||(h||(h=c("ExecutionEnvironment"))).isInSharedWorker;if(e){if(k.has(a))return;o(a);d("MAWQplProxy").startQplUserFlow(m,{},{callBridgeWithTimestamp:!0,providedInstanceKey:a})}else{if(j.has(a))return;n(a);c("QPLUserFlow").start(m,{annotations:{string:{service:b}},instanceKey:a})}}function n(a){j.add(a)}function o(a){k.add(a)}function b(a,b,e){var f=q(e),g=(h||(h=c("ExecutionEnvironment"))).isInWorker||(h||(h=c("ExecutionEnvironment"))).isInSharedWorker;if(g){if(!k.has(a))return;d("MAWQplProxy").sendQplPointThroughBridge(m,"worker@"+f+b,{instanceKey:a},!0)}else{if(!j.has(a))return;var n=(i||(i=c("performanceAbsoluteNow")))();e==="realtime-update"?window.setTimeout(function(){c("QPLUserFlow").addPoint(m,"ui@"+b,{instanceKey:a,timestamp:n})},l):c("QPLUserFlow").addPoint(m,"ui@"+b,{instanceKey:a})}}function e(a,b){var e=(h||(h=c("ExecutionEnvironment"))).isInWorker||(h||(h=c("ExecutionEnvironment"))).isInSharedWorker;if(e){if(!k.has(a))return;d("MAWQplProxy").sendQPLAnnotationsThroughBridge(m,b,a)}else{if(!j.has(a))return;c("QPLUserFlow").addAnnotations(m,b,{instanceKey:a})}}function f(a){var b=(h||(h=c("ExecutionEnvironment"))).isInWorker||(h||(h=c("ExecutionEnvironment"))).isInSharedWorker;if(b){if(!k.has(a))return;k["delete"](a);d("MAWQplProxy").sendQPLSuccessThroughBridge(m,{},a,!0)}else{if(!j.has(a))return;var e=(i||(i=c("performanceAbsoluteNow")))();window.setTimeout(function(){j["delete"](a),c("QPLUserFlow").endSuccess(m,{instanceKey:a,timestamp:e})},l)}}function p(a,b,e){e=q(e);var f=(h||(h=c("ExecutionEnvironment"))).isInWorker||(h||(h=c("ExecutionEnvironment"))).isInSharedWorker;if(f){if(!k.has(a))return;d("MAWQplProxy").sendQPLFailThroughBridge(m,"worker@"+e+b,{},a,!0)}else{if(!j.has(a))return;var g=(i||(i=c("performanceAbsoluteNow")))();window.setTimeout(function(){j["delete"](a),c("QPLUserFlow").endFailure(m,"ui@"+b,{instanceKey:a,timestamp:g})},l);j["delete"](a)}}function q(a){return a?a.replace(/-/g,"_")+"_":""}function r(a){return d("MAWCurrentUser").isEmployee()||d("MAWCurrentUser").isTestUser()?a:void 0}e={addAnnotationsQPL:e,addPointQPL:b,endFailureQPL:p,endSuccessQPL:f,redactKeysForNonEmployee:r,registerInstanceKeyInUI:n,registerInstanceKeyInWorker:o,startQPL:a};g["default"]=e}),98);
__d("MAWCacheServiceUtils",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h="maw_cache_service_broadcast",i=typeof window!=="undefined"?window:self;d=function(){if(!i.BroadcastChannel){c("FBLogger")("messenger_e2ee_web").warn("BroadcastChannel is not supported in this browser");return null}return new i.BroadcastChannel(h)};e={concurrency:1,maxTaskLimit:1,maxThrottleMs:500};function a(a){return"maw-cache-service-"+a}function b(a,b){var c=new Set(),d=[];a.forEach(function(a){var e=b(a);if(c.has(e)){d.push(a);return}c.add(e)});return d}g.MAW_CACHE_SERVICE_BROADCAST_CHANNEL=h;g.globalScope=i;g.getMAWCacheServiceBroadcastChannel=d;g.SCHEDULER_CONFIG=e;g.getSchedulerName=a;g.findDuplicates=b}),98);
__d("MAWCastToMsgrServerMediaType",["EncryptedBackupsUploadEntity","MAWDbMedia","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b){b===void 0&&(b=!1);if(b&&a==="image")return"xma";switch(a){case"image":case"video":case"gif":case"sticker":return a;case"document":return"file";case"ptt":return"audio";case"xma-image":return"xma";case"preview":return"preview";default:d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["invalid mediaType: "," for castToMsgrServerMediaType method"])),a);return null}}function b(a,b){b===void 0&&(b=!1);if(b&&a===d("MAWDbMedia").MEDIA_TYPE.IMAGE)return"xma";switch(a){case"Image":return"image";case"Video":return"video";case"Gif":return"gif";case"Sticker":return"sticker";case"DocumentFile":return"file";case"Ptt":return"audio";default:d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["invalid client mediaType: "," for castClientMediaTypeToServerMediaType method"])),a);return null}}function c(a){switch(a){case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.IMAGE:return"image";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.VIDEO:return"video";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.GIF:return"gif";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.STICKER:return"sticker";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.DOCUMENT:return"file";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.PTT:return"audio";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA:return"xma";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.MESSENGER_PREVIEW:return"preview";default:d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["invalid attachment mediaType: "," for castMediaAttachmentTypeToServerMediaType method"])),a);return null}}g.castToMsgrServerMediaType=a;g.castClientMediaTypeToServerMediaType=b;g.castMediaAttachmentTypeToServerMediaType=c}),98);
__d("MAWDbEditMsgHistory",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a}function b(a){return(h||(h=d("I64"))).of_float(a)}function c(a){return(h||(h=d("I64"))).to_float(a)}g.unsafeCoerceToEditMsgHistoryId=a;g.convertToEditMsgHistoryId64=b;g.convertToEditMsgHistoryId=c}),98);
__d("MAWEBRestoreTrackingUtils",["LSIntEnum","LSMEBTaskCreationSource","MAWQplProxy","MWEBODSEntityName.enum","ODS","QPLUserFlow","WAHashStringToNumber","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j={dyi:c("justknobx")._("467"),frontloaded:20,initial:20,paginated:c("justknobx")._("3177"),point:1,search:c("justknobx")._("2477")};function a(a,b,e,f){b!=null&&p({querySource:e,runningInWorker:f!=null?f:!1,taskSource:a,traceId:b,triggerType:"paginated"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.paginated")}function b(a){var b=a.querySource,e=a.runningInWorker,f=a.taskSource;a=a.traceId;a!=null&&p({querySource:b,runningInWorker:e!=null?e:!1,taskSource:f,traceId:a,triggerType:"initial"});(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.initial")}function e(a,b,e){b!=null&&p({querySource:"LS",runningInWorker:e!=null?e:!1,taskSource:a,traceId:b,triggerType:"dyi"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.dyi")}function f(a,b,e){b!=null&&p({querySource:"LS",runningInWorker:e!=null?e:!1,taskSource:a,traceId:b,triggerType:"frontloaded"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.frontloaded")}function k(a,b,e,f){b!=null&&p({querySource:e,runningInWorker:f!=null?f:!1,taskSource:a,traceId:b,triggerType:"point"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.point")}function l(a){var b=a.querySource,e=a.runningInWorker;a=a.traceId;a!=null&&p({querySource:b,runningInWorker:e!=null?e:!1,taskSource:c("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB,traceId:a,triggerType:"search"});(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.search")}function m(a,b){a!=null&&(b!=null&&b?d("MAWQplProxy").sendQPLSuccessThroughBridge(c("qpl")._(521476165,"2432"),void 0,d("WAHashStringToNumber").hashStringToNumber(a)):c("QPLUserFlow").endSuccess(c("qpl")._(521476165,"2432"),{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.success")}function n(a,b,e,f){e===void 0&&(e="restore_failure"),a!=null&&(b!=null&&b?d("MAWQplProxy").sendQPLFailThroughBridge(c("qpl")._(521476165,"2432"),e,f,d("WAHashStringToNumber").hashStringToNumber(a)):c("QPLUserFlow").endFailure(c("qpl")._(521476165,"2432"),e,{annotations:f,instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.failure")}function o(a){u("protobuf",a)}function p(a){var b=a.querySource,e=a.runningInWorker,f=a.taskSource,g=a.traceId;a=a.triggerType;if(e!=null&&e){var h;d("MAWQplProxy").startQplUserFlow(c("qpl")._(521476165,"2432"),{bool:{runningInWorker:e===!0},"int":{requestedMessagesCount:(h=j[a])!=null?h:10},string:{querySource:b,taskSource:v(f),traceId:g,triggerType:a}},{providedInstanceKey:d("WAHashStringToNumber").hashStringToNumber(g),providedTimeoutInMs:c("justknobx")._("2950")})}else{c("QPLUserFlow").start(c("qpl")._(521476165,"2432"),{annotations:{bool:{runningInWorker:e===!0},"int":{requestedMessagesCount:(h=j[a])!=null?h:10},string:{querySource:b,taskSource:v(f),traceId:g,triggerType:a}},instanceKey:d("WAHashStringToNumber").hashStringToNumber(g),timeoutInMs:c("justknobx")._("2950")})}}function q(a){var b=a.pointName;a=a.traceId;c("QPLUserFlow").addPoint(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function r(a){var b=a.annotations,e=a.pointName;a=a.traceId;c("QPLUserFlow").addAnnotations(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)});c("QPLUserFlow").addPoint(c("qpl")._(521476165,"2432"),e,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function s(a){var b=a.annotations,e=a.pointName;a=a.traceId;a!=null&&d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(521476165,"2432"),e,{annotations:b,instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function t(a){var b=a.pointName;a=a.traceId;d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function u(a,b){b=b?(i||(i=d("LSIntEnum"))).unwrapIntEnum(b):null;(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore."+a+"."+v(b))}function v(a){return(a=a==null?void 0:a.toString())!=null?a:"unknown"}g.markEBRestorePaginated=a;g.markEBRestoreInitial=b;g.markEBRestoreDYI=e;g.markEBRestoreFrontloaded=f;g.markEBRestorePoint=k;g.markEBRestoreSearch=l;g.markEBRestoreSuccess=m;g.markEBRestoreFail=n;g.markEBRestoreProtobuf=o;g.addQPLRestorePoint=q;g.addQPLRestorePointWithAnnotations=r;g.addQPLRestorePointWithAnnotationsWorker=s;g.addQPLRestorePointWorker=t}),98);
__d("MWEBODSEntityKey.enum",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({START:"start",SUCCESS:"success",FAIL:"fail",INCORRECT_PIN_CODE:"incorrect_pin_code",INCORRECT_RECOVERY_CODE:"incorrect_recovery_code",TIMEOUT:"timeout",CANCEL:"cancel"});c=a;f["default"]=c}),66);
__d("MWEBODSUtils",["CurrentMessengerUser","MWEBODSCategory","ODS"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){var f=d("CurrentMessengerUser").getAppID();f=f!=null?f.toString():"unknown";f=a+"."+f;(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),f,b,e!=null?e:1);h.bumpEntityKey(c("MWEBODSCategory"),a,b,e!=null?e:1)}g.markODSForEB=a}),98);
__d("WACommsConnectionState",["WAGenericStateManager"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(){return a.call(this,!1)||this}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.isConnected=function(){return this.get()};c.waitForConnection=function(){return this.waitForValue(!0)};return b}(d("WAGenericStateManager").WAGenericStateManager);b=new a();g.WACommsConnectionState=b}),98);
__d("WAGetHashFromProtocolMsgId",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.externalId+"_"+a.author+"_"+a.chat}f.getHashFromProtocolMsgId=a}),66);
__d("MAWEBUploadTrackingUtils",["MAWAckLevel","MAWEBSwitch","MAWExternalId","MAWMsgType","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","MWEBODSUtils","ODS","QPLUserFlow","QuickPerformanceLogger","WACommsConnectionState","WAExceededStorageQuota","WAGetHashFromProtocolMsgId","WAGlobals","WAHashStringToNumber","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j={ERROR_FETCHING_DB_MESSAGE:"error_fetching_db_message",FAILED_TO_ACK_MESSAGE:"failed_to_ack_message",FAILED_TO_CONSTRUCT_ECHO_MESSAGE:"failed_to_construct_echo_message",MESSAGE_UPLOAD_TIMEOUT:"message_upload_timeout",RUNTIME_ERROR:"runtime_error"};function a(a,b,e,f,g,h,j,k,m){g===void 0&&(g=!1);h===void 0&&(h=!1);k===void 0&&(k="unknown");m===void 0&&(m=0);if(!c("MAWEBSwitch").isEnabled())return;c("QPLUserFlow").start(c("qpl")._(521481602,"829"),{annotations:{bool:{eb_switch:c("MAWEBSwitch").isEnabled(),eb_upload_queue:!0,fromUploadQueue:g,is_retroactive_upload:h,middleware_init:!1},"int":{attachmentsSize:j!=null?j:0,instanceKey:f,retryCount:m},string:{comms_status:d("WACommsConnectionState").WACommsConnectionState.isConnected()===!0?"connected":"disconnected",externalId:a,msgType:b,payloadType:k,triggerType:e}},instanceKey:f,timeoutInMs:c("justknobx")._("1405")});l(f,"upload_tracking_started");(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").START);d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload."+(b!=null?b:"unknown"));g=d("MAWMsgType").isMAWSupportedMediaType(b!=null?b:"Text")?"media":"non-media";d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload."+g)}function k(a){return a==null?{string:{comms_status_on_failure:d("WACommsConnectionState").WACommsConnectionState.isConnected()===!0?"connected":"disconnected"}}:babelHelpers["extends"]({},a,{string:babelHelpers["extends"]({},a.string,{comms_status_on_failure:d("WACommsConnectionState").WACommsConnectionState.isConnected()===!0?"connected":"disconnected"})})}function b(a,b,c,d){switch(a){case"success":o(b,c,d);break;case"fail":n(b,c,d);break;case"point":l(b,c,d);break}}function l(a,b,d){d&&c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),d,{instanceKey:a}),c("QPLUserFlow").addPoint(c("qpl")._(521481602,"829"),b,{instanceKey:a})}function m(a,b){var e;c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),k(b),{instanceKey:a});c("QPLUserFlow").endCancel(c("qpl")._(521481602,"829"),{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{threadID:b==null||(e=b.string)==null?void 0:e.jid}},instanceKey:a});(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").CANCEL)}function n(a,b,e){var f;c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),k(e),{instanceKey:a});c("QPLUserFlow").endFailure(c("qpl")._(521481602,"829"),b,{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{threadID:e==null||(f=e.string)==null?void 0:f.jid}},instanceKey:a});(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").FAIL)}function o(a,b,c){l(a,b),p(a,c)}function p(a,b){b&&c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),b,{instanceKey:a}),c("QPLUserFlow").endSuccess(c("qpl")._(521481602,"829"),{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},instanceKey:a}),(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").SUCCESS)}function e(a,b,e){var f;l(a,b);e&&c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),e,{instanceKey:a});c("QPLUserFlow").endTimeout(c("qpl")._(521481602,"829"),{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{threadID:e==null||(f=e.string)==null?void 0:f.jid}},instanceKey:a});(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").TIMEOUT)}function f(a,b,d){var e=c("qpl")._(521481602,"829");l(a,b);d&&(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(e,d,{instanceKey:a});(h||(h=c("QuickPerformanceLogger"))).markerEnd(e,52,a,h.currentTimestamp())}function q(){return d("WAHashStringToNumber").hashStringToNumber(d("MAWExternalId").generateExternalId())}function r(a,b){b===void 0&&(b=0);return d("WAHashStringToNumber").hashStringToNumber(d("WAGetHashFromProtocolMsgId").getHashFromProtocolMsgId(a)+"_"+d("WAGlobals").getMyDeviceJid()+"_"+b)}function s(a){return c("MAWEBSwitch").isEnabled()&&d("MAWMsgType").isEBSupportedMsgType(a.type)&&a.ack>=d("MAWAckLevel").ACK.sent&&a.serverTs!=null&&!(a.ephemeralSetting!=null&&a.ephemeralSetting.ephemeralExpirationInSec>0)}function t(a){return{addAnnotations:function(b){u(a,b)},addPoint:function(b,c){l(a,b,c)},endCancel:function(b,c){m(a,c)},endFail:function(b,c){n(a,b,c)},endSuccess:function(b){p(a,b)},getQPLAttrs:function(){return{event:c("qpl")._(521481602,"829"),instanceKey:a}},isActive:function(){return!0}}}function u(a,b){c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),b,{instanceKey:a})}function v(a,b){return a.get(b)}function w(a,b,c,d,e){b=v(b,c);if(b!=null)switch(a){case"success":o(b,d,e);break;case"fail":n(b,d,e);break;case"point":l(b,d,e);break}}g.EBUploadTrackingWorkerFailurePoints=j;g.startUploadTracking=a;g.handleBridgeEbUploadTrackingQPL=b;g.addPointWorkerOnly=l;g.endCancelWorkerOnly=m;g.endFailWorkerOnly=n;g.endSuccessWorkerOnly=o;g.endTimeoutWorkerOnly=e;g.endRetryWorkerOnly=f;g.genInstanceKeyOnly=q;g.genInstanceKeyForUploadQueue=r;g.isUploadSupported=s;g.makeEBWorkerQplFlowFromInstanceKey=t;g.addAnnotationsForEBWorkerQplFlow=u;g.getUploadTrackingInstanceKey=v;g.addUploadTrackingByType=w}),98);
__d("MAWEphemeralConsts",["WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=300;b=600;c=900;e=1800;d=Math.imul((f=d("WATimeUtils")).HOUR_SECONDS,6);var h=Math.imul(f.HOUR_SECONDS,12),i=Math.imul(f.DAY_SECONDS,14),j=1e3,k=5,l=10,m=30,n=60,o=d;g.fiveMinutesInSeconds=a;g.tenMinutesInSeconds=b;g.fifteenMinutesInSeconds=c;g.thirtyMinutesInSeconds=e;g.oneHourInSeconds=f.HOUR_SECONDS;g.sixHoursInSeconds=d;g.twelveHoursInSeconds=h;g.oneDayInSeconds=f.DAY_SECONDS;g.ephemeralMaxDelectionWindowForUnseenMessage=i;g.msPerSec=j;g.fiveSeconds=k;g.tenSeconds=l;g.thirtySeconds=m;g.oneMinuteInSeconds=n;g.ephemeralReportingWindowInSeconds=o}),98);
__d("MAWFolderTypes",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;e=10;var g=15,h={ARCHIVED:e,INBOX:a,OTHER:c,PENDING:b,RESTRICTED:g,SPAM:d};f.INBOX=a;f.PENDING=b;f.OTHER=c;f.SPAM=d;f.ARCHIVED=e;f.RESTRICTED=g;f.FOLDER_ID=h}),66);
__d("MAWGetUserDeviceChangeAdminType",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){switch(a){case"add":if(b)return d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE;else return d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE;case"remove":if(b)return d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE;else return d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE;case"update":if(b)return d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE;else return d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE}}g.getUserDeviceAdminType=a}),98);
__d("MAWIndexedDBDeletion",["CurrentMessengerUser","FBLogger","MAWIndexedDbMetadata","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,d){return indexedDB==null||a==null?(h||(h=b("Promise"))).resolve():new(h||(h=b("Promise")))(function(b,e){var f=indexedDB.deleteDatabase(a);f.onsuccess=function(){c("FBLogger")("maw_db").warn("%s db was deleted",d),b()};f.onblocked=function(){c("FBLogger")("maw_db").mustfix("Cannot delete %s db: blocked. Make sure DB is closed.",d)};f.onerror=function(){c("FBLogger")("maw_db").mustfix("Cannot delete %s db",d),e(f.error)}})}function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("CurrentMessengerUser").getID();yield (h||(h=b("Promise"))).all([i(d("MAWIndexedDbMetadata").dbName(a),"maw_v1"),i(d("MAWIndexedDbMetadata").restoreDbName2(a),"maw_v3"),i(d("MAWIndexedDbMetadata").jobsDbName(a),"signal"),i(d("MAWIndexedDbMetadata").logDbName(a),"logDb")])});return j.apply(this,arguments)}g.deleteDB=i;g.deleteMAWPersistence=a}),98);
__d("MAWIsFbProfileDirectoryItemXmaEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("15740")}g.isFbProfileDirectoryItemXmaEnabled=a}),98);
__d("MAWJidUtils",["FBLogger","I64","LSIntEnum","MAWDbMsg","MAWJids","WAGlobals","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,e){if(d("WAJids").isAuthorSystem(a)||b==null||e==null){c("FBLogger")("messenger_web").warn("Failed to create protocolMsgId with externalId %s for a msg to edit",e);return}return{author:a,chat:b,externalId:e}}function a(a){var b;return j(a.author,a.threadJid,(b=a.externalId)!=null?b:a.editExternalId)}function b(a){return d("WAJids").isAuthorMe(a)?d("WAGlobals").getMyUserJid():a}function e(a,b){a=(h||(h=d("I64"))).to_string(a);b=(i||(i=d("LSIntEnum"))).unwrapIntEnum(b);switch(b){case 15:return d("MAWJids").jidUtils.toUserJid(a);case 16:return d("WAJids").toGroupJid(a);default:return null}}function f(a){return m(a.threadJid,a.externalId)}function k(a){return l(a.threadJid,a.externalId)}function l(a,b){a=d("MAWDbMsg").toMsgId(m(a,b));if(a==null)throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("formatProtocolMsgIdFromExternalId: Failed to create protocolMsgId with externalId %s for a msg",b);return a}function m(a,b){return a+"."+b}g.maybeToProtocolMsgId=j;g.toProtocolMsgId=a;g.getAuthorJid=b;g.LSJidtoChatJid=e;g.toProtocolMsgIdStringForMAWStorage=f;g.formatProtocolMsgIdFromMsg=k;g.formatProtocolMsgIdFromExternalId=l}),98);
__d("MAWJobDefinitions",["MAWExternalId"],(function(a,b,c,d,e,f,g){"use strict";var h=["s2sInstanceKey","s2sUserFlowQPLEvent"],i=["scheduleConfig"];function a(a){return a}function b(a){return a}f={acceptGroupInvite:function(a,b,c,d,e,f){f=k(f);return{args:{chatJid:a,inviteCode:d,invitedParticipantUserId:c,inviteExpirationTs:e,inviterUserId:b},scheduleConfig:f!=null?f:void 0,type:"acceptGroupInvite"}},addGroupParticipants:function(a,b,c,d){d=k(d);return{args:{group:a,s2sInstanceKey:c,users:b},scheduleConfig:d!=null?d:void 0,type:"addGroupParticipants"}},deleteMsgsForMe:function(a,b){b=k(b);return{args:{msgIds:a},scheduleConfig:b!=null?b:void 0,type:"deleteMsgsForMe"}},demoteGroupParticipants:function(a,b,c){c=k(c);return{args:{group:a,users:b},scheduleConfig:c!=null?c:void 0,type:"demoteGroupParticipants"}},downloadAndHandleMedia:function(a,b,c,d,e,f,g,h){f=k(h);return{args:{downloadType:e,hash:b,metricInstanceKeys:g,msgType:d,protocolMsgId:a,qplEntryPoint:c},scheduleConfig:f!=null?f:void 0,type:"downloadAndHandleMedia"}},forwardMsg:function(a,b,c,e,f,g,i){i=k(i);c=c!=null?c:{};var j=c.s2sInstanceKey;c.s2sUserFlowQPLEvent;c=babelHelpers.objectWithoutPropertiesLoose(c,h);return{args:{args:c,chatJid:a,ephemeralSetting:e,externalId:f!=null?f:d("MAWExternalId").generateExternalId(),isFirstMsg:g,protocolMsgId:b,s2sInstanceKey:j},scheduleConfig:i!=null?i:void 0,type:"forwardMsg"}},getSpams:function(a){a=k(a);return{args:void 0,scheduleConfig:a!=null?a:void 0,type:"getSpams"}},handleFutureproofMsg:function(a){a=k(a);return{args:{},scheduleConfig:a!=null?a:void 0,type:"handleFutureproofMsg"}},handleSpamMsg:function(a){a=k(a);return{args:void 0,scheduleConfig:a!=null?a:void 0,type:"handleSpamMsg"}},igdReportUserSpam:function(a,b){var c=a.chatJid,d=a.context,e=a.frxParams,f=a.frxTags,g=a.msgs,h=a.reportedMessageId,i=a.spamFlow;a=a.userJid;b=k(b);return{args:{chatJid:c,context:d,frxParams:e,frxTags:f,msgs:g,reportedMessageId:h,spamFlow:i,userJid:a},scheduleConfig:b!=null?b:void 0,type:"igdReportUserSpam"}},igdSendMsg:function(a,b){var c=a.actorID;a=a.taskID;b=k(b);return{args:{actorID:c,taskID:a},scheduleConfig:b!=null?b:void 0,type:"igdSendMsg"}},leaveGroups:function(a,b){b=k(b);return{args:{groups:a},scheduleConfig:b!=null?b:void 0,type:"leaveGroups"}},markThreadAsRead:function(a,b,c,d,e,f){f=k(f);return{args:{chatJid:a,isBlocked:c,isReadReceiptsDisabled:e,isRestricted:d,relationship:b},scheduleConfig:f!=null?f:void 0,type:"markThreadAsRead"}},promoteGroupParticipants:function(a,b,c){c=k(c);return{args:{group:a,users:b},scheduleConfig:c!=null?c:void 0,type:"promoteGroupParticipants"}},removeGroupParticipants:function(a,b,c){c=k(c);return{args:{group:a,users:b},scheduleConfig:c!=null?c:void 0,type:"removeGroupParticipants"}},reportUserSpam:function(a,b,c,d,e,f,g,h,i,j){i=k(i);return{args:{chatJid:c,context:f,frxParams:g,frxTags:e,isIgd:d,openMsgs:j,reportedMessageId:h,spamFlow:b,userJid:a},scheduleConfig:i!=null?i:void 0,type:"reportUserSpam"}},resendWrittenAppData:function(a,b){b=k(b);return{args:{appDataExternalId:a},scheduleConfig:b!=null?b:void 0,type:"resendWrittenAppData"}},restoreMessagesFromEncryptedBackups:function(a,b,c,d,e,f,g,h,i,j,l,m,n,o,p){n=k(n);return{args:{deanonApiPayload:o,hasMoreAfter:e,hasMoreBefore:d,instanceKey:j,isMediaGalleryRestore:p,isPointQuery:f,messages:c,minMsgId:g,optimisticMsgs:l,startSortKey:i,taskSource:m,threadId:b,traceId:h,transportKey:a},scheduleConfig:n!=null?n:void 0,type:"restoreMessagesFromEncryptedBackups"}},restoreProtobufsFromEncryptedBackups:function(a,b,c,d,e,f,g,h,i,j,l,m,n,o,p,q){m=k(m);return{args:{chatJid:q,deanonApiPayload:o,echoMessages:a,hasMoreAfter:f,hasMoreBefore:e,instanceKey:l,isMediaGalleryRestore:p,isPointQuery:g,messages:d,minMsgId:h,referenceTimestamp:j,requestId:i,taskSource:n,threadId:c,transportKey:b},scheduleConfig:m!=null?m:void 0,type:"restoreProtobufsFromEncryptedBackups"}},revokeMsgs:function(a,b){b=k(b);return{args:a,scheduleConfig:b!=null?b:void 0,type:"revokeMsgs"}},sendAppData:function(a,b,c){c=k(c);return{args:{args:a,externalId:b!=null?b:d("MAWExternalId").generateExternalId()},scheduleConfig:c!=null?c:void 0,type:"sendAppData"}},sendBumpMsg:function(a,b,c,e){e=k(e);return{args:{args:b,chatJid:a,externalId:c!=null?c:d("MAWExternalId").generateExternalId()},scheduleConfig:e!=null?e:void 0,type:"sendBumpMsg"}},sendGroupInviteMsg:function(a,b,c){c=k(c);return{args:{args:a,externalId:b!=null?b:d("MAWExternalId").generateExternalId()},scheduleConfig:c!=null?c:void 0,type:"sendGroupInviteMsg"}},sendMediaMsg:function(a,b,c,e,f,g,h,i,j,l,m,n,o,p,q,r,s,t,u,v,w,x){s=k(s);return{args:{args:{duration:j,ephemeralSetting:m,filename:u,height:g,isFirstMsg:q,isForwarded:p,isPtt:l,jpegThumbnail:e,jpegThumbnailHeight:i,jpegThumbnailWidth:h,mediaGroupMetadata:x,offlineAttachmentId:v,openMessageOtid:o,quote:n,s2sInstanceKey:c,source:t,width:f},attachmentType:w,chatJid:a,externalId:r!=null?r:d("MAWExternalId").generateExternalId(),file:b},scheduleConfig:s!=null?s:void 0,type:"sendMediaMsg"}},sendMediaMsgV2:function(a,b,c,e,f,g,h,i,j,l,m,n,o,p,q,r,s,t,u,v,w,x,y){s=k(s);return{args:{args:{duration:j,ephemeralSetting:m,filename:u,height:g,isFirstMsg:q,isForwarded:p,isPtt:l,jpegThumbnail:e,jpegThumbnailHeight:i,jpegThumbnailWidth:h,mediaGroupMetadata:y,offlineAttachmentId:v,openMessageOtid:o,quote:n,s2sInstanceKey:w,source:t,width:f},attachmentType:x,chatJid:a,externalId:r!=null?r:d("MAWExternalId").generateExternalId(),mimeType:b,plaintext:c},scheduleConfig:s!=null?s:void 0,type:"sendMediaMsgV2"}},sendWrittenAppData:function(a,b){b=k(b);return{args:{appDataExternalId:a},scheduleConfig:b!=null?b:void 0,type:"sendWrittenAppData"}},setGroupMemberAddMode:function(a,b,c){c=k(c);return{args:{groupJid:a,memberAddMode:b},scheduleConfig:c!=null?c:void 0,type:"setGroupMemberAddMode"}},setGroupSubject:function(a,b,c){c=k(c);return{args:{group:a,subject:b},scheduleConfig:c!=null?c:void 0,type:"setGroupSubject"}},startInstamadilloDYI:function(a,b){b=k(b);return{args:{qplInstanceKey:a},scheduleConfig:b!=null?b:void 0,type:"startInstamadilloDYI"}},updateBackupEntFbidForMedia:function(a,b,c,d){d=k(d);return{args:{backupEntFbid:b,deliveryObjectId:a,traceId:c},scheduleConfig:d!=null?d:void 0,type:"updateBackupEntFbidForMedia"}}};function c(a,b){return j(a,b)}function j(a,b){var c=b.scheduleConfig,e=babelHelpers.objectWithoutPropertiesLoose(b,i);c={args:{},scheduleConfig:c,type:a};b.externalIdJob&&(c.args.externalId=d("MAWExternalId").generateExternalId());c.args=babelHelpers["extends"]({},c.args,e);b.uniqueJob&&(c.uniqKey=a);return c}function k(a){if(a==null)return;return{jobId:a.jobId,maxTimeoutMs:a.maxTimeoutMs,priority:a.priority}}function e(a){return{otid:a.toplevelProtobuf.messageId,supplementalProtobufs:new Map(a.supplementalProtobufs.entries().map(function(a){var b=a[0];a=a[1];return[b,{decryptedProtobuf:a.payload,protobufTimestampMS:a.timestampMs}]})),tags:a.tags,toplevelProtobuf:{decryptedProtobuf:a.toplevelProtobuf.payload,protobufTimestampMS:a.toplevelProtobuf.timestampMs}}}g.toThreadJidPrimaryId=a;g.toEncodedEchoMessage=b;g.jobSerializers=f;g.createStartJobInfo=c;g.createStartJobInfoGeneric=j;g.serializeJobScheduledConfig=k;g.mpsMessageToEncryptedBackupsMessage=e}),98);
__d("MWLocalStorageErrorHandler",["cr:3449"],(function(a,b,c,d,e,f,g){"use strict";function a(){b("cr:3449")&&b("cr:3449").clearLocalStorageBigValues()}g.onQuotaExceeded=a}),98);
__d("MAWLocalStorage",["LocalStorageWrapper","MWLocalStorageErrorHandler","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){d("WALogger").LOG([a])}function j(a){d("WALogger").ERROR([a])}function a(){return d("LocalStorageWrapper").getStorage(i)}function b(){return d("LocalStorageWrapper").isLocalStorageAvailable(i)}function c(a,b,c){return d("LocalStorageWrapper").setItemGuarded(a,b,c,j,d("MWLocalStorageErrorHandler").onQuotaExceeded)}function e(a,b){a==null?d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["not storage found"]))):a.removeItem(b)}g.getStorage=a;g.isLocalStorageAvailable=b;g.setItemGuarded=c;g.removeItemGuarded=e}),98);
__d("MAWMediaDownloadStatus",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["DOWNLOADING","SUCCESS","NOT_MANUAL_RETRYABLE_FAILURE","MANUAL_RETRYABLE_FAILURE","MISSING_FILE","RETRYING","AUTOMATICALLY_RETRYABLE_TIMEOUT_FAILURE"]);c=a;f["default"]=c}),66);
__d("MAWMsg",["$InternalEnum","I64","LSBitFlag","LSIntEnum","LSMessagingThreadTypeUtil","LSReplyMessageAttachmentType","MAWMsgType","WAArmadilloXMA.pb"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b,c,e,f,g){if(a===d("MAWMsgType").MSG_TYPE.TEXT)if(b)return(i||(i=d("LSIntEnum"))).ofNumber(8192);else return(i||(i=d("LSIntEnum"))).ofNumber(1);else if(a===d("MAWMsgType").MSG_TYPE.IMAGE||a===d("MAWMsgType").MSG_TYPE.VIDEO||a===d("MAWMsgType").MSG_TYPE.RAVEN)return(i||(i=d("LSIntEnum"))).ofNumber(2);else if(a===d("MAWMsgType").MSG_TYPE.PTT)return(i||(i=d("LSIntEnum"))).ofNumber(4);else if(a===d("MAWMsgType").MSG_TYPE.FUTUREPROOF)return k(f);else if(a===d("MAWMsgType").MSG_TYPE.CIPHERTEXT)return(i||(i=d("LSIntEnum"))).ofNumber(65536);else if(a===d("MAWMsgType").MSG_TYPE.UNAVAILABLE)return(i||(i=d("LSIntEnum"))).ofNumber(262144);else if(a===d("MAWMsgType").MSG_TYPE.GIF)return(i||(i=d("LSIntEnum"))).ofNumber(16384);else if(a===d("MAWMsgType").MSG_TYPE.STICKER)return(i||(i=d("LSIntEnum"))).ofNumber(4096);else if(a===d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE)return(i||(i=d("LSIntEnum"))).ofNumber(64);else if(a===d("MAWMsgType").MSG_TYPE.XMA)if(c!=null&&c)return(i||(i=d("LSIntEnum"))).ofNumber(256);else return g===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH?(i||(i=d("LSIntEnum"))).ofNumber(536870912):(i||(i=d("LSIntEnum"))).ofNumber(1024);else if(a===d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE)if(!e)return(i||(i=d("LSIntEnum"))).ofNumber(33554432);else return(i||(i=d("LSIntEnum"))).ofNumber(1);else if(a===d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH)return(i||(i=d("LSIntEnum"))).ofNumber(134217728);else return(i||(i=d("LSIntEnum"))).ofNumber(1)}function k(a){switch(a){case"liveLocationMessage":return(i||(i=d("LSIntEnum"))).ofNumber(4294967296);case"locationMessage":return(i||(i=d("LSIntEnum"))).ofNumber(524288);case"pollCreationMessage":return(i||(i=d("LSIntEnum"))).ofNumber(1048576);case"contactShareMessage":return(i||(i=d("LSIntEnum"))).ofNumber(2097152);case"storyMentionMessage":return(i||(i=d("LSIntEnum"))).ofNumber(4194304);case"postMentionMessage":return(i||(i=d("LSIntEnum"))).ofNumber(2147483648);case"metaAiMessage":return(i||(i=d("LSIntEnum"))).ofNumber(8388608);case"bumpMessage":return(i||(i=d("LSIntEnum"))).ofNumber(16777216);case"stickerReceiverFetchMessage":return(i||(i=d("LSIntEnum"))).ofNumber(67108864);case"noteMention":return(i||(i=d("LSIntEnum"))).ofNumber(1073741824);case"messengerMemory":return(i||(i=d("LSIntEnum"))).ofNumber(8589934592);case"rtcMessage":return(i||(i=d("LSIntEnum"))).ofNumber(17179869184);default:return(i||(i=d("LSIntEnum"))).ofNumber(131072)}}function e(a){a=a.displayedContentTypes;return(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16384))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(64))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4096))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(134217728))}function f(a,b){var e=a.replyAttachmentType;if(e==null)return!1;b=d("LSMessagingThreadTypeUtil").isArmadilloSecure(b);return b&&a.replyAttachmentId==null?!1:(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").GIF))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").AUDIO))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO))}function l(a){return(j||(j=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(134217728))}function m(a){return d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(536870912),a.displayedContentTypes)}function n(a){a=a.displayedContentTypes;if((j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(32)))return!0;else return!1}function o(a){return(j||(j=d("I64"))).lt(a.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(2))}function p(a){a=a.displayedContentTypes;return d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(1024),a)||d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(536870912),a)}function q(a){a=a.displayedContentTypes;return(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(65536))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(131072))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(524288))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4294967296))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1048576))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2097152))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4194304))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2147483648))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(8388608))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16777216))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1073741824))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(8589934592))?!0:(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(262144))}var r=(b=b("$InternalEnum"))({PLAYED:0,SCREENSHOTTED:1,FORCE_DISABLED:2}),s=b({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4}),t=b({VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2});b=b({IMAGE:0,VIDEO:1});g.text=(h=d("MAWMsgType")).MSG_TYPE.TEXT;g.image=h.MSG_TYPE.IMAGE;g.video=h.MSG_TYPE.VIDEO;g.ptt=h.MSG_TYPE.PTT;g.unsent=h.MSG_TYPE.REVOKED;g.gif=h.MSG_TYPE.GIF;g.bumpExistingMessage=h.MSG_TYPE.BUMP_EXISTING_MESSAGE;g.getDisplayedContentTypes=a;g.isMediaMsg=e;g.isMediaReplyAttachmentType=f;g.isReceiverFetchMsg=l;g.isReceiverFetchXMAMsg=m;g.isAdminMsg=n;g.isOptimistic=o;g.isXMAMsg=p;g.isPlaceholder=q;g.MAWRavenActionNotifType=r;g.MAWRavenMsgEphemeralMediaState=s;g.MAWRavenMsgEphemeralType=t;g.MAWRavenMsgMediaType=b}),98);
__d("MAWSharedProtocolQueueConst",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({Initializing:"initializing",Failed:"failed",Processing:"processing",Complete:"complete"});f.OfflineConsumerStatus=a}),66);
__d("MAWOfflineQueueStatus",["FBLogger","MAWSharedProtocolQueueConst"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=!1;function j(a,b){h.set(a,b),h.size>5e3&&c("FBLogger")("wmi_eb").warn("Offline queue status map size (%s) is too large",h.size)}function k(a){return h.get(a)}function a(){h=new Map(),i=!1}function b(){return i}function e(){i=!0}function f(a,b){a=Object.keys(a);a.map(function(a){j(a,b)})}function l(a){return k(a)===d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete}function m(){return Array.from(h.entries()).filter(function(a){a[0];a=a[1];return a!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete&&a!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Failed}).map(function(a){a=a[0];return a})}g.setOfflineQueueStatus=j;g.getOfflineQueueStatus=k;g.resetOfflineQueueState=a;g.isOfflineQueueComplete=b;g.markOfflineQueueComplete=e;g.markThreadWithOfflineQueueStatus=f;g.isOfflineQueueDoneForThread=l;g.getAllThreadsWithOfflineQueueIncomplete=m}),98);
__d("MWXMAV2IsDataclassLiveLocationXMA",["MSGDataclassTypes.flow","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h(a)!=null}function h(a){if(a==null)return;a=a.content;if(a==null||(a==null?void 0:a.__typename)!=="XMSGXmaSingleContent")return;a=a.custom_template_data;if(a==null||(a==null?void 0:a.__typename)!=="XMSGXmaLocationTemplateData")return;a=a.location_metadata;if(a==null||(a==null?void 0:a.__typename)!=="XMSGXmaLiveLocationMetadata")return;return a}var i=1e3;function b(a,b){var e=c("justknobx")._("4207");e=Math.floor(Date.now()/i)-e;return b!=null&&b<e&&((b=h(a))==null?void 0:b.session_state)===d("MSGDataclassTypes.flow").XmsgXmaLiveLocationSessionState.Started}g.isDataclassLiveLocationXMA=a;g.getLiveLocationMetadata=h;g.isExpiredLiveLocationStarted=b}),98);
__d("MAWParseCollapsibleIdFromXMADataClass",["FBLogger","MWXMAV2IsDataclassLiveLocationXMA"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)throw c("FBLogger")("messenger_web").mustfixThrow("xmaDataclass is missing or invalid");var b=d("MWXMAV2IsDataclassLiveLocationXMA").getLiveLocationMetadata(a);if(b!=null)return parseInt(b.session_id,10);if((a==null?void 0:a.layout_config)==null||typeof (a==null?void 0:a.layout_config.collapsible_id)!=="number")throw c("FBLogger")("messenger_web").mustfixThrow("Layout config or collapsible_id is missing or invalid");return a.layout_config.collapsible_id}g.parseCollapsibleIdFromXMADataClass=a}),98);
__d("MAWParseXMAFBConfig",["FBLogger","MAWIsFbProfileDirectoryItemXmaEnabled","WAArmadilloXMA.pb","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set([(b=d("WAArmadilloXMA.pb")).EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH]);function a(a){var b=a.fbTargetType;a=a.silentExposure;if(b!=null&&h.has(b))return!0;a=a!=null?a:!1;switch(b){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return a?c("gkx")("9338"):c("gkx")("9339");case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return d("MAWIsFbProfileDirectoryItemXmaEnabled").isFbProfileDirectoryItemXmaEnabled();default:c("FBLogger")("maw_db").mustfix("MAWParseXMAFBConfig encountered an unknown unsupported XMA type: %s",String(b));return!1}}g.FB_FULLY_SUPPORTED_TARGET_TYPES=h;g.isFBSupportedTargetType=a}),98);
__d("MWXMAV2XmaDataClass",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)return;try{return JSON.parse(a)}catch(a){c("FBLogger")("messenger_web_sharing").mustfix("Error parsing xma dataclass")}}g.parseXmaDataClass=a}),98);
__d("MAWParseXMAUnsupportedMessageType",["MWXMAV2IsDataclassLiveLocationXMA","MWXMAV2XmaDataClass","WAArmadilloXMA.pb"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){c===void 0&&(c=!1);if(a==null)return null;if(c)return"paymentsTransactionMessage";switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return d("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(d("MWXMAV2XmaDataClass").parseXmaDataClass(b))?"liveLocationMessage":"locationMessage";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return"contactShareMessage";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return"storyMentionMessage";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return"postMentionMessage";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return"messengerMemory";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return"rtcMessage";default:return null}}g.getXMAUnsupportedMessageType=a}),98);
__d("WAArmadilloApplication.pb",["WAArmadilloXMA.pb","WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h,i;a={ES_OPEN:1,ES_CLOSE:2};b={PAYMENT_UNKNOWN:-1,REQUEST_INITED:4,REQUEST_DECLINED:5,REQUEST_TRANSFER_INITED:6,REQUEST_TRANSFER_COMPLETED:7,REQUEST_TRANSFER_FAILED:8,REQUEST_CANCELED:9,REQUEST_EXPIRED:10,TRANSFER_INITED:11,TRANSFER_PENDING:12,TRANSFER_PENDING_RECIPIENT_VERIFICATION:13,TRANSFER_CANCELED:14,TRANSFER_COMPLETED:15,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_CANCELED:16,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_OTHER:17,TRANSFER_REFUNDED:18,TRANSFER_PARTIAL_REFUND:19,TRANSFER_CHARGED_BACK:20,TRANSFER_EXPIRED:21,TRANSFER_DECLINED:22,TRANSFER_UNAVAILABLE:23};c={SCREENSHOT_IMAGE:1,SCREEN_RECORDING:2};e={PLAYED:0,SCREENSHOT:1,FORCE_DISABLE:2};f={VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2};var j={SMALL_LIKE:1,MEDIUM_LIKE:2,LARGE_LIKE:3},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={},N={},O={};k.name="Armadillo";k.internalSpec={payload:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,m],metadata:[2,h.TYPES.MESSAGE,l]};l.name="Armadillo$Metadata";l.internalSpec={};m.name="Armadillo$Payload";m.internalSpec={content:[1,h.TYPES.MESSAGE,E],applicationData:[2,h.TYPES.MESSAGE,r],signal:[3,h.TYPES.MESSAGE,o],subProtocol:[4,h.TYPES.MESSAGE,n],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}};n.name="Armadillo$SubProtocolPayload";n.internalSpec={futureProof:[1,h.TYPES.ENUM,(i=d("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]};o.name="Armadillo$Signal";o.internalSpec={encryptedBackupsSecrets:[1,h.TYPES.MESSAGE,p],__oneofs__:{signal:["encryptedBackupsSecrets"]}};p.name="Armadillo$Signal$EncryptedBackupsSecrets";p.internalSpec={backupId:[1,h.TYPES.UINT64],serverDataId:[2,h.TYPES.UINT64],epoch:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,q],tempOcmfClientState:[4,h.TYPES.BYTES],mailboxRootKey:[5,h.TYPES.BYTES],obliviousValidationToken:[6,h.TYPES.BYTES]};q.name="Armadillo$Signal$EncryptedBackupsSecrets$Epoch";q.internalSpec={id:[1,h.TYPES.UINT64],anonId:[2,h.TYPES.BYTES],rootKey:[3,h.TYPES.BYTES],status:[4,h.TYPES.ENUM,a]};r.name="Armadillo$ApplicationData";r.internalSpec={metadataSync:[1,h.TYPES.MESSAGE,D],aiBotResponse:[2,h.TYPES.MESSAGE,t],messageHistoryDocumentMessage:[3,h.TYPES.MESSAGE,s],__oneofs__:{applicationData:["metadataSync","aiBotResponse","messageHistoryDocumentMessage"]}};s.name="Armadillo$ApplicationData$MessageHistoryDocumentMessage";s.internalSpec={document:[1,h.TYPES.MESSAGE,i.SubProtocolSpec]};t.name="Armadillo$ApplicationData$AIBotResponseMessage";t.internalSpec={summonToken:[1,h.TYPES.STRING],messageText:[2,h.TYPES.STRING],serializedExtras:[3,h.TYPES.STRING]};u.name="Armadillo$ApplicationData$MetadataSyncAction";u.internalSpec={actionTimestamp:[1,h.TYPES.INT64],chatAction:[101,h.TYPES.MESSAGE,x],messageAction:[102,h.TYPES.MESSAGE,v],__oneofs__:{actionType:["chatAction","messageAction"]}};v.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction";v.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],messageDelete:[101,h.TYPES.MESSAGE,w],__oneofs__:{action:["messageDelete"]}};w.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDelete";w.internalSpec={};x.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction";x.internalSpec={chatId:[1,h.TYPES.STRING],chatArchive:[101,h.TYPES.MESSAGE,A],chatDelete:[102,h.TYPES.MESSAGE,z],chatRead:[103,h.TYPES.MESSAGE,y],__oneofs__:{action:["chatArchive","chatDelete","chatRead"]}};y.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatRead";y.internalSpec={messageRange:[1,h.TYPES.MESSAGE,C],read:[2,h.TYPES.BOOL]};z.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDelete";z.internalSpec={messageRange:[1,h.TYPES.MESSAGE,C]};A.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchive";A.internalSpec={messageRange:[1,h.TYPES.MESSAGE,C],archived:[2,h.TYPES.BOOL]};B.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessage";B.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],timestamp:[2,h.TYPES.INT64]};C.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRange";C.internalSpec={lastMessageTimestamp:[1,h.TYPES.INT64],lastSystemMessageTimestamp:[2,h.TYPES.INT64],messages:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,B]};D.name="Armadillo$ApplicationData$MetadataSyncNotification";D.internalSpec={actions:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,u]};E.name="Armadillo$Content";E.internalSpec={commonSticker:[1,h.TYPES.MESSAGE,O],screenshotAction:[3,h.TYPES.MESSAGE,K],extendedContentMessage:[4,h.TYPES.MESSAGE,d("WAArmadilloXMA.pb").ExtendedContentMessageSpec],ravenMessage:[5,h.TYPES.MESSAGE,N],ravenActionNotifMessage:[6,h.TYPES.MESSAGE,M],extendedMessageContentWithSear:[7,h.TYPES.MESSAGE,L],imageGalleryMessage:[8,h.TYPES.MESSAGE,J],paymentsTransactionMessage:[10,h.TYPES.MESSAGE,F],bumpExistingMessage:[11,h.TYPES.MESSAGE,I],noteReplyMessage:[13,h.TYPES.MESSAGE,H],ravenMessageMsgr:[14,h.TYPES.MESSAGE,N],networkVerificationMessage:[15,h.TYPES.MESSAGE,G],__oneofs__:{content:["commonSticker","screenshotAction","extendedContentMessage","ravenMessage","ravenActionNotifMessage","extendedMessageContentWithSear","imageGalleryMessage","paymentsTransactionMessage","bumpExistingMessage","noteReplyMessage","ravenMessageMsgr","networkVerificationMessage"]}};F.name="Armadillo$Content$PaymentsTransactionMessage";F.internalSpec={transactionId:[1,h.TYPES.UINT64],amount:[2,h.TYPES.STRING],currency:[3,h.TYPES.STRING],paymentStatus:[4,h.TYPES.ENUM,b],extendedContentMessage:[5,h.TYPES.MESSAGE,d("WAArmadilloXMA.pb").ExtendedContentMessageSpec]};G.name="Armadillo$Content$NetworkVerificationMessage";G.internalSpec={codeText:[1,h.TYPES.STRING]};H.name="Armadillo$Content$NoteReplyMessage";H.internalSpec={noteId:[1,h.TYPES.STRING],noteText:[2,h.TYPES.MESSAGE,i.MessageTextSpec],noteTimestampMs:[3,h.TYPES.INT64],textContent:[4,h.TYPES.MESSAGE,i.MessageTextSpec],stickerContent:[5,h.TYPES.MESSAGE,i.SubProtocolSpec],videoContent:[6,h.TYPES.MESSAGE,i.SubProtocolSpec],__oneofs__:{noteReplyContent:["textContent","stickerContent","videoContent"]}};I.name="Armadillo$Content$BumpExistingMessage";I.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec]};J.name="Armadillo$Content$ImageGalleryMessage";J.internalSpec={images:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,i.SubProtocolSpec]};K.name="Armadillo$Content$ScreenshotAction";K.internalSpec={screenshotType:[1,h.TYPES.ENUM,c]};L.name="Armadillo$Content$ExtendedContentMessageWithSear";L.internalSpec={searId:[1,h.TYPES.STRING],payload:[2,h.TYPES.BYTES],nativeUrl:[3,h.TYPES.STRING],searAssociatedMessage:[4,h.TYPES.MESSAGE,i.SubProtocolSpec],searSentWithMessageId:[5,h.TYPES.STRING]};M.name="Armadillo$Content$RavenActionNotifMessage";M.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],actionTimestamp:[2,h.TYPES.INT64],actionType:[3,h.TYPES.ENUM,e]};N.name="Armadillo$Content$RavenMessage";N.internalSpec={ephemeralType:[1,h.TYPES.ENUM,f],imageMessage:[2,h.TYPES.MESSAGE,i.SubProtocolSpec],videoMessage:[3,h.TYPES.MESSAGE,i.SubProtocolSpec],__oneofs__:{mediaContent:["imageMessage","videoMessage"]}};O.name="Armadillo$Content$CommonSticker";O.internalSpec={stickerType:[1,h.TYPES.ENUM,j]};g.ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS=a;g.ARMADILLO_CONTENT_PAYMENTS_TRANSACTION_MESSAGE_PAYMENT_STATUS=b;g.ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE=c;g.ARMADILLO_CONTENT_RAVEN_ACTION_NOTIF_MESSAGE_ACTION_TYPE=e;g.ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE=f;g.ARMADILLO_CONTENT_COMMON_STICKER_STICKER_TYPE=j;g.ArmadilloSpec=k;g.Armadillo$MetadataSpec=l;g.Armadillo$PayloadSpec=m;g.Armadillo$SubProtocolPayloadSpec=n;g.Armadillo$SignalSpec=o;g.Armadillo$Signal$EncryptedBackupsSecretsSpec=p;g.Armadillo$Signal$EncryptedBackupsSecrets$EpochSpec=q;g.Armadillo$ApplicationDataSpec=r;g.Armadillo$ApplicationData$MessageHistoryDocumentMessageSpec=s;g.Armadillo$ApplicationData$AIBotResponseMessageSpec=t;g.Armadillo$ApplicationData$MetadataSyncActionSpec=u;g.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageActionSpec=v;g.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDeleteSpec=w;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatActionSpec=x;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatReadSpec=y;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDeleteSpec=z;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchiveSpec=A;g.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageSpec=B;g.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRangeSpec=C;g.Armadillo$ApplicationData$MetadataSyncNotificationSpec=D;g.Armadillo$ContentSpec=E;g.Armadillo$Content$PaymentsTransactionMessageSpec=F;g.Armadillo$Content$NetworkVerificationMessageSpec=G;g.Armadillo$Content$NoteReplyMessageSpec=H;g.Armadillo$Content$BumpExistingMessageSpec=I;g.Armadillo$Content$ImageGalleryMessageSpec=J;g.Armadillo$Content$ScreenshotActionSpec=K;g.Armadillo$Content$ExtendedContentMessageWithSearSpec=L;g.Armadillo$Content$RavenActionNotifMessageSpec=M;g.Armadillo$Content$RavenMessageSpec=N;g.Armadillo$Content$CommonStickerSpec=O}),98);
__d("WAArmadilloLocallyTransformedMessage.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};a.name="LocallyTransformedMessage";a.internalSpec={pollUpdateMessage:[1,d("WAProtoConst").TYPES.MESSAGE,b],__oneofs__:{content:["pollUpdateMessage"]}};b.name="LocallyTransformedMessage$PollUpdateAdminMessage";b.internalSpec={pollCreationMessageId:[1,d("WAProtoConst").TYPES.STRING],pollUpdateMessageId:[2,d("WAProtoConst").TYPES.STRING]};g.LocallyTransformedMessageSpec=a;g.LocallyTransformedMessage$PollUpdateAdminMessageSpec=b}),98);
__d("WAArmadilloMiTransportAdminMessage.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){c=(a=b("$InternalEnum"))({UNSET:0,DISABLED:1,ENABLED:2});e=a({UNSET:0,CHANGED:1,REMOVED:2});f=a({UNSET:0,PINNED:1,UNPINNED:2});b=a({UNSET:0,ALL_MEMBERS:1,ADMINS_ONLY:2});var h=a({UNSET:0,ADDED:1,REMOVED:2});a=a({UNSET:0,ADDED:1,REMOVED:2});var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={},N={},O={},P={},Q={};i.name="MiTransportAdminMessage";i.internalSpec={chatThemeChanged:[1,(d=d("WAProtoConst")).TYPES.MESSAGE,Q],nicknameChanged:[2,d.TYPES.MESSAGE,P],groupParticipantChanged:[3,d.TYPES.MESSAGE,O],groupAdminChanged:[4,d.TYPES.MESSAGE,N],groupNameChanged:[5,d.TYPES.MESSAGE,M],groupMembershipAddModeChanged:[6,d.TYPES.MESSAGE,L],messagePinned:[7,d.TYPES.MESSAGE,K],groupImageChanged:[8,d.TYPES.MESSAGE,J],quickReactionChanged:[9,d.TYPES.MESSAGE,I],linkCta:[10,d.TYPES.MESSAGE,G],iconChanged:[11,d.TYPES.MESSAGE,F],disappearingSettingChanged:[12,d.TYPES.MESSAGE,E],limitSharingChanged:[13,d.TYPES.MESSAGE,D],xmatDisappearingSetting:[14,d.TYPES.MESSAGE,C],xmatFriendRequestConfirmedEncrypted:[15,d.TYPES.MESSAGE,B],xmatInstantGameEncryptedDynamicCustomUpdate:[16,d.TYPES.MESSAGE,A],xmatLinkCta:[17,d.TYPES.MESSAGE,z],xmatMagicWords:[18,d.TYPES.MESSAGE,y],xmatMessagingLimitSharing:[19,d.TYPES.MESSAGE,x],xmatMessengerQrCodeScanned:[20,d.TYPES.MESSAGE,w],xmatMessengerSharedAlbumAddition:[21,d.TYPES.MESSAGE,v],xmatMessengerSharedAlbumContentRemoval:[22,d.TYPES.MESSAGE,t],xmatMessengerSharedAlbumDeletion:[23,d.TYPES.MESSAGE,s],xmatMessengerSharedAlbumRename:[24,d.TYPES.MESSAGE,r],xmatMessengerSharedAlbum:[25,d.TYPES.MESSAGE,q],xmatThemeColor:[26,d.TYPES.MESSAGE,p],xmatThreadIcon:[27,d.TYPES.MESSAGE,o],xmatThreadNickname:[28,d.TYPES.MESSAGE,n],xmatThreadQuickReaction:[29,d.TYPES.MESSAGE,m],xmatUpdatePayments:[30,d.TYPES.MESSAGE,l],xmatPinMessageV2:[31,d.TYPES.MESSAGE,k],xmatUnpinMessageV2:[32,d.TYPES.MESSAGE,j],__oneofs__:{content:["chatThemeChanged","nicknameChanged","groupParticipantChanged","groupAdminChanged","groupNameChanged","groupMembershipAddModeChanged","messagePinned","groupImageChanged","quickReactionChanged","linkCta","iconChanged","disappearingSettingChanged","limitSharingChanged","xmatDisappearingSetting","xmatFriendRequestConfirmedEncrypted","xmatInstantGameEncryptedDynamicCustomUpdate","xmatLinkCta","xmatMagicWords","xmatMessagingLimitSharing","xmatMessengerQrCodeScanned","xmatMessengerSharedAlbumAddition","xmatMessengerSharedAlbumContentRemoval","xmatMessengerSharedAlbumDeletion","xmatMessengerSharedAlbumRename","xmatMessengerSharedAlbum","xmatThemeColor","xmatThreadIcon","xmatThreadNickname","xmatThreadQuickReaction","xmatUpdatePayments","xmatPinMessageV2","xmatUnpinMessageV2"]}};j.name="MiTransportAdminMessage$XmatUnpinMessageV2";j.internalSpec={pinnedMessageId:[1,d.TYPES.STRING]};k.name="MiTransportAdminMessage$XmatPinMessageV2";k.internalSpec={pinnedMessageId:[1,d.TYPES.STRING]};l.name="MiTransportAdminMessage$XmatUpdatePayments";l.internalSpec={receiverName:[1,d.TYPES.STRING],senderName:[2,d.TYPES.STRING],amount:[3,d.TYPES.FLOAT],transactionId:[4,d.TYPES.INT64],transactionStatus:[5,d.TYPES.INT32]};m.name="MiTransportAdminMessage$XmatThreadQuickReaction";m.internalSpec={threadQuickReactionEmoji:[1,d.TYPES.STRING],threadQuickReactionInstructionKeyId:[2,d.TYPES.STRING]};n.name="MiTransportAdminMessage$XmatThreadNickname";n.internalSpec={participantId:[1,d.TYPES.INT64],nickname:[2,d.TYPES.STRING]};o.name="MiTransportAdminMessage$XmatThreadIcon";o.internalSpec={threadIcon:[1,d.TYPES.STRING]};p.name="MiTransportAdminMessage$XmatThemeColor";p.internalSpec={themeId:[1,d.TYPES.STRING],themeColor:[2,d.TYPES.STRING],gradient:[3,d.FLAGS.REPEATED|d.TYPES.STRING],shouldShowIcon:[4,d.TYPES.BOOL],themeType:[5,d.TYPES.INT32],accessibilityLabel:[6,d.TYPES.STRING],themeNameWithSubtitle:[7,d.TYPES.STRING],themeEmoji:[8,d.TYPES.STRING]};q.name="MiTransportAdminMessage$XmatMessengerSharedAlbum";q.internalSpec={xmaDataclass:[1,d.TYPES.STRING]};r.name="MiTransportAdminMessage$XmatMessengerSharedAlbumRename";r.internalSpec={sharedAlbumId:[1,d.TYPES.INT64],oldAlbumTitle:[2,d.TYPES.STRING],newAlbumTitle:[3,d.TYPES.STRING]};s.name="MiTransportAdminMessage$XmatMessengerSharedAlbumDeletion";s.internalSpec={sharedAlbumId:[1,d.TYPES.INT64],albumTitle:[2,d.TYPES.STRING]};t.name="MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval";t.internalSpec={sharedAlbumId:[1,d.TYPES.INT64],removedContentMap:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,u],removedContentCount:[3,d.TYPES.INT64],albumTitle:[4,d.TYPES.STRING]};u.name="MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval$RemovedContentTuple";u.internalSpec={key:[1,d.TYPES.INT64],value:[2,d.TYPES.STRING]};v.name="MiTransportAdminMessage$XmatMessengerSharedAlbumAddition";v.internalSpec={sharedAlbumId:[1,d.TYPES.INT64],albumTitle:[2,d.TYPES.STRING],numOfAttachments:[3,d.TYPES.INT64],isAlbumCreation:[4,d.TYPES.BOOL]};w.name="MiTransportAdminMessage$XmatMessengerQRCodeScanned";w.internalSpec={receiverName:[1,d.TYPES.STRING],senderName:[2,d.TYPES.STRING]};x.name="MiTransportAdminMessage$XmatMessagingLimitSharing";x.internalSpec={senderName:[1,d.TYPES.STRING],senderId:[2,d.TYPES.STRING],limitSharingType:[3,d.TYPES.STRING]};y.name="MiTransportAdminMessage$XmatMagicWords";y.internalSpec={newMagicWordCount:[1,d.TYPES.INT64],removedMagicWordCount:[2,d.TYPES.INT64],magicWord:[3,d.TYPES.STRING],emojiEffect:[4,d.TYPES.STRING],isAllEdited:[5,d.TYPES.BOOL],themeName:[6,d.TYPES.STRING]};z.name="MiTransportAdminMessage$XmatLinkCTA";z.internalSpec={linkCtaXmatPrimaryText:[1,d.TYPES.STRING],linkCtaXmatCtaText:[2,d.TYPES.STRING],linkCtaXmatCtaUrl:[3,d.TYPES.STRING],linkCtaXmatCtaIosUrl:[4,d.TYPES.STRING],androidUri:[5,d.TYPES.STRING],asyncUrl:[6,d.TYPES.STRING],wwwIsAsyncUrl:[7,d.TYPES.BOOL],msiteEnabled:[8,d.TYPES.BOOL],hideUriInFallback:[9,d.TYPES.BOOL],showConfirmationDialog:[10,d.TYPES.BOOL],graphPayload:[11,d.TYPES.STRING],identifierName:[12,d.TYPES.STRING],threadId:[13,d.TYPES.STRING],hideCtaInFallback:[14,d.TYPES.BOOL],ctxAdConversationStarterInfo:[15,d.TYPES.STRING],fbmUri:[16,d.TYPES.STRING],initiatorUserId:[17,d.TYPES.STRING]};A.name="MiTransportAdminMessage$XmatInstantGameEncryptedDynamicCustomUpdate";A.internalSpec={senderName:[1,d.TYPES.STRING],muteManagementAdminTextType:[2,d.TYPES.STRING],gameName:[3,d.TYPES.STRING]};B.name="MiTransportAdminMessage$XmatFriendRequestConfirmedEncrypted";B.internalSpec={otherUserName:[1,d.TYPES.STRING],isTurnOnCohort:[2,d.TYPES.STRING]};C.name="MiTransportAdminMessage$XmatDisappearingSetting";C.internalSpec={disappearingSettingTime:[1,d.TYPES.INT64],oldDisappearingSettingTime:[2,d.TYPES.INT64],disappearingSettingActorFbid:[3,d.TYPES.INT64],newEphemeralityType:[4,d.TYPES.INT64],oldEphemeralityType:[5,d.TYPES.INT64]};D.name="MiTransportAdminMessage$LimitSharingChanged";D.internalSpec={sharingType:[1,d.TYPES.ENUM,c]};E.name="MiTransportAdminMessage$DisappearingSettingChanged";E.internalSpec={disappearingSettingDurationSeconds:[1,d.TYPES.INT32],oldDisappearingSettingDurationSeconds:[2,d.TYPES.INT32]};F.name="MiTransportAdminMessage$IconChanged";F.internalSpec={threadIcon:[1,d.TYPES.STRING]};G.name="MiTransportAdminMessage$LinkCta";G.internalSpec={ukOsaAdminText:[1,d.TYPES.MESSAGE,H],__oneofs__:{content:["ukOsaAdminText"]}};H.name="MiTransportAdminMessage$LinkCta$UkOsaAdminText";H.internalSpec={initiatorUserId:[2,d.TYPES.STRING]};I.name="MiTransportAdminMessage$QuickReactionChanged";I.internalSpec={emojiName:[1,d.TYPES.STRING]};J.name="MiTransportAdminMessage$GroupImageChanged";J.internalSpec={action:[1,d.TYPES.ENUM,e]};K.name="MiTransportAdminMessage$MessagePinned";K.internalSpec={action:[1,d.TYPES.ENUM,f]};L.name="MiTransportAdminMessage$GroupMembershipAddModeChanged";L.internalSpec={mode:[1,d.TYPES.ENUM,b]};M.name="MiTransportAdminMessage$GroupNameChanged";M.internalSpec={groupName:[1,d.TYPES.STRING]};N.name="MiTransportAdminMessage$GroupAdminChanged";N.internalSpec={targetUserId:[1,d.FLAGS.REPEATED|d.TYPES.STRING],action:[2,d.TYPES.ENUM,h]};O.name="MiTransportAdminMessage$GroupParticipantChanged";O.internalSpec={targetUserId:[1,d.FLAGS.REPEATED|d.TYPES.STRING],action:[2,d.TYPES.ENUM,a]};P.name="MiTransportAdminMessage$NicknameChanged";P.internalSpec={targetUserId:[1,d.TYPES.STRING],nickname:[2,d.TYPES.STRING]};Q.name="MiTransportAdminMessage$ChatThemeChanged";Q.internalSpec={themeName:[1,d.TYPES.STRING],themeEmoji:[2,d.TYPES.STRING],themeType:[3,d.TYPES.INT32]};g.MiTransportAdminMessage$LimitSharingChanged$SharingType=c;g.MiTransportAdminMessage$GroupImageChanged$Action=e;g.MiTransportAdminMessage$MessagePinned$Action=f;g.MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode=b;g.MiTransportAdminMessage$GroupAdminChanged$Action=h;g.MiTransportAdminMessage$GroupParticipantChanged$Action=a;g.MiTransportAdminMessageSpec=i;g.MiTransportAdminMessage$XmatUnpinMessageV2Spec=j;g.MiTransportAdminMessage$XmatPinMessageV2Spec=k;g.MiTransportAdminMessage$XmatUpdatePaymentsSpec=l;g.MiTransportAdminMessage$XmatThreadQuickReactionSpec=m;g.MiTransportAdminMessage$XmatThreadNicknameSpec=n;g.MiTransportAdminMessage$XmatThreadIconSpec=o;g.MiTransportAdminMessage$XmatThemeColorSpec=p;g.MiTransportAdminMessage$XmatMessengerSharedAlbumSpec=q;g.MiTransportAdminMessage$XmatMessengerSharedAlbumRenameSpec=r;g.MiTransportAdminMessage$XmatMessengerSharedAlbumDeletionSpec=s;g.MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemovalSpec=t;g.MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval$RemovedContentTupleSpec=u;g.MiTransportAdminMessage$XmatMessengerSharedAlbumAdditionSpec=v;g.MiTransportAdminMessage$XmatMessengerQRCodeScannedSpec=w;g.MiTransportAdminMessage$XmatMessagingLimitSharingSpec=x;g.MiTransportAdminMessage$XmatMagicWordsSpec=y;g.MiTransportAdminMessage$XmatLinkCTASpec=z;g.MiTransportAdminMessage$XmatInstantGameEncryptedDynamicCustomUpdateSpec=A;g.MiTransportAdminMessage$XmatFriendRequestConfirmedEncryptedSpec=B;g.MiTransportAdminMessage$XmatDisappearingSettingSpec=C;g.MiTransportAdminMessage$LimitSharingChangedSpec=D;g.MiTransportAdminMessage$DisappearingSettingChangedSpec=E;g.MiTransportAdminMessage$IconChangedSpec=F;g.MiTransportAdminMessage$LinkCtaSpec=G;g.MiTransportAdminMessage$LinkCta$UkOsaAdminTextSpec=H;g.MiTransportAdminMessage$QuickReactionChangedSpec=I;g.MiTransportAdminMessage$GroupImageChangedSpec=J;g.MiTransportAdminMessage$MessagePinnedSpec=K;g.MiTransportAdminMessage$GroupMembershipAddModeChangedSpec=L;g.MiTransportAdminMessage$GroupNameChangedSpec=M;g.MiTransportAdminMessage$GroupAdminChangedSpec=N;g.MiTransportAdminMessage$GroupParticipantChangedSpec=O;g.MiTransportAdminMessage$NicknameChangedSpec=P;g.MiTransportAdminMessage$ChatThemeChangedSpec=Q}),98);
__d("WAArmadilloTransportEvent.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({NONE:0,DETECTED:1,CLEARED:2});c=b("$InternalEnum")({NONE:0,ADDED:1,REMOVED:2,REPLACED:3});e=b("$InternalEnum")({DECRYPTION_FAILURE:1,UNAVAILABLE_MESSAGE:2});f={};b={};var h={},i={},j={};f.name="TransportEvent";f.internalSpec={placeholder:[1,(d=d("WAProtoConst")).TYPES.MESSAGE,j],event:[2,d.TYPES.MESSAGE,b],__oneofs__:{content:["placeholder","event"]}};b.name="TransportEvent$Event";b.internalSpec={deviceChange:[1,d.TYPES.MESSAGE,i],icdcAlert:[2,d.TYPES.MESSAGE,h],__oneofs__:{event:["deviceChange","icdcAlert"]}};h.name="TransportEvent$Event$IcdcAlert";h.internalSpec={type:[1,d.TYPES.ENUM,a]};i.name="TransportEvent$Event$DeviceChange";i.internalSpec={type:[1,d.TYPES.ENUM,c],deviceName:[2,d.TYPES.STRING],devicePlatform:[3,d.TYPES.STRING],deviceModel:[4,d.TYPES.STRING]};j.name="TransportEvent$Placeholder";j.internalSpec={type:[1,d.TYPES.ENUM,e]};g.TransportEvent$Event$IcdcAlert$Type=a;g.TransportEvent$Event$DeviceChange$Type=c;g.TransportEvent$Placeholder$Type=e;g.TransportEventSpec=f;g.TransportEvent$EventSpec=b;g.TransportEvent$Event$IcdcAlertSpec=h;g.TransportEvent$Event$DeviceChangeSpec=i;g.TransportEvent$PlaceholderSpec=j}),98);
__d("WAConsumerApplication.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={SMALL:1,MEDIUM:2,LARGE:3};b={SANS_SERIF:0,SERIF:1,NORICAN_REGULAR:2,BRYNDAN_WRITE:3,BEBASNEUE_REGULAR:4,OSWALD_HEAVY:5};c={NONE:0,VIDEO:1};e={};f={};var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={};e.name="ConsumerApplication";e.internalSpec={payload:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,f],metadata:[2,h.TYPES.MESSAGE,j]};f.name="ConsumerApplication$Payload";f.internalSpec={content:[1,h.TYPES.MESSAGE,m],applicationData:[2,h.TYPES.MESSAGE,l],signal:[3,h.TYPES.MESSAGE,k],subProtocol:[4,h.TYPES.MESSAGE,i],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}};i.name="ConsumerApplication$SubProtocolPayload";i.internalSpec={futureProof:[1,h.TYPES.ENUM,(d=d("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]};j.name="ConsumerApplication$Metadata";j.internalSpec={specialTextSize:[1,h.TYPES.ENUM,a]};k.name="ConsumerApplication$Signal";k.internalSpec={};l.name="ConsumerApplication$ApplicationData";l.internalSpec={revoke:[1,h.TYPES.MESSAGE,v],__oneofs__:{applicationContent:["revoke"]}};m.name="ConsumerApplication$Content";m.internalSpec={messageText:[1,h.TYPES.MESSAGE,d.MessageTextSpec],imageMessage:[2,h.TYPES.MESSAGE,I],contactMessage:[3,h.TYPES.MESSAGE,A],locationMessage:[4,h.TYPES.MESSAGE,D],extendedTextMessage:[5,h.TYPES.MESSAGE,C],statusTextMessage:[6,h.TYPES.MESSAGE,B],documentMessage:[7,h.TYPES.MESSAGE,F],audioMessage:[8,h.TYPES.MESSAGE,H],videoMessage:[9,h.TYPES.MESSAGE,G],contactsArrayMessage:[10,h.TYPES.MESSAGE,z],liveLocationMessage:[11,h.TYPES.MESSAGE,y],stickerMessage:[12,h.TYPES.MESSAGE,E],groupInviteMessage:[13,h.TYPES.MESSAGE,x],viewOnceMessage:[14,h.TYPES.MESSAGE,w],reactionMessage:[16,h.TYPES.MESSAGE,u],pollCreationMessage:[17,h.TYPES.MESSAGE,s],pollUpdateMessage:[18,h.TYPES.MESSAGE,r],editMessage:[19,h.TYPES.MESSAGE,n],__oneofs__:{content:["messageText","imageMessage","contactMessage","locationMessage","extendedTextMessage","statusTextMessage","documentMessage","audioMessage","videoMessage","contactsArrayMessage","liveLocationMessage","stickerMessage","groupInviteMessage","viewOnceMessage","reactionMessage","pollCreationMessage","pollUpdateMessage","editMessage"]}};n.name="ConsumerApplication$EditMessage";n.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec],message:[2,h.TYPES.MESSAGE,d.MessageTextSpec],timestampMs:[3,h.TYPES.INT64]};o.name="ConsumerApplication$PollAddOptionMessage";o.internalSpec={pollOption:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,t]};p.name="ConsumerApplication$PollVoteMessage";p.internalSpec={selectedOptions:[1,h.FLAGS.REPEATED|h.TYPES.BYTES],senderTimestampMs:[2,h.TYPES.INT64]};q.name="ConsumerApplication$PollEncValue";q.internalSpec={encPayload:[1,h.TYPES.BYTES],encIv:[2,h.TYPES.BYTES]};r.name="ConsumerApplication$PollUpdateMessage";r.internalSpec={pollCreationMessageKey:[1,h.TYPES.MESSAGE,d.MessageKeySpec],vote:[2,h.TYPES.MESSAGE,q],addOption:[3,h.TYPES.MESSAGE,q]};s.name="ConsumerApplication$PollCreationMessage";s.internalSpec={encKey:[1,h.TYPES.BYTES],name:[2,h.TYPES.STRING],options:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,t],selectableOptionsCount:[4,h.TYPES.UINT32]};t.name="ConsumerApplication$Option";t.internalSpec={optionName:[1,h.TYPES.STRING]};u.name="ConsumerApplication$ReactionMessage";u.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec],text:[2,h.TYPES.STRING],groupingKey:[3,h.TYPES.STRING],senderTimestampMs:[4,h.TYPES.INT64],reactionMetadataDataclassData:[5,h.TYPES.STRING],style:[6,h.TYPES.INT32]};v.name="ConsumerApplication$RevokeMessage";v.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec]};w.name="ConsumerApplication$ViewOnceMessage";w.internalSpec={imageMessage:[1,h.TYPES.MESSAGE,I],videoMessage:[2,h.TYPES.MESSAGE,G],__oneofs__:{viewOnceContent:["imageMessage","videoMessage"]}};x.name="ConsumerApplication$GroupInviteMessage";x.internalSpec={groupJid:[1,h.TYPES.STRING],inviteCode:[2,h.TYPES.STRING],inviteExpiration:[3,h.TYPES.INT64],groupName:[4,h.TYPES.STRING],jpegThumbnail:[5,h.TYPES.BYTES],caption:[6,h.TYPES.MESSAGE,d.MessageTextSpec]};y.name="ConsumerApplication$LiveLocationMessage";y.internalSpec={location:[1,h.TYPES.MESSAGE,L],accuracyInMeters:[2,h.TYPES.UINT32],speedInMps:[3,h.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[4,h.TYPES.UINT32],caption:[5,h.TYPES.MESSAGE,d.MessageTextSpec],sequenceNumber:[6,h.TYPES.INT64],timeOffset:[7,h.TYPES.UINT32]};z.name="ConsumerApplication$ContactsArrayMessage";z.internalSpec={displayName:[1,h.TYPES.STRING],contacts:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,A]};A.name="ConsumerApplication$ContactMessage";A.internalSpec={contact:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};B.name="ConsumerApplication$StatusTextMesage";B.internalSpec={text:[1,h.TYPES.MESSAGE,C],textArgb:[6,h.TYPES.FIXED32],backgroundArgb:[7,h.TYPES.FIXED32],font:[8,h.TYPES.ENUM,b]};C.name="ConsumerApplication$ExtendedTextMessage";C.internalSpec={text:[1,h.TYPES.MESSAGE,d.MessageTextSpec],matchedText:[2,h.TYPES.STRING],canonicalUrl:[3,h.TYPES.STRING],description:[4,h.TYPES.STRING],title:[5,h.TYPES.STRING],thumbnail:[6,h.TYPES.MESSAGE,d.SubProtocolSpec],previewType:[7,h.TYPES.ENUM,c]};D.name="ConsumerApplication$LocationMessage";D.internalSpec={location:[1,h.TYPES.MESSAGE,L],address:[2,h.TYPES.STRING]};E.name="ConsumerApplication$StickerMessage";E.internalSpec={sticker:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};F.name="ConsumerApplication$DocumentMessage";F.internalSpec={document:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],fileName:[2,h.TYPES.STRING]};G.name="ConsumerApplication$VideoMessage";G.internalSpec={video:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],caption:[2,h.TYPES.MESSAGE,d.MessageTextSpec]};H.name="ConsumerApplication$AudioMessage";H.internalSpec={audio:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],ptt:[2,h.TYPES.BOOL]};I.name="ConsumerApplication$ImageMessage";I.internalSpec={image:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],caption:[2,h.TYPES.MESSAGE,d.MessageTextSpec]};J.name="ConsumerApplication$InteractiveAnnotation";J.internalSpec={polygonVertices:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,K],location:[2,h.TYPES.MESSAGE,L],__oneofs__:{action:["location"]}};K.name="ConsumerApplication$Point";K.internalSpec={x:[1,h.TYPES.DOUBLE],y:[2,h.TYPES.DOUBLE]};L.name="ConsumerApplication$Location";L.internalSpec={degreesLatitude:[1,h.TYPES.DOUBLE],degreesLongitude:[2,h.TYPES.DOUBLE],name:[3,h.TYPES.STRING]};M.name="ConsumerApplication$MediaPayload";M.internalSpec={protocol:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};g.CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE=a;g.CONSUMER_APPLICATION_STATUS_TEXT_MESAGE_FONT_TYPE=b;g.CONSUMER_APPLICATION_EXTENDED_TEXT_MESSAGE_PREVIEW_TYPE=c;g.ConsumerApplicationSpec=e;g.ConsumerApplication$PayloadSpec=f;g.ConsumerApplication$SubProtocolPayloadSpec=i;g.ConsumerApplication$MetadataSpec=j;g.ConsumerApplication$SignalSpec=k;g.ConsumerApplication$ApplicationDataSpec=l;g.ConsumerApplication$ContentSpec=m;g.ConsumerApplication$EditMessageSpec=n;g.ConsumerApplication$PollAddOptionMessageSpec=o;g.ConsumerApplication$PollVoteMessageSpec=p;g.ConsumerApplication$PollEncValueSpec=q;g.ConsumerApplication$PollUpdateMessageSpec=r;g.ConsumerApplication$PollCreationMessageSpec=s;g.ConsumerApplication$OptionSpec=t;g.ConsumerApplication$ReactionMessageSpec=u;g.ConsumerApplication$RevokeMessageSpec=v;g.ConsumerApplication$ViewOnceMessageSpec=w;g.ConsumerApplication$GroupInviteMessageSpec=x;g.ConsumerApplication$LiveLocationMessageSpec=y;g.ConsumerApplication$ContactsArrayMessageSpec=z;g.ConsumerApplication$ContactMessageSpec=A;g.ConsumerApplication$StatusTextMesageSpec=B;g.ConsumerApplication$ExtendedTextMessageSpec=C;g.ConsumerApplication$LocationMessageSpec=D;g.ConsumerApplication$StickerMessageSpec=E;g.ConsumerApplication$DocumentMessageSpec=F;g.ConsumerApplication$VideoMessageSpec=G;g.ConsumerApplication$AudioMessageSpec=H;g.ConsumerApplication$ImageMessageSpec=I;g.ConsumerApplication$InteractiveAnnotationSpec=J;g.ConsumerApplication$PointSpec=K;g.ConsumerApplication$LocationSpec=L;g.ConsumerApplication$MediaPayloadSpec=M}),98);
__d("WAMediaTransport.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={NONE:0,LQ_4K:1,HQ_4K:2};b={NONE:0,GIPHY:1,TENOR:2};c={TALKING_A:0,IDLE_A:1,TALKING_B:2,IDLE_B:3,BACKGROUND:4};e={UNKNOWN:0,OPUS:1};f={};var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={};f.name="WAMediaTransport";f.internalSpec={integral:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,l],ancillary:[2,h.TYPES.MESSAGE,i]};i.name="WAMediaTransport$Ancillary";i.internalSpec={fileLength:[1,h.TYPES.UINT64],mimetype:[2,h.TYPES.STRING],thumbnail:[3,h.TYPES.MESSAGE,j],objectId:[4,h.TYPES.STRING]};j.name="WAMediaTransport$Ancillary$Thumbnail";j.internalSpec={jpegThumbnail:[1,h.TYPES.BYTES],downloadableThumbnail:[2,h.TYPES.MESSAGE,k],thumbnailWidth:[3,h.TYPES.UINT32],thumbnailHeight:[4,h.TYPES.UINT32]};k.name="WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnail";k.internalSpec={fileSha256:[1,h.TYPES.BYTES],fileEncSha256:[2,h.TYPES.BYTES],directPath:[3,h.TYPES.STRING],mediaKey:[4,h.TYPES.BYTES],mediaKeyTimestamp:[5,h.TYPES.INT64],objectId:[6,h.TYPES.STRING],thumbnailScansSidecar:[7,h.TYPES.BYTES],thumbnailScanLengths:[8,h.FLAGS.REPEATED|h.TYPES.UINT32]};l.name="WAMediaTransport$Integral";l.internalSpec={fileSha256:[1,h.TYPES.BYTES],mediaKey:[2,h.TYPES.BYTES],fileEncSha256:[3,h.TYPES.BYTES],directPath:[4,h.TYPES.STRING],mediaKeyTimestamp:[5,h.TYPES.INT64]};m.name="ImageTransport";m.internalSpec={integral:[1,h.TYPES.MESSAGE,o],ancillary:[2,h.TYPES.MESSAGE,n]};n.name="ImageTransport$Ancillary";n.internalSpec={height:[1,h.TYPES.UINT32],width:[2,h.TYPES.UINT32],scansSidecar:[3,h.TYPES.BYTES],scanLengths:[4,h.FLAGS.REPEATED|h.TYPES.UINT32],midQualityFileSha256:[5,h.TYPES.BYTES],hdType:[6,h.TYPES.ENUM,a],memoriesConceptScores:[7,h.FLAGS.REPEATED|h.FLAGS.PACKED|h.TYPES.FLOAT],memoriesConceptIds:[8,h.FLAGS.REPEATED|h.FLAGS.PACKED|h.TYPES.UINT32]};o.name="ImageTransport$Integral";o.internalSpec={transport:[1,h.TYPES.MESSAGE,f]};p.name="VideoTransport";p.internalSpec={integral:[1,h.TYPES.MESSAGE,r],ancillary:[2,h.TYPES.MESSAGE,q]};q.name="VideoTransport$Ancillary";q.internalSpec={seconds:[1,h.TYPES.UINT32],caption:[2,h.TYPES.MESSAGE,d("WACommon.pb").MessageTextSpec],gifPlayback:[3,h.TYPES.BOOL],height:[4,h.TYPES.UINT32],width:[5,h.TYPES.UINT32],sidecar:[6,h.TYPES.BYTES],gifAttribution:[7,h.TYPES.ENUM,b],accessibilityLabel:[8,h.TYPES.STRING],isHd:[9,h.TYPES.BOOL]};r.name="VideoTransport$Integral";r.internalSpec={transport:[1,h.TYPES.MESSAGE,f]};s.name="AudioTransport";s.internalSpec={integral:[1,h.TYPES.MESSAGE,w],ancillary:[2,h.TYPES.MESSAGE,t]};t.name="AudioTransport$Ancillary";t.internalSpec={seconds:[1,h.TYPES.UINT32],avatarAudio:[2,h.TYPES.MESSAGE,u]};u.name="AudioTransport$Ancillary$AvatarAudio";u.internalSpec={poseId:[1,h.TYPES.UINT32],avatarAnimations:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,v]};v.name="AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimations";v.internalSpec={fileSha256:[1,h.TYPES.BYTES],fileEncSha256:[2,h.TYPES.BYTES],directPath:[3,h.TYPES.STRING],mediaKey:[4,h.TYPES.BYTES],mediaKeyTimestamp:[5,h.TYPES.INT64],objectId:[6,h.TYPES.STRING],animationsType:[7,h.TYPES.ENUM,c]};w.name="AudioTransport$Integral";w.internalSpec={transport:[1,h.TYPES.MESSAGE,f],audioFormat:[2,h.TYPES.ENUM,e]};x.name="DocumentTransport";x.internalSpec={integral:[1,h.TYPES.MESSAGE,z],ancillary:[2,h.TYPES.MESSAGE,y]};y.name="DocumentTransport$Ancillary";y.internalSpec={pageCount:[1,h.TYPES.UINT32]};z.name="DocumentTransport$Integral";z.internalSpec={transport:[1,h.TYPES.MESSAGE,f]};A.name="StickerTransport";A.internalSpec={integral:[1,h.TYPES.MESSAGE,C],ancillary:[2,h.TYPES.MESSAGE,B]};B.name="StickerTransport$Ancillary";B.internalSpec={pageCount:[1,h.TYPES.UINT32],height:[2,h.TYPES.UINT32],width:[3,h.TYPES.UINT32],firstFrameLength:[4,h.TYPES.UINT32],firstFrameSidecar:[5,h.TYPES.BYTES],mustacheText:[6,h.TYPES.STRING],isThirdParty:[7,h.TYPES.BOOL],receiverFetchId:[8,h.TYPES.STRING],accessibilityLabel:[9,h.TYPES.STRING]};C.name="StickerTransport$Integral";C.internalSpec={transport:[1,h.TYPES.MESSAGE,f],isAnimated:[2,h.TYPES.BOOL],receiverFetchId:[3,h.TYPES.STRING]};D.name="ContactTransport";D.internalSpec={integral:[1,h.TYPES.MESSAGE,F],ancillary:[2,h.TYPES.MESSAGE,E]};E.name="ContactTransport$Ancillary";E.internalSpec={displayName:[1,h.TYPES.STRING]};F.name="ContactTransport$Integral";F.internalSpec={vcard:[1,h.TYPES.STRING],downloadableVcard:[2,h.TYPES.MESSAGE,f],__oneofs__:{contact:["vcard","downloadableVcard"]}};g.IMAGE_TRANSPORT_ANCILLARY_HD_TYPE=a;g.VIDEO_TRANSPORT_ANCILLARY_ATTRIBUTION=b;g.AUDIO_TRANSPORT_ANCILLARY_AVATAR_AUDIO_ANIMATIONS_TYPE=c;g.AUDIO_TRANSPORT_INTEGRAL_AUDIO_FORMAT=e;g.WAMediaTransportSpec=f;g.WAMediaTransport$AncillarySpec=i;g.WAMediaTransport$Ancillary$ThumbnailSpec=j;g.WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnailSpec=k;g.WAMediaTransport$IntegralSpec=l;g.ImageTransportSpec=m;g.ImageTransport$AncillarySpec=n;g.ImageTransport$IntegralSpec=o;g.VideoTransportSpec=p;g.VideoTransport$AncillarySpec=q;g.VideoTransport$IntegralSpec=r;g.AudioTransportSpec=s;g.AudioTransport$AncillarySpec=t;g.AudioTransport$Ancillary$AvatarAudioSpec=u;g.AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimationsSpec=v;g.AudioTransport$IntegralSpec=w;g.DocumentTransportSpec=x;g.DocumentTransport$AncillarySpec=y;g.DocumentTransport$IntegralSpec=z;g.StickerTransportSpec=A;g.StickerTransport$AncillarySpec=B;g.StickerTransport$IntegralSpec=C;g.ContactTransportSpec=D;g.ContactTransport$AncillarySpec=E;g.ContactTransport$IntegralSpec=F}),98);
__d("WAMsgApplication.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={DEFAULT:0,VANISH_MODE:1,DISAPPEARING_MESSAGES:2};b={UNKNOWN:0,SEEN_ONCE:1,SEEN_BASED_WITH_TIMER:2,SEND_BASED_WITH_TIMER:3};c={};e={};f={};var i={},j={},k={},l={},m={},n={},o={};c.name="MessageApplication";c.internalSpec={payload:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,j],metadata:[2,h.TYPES.MESSAGE,e]};e.name="MessageApplication$Metadata";e.internalSpec={forwardingScore:[5,h.TYPES.UINT32],isForwarded:[6,h.TYPES.BOOL],businessMetadata:[7,h.TYPES.MESSAGE,(d=d("WACommon.pb")).SubProtocolSpec],frankingKey:[8,h.TYPES.BYTES],frankingVersion:[9,h.TYPES.INT32],quotedMessage:[10,h.TYPES.MESSAGE,f],threadType:[11,h.TYPES.ENUM,a],readonlyMetadataDataclass:[12,h.TYPES.STRING],groupId:[13,h.TYPES.STRING],groupSize:[14,h.TYPES.UINT32],groupIndex:[15,h.TYPES.UINT32],botResponseId:[16,h.TYPES.STRING],collapsibleId:[17,h.TYPES.STRING],secondaryOtid:[18,h.TYPES.STRING],chatEphemeralSetting:[1,h.TYPES.MESSAGE,o],ephemeralSettingList:[2,h.TYPES.MESSAGE,i],ephemeralSharedSecret:[3,h.TYPES.BYTES],__oneofs__:{ephemeral:["chatEphemeralSetting","ephemeralSettingList","ephemeralSharedSecret"]}};f.name="MessageApplication$Metadata$QuotedMessage";f.internalSpec={stanzaId:[1,h.TYPES.STRING],remoteJid:[2,h.TYPES.STRING],participant:[3,h.TYPES.STRING],payload:[4,h.TYPES.MESSAGE,j]};i.name="MessageApplication$Metadata$EphemeralSettingMap";i.internalSpec={chatJid:[1,h.TYPES.STRING],ephemeralSetting:[2,h.TYPES.MESSAGE,o]};j.name="MessageApplication$Payload";j.internalSpec={coreContent:[1,h.TYPES.MESSAGE,n],signal:[2,h.TYPES.MESSAGE,m],applicationData:[3,h.TYPES.MESSAGE,l],subProtocol:[4,h.TYPES.MESSAGE,k],__oneofs__:{content:["coreContent","signal","applicationData","subProtocol"]}};k.name="MessageApplication$SubProtocolPayload";k.internalSpec={futureProof:[1,h.TYPES.ENUM,d.FUTURE_PROOF_BEHAVIOR],consumerMessage:[2,h.TYPES.MESSAGE,d.SubProtocolSpec],businessMessage:[3,h.TYPES.MESSAGE,d.SubProtocolSpec],paymentMessage:[4,h.TYPES.MESSAGE,d.SubProtocolSpec],multiDevice:[5,h.TYPES.MESSAGE,d.SubProtocolSpec],voip:[6,h.TYPES.MESSAGE,d.SubProtocolSpec],armadillo:[7,h.TYPES.MESSAGE,d.SubProtocolSpec],__oneofs__:{subProtocol:["consumerMessage","businessMessage","paymentMessage","multiDevice","voip","armadillo"]}};l.name="MessageApplication$ApplicationData";l.internalSpec={};m.name="MessageApplication$Signal";m.internalSpec={};n.name="MessageApplication$Content";n.internalSpec={};o.name="MessageApplication$EphemeralSetting";o.internalSpec={ephemeralExpiration:[2,h.TYPES.UINT32],ephemeralSettingTimestamp:[3,h.TYPES.INT64],ephemeralityType:[5,h.TYPES.ENUM,b],isEphemeralSettingReset:[4,h.TYPES.BOOL]};g.MESSAGE_APPLICATION_METADATA_THREAD_TYPE=a;g.MESSAGE_APPLICATION_EPHEMERAL_SETTING_EPHEMERALITY_TYPE=b;g.MessageApplicationSpec=c;g.MessageApplication$MetadataSpec=e;g.MessageApplication$Metadata$QuotedMessageSpec=f;g.MessageApplication$Metadata$EphemeralSettingMapSpec=i;g.MessageApplication$PayloadSpec=j;g.MessageApplication$SubProtocolPayloadSpec=k;g.MessageApplication$ApplicationDataSpec=l;g.MessageApplication$SignalSpec=m;g.MessageApplication$ContentSpec=n;g.MessageApplication$EphemeralSettingSpec=o}),98);
__d("WAParseMessageApplication",["decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,c,e=a.payload;if(e==null)return{version:"v3",type:"error",error:"The messageApplication has no payload"};if(d("decodeProtobuf").getUnknownFields(a.payload)!=null)return{version:"v3",type:"error",error:"There are unknown fields in the message application payload"};e=e.subProtocol;if(e==null)return{version:"v3",type:"error",error:"The messageApplication payload has no subProtocol"};if(d("decodeProtobuf").getUnknownFields(e)!=null)return{version:"v3",type:"error",error:"messageApplication subProtocol has unknown fields",futureProof:e.futureProof};e=[];b=(b=a.payload)==null||(b=b.subProtocol)==null?void 0:b.consumerMessage;c=(c=a.payload)==null||(c=c.subProtocol)==null?void 0:c.armadillo;a=(a=a.payload)==null||(a=a.subProtocol)==null?void 0:a.multiDevice;if(b!=null){if(b.payload==null)return{version:"v3",type:"error",error:"subprotocol of type consumerMessage has no payload"};e.push({payload:new Uint8Array(b.payload),type:"success",subprotocolType:"consumerMessage"})}if(c!=null){if(c.payload==null)return{version:"v3",type:"error",error:"subprotocol of type armadillo has no payload"};e.push({payload:new Uint8Array(c.payload),type:"success",subprotocolType:"armadillo"})}if(a!=null){if(a.payload==null)return{version:"v3",type:"error",error:"subprotocol of type multiDevice has no payload"};e.push({payload:new Uint8Array(a.payload),type:"success",subprotocolType:"multiDevice"})}return e.length!==1?{version:"v3",type:"error",error:"Wrong number of subprotocols: "+e.length}:e[0]}g.parseMessageApplication=a}),98);
__d("lastx",["invariant"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var b=null;if(Array.isArray(a))a.length&&(b={value:a[a.length-1]});else for(a of a)b=b||{},b.value=a;if(b)return b.value;h(0,1145)}g["default"]=a}),98);
__d("MultiKeyMap",["invariant","lastx"],(function(a,b,c,d,e,f,g,h){"use strict";var i=typeof WeakMap==="function";a=function(){function a(){this.$1=this.$2(),this.$3=null}var b=a.prototype;b.set=function(a,b){this.$4(a);var c=this.$1;for(var d=0;d<a.length-1;d++){var e=a[d],f=this.$5(c,e).get(e);f==null&&(f=this.$2(),this.$5(c,e).set(e,f));f.type==="map"||h(0,1732);c=f}e=a[a.length-1];this.$5(c,e).set(e,{type:"value",value:b})};b.get=function(a){this.$4(a);var b=this.$6(a);b=b&&b.get(c("lastx")(a));return b==null||b.type!=="value"?void 0:b.value};b["delete"]=function(a){this.$4(a);var b=this.$6(a);return b?b["delete"](c("lastx")(a)):!1};b.$5=function(a,b){return j(b)?a.cache:a.weakCache};b.$6=function(a){var b=this.$1;for(var d=0;d<a.length-1;d++){var e,f=a[d];if(((e=b)==null?void 0:e.type)==="map")b=this.$5(b,f).get(f);else return void 0}e=c("lastx")(a);f=b&&this.$5(b,e);return f};b.$2=function(){return{type:"map",cache:new Map(),weakCache:i?new WeakMap():new Map()}};b.$4=function(a){this.$3==null&&(this.$3=a.length);if(this.$3!==a.length)throw new Error("MultiKeyMap called with different number of keys");if(a.length<1)throw new Error("MultiKeyMap called with empty array of keys")};return a}();function j(a){var b=typeof a;return b==="number"||b==="string"||b==="boolean"||a==null}g["default"]=a}),98);
__d("memoizeWithArgsWeak",["MultiKeyMap"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0;var d=new(c("MultiKeyMap"))();return function(){for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];var f=d.get(c);if(f!==void 0)return f;var g=a.apply(void 0,c);d.set(c,g);return g}}g["default"]=a}),98);
__d("MAWProtobufDeserializers",["FBLogger","WAArmadilloApplication.pb","WAArmadilloBackupMessage.pb","WAArmadilloLocallyTransformedMessage.pb","WAArmadilloMiTransportAdminMessage.pb","WAArmadilloTransportEvent.pb","WAByteArray","WAConsumerApplication.pb","WAMediaTransport.pb","WAMsgApplication.pb","WAParseMessageApplication","decodeProtobuf","memoize","memoizeWithArgsWeak","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a instanceof ArrayBuffer)return a;else return d("WAByteArray").uint8ArrayToBuffer(a)}var i=function(a){this.kind="imageTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,(a=a.image)==null?void 0:a.payload)},j=function(a){var b;this.kind="audioTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").AudioTransportSpec,(b=a.audio)==null?void 0:b.payload);this.ptt=a.ptt},k=function(a){var b;this.kind="videoTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").VideoTransportSpec,(b=a.video)==null?void 0:b.payload);this.caption=a.caption},l=function(a){var b;this.kind="documentTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").DocumentTransportSpec,(b=a.document)==null?void 0:b.payload);this.fileName=a.fileName},m=function(a){this.kind="stickerTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").StickerTransportSpec,(a=a.sticker)==null?void 0:a.payload)},n=function(a){var b=this,e;this.kind="extendedContentMessage";this.favicon=(e=c("memoize"))(function(){var a;return((a=b.payload)==null||(a=a.favicon)==null?void 0:a.payload)==null?null:d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,(a=b.payload)==null||(a=a.favicon)==null?void 0:a.payload)});this.headerImage=e(function(){var a;return((a=b.payload)==null||(a=a.headerImage)==null?void 0:a.payload)==null?null:d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,(a=b.payload)==null||(a=a.headerImage)==null?void 0:a.payload)});this.previews=e(function(){var a;return(a=(a=b.payload)==null||(a=a.previews)==null?void 0:a.map(function(a){return d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,a.payload)}))!=null?a:[]});this.associatedMessage=e(function(){var a=b.payload.associatedMessage;return(a==null?void 0:a.payload)==null?null:new q(a.payload)});this.payload=a},o=function(){function a(a){this.kind="armadillo",this.bytes=h(a),this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloApplication.pb").ArmadilloSpec,a),this.payload=this.proto.payload,this.metadata=this.proto.metadata}var b=a.prototype;b.extendedContentMessage=function(){var a;a=(a=this.payload)==null||(a=a.content)==null?void 0:a.extendedContentMessage;return a==null?null:new n(a)};b.paymentsTransactionMessage=function(){var a;a=(a=this.payload)==null||(a=a.content)==null||(a=a.paymentsTransactionMessage)==null?void 0:a.extendedContentMessage;return a==null?null:new n(a)};return a}(),p=function(a){var b=this,e;this.kind="consumerApplication";this.imageMessage=(e=c("memoize"))(function(){var a;a=(a=b.payload)==null||(a=a.content)==null?void 0:a.imageMessage;if(a==null)return;return new i(a)});this.audioMessage=e(function(){var a;a=(a=b.payload)==null||(a=a.content)==null?void 0:a.audioMessage;if(a==null)return;return new j(a)});this.videoMessage=e(function(){var a;a=(a=b.payload)==null||(a=a.content)==null?void 0:a.videoMessage;if(a==null)return;return new k(a)});this.documentMessage=e(function(){var a;a=(a=b.payload)==null||(a=a.content)==null?void 0:a.documentMessage;if(a==null)return;return new l(a)});this.stickerMessage=e(function(){var a;a=(a=b.payload)==null||(a=a.content)==null?void 0:a.stickerMessage;if(a==null)return;return new m(a)});this.bytes=h(a);this.proto=d("decodeProtobuf").decodeProtobuf(d("WAConsumerApplication.pb").ConsumerApplicationSpec,a);this.payload=this.proto.payload;this.metadata=this.proto.metadata},q=function(){function a(a){var b=this;this.kind="messageApplication";this.subProtocol=c("memoize")(function(){var a=d("WAParseMessageApplication").parseMessageApplication(b.proto);if(a.payload!=null){var c=a.payload;switch(a.subprotocolType){case"consumerMessage":return new p(c);case"armadillo":return new o(c);case"businessMessage":case"paymentMessage":case"multiDevice":case"voip":break;default:a.subprotocolType}}});this.bytes=h(a);this.proto=d("decodeProtobuf").decodeProtobuf(d("WAMsgApplication.pb").MessageApplicationSpec,a)}var b=a.prototype;b.consumerMessage=function(){var a=this.subProtocol();return(a==null?void 0:a.kind)!=="consumerApplication"?null:a};b.armadillo=function(){var a=this.subProtocol();return(a==null?void 0:a.kind)!=="armadillo"?null:a};return a}(),r=function(a){this.kind="transportEvent",this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloTransportEvent.pb").TransportEventSpec,a)},s=function(a){this.kind="locallyTransformedMessage",this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloLocallyTransformedMessage.pb").LocallyTransformedMessageSpec,a)},t=function(a){this.kind="adminMessage",this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessageSpec,a)},u="SKIP_CACHE",v=function(){function a(a,b){var e=this;this.payload=c("memoize")(function(){if(e.proto.encryptedTransportEvent!=null)return new r(c("nullthrows")(e.proto.encryptedTransportEvent.payload));else if(e.proto.encryptedTransportLocallyTransformedMessage!=null)return new s(c("nullthrows")(e.proto.encryptedTransportLocallyTransformedMessage.payload));else if(e.proto.encryptedTransportMessage!=null)return new q(c("nullthrows")(e.proto.encryptedTransportMessage));else if(e.proto.miTransportAdminMessage!=null)return new t(c("nullthrows")(e.proto.miTransportAdminMessage.payload));throw c("FBLogger")("messenger_web").mustfixThrow("BackupMessage proto has no payload")});this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloBackupMessage.pb").BackupMessageSpec,a)}var b=a.prototype;b.encryptedTransportMessage=function(){var a=this.payload();if(a.kind!=="messageApplication")return;return a};b.encryptedTransportEvent=function(){var a=this.payload();if(a.kind!=="transportEvent")return;return a};b.locallyTransformedMessage=function(){var a=this.payload();if(a.kind!=="locallyTransformedMessage")return;return a};b.adminMessage=function(){var a=this.payload();if(a.kind!=="adminMessage")return;return a};return a}();v.create=c("memoizeWithArgsWeak")(function(a){return new v(a,u)});g.DeserializedImageMessage=i;g.DeserializedAudioMessage=j;g.DeserializedVideoMessage=k;g.DeserializedDocumentMessage=l;g.DeserializedStickerMessage=m;g.DeserializedExtendedContentMessage=n;g.DeserializedArmadilloApplication=o;g.DeserializedConsumerApplication=p;g.DeserializedMessageApplication=q;g.DeserializedTransportEvent=r;g.DeserializedLocallyTransformedMessage=s;g.DeserializedAdminMessage=t;g.DeserializedBackupMessage=v}),98);
__d("RavenMessagingState",[],(function(a,b,c,d,e,f){a=Object.freeze({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4});f["default"]=a}),66);
__d("MAWRavenUtils",["EphemeralMediaViewMode","MAWMsg","RavenMessagingState"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){switch(a){case d("MAWMsg").MAWRavenMsgEphemeralMediaState.PERMANENT:return c("RavenMessagingState").PERMANENT;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN:return c("RavenMessagingState").UNSEEN;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN:return c("RavenMessagingState").SEEN;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.REPLAYED:return c("RavenMessagingState").REPLAYED;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.EXPIRED:return c("RavenMessagingState").EXPIRED}},i=function(a){switch(a){case d("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return c("EphemeralMediaViewMode").PERMANENT;case d("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:return c("EphemeralMediaViewMode").REPLAYABLE;case d("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return c("EphemeralMediaViewMode").READ_ONCE}};b=function(a,b){return{ephemeralMediaState:b,ephemeralMediaViewMode:i(a)}};function a(a,b){switch(b){case d("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return a===d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN?c("RavenMessagingState").SEEN:h(a);case d("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:if(a===d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN)return c("RavenMessagingState").SEEN;else if(a===d("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN)return c("RavenMessagingState").REPLAYED;return h(a);case d("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return h(a)}}g.getEphemeralMediaState=h;g.getEphemeralMediaViewMode=i;g.deriveRavenSettings=b;g.getNextRavenMessageEphemeralState=a}),98);
__d("MAWTimeUtils",["FBLogger","I64","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return(h||(h=d("I64"))).of_float(a*1e3)}function j(a){a=Number(a);return a<=d("WATimeUtils").MAX_INT&&a!==-1e3&&a!==0}function a(a){if(j(a)){Number(a)!==-1&&c("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to millisTimeToTimestamp: %s",Number(a));return i(a)}return(h||(h=d("I64"))).of_float(a)}function b(a,b){var c=Date.now();c=c-b*24*60*60*1e3;b=d("WATimeUtils").castMilliSecondsToUnixTime(c);return a>=b}function e(a){if(a==null)return;if(j(a)){Number(a)!==-1&&c("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to ensureValidMillisTime: %s",Number(a));return d("WATimeUtils").castToMillisTime(a*1e3)}return a}f=(h||(h=d("I64"))).of_string("9999999999999");var k=Number.MAX_VALUE;g.toTimestamp=i;g.millisTimeToTimestamp=a;g.isTimestampNewerThanXDays=b;g.ensureValidMillisTime=e;g.MAX_TIMESTAMP_MS=f;g.MAX_TIMESTAMP=k;g.MIN_TIMESTAMP_MS=h.zero}),98);
__d("MAWUICacheServicesBase",["FBLogger","MAWCacheServiceDB","MAWCacheServiceQPL","MAWMpsGating","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=["id"],i;function j(a){return d("MAWMpsGating").isMpsSnippetsCacheServiceEnabled()?a+"_mps_reactive":a}a=function(){function a(a){this.$1=new Map(),this.QPLMetadata=new Map(),this.$2=a}var e=a.prototype;e.resetInMemoryCache=function(a,b){var d=this.$1.get(a);if(d==null)return;c("FBLogger")("MAWUICacheServices").info("Reset in memory cache. Namespace: %s",a);b.forEach(function(a){d["delete"](a)})};e.updateInMemoryCacheAndTriggerCallback=function(a,b,d,e,f){this.$3(a,b);a=this.$2[a];if(a==null)return;e!=null&&(c("MAWCacheServiceQPL").addPointQPL(e,"triggering_callback",d),(d==="cache-invalidation"||d==="realtime-update"||d==="from-scratch"&&this.QPLMetadata.get(e)==="all-from-scratch"||d==="in-memory"&&f===!0)&&(c("MAWCacheServiceQPL").endSuccessQPL(e),this.QPLMetadata["delete"](e)));a.onCacheChange(b,d)};e.checkInMemoryCacheAndTriggerCallback=function(a,b,d){var e=this,f=[],g=[];b.forEach(function(b){var c=e.$4(a,b);c==null?f.push(b):g.push([b,c])});b=f.length===0;b&&d!=null&&c("MAWCacheServiceQPL").addPointQPL(d,"all_in_memory");g.length>0&&this.updateInMemoryCacheAndTriggerCallback(a,g,"in-memory",d,b);return f};e.checkPersistedCacheAndTriggerCallback=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=(yield d("MAWCacheServiceDB").getOrSetupMAWCacheDB());g=(yield g.runInTransaction([a],"readonly",function(c){return(i||(i=b("Promise"))).all(e.map(function(b){return c.stores[a].getByIndex("key",[j(b)])}))},"read_from_persisted_"+a));var k=[],l=[];g.forEach(function(a,b){if(a==null)k.push(e[b]);else{a.id;a=babelHelpers.objectWithoutPropertiesLoose(a,h);l.push([e[b],a])}});k.length===0&&f!=null&&c("MAWCacheServiceQPL").addPointQPL(f,"all_in_persisted");l.length>0&&this.updateInMemoryCacheAndTriggerCallback(a,l,"persisted",f);return k});function e(b,c,d){return a.apply(this,arguments)}return e}();e.$3=function(a,b){var c,d=(c=this.$1.get(a))!=null?c:new Map();b.forEach(function(a){var b=a[0];a=a[1];d.set(b,a)});this.$1.set(a,d)};e.$4=function(a,b){a=this.$1.get(a);if(a==null)return null;else{return(a=a.get(b))!=null?a:null}};return a}();g.adjustCacheKey=j;g.MAWUICacheServicesBase=a}),98);
__d("MAWVaultMaterialsStorage",["MAWVaultMaterials","MWFBLogger","Promise","WebAsyncStorage"],(function(a,b,c,d,e,f,g){"use strict";var h,i="mw_exchange_vm";function j(){var a=d("MAWVaultMaterials").generateNewVaultMaterials(),e="newly-generated";return new(h||(h=b("Promise")))(function(b){c("WebAsyncStorage").getOrSetItem(i,a,function(c,f){if(c!=null){var g=d("MWFBLogger").MWLogger();if(c instanceof Error)throw g.catching(c).mustfixThrow("Failed to store Vaulting Materials. %s",c.toString());else g.mustfix("Failed to store Vaulting Materials.")}f!==null&&(a=f,e="storage");b(d("MAWVaultMaterials").initializeVaultMaterials(a,e))})})}function a(){return d("MAWVaultMaterials").hasVaultBeenSetup()?(h||(h=b("Promise"))).resolve(d("MAWVaultMaterials").getVaultMaterials()):j()}g.setupVaultMaterials=a}),98);
__d("MWChatEncryptedBackupsQPLEvents",["qpl"],(function(a,b,c,d,e,f,g){"use strict";b=(a=c("qpl"))._(521476140,"378");d=a._(521472542,"295");e=a._(521484256,"3212");f=a._(521473384,"31");c=a._(521482085,"409");var h=a._(521485406,"272"),i=a._(521482763,"296"),j=a._(521484295,"1460"),k=a._(521482969,"1519"),l=a._(521479124,"1939"),m=a._(521474385,"263"),n=a._(521476098,"504"),o=a._(521482858,"1290"),p=a._(521473194,"1331");a=a._(521471024,"2275");g.pinCodeChangeQplEvent=b;g.optOutQplEvent=d;g.resetBackupQplEvent=e;g.ebResetObserverQplEvent=f;g.backupSetupQplEvent=c;g.mobileOnboardingQplEvent=h;g.restoreQplEvent=i;g.restoreDeviceAuthQplEvent=j;g.messageRestoreQplEvent=k;g.restoreWithAutoRestoreConsentQplEvent=l;g.hsmFleetMigrationQplEvent=m;g.virtualDeviceRevocationQplEvent=n;g.onboardingAuthQplEvent=o;g.processBackupIdsQPLEvent=p;g.fetchBackupIdsQPLEvent=a}),98);
__d("MWXMAV2IsCollapsibleXMA",["MWXMAV2IsDataclassLiveLocationXMA"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b;if(a==null)return!1;return((b=a.layout_config)==null?void 0:b.collapsible_id)==null&&!d("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(a)?!1:!0}g.isCollapsibleXMA=a}),98);
__d("MpsToBridgeMessageId",["MAWJidUtils","MpsTypes","WAJids","WAStanzaUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWJidUtils").formatProtocolMsgIdFromExternalId(d("WAJids").unsafeCoerceToChatJid(a),d("WAStanzaUtils").toStanzaId(b))}function b(a){a=a.split(".");var b=a[0];a=a[1];return{messageId:d("MpsTypes").toMessageId(a),threadId:d("MpsTypes").toThreadId(b)}}g.mpsToBridgeMsgId=a;g.bridgeMsgIdToMps=b}),98);
__d("MpsMessageToBridgeWrapper",["MAWProtobufDeserializers","MAWUserJidWrapper","MpsToBridgeMessageId","WAJids","WATimeUtils","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=d("WAJids").createJidUtils({platform:"msgr"});a=function(){function a(a,b){this.message=a,this.topLevel=b}a.fromTopLevel=function(b){return new a(b,b)};a.fromSupplemental=function(b,e){var f=d("MAWProtobufDeserializers").DeserializedBackupMessage.create(b.payload);f={messageId:b.messageId,payload:b.payload,senderId:c("nullthrows")((f=f.proto.metadata)==null?void 0:f.senderId),threadId:e.threadId,timestampMs:b.timestampMs};return new a(f,e)};var b=a.prototype;b.getChatJid=function(){return d("WAJids").unsafeCoerceToChatJid(this.message.threadId)};b.getExternalId=function(){return this.message.messageId};b.getMsgId=function(){return d("MpsToBridgeMessageId").mpsToBridgeMsgId(this.message.threadId,this.message.messageId)};b.getSenderJid=function(){return h.toUserJid(this.message.senderId)};b.topLevelMetadata=function(){return a.fromTopLevel(this.topLevel)};b.isAuthorMe=function(){return d("WAJids").userIdFromJid(d("MAWUserJidWrapper").getMyUserJid())===this.message.senderId};b.getAuthor=function(){return this.isAuthorMe()?d("WAJids").AUTHOR_ME:this.getSenderJid()};b.getUnixTs=function(){return d("WATimeUtils").castMilliSecondsToUnixTime(this.message.timestampMs)};b.deserialize=function(){return d("MAWProtobufDeserializers").DeserializedBackupMessage.create(this.message.payload)};return a}();g.MpsMessageToBridgeWrapper=a}),98);
__d("WADbContact",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;f.NON_CONTACT=a;f.ONE_WAY_CONTACT=b;f.REVERSED_ONE_WAY_CONTACT=c;f.TWO_WAY_CONTACT=d}),66);
__d("WADbDeviceRegistration",["gkx"],(function(a,b,c,d,e,f,g){"use strict";a=25;b=6;d=b;e="https://reg-e2ee.facebook.com";f=c("gkx")("13108")?"https://reg-e2ee.messenger.com":e;c="https://v.whatsapp.net";var h="https://reg-e2ee.instagram.com",i="/v2/fb_icdc_fetch",j="/v2/fb_register_v2",k="Device has already been registered to WA servers",l="Device registration finished successfully",m="Device registration retries failed "+b+" times. No longer attempting registration.",n="Device registration response was null",o="Current user id is zero",p="CryptoAuthToken is empty",q="CryptoAuthToken is expired",r={failed:"failed",finished:"finished"};g.MAX_USERS_FOR_NOTIFY_DEVICE_CHANGE=a;g.MAX_DEVICE_REGISTRATION_RETRIES=b;g.MAX_ROTATE_CRYPTO_AUTH_TOKEN_RETRIES=d;g.REG_FB_DOMAIN=e;g.REG_MSGR_DOMAIN=f;g.REG_WA_DOMAIN=c;g.REG_IGD_DOMAIN=h;g.ICDC_ENDPOINT=i;g.REGISTRATION_ENDPOINT=j;g.DEVICE_ALREADY_REGISTERED=k;g.DEVICE_SUCCESSFULLY_REGISTERED=l;g.FAILED_REGISTRATION_RETRIES=m;g.NULL_RESPONSE_FROM_SERVER=n;g.DEVICE_REGISTER_ERROR_ZERO_AS_USER_ID=o;g.DEVICE_REGISTER_ERROR_EMPTY_CAT_TOKEN=p;g.DEVICE_REGISTER_ERROR_EXPIRED_CAT_TOKEN=q;g.RegistrationStatesEnum=r}),98);
__d("WAIsOgg",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a.length<4)return!1;return a[0]!==79||a[1]!==103||a[2]!==103||a[3]!==83?!1:!0}f.isOgg=a}),66);
__d("WAJobOrchestratorTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({SKIP:"SKIP_PRIORITIZATION",UI_ACTION:"UI_ACTION",LOW:"LOW",HIGH:"HIGH",OFFLINE:"OFFLINE",HISTORY_SYNC:"HISTORY_SYNC",BEST_EFFORT:"BEST_EFFORT"});c=1;d=a.LOW;e=10*1e3;f.JOB_PRIORITY=a;f.DEFAULT_CONCURRENCY=c;f.DEFAULT_JOB_PRIORITY=d;f.DEFAULT_JOB_TIMEOUT_MS=e}),66);
__d("WAMedia",[],(function(a,b,c,d,e,f){"use strict";a="Image";b="Video";c="Ptt";d="Gif";e="Sticker";var g="DocumentFile",h={IMAGE:a,VIDEO:b,PTT:c,GIF:d,STICKER:e,DOCUMENT_FILE:g};f.IMAGE=a;f.VIDEO=b;f.PTT=c;f.GIF=d;f.STICKER=e;f.DOCUMENT_FILE=g;f.MEDIA_TYPE=h}),66);
__d("WAMediaHdType",[],(function(a,b,c,d,e,f,g){"use strict";a=0;b=1;c=2;d={HD_TYPE_NONE:a,HD_TYPE_LQ_4K:b,HD_TYPE_HQ_4K:c};g.HD_TYPE_NONE=a;g.HD_TYPE_LQ_4K=b;g.HD_TYPE_HQ_4K=c;g.HD_TYPE=d}),98);
__d("WAMediaQplHelper",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==null||a<0||a>1e3*1024*1024)return"invalid_size";else if(a===0)return"size equal to 0KB";else if(a<=1*1024)return"size lower than 1 KB";else if(a<=50*1024)return"size between 1 KB and 50 KB";else if(a<=100*1024)return"size between 50 KB and 100 KB";else if(a<=500*1024)return"size between 100 KB and 500 KB";else if(a<=1*1024*1024)return"size between 500 KB and 1 MB";else if(a<=2*1024*1024)return"size between 1 MB and 2 MB";else if(a<=5*1024*1024)return"size between 2 MB and 5 MB";else if(a<=10*1024*1024)return"size between 5 MB and 10 MB";else if(a<=20*1024*1024)return"size between 10 MB and 20 MB";else if(a<=25*1024*1024)return"size between 20 MB and 25 MB";else if(a<=30*1024*1024)return"size between 25 MB and 30 MB";else if(a<=50*1024*1024)return"size between 30 MB and 50 MB";else if(a<=75*1024*1024)return"size between 50 MB and 75 MB";else if(a<=100*1024*1024)return"size between 75 MB and 100 MB";else return"size above 100 MB"}f.convertIntegerSizeToStringBucket=a}),66);
__d("WAPREList",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({APP_STATE_SYNC_DAILY:"app_state_sync_daily",DECRYPT_MESSAGE_FINAL:"decrypt_message_final",DOWNLOAD_AND_DECRYPT:"download_and_decrypt",EBDB_INIT:"ebdb_init",FRANKING_VALIDATION:"franking_validation",GET_DEVICES:"get_devices",ICDC_ERROR:"icdc_error",MEDIA_DOWNLOAD:"media_download",MEDIA_UPLOAD:"media_upload",MEDIA_VALIDATE:"media_validate",MESSAGE_DECRYPTION:"message_decryption",MESSAGE_ENCRYPTION:"message_encryption",OFFLINE_QUEUE:"offline_queue",OFFLINE_RETRY:"offline_retry",ONE_QUEUE:"one_queue",QUERY_GROUP:"query_group",QUERY_GROUPS:"query_groups",RECEIVE_MESSAGE:"receive_message",SEND_MESSAGE:"send_message",STANZA_QUEUE_MESSAGE_CONSUMER:"stanza_queue_message_consumer",SYNCD:"syncd",SYNCD_BOOTSTRAP_APP_STATE_DOWNLOAD:"syncd_bootstrap_app_state_download",SYNCD_BOOTSTRAP_DATA_APPLIED:"syncd_bootstrap_data_applied",SYNCD_CRITICAL_BOOTSTRAP_STAGE:"syncd_critical_bootstrap_stage",SYNCD_CRITICAL_EVENT:"syncd_critical_event",SYNCD_DECRYPT_MUTATIONS:"syncd_decrypt_mutations",SYNCD_FATAL_ERROR:"syncd_fatal_error",SYNCD_KEY_ROTATION:"syncd_key_rotation",WA_DISCONNECT:"wa_disconnect",WA_FAIL_STANZA_QUEUE_ITEM:"stanza_queue_item_failure",WA_JOB_MANAGER:"wa_job_manager",WA_JOBS_ORCHESTRATOR:"wa_jobs_orchestrator",WA_NO_SIGNED_PRE_KEY:"wa_no_signed_pre_key"});f.PRE_METRIC=a}),66);
__d("WAPREMetrics",["WALogger","WAPREList"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;c=6e4;e=18e4;f=10*60*1e3;var k=0;function a(){var c=[];function e(a){c.push(a)}function b(){d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Removing all listeners from PRE_METRICS"]))),c.length=0}function a(a){c.length===0&&d("WALogger").WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[PRE] There are no subscribers to PRE events "," ",""])),a.name,a.stage),c.forEach(function(b){b(a)})}return{subscribe:e,notify:a,clear:b}}a=a();var l=a.notify,m=a.clear;a=a.subscribe;var n;"FinalizationRegistry"in self&&"WeakRef"in self&&(n=new FinalizationRegistry(function(a){var b=a.event;a=a.eventFlow;if(a.isActive())try{d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["[PRE][","] EventFlow still active during garbage collection"])),b)}catch(a){}}));var o=new Set([d("WAPREList").PRE_METRIC.SEND_MESSAGE,d("WAPREList").PRE_METRIC.MEDIA_DOWNLOAD]);function b(a,b,c,d){c==null&&k++;var e=c!=null?c:k,f="open";c==null?l({name:a,stage:"START",instanceKey:e,annotations:b,timeoutInMs:d}):l({name:a,stage:"RESUME",instanceKey:e,annotations:b});var g;function h(){if(g!=null){var a=g.deref();if(a!=null){var b;(b=n)==null||b.unregister(a)}}}d={addPoint:function(c,b){l({name:a,stage:"POINT",reason:c,instanceKey:e,annotations:b})},addAnnotations:function(b){l({name:a,stage:"ANNOTATE",instanceKey:e,annotations:b})},endSuccess:function(b){l({name:a,stage:"SUCCESS",instanceKey:e,annotations:b}),f="closed",h()},endCancel:function(b){l({name:a,stage:"CANCEL",instanceKey:e,annotations:b}),h()},endFail:function(c,b){l({name:a,stage:"FAIL",reason:c,instanceKey:e,annotations:b}),f="closed",h()},getFlowDetails:function(){return{name:a,instanceKey:e}},isActive:function(){return f==="open"}};n&&!o.has(a)&&c==null&&(n.register(d,{event:a,eventFlow:{endCancel:d.endCancel,isActive:d.isActive}}),g=new WeakRef(d));return d}g.QPL_DEFAULT_TIMEOUT_IN_MS=c;g.QPL_RECEIVE_MESSAGE_TIMEOUT_IN_MS=e;g.QPL_MEDIA_DOWNLOAD_TIMEOUT_IN_MS=f;g.clear=m;g.subscribe=a;g.startMetric=b}),98);
__d("WAParseReadOnlyMetadataDataclassUtils",["err"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if((a==null?void 0:a.readonlyMetadataDataclass)!=null)try{a=JSON.parse(a==null?void 0:a.readonlyMetadataDataclass);return a}catch(a){throw c("err")("Failed to parse readonly metadata dataclass JSON")}return null}function a(a){var b;a=h(a);return(a==null||(b=a.power_up)==null?void 0:b.power_up_style)!=null}function b(a){var b;a=h(a);return(a==null||(b=a.note_metadata)==null?void 0:b.message_type)==="MENTION"}g.isPowerUp=a;g.isNoteMention=b}),98);
__d("WAPromiseQueue",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(a){a===void 0&&(a=-1),this.$1=(g||(g=b("Promise"))).resolve(),this.$3=0,this.$2=a}var c=a.prototype;c.wait=function(){return this.$1};c.enqueueHandlers=function(a,b,c){var d=this;this.$3++;b=this.$1.then(function(){return a}).then(b,c);c=b.then();this.$1=h(b,this.$2)["finally"](function(){d.$3--});return c};c.enqueue=function(a){var b=this;this.$3++;a=this.$1.then(a);var c=a.then();this.$1=h(a,this.$2)["finally"](function(){b.$3--});return c};c.size=function(){return this.$3};return a}();c=function(){function a(a){a===void 0&&(a=-1),this.$1=new Map(),this.$2=a}var c=a.prototype;c.waitIfPending=function(a){return this.$1.get(a)};c.wait=function(a){return this.$1.get(a)||(g||(g=b("Promise"))).resolve()};c.enqueueHandlers=function(a,b,c,d){c=this.wait(a).then(function(){return b}).then(c,d);return this.$3(a,c)};c.enqueue=function(a,b){b=this.wait(a).then(b);return this.$3(a,b)};c.$3=function(a,b){var c=this,d=b.then(),e,f=function(){c.$1.get(a)===e&&c.$1["delete"](a)};e=h(b,this.$2).then(f,f);this.$1.set(a,e);return d};return a}();function h(a,c){if(c>=0)return new(g||(g=b("Promise")))(function(b){var d=function(){return void b()};a.then(d,d);setTimeout(d,c)});else return a.then(i,i)}function i(){}f.PromiseQueue=a;f.PromiseQueueMap=c}),66);
__d("WAStartMediaDownloadQplFlow",["WAGetPlatformFromStanzaId","WAGetStorageQplAnnotations","WAJids","WAMediaUtils","WAPREList","WAPREMetrics"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.downloadEntry,c=a.msgType,e=a.triggerUIView,f=a.protocolMsgId,g=a.isPreview;a=a.xmaMediaType;var h=d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.MEDIA_DOWNLOAD,{bool:{isTransformStreamSupported:d("WAMediaUtils").isTransformStreamSupported()},string:{chat_type:f==null?null:d("WAJids").switchOnMsgrChatJidType(f.chat,{group:function(){return"group"},user:function(){return"user"}}),downloadEntry:g===!0?b+"-preview":b,e2eePlatform:f==null?null:d("WAGetPlatformFromStanzaId").getPlatformFromStanzaId(f.externalId),msgType:c,trigger_ui_view:e,xmaMediaType:a!=null?a:void 0}},void 0,d("WAPREMetrics").QPL_MEDIA_DOWNLOAD_TIMEOUT_IN_MS);void d("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(a){h.addAnnotations(a)});return babelHelpers["extends"]({},h,{downloadEntry:b,triggerUIView:e})}g.startMediaDownloadQplFlow=a}),98);
__d("getMediaTypeFromConsumerMessage",["WAMediaTransport.pb","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b;a=a==null||(b=a.payload)==null?void 0:b.content;if((a==null?void 0:a.audioMessage)!=null)return"ptt";if((a==null?void 0:a.videoMessage)!=null){var c,e,f,g=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").VideoTransportSpec,a==null||(c=a.videoMessage)==null||(c=c.video)==null?void 0:c.payload);return(g==null||(e=g.ancillary)==null?void 0:e.gifPlayback)===!0||(g==null||(f=g.ancillary)==null?void 0:f.gifAttribution)!=null?"gif":"video"}if((a==null?void 0:a.documentMessage)!=null)return"document";if((a==null?void 0:a.stickerMessage)!=null)return"sticker";if((a==null?void 0:a.imageMessage)!=null)return"image";if((a==null?void 0:a.extendedContentMessage)!=null)return"xma-image";return}g.getMediaTypeFromConsumerMessage=a}),98);
__d("isInstamadilloEB",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("670")===!0}g["default"]=a}),98);
__d("maybeConvertMessageTextMentionsV2ToV1",["WACommon.pb"],(function(a,b,c,d,e,f,g){function a(a){if(a==null||a.text==null||a.mentions==null||a.mentions.length===0)return a;var b=a.text,c=[],e=[],f=0;for(var g of a.mentions){var h=g.offset,i=g.length,j=g.mentionedJid,k=g.mentionType;if(k!==d("WACommon.pb").MENTION_MENTION_TYPE.PROFILE||h==null||i==null||j==null)continue;e.push(j+"@msgr");c.push(b.substring(f,h));c.push("@"+j+"@msgr");f=h+i}if(e.length===0)return a;c.push(b.substring(f));return babelHelpers["extends"]({},a,{text:c.join(""),mentionedJid:e,mentions:[]})}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("BaseToastContentWrapper.react",["BaseTheme.react","BaseView.react","CometThemeInfraBaseThemeContext.react","CometThemeInfraBaseThemeGated.react","XPlatReactFocusRegion.react","basePushToast","focusScopeQueries","react","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k={dark:"__fb-dark-mode ",light:"__fb-light-mode ",type:"CLASSNAMES"};function a(a){var b=a.ariaLabelledBy,e=a.children,f=a.ref,g=a.role,h=a.testid;h=a.themeConfig;var l=a.useInvertedDisplayMode;a=a.xstyle;var m=c("useCurrentDisplayMode")();m=m==="dark"?"light":"dark";var n=j(c("CometThemeInfraBaseThemeContext.react"));l=l?c("CometThemeInfraBaseThemeGated.react")?i.jsx(c("CometThemeInfraBaseThemeGated.react"),{"aria-labelledby":b,displayMode:m,ref:f,role:g,testid:void 0,themes:n,xstyle:a,children:e}):i.jsx(c("BaseTheme.react"),{"aria-labelledby":b,config:h!=null?h:k,displayMode:m,ref:f,role:g,testid:void 0,xstyle:a,children:e}):i.jsx(c("BaseView.react"),{"aria-labelledby":b,ref:f,role:g,testid:void 0,xstyle:a,children:e});return d("basePushToast").passesNewToastAPIGK()?i.jsx(c("XPlatReactFocusRegion.react"),{containFocusQuery:d("focusScopeQueries").tabbableScopeQuery,children:l}):l}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("BaseToast.react",["BaseInlinePressable.react","BaseToastContentWrapper.react","BaseView.react","XPlatReactFocusRegion.react","basePushToast","focusScopeQueries","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useId,k=b.useMemo,l={item:{display:"x78zum5",flexDirection:"xdt5ytf",paddingBottom:"x19yoh24",paddingInlineStart:"xa6w9w1",paddingInlineEnd:"x7jv1k3",paddingLeft:null,paddingRight:null,paddingTop:"x6enp1t",$$css:!0},itemText:{flexGrow:"x1iyjqo2",$$css:!0},link:{wordBreak:"xdnwjd9",$$css:!0},root:{alignItems:"x6s0dn4",backgroundColor:"x1wkzo03",borderTopColor:"xlnzwam",borderInlineEndColor:"xuc4ihs",borderBottomColor:"xm9qwu6",borderInlineStartColor:"x38i1re",borderStartStartRadius:"x1ghonvh",borderStartEndRadius:"x1c2sbsd",borderEndEndRadius:"x8tb1rc",borderEndStartRadius:"x609f4j",borderTopStyle:"xhf2mca",borderInlineEndStyle:"xaau5u0",borderBottomStyle:"x13y0ya8",borderInlineStartStyle:"xv6865q",borderTopWidth:"xmqxc35",borderInlineEndWidth:"x1a32di2",borderBottomWidth:"x21fg80",borderInlineStartWidth:"xyi7q43",boxShadow:"xi1c1fh",display:"x78zum5",flexShrink:"x2lah0s",maxWidth:"x1cs6qxi",minWidth:"x1hqenl9",paddingTop:"x192rfv7",paddingBottom:"x13jxccy",paddingInlineStart:"x1rcnc7e",paddingInlineEnd:"x1e7pf15",paddingLeft:null,paddingRight:null,$$css:!0},rootDense:{minWidth:"xktpd3l",$$css:!0},rootFullWidth:{width:"xh8yej3",$$css:!0}};function a(a){var b,e,f,g,h,m=a.action,n=a.addOnStart,o=a.closeButton,p=a.density,q=a.linkWrapper,r=a.message,s=a.offsetStyles,t=a.onDismiss,u=a.size;u=u===void 0?"full-width":u;var v=a.testid;v=a.themeConfigOverride;var w=a.toastRef,x=a.useInvertedDisplayMode;x=x===void 0?!0:x;a=a.variant;var y=j(),z=k(function(){return m!=null?{}:{"aria-atomic":!0,role:"alert"}},[m]),A=m!=null?i.jsx(c("BaseView.react"),{xstyle:[l.item,a==null||(b=a.xstyleConfig)==null?void 0:b.item],children:m.element!=null?m.element:m.labelRenderer&&i.jsx(c("BaseInlinePressable.react"),{onPress:function(a){t(),m.onPress(a)},testid:void 0,xstyle:l.link,children:m.labelRenderer(m.label)})}):null;n=i.jsxs(i.Fragment,{children:[n!=null&&i.jsx(c("BaseView.react"),{xstyle:[l.item,a==null||(e=a.xstyleConfig)==null?void 0:e.item],children:n}),i.jsx(c("BaseView.react"),babelHelpers["extends"]({xstyle:[l.item,l.itemText,a==null||(f=a.xstyleConfig)==null?void 0:f.item]},z,{children:r({toastMessageId:y})})),A!=null&&(d("basePushToast").passesNewToastAPIGK()?A:i.jsx(c("XPlatReactFocusRegion.react"),{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,children:A})),Boolean(o)&&i.jsx(c("BaseView.react"),{xstyle:[l.item,a==null||(g=a.xstyleConfig)==null?void 0:g.item],children:o})]});n=q!=null?q(n):n;return i.jsx(c("BaseToastContentWrapper.react"),{ariaLabelledBy:m!=null&&d("basePushToast").passesNewToastAPIGK?y:void 0,ref:w,role:d("basePushToast").passesNewToastAPIGK()&&(m!=null||Boolean(o))?"dialog":void 0,testid:void 0,themeConfig:v,useInvertedDisplayMode:x,xstyle:[l.root,u==="full-width"&&l.rootFullWidth,p==="dense"&&l.rootDense,s,a==null||(h=a.xstyleConfig)==null?void 0:h.container],children:n})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("BladeRunnerConfig",["RTISubscriptionManagerConfig","WebDriverConfig","cr:3024","gkx","isEmpty"],(function(a,b,c,d,e,f,g){var h,i="javascript-sandbox",j="OverrideServer",k="www_sandbox",l="www_tier";a=function(){function a(){}var d=a.prototype;d.patchRequestHeaders=function(a){var d={},e=c("RTISubscriptionManagerConfig").bladerunner_www_sandbox,f=c("RTISubscriptionManagerConfig").is_intern;if(!(h||(h=c("isEmpty")))(c("WebDriverConfig").auxiliaryServiceInfo)){var g;g=(g=c("WebDriverConfig").auxiliaryServiceInfo.BladeRunner)!=null?g:c("WebDriverConfig").auxiliaryServiceInfo["BladeRunner-sandcastle"];g!=null?(typeof g.ip_address==="string"?d[j]=g.ip_address+":18295":typeof g.hostname==="string"&&(d[j]=g.hostname+":18295"),typeof c("WebDriverConfig").originHost==="string"&&(d[k]="www."+c("WebDriverConfig").originHost)):e!=null&&(d[i]=e)}else e!=null&&(d[i]=e);f===!0&&(d[l]="intern");if(c("WebDriverConfig").isTestRunning&&c("gkx")("20919")){g=b("cr:3024")==null?void 0:b("cr:3024").get();g!=null&&(d.is_test="true",d.original_request_id=g)}c("gkx")("20929")&&(d["Accept-Ack"]="RSAck");for(e in a)d[e]=a[e];d.http_referer=window.location.href;return d};return a}();d=new a();e=d;g["default"]=e}),98);
__d("BladeRunnerLogger",["FBLogger","ODS"],(function(a,b,c,d,e,f,g){var h,i="bladerunner_js_client",j={info:"info",warning:"warning",exception:"exception"};a=function(){function a(){this.setFBLoggerLevel(1)}var b=a.prototype;b.info=function(a){this.$2>=2&&c("FBLogger")(i).info("BladeRunner info: %s",a),this.$3(j.info,a)};b.warn=function(a){this.$2>=1&&c("FBLogger")(i).warn("BladeRunner warn: %s",a),this.$3(j.warning,a)};b.exception=function(a,b){b===void 0&&(b="");var d=b+" "+a.toString();this.$2>=0&&c("FBLogger")(i).warn("BladeRunner exception: %s, %s",b,a.toString());this.$3(j.exception,d)};b.trimForLogging=function(a){var b=1024;return typeof a==="string"&&a.length>b?"[trimmed]:"+a.substring(0,b)+"...":a};b.bumpCounter=function(a,b){b===void 0&&(b=1),(h||(h=d("ODS"))).bumpEntityKey(2966,"BladeRunnerClient",a,b)};b.setClientSessionId=function(a){this.$1=a};b.setFBLoggerLevel=function(a){this.$2=a};b.$3=function(a,b){};return a}();b=new a();e=b;g["default"]=e}),98);
__d("BladeRunnerTypes",[],(function(a,b,c,d,e,f,g){a={REQUEST:1,DATA:2,DATA_ACK:3,STATUS_UPDATE:4,REWRITE_REQUEST:5,LOG:6};b={BLADE_RUNNER:1,GATEWAY:2};g.StreamFrameType=a;g.StreamRequestType=b}),98);
__d("BladeRunnerTypesInternal",["Base64","BladeRunnerLogger","BladeRunnerTypes"],(function(a,b,c,d,e,f,g){var h=function(){function a(){}var b=a.prototype;b.getHeaders=function(){if(this.headers!=null)return this.headers;throw new Error("Expected headers")};b.getInstrumentationData=function(){if(this.instrumentationData!=null&&this.instrumentationData.length>0)try{return JSON.parse(this.instrumentationData)}catch(a){return null}else return null};b.updateRetryRequestPayload=function(a){a!=null?this.payload=c("Base64").encode(a):this.payload=null};a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.requestType=o(b.requestType);c.payload=r(b.payload);c.headers=u(b.headers);c.extraHeader=r(b.extraHeader);c.requestTarget=r(b.requestTarget);c.instrumentationData=r(b.instrumentationData);return c};return a}(),i=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.dataId=p(b.dataId);c.data=r(b.data);c.shouldAck=w(b.shouldAck);return c};var b=a.prototype;b.rawData=function(){if(this.data==null)throw new Error("Expected data");return this.data};b.rawDataSize=function(){return this.data==null?0:this.data.length};b.decodeData=function(){if(this.data==null)throw new Error("Expected data");return c("Base64").decode(this.data)};b.setData=function(a){this.data=c("Base64").encode(a)};b.getInstrumentationData=function(){if(this.instrumentationData!=null)return JSON.parse(this.instrumentationData);else return null};return a}(),j=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.dataId=o(b.dataId);c.success=v(b.success);c.message=r(b.message);c.code=p(b.code);return c};return a}();j.ACK_CODE_LANDED_AND_ACCEPTED=20;j.ACK_CODE_LANDED_BUT_NOT_ACCEPTED=21;j.ACK_CODE_FAILED_TO_LAND=50;var k=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=p(b.streamId);c.message=r(b.message);return c};return a}(),l=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.status=o(b.status);c.message=r(b.message);c.code=p(b.code);c.shouldRetry=w(b.shouldRetry);c.retryDelayMs=p(b.retryDelayMs);return c};return a}(),m=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.newBody=r(b.newBody);c.newExtraHeader=r(b.newExtraHeader);c.patchExtraHeader=r(b.patchExtraHeader);c.killBody=w(b.killBody);c.temporary=w(b.temporary);return c};return a}(),n=function(){function a(){}var b=a.prototype;b.getRequest=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request;throw new Error("Expected request")};b.getData=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data;throw new Error("Expected data")};b.getDataAck=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck;throw new Error("Expected dataAck")};b.getStatusUpdate=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate;throw new Error("Expected status update")};b.getLog=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log;throw new Error("Expected log")};b.getRewriteRequest=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest;throw new Error("Expected rewrite request")};b.getStreamId=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck.streamId;throw new Error("Frame with unexpected type")};b.isInstrumented=function(){if(this.type===d("BladeRunnerTypes").StreamFrameType.REQUEST)return this.getRequest().instrumentationData!=null;else if(this.type===d("BladeRunnerTypes").StreamFrameType.DATA)return this.getData().instrumentationData!=null;else return!1};a.readObject=function(b){var e=new a();e.type=o(b.type);switch(e.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:e.request=h.readObject(s(b.request));break;case d("BladeRunnerTypes").StreamFrameType.DATA:e.data=i.readObject(s(b.data));break;case d("BladeRunnerTypes").StreamFrameType.DATA_ACK:e.dataAck=j.readObject(s(b.dataAck));break;case d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:e.statusUpdate=l.readObject(s(b.statusUpdate));break;case d("BladeRunnerTypes").StreamFrameType.LOG:e.log=k.readObject(s(b.log));break;case d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:e.rewriteRequest=m.readObject(s(b.rewriteRequest));break;default:c("BladeRunnerLogger").warn("Frame with unexpected type: "+e.type);return null}return e};a.newRequestFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.REQUEST;c.request=b;return c};a.newDataFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.DATA;c.data=b;return c};a.newDataAckFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.DATA_ACK;c.dataAck=b;return c};a.newStatusUpdateFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE;c.statusUpdate=b;return c};a.newLogFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.LOG;c.log=b;return c};a.newRewriteRequestFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST;c.rewriteRequest=b;return c};return a}();a=function(){function a(a,b,c){this.batchId=a,this.frames=b,this.instrumentationData=c}var b=a.prototype;b.getFrames=function(){if(this.frames!=null)return this.frames;throw new Error("Expected frames")};b.getInstrumentationData=function(){if(this.instrumentationData!=null)try{return JSON.parse(this.instrumentationData)}catch(a){return null}else return null};b.getInstrumentationDataDfTraceId=function(){if(this.instrumentationData!=null)try{var a=JSON.parse(this.instrumentationData);return(a=a.dataFlowTracingData)==null?void 0:a.traceId}catch(a){return null}else return null};b.write=function(){return JSON.stringify(this)};b.isInstrumented=function(){return this.getFrames().some(function(a){return a.isInstrumented()})};a.read=function(b){b=JSON.parse(b);var c=b.batchId||0,d=[];for(var e of b.frames){var f=n.readObject(e);f!=null&&d.push(f)}f=b.instrumentationData||null;return new a(c,d,f)};return a}();function o(a){if(typeof a==="number")return a;throw new Error("Expected number")}function p(a){return a==null?null:o(a)}function q(a){if(typeof a==="string")return a;throw new Error("Expected string")}function r(a){return a==null?null:q(a)}function s(a){if(typeof a==="object"&&a!=null)return a;throw new Error("Expected object")}function t(a){if(typeof a==="object"&&a!=null){var b=a,c={};Object.keys(b).forEach(function(a){var d=b[a];typeof d==="string"&&d!=null&&(c[a]=d)});return c}throw new Error("Expected string map")}function u(a){return a==null?null:t(a)}function v(a){if(typeof a==="boolean"&&a!=null)return a;throw new Error("Expected boolean")}function w(a){return a==null?null:v(a)}g.GatewayStreamRequest=h;g.GatewayStreamData=i;g.GatewayStreamDataAck=j;g.GatewayStreamLog=k;g.GatewayStreamStatusUpdate=l;g.GatewayStreamRewriteRequest=m;g.GatewayStreamFrame=n;g.GatewayStreamBatch=a}),98);
__d("RequestStreamE2EClientLoggerEvent",[],(function(a,b,c,d,e,f){a=Object.freeze({RECEIVED:"received",SENT:"sent",FAILURE:"failure",PUBACK:"puback"});f["default"]=a}),66);
__d("RequestStreamE2EClientLoggerMessageType",[],(function(a,b,c,d,e,f){a=Object.freeze({REQUEST_STREAM:"request_stream",AMENDMENT:"amendment",AMENDMENT_ACK:"amendment_ack",CANCEL:"cancel",RESPONSE:"response",RESPONSE_ACK:"response_ack",TIMED_REQUEST:"timed_request",INTERRUPT:"interrupt"});f["default"]=a}),66);
__d("BladeRunnerEventHandler",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=1e3;a=function(){function a(a,b,c){this.$2=a,this.$1=b,this.$3=c}var b=a.prototype;b.onProxyResponse=function(a){this.$4(a);var b=[];for(var e of a.getFrames())this.$2.witnessFrame(e)&&b.push(e);e=this.$2.getRequest();(e=e.e2eLogger)==null||e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").SENT,{},(e=a.getInstrumentationData())==null?void 0:e.auxId,null,a.getInstrumentationDataDfTraceId());b.length>0&&this.$5(new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(a.batchId,b,a.instrumentationData))};b.onDisconnect=function(){this.$2.resetErrors();var a=new(d("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();a.streamId=this.$2.getRequest().streamId;a.status=d("BladeRunnerStreamStatus").StreamStatus.CLOSED;a.shouldRetry=!0;a.retryDelayMs=0;a=new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(null,[d("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(a)]);this.onProxyResponse(a)};b.$4=function(a){var b=this;a=a.getFrames().filter(function(a){return a.type==d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE});for(a of a){var e=a.getStatusUpdate();if(e.status==d("BladeRunnerStreamStatus").StreamStatus.CLOSED||e.status==d("BladeRunnerStreamStatus").StreamStatus.REJECTED){this.$2.onError();var f=e.shouldRetry!=null&&e.shouldRetry,g=e.message!=null?e.message:"null";if(f&&this.$2.getErrorCount()<=this.$2.getRetriesAllowed()){e.status=d("BladeRunnerStreamStatus").StreamStatus.STOPPED;var i=h;e.retryDelayMs!=null&&(i=e.retryDelayMs);c("BladeRunnerLogger").info("Can retry: stream "+e.streamId+" closed with status "+e.status+", message "+g+". Error count: "+this.$2.getErrorCount()+", retryDelay "+i+"ms. Already retrying: "+this.$2.getRetryRequestScheduled().toString());this.$2.getRetryRequestScheduled()?c("BladeRunnerLogger").bumpCounter("stream_closed_already_retrying"):(c("BladeRunnerLogger").bumpCounter("stream_closed_will_retry"),this.$2.setRetryRequestScheduled(!0),i>0?c("setTimeoutAcrossTransitions")(function(){return b.$6()},i):this.$6())}else c("BladeRunnerLogger").info("Will not retry: stream "+e.streamId+" closed with status "+e.status+", message "+g+". Error count: "+this.$2.getErrorCount()+", shouldRetry "+f.toString()+". Already retrying: "+this.$2.getRetryRequestScheduled().toString()),f?c("BladeRunnerLogger").bumpCounter("stream_closed_retry_exceeded"):c("BladeRunnerLogger").bumpCounter("stream_closed_no_retry"),this.$3.removeStream(e.streamId)}}};b.$6=function(){this.$2.setRetryRequestScheduled(!1);if(this.$2.isAlive()){var a=this.$1.getUpdatedRequestBody();a!=null&&this.$2.updateRetryRequestPayload(a);this.$3.sendRetryStreamRequest(this.$2)}};b.$5=function(a){c("BladeRunnerLogger").bumpCounter("send_to_handler");var b=[];this.$1.onBatch(a);for(a of a.getFrames())try{switch(a.type){case d("BladeRunnerTypes").StreamFrameType.DATA:this.$1.onData(a.getData());b.push(a.getData());break;case d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:this.$1.onStatusUpdate(a.getStatusUpdate().status);break;case d("BladeRunnerTypes").StreamFrameType.LOG:var e=a.getLog().message;e!=null&&this.$1.onLog(e);break;case d("BladeRunnerTypes").StreamFrameType.DATA_ACK:break;default:throw new Error("Frame with unexpected type")}}catch(a){c("BladeRunnerLogger").bumpCounter("send_to_handler_error"),c("BladeRunnerLogger").exception(a,"Failed sending frame to stream handler")}this.$7(b)};b.$7=function(a){var b=[];for(a of a)if(a.shouldAck===!0&&a.dataId!=null){var c=new(d("BladeRunnerTypesInternal").GatewayStreamDataAck)();c.streamId=a.streamId;c.dataId=a.dataId;c.success=!0;b.push(c)}this.$3.sendDataAcks(b)};return a}();g["default"]=a}),98);
__d("RtiRequestStreamE2eClientBatchFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("819");b=d("FalcoLoggerInternal").create("rti_request_stream_e2e_client_batch",a);e=b;g["default"]=e}),98);
__d("RtiRequestStreamE2eClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1857112");b=d("FalcoLoggerInternal").create("rti_request_stream_e2e_client",a);e=b;g["default"]=e}),98);
__d("RequestStreamE2ELogger",["ConstUriUtils","FBLogger","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RtiRequestStreamE2eClientBatchFalcoEvent","RtiRequestStreamE2eClientFalcoEvent","WebStorage"],(function(a,b,c,d,e,f,g){"use strict";var h;e="rs_debug_logging";var i=["FBGQLS:COMMENT_CREATE_SUBSCRIBE","FBGQLS:COMMENT_LIKE_SUBSCRIBE","FBGQLS:FEEDBACK_COMMENT_PERMISSION_TOGGLE_SUBSCRIBE","FBGQLS:FEEDBACK_TYPING_SUBSCRIBE","FBLQ:comet_notifications_live_query_experimental"],j=0;function k(){var a=Date.now();j>=a?j+=1:j=a;return j.toString()}var l=function(){function a(a,b,c,e,f,g,h,i,j,k){this.$10=[];this.$11=!1;this.$1=a;this.$2=b;this.$3=c;this.$4=e;this.$5=f;this.$6=g;this.$7=h;this.$8=i;this.$9=j;this.$12=k!=null?k:!1;a=d("ConstUriUtils").getUri(window.location.href);a&&(this.$13=a.getDomain())}var b=a.prototype;b.logE2EEvent=function(a,b,c,d,e,f,g){c===void 0&&(c=null);d===void 0&&(d=null);e===void 0&&(e=null);f===void 0&&(f=null);g===void 0&&(g=null);if(this.$3==="Falco")return;e={request_id:this.$1,resume_id:"0",retry_id:e,transport:this.$2,method:this.$3,use_case:this.$4,request_log_context:this.$5,force_log_context:this.$6,e2e_sample_rate:this.$7,message_type:a,event:b,timestamp_ms:k(),aux_id:d,additional_data:c,dgw_stream_group_logging_id:this.$8,dgw_count_prior_streams_in_group:this.$9,domain:this.$13,df_trace_id:f};this.$14(e,g)};b.$14=function(a,b){if(!this.$12){c("RtiRequestStreamE2eClientFalcoEvent").log(function(){return a});return}this.$10.push(a);if(this.$11||a.event==c("RequestStreamE2EClientLoggerEvent").FAILURE||a.message_type==c("RequestStreamE2EClientLoggerMessageType").RESPONSE){var d={events:this.$10};c("RtiRequestStreamE2eClientBatchFalcoEvent").log(function(){return d});this.$10=[];this.$11=!0}};b.getRequestId=function(){return this.$1};return a}();function a(a,b,c){if(a==null||a.method==null)return null;var d=!1;i.includes(a.method)&&(d=!0);if(b==null||b.length==0)return null;b=JSON.parse(b);return b.requestId==null?null:new l(b.requestId,c,a.method,m(a.method,a),b.requestLogContext,b.forceLogContext,b.sampleRate,b.dgwStreamGroupLoggingId,b.dgwCountPriorStreamsInGroup,d)}function m(a,b){if(a==="FBLQ"&&b.config_id)return b.config_id;if(a==="SKY"){if(b.topic){var c=b.topic.lastIndexOf("/");return c>0?b.topic.substr(0,c):b.topic}return}return a}function b(a,b,d,e,f,g){f===void 0&&(f=null);g===void 0&&(g=null);if(a==null||a.requestId==null||a.clientLoggingDisabled!=null)return;var h={request_id:a.requestId,resume_id:"0",transport:b,e2e_sample_rate:a.sampleRate,message_type:d,event:e,timestamp_ms:k(),aux_id:a.auxId,additional_data:f,df_trace_id:g};c("RtiRequestStreamE2eClientFalcoEvent").log(function(){return h})}g.RequestStreamE2ELogger=l;g.createStreamLogger=a;g.logRequestStreamE2EEventStatic=b}),98);
__d("RequestStreamTransport",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["WEB_BR_MQTT","WEB_RS_MQTT","WEB_RS_STARGATE"]);f.RequestStreamTransport=a}),66);
__d("BladeRunnerSocket",["BladeRunnerEventHandler","BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","CurrentUser","FBMqttChannel","MqttPublishListener","Promise","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamTransport","justknobx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i="Connected",j="Disconnected",k="/br_sr",l="/sr_res",m=null;function n(a){var b;switch(a.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:return(b=a.request)==null?void 0:b.getInstrumentationData();case d("BladeRunnerTypes").StreamFrameType.DATA:return(b=a.data)==null?void 0:b.getInstrumentationData()}return null}function o(a){switch(a.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:return c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM;case d("BladeRunnerTypes").StreamFrameType.DATA:return c("RequestStreamE2EClientLoggerMessageType").AMENDMENT}return null}function p(a){if(a===null)return null;switch(a){case d("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:return"Accepted";case d("BladeRunnerStreamStatus").StreamStatus.REJECTED:return"Rejected";case d("BladeRunnerStreamStatus").StreamStatus.STARTED:return"Started";case d("BladeRunnerStreamStatus").StreamStatus.STOPPED:return"Stopped";case d("BladeRunnerStreamStatus").StreamStatus.CLOSED:return"Closed"}return null}function q(a){var b,c={};a==null||(b=a.frames)==null||b.forEach(function(a){if(a.type===d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE){a=(a=a.statusUpdate)==null?void 0:a.status;a=p(a);a!==null&&(c.flow_status=a)}});return c}function r(a,b){var c;switch(a.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:b.data_base64_size=(c=a.request)==null||(c=c.payload)==null||(c=c.length)==null?void 0:c.toString();break;case d("BladeRunnerTypes").StreamFrameType.DATA:b.data_base64_size=(c=a.data)==null||(c=c.rawDataSize())==null?void 0:c.toString();break}return null}function s(a,b,e){var f=n(a);if(f==null)return;var g=o(a);if(g==null)return;var h=null;switch(b){case d("MqttPublishListener").MqttPublishEvent.SENT:h=c("RequestStreamE2EClientLoggerEvent").SENT;break;case d("MqttPublishListener").MqttPublishEvent.ACKED:h=c("RequestStreamE2EClientLoggerEvent").PUBACK;break;case d("MqttPublishListener").MqttPublishEvent.NOT_ACKED:case d("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED:case d("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR:h=c("RequestStreamE2EClientLoggerEvent").FAILURE;e.reason==null&&(e.reason=b);break}if(h==null)return;r(a,e);if(((b=a.request)==null?void 0:b.e2eLogger)!=null&&f.clientLoggingDisabled==null){(b=a.request)==null||b.e2eLogger.logE2EEvent(g,h,e,f.auxId)}else d("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(f,d("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,g,h,e)}a=function(){function a(a){this.$1=[],this.$2=0,this.$3=0,this.$4=null,this.$5=0,this.$6=new Map(),this.$7=a!=null?a:c("FBMqttChannel"),this.$8=new Map(),c("BladeRunnerLogger").setClientSessionId(c("uuidv4")()),this.$9()}a.get=function(){m==null&&(m=new a(c("FBMqttChannel")));return m};var e=a.prototype;e.sendNewStreamRequest=function(b,d){d=new(c("BladeRunnerEventHandler"))(b,d,this);var e=b.getRequest();this.$6.set(e.streamId,d);if(!this.$10()){this.$11(d,e.streamId);return}this.getStreamCount()<=a.maxStreamCount?this.$12(e):(c("BladeRunnerLogger").bumpCounter("socket_request_throttled_max_streams"),c("BladeRunnerLogger").warn("Maximum stream count reached, will not send request: "+JSON.stringify(b.getRequest().getHeaders())),this.$11(d,e.streamId))};e.sendRetryStreamRequest=function(a){this.$12(a.getRequest())};e.sendCancel=function(a){c("BladeRunnerLogger").bumpCounter("socket_send_cancel");var b=new(d("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();b.streamId=a.streamId;b.status=d("BladeRunnerStreamStatus").StreamStatus.CLOSED;this.$13(b,a);this.removeStream(a.streamId)};e.sendAmendment=function(a,b,e){c("BladeRunnerLogger").bumpCounter("socket_send_amendment");var f=new(d("BladeRunnerTypesInternal").GatewayStreamData)();f.streamId=a;f.setData(b);e!=null&&(f.instrumentationData=e);this.$14(f)};e.sendAmendmentWithAck=function(a,e,f){var g=this;c("BladeRunnerLogger").bumpCounter("socket_send_amendment");var i=this.$15(),j=new(d("BladeRunnerTypesInternal").GatewayStreamData)();j.streamId=a;j.setData(e);j.shouldAck=!0;j.dataId=i;f!=null&&(j.instrumentationData=f);a=new(h||(h=b("Promise")))(function(a,b){g.$8.set(i,{resolve:a,reject:b})});this.$14(j);return a};e.$14=function(a){this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newDataFrame(a)),this.$16()};e.sendDataAcks=function(a){c("BladeRunnerLogger").bumpCounter("socket_send_data_ack",a.length),this.$17(a)};e.removeStream=function(a){this.$6["delete"](a)};e.getStreamCount=function(){return this.$6.size};e.getNextStreamId=function(){this.$5++;return this.$5};e.onMQTTStateChanged=function(a){this.$16();if(a!=j&&a!=i||this.$4==a)return;this.$4=a;c("BladeRunnerLogger").info("MQTTStateChanged: "+a);a==j?(c("BladeRunnerLogger").bumpCounter("mqtt_state_disconnected"),this.$18()):a==i&&c("BladeRunnerLogger").bumpCounter("mqtt_state_connected")};e.$12=function(a){c("BladeRunnerLogger").bumpCounter("socket_send_request");this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newRequestFrame(a));if(!this.$16()){(a=a.e2eLogger)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"MQTT Not Connected"})}};e.$13=function(a,b){this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(a));if(this.$16()){(a=b.e2eLogger)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").CANCEL,c("RequestStreamE2EClientLoggerEvent").SENT)}};e.$17=function(a){for(a of a)this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newDataAckFrame(a));this.$16()};e.$19=function(){this.$2++;return this.$2};e.$15=function(){this.$3++;return this.$3};e.$16=function(){var a=!1;if(this.$7.getConnectionState()===i&&this.$1.length>0)try{this.$20(this.$1),a=!0}catch(a){}finally{this.$1=[]}return a};e.$20=function(a){var b=this,e=new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(this.$19(),a),f=e.write();if(f.length>this.$21()){var g=Math.floor(a.length/2);if(g===0){a.forEach(function(a){return s(a,d("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR,{reason:"too long"})});var h=new Error("Publish is too long: "+f.length);h.stack;this.$22(e,h,"Publish is too long");throw h}this.$20(a.slice(0,g));this.$20(a.slice(g,a.length))}else try{c("BladeRunnerLogger").info("send message to "+k+" ("+f.length+" bytes)");h={qos:1,skipBuffer:!1};if(e.isInstrumented()){var i=Date.now();h.listener={onEvent:function(b){var c=(Date.now()-i).toString();a.forEach(function(a){s(a,b,{latency:c})})}}}this.$7.publish(k,f,h)["catch"](function(a){b.$22(e,a,"Failed publishing to MQTT")});c("BladeRunnerLogger").bumpCounter("mqtt_publish_success")}catch(a){this.$22(e,a,"Failed publishing to MQTT");throw a}};e.$9=function(){var a=this;c("BladeRunnerLogger").info("Starting socket with endpoint "+this.$7.getEndpoint()+" useragent "+navigator.userAgent);this.onMQTTStateChanged(this.$7.getConnectionState());this.$7.subscribeChannelEvents({onMQTTStateChanged:function(b){a.onMQTTStateChanged(b)},onJSError:function(a){var b=a!=null&&typeof a.isRecoverable==="boolean"?a.isRecoverable:!1;b?c("BladeRunnerLogger").bumpCounter("mqtt_channel_recoverable_error"):(c("BladeRunnerLogger").warn("JS error in MQTTChannel: "+(typeof a=="object"&&a!=null?a.toString():"unknown error")+", "+JSON.stringify(a)),c("BladeRunnerLogger").bumpCounter("mqtt_channel_error"))}});this.$7.subscribe(k,function(a){throw new Error("Unexpected response: "+k+" "+a.toString())});this.$7.subscribe(l,function(b){a.$23(b)})};e.$23=function(a){a=d("BladeRunnerTypesInternal").GatewayStreamBatch.read(a);this.processBatch(a)};e.$22=function(a,b,e){for(a of a.getFrames())if(a.type===d("BladeRunnerTypes").StreamFrameType.REQUEST){var f=a.getRequest(),g=this.$6.get(f.streamId);g!=null&&this.$24(g,f.streamId,d("BladeRunnerStreamStatus").StreamStatus.CLOSED,!0,null)}else if(a.type===d("BladeRunnerTypes").StreamFrameType.DATA){g=a.getData();f=g.dataId;if(g.shouldAck!=null&&g.shouldAck&&f!=null){var h=new(d("BladeRunnerTypesInternal").GatewayStreamDataAck)();h.streamId=g.streamId;h.dataId=f;h.success=!1;h.code=d("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_FAILED_TO_LAND;h.message=e;this.$25(h)}}c("BladeRunnerLogger").info("Failed publishing to MQTT: "+b.message);c("BladeRunnerLogger").bumpCounter("mqtt_publish_error")};e.$25=function(a){var b=this.$8.get(a.dataId);b!=null&&(this.$8["delete"](a.dataId),a.success?b.resolve(!0):a.code===d("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_LANDED_BUT_NOT_ACCEPTED?b.resolve(!1):b.reject(a.message))};e.processBatch=function(a){try{d("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(a.getInstrumentationData(),d("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").RECEIVED,q(a),a.getInstrumentationDataDfTraceId());c("BladeRunnerLogger").bumpCounter("socket_process_batch");var b=JSON.stringify(a);c("BladeRunnerLogger").info("Received batch ("+b.length+" bytes)");b=null;for(var e of a.getFrames()){var f=e.getStreamId();b==null&&(b=f);if(f!=null&&b!=f)throw new Error("Received batch with frames for multiple streams");e.type==d("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.$25(e.getDataAck())}if(b!=null){f=this.$6.get(b);f!=null?f.onProxyResponse(a):c("BladeRunnerLogger").info("Received batch with frames for unknown stream id: "+b)}else c("BladeRunnerLogger").info("Received batch with no frames")}catch(a){c("BladeRunnerLogger").exception(a,"Failed processing batch from MQTT");c("BladeRunnerLogger").bumpCounter("socket_process_batch_error");throw a}};e.$18=function(){this.$6.forEach(function(a,b,c){a.onDisconnect()})};e.$11=function(a,b){this.$24(a,b,d("BladeRunnerStreamStatus").StreamStatus.REJECTED,!1,0)};e.$24=function(a,b,c,e,f){var g=new(d("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();g.streamId=b;g.status=c;g.shouldRetry=e;g.retryDelayMs=f;b=new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(null,[d("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(g)]);a.onProxyResponse(b)};e.$10=function(){if(!c("CurrentUser").isLoggedIn()){c("BladeRunnerLogger").bumpCounter("request_stream_user_logged_out");return!1}return!0};e.$21=function(){var a=1024*1024,b=512*1024;try{var d=c("justknobx")._("317");b=d*a}catch(a){}return Math.max(b-1024,0)};return a}();a.maxStreamCount=2e3;g["default"]=a}),98);
__d("BladeRunnerStream",["Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){var g;a=function(){function a(a){this.$1=a}var c=a.prototype;c.getStreamHandler=function(){return this.$1};c.cancel=function(){};c.amendWithAck=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return!1});function c(b){return a.apply(this,arguments)}return c}();c.amendFireAndForget=function(a){};c.amendWithoutAck=function(a){};c.start=function(){return(g||(g=b("Promise"))).resolve()};c.isAlive=function(){return!1};c.canAmend=function(){return!1};c.getStatus=function(){return null};c.getStreamId=function(){return 0};return a}();f["default"]=a}),66);
__d("BladeRunnerStreamState",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes"],(function(a,b,c,d,e,f,g){a=function(){function a(a){this.$1=a,this.$2=null,this.$3=0,this.$4=!1,this.$5=0,this.$6=!1}var b=a.prototype;b.getRequest=function(){return this.$1};b.updateRetryRequestPayload=function(a){this.$1.updateRetryRequestPayload(a)};b.isAlive=function(){return!(this.$2==d("BladeRunnerStreamStatus").StreamStatus.CLOSED||this.$2==d("BladeRunnerStreamStatus").StreamStatus.REJECTED)};b.canAmend=function(){return this.$2==d("BladeRunnerStreamStatus").StreamStatus.ACCEPTED||this.$2==d("BladeRunnerStreamStatus").StreamStatus.STARTED||this.$2==d("BladeRunnerStreamStatus").StreamStatus.STOPPED};b.getLastStatus=function(){return this.$2};b.setLastStatus=function(a){this.$2=a};b.onError=function(){this.$3+=1};b.getErrorCount=function(){return this.$3};b.resetErrors=function(){this.$3=0};b.getRetryRequestScheduled=function(){return this.$6};b.setRetryRequestScheduled=function(a){this.$6=a};b.witnessFrame=function(a){switch(a.type){case d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:var b=a.getStatusUpdate(),c=!0;switch(b.status){case d("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:c=!this.$4;this.$4||(this.$4=!0);break;case d("BladeRunnerStreamStatus").StreamStatus.STARTED:c=this.getLastStatus()!=d("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case d("BladeRunnerStreamStatus").StreamStatus.STOPPED:c=this.getLastStatus()==d("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case d("BladeRunnerStreamStatus").StreamStatus.CLOSED:case d("BladeRunnerStreamStatus").StreamStatus.REJECTED:default:c=!0}this.setLastStatus(b.status);return c;case d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:this.$7(a.getRewriteRequest());return!1;default:return!0}};b.setRetriesAllowed=function(a){this.$5=a};b.getRetriesAllowed=function(){return this.$5};b.$7=function(a){if(!(a.temporary!=null||a.temporary==!0)){a.newBody!=null&&(this.$1.payload=a.newBody);a.newExtraHeader!=null&&(this.$1.extraHeader=a.newExtraHeader,this.$1.headers=JSON.parse(a.newExtraHeader));if(a.patchExtraHeader!=null)try{var b=JSON.parse(a.patchExtraHeader),d=this.$1.extraHeader!=null?JSON.parse(this.$1.extraHeader):{};this.$1.headers==null&&(this.$1.headers={});for(var e of Object.keys(b))this.$1.headers[e]=b[e],d[e]=b[e];this.$1.extraHeader=JSON.stringify(d)}catch(b){c("BladeRunnerLogger").warn("Failed to patch header: "+a.patchExtraHeader)}a.killBody!=null&&a.killBody==!0&&(this.$1.payload=null)}};return a}();g["default"]=a}),98);
__d("BladeRunnerSocketStream",["BladeRunnerStream","BladeRunnerStreamState","BladeRunnerStreamStatus","Promise","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","asyncToGeneratorRuntime","uuidv4"],(function(a,b,c,d,e,f,g){var h,i=4,j={reason:"stream_dead"};a=function(a){function e(b,d,e){b=a.call(this,b)||this;b.$BladeRunnerSocketStream$p_1=e;b.$BladeRunnerSocketStream$p_2=new(c("BladeRunnerStreamState"))(d);b.$BladeRunnerSocketStream$p_2.setRetriesAllowed(i);return b}babelHelpers.inheritsLoose(e,a);var f=e.prototype;f.start=function(){var a=this;return new(h||(h=b("Promise")))(function(b){a.send(),b()})};f.send=function(){var a,b=this.$BladeRunnerSocketStream$p_2.getRequest();(a=b.e2eLogger)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_base64_size:(a=b.payload)==null||(a=a.length)==null?void 0:a.toString()});this.$BladeRunnerSocketStream$p_1.sendNewStreamRequest(this.$BladeRunnerSocketStream$p_2,this.getStreamHandler())};f.amendWithAck=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var d=this.$BladeRunnerSocketStream$p_2.getRequest(),e=d.getInstrumentationData();if(e){var f,g;e.auxId=c("uuidv4")();(f=d.e2eLogger)==null||f.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:a==null||(g=a.length)==null?void 0:g.toString()},e.auxId)}if(this.canAmend()){if(e){var i;(f=d.e2eLogger)==null||f.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").SENT,{data_size:a==null||(i=a.length)==null?void 0:i.toString()},e.auxId)}return this.$BladeRunnerSocketStream$p_1.sendAmendmentWithAck(d.streamId,this.$BladeRunnerSocketStream$p_3(a),e==null?null:JSON.stringify(e))}(f=d.e2eLogger)==null||f.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,j,e==null?void 0:e.auxId);return(h||(h=b("Promise"))).reject("Stream is closed or not accepted")});function d(b){return a.apply(this,arguments)}return d}();f.amendFireAndForget=function(a){var b=this.$BladeRunnerSocketStream$p_2.getRequest(),d=b.getInstrumentationData();if(d){var e,f;d.auxId=c("uuidv4")();(e=b.e2eLogger)==null||e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:a==null||(f=a.length)==null?void 0:f.toString()},d.auxId)}if(this.canAmend()){this.$BladeRunnerSocketStream$p_1.sendAmendment(this.$BladeRunnerSocketStream$p_2.getRequest().streamId,this.$BladeRunnerSocketStream$p_3(a),d==null?null:JSON.stringify(d));if(d){var g;(e=b.e2eLogger)==null||e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").SENT,{data_size:a==null||(g=a.length)==null?void 0:g.toString()},d.auxId)}}else{(e=b.e2eLogger)==null||e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,j,d==null?void 0:d.auxId);throw new Error("Stream is closed or not accepted")}};f.amendWithoutAck=function(a){this.amendFireAndForget(a)};f.$BladeRunnerSocketStream$p_3=function(a){return typeof a=="object"?btoa(new TextDecoder("utf8").decode(a)):a};f.cancel=function(){var a=this.$BladeRunnerSocketStream$p_2.getRequest();(a=a.e2eLogger)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").CANCEL,c("RequestStreamE2EClientLoggerEvent").RECEIVED);this.isAlive()&&(this.$BladeRunnerSocketStream$p_1.sendCancel(this.$BladeRunnerSocketStream$p_2.getRequest()),this.$BladeRunnerSocketStream$p_2.setLastStatus(d("BladeRunnerStreamStatus").StreamStatus.CLOSED),this.getStreamHandler().onClientCancel())};f.isAlive=function(){return this.$BladeRunnerSocketStream$p_2.isAlive()};f.canAmend=function(){return this.$BladeRunnerSocketStream$p_2.canAmend()};f.getStatus=function(){return this.$BladeRunnerSocketStream$p_2.getLastStatus()};f.getStreamId=function(){return this.$BladeRunnerSocketStream$p_2.getRequest().streamId};return e}(c("BladeRunnerStream"));g["default"]=a}),98);
__d("RequestStreamE2ESampling",["invariant","Random","RequestStreamE2EClientSamplingConfig","uuidv4"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a){return a==null?!1:a.requestId!=null&&typeof a.requestId=="string"&&a.forceLogContext!=null&&typeof a.forceLogContext=="string"}function j(a,b){var d=c("RequestStreamE2EClientSamplingConfig").sampleRate;if(d>1&&a!=null){a=c("RequestStreamE2EClientSamplingConfig").methodToSamplingMultiplier[a];a==0?d=0:a!=null&&(d/=a)}return d==1?1:d/b}function k(a,b,d,e){var f=c("uuidv4")();(b.requestId==null||b.requestId===""||typeof b.requestId!="string")&&(a.requestId!=null&&typeof a.requestId=="string"?b.requestId=a.requestId:b.requestId=f);b.requestId+="/_"+f.substring(0,4);b.resumeId="0";d!=null?b.sampleRate=d:b.sampleRate=void 0;f="";e!=null&&e.length>0&&(f=e);f.length>0&&(b.requestLogContext!=null&&b.requestLogContext.length>0?b.requestLogContext+=":":b.requestLogContext="",b.requestLogContext+=f);(a==null?void 0:a.method)==="Falco"&&(b.clientLoggingDisabled="Falco");d={};for(e of Object.keys(b).sort())d[e]=b[e];return JSON.stringify(d)}function a(a,b,d,e){b&&(!b.requestId.includes("/")&&!b.requestId.includes("#")||h(0,41721));e=j(a.method,e!=null?e:1);if(c("Random").coinflip(e))return k(a,b||{requestId:""},e,d);return i(b)?k(a,b||{requestId:""},null,d):""}g.isForceLogged=i;g.getSampleRateForLogging=j;g.normalizeInstrumentationData=k;g.validateInstrumentationData=a}),98);
__d("BladeRunnerClient",["Base64","BladeRunnerConfig","BladeRunnerLogger","BladeRunnerSocket","BladeRunnerSocketStream","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamTransport","cr:2046346"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b){this.$2=d("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,this.$1=a!=null?a:c("BladeRunnerSocket").get(),b&&(this.$2=b)}var e=a.prototype;e.createStream=function(a,b,c,d){return this.$3(a,b,c,d)};e.requestStream=function(a,c,d,e){a=this.$3(a,c,d,e);a.send();b("cr:2046346")!=null&&b("cr:2046346").startPulsarTest();return a};e.logInfo=function(a){c("BladeRunnerLogger").info(a)};e.bumpCounter=function(a){c("BladeRunnerLogger").bumpCounter(a)};e.$3=function(a,b,e,f){var g=new(d("BladeRunnerTypesInternal").GatewayStreamRequest)();g.streamId=this.$1.getNextStreamId();g.requestType=d("BladeRunnerTypes").StreamRequestType.BLADE_RUNNER;g.headers=c("BladeRunnerConfig").patchRequestHeaders(a);g.extraHeader=JSON.stringify(g.headers);g.payload=b!=null?c("Base64").encode(b):null;f!=null&&(f.transport="WEB_RS_MQTT");g.instrumentationData=d("RequestStreamE2ESampling").validateInstrumentationData(g.headers||{},f);g.e2eLogger=d("RequestStreamE2ELogger").createStreamLogger(g.headers,g.instrumentationData,this.$2);return new(c("BladeRunnerSocketStream"))(e,g,this.$1)};return a}();g["default"]=a}),98);
__d("BootloaderEventsPerf",["invariant","Bootloader","BootloaderEvents","ResourceTimingStore","objectEntries","objectValues"],(function(a,b,c,d,e,f,g,h){var i=["start_time","resources","durations"],j={total_count:0,total_bytes:0,downloaded_count:0,downloaded_bytes:0,cached_count:0,cached_bytes:0,inlined_count:0,inlined_bytes:0,duration:0,missing_count:0};function k(a,b,c){return Math.max(0,(c!=null?c:0)-Math.max(a,b!=null?b:0))}function l(){return{blocking:babelHelpers["extends"]({},j),nonblocking:babelHelpers["extends"]({},j),"default":babelHelpers["extends"]({},j)}}function m(a,b,c){var e,f;if(c==null)e=0,f="downloaded";else if(c[1])e=c[0].length,f="inlined";else{c=d("ResourceTimingStore").getEntryForURL(c[0]);c?(e=c.encodedBodySize,f=c.transferSize===0?"cached":"downloaded"):(e=0,f="downloaded",a.missing_count++)}a.total_count++;a.total_bytes+=e;if(!b)return;a.duration=Math.max(a.duration,b);switch(f){case"downloaded":a.downloaded_count++;a.downloaded_bytes+=e;break;case"inlined":a.inlined_count++;a.inlined_bytes+=e;break;case"cached":a.cached_count++;a.cached_bytes+=e;break}}function n(a,b,d,e,f){var g=c("Bootloader").getResourceState(b);m(a,k(d,g.loadStart,g.loadEnd),e);g.loadError!=null&&f.add(b)}function o(a,b,d,e){var f=l();for(a of c("objectEntries")(a)){var g=a[0],i=a[1];for(i of i){var j=i[0],k=i[1],m=void 0,o=void 0;switch(k.type){case"async":o=null;m=d;break;case"js":case"css":o=[k.src,k.d===1];m=f;break;default:k,h(0,3721)}n(m[g],j,b,o,e)}}return f}function p(a,b){var e={unpredicted:d("BootloaderEvents").newResourceMapSet(),ef:d("BootloaderEvents").newResourceMapSet(),overpredicted:d("BootloaderEvents").newResourceMapSet()};for(var f of c("objectEntries")(b)){var g=f[0],h=f[1];for(h of h.entries()){var i=h[0],j=h[1];a[g].has(i)?e.ef[g].set(i,j):e.overpredicted[g].set(i,j)}}for(i of c("objectEntries")(a)){j=i[0];h=i[1];for(g of h.entries()){f=g[0];a=g[1];b[j].has(f)||e.unpredicted[j].set(f,a)}}return e}function a(a){var b=a.efData,c=a.rsrcs,d=a.startTime,e=new Set(),f;if(b){var g=p(c,b.tierOne);f=g.unpredicted;g={ef:o(g.ef,b.fetchRsrcsStart,l(),e),overpredicted:o(g.overpredicted,b.fetchRsrcsStart,l(),e)};b={ef_fetch_predictions:b.fetchPredictionsEnd-b.fetchPredictionsStart,ef_fetch_start_wait:b.fetchPredictionsEnd-b.fetchRsrcsStart,ef_head_start:d-b.fetchRsrcsStart}}else f=c,g={},b={};c=babelHelpers["extends"]({unpredicted:o(f,d,l(),e)},g);return{source:a.source,source_detail:a.sourceDetail,is_first_identical:a.isFirstIdentical,timeslice_context:(f=a.timesliceContext)==null?void 0:f.name,start_time:d,err_count:e.size,resources:c,durations:babelHelpers["extends"]({jsmods_wait:a.jsmodsStart-d,jsmods:a.jsmodsEnd-a.jsmodsStart,jsmods_done_wait:a.jsmodsEnd-d,download_done_wait:a.logTime-d},b),payloadStats:a.payloadStats}}function b(a){var b=a.startTime,e=0,f=0,g=0,h=0;for(var i of a.components){var j=c("Bootloader").getComponentTiming(i),n=j.tierTwoStart,p=j.tierTwoEnd,q=j.tierThreeStart;j=j.tierThreeEnd;e=Math.max(e,k(b,n,p));f=Math.max(f,k(b,b,p));g=Math.max(g,k(b,q,j));h=Math.max(h,k(b,b,j))}n=new Set();p=l();q=o(a.tierOne,b,p,n);j=o(a.tierTwo,b,p,n);i=o(a.tierThree,b,p,n);var r=p.blocking.downloaded_count!=0,s=l(),t=d("BootloaderEvents").newResourceMapSet(),u=new Set();for(var v of[a.tierOne,a.tierTwo,a.tierThree])for(var w of c("objectValues")(v))for(var x of w.keys())u.add(x);x=0;w=0;v=0;for(var y of a.beRequests.values()){x+=k(b,b,y.requestStart);w+=y.serverGenTime;v+=y.jsmodsEnd-y.jsmodsStart;m(s[r?"blocking":"nonblocking"],y.responseStart-y.requestStart,[y.uri,!1]);for(var z of c("objectEntries")(y.rsrcs)){var A=z[0],B=z[1];for(B of B){var C=B[0],D=B[1];u.has(C)||t[A].set(C,D)}}}C=o(t,b,p,n);return{ref:a.ref,components:a.components,timeslice_context:(D=a.timesliceContext)==null?void 0:D.name,start_time:b,err_count:n.size,resources:{t1:q,t2:j,t3:i,be:s,unpredicted:C,async:p},durations:{fetch_start_wait:a.fetchStartTime-b,be_start_wait:x,be_server_gen:w,be_jsmods:v,callback_wait:a.callbackStart-b,callback:a.callbackEnd-a.callbackStart,bootload_done_wait:a.callbackEnd-b,rdfd_requirelazy:e,rdfd_done_wait:f,rd_requirelazy:g,rd_done_wait:h}}}function e(a){a.start_time;var b=a.resources,d=a.durations;a=babelHelpers.objectWithoutPropertiesLoose(a,i);for(b of c("objectEntries")(b)){var e=b[0],f=b[1];for(f of c("objectEntries")(f)){var g=f[0],h=f[1];for(h of c("objectEntries")(h)){var j=h[0],k=h[1];a[e+"_"+g+"_resources_"+j]=Math.round(Number(k))}}}for(j of c("objectEntries")(d)){k=j[0];h=j[1];a[k+"_duration"]=Math.round(Number(h))}if(a.payloadStats){for(g of c("objectEntries")(a.payloadStats)){f=g[0];e=g[1];for(b of c("objectEntries")(e)){d=b[0];k=b[1];a[f+"_"+d+"_count"]=Math.round(Number(k))}}delete a.payloadStats}return a}g.computeHRData=a;g.computeBLData=b;g.flattenData=e}),98);
__d("BootloaderLoggingStatusEnum",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["SUCCESS","TIMEOUT","ERROR"]);c=a;f["default"]=c}),66);
__d("CometBootloaderErrorsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1109");b=d("FalcoLoggerInternal").create("comet_bootloader_errors",a);e=b;g["default"]=e}),98);
__d("CometBootloaderErrorLoggerUtil",["BootloaderEvents","BootloaderEventsPerf","CometBootloaderErrorsFalcoEvent","CometTimeSpentNavigation","ResourceTimingStore","SiteData","performanceNavigationStart"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.parent_lid;d("ResourceTimingStore").init();var e=function(a){return{ms_since_navstart:Math.round(a-c("performanceNavigationStart")()),parent_lid:b,pkg_cohort:c("SiteData").pkg_cohort,request_path:(a=c("CometTimeSpentNavigation").getPathInfo())==null?void 0:a.name,svn_rev:c("SiteData").client_revision}},f=function(a,b){var f=d("BootloaderEventsPerf").computeBLData(a.bootloaderData),g=d("BootloaderEventsPerf").flattenData(f);c("CometBootloaderErrorsFalcoEvent").log(function(){var c=babelHelpers["extends"]({},g,e(f.start_time),{status:b,was_offline:a.offline});a.erroredResources!=null&&(c.errored_resource_urls=Array.from(a.erroredResources));return c})};d("BootloaderEvents").onBootloadError(function(a){f(a,"ERROR")})}g.initLogging=a}),98);
__d("CometBootloaderEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("177");b=d("FalcoLoggerInternal").create("comet_bootloader_events",a);e=b;g["default"]=e}),98);
__d("HasteResponseFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1823926");b=d("FalcoLoggerInternal").create("haste_response",a);e=b;g["default"]=e}),98);
__d("CometBootloaderLoggerUtil",["BootloaderEvents","BootloaderEventsPerf","CometBootloaderEventsFalcoEvent","CometTimeSpentNavigation","HasteResponseFalcoEvent","ResourceTimingStore","SiteData","UserTimingUtils","gkx","performance","performanceNavigationStart"],(function(a,b,c,d,e,f,g){"use strict";var h,i=!1,j=c("gkx")("10211");function a(a){var b=a.bl_sample_rate,e=a.hr_sample_rate,f=a.parent_lid;if(i||!(b||e||j===!0))return;i=!0;d("ResourceTimingStore").init();var g=function(a){return{ms_since_navstart:Math.round(a-c("performanceNavigationStart")()),parent_lid:f,pkg_cohort:c("SiteData").pkg_cohort,request_path:(a=c("CometTimeSpentNavigation").getPathInfo())==null?void 0:a.name,svn_rev:c("SiteData").client_revision}};e&&d("BootloaderEvents").onHasteResponse(function(a){return c("HasteResponseFalcoEvent").log(function(){var b=d("BootloaderEventsPerf").computeHRData(a),c=d("BootloaderEventsPerf").flattenData(b);return babelHelpers["extends"]({},c,g(b.start_time))})});j&&(d("BootloaderEvents").onBootload(function(a){d("UserTimingUtils").measureModern("Bootloader: "+a.components.join(", "),{end:a.callbackEnd-(h||(h=c("performance"))).timeOrigin,start:a.startTime-h.timeOrigin},"Bootloader Events")}),d("BootloaderEvents").onHasteResponse(function(a){d("UserTimingUtils").measureModern("Haste: "+a.source,{end:a.jsmodsEnd-(h||(h=c("performance"))).timeOrigin,properties:[["Source Detail",a.sourceDetail]],start:a.startTime-h.timeOrigin},"Bootloader Events")}));var k=function(a,b){var e=d("BootloaderEventsPerf").computeBLData(a),f=d("BootloaderEventsPerf").flattenData(e);c("CometBootloaderEventsFalcoEvent").log(function(){return babelHelpers["extends"]({},f,g(e.start_time),{status:b})})};b&&d("BootloaderEvents").onBootload(function(a){return k(a,"SUCCESS")});d("BootloaderEvents").onBootloaderCallbackTimeout(function(a){return k(a,"TIMEOUT")})}g.initLogging=a}),98);
__d("CometRelayEF",["Bootloader","BootloaderEvents","ClientConsistencyEventEmitter","CometRouterSSREntrypoint","cometAsyncFetch","gkx","performanceAbsoluteNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map();function j(a){if(!c("gkx")("26332"))return;a=a.filter(function(a){return!i.has(a)});if(a.length===0)return;a.forEach(function(a){d("BootloaderEvents").notifyHasteResponseEFStart("relay_3d",a)});var b=(h||(h=c("performanceAbsoluteNow")))(),e=c("cometAsyncFetch")("/ajax/relay-ef/",{data:{queries:a},method:"POST"}).then(function(a){return{fetchPredictionsEnd:(h||(h=c("performanceAbsoluteNow")))(),fetchPredictionsStart:b,payload:a}});a.forEach(function(a){return i.set(a,e)})}function a(a,b){a=d("CometRouterSSREntrypoint").processRootEntryPoint(a,b);j(a.map(function(a){a=a.name;return a}))}function k(a){if(!c("gkx")("26332"))return;j(a);var b=(h||(h=c("performanceAbsoluteNow")))();a.forEach(function(a){var e=i.get(a);e&&e!==!0&&c("promiseDone")(e,function(e){var f=e.fetchPredictionsEnd,g=e.fetchPredictionsStart;e=e.payload;if(e!=null&&typeof e==="object"){var h;c("Bootloader").loadPredictedResourceMap(e.predictions[a],{onLog:function(c){return d("BootloaderEvents").notifyHasteResponseEF("relay_3d",a,{fetchPredictionsEnd:f,fetchPredictionsStart:g,fetchRsrcsStart:b,tierOne:c})}},(h=(h=e.consistency)==null?void 0:h.rev)!=null?h:null);e.consistency!=null&&c("ClientConsistencyEventEmitter").emit("newEntry",e.consistency)}});i.set(a,!0)})}function b(a,b){a=d("CometRouterSSREntrypoint").processRootEntryPoint(a,b);b=a.map(function(a){a=a.name;return a});k(b)}e={fetchPredictedResources:b,fetchPredictedResourcesForQueries:k,fetchPredictions:a,fetchPredictionsForQueries:j};g["default"]=e}),98);
__d("CometToast.react",["fbt","ix","BaseToast.react","CometPressable.react","FDSCircleButton.react","FDSText.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=["action","href","icon","impressionLoggingRef","message","onDismiss","target","testid","truncateText","withoutCloseButton"],k,l=k||(k=d("react")),m=k.useMemo,n={pressable:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"x1q0g3np",width:"xh8yej3",$$css:!0}};function a(a){var b=a.action,e=a.href,f=a.icon,g=a.impressionLoggingRef,k=a.message,o=a.onDismiss,p=a.target,q=a.testid;q=q===void 0?"Toast":q;q=a.truncateText;var r=q===void 0?!0:q;q=a.withoutCloseButton;q=q===void 0?!1:q;var s=babelHelpers.objectWithoutPropertiesLoose(a,j),t=m(function(){return e!=null?{target:p,url:e}:void 0},[e,p]);return l.jsx(c("BaseToast.react"),{action:b!=null?{label:b.label,labelRenderer:function(a){return l.jsx(c("FDSText.react"),{color:"blueLink",numberOfLines:1,type:"bodyLink3",children:a})},onPress:b.onPress,testid:b.testid}:void 0,addOnStart:f,closeButton:q!==!0&&l.jsx(c("FDSCircleButton.react"),{icon:d("fbicon")._(i("478231"),12),label:h._(/*BTDS*/"Close"),onPress:o,size:24,testid:void 0}),linkWrapper:s.onPress!=null||t!=null?function(a){return l.jsx(c("CometPressable.react"),babelHelpers["extends"]({},s,{expanding:!0,linkProps:t,xstyle:n.pressable,children:a}))}:void 0,message:function(a){a=a.toastMessageId;return l.jsx(c("FDSText.react"),{color:"primary",id:a,numberOfLines:r?4:void 0,type:"body3",children:k})},onDismiss:o,testid:void 0,toastRef:g})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("ContextualConfigConstants",[],(function(a,b,c,d,e,f){"use strict";a=1e3;b=", ";c={SAME:"same",NULL:"null",NNULL:"nnull",CATCH_ALL:"catch_all",EQ:"eq",NEQ:"neq",LT:"lt",LTE:"lte",GT:"gt",GTE:"gte",COR:"cor",CONTAINS:"contains",REGEX:"regex",IN:"in",NIN:"nin"};d={DENSE:"dense",MULTI_OUTPUT_RESOLVED:"multi-output-resolved",TABLE:"table"};e=[];var g=[],h=[],i={BAD_BOOLEAN_FORMAT:"Bad boolean format",BAD_CONFIG:"Bad config",BAD_CONTEXT_IDENTIFIER:"Bad context identifier",BAD_CONTEXT_VALUE:"Bad context value",BAD_MONITORED_CONTEXTS:"Bad monitored contexts",BAD_NUMBER_FORMAT:"Bad number format",BAD_OUTPUT_NAME:"Bad output name",BAD_OUTPUT_TYPE:"Bad output type",BAD_VALUE_ORDER:"Bad values order",DUPLICATE_OUTPUT_NAME:"Duplicate output name",ILLEGAL_BOOLEAN_STRATEGY:"Illegal boolean strategy",ILLEGAL_BUCKET_VALUES:"Illegal bucket values",ILLEGAL_NUMERIC_STRATEGY:"Illegal numeric strategy",ILLEGAL_STRING_STRATEGY:"Illegal string strategy",INVALID_BOOLEAN:"Invalid boolean",INVALID_FLOAT:"Invalid float",INVALID_INTEGER:"Invalid integer",INVALID_STRING:"Invalid string",INVALID_VALUE_TYPE:"Invalid value type",MISMATCH_NUMBER_OF_VALUES:"Mismatching number of values",MISSING_BUCKETS:"Missing buckets",MISSING_BUCKET_MATCH:"Missing bucket match",MISSING_BUCKET_NAME:"Missing bucket name",MISSING_BUCKET_STRATEGY:"Missing bucket strategy",MISSING_CONTEXT_IN_CONFIG:"Missing context in config",MISSING_DEFAULT_VALUE:"Missing default value",MISSING_OUTPUTS_DEFINITION:"Missing outputs field definition",MISSING_RESULTS:"Missing results",MISSING_TABLE:"Missing table",MISSING_TABLE_ITEM_BUCKET:"Missing table item bucket",MISSING_TABLE_ITEM_VALUES:"Missing table item values",MISSING_VECTOR:"Missing vector",REGEX_SYNTAX_ERROR:"Regex syntax error",REQUESTED_PARAM_NOT_FOUND:"Requested param not found",RESULTS_VECTOR_SIZE_MISMATCH:"Results vector size mismatch",UNDECLARED_OUTPUT_PARAM:"Undeclared output param",UNKNOWN_BUCKET_DEFINITION:"Unknown bucket definition",UNKNOWN_CONFIG_TYPE:"Unknown config type",UNSUPPORTED_CONFIG_VERSION:"Unsupported config version"},j=10,k=", ",l={BOOL:"BOOL",FLOAT:"FLOAT",INT:"INT",STRING:"STRING"};f.ANALYTICS_SAMPLE_RATE=a;f.BUCKET_DELIMITER=b;f.CONTEXT_BUCKET_STRATEGY=c;f.CONFIG_TYPE=d;f.EMPTY_RESOLVED_CONTEXTS=e;f.EMPTY_RESOLVED_MONITORS=g;f.EMPTY_RESULT_PARAMS=h;f.ERROR=i;f.JSON_SUB_SAMPLE_RATE=j;f.LIST_DELIMITER=k;f.TYPE=l}),66);
__d("ContextualConfigResolvedContextsUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){var b=[];for(a of a){var c=a.bucketIndex;if(c==void 0)break;b.push(c)}return b};b=function(a){var b=[];for(a of a){var c=a.bucketName;if(c===void 0)break;b.push(c)}return b};var g=function(a){return a.name};c=function(a){return a.map(g)};d=function(a){var b=[];for(a of a){var c=a.value;if(c===void 0)break;b.push(c)}return b};f.getBucketIndices=a;f.getBucketNames=b;f.getContextNames=c;f.getContextValues=d}),66);
__d("ContextualConfigCollateExposureData",["ContextualConfigConstants","ContextualConfigResolvedContextsUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=["cfg_ver_timestamp","policy_id","version","sample_rate"],i=function(a){return a.join(d("ContextualConfigConstants").LIST_DELIMITER)},j=function(a,b){for(var c of h)b[c]!=null&&(a[c]=b[c]);b.name&&(a.config_name=b.name)},k=function(a,b){var c=b[0],e=b[1],f=b[2];b=b[3];c!=null&&(a.exception=c.message);a.result=i(e.map(function(a){return a.value}))||"INVALID";a.context=i(d("ContextualConfigResolvedContextsUtils").getContextNames(f));a.context_value=i(d("ContextualConfigResolvedContextsUtils").getContextValues(f));a.bucket_name=i(d("ContextualConfigResolvedContextsUtils").getBucketNames(f));a.monitor=i(d("ContextualConfigResolvedContextsUtils").getContextNames(b));a.monitor_value=i(d("ContextualConfigResolvedContextsUtils").getContextValues(b))};function a(a,b,c){var e={sample_rate:d("ContextualConfigConstants").ANALYTICS_SAMPLE_RATE};j(e,a);k(e,b);c&&(e.config_contents=JSON.stringify(a));return e}g["default"]=a}),98);
__d("ContextualConfigExposureEvent",["Random"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){this.$2=a,this.$4=d("Random").random()<1/a.sample_rate,this.$3=b,this.$1=c}var b=a.prototype;b.getData=function(){return this.$2};b.log=function(a){var b=this.$2,c=this.$3,d=this.$4;a&&c(b);d&&this.$1(b);return this};b.isSampled=function(){return this.$4};return a}();g["default"]=a}),98);
__d("ContextualConfigExposureLoggerFactory",["ContextualConfigExposureEvent"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a,b){this.$2=a,this.$1=b}var b=a.prototype;b.createEvent=function(a){a=new(c("ContextualConfigExposureEvent"))(a,this.$2,this.$1);return a};return a}();function a(a,b){return new h(a,b)}g["default"]=a}),98);
__d("MarauderLogger",["Banzai","CacheStorage","MarauderConfig"],(function(a,b,c,d,e,f){var g="client_event",h="navigation",i=18e4,j="marauder",k="marauder_last_event_time",l="marauder_last_session_id",m={},n=[],o=!1,p=null,q=null,r=null,s=0,t,u,v=!1,w=null;function a(){F().set(k,x())}b("Banzai").subscribe(b("Banzai").SHUTDOWN,a);function x(){t=t||F().get(k)||0;return t}function y(){v||(u=F().get(l),v=!0);var a=Date.now();(!u||a-i>x())&&(u=a.toString(16)+"-"+(~~(Math.random()*16777215)).toString(16),F().set(l,u));return u}function z(){return{user_agent:window.navigator.userAgent,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth,density:window.screen.devicePixelRatio||null,platform:window.navigator.platform||null,locale:window.navigator.language||null}}function A(){return{locale:navigator.language}}function B(a,b,c,d,e,f,g){var h=g!=null&&g!=0?g:Date.now();t=g!=null&&g!=0?Date.now():h;g=b!=null&&b!=""?b:p;return{name:a,time:h/1e3,module:g,obj_type:d,obj_id:e,uuid:f,extra:c}}function C(a,b,c){return B("content",null,{flags:b},null,null,a,c)}function D(a){var b=window.__mrdr;if(b)for(var c in b){var d=b[c];if(d[3]!==0){delete b[c];if(c==="1")if(r!==null)c=r;else continue;a.push(C(c,1,d[1]));a.push(C(c,2,d[2]));a.push(C(c,3,d[3]))}}}function E(a,c){D(a);if(a.length===0)return;o&&a.push(B("counters",null,m));var d=b("Banzai").BASIC;c==="vital"&&(d=b("Banzai").VITAL);var e=b("MarauderConfig").gk_enabled;s===0&&e&&(a.push(B("device_status",null,A())),d={delay:5e3});c==="signal"&&(d={signal:!0});e&&Math.random()<.01&&a.push(B("device_info",null,z()));if(r!==null)for(c=0;c<a.length;c++){e=a[c];(e.uuid===null||e.uuid===void 0)&&(e.uuid=r)}e={app_ver:b("MarauderConfig").app_version,data:a,device_id:void 0,log_type:g,seq:s++,session_id:y()};c=F().get("device_id");c&&(e.device_id=c);m={};o=!1;b("Banzai").post(j,e,d)}function F(){w||(w=new(b("CacheStorage"))("localstorage",""));return w}function c(a){m[a]||(m[a]=0),m[a]++,o=!0}function G(b,a,c,d,f,g,h,i){E([B(b,a,c,d,f,g,h)],i)}function H(a,b){p!==b&&(n.push(B(h,p,{dest_module:b,source_url:q,destination_url:a})),p=b,q=a)}function d(a,b){p!==b&&(r=null,H(a,b))}function f(a,b,c){G(b?"show_module":"hide_module",a,c)}function I(a){p=a}function J(){return p}function K(a){r===null&&(r=a,a!==null&&(E(n),n=[]))}e.exports={count:c,log:G,navigateTo:d,navigateWithinSession:H,toggleModule:f,setUUID:K,setNavigationModule:I,getNavigationModule:J}}),null);
__d("ContextualConfigExposureLogger",["ContextualConfigExposureLoggerFactory","MarauderLogger"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){};b=function(a){d("MarauderLogger").log("contextual_config_exposure","",a)};e=c("ContextualConfigExposureLoggerFactory")(a,b);g["default"]=e}),98);
__d("ContextualConfigAssert",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){if(a===!1)throw new Error(b)}f["default"]=a}),66);
__d("ContextualConfigValidators",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return Array.isArray(a)};b=function(a){return typeof a==="boolean"};c=function(a){return a!=null};e=function(a){return function(b){return Object.prototype.hasOwnProperty.call(a,b)}};f=function(a){return i(a)&&a%1===0};var h=function(a){return j(a)&&a.length>0},i=function(a){return typeof a==="number"&&!isNaN(a)&&a!==Infinity&&a!==-Infinity},j=function(a){return typeof a==="string"},k=function(a){switch(a){case d("ContextualConfigConstants").TYPE.BOOL:case d("ContextualConfigConstants").TYPE.FLOAT:case d("ContextualConfigConstants").TYPE.INT:case d("ContextualConfigConstants").TYPE.STRING:return!0;default:return!1}};g.isArray=a;g.isBoolean=b;g.isDefined=c;g.isKey=e;g.isInteger=f;g.isNonEmptyString=h;g.isNumber=i;g.isString=j;g.isType=k}),98);
__d("ContextualConfigParseBoolean",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a.toUpperCase()){case"TRUE":return!0;case"FALSE":return!1;default:throw new Error(d("ContextualConfigConstants").ERROR.BAD_BOOLEAN_FORMAT)}}g["default"]=a}),98);
__d("ContextualConfigParsePredBoolean",["ContextualConfigConstants","ContextualConfigParseBoolean"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e;switch(b){case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var f=c("ContextualConfigParseBoolean")(a);e=function(a){return a===f};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:e=function(a){return a==null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:e=function(a){return a!=null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:e=function(a){return!0};break;default:throw new Error(d("ContextualConfigConstants").ERROR.ILLEGAL_BOOLEAN_STRATEGY)}return function(a){return e(a)}}g["default"]=a}),98);
__d("ContextualConfigParseFloat",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=/^[-\+]?([1-9]\d*|0)(\.\d+)?$/,j=function(a){return i.test(a)};function a(a){(h||(h=c("ContextualConfigAssert")))(j(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);a=parseFloat(a);h(d("ContextualConfigValidators").isNumber(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);return a}g["default"]=a}),98);
__d("ContextualConfigParseInteger",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=/^[-\+]?([1-9]\d*|0)$/,j=function(a){return i.test(a)};function a(a){(h||(h=c("ContextualConfigAssert")))(j(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);a=parseInt(a,10);h(d("ContextualConfigValidators").isNumber(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);return a}g["default"]=a}),98);
__d("ContextualConfigPredAssertions",["ContextualConfigAssert","ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a){return(h||(h=c("ContextualConfigAssert")))(a>0,d("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)};b=function(a,b){return(h||(h=c("ContextualConfigAssert")))(a===b,d("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)};e=function(a,b){return(h||(h=c("ContextualConfigAssert")))(a<b,d("ContextualConfigConstants").ERROR.BAD_VALUE_ORDER)};g.assertHasValues=a;g.assertNumberOfValues=b;g.assertValueOrder=e}),98);
__d("ContextualConfigParsePredNumeric",["ContextualConfigConstants","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigPredAssertions","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f){var g=e.map(f?c("ContextualConfigParseInteger"):h||(h=c("ContextualConfigParseFloat"))),i;switch(b){case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var j=f?c("ContextualConfigParseInteger")(a):(h||(h=c("ContextualConfigParseFloat")))(a);i=function(a){return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a===j};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:i=function(a){return a==null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:i=function(a){return a!=null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:i=function(a){return!0};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.COR:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,2);d("ContextualConfigPredAssertions").assertValueOrder(g[0],g[1]);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a>=g[0]&&a<g[1]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LT:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a<g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LTE:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a<=g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.EQ:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a===g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NEQ:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a!==g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GT:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a>g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GTE:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a>=g[0]};break;default:throw new Error(d("ContextualConfigConstants").ERROR.ILLEGAL_NUMERIC_STRATEGY)}return function(a){return i(a)}}g["default"]=a}),98);
__d("ContextualConfigParseRegExp",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";var h=/^\/(.+)\/(.*)$/;function a(a){try{var b=a.match(h);if(b!=null)return new RegExp(b[1],b[2]);else return new RegExp(a)}catch(a){throw new Error(d("ContextualConfigConstants").ERROR.REGEX_SYNTAX_ERROR)}}g["default"]=a}),98);
__d("ContextualConfigParsePredString",["ContextualConfigConstants","ContextualConfigParseRegExp","ContextualConfigPredAssertions"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){if(typeof a!=="string")throw new Error(d("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE);return a},i=function(a){var b=[];for(a of a)b.push(h(a));return b};function a(a,b,e){var f=i(e),g;switch(b){case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:g=function(b){return typeof b!=="string"?!1:b===a};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:g=function(a){return a==null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:g=function(a){return a!=null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:g=function(a){return!0};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.IN:d("ContextualConfigPredAssertions").assertHasValues(f.length);g=function(a){return typeof a!=="string"?!1:f.indexOf(a)!==-1};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NIN:d("ContextualConfigPredAssertions").assertHasValues(f.length);g=function(a){return typeof a!=="string"?!1:f.indexOf(a)===-1};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CONTAINS:d("ContextualConfigPredAssertions").assertNumberOfValues(f.length,1);g=function(a){return typeof a!=="string"?!1:a.indexOf(f[0])!==-1};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.REGEX:d("ContextualConfigPredAssertions").assertNumberOfValues(f.length,1);var h=c("ContextualConfigParseRegExp")(f[0]);g=function(a){return typeof a!=="string"?!1:h.test(a)};break;default:throw new Error(d("ContextualConfigConstants").ERROR.ILLEGAL_STRING_STRATEGY)}return function(a){return g(a)}}g["default"]=a}),98);
__d("ContextualConfigParseContextBuckets",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParsePredBoolean","ContextualConfigParsePredNumeric","ContextualConfigParsePredString","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},k=d("ContextualConfigValidators").isKey(d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY),l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isString(a)&&k(a.toUpperCase()),d("ContextualConfigConstants").ERROR.MISSING_BUCKET_STRATEGY)},m=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.ILLEGAL_BUCKET_VALUES)},n=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.MISSING_BUCKET_NAME)},o=function(a,b){var e=b.name;n(e);var f=b.strategy;l(f);b=b.values||[];m(b);switch(a){case d("ContextualConfigConstants").TYPE.BOOL:return c("ContextualConfigParsePredBoolean")(e,f);case d("ContextualConfigConstants").TYPE.FLOAT:return c("ContextualConfigParsePredNumeric")(e,f,b,!1);case d("ContextualConfigConstants").TYPE.INT:return c("ContextualConfigParsePredNumeric")(e,f,b,!0);case d("ContextualConfigConstants").TYPE.STRING:return c("ContextualConfigParsePredString")(e,f,b);default:throw new Error(d("ContextualConfigConstants").ERROR.UNKNOWN_BUCKET_DEFINITION)}},p=function(a,b){i(b);var c=b.name;n(c);return{name:c,pred:o(a,b)}};function a(a,b){j(b);return b.map(function(b){return p(a,b)})}g["default"]=a}),98);
__d("ContextualConfigParseContexts",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContextBuckets","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a)&&a.length>0,d("ContextualConfigConstants").ERROR.MISSING_CONTEXT_IN_CONFIG)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(a){i(a);var b=a.name,d=a.type;a=a.buckets;k(b);l(d);return{name:b,type:d,buckets:c("ContextualConfigParseContextBuckets")(d,a)}};function a(a){j(a);return a.map(m)}g["default"]=a}),98);
__d("ContextualConfigIsEqualParams",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c+=1){var d=a[c],e=b[c];if(d.name!==e.name||d.type!==e.type)return!1}return!0}f["default"]=a}),66);
__d("ContextualConfigParseResultParamValue",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseBoolean","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isString(a),d("ContextualConfigConstants").ERROR.INVALID_STRING)};function a(a,b){j(b);switch(a){case d("ContextualConfigConstants").TYPE.BOOL:return c("ContextualConfigParseBoolean")(b);case d("ContextualConfigConstants").TYPE.FLOAT:return(i||(i=c("ContextualConfigParseFloat")))(b);case d("ContextualConfigConstants").TYPE.INT:return c("ContextualConfigParseInteger")(b);case d("ContextualConfigConstants").TYPE.STRING:return b;default:throw new Error(d("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE)}}g["default"]=a}),98);
__d("ContextualConfigParseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_RESULTS)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},m=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},n=function(a,b){for(a of a)if(a.name===b)return a.type;throw new Error(d("ContextualConfigConstants").ERROR.UNDECLARED_OUTPUT_PARAM)},o=function(a){return function(b){k(b);var d=b.name;l(d);var e=n(a,d);m(e);b=(i||(i=c("ContextualConfigParseResultParamValue")))(e,b.value);return{name:d,type:e,value:b}}};function a(a,b){j(b);return b.map(o(a))}g["default"]=a}),98);
__d("ContextualConfigParseDenseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b){return(h||(h=c("ContextualConfigAssert")))(c("ContextualConfigIsEqualParams")(a,b),d("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)};function a(a,b){b=c("ContextualConfigParseResultParams")(a,b.map(function(b,c){return{name:a[c].name,value:b}}));i(a,b);return b}g["default"]=a}),98);
__d("ContextualConfigParseDenseDefaults",["ContextualConfigConstants","ContextualConfigParseDenseResultParams"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){try{return c("ContextualConfigParseDenseResultParams")(a,b)}catch(a){throw new Error(d("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)}}g["default"]=a}),98);
__d("ContextualConfigParseMonitors",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.BAD_MONITORED_CONTEXTS)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(a){i(a);var b=a.name;a=a.type;k(b);l(a);return{name:b,type:a}};function a(a){j(a);return a.map(m)}g["default"]=a}),98);
__d("ContextualConfigParseOutputParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_OUTPUTS_DEFINITION)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_OUTPUT_TYPE)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_OUTPUT_NAME)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(m(a),d("ContextualConfigConstants").ERROR.DUPLICATE_OUTPUT_NAME)},m=function(a){var b={};for(a of a){if(b[a.name])return!1;b[a.name]=!0}return!0},n=function(a){k(a.name);j(a.type);return a};function a(a){i(a);a=a.map(n);l(a);return a}g["default"]=a}),98);
__d("ContextualConfigParseVector",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_VECTOR)},k=function(a,b){return(h||(h=c("ContextualConfigAssert")))(a===b,d("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)},l=function(a,b){k(a.length,b.length);for(var d=0;d<a.length;d+=1){var e=a[d].type,f=b[d];(i||(i=c("ContextualConfigParseResultParamValue")))(e,f)}},m=function(a){return a.reduce(function(a,b){b=b.buckets;return a*b.length},1)};function a(a,b,c){j(c);b=m(b);var d=a.length;k(b*d,c.length);for(var e=0;e<b;e+=1){var f=e*d;l(a,c.slice(f,f+d))}return c}g["default"]=a}),98);
__d("ContextualConfigResolveContexts",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a,b){for(var c=0;c<a.length;c+=1){var d=a[c];try{if(d.pred(b))return[d.name,c]}catch(a){return null}}return null};function a(a,b,c){var e=null;a=a.map(function(a){var f=a.name,g={name:f};if(e!=null)return g;var i;c[f]!=null?i=c[f]:b[f]!=null?i=b[f]():i=null;g.value=i;if(a.buckets!=null){f=h(a.buckets,i);if(f==null){e=new Error(d("ContextualConfigConstants").ERROR.MISSING_BUCKET_MATCH);return g}a=f[0];i=f[1];g.bucketName=a;g.bucketIndex=i}return g});return[e,a]}g["default"]=a}),98);
__d("DenseContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContexts","ContextualConfigParseDenseDefaults","ContextualConfigParseDenseResultParams","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseVector","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONFIG)},j=function(a){var b=[],c=1;for(var d=a.length-1;d>=0;d-=1)b.push(c),c*=a[d].buckets.length;return b.reverse()},k=function(a,b,d,e){try{b=b.slice(d,d+a.length);return[null,c("ContextualConfigParseDenseResultParams")(a,b)]}catch(a){return[a,e]}},l=function(a,b,d){try{d=d.reduce(function(b,d,e){(h||(h=c("ContextualConfigAssert")))(e<a.length,"Auxillery index out of range.");return b+a[e]*d},0);return[null,d*b]}catch(a){return[a,-1]}};a=function(){function a(a,b){i(a);this.globalContextProviders=babelHelpers["extends"]({},b);b=c("ContextualConfigParseOutputParams")(a.outputs);var d=c("ContextualConfigParseContexts")(a.contexts);this.aux=j(d);this.contexts=d;this.defaults=c("ContextualConfigParseDenseDefaults")(b,a.vectorDefaults);this.monitors=a.monitors!=null?c("ContextualConfigParseMonitors")(a.monitors):[];this.outputs=b;this.vector=c("ContextualConfigParseVector")(b,d,a.vector)}var b=a.prototype;b.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.defaults,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}};b.unsafeResolve=function(a){var b=this.aux,e=this.globalContextProviders,f=this.contexts,g=this.defaults,h=this.monitors,i=this.outputs,j=this.vector;f=c("ContextualConfigResolveContexts")(f,e,a);var m=f[0];f=f[1];if(m!=null)return[m,g,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];m=l(b,i.length,d("ContextualConfigResolvedContextsUtils").getBucketIndices(f));b=m[0];m=m[1];if(b!=null)return[b,g,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];b=k(i,j,m,g);i=b[0];j=b[1];if(i!=null)return[i,j,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];m=c("ContextualConfigResolveContexts")(h,e,a);g=m[0];b=m[1];return g!=null?[g,j,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,j,f,b]};return a}();g["default"]=a}),98);
__d("MultiOutputResolvedContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseResultParams","ContextualConfigResolveContexts","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONFIG)};a=function(){function a(a,b){i(a);this.globalContextProviders=babelHelpers["extends"]({},b);b=c("ContextualConfigParseOutputParams")(a.outputs);this.monitors=a.monitors!=null?c("ContextualConfigParseMonitors")(a.monitors):[];this.values=c("ContextualConfigParseResultParams")(b,a.values)}var b=a.prototype;b.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.values,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}};b.unsafeResolve=function(a){var b=this.globalContextProviders,e=this.monitors,f=this.values;e=c("ContextualConfigResolveContexts")(e,b,a);b=e[0];a=e[1];return b!=null?[b,f,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,f,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,a]};return a}();g["default"]=a}),98);
__d("ContextualConfigMergePartialResultParams",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c={};for(b of b)c[b.name]=b;b=[];for(a of a){var d=c[a.name];b.push(d!=null&&d.name===a.name&&d.type===a.type?d:a)}return b}f["default"]=a}),66);
__d("ContextualConfigParseDefaults",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b){return(h||(h=c("ContextualConfigAssert")))(c("ContextualConfigIsEqualParams")(a,b),d("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)};function a(a,b){b=c("ContextualConfigParseResultParams")(a,b);i(a,b);return b}g["default"]=a}),98);
__d("ContextualConfigParseTable",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParams","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_BUCKET)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_VALUES)},m=function(a,b){j(b);var d=b.bucket;b=b.values;k(d);l(b);return{bucket:d,values:c("ContextualConfigParseResultParams")(a,b)}};function a(a,b){i(b);return b.reduce(function(b,c){c=m(a,c);b[c.bucket]=c.values;return b},{})}g["default"]=a}),98);
__d("TableContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigMergePartialResultParams","ContextualConfigParseContexts","ContextualConfigParseDefaults","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseTable","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=[],j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONFIG)};a=function(){function a(a,b){j(a);this.globalContextProviders=babelHelpers["extends"]({},b);b=c("ContextualConfigParseOutputParams")(a.outputs);this.contexts=c("ContextualConfigParseContexts")(a.contexts);this.defaults=c("ContextualConfigParseDefaults")(b,a.defaults);this.monitors=a.monitors!=null?c("ContextualConfigParseMonitors")(a.monitors):[];this.table=c("ContextualConfigParseTable")(b,a.table)}var b=a.prototype;b.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.defaults,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}};b.unsafeResolve=function(a){var b=this.globalContextProviders,e=this.contexts,f=this.defaults,g=this.monitors,h=this.table;e=c("ContextualConfigResolveContexts")(e,b,a);var j=e[0];e=e[1];if(j!=null)return[j,f,e,[]];j=d("ContextualConfigResolvedContextsUtils").getBucketNames(e).join(d("ContextualConfigConstants").BUCKET_DELIMITER);h=h[j]||i;j=c("ContextualConfigMergePartialResultParams")(f,h);f=c("ContextualConfigResolveContexts")(g,b,a);h=f[0];g=f[1];return h!=null?[h,j,e,[]]:[null,j,e,g]};return a}();g["default"]=a}),98);
__d("ContextualConfigParseConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators","DenseContextualConfig","MultiOutputResolvedContextualConfig","TableContextualConfig"],(function(a,b,c,d,e,f,g){"use strict";var h,i=[1],j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a)&&d("ContextualConfigValidators").isDefined(a.version),d("ContextualConfigConstants").ERROR.BAD_CONFIG)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(i.indexOf(a)!==-1,d("ContextualConfigConstants").ERROR.UNSUPPORTED_CONFIG_VERSION)};function a(a,b){j(a);k(a.version);switch(a.cctype){case d("ContextualConfigConstants").CONFIG_TYPE.DENSE:return new(c("DenseContextualConfig"))(a,b);case d("ContextualConfigConstants").CONFIG_TYPE.MULTI_OUTPUT_RESOLVED:return new(c("MultiOutputResolvedContextualConfig"))(a,b);case d("ContextualConfigConstants").CONFIG_TYPE.TABLE:return new(c("TableContextualConfig"))(a,b);default:throw new Error(d("ContextualConfigConstants").ERROR.UNKNOWN_CONFIG_TYPE)}}g["default"]=a}),98);
__d("ContextualConfigWarn",[],(function(a,b,c,d,e,f){"use strict";function a(a){}f["default"]=a}),66);
__d("ContextualConfigResult",["ContextualConfigConstants","ContextualConfigWarn"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a.reduce(function(a,b){var c=b.name;b=b.value;a[c]=b;return a},{}),this.$2=a}var b=a.prototype;b.get=function(a,b){try{a=this.$1[a];if(typeof a!==typeof b){c("ContextualConfigWarn")(d("ContextualConfigConstants").ERROR.REQUESTED_PARAM_NOT_FOUND);return b}return a}catch(a){c("ContextualConfigWarn")(a.message);return b}};b.getParams=function(){return this.$2};return a}();g["default"]=a}),98);
__d("ErrorContextualConfig",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.error=a}var b=a.prototype;b.resolve=function(a){return[this.error,d("ContextualConfigConstants").EMPTY_RESULT_PARAMS,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]};return a}();g["default"]=a}),98);
__d("ContextualConfig",["ContextualConfigCollateExposureData","ContextualConfigConstants","ContextualConfigExposureLogger","ContextualConfigParseConfig","ContextualConfigResult","ErrorContextualConfig","Random"],(function(a,b,c,d,e,f,g){"use strict";var h=1/d("ContextualConfigConstants").JSON_SUB_SAMPLE_RATE,i=1;a=function(){function a(a,b){b===void 0&&(b={}),this.isDebugLoggingEnabled=!1,this.$3=!1,this.$4=a,this.$2=b}var b=a.prototype;b.$5=function(){if(this.$1)return this.$1;var a=this.$2,b=this.$4;try{b=c("ContextualConfigParseConfig")(b,a)}catch(a){b=new(c("ErrorContextualConfig"))(a)}this.$1=b;return b};b.$6=function(a){var b=this.isDebugLoggingEnabled,e=this.$3;e=!e&&d("Random").random()<h;e&&(this.$3=!0);a=c("ContextualConfigCollateExposureData")(this.$4,a,e);e=c("ContextualConfigExposureLogger").createEvent(a);e.log(b)};b.resolve=function(a){a===void 0&&(a={});var b=this.$1||this.$5();b=b.resolve(a);this.$6(b);return new(c("ContextualConfigResult"))(b[i])};return a}();g["default"]=a}),98);
__d("DgwClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1755537");b=d("FalcoLoggerInternal").create("dgw_client",a);e=b;g["default"]=e}),98);
__d("DGWLoggingContext",["$InternalEnum","DgwClientFalcoEvent","ODS","Random"],(function(a,b,c,d,e,f,g){"use strict";var h;a="dgw_client";var i=b("$InternalEnum")({STREAM_GROUP_COMPONENT:"WebStreamGroup",GROUPED_STREAM_COMPONENT:"GroupedWebStream",WEBSOCKET_TRANSPORT_COMPONENT:"WebSocketTransport",ACK_MANAGER_COMPONENT:"WebStreamAckManager",CODEC_COMPONENT:"WebCodec",RAW_CLIENT:"RAWDGWClient",PINGER:"DGWPinger"}),j={VERBOSE:-1,INFO:0,WARNING:1,ERROR:2,FATAL:3};function k(a){switch(a){case i.GROUPED_STREAM_COMPONENT:case i.ACK_MANAGER_COMPONENT:return!0;default:return!1}}e=function(){function a(a,b,c,d,e,f,g){f===void 0&&(f=!1),g===void 0&&(g=!1),this.$5=""+a,this.$1=b,this.$4=c,this.$3=d,this.sgTransportId=e,this.$2=f,this.$6=g}a.bumpODSKey=function(a,b,c){c===void 0&&(c=1);if(!d("Random").coinflip(c))return;a=a+"."+b;(h||(h=d("ODS"))).bumpEntityKey(3589,"dgw_web_client",a,c)};var b=a.prototype;b.bumpODSKey=function(a,b,c){c===void 0&&(c=1);if(!d("Random").coinflip(c))return;a=this.$4+"."+a+"."+b;(h||(h=d("ODS"))).bumpEntityKey(3589,"dgw_web_client",a,c)};b.logEvent=function(a,b,c,d,e){d===void 0&&(d=!1),this.$2||this.$7(a,b,null,j.INFO,c,d,e)};b.$7=function(a,b,d,e,f,g,h){var i=this;g===void 0&&(g=!1);if(g&&!this.$6)return;(k(a)&&this.$1!=null||!k(a)&&this.sgTransportId!=null)&&c("DgwClientFalcoEvent").log(function(){return{event:b,logging_id:h!=null?h:i.$1,dgw_version:i.$5,message:d,severity:e,uuid:i.$3,dgw_component:a,extra_info:f,destination_tier:i.$4,sg_transport_id:i.sgTransportId,source:2}})};b.logError=function(a,b,c,d,e,f){e===void 0&&(e=!1),this.$2||this.$7(a,b,c,j.ERROR,d,e,f)};b.logWarn=function(a,b,c,d,e){e===void 0&&(e=!1),this.$2||this.$7(a,b,c,j.WARNING,d,e)};return a}();g.DGW_MODULE=a;g.DGWLoggingComponent=i;g.DGWLoggingContext=e}),98);
__d("DGWAckManager",["DGWLoggingContext","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(){function a(a,b,c){var d=this;this.$3=c;this.sendId=a;this.$2=b;this.handleAckReceived=function(){d.stopTracking(!0)};this.$1=window.setTimeout(function(){d.stopTracking(!1)},b)}var b=a.prototype;b.stopTracking=function(a){window.clearTimeout(this.$1),this.$3(a)};return a}();a=function(){function a(a){this.$1=new Map(),this.$2=a}var c=a.prototype;c.waitForAck=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_expected");var e=this.$1;try{var f=(yield new(h||(h=b("Promise")))(function(b,d){e.set(a,new i(a,c,b))}));f===!0?this.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Received ACK","sendId:"+a,!0):(this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_timeout"),this.$2.logWarn(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ACK timeout","Request "+a+" timed out after "+c+"ms"));e["delete"](a);return f}catch(b){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_error");e["delete"](a);throw b}});function c(b,c){return a.apply(this,arguments)}return c}();c.handleAckReceived=function(a){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received");var b=this.$1.get(a);if(b===void 0){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received.not_tracked");this.$2.logWarn(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"untracked ACK","Received ACK for ackId "+a+" which was not being tracked");return}b.handleAckReceived()};c.clearPendingAcks=function(){var a=this;this.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending acks","ACKs cleared size: "+this.$1.size);this.$1.forEach(function(b,c,e){a.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending ACK with ackId "+b.sendId,null,!0),b.stopTracking(!1),e["delete"](c)})};return a}();g.DGWAckManager=a}),98);
__d("DGWStream",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum").Mirrored(["ABNORMAL_CLOSURE","GOING_AWAY","SERVER_INTERNAL_ERROR","PREMATURE_CLOSE","UNKNOWN_ERROR","KEEPALIVE_TIMEOUT","TRANSPORT_CLOSED_BEFORE_STREAM_INIT","TRANSPORT_ESTABLISHMENT_ERROR","TRANSPORT_ESTABLISHMENT_TIMEOUT","ESTABLISHMENT_TIMEOUT","UNAUTHENTICATED","UNAUTHORIZED","REJECTED","BAD_REQUEST","DGW_SERVER_ERROR","ESTABLISHMENT_ERROR","ACK_TIMEOUT"]);function a(a){switch(a){case g.UNAUTHENTICATED:case g.UNAUTHORIZED:case g.REJECTED:case g.BAD_REQUEST:case g.UNKNOWN_ERROR:case g.SERVER_INTERNAL_ERROR:return!1;default:return!0}}f.StreamError=g;f.isRetryableError=a}),66);
__d("DGWCppBridge",[],(function(l,m,n,o,p,q){var r=function(){var l=typeof document!=="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(m){m=m||{};var m=typeof m!=="undefined"?m:{},n=function(){function m(){}function n(l,m){return function(){l.apply(m,arguments)}}function l(m){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if(typeof m!=="function")throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];t(m,this)}function o(m,n){while(m._state===3)m=m._value;if(m._state===0){m._deferreds.push(n);return}m._handled=!0;l._immediateFn(function(){var l=m._state===1?n.onFulfilled:n.onRejected;if(l===null){(m._state===1?p:q)(n.promise,m._value);return}var o;try{o=l(m._value)}catch(l){q(n.promise,l);return}p(n.promise,o)})}function p(m,o){try{if(o===m)throw new TypeError("A promise cannot be resolved with itself.");if(o&&(typeof o==="object"||typeof o==="function")){var p=o.then;if(o instanceof l){m._state=3;m._value=o;r(m);return}else if(typeof p==="function"){t(n(p,o),m);return}}m._state=1;m._value=o;r(m)}catch(l){q(m,l)}}function q(l,m){l._state=2,l._value=m,r(l)}function r(m){m._state===2&&m._deferreds.length===0&&l._immediateFn(function(){m._handled||l._unhandledRejectionFn(m._value)});for(var n=0,p=m._deferreds.length;n<p;n++)o(m,m._deferreds[n]);m._deferreds=null}function s(l,m,n){this.onFulfilled=typeof l==="function"?l:null,this.onRejected=typeof m==="function"?m:null,this.promise=n}function t(l,m){var n=!1;try{l(function(l){if(n)return;n=!0;p(m,l)},function(l){if(n)return;n=!0;q(m,l)})}catch(l){if(n)return;n=!0;q(m,l)}}l.prototype["catch"]=function(l){return this.then(null,l)};l.prototype.then=function(l,n){var p=new this.constructor(m);o(this,new s(l,n,p));return p};l.all=function(m){return new l(function(l,n){if(!Array.isArray(m))return n(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(m);if(o.length===0)return l([]);var p=o.length;function q(m,r){try{if(r&&(typeof r==="object"||typeof r==="function")){var s=r.then;if(typeof s==="function"){s.call(r,function(l){q(m,l)},n);return}}o[m]=r;--p===0&&l(o)}catch(l){n(l)}}for(var r=0;r<o.length;r++)q(r,o[r])})};l.resolve=function(m){return m&&typeof m==="object"&&m.constructor===l?m:new l(function(l){l(m)})};l.reject=function(m){return new l(function(l,n){n(m)})};l.race=function(m){return new l(function(n,o){if(!Array.isArray(m))return o(new TypeError("Promise.race accepts an array"));for(var p=0,q=m.length;p<q;p++)l.resolve(m[p]).then(n,o)})};l._immediateFn=typeof setImmediate==="function"&&function(l){setImmediate(l)}||function(l){setTimeout(l,0)};l._unhandledRejectionFn=function(l){typeof console!=="undefined"&&console};return l}(),o,s;m.ready=new n(function(l,m){o=l,s=m});var t={},u;for(u in m)Object.prototype.hasOwnProperty.call(m,u)&&(t[u]=m[u]);var v=[];(function(l,m){throw m});var w=!0,x=!1,y="";function z(l){return m.locateFile?m.locateFile(l,y):y+l}var A;(w||x)&&(x?y=self.location.href:typeof document!=="undefined"&&document.currentScript&&(y=document.currentScript.src),l&&(y=l),y.indexOf("blob:")!==0?y=y.substr(0,y.lastIndexOf("/")+1):y="",(function(l){try{var m=new XMLHttpRequest();m.open("GET",l,!1);m.send(null);return m.responseText}catch(n){m=ga(l);if(m)return fa(m);throw n}},x&&(A=function(l){try{var m=new XMLHttpRequest();m.open("GET",l,!1);m.responseType="arraybuffer";m.send(null);return new Uint8Array(m.response)}catch(n){m=ga(l);if(m)return m;throw n}}),function(l,m,n){var o=new XMLHttpRequest();o.open("GET",l,!0);o.responseType="arraybuffer";o.onload=function(){if(o.status==200||o.status==0&&o.response){m(o.response);return}var p=ga(l);if(p){m(p.buffer);return}n()};o.onerror=n;o.send(null)}),function(l){document.title=l});m.print||emptyFunction.bind(console);var B=m.printErr||emptyFunction.bind(console);for(u in t)Object.prototype.hasOwnProperty.call(t,u)&&(m[u]=t[u]);t=null;m.arguments&&(v=m.arguments);m.thisProgram&&m.thisProgram;m.quit&&m.quit;var C;m.wasmBinary&&(C=m.wasmBinary);m.noExitRuntime||!0;var D={Memory:function(l){this.buffer=new ArrayBuffer(l.initial*65536)},Module:function(l){},Instance:function(l,m){this.exports=function(l){function m(l){l.set=function(l,m){this[l]=m};l.get=function(l){return this[l]};return l}var n,o=new Uint8Array(123);for(var p=25;p>=0;--p)o[48+p]=52+p,o[65+p]=p,o[97+p]=26+p;o[43]=62;o[47]=63;function q(m,n,p){var q,r,l=0,s=n,t=p.length;n=n+(t*3>>2)-(p[t-2]=="=")-(p[t-1]=="=");for(;l<t;l+=4)q=o[p.charCodeAt(l+1)],r=o[p.charCodeAt(l+2)],m[s++]=o[p.charCodeAt(l)]<<2|q>>4,s<n&&(m[s++]=q<<4|r>>2),s<n&&(m[s++]=r<<6|o[p.charCodeAt(l+3)])}function r(l){q(n,1024,"U3Q5dHlwZV9pbmZvAAAAAOAEAAAABAAATjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAACAUAABgEAAAQBAAATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAACAUAAEgEAAA8BAAATjEwX19jeHhhYml2MTE3X19wYmFzZV90eXBlX2luZm9FAAAACAUAAHgEAAA8BAAATjEwX19jeHhhYml2MTE5X19wb2ludGVyX3R5cGVfaW5mb0UACAUAAKgEAACcBAAAAAAAAGwEAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAAAAABQBQAAAQAAAAkAAAADAAAABAAAAAUAAAAKAAAACwAAAAwAAABOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UAAAAACAUAACgFAABsBA=="),q(n,1372,"gAkQ")}function s(l){var o=l.a,p=o.buffer;o.grow=xa;var q=new Int8Array(p),s=new Int16Array(p),t=new Int32Array(p),u=new Uint8Array(p),v=new Uint16Array(p),w=new Uint32Array(p);new Float32Array(p);new Float64Array(p);var x=Math.imul;Math.fround;Math.abs;var y=Math.clz32;Math.min;Math.max;Math.floor;Math.ceil;Math.trunc;Math.sqrt;l.abort;NaN;Infinity;var z=l.b,A=1051008,B;function C(o,p,l,r,m,n){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;n=n|0;var y=0,z=0,B;y=A-80|0;A=y;t[y+72>>2]=o;t[y+68>>2]=p;t[y+64>>2]=l;t[y+60>>2]=r;t[y+56>>2]=m;t[y+52>>2]=n;a:{if(t[y+52>>2]?!t[y+56>>2]|(!t[y+72>>2]|!t[y+68>>2]|(!t[y+64>>2]|!t[y+60>>2])):1){t[y+76>>2]=5;break a}t[t[y+64>>2]>>2]=0;t[t[y+60>>2]>>2]=0;p=t[y+68>>2];l=t[y+56>>2];r=t[y+52>>2];o=A+-64|0;A=o;t[o+56>>2]=t[y+72>>2];t[o+52>>2]=p;t[o+48>>2]=l;t[o+44>>2]=r;t[o+40>>2]=0;t[o+36>>2]=t[o+56>>2];b:{c:{d:{while(1){if(!t[o+52>>2])break c;t[o+32>>2]=t[o+36>>2];q[o+31|0]=u[t[o+36>>2]];t[o+52>>2]=t[o+52>>2]-1;t[o+36>>2]=t[o+36>>2]+1;if(u[o+31|0]!=10?u[o+31|0]==2|u[o+31|0]==4|u[o+31|0]==9:1){t[o+40>>2]=t[o+40>>2]+1;continue}t[o+24>>2]=1;if(V(u[o+31|0])&1){z=o,B=X(u[o+31|0])&1,q[z+23|0]=B;t[o+16>>2]=q[o+23|0]&1?1:2;if(w[o+52>>2]<w[o+16>>2]){t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[o+52>>2]=t[o+52>>2]-t[o+16>>2];t[o+24>>2]=t[o+16>>2]+t[o+24>>2];t[o+36>>2]=t[o+16>>2]+t[o+36>>2];if(!(u[o+31|0]!=14?u[o+31|0]!=8:0)){t[o+40>>2]=t[o+40>>2]+1;continue}}if(w[o+52>>2]<3)break d;t[o+12>>2]=0;p=t[o+36>>2];l=u[p|0]|u[p+1|0]<<8;q[o+12|0]=l;q[o+13|0]=l>>>8;q[o+14|0]=u[p+2|0];t[o+52>>2]=t[o+52>>2]-3;t[o+24>>2]=t[o+24>>2]+3;t[o+36>>2]=t[o+36>>2]+3;if(w[o+12>>2]<=w[o+52>>2]){t[o+40>>2]=t[o+40>>2]+1;t[o+36>>2]=t[o+12>>2]+t[o+36>>2];t[o+52>>2]=t[o+52>>2]-t[o+12>>2];continue}break}t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[t[o+44>>2]>>2]=t[o+52>>2]}t[o+60>>2]=t[o+40>>2];A=o- -64|0;t[y+48>>2]=t[o+60>>2];if(!t[y+48>>2]){t[y+76>>2]=0;break a}z=y,B=D(x(t[y+48>>2],20)),t[z+44>>2]=B;if(!t[y+44>>2]){t[y+76>>2]=3;break a}t[y+40>>2]=t[y+44>>2];t[y+36>>2]=t[y+72>>2];t[y+32>>2]=t[y+68>>2]-t[t[y+52>>2]>>2];t[y+28>>2]=0;while(1){if(w[y+28>>2]<w[y+48>>2]){if(w[y+32>>2]<1){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=1;break a}q[y+27|0]=u[t[y+36>>2]];t[y+36>>2]=t[y+36>>2]+1;t[y+32>>2]=t[y+32>>2]-1;e:{if(!u[y+27|0]|u[y+27|0]==1|(u[y+27|0]==2|u[y+27|0]==3)|(u[y+27|0]==4|u[y+27|0]==9|u[y+27|0]==10))break e;if(V(u[y+27|0])&1)break e;O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=6;break a}o=t[y+40>>2];t[o>>2]=u[y+27|0]&15|t[o>>2]&-16;f:{if(u[y+27|0]!=10?u[y+27|0]==2|u[y+27|0]==4|u[y+27|0]==9:1){o=t[y+40>>2];t[o>>2]=t[o>>2]&-268435441;t[y+40>>2]=t[y+40>>2]+20;break f}if(V(u[y+27|0])&1){o=A-48|0;A=o;t[o+40>>2]=t[y+40>>2];t[o+36>>2]=y+36;t[o+32>>2]=y+32;g:{if(!(V(t[t[o+40>>2]>>2]&15)&1)){t[o+44>>2]=1;break g}z=o,B=X(t[t[o+40>>2]>>2]&15)&1,q[z+31|0]=B;t[o+24>>2]=q[o+31|0]&1?1:2;if(w[t[o+32>>2]>>2]<w[o+24>>2]){t[o+44>>2]=1;break g}ba(t[o+40>>2]+4|0,t[t[o+36>>2]>>2],t[o+24>>2]);p=t[o+36>>2];t[p>>2]=t[o+24>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+24>>2];if((t[t[o+40>>2]>>2]&15)==8){p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==14){p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441;t[o+44>>2]=0;break g}if(w[t[o+32>>2]>>2]<3){t[o+44>>2]=11;break g}t[o+20>>2]=0;p=t[t[o+36>>2]>>2];l=u[p|0]|u[p+1|0]<<8;q[o+20|0]=l;q[o+21|0]=l>>>8;q[o+22|0]=u[p+2|0];p=t[o+36>>2];t[p>>2]=t[p>>2]+3;p=t[o+32>>2];t[p>>2]=t[p>>2]-3;p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441|(t[o+20>>2]&16777215)<<4;if(w[t[o+32>>2]>>2]<w[o+20>>2]){t[o+44>>2]=11;break g}if((t[t[o+40>>2]>>2]&15)==15){t[t[o+40>>2]+12>>2]=t[o+20>>2];p=D(t[o+20>>2]);t[t[o+40>>2]+8>>2]=p;if(!t[t[o+40>>2]+8>>2]){t[o+44>>2]=3;break g}ba(t[t[o+40>>2]+8>>2],t[t[o+36>>2]>>2],t[o+20>>2]);p=t[o+36>>2];t[p>>2]=t[o+20>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+20>>2];t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==5){t[t[o+40>>2]+12>>2]=t[o+20>>2];p=D(t[o+20>>2]);t[t[o+40>>2]+8>>2]=p;if(!t[t[o+40>>2]+8>>2]){t[o+44>>2]=3;break g}ba(t[t[o+40>>2]+8>>2],t[t[o+36>>2]>>2],t[o+20>>2]);p=t[o+36>>2];t[p>>2]=t[o+20>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+20>>2];t[o+44>>2]=0;break g}h:{if(!((t[t[o+40>>2]>>2]&15)!=6?(t[t[o+40>>2]>>2]&15)!=7:0)){z=o,B=Q(t[o+36>>2],t[o+32>>2],o+19|0,o+18|0),t[z+12>>2]=B;if(t[o+12>>2]){t[o+44>>2]=t[o+12>>2];break g}break h}if(!((t[t[o+40>>2]>>2]&15)!=13?(t[t[o+40>>2]>>2]&15)!=12:0)){l=t[o+32>>2];p=A-32|0;t[p+24>>2]=t[o+36>>2];t[p+20>>2]=l;t[p+16>>2]=o+19;t[p+12>>2]=o+16;s[p+10>>1]=0;i:{if(w[t[p+20>>2]>>2]<2){t[p+28>>2]=1;break i}l=t[t[p+24>>2]>>2];l=u[l|0]|u[l+1|0]<<8;q[p+10|0]=l;q[p+11|0]=l>>>8;l=t[p+24>>2];t[l>>2]=t[l>>2]+2;l=t[p+20>>2];t[l>>2]=t[l>>2]-2;q[t[p+16>>2]]=(v[p+10>>1]&32768)==32768;s[t[p+12>>2]>>1]=v[p+10>>1]&32767;t[p+28>>2]=0}t[o+12>>2]=t[p+28>>2];if(t[o+12>>2]){t[o+44>>2]=t[o+12>>2];break g}}}if((t[t[o+40>>2]>>2]&15)==12){p=t[o+40>>2];s[p+8>>1]=s[p+8>>1]&1|v[o+16>>1]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==7){p=t[o+40>>2];q[p+8|0]=q[p+8|0]&1|u[o+18|0]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==13){l=t[o+32>>2];r=t[o+20>>2];m=t[o+40>>2]+12|0;n=t[o+40>>2];p=A-32|0;A=p;t[p+24>>2]=t[o+36>>2];t[p+20>>2]=l;t[p+16>>2]=r;t[p+12>>2]=m;t[p+8>>2]=n+16;j:{if(w[p+16>>2]<2){t[p+28>>2]=9;break j}t[t[p+8>>2]>>2]=t[p+16>>2]-2;if(w[t[p+20>>2]>>2]<w[t[p+8>>2]>>2]){t[p+28>>2]=1;break j}l=D(t[t[p+8>>2]>>2]);t[t[p+12>>2]>>2]=l;if(!t[t[p+12>>2]>>2]){t[p+28>>2]=3;break j}ba(t[t[p+12>>2]>>2],t[t[p+24>>2]>>2],t[t[p+8>>2]>>2]);l=t[p+24>>2];t[l>>2]=t[t[p+8>>2]>>2]+t[l>>2];l=t[p+20>>2];t[l>>2]=t[l>>2]-t[t[p+8>>2]>>2];t[p+28>>2]=0}A=p+32|0;t[o+8>>2]=t[p+28>>2];if(t[o+8>>2]){t[o+44>>2]=t[o+8>>2];break g}p=t[o+40>>2];s[p+8>>1]=q[o+19|0]&1|v[p+8>>1]&65534;p=t[o+40>>2];s[p+8>>1]=s[p+8>>1]&1|v[o+16>>1]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==6){z=o,B=M(t[o+36>>2],t[o+32>>2],t[o+20>>2],t[o+40>>2]+12|0,t[o+40>>2]+16|0),t[z+4>>2]=B;if(t[o+4>>2]){t[o+44>>2]=t[o+4>>2];break g}p=t[o+40>>2];q[p+8|0]=q[o+19|0]&1|u[p+8|0]&254;p=t[o+40>>2];q[p+8|0]=q[p+8|0]&1|u[o+18|0]<<1;t[o+44>>2]=0;break g}t[o+44>>2]=1}A=o+48|0;t[y+20>>2]=t[o+44>>2];if(!t[y+20>>2]){t[y+40>>2]=t[y+40>>2]+20;break f}O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+20>>2];break a}t[y+16>>2]=0;if(w[y+32>>2]<3){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=1;break a}o=t[y+36>>2];p=u[o|0]|u[o+1|0]<<8;q[y+16|0]=p;q[y+17|0]=p>>>8;q[y+18|0]=u[o+2|0];t[y+36>>2]=t[y+36>>2]+3;t[y+32>>2]=t[y+32>>2]-3;if(!(t[y+16>>2]==1|u[y+27|0]!=1)){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=7;break a}o=t[y+40>>2];t[o>>2]=t[o>>2]&-268435441|(t[y+16>>2]&16777215)<<4;if(u[y+27|0]==3){if(t[y+16>>2]!=1){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=10;break a}q[y+15|0]=0;if(w[y+32>>2]<1){J(t[y+44>>2]);t[y+76>>2]=1;break a}q[y+15|0]=u[t[y+36>>2]];t[y+36>>2]=t[y+36>>2]+1;t[y+32>>2]=t[y+32>>2]-1;k:{if(u[y+15|0]<=4){q[t[y+40>>2]+4|0]=u[y+15|0];break k}q[t[y+40>>2]+4|0]=4}t[y+40>>2]=t[y+40>>2]+20;break f}z=y,B=Q(y+36|0,y+32|0,y+14|0,y+13|0),t[z+8>>2]=B;if(t[y+8>>2]){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+8>>2];break a}if(u[y+27|0]==1){o=t[y+40>>2];q[o+4|0]=q[o+4|0]&1|u[y+13|0]<<1;t[y+40>>2]=t[y+40>>2]+20;break f}if(!u[y+27|0]){z=y,B=M(y+36|0,y+32|0,t[y+16>>2],t[y+40>>2]+8|0,t[y+40>>2]+12|0),t[z+4>>2]=B;if(t[y+4>>2]){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+4>>2];break a}o=t[y+40>>2];q[o+4|0]=q[y+14|0]&1|u[o+4|0]&254;o=t[y+40>>2];q[o+4|0]=q[o+4|0]&1|u[y+13|0]<<1;t[y+40>>2]=t[y+40>>2]+20}}t[y+28>>2]=t[y+28>>2]+1;continue}break}if(t[y+32>>2]){O(t[y+44>>2],t[y+48>>2]);t[y+76>>2]=1;break a}t[t[y+64>>2]>>2]=t[y+44>>2];t[t[y+60>>2]>>2]=t[y+48>>2];t[y+76>>2]=0}A=y+80|0;return t[y+76>>2]}function D(o){var q=0,l=0,r=0,m=0,n=0,s=0,u=0,v,w=0,x,p;w=8;a:{b:{if(o>>>0>4294967239)break b;while(1){w=w>>>0>8?w:8;l=t[603];n=l;m=t[602];u=m;o=o>>>0>8?o+3&-4:8;c:{if(o>>>0<=127){s=(o>>>3|0)-1|0;break c}r=y(o);s=((o>>>29-r^4)-(r<<2)|0)+110|0;if(o>>>0<=4095)break c;r=((o>>>30-r^2)-(r<<1)|0)+71|0;s=r>>>0<63?r:63}q=s;r=q&31;(q&63)>>>0>=32?(q=0,l=l>>>r|0):(q=l>>>r|0,l=((1<<r)-1&l)<<32-r|u>>>r);r=q;if(l|q){while(1){n=l;q=r;d:{if(q|l){m=q-1|0;v=m+1|0;u=m;m=l-1|0;u=(m|0)!=-1?v:u;m=y(l^m)+32|0;l=y(q^u);l=(l|0)==32?m:l;q=63-l|0;0-(l>>>0>63)|0;break d}q=64}m=q;q=m;l=q&31;(q&63)>>>0>=32?(q=0,u=r>>>l|0):(q=r>>>l|0,u=((1<<l)-1&r)<<32-l|n>>>l);r=q;s=m+s|0;n=s<<4;q=t[n+1384>>2];m=n+1376|0;e:{if((q|0)!=(m|0)){l=I(q,w,o);if(l)break b;l=t[q+4>>2];t[l+8>>2]=t[q+8>>2];t[t[q+8>>2]+4>>2]=l;t[q+8>>2]=m;l=n+1380|0;t[q+4>>2]=t[l>>2];t[l>>2]=q;t[t[q+4>>2]+8>>2]=q;s=s+1|0;l=(r&1)<<31|u>>>1;r=r>>>1|0;break e}x=t[603];q=s;v=q&63;l=v;n=l&31;l>>>0>=32?(l=0,m=-1>>>n|0):(l=-1>>>n|0,m=(1<<n)-1<<32-n|-1>>>n);m=m&-2;n=v&31;v>>>0>=32?(l=m<<n,v=0):(l=(1<<n)-1&m>>>32-n|l<<n,v=m<<n);n=l;m=0-q&63;l=m;q=l&31;l>>>0>=32?(l=-1<<q,q=0):(l=(1<<q)-1&-1>>>32-q|-1<<q,q=-1<<q);p=q&-2;q=m&31;m>>>0>=32?(m=0,q=l>>>q|0):(m=l>>>q|0,q=((1<<q)-1&l)<<32-q|p>>>q);l=q|v;B=n|m;t[602]=t[602]&l;t[603]=B&x;l=u^1}if(l|r)continue;break}m=t[602];n=t[603]}f:{if(n|m){r=y(n);r=63-((r|0)==32?y(m)+32|0:r)<<4;q=r+1376|0;r=t[r+1384>>2];g:{if(!n&m>>>0<1073741824)break g;s=98;if((q|0)==(r|0))break g;while(1){l=I(r,w,o);if(l)break b;r=t[r+8>>2];if(!s)break g;s=s-1|0;if((q|0)!=(r|0))continue;break}}if(G(o+48|0))break f;if(!r|(q|0)==(r|0))break a;while(1){l=I(r,w,o);if(l)break b;r=t[r+8>>2];if((q|0)!=(r|0))continue;break}break a}if(!G(o+48|0))break a}l=0;if(o>>>0>4294967239)break b;r=w;q=0;while(1){s=q;if(r){r=r-1&r;q=q+1|0;continue}break}if(s>>>0<=1)continue;break}}return l}return 0}function E(o,p,l,r,m,n,x){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;n=n|0;x=x|0;var y=0,z=0;y=A-32|0;A=y;s[y+26>>1]=o;t[y+20>>2]=p;t[y+16>>2]=l;q[y+15|0]=r;s[y+12>>1]=m;t[y+8>>2]=n;t[y+4>>2]=x;a:{if(!(!(q[y+15|0]&1)|v[y+12>>1]<=32767)){t[y+28>>2]=4;break a}p=t[y+20>>2];l=t[y+16>>2];r=t[y+8>>2];m=t[y+4>>2];n=q[y+15|0]&1;o=A+-64|0;A=o;t[o+56>>2]=y+26;t[o+52>>2]=p;t[o+48>>2]=l;t[o+44>>2]=r;t[o+40>>2]=m;q[o+39|0]=2;q[o+38|0]=13;t[o+32>>2]=y+12;q[o+31|0]=n;q[o+30|0]=2;b:{c:{if(!(!t[o+52>>2]|(!t[o+44>>2]|!t[o+40>>2]))&&w[o+48>>2]<=16777215)break c;t[o+60>>2]=5;break b}t[o+24>>2]=t[o+48>>2]+(u[o+39|0]+(u[o+30|0]+4|0)|0);z=o,x=D(t[o+24>>2]),t[z+20>>2]=x;if(!t[o+20>>2]){t[o+60>>2]=3;break b}t[o+16>>2]=t[o+20>>2];q[t[o+16>>2]]=u[o+38|0];t[o+16>>2]=t[o+16>>2]+1;ba(t[o+16>>2],t[o+56>>2],u[o+30|0]);t[o+16>>2]=u[o+30|0]+t[o+16>>2];t[o+12>>2]=u[o+39|0]+t[o+48>>2];if(w[o+12>>2]<w[o+48>>2]){J(t[o+20>>2]);t[o+60>>2]=9;break b}p=t[o+16>>2];l=u[o+12|0]|u[o+13|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+14|0];t[o+16>>2]=t[o+16>>2]+3;if(q[o+31|0]&1)d:{if(u[o+38|0]==6){p=t[o+32>>2];q[p|0]=u[p|0]|128;break d}e:{if(u[o+38|0]==13){p=t[o+32>>2];s[p>>1]=v[p>>1]|32768;break e}J(t[o+20>>2]);t[o+60>>2]=1;break b}}ba(t[o+16>>2],t[o+32>>2],u[o+39|0]);t[o+16>>2]=u[o+39|0]+t[o+16>>2];ba(t[o+16>>2],t[o+52>>2],t[o+48>>2]);t[t[o+44>>2]>>2]=t[o+20>>2];t[t[o+40>>2]>>2]=t[o+24>>2];t[o+60>>2]=0}A=o- -64|0;t[y+28>>2]=t[o+60>>2]}A=y+32|0;return t[y+28>>2]}function F(o,p,l,r,m){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;var n=0,v=0;n=A-32|0;A=n;s[n+30>>1]=o;t[n+24>>2]=p;t[n+20>>2]=l;t[n+16>>2]=r;t[n+12>>2]=m;p=t[n+24>>2];l=t[n+20>>2];r=t[n+16>>2];m=t[n+12>>2];o=A-48|0;A=o;t[o+40>>2]=n+30;t[o+36>>2]=p;t[o+32>>2]=l;t[o+28>>2]=r;t[o+24>>2]=m;q[o+23|0]=2;q[o+22|0]=15;a:{if(!(t[o+24>>2]?t[o+28>>2]:0)){t[o+44>>2]=5;break a}t[t[o+28>>2]>>2]=0;t[t[o+24>>2]>>2]=0;if(!(w[o+32>>2]<=16777215?t[o+36>>2]:0)){t[o+44>>2]=5;break a}t[o+16>>2]=t[o+32>>2]+(u[o+23|0]+4|0);v=o,r=D(t[o+16>>2]),t[v+12>>2]=r;if(!t[o+12>>2]){t[o+44>>2]=3;break a}t[o+8>>2]=t[o+12>>2];q[t[o+8>>2]]=u[o+22|0];t[o+8>>2]=t[o+8>>2]+1;ba(t[o+8>>2],t[o+40>>2],u[o+23|0]);t[o+8>>2]=u[o+23|0]+t[o+8>>2];p=t[o+8>>2];l=u[o+32|0]|u[o+33|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+34|0];t[o+8>>2]=t[o+8>>2]+3;ba(t[o+8>>2],t[o+36>>2],t[o+32>>2]);t[o+8>>2]=t[o+32>>2]+t[o+8>>2];t[t[o+28>>2]>>2]=t[o+12>>2];t[t[o+24>>2]>>2]=t[o+16>>2];t[o+44>>2]=0}A=o+48|0;A=n+32|0;return t[o+44>>2]}function G(o){var p=0,l,r=0,m=0,n,s=0;r=t[343];l=o+3&-4;p=r+l|0;a:{b:{if(p>>>0<=r>>>0?l:0)break b;if(p>>>0>wa()<<16>>>0&&!(z(p|0)|0))break b;t[343]=p;break a}t[604]=48;r=-1}if((r|0)!=-1){l=o+r|0;p=l-16|0;t[p+12>>2]=16;t[p>>2]=16;o=t[600];o?s=t[o+8>>2]:s=0;c:{d:{if((s|0)==(r|0)){m=r-(t[r-4>>2]&-2)|0;n=t[m-4>>2];t[o+8>>2]=l;o=m-(n&-2)|0;l=-16;if(!(q[(o+t[o>>2]|0)-4|0]&1))break d;l=t[o+4>>2];t[l+8>>2]=t[o+8>>2];t[t[o+8>>2]+4>>2]=l;p=p-o|0;t[o>>2]=p;break c}t[r+12>>2]=16;t[r>>2]=16;t[r+8>>2]=l;t[r+4>>2]=o;t[600]=r;l=16}o=r+l|0;p=p-o|0;t[o>>2]=p}t[((p&-4)+o|0)-4>>2]=p|1;s=o;m=t[o>>2]-8|0;e:{if(m>>>0<=127){p=(m>>>3|0)-1|0;break e}n=y(m);p=((m>>>29-n^4)-(n<<2)|0)+110|0;if(m>>>0<=4095)break e;p=((m>>>30-n^2)-(n<<1)|0)+71|0;p=p>>>0<63?p:63}l=p<<4;t[s+4>>2]=l+1376;l=l+1384|0;t[o+8>>2]=t[l>>2];t[l>>2]=o;t[t[o+8>>2]+4>>2]=o;l=t[603];o=p&31;(p&63)>>>0>=32?(p=1<<o,o=0):(p=(1<<o)-1&1>>>32-o,o=1<<o);t[602]=o|t[602];t[603]=p|l}return(r|0)!=-1}function la(o,p,l,r){o=o|0;p=p|0;l=l|0;r=r|0;var m=0,n=0;m=A-16|0;A=m;s[m+10>>1]=o;s[m+8>>1]=p;t[m+4>>2]=l;t[m>>2]=r;a:{if(v[m+8>>1]>32767){t[m+12>>2]=4;break a}p=t[m+4>>2];l=t[m>>2];o=A-48|0;A=o;t[o+40>>2]=m+10;t[o+36>>2]=p;t[o+32>>2]=l;q[o+31|0]=2;q[o+30|0]=12;t[o+24>>2]=m+8;q[o+23|0]=2;b:{if(!(t[o+32>>2]?t[o+36>>2]:0)){t[o+44>>2]=5;break b}t[o+16>>2]=u[o+31|0]+(u[o+23|0]+4|0);n=o,r=D(t[o+16>>2]),t[n+12>>2]=r;if(!t[o+12>>2]){t[o+44>>2]=3;break b}t[o+8>>2]=t[o+12>>2];q[t[o+8>>2]]=u[o+30|0];t[o+8>>2]=t[o+8>>2]+1;ba(t[o+8>>2],t[o+40>>2],u[o+23|0]);t[o+8>>2]=u[o+23|0]+t[o+8>>2];t[o+4>>2]=u[o+31|0];p=t[o+8>>2];l=u[o+4|0]|u[o+5|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+6|0];t[o+8>>2]=t[o+8>>2]+3;ba(t[o+8>>2],t[o+24>>2],u[o+31|0]);t[t[o+32>>2]>>2]=t[o+16>>2];t[t[o+36>>2]>>2]=t[o+12>>2];t[o+44>>2]=0}A=o+48|0;t[m+12>>2]=t[o+44>>2]}A=m+16|0;return t[m+12>>2]}function H(o,p,l){o=o|0;p=p|0;l=l|0;var q=0,m=0,n=0,r=0,s=0;n=A+-64|0;A=n;m=1;a:{if(R(o,p,0))break a;m=0;if(!p)break a;q=A+-64|0;A=q;m=t[p>>2];r=t[m-4>>2];s=t[m-8>>2];t[q+20>>2]=0;t[q+16>>2]=1084;t[q+12>>2]=p;t[q+8>>2]=1132;m=0;ca(q+24|0,39);p=p+s|0;b:{if(R(r,1132,0)){t[q+56>>2]=1;ka[t[t[r>>2]+20>>2]](r,q+8|0,p,p,1,0);m=t[q+32>>2]==1?p:0;break b}ka[t[t[r>>2]+24>>2]](r,q+8|0,p,1,0);c:switch(t[q+44>>2]){case 0:m=t[q+48>>2]==1?t[q+36>>2]==1?t[q+40>>2]==1?t[q+28>>2]:0:0:0;break b;case 1:break c;default:break b}if(t[q+48>>2]|t[q+36>>2]!=1|t[q+40>>2]!=1?t[q+32>>2]!=1:0)break b;m=t[q+24>>2]}A=q- -64|0;p=m;m=0;if(!p)break a;ca(n+8|4,52);t[n+56>>2]=1;t[n+20>>2]=-1;t[n+16>>2]=o;t[n+8>>2]=p;ka[t[t[p>>2]+28>>2]](p,n+8|0,t[l>>2],1);o=t[n+32>>2];(o|0)==1&&(t[l>>2]=t[n+24>>2]);m=(o|0)==1}o=m;A=n- -64|0;return o|0}function I(o,p,l){var q=0,m,n=0,r=0;q=o+4|0;m=(q+p|0)-1&0-p;p=t[o>>2];if(m+l>>>0<=(p+o|0)-4>>>0){n=t[o+4>>2];t[n+8>>2]=t[o+8>>2];t[t[o+8>>2]+4>>2]=n;(q|0)!=(m|0)&&(m=m-q|0,n=o-(t[o-4>>2]&-2)|0,q=m+t[n>>2]|0,t[n>>2]=q,t[(n+(q&-4)|0)-4>>2]=q,o=o+m|0,p=p-m|0,t[o>>2]=p);a:{if(l+24>>>0<=p>>>0){q=(o+l|0)+8|0;p=(p-l|0)-8|0;t[q>>2]=p;t[(q+(p&-4)|0)-4>>2]=p|1;r=q;n=t[q>>2]-8|0;b:{if(n>>>0<=127){m=(n>>>3|0)-1|0;break b}p=y(n);m=((n>>>29-p^4)-(p<<2)|0)+110|0;if(n>>>0<=4095)break b;p=((n>>>30-p^2)-(p<<1)|0)+71|0;m=p>>>0<63?p:63}p=m;m=p<<4;t[r+4>>2]=m+1376;m=m+1384|0;t[q+8>>2]=t[m>>2];t[m>>2]=q;t[t[q+8>>2]+4>>2]=q;m=t[603];q=p&31;(p&63)>>>0>=32?(p=1<<q,r=0):(p=(1<<q)-1&1>>>32-q,r=1<<q);t[602]=r|t[602];t[603]=p|m;p=l+8|0;t[o>>2]=p;t[((p&-4)+o|0)-4>>2]=p;break a}t[(o+p|0)-4>>2]=p}o=o+4|0}else o=0;return o}function J(o){var p=0,l,q=0,m,n=0;if(o){l=o-4|0;m=t[l>>2];q=m;p=l;n=t[o-8>>2];o=n&-2;(o|0)!=(n|0)&&(p=l-o|0,q=t[p+4>>2],t[q+8>>2]=t[p+8>>2],t[t[p+8>>2]+4>>2]=q,q=o+m|0);o=l+m|0;l=t[o>>2];(l|0)!=t[(o+l|0)-4>>2]&&(m=t[o+4>>2],t[m+8>>2]=t[o+8>>2],t[t[o+8>>2]+4>>2]=m,q=q+l|0);t[p>>2]=q;t[((q&-4)+p|0)-4>>2]=q|1;n=p;q=t[p>>2]-8|0;a:{if(q>>>0<=127){o=(q>>>3|0)-1|0;break a}m=y(q);o=((q>>>29-m^4)-(m<<2)|0)+110|0;if(q>>>0<=4095)break a;o=((q>>>30-m^2)-(m<<1)|0)+71|0;o=o>>>0<63?o:63}l=o<<4;t[n+4>>2]=l+1376;l=l+1384|0;t[p+8>>2]=t[l>>2];t[l>>2]=p;t[t[p+8>>2]+4>>2]=p;l=t[603];p=o&31;(o&63)>>>0>=32?(o=1<<p,p=0):(o=(1<<p)-1&1>>>32-p,p=1<<p);t[602]=p|t[602];t[603]=o|l}}function K(n,o,l){n=n|0;o=o|0;l=l|0;var p=0,m=0;p=A-48|0;A=p;t[p+40>>2]=n;t[p+36>>2]=o;t[p+32>>2]=l;a:{if(!(t[p+32>>2]?t[p+36>>2]:0)){t[p+44>>2]=5;break a}if(w[p+40>>2]>4){t[p+44>>2]=8;break a}t[p+28>>2]=5;m=p,l=D(t[p+28>>2]),t[m+24>>2]=l;if(!t[p+24>>2]){t[p+44>>2]=3;break a}t[p+20>>2]=t[p+24>>2];q[p+19|0]=3;q[t[p+20>>2]]=u[p+19|0];t[p+20>>2]=t[p+20>>2]+1;t[p+12>>2]=1;n=t[p+20>>2];o=u[p+12|0]|u[p+13|0]<<8;q[n|0]=o;q[n+1|0]=o>>>8;q[n+2|0]=u[p+14|0];t[p+20>>2]=t[p+20>>2]+3;q[p+11|0]=t[p+40>>2];q[t[p+20>>2]]=u[p+11|0];t[t[p+36>>2]>>2]=t[p+24>>2];t[t[p+32>>2]>>2]=t[p+28>>2];t[p+44>>2]=0}A=p+48|0;return t[p+44>>2]}function L(n,o,l,p,m){n=n|0;o=o|0;l=l|0;p=p|0;m=m|0;if(R(n,t[o+8>>2],m)){da(o,l,p);return}a:{if(R(n,t[o>>2],m)){if(!(t[o+20>>2]!=(l|0)?t[o+16>>2]!=(l|0):0)){if((p|0)!=1)break a;t[o+32>>2]=1;return}t[o+32>>2]=p;b:{if(t[o+44>>2]==4)break b;s[o+52>>1]=0;n=t[n+8>>2];ka[t[t[n>>2]+20>>2]](n,o,l,l,1,m);if(u[o+53|0]){t[o+44>>2]=3;if(!u[o+52|0])break b;break a}t[o+44>>2]=4}t[o+20>>2]=l;t[o+40>>2]=t[o+40>>2]+1;if(t[o+36>>2]!=1|t[o+24>>2]!=2)break a;q[o+54|0]=1;return}n=t[n+8>>2];ka[t[t[n>>2]+24>>2]](n,o,l,p,m)}}function M(o,p,l,q,m){var n=0;n=A-32|0;A=n;t[n+24>>2]=o;t[n+20>>2]=p;t[n+16>>2]=l;t[n+12>>2]=q;t[n+8>>2]=m;a:{if(w[n+16>>2]<1){t[n+28>>2]=9;break a}t[t[n+8>>2]>>2]=t[n+16>>2]-1;if(w[t[n+20>>2]>>2]<w[t[n+8>>2]>>2]){t[n+28>>2]=1;break a}o=D(t[t[n+8>>2]>>2]);t[t[n+12>>2]>>2]=o;if(!t[t[n+12>>2]>>2]){t[n+28>>2]=3;break a}ba(t[t[n+12>>2]>>2],t[t[n+24>>2]>>2],t[t[n+8>>2]>>2]);o=t[n+24>>2];t[o>>2]=t[t[n+8>>2]>>2]+t[o>>2];o=t[n+20>>2];t[o>>2]=t[o>>2]-t[t[n+8>>2]>>2];t[n+28>>2]=0}A=n+32|0;return t[n+28>>2]}function N(n,o,l){n=n|0;o=o|0;l=l|0;var p=0,m=0;p=A-32|0;A=p;s[p+26>>1]=n;t[p+20>>2]=o;t[p+16>>2]=l;t[t[p+16>>2]>>2]=3;m=p,l=D(t[t[p+16>>2]>>2]),t[m+12>>2]=l;a:{if(!t[p+12>>2]){t[p+28>>2]=3;break a}t[t[p+20>>2]>>2]=t[p+12>>2];q[p+11|0]=14;q[t[p+12>>2]]=u[p+11|0];t[p+12>>2]=t[p+12>>2]+1;n=t[p+12>>2];o=u[p+26|0]|u[p+27|0]<<8;q[n|0]=o;q[n+1|0]=o>>>8;t[p+28>>2]=0}A=p+32|0;return t[p+28>>2]}function O(m,n){var l=0;l=A-16|0;A=l;t[l+12>>2]=m;t[l+8>>2]=n;t[l+4>>2]=0;while(1){if(w[l+4>>2]<w[l+8>>2]){t[l>>2]=t[l+12>>2]+x(t[l+4>>2],20);a:{if(!(t[t[l>>2]>>2]&15)){J(t[t[l>>2]+8>>2]);break a}b:{if((t[t[l>>2]>>2]&15)==5){J(t[t[l>>2]+8>>2]);break b}(t[t[l>>2]>>2]&15)==6&&J(t[t[l>>2]+12>>2])}}t[l+4>>2]=t[l+4>>2]+1;continue}break}J(t[l+12>>2]);A=l+16|0}function P(m,n,l,o){q[m+53|0]=1;a:{if(t[m+4>>2]!=(l|0))break a;q[m+52|0]=1;l=t[m+16>>2];if(!l){t[m+36>>2]=1;t[m+24>>2]=o;t[m+16>>2]=n;if((o|0)!=1|t[m+48>>2]!=1)break a;q[m+54|0]=1;return}if((n|0)==(l|0)){l=t[m+24>>2];(l|0)==2&&(t[m+24>>2]=o,l=o);if(t[m+48>>2]!=1|(l|0)!=1)break a;q[m+54|0]=1;return}q[m+54|0]=1;t[m+36>>2]=t[m+36>>2]+1}}function Q(n,o,l,p){var m;m=A-32|0;t[m+24>>2]=n;t[m+20>>2]=o;t[m+16>>2]=l;t[m+12>>2]=p;q[m+11|0]=0;a:{if(w[t[m+20>>2]>>2]<1){t[m+28>>2]=1;break a}q[m+11|0]=u[t[t[m+24>>2]>>2]];n=t[m+24>>2];t[n>>2]=t[n>>2]+1;n=t[m+20>>2];t[n>>2]=t[n>>2]-1;q[t[m+16>>2]]=(u[m+11|0]&128)==128;q[t[m+12>>2]]=u[m+11|0]&127;t[m+28>>2]=0}return t[m+28>>2]}function ma(n,o,l,p,m){n=n|0;o=o|0;l=l|0;p=p|0;m=m|0;if(R(n,t[o+8>>2],m)){da(o,l,p);return}a:{if(!R(n,t[o>>2],m))break a;if(!(t[o+20>>2]!=(l|0)?t[o+16>>2]!=(l|0):0)){if((p|0)!=1)break a;t[o+32>>2]=1;return}t[o+20>>2]=l;t[o+32>>2]=p;t[o+40>>2]=t[o+40>>2]+1;t[o+36>>2]!=1|t[o+24>>2]!=2||(q[o+54|0]=1);t[o+44>>2]=4}}function R(m,n,l){var o;if(!l)return t[m+4>>2]==t[n+4>>2];if((m|0)==(n|0))return 1;l=t[m+4>>2];m=u[l|0];n=t[n+4>>2];o=u[n|0];a:{if(!m|(o|0)!=(m|0))break a;while(1){o=u[n+1|0];m=u[l+1|0];if(!m)break a;n=n+1|0;l=l+1|0;if((m|0)==(o|0))continue;break}}return(m|0)==(o|0)}function na(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=9;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function S(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=10;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function T(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=2;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function U(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=4;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function V(l){var m=0;m=A-16|0;A=m;t[m+12>>2]=l;l=1;a:{if(X(t[m+12>>2])&1)break a;l=1;if(t[m+12>>2]==15)break a;l=1;if(t[m+12>>2]==13)break a;l=1;if(t[m+12>>2]==12)break a;l=t[m+12>>2]==14}A=m+16|0;return l}function W(m,n,l){var o;o=t[m+16>>2];if(!o){t[m+36>>2]=1;t[m+24>>2]=l;t[m+16>>2]=n;return}a:{if((n|0)==(o|0)){if(t[m+24>>2]!=2)break a;t[m+24>>2]=l;return}q[m+54|0]=1;t[m+24>>2]=2;t[m+36>>2]=t[m+36>>2]+1}}function X(l){var m;m=A-16|0;t[m+12>>2]=l;l=1;a:{if(t[m+12>>2]==5)break a;l=1;if(t[m+12>>2]==6)break a;l=1;if(t[m+12>>2]==7)break a;l=t[m+12>>2]==8}return l}function Y(o,p,l,q,m,n){o=o|0;p=p|0;l=l|0;q=q|0;m=m|0;n=n|0;if(R(o,t[p+8>>2],n)){P(p,l,q,m);return}o=t[o+8>>2];ka[t[t[o>>2]+20>>2]](o,p,l,q,m,n)}function Z(){var m=0,n,l;while(1){n=m<<4;l=n+1376|0;t[n+1380>>2]=l;t[n+1384>>2]=l;m=m+1|0;if((m|0)!=64)continue;break}G(48)}function $(m,n,l,o){m=m|0;n=n|0;l=l|0;o=o|0;if(R(m,t[n+8>>2],0)){W(n,l,o);return}m=t[m+8>>2];ka[t[t[m>>2]+28>>2]](m,n,l,o)}function aa(o,p,l,q,m,n){o=o|0,p=p|0,l=l|0,q=q|0,m=m|0,n=n|0,R(o,t[p+8>>2],n)&&P(p,l,q,m)}function ba(m,n,l){if(l)while(1){q[m|0]=u[n|0];m=m+1|0;n=n+1|0;l=l-1|0;if(l)continue;break}}function ca(l,m){if(m)while(1){q[l|0]=0;l=l+1|0;m=m-1|0;if(m)continue;break}}function oa(m,n,l,o){m=m|0,n=n|0,l=l|0,o=o|0,R(m,t[n+8>>2],0)&&W(n,l,o)}function da(m,n,l){t[m+28>>2]==1|t[m+4>>2]!=(n|0)||(t[m+28>>2]=l)}function pa(l,m){l=l|0;m=m|0;return x(m,20)+l|0}function ea(l){l=l|0;return v[l+8>>1]>>>1|0}function qa(l){l=l|0;return s[l+8>>1]&1}function fa(l){l=l|0;return t[l+12>>2]}function ra(l){l=l|0;return t[l>>2]&15}function sa(l){l=l|0;return t[l+16>>2]}function ga(l){l=l|0;return v[l+4>>1]}function ha(l){l=l|0;return t[l+8>>2]}function ia(l){l=l|0;return u[l+4|0]}function ja(l){l=l|0;return l|0}function ta(l){return D(l)}function ua(l){l=l|0,J(l)}function va(l){l|0}n=u;r(l);var ka=m([null,ja,ua,va,va,H,aa,ma,oa,ua,Y,L,$]);function wa(){return p.byteLength/65536|0}function xa(l){l=l|0;var m=wa()|0;l=m+l|0;if(m<l&&l<65536){l=new ArrayBuffer(x(l,65536));var r=new Int8Array(l);r.set(q);q=new Int8Array(l);s=new Int16Array(l);t=new Int32Array(l);u=new Uint8Array(l);v=new Uint16Array(l);w=new Uint32Array(l);new Float32Array(l);new Float64Array(l);p=l;o.buffer=p;n=u}return m}return{c:Z,d:ta,e:ua,f:T,g:U,h:K,i:F,j:N,k:E,l:la,m:na,n:S,o:C,p:ra,q:ia,r:pa,s:ga,t:ha,u:fa,v:fa,w:sa,x:ea,y:qa,z:ea,A:ka}}return s(l)}(ha)},instantiate:function(l,m){return{then:function(n){var m=new D.Module(l);n({instance:new D.Instance(m)})}}},RuntimeError:Error};C=[];typeof D!=="object"&&Y("no native wasm support detected");var E,F=!1;function G(l,m){l||Y("Assertion failed: "+m)}function la(l,m){l%m>0&&(l+=m-l%m);return l}var H,I;function J(l){H=l,m.HEAP8=new Int8Array(l),m.HEAP16=new Int16Array(l),m.HEAP32=new Int32Array(l),m.HEAPU8=I=new Uint8Array(l),m.HEAPU16=new Uint16Array(l),m.HEAPU32=new Uint32Array(l),m.HEAPF32=new Float32Array(l),m.HEAPF64=new Float64Array(l)}u=m.INITIAL_MEMORY||2097152;m.wasmMemory?E=m.wasmMemory:E=new D.Memory({initial:u/65536,maximum:2147483648/65536});E&&(H=E.buffer);H.byteLength;J(H);var K,L=[],M=[],N=[];function O(){if(m.preRun){typeof m.preRun=="function"&&(m.preRun=[m.preRun]);while(m.preRun.length)ma(m.preRun.shift())}da(L)}function P(){da(M)}function Q(){if(m.postRun){typeof m.postRun=="function"&&(m.postRun=[m.postRun]);while(m.postRun.length)na(m.postRun.shift())}da(N)}function ma(l){L.unshift(l)}function R(l){M.unshift(l)}function na(l){N.unshift(l)}(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function(l,m){var n=l>>>16;l=l&65535;var o=m>>>16;m=m&65535;return l*m+(n*m+l*o<<16)|0});if(!Math.fround){var S=new Float32Array(1);Math.fround=function(l){S[0]=l;return S[0]}}Math.clz32||(Math.clz32=function(l){var m=32,n=l>>16;n&&(m-=16,l=n);n=l>>8;n&&(m-=8,l=n);n=l>>4;n&&(m-=4,l=n);n=l>>2;n&&(m-=2,l=n);n=l>>1;return n?m-2:m-l});Math.trunc||(Math.trunc=function(l){return l<0?Math.ceil(l):Math.floor(l)});var T=0,U=null,V=null;function W(l){T++,m.monitorRunDependencies&&m.monitorRunDependencies(T)}function X(l){T--;m.monitorRunDependencies&&m.monitorRunDependencies(T);if(T==0){U!==null&&(clearInterval(U),U=null);if(V){l=V;V=null;l()}}}m.preloadedImages={};m.preloadedAudios={};function Y(l){m.onAbort&&m.onAbort(l);l+="";B(l);F=!0;l="abort("+l+"). Build with -s ASSERTIONS=1 for more info.";l=new D.RuntimeError(l);s(l);throw l}var Z="data:application/octet-stream;base64,";function $(l){return l.startsWith(Z)}var aa="dgwcppbridge.wasm";$(aa)||(aa=z(aa));function ba(l){try{if(l==aa&&C)return new Uint8Array(C);var m=ga(l);if(m)return m;if(A)return A(l);else throw"both async and sync fetching of the wasm failed"}catch(l){Y(l)}}function ca(){return!C&&(w||x)&&typeof fetch==="function"?fetch(aa,{credentials:"same-origin"}).then(function(l){if(!l.ok)throw"failed to load wasm binary file at '"+aa+"'";return l.arrayBuffer()})["catch"](function(){return ba(aa)}):n.resolve().then(function(){return ba(aa)})}function oa(){var n={a:ha};function o(n,l){l=n.exports;m.asm=l;K=m.asm.A;R(m.asm.c);X("wasm-instantiate")}W("wasm-instantiate");function r(l){o(l.instance)}function t(l){return ca().then(function(l){l=D.instantiate(l,n);return l}).then(l,function(l){B("failed to asynchronously prepare wasm: "+l),Y(l)})}function u(){if(!C&&typeof D.instantiateStreaming==="function"&&!$(aa)&&typeof fetch==="function")return fetch(aa,{credentials:"same-origin"}).then(function(l){l=D.instantiateStreaming(l,n);return l.then(r,function(l){B("wasm streaming compile failed: "+l);B("falling back to ArrayBuffer instantiation");return t(r)})});else return t(r)}if(m.instantiateWasm)try{var l=m.instantiateWasm(n,o);return l}catch(l){B("Module.instantiateWasm callback failed with error: "+l);return!1}u()["catch"](s);return{}}function da(l){while(l.length>0){var n=l.shift();if(typeof n=="function"){n(m);continue}var o=n.func;typeof o==="number"?n.arg===void 0?K.get(o)():K.get(o)(n.arg):o(n.arg===void 0?null:n.arg)}}function pa(l){try{E.grow(l-H.byteLength+65535>>>16);J(E.buffer);return 1}catch(l){}}function ea(l){var m=I.length;l=l>>>0;var n=2147483648;if(l>n)return!1;for(var o=1;o<=4;o*=2){var p=m*(1+.2/o);p=Math.min(p,l+100663296);p=Math.min(n,la(Math.max(l,p),65536));p=pa(p);if(p)return!0}return!1}var qa=!1;function fa(l){var m=[];for(var n=0;n<l.length;n++){var o=l[n];o>255&&(qa&&G(!1,"Character code "+o+" ("+String.fromCharCode(o)+")  at offset "+n+" not in 0x00-0xFF."),o&=255);m.push(String.fromCharCode(o))}return m.join("")}var ra=typeof atob==="function"?atob:function(l){var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",o,p,q,r,s,t=0;l=l.replace(/[^A-Za-z0-9\+\/\=]/g,"");do p=m.indexOf(l.charAt(t++)),q=m.indexOf(l.charAt(t++)),r=m.indexOf(l.charAt(t++)),s=m.indexOf(l.charAt(t++)),p=p<<2|q>>4,q=(q&15)<<4|r>>2,o=(r&3)<<6|s,n=n+String.fromCharCode(p),r!==64&&(n=n+String.fromCharCode(q)),s!==64&&(n=n+String.fromCharCode(o));while(t<l.length);return n};function sa(l){try{l=ra(l);var m=new Uint8Array(l.length);for(var n=0;n<l.length;++n)m[n]=l.charCodeAt(n);return m}catch(l){throw new Error("Converting base64 string to bytes failed.")}}function ga(l){if(!$(l))return;return sa(l.slice(Z.length))}var ha={b:ea,a:E};oa();m.___wasm_call_ctors=function(){return(m.___wasm_call_ctors=m.asm.c).apply(null,arguments)};m.__malloc=function(){return(m.__malloc=m.asm.d).apply(null,arguments)};m.__free=function(){return(m.__free=m.asm.e).apply(null,arguments)};m.__DgwCodecEncodeEmpty=function(){return(m.__DgwCodecEncodeEmpty=m.asm.f).apply(null,arguments)};m.__DgwCodecEncodeDeauth=function(){return(m.__DgwCodecEncodeDeauth=m.asm.g).apply(null,arguments)};m.__DgwCodecEncodeDrain=function(){return(m.__DgwCodecEncodeDrain=m.asm.h).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_EstabStream=function(){return(m.__DgwCodecEncodeStreamGroup_EstabStream=m.asm.i).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_EndOfData=function(){return(m.__DgwCodecEncodeStreamGroup_EndOfData=m.asm.j).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_Data=function(){return(m.__DgwCodecEncodeStreamGroup_Data=m.asm.k).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_Ack=function(){return(m.__DgwCodecEncodeStreamGroup_Ack=m.asm.l).apply(null,arguments)};m.__DgwCodecEncodePing=function(){return(m.__DgwCodecEncodePing=m.asm.m).apply(null,arguments)};m.__DgwCodecEncodePong=function(){return(m.__DgwCodecEncodePong=m.asm.n).apply(null,arguments)};m.__DgwCodecDecode=function(){return(m.__DgwCodecDecode=m.asm.o).apply(null,arguments)};m.__getFrameType=function(){return(m.__getFrameType=m.asm.p).apply(null,arguments)};m.__getDrainReasonFromDrainFrame=function(){return(m.__getDrainReasonFromDrainFrame=m.asm.q).apply(null,arguments)};m.__getDGWFramePtr=function(){return(m.__getDGWFramePtr=m.asm.r).apply(null,arguments)};m.__getStreamIdFromStreamGroupFrame=function(){return(m.__getStreamIdFromStreamGroupFrame=m.asm.s).apply(null,arguments)};m.__getEncodedParamsFromEstablishStreamFrame=function(){return(m.__getEncodedParamsFromEstablishStreamFrame=m.asm.t).apply(null,arguments)};m.__getEncodedParamsSizeFromEstablishStreamFrame=function(){return(m.__getEncodedParamsSizeFromEstablishStreamFrame=m.asm.u).apply(null,arguments)};m.__getDataFromGroupedStreamDataFrame=function(){return(m.__getDataFromGroupedStreamDataFrame=m.asm.v).apply(null,arguments)};m.__getDataSizeFromGroupedStreamDataFrame=function(){return(m.__getDataSizeFromGroupedStreamDataFrame=m.asm.w).apply(null,arguments)};m.__getAckIdFromGroupedStreamDataFrame=function(){return(m.__getAckIdFromGroupedStreamDataFrame=m.asm.x).apply(null,arguments)};m.__getRequiresAckFromGroupedStreamDataFrame=function(){return(m.__getRequiresAckFromGroupedStreamDataFrame=m.asm.y).apply(null,arguments)};m.__getAckIdFromGroupedStreamAckFrame=function(){return(m.__getAckIdFromGroupedStreamAckFrame=m.asm.z).apply(null,arguments)};var ia;V=function l(){ia||ja(),ia||(V=l)};function ja(l){l||v;if(T>0)return;O();if(T>0)return;function n(){if(ia)return;ia=!0;m.calledRun=!0;if(F)return;P();o(m);m.onRuntimeInitialized&&m.onRuntimeInitialized();Q()}m.setStatus?(m.setStatus("Running..."),setTimeout(function(){setTimeout(function(){m.setStatus("")},1),n()},1)):n()}m.run=ja;if(m.preInit){typeof m.preInit=="function"&&(m.preInit=[m.preInit]);while(m.preInit.length>0)m.preInit.pop()()}ja();return m.ready}}();typeof q==="object"&&typeof p==="object"?p.exports=r:typeof define==="function"&&define.amd?define([],function(){return r}):typeof q==="object"&&(q.Module=r)}),null);
__d("DGWUtils",["Base64","DGWConstants","DGWCppBridge","DGWLoggingContext","Promise","Random","URI","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=4;function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=d("Random").random()*16|0;a=a==="x"?b:b&3|8;return a.toString(16)})}function k(a){var b=new TextDecoder();b=b.decode(a);a=c("Base64").encode(b);b=a.replace(/\+/gi,"-").replace(/\//gi,"_").replace(/=/gi,"");return b}var l=null,m=null;function n(){m==null&&(m=(i||(i=b("Promise"))).resolve().then(function(){return c("DGWCppBridge")()}).then(function(a){l=a}));return m}e=function(){function a(){}a.initialize=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return n()});function c(){return a.apply(this,arguments)}return c}();a.constructConnectUrl=function(a){var b,e,f=a.appId,g=a.appVersion,i=a.authType,j=a.deviceId,l=a.dgwVersion,m=a.fbId,n=a.tier,o=a.loggingId,p=a.headers,q=a.endpoint,r=a.serviceId,s=a.regionHint,t=a.establishStreamFrame,u=a.trafficTracing;a=a.authToken;var v=(b={},b[(e=d("DGWConstants")).HEADER_CONSTANTS.HEADER_APPID]=f,b[e.HEADER_CONSTANTS.HEADER_APPVERSION]=g,b[e.HEADER_CONSTANTS.HEADER_AUTHTYPE]=i,b[e.HEADER_CONSTANTS.HEADER_DGW_VERSION]=""+l,b[e.HEADER_CONSTANTS.HEADER_UUID]=m,b[e.HEADER_CONSTANTS.HEADER_TARGET_TIER]=n,b);t!==void 0&&(v[d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64]=k(t));o!==void 0&&(v[d("DGWConstants").HEADER_CONSTANTS.HEADER_LOGGING_ID]=o);s!==void 0&&(v[d("DGWConstants").HEADER_CONSTANTS.HEADER_REGIONHINT]=s);j!==void 0&&(v[d("DGWConstants").HEADER_CONSTANTS.HEADER_DEVICE_ID]=j);u!==void 0&&(v[d("DGWConstants").HEADER_CONSTANTS.TRAFFIC_TRACING]="debug:"+u);a!==void 0&&(v[d("DGWConstants").HEADER_CONSTANTS.HEADER_AUTHTOKEN]=a);Object.keys(p).forEach(function(a){var b=d("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+a;Object.prototype.hasOwnProperty.call(v,b)||(v[b]=p[a])});f=new(h||(h=c("URI")))(q);f.setQueryData(v);f.setPath(f.getPath()+"/"+r);f.toString().length>2e3&&(delete v[d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64],f.setQueryData(v));return f.toStringRawQuery()};return a}();f=function(){function a(a,b,c){this.$1=null,this.$2=a,this.$3=b,this.$4=c}a.initialize=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return n()});function c(){return a.apply(this,arguments)}return c}();var c=a.prototype;c.malloc=function(a){try{a=l.__malloc(a);if(a===0){var b;(b=this.$2)==null||b.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","malloc returned 0");return-1}return a}catch(a){(b=this.$2)==null||b.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","exception during malloc",a.toString());return-1}};c.free=function(a){l.__free(a)};c.append=function(a){if(this.$1==null){this.$1=a;return}var b=this.$1.length,c=new Uint8Array(b+a.length);c.set(this.$1,0);c.set(a,b);this.$1=c};c.processData=function(){var a=this;if(this.$1==null)return;var b=this.$1.length,c=this.malloc(b);if(c===-1)return;var e=l.HEAPU8.subarray(c,c+b);if(this.$1)for(var f=0;f<e.length;++f)e[f]=this.$1[f];f=this.malloc(j*4);if(f===-1)return;e=f;var g=e+j,h=g+j,i=h+j;b=l.__DgwCodecDecode(c,b,e,g,h,i);this.free(c);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){this.free(f);(h=this.$2)==null||h.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Codec Decode Failure","Failed to decode Frame(s). Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b));return}c=l.HEAPU32.subarray(i/j,i/j+1)[0];if(this.$1==null){this.free(f);return}h=this.$1.length-c;if(this.$1&&this.$1.length>h){this.$1=new Uint8Array(((b=this.$1)==null?void 0:b.subarray(h))||[])}else this.$1=null;i=l.HEAPU32.subarray(g/j,g/j+1)[0];var k=l.HEAPU32.subarray(e/j,e/j+1)[0],m=[];c=function(){var b=l.__getDGWFramePtr(k,n),c=l.__getFrameType(b);switch(c){case d("DGWConstants").DgwFrameType.DgwFrameType_Drain:c=l.__getDrainReasonFromDrainFrame(b);var e=d("DGWConstants").drainReasonToDrainReasonString(c);(c=a.$2)==null||c.logEvent(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Received Drain Frame from server","DrainReason: "+e);m.push(function(){var b;return(b=a.$3)==null?void 0:b.receivedDrainSignal(e)});break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EstabStream:var f=l.__getStreamIdFromStreamGroupFrame(b);c=l.__getEncodedParamsFromEstablishStreamFrame(b);var g=new Uint8Array(l.HEAPU8.subarray(c,c+l.__getEncodedParamsSizeFromEstablishStreamFrame(b)));a.free(c);m.push(function(){var b;return(b=a.$3)==null?void 0:b.onGroupedStreamEstablishStreamReceived(f,g)});break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Data:var h=l.__getStreamIdFromStreamGroupFrame(b);c=l.__getDataFromGroupedStreamDataFrame(b);var i=new Uint8Array(l.HEAPU8.subarray(c,c+l.__getDataSizeFromGroupedStreamDataFrame(b)));a.free(c);var j=l.__getRequiresAckFromGroupedStreamDataFrame(b)?l.__getAckIdFromGroupedStreamDataFrame(b):null;m.push(function(){var b;return(b=a.$3)==null?void 0:b.onGroupedStreamDataReceived(h,i,j)});break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Ack:var o=l.__getStreamIdFromStreamGroupFrame(b),p=l.__getAckIdFromGroupedStreamAckFrame(b);m.push(function(){var b;return(b=a.$3)==null?void 0:b.onGroupedStreamAckReceived(o,p)});break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EndOfData:var q=l.__getStreamIdFromStreamGroupFrame(b);m.push(function(){var b;return(b=a.$3)==null?void 0:b.onGroupedStreamEndOfDataReceived(q)});break;case d("DGWConstants").DgwFrameType.DgwFrameType_Ping:m.push(function(){var b;return(b=a.$3)==null?void 0:b.onPingReceived()});break;case d("DGWConstants").DgwFrameType.DgwFrameType_Pong:m.push(function(){var b;return(b=a.$3)==null?void 0:b.onPongReceived()});break;default:break}a.free(b)};for(var n=0;n<i;++n)c();this.free(f);for(b=0;b<m.length;b++)m[b]()};c.encodeData=function(a,b,c,e){var f=this.malloc(a.length);if(f===-1)return null;var g=l.HEAPU8.subarray(f,f+a.length);for(var h=0;h<g.length;++h)g[h]=a[h];a=this.malloc(j*2);h=a;var i=a+j;e=l.__DgwCodecEncodeStreamGroup_Data(e,f,g.length,b,c,h,i);this.free(f);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(g=this.$2)==null||g.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Data Frame encode failure","Failed to decode DGW Data Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}b=l.HEAPU32.subarray(h/j,h/j+1)[0];c=l.HEAPU32.subarray(i/j,i/j+1)[0];f=new Uint8Array(l.HEAPU8.subarray(b,b+c));this.free(b);this.free(a);return f};c.encodeAck=function(a,b){var c=this.malloc(j*2);if(c===-1)return null;var e=c,f=c+j;b=l.__DgwCodecEncodeStreamGroup_Ack(b,a,e,f);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(a=this.$2)==null||a.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"ACK Frame encode failure","Failed to encode ACK Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b));return null}a=l.HEAPU32.subarray(e/j,e/j+1)[0];b=l.HEAPU32.subarray(f/j,f/j+1)[0];e=new Uint8Array(l.HEAPU8.subarray(a,a+b));this.free(a);this.free(c);return e};c.encodeDrain=function(a){var b=this.malloc(j*2);if(b===-1)return null;var c=b,e=b+j;a=l.__DgwCodecEncodeDrain(a,c,e);if(a!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null||f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Drain Frame encode failure","Failed to encode Drain Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(a));return null}f=l.HEAPU32.subarray(c/j,c/j+1)[0];a=l.HEAPU32.subarray(e/j,e/j+1)[0];c=new Uint8Array(l.HEAPU8.subarray(f,f+a));this.free(f);this.free(b);return c};c.encodeEstablishStream=function(a,b){var c=this.malloc(b.length);if(c===-1)return null;var e=l.HEAPU8.subarray(c,c+b.length);for(var f=0;f<b.length;++f)e[f]=b[f];e=this.malloc(j*2);f=e;var g=e+j;b=l.__DgwCodecEncodeStreamGroup_EstabStream(a,c,b.length,f,g);this.free(c);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(c=this.$2)==null||c.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EstablishStream Frame encode failure","Failed to encode EstablishStream Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b)+" for StreamId "+a);return null}c=l.HEAPU32.subarray(f/j,f/j+1)[0];b=l.HEAPU32.subarray(g/j,g/j+1)[0];a=new Uint8Array(l.HEAPU8.subarray(c,c+b));this.free(c);this.free(e);return a};c.encodeEndOfData=function(a){var b=this.malloc(j*2);if(b===-1)return null;var c=b,e=b+j;a=l.__DgwCodecEncodeStreamGroup_EndOfData(a,c,e);if(a!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null||f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EndOfData Frame encode failure","Failed to encode EndOfData Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(a));return null}f=l.HEAPU32.subarray(c/j,c/j+1)[0];a=l.HEAPU32.subarray(e/j,e/j+1)[0];c=new Uint8Array(l.HEAPU8.subarray(f,f+a));this.free(f);this.free(b);return c};c.encodePing=function(){var a=this.malloc(j*2);if(a===-1)return null;var b=a,c=a+j,e=l.__DgwCodecEncodePing(b,c);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null||f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Ping Frame encode failure","Failed to encode Ping Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}f=l.HEAPU32.subarray(b/j,b/j+1)[0];e=l.HEAPU32.subarray(c/j,c/j+1)[0];b=new Uint8Array(l.HEAPU8.subarray(f,f+e));this.free(f);this.free(a);return b};c.encodePong=function(){if(this.$5!=null)return this.$5;var a=this.malloc(j*2);if(a===-1)return null;var b=a,c=a+j,e=l.__DgwCodecEncodePong(b,c);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null||f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Pong Frame encode failure","Failed to encode Pong Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}f=l.HEAPU32.subarray(b/j,b/j+1)[0];e=l.HEAPU32.subarray(c/j,c/j+1)[0];b=new Uint8Array(l.HEAPU8.subarray(f,f+e));this.free(f);this.free(a);this.$5=b;return b};return a}();g.uuidv4=a;g.Uint8ArrayToBase64UrlStr=k;g.DGWUtils=e;g.DGWCodec=f}),98);
__d("DGWExponentialBackoff",["Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g,h={maxRetries:5,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},i=function(a){function b(b,c){b=a.call(this,b)||this;b.errors=c;return b}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=h);try{return yield k(a,b)}catch(a){throw a.errors[a.errors.length-1]}});return j.apply(this,arguments)}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=0,d=[],e=b.baseRetryInterval,f=b.backoffFactor;while(c<=b.maxRetries){try{var g=(yield a());return g}catch(a){d.push(a)}yield m(e*Math.pow(f,c));++c}throw new i("Max call count exceeded",d)});return l.apply(this,arguments)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield new(g||(g=b("Promise")))(function(b){return window.setTimeout(b,a)})});return n.apply(this,arguments)}f.callWithExponentialBackoff=a}),66);
__d("DGWGlobalLogger",["gkx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){var a=this;this.tabID=c("uuidv4")();this.isTabClosed=!1;this.otherTabs=new Map();this.thisTab={realtime:0,lightspeed:0};this.broadcastChannel=this.$1("DGWGlobalLogger");this.broadcastChannel.onmessage=function(b){b=JSON.parse(String(b.data));var c=!a.otherTabs.has(b.key);b.event==="DELETE"?a.otherTabs["delete"](b.key):b.event==="UPDATE"&&b.value!=null&&(a.otherTabs.set(b.key,b.value),c&&a.$2())}}var b=a.prototype;b.$1=function(a){if(window.BroadcastChannel!=null)return new BroadcastChannel(a);else return{onmessage:function(a){},postMessage:function(a){}}};b.streamRequested=function(a){switch(a){case"realtime":this.thisTab.realtime++;break;case"lightspeed":this.thisTab.lightspeed++;break}this.$2()};b.streamClosed=function(a){switch(a){case"realtime":this.thisTab.realtime=Math.max(0,this.thisTab.realtime-1);break;case"lightspeed":this.thisTab.lightspeed=Math.max(0,this.thisTab.lightspeed-1);break}this.$2()};b.tabClosed=function(){if(this.isTabClosed)return;this.isTabClosed=!0;var a={key:this.tabID,event:"DELETE"};this.broadcastChannel.postMessage(JSON.stringify(a))};b.getGlobalState=function(){var a={realtime:this.thisTab.realtime,lightspeed:this.thisTab.lightspeed};this.otherTabs.forEach(function(b){a.realtime+=b.realtime,a.lightspeed+=b.lightspeed});return a};b.$2=function(){var a={key:this.tabID,event:"UPDATE",value:this.thisTab};this.broadcastChannel.postMessage(JSON.stringify(a))};return a}();var h=c("gkx")("4337")?new a():{streamRequested:function(){},streamClosed:function(){},tabClosed:function(){},getGlobalState:function(){return{realtime:-1,lightspeed:-1}}};b=function(){return h};g.getInstance=b}),98);
__d("DGWPinger",["DGWLoggingContext"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){this.$1=a,this.$4=b,this.$5=c,this.$3=!1}var b=a.prototype;b.$6=function(){var a=this;if(this.$3){var b;(b=d("DGWLoggingContext")).DGWLoggingContext.bumpODSKey(b.DGWLoggingComponent.PINGER,"timeout_fired.reset");this.$3=!1;this.$4();b.DGWLoggingContext.bumpODSKey(b.DGWLoggingComponent.PINGER,"timeout.newtimeout");this.$2=window.setTimeout(function(){a.$6()},this.$1)}else d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"timeout_fired.disconnect"),this.$5()};b.reset=function(){var a=this;this.$3=!0;this.$2&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset"),window.clearTimeout(this.$2),this.$2=null);this.$1>0&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset.newtimeout"),this.$2=window.setTimeout(function(){a.$6()},this.$1))};b.cancel=function(){this.$2&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"canceled"),window.clearTimeout(this.$2),this.$2=null)};return a}();g.DGWPinger=a}),98);
__d("DGWStreamGroupCallbacks",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum")({TRANSPORT_SERVER_INTERNAL_ERROR:0,TRANSPORT_ABNORMAL_CLOSURE:1,TRANSPORT_GOING_AWAY:2,TRANSPORT_UNKNOWN_ERROR:3,TRANSPORT_KEEPALIVE_TIMEOUT:4,TRANSPORT_UNAUTHORIZED:5,TRANSPORT_REJECTED:6,TRANSPORT_BAD_REQUEST:7,TRANSPORT_DGW_SERVER_ERROR:8,TRANSPORT_NORMAL_CLOSURE:9});function a(a){switch(a){case g.TRANSPORT_UNAUTHORIZED:return!1;default:return!0}}c=function(){function a(){}var b=a.prototype;b.onStreamGroupError=function(){};b.onStreamGroupMustDrain=function(){};b.onStreamGroupTransportClose=function(){};return a}();f.DGWStreamGroupError=g;f.isRetryableError=a;f.NoOpDGWStreamGroupCallbacks=c}),66);
__d("DGWTransportEvents",["DGWLoggingContext","NetworkStatus"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$3=a}var b=a.prototype;b.transportEstablished=function(a){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"open",a),this.$2=Date.now(),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_success")};b.transportPingSent=function(a){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Ping Frame Sent",a,!0)};b.transportPongReceived=function(a){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Pong Frame Received",a,!0)};b.transportEstablishmentPending=function(){this.$1=Date.now(),this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transportPending",null,!0),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_pending")};b.transportClosed=function(a,b,c){this.$4=Date.now(),a?(this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_graceful"),this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed gracefully",null,!0)):(this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_with_error"),this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed abnormally",b,c))};b.transportEstablishmentFailure=function(a){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"WebSocket transport establishment failure","WebSocket close code: "+a.code+" reason: "+a.reason+" wasClean: "+String(a.wasClean)),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_failure")};b.streamEstablishmentTimeout=function(a,b,e){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment timeout",a,"streamId:"+b+", onLine:"+String(c("NetworkStatus").isOnline()),!1,e),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_timeout")};b.streamEstablishmentPending=function(a,b){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment pending","streamId:"+a,!0,b),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_pending")};b.streamEstablishmentSuccess=function(a,b){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment success","streamId:"+a,!0,b),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_success")};b.transportError=function(a,b,c){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,a,b,c)};b.receivedFrameForInactiveStream=function(a,b,c){this.$3.logWarn(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Frame received for inactive stream","frameType: "+a+", streamID: "+b,c)};b.ranOutOfStreamIds=function(a){this.$3.logWarn(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Hit max StreamId limit","Hit max StreamId limit",a)};return a}();g.DGWTransportEvents=a}),98);
__d("DGWWebSocketTransport",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=new WebSocket(a);a.binaryType="arraybuffer";a.onopen=function(){};a.onclose=function(){};a.onerror=function(){};return a}f.getWebSocketConnection=a}),66);
__d("DGWStreamEvents",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){this.$4=new Map(),this.$5=new Map(),this.$6=a,this.$1=b,c!=null&&(this.$8="streamId:"+c+"::")}var b=a.prototype;b.dataSent=function(a,b,c){var d=b?"sendWithAckRequested":"sendWithoutAckRequested";this.$6.logEvent(this.$1,d,((d=this.$8)!=null?d:"")+"sendId:"+c+", payloadSize:"+a,!0);this.$4.set(c,{ackRequested:b,payloadSize:a,sendTimestamp:Date.now()})};b.ackReceived=function(a){var b;this.$6.logEvent(this.$1,"AckReceived",((b=this.$8)!=null?b:"")+"sendId:"+a,!0);this.$6.bumpODSKey(this.$1,"ack_received");b=this.$4.get(a);b!=null&&(b.ackReceivedTimestamp=Date.now())};b.ackSent=function(a){var b;this.$6.bumpODSKey(this.$1,"ack_sent");this.$6.logEvent(this.$1,"ACK sent",((b=this.$8)!=null?b:"")+"ackId:"+a,!0)};b.drainSent=function(a){var b;this.$6.logEvent(this.$1,"Drain sent",((b=this.$8)!=null?b:"")+"drainReason: "+a)};b.dataReceived=function(a,b,c){var d;this.$6.bumpODSKey(this.$1,"data_received");this.$6.logEvent(this.$1,"Data received",((d=this.$8)!=null?d:"")+"sendId:"+(c!=null?c:"null")+", ackRequested:"+b.toString()+", payloadSize:"+a,!0);c!=null&&this.$5.set(c,{ackRequested:b,payloadSize:a,receiveTimestamp:Date.now()})};b.endOfDataReceived=function(){this.$6.bumpODSKey(this.$1,"end_of_data_received"),this.$6.logEvent(this.$1,"EndOfDataReceived",this.$8,!0)};b.endOfDataSent=function(){this.$6.bumpODSKey(this.$1,"end_of_data_sent"),this.$6.logEvent(this.$1,"EndOfDataSent",this.$8,!0)};b.streamClosed=function(a,b){this.$7=Date.now();var c=this.$9();if(a){this.$6.bumpODSKey(this.$1,"stream_closed_gracefully");this.$6.logEvent(this.$1,"Stream closed gracefully",""+((a=this.$8)!=null?a:"")+c)}else{this.$6.bumpODSKey(this.$1,"stream_closed_with_error");this.$6.logError(this.$1,"Stream closed abnormally",b,""+((a=this.$8)!=null?a:"")+c)}};b.connectionEstablishmentFailure=function(a){this.$6.logEvent(this.$1,"WebSocket connection establishment failure","WebSocket close code: "+a)};b.streamEstablishmentFailure=function(a,b){this.$6.logError(this.$1,"Failed to establish DGW Stream","Last seen error: "+a.toString(),""+((a=this.$8)!=null?a:"")+b);this.$6.bumpODSKey(this.$1,"stream_establishment_failure")};b.error=function(a,b){b={msg:b,state:this.$9()};this.$6.logError(this.$1,a,JSON.stringify(b),this.$8)};b.$9=function(){var a={currentNetworkCondition:window.navigator&&window.navigator.onLine===!0,establishRequestTimestamp:this.$2,establishedTimestamp:this.$3,streamClosedTimestamp:this.$7,sendHistory:JSON.stringify(Array.from(this.$4.entries())),receiveHistory:JSON.stringify(Array.from(this.$5.entries()))};return JSON.stringify(a)};return a}();f.DGWStreamEvents=a}),66);
__d("GroupedStream",["DGWAckManager","DGWConstants","DGWLoggingContext","DGWStream","DGWStreamEvents","Promise","QuickPerformanceLogger","Random","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("qpl")._(701242292,"2919");a=function(){function a(a,b,e,f,g,h,k){this.$1=a,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=b,this.$7=e,this.$8=f,this.$2=h,this.$9=g,this.$10=new(d("DGWAckManager").DGWAckManager)(this.$9),this.$12=new(d("DGWStreamEvents").DGWStreamEvents)(this.$9,d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,this.$1),this.$11=0,this.$13=k,this.$14=Date.now()+(Math.round(d("Random").random()*1e4)+1e4),(i||(i=c("QuickPerformanceLogger"))).markerStart(j,this.$14)}var e=a.prototype;e.send=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=this.$11++%d("DGWConstants").MAX_ACK_ID;a=this.$15(a,!0,c);if(!this.$16(a,!0,c))return!1;a=(yield this.$10.waitForAck(c,b!=null?b:d("DGWConstants").DEFAULT_ACK_TIMEOUT_MS));return a});function c(b,c){return a.apply(this,arguments)}return c}();e.sendFrame=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=this.$11++%d("DGWConstants").MAX_ACK_ID;c=this.$15(c,!0,f);if(c==null)return!1;var g=new Uint8Array(a.length+c.length);g.set(a);g.set(c,a.length);if(!this.$16(g,!0,f))return!1;c=(yield this.$10.waitForAck(f,e!=null?e:d("DGWConstants").DEFAULT_ACK_TIMEOUT_MS));this.__markerPoint(c?"ack_recevied":"ack_timeout");if(!c){this.__endMarker(3);return(h||(h=b("Promise"))).reject(d("DGWStream").StreamError.ACK_TIMEOUT)}return c});function c(b,c,d){return a.apply(this,arguments)}return c}();e.sendAndForget=function(a){a=this.$15(a,!1,0);return this.$16(a,!1,0)};e.sendFrameAndForget=function(a,b){b=this.$15(b,!1,0);if(b==null)return!1;var c=new Uint8Array(a.length+b.length);c.set(a);c.set(b,a.length);return this.$16(c,!1,0)};e.close=function(){var a=this.$2.encodeEndOfData(this.$1);if(a==null){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode EndOfData","streamId: "+this.$1);return}a=this.$8.send(a);if(!a){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send EndOfData","streamId: "+this.$1+". StreamGroupTransport not open during send");return}this.$12.endOfDataSent();this.$5=!0;this.$4&&this.$17()};e.loggingContext=function(){return this.$9};e.__sendDrain=function(a){var b=d("DGWConstants").drainReasonToDrainReasonString(a);if(this.$5)return!1;a=this.$2.encodeDrain(a);if(a==null)return!1;this.$12.drainSent(b);b=this.$8.send(a);return b};e.__transportCloseHook=function(a){this.$13(),this.$10.clearPendingAcks(),a?(this.$12.error("Received StreamError","StreamErrorType: "+a),this.$6.onError(a)):this.$5&&this.$4?this.$17():(this.$12.streamClosed(!1,"Stream closed: ClosedLocally: "+this.$5.toString()+", EndOfDataReceived: "+this.$4.toString()),this.$6.onError(d("DGWStream").StreamError.PREMATURE_CLOSE))};e.$17=function(){this.$13(),this.$12.streamClosed(!0,"Graceful close"),this.$6.onClose(this)};e.__dataReceivedHook=function(a,b){this.$12.dataReceived(a.length,b!=null,b),b!=null&&this.$18(b),this.$6.onDataReceived(a)};e.__ackReceivedHook=function(a){this.$12.ackReceived(a),this.$10.handleAckReceived(a)};e.__drainReceivedHook=function(a){this.$3===!1&&(this.$6.onStreamMustDrain(this,a),this.$3=!0)};e.__endOfDataHook=function(){this.$12.endOfDataReceived(),this.$4=!0,this.$5?this.$17():this.$6.onServerHasFinishedSendingData(this)};e.__markerPoint=function(a){var b=this.$14;(i||(i=c("QuickPerformanceLogger"))).markerPoint(j,a,{instanceKey:b})};e.__markerAnnotate=function(a){var b=this.$14;(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(j,a,{instanceKey:b})};e.__endMarker=function(a){(i||(i=c("QuickPerformanceLogger"))).markerEnd(j,a,this.$14)};e.$15=function(a,b,c){return this.$2.encodeData(a,b,c,this.$1)};e.$16=function(a,b,c){this.__markerPoint("send_data_start");if(this.$5){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","Stream closed locally");return!1}if(a==null)return!1;var e=this.$8.send(a);if(!e){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","ClosedLocally: "+this.$5.toString());return!1}this.__markerPoint("send_data_end");this.$12.dataSent(a.length,b,c);return!0};e.$18=function(a){var b=this.$2.encodeAck(a,this.$1);if(b==null){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode ACK","ackId: "+a);return!1}b=this.$8.send(b);if(!b){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send ACK","ackId: "+a);return!1}this.$12.ackSent(a);return!0};return a}();g.GroupedStream=a}),98);
__d("StreamIdGenerator",["err"],(function(a,b,c,d,e,f,g){"use strict";var h=65535;a=function(){function a(){this.$1=new Set(),this.$2=0}var b=a.prototype;b.getNextStreamId=function(){var a;if(!this.streamIdAvailable())throw c("err")("Max number of stream IDs reached");if(this.$2<=h)return this.$2++;a=(a=this.$1.values().next().value)!=null?a:0;this.$1["delete"](a);return a};b.putBackStreamId=function(a){this.$1.add(a)};b.streamIdAvailable=function(){return this.$1.size>0||this.$2<=h};return a}();g.MAX_STREAM_ID=h;g.StreamIdGeneratorImpl=a}),98);
__d("StreamGroupWebSocketTransport",["DGWConstants","DGWExponentialBackoff","DGWGlobalLogger","DGWLoggingContext","DGWPinger","DGWStream","DGWStreamGroupCallbacks","DGWTransportEvents","DGWUtils","DGWWebSocketTransport","GroupedStream","Promise","QuickPerformanceLogger","Random","Run","StreamIdGenerator","asyncToGeneratorRuntime","err","qex","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("qpl")._(701238781,"3037"),k=(a=c("qex")._("2101"))!=null?a:20,l=(e=c("qex")._("2102"))!=null?e:3e4,m=(f=c("qex")._("2103"))!=null?f:!1,n=function(a,b,c,e,f){var g=this;this.groupedStream=a;this.$1=window.setTimeout(function(){c(d("DGWStream").StreamError.ESTABLISHMENT_TIMEOUT)},e);this.handleEstablishFrameReceived=function(){window.clearTimeout(g.$1),b(g.groupedStream)};this.abortStream=function(a){f(),c(a)}};a=function(){function a(b,e,f,g,h,k,l,m){var n=this;this.$18=-1;this.$15=h;this.$17=this.__getStreamIdGenerator();this.$5=new Map();this.$6=new Map();this.$7=g.keepAliveMs;this.$8=!1;this.$9=!1;this.$3=!0;this.$4=!1;this.$21=!1;this.$22=!1;this.$13=f;this.$11=new TextEncoder();this.$12=new TextDecoder();this.$14=g;h={onDataReceived:function(){},handleAckReceived:function(){},receivedDrainSignal:function(a){n.$9||(n.$9=!0,n.$15(),n.$13.transportClosed(!0,""),n.$14.streamGroupCallbacks.onStreamGroupMustDrain(a),n.$5.forEach(function(b){b.__drainReceivedHook(a)}),n.onClose(d("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE))},onGroupedStreamDataReceived:function(a,b,c){if(n.$5.has(a)){var d=n.$5.get(a);d==null||d.__dataReceivedHook(b,c)}else n.$13.receivedFrameForInactiveStream("Data",a,"sendAckID: "+(c!=null?c:"null"))},onGroupedStreamAckReceived:function(a,b){if(n.$5.has(a)){var c=n.$5.get(a);c==null||c.__ackReceivedHook(b)}else n.$13.receivedFrameForInactiveStream("ACK",a,"ackId: "+(b!=null?b:"null"))},onGroupedStreamEndOfDataReceived:function(a){if(n.$5.has(a)){var b=n.$5.get(a);b==null||b.__endOfDataHook()}else n.$13.receivedFrameForInactiveStream("EndOfData",a)},onGroupedStreamEstablishStreamReceived:function(a,b){if(n.$6.has(a)){var c=n.$6.get(a);n.$6["delete"](a);b=JSON.parse(n.$12.decode(b));(b.code===void 0||b.code!==200)&&(c==null||c.abortStream(d("DGWStream").StreamError.ABNORMAL_CLOSURE));c==null||c.handleEstablishFrameReceived()}else n.$13.receivedFrameForInactiveStream("EstablishStream",a,"EstablishStream received for non-inflight stream")},onPingReceived:function(){var a=n.$2.encodePing();if(a==null)return;n.send(a)},onPongReceived:function(){n.$3=!1,n.$22||(n.$22=!0,n.__markerPoint("auth_success")),n.$13.transportPongReceived("readyState:"+n.$1.readyState+", bufferedAmount:"+n.$1.bufferedAmount)}};this.$2=new(d("DGWUtils").DGWCodec)(k,h,g.dgwVersion);this.$20=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);this.$23=d("DGWGlobalLogger").getInstance();d("Run").onUnload(function(){n.$23.tabClosed()});if(g.enableFirstStreamOnWsHandshake){if(l===void 0)throw c("err")("Missing grouped stream options");if(m===void 0)throw c("err")("Missing grouped stream callbacks");var o=this.$17.getNextStreamId();f=this.createEstablishStreamFrame(o,l);k=d("DGWUtils").DGWUtils.constructConnectUrl({appId:g.appId,appVersion:g.appVersion,authType:g.authType,deviceId:(k=g.deviceId)!=null?k:void 0,dgwVersion:g.dgwVersion,fbId:g.fbId,tier:g.tier,loggingId:(h=g.loggingId)!=null?h:void 0,headers:a.__prefixAppHeaders(g.headers),endpoint:g.connectEndpoint,serviceId:g.serviceId,regionHint:(k=g.regionHint)!=null?k:void 0,establishStreamFrame:f,authToken:(h=g.authToken)!=null?h:void 0});this.$1=e(k);if(!k.includes(d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64))return;f=new(d("DGWLoggingContext").DGWLoggingContext)(this.$14.dgwVersion,l.loggingId,this.$14.serviceId,this.$14.fbId,this.$14.loggingId,l.disableFalcoLogging);h=this.__createGroupedStream(o,m,l,f);this.$16=this.waitForEstablishStream(o,h,l,function(a){n.$5.set(o,a)},function(){n.$17.putBackStreamId(o)})}else this.$1=e(b);this.$23.streamRequested(g.serviceId);(i||(i=c("QuickPerformanceLogger"))).markerStart(j,this.$20);this.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId}})}var e=a.prototype;e.send=function(a){try{this.$1.send(a);return!0}catch(a){this.$13.transportError("Failed to send over transport","readyState: "+this.$1.readyState,a.toString());return!1}};e.close=function(){var a;this.$23.streamClosed(this.$14.serviceId);this.__markerPoint("teardown");this.$8=!0;(a=this.$10)==null||a.cancel();this.$1.onopen=function(a){};this.$1.onmessage=function(a){};this.$1.onerror=function(a){};this.$1.onclose=function(a){};this.$1.close()};e.onClose=function(a){var b;this.$23.streamClosed(this.$14.serviceId);this.__markerPoint("abort");this.__markerAnnotate({"int":{abort_code:a}});this.$8=!0;(b=this.$10)==null||b.cancel();this.$1.close(a)};e.abort=function(a,b,c,d,e){if(this.$8)return;this.$23.streamClosed(this.$14.serviceId);this.$8=!0;this.$13.transportClosed(!1,d,e);this.$5.forEach(function(a){a.__transportCloseHook(b)});this.$6.forEach(function(a){a.abortStream(b)});this.$14.streamGroupCallbacks.onStreamGroupError(a);this.$5.clear();this.$6.clear();this.$15();this.onClose(c)};a.getTransportWithInitialStream=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c,e,f,g,h){yield d("DGWUtils").DGWCodec.initialize();var i=new(d("DGWTransportEvents").DGWTransportEvents)(f);i.transportEstablishmentPending();var j=function(){return a.$24("",e,i,g,f,b,c)};try{j=(yield d("DGWExponentialBackoff").callWithExponentialBackoff(j,h));h=j.$16!=null?j.$16:j.establishGroupedStream(c,b,new(d("DGWLoggingContext").DGWLoggingContext)(e.dgwVersion,b.loggingId,e.serviceId,e.fbId,e.loggingId,b.disableFalcoLogging));return{transport:j,streamPromise:h}}catch(a){throw a}});function e(a,b,d,e,f,g){return c.apply(this,arguments)}return e}();a.getTransport_DEPRECATED=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c,e,f,g){yield d("DGWUtils").DGWCodec.initialize();var h=new(d("DGWTransportEvents").DGWTransportEvents)(e);h.transportEstablishmentPending();var i=function(){return a.$24(b,c,h,f,e)};try{return yield d("DGWExponentialBackoff").callWithExponentialBackoff(i,g)}catch(a){throw a}});function e(a,b,d,e,f){return c.apply(this,arguments)}return e}();e.establishGroupedStream=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d,e,f,g,i){var j=this;g===void 0&&(g=!0);var k=this.getStreamId(),m=this.createEstablishStreamFrame(k,d);a=this.__createGroupedStream(k,a,d,e);a.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId,streamId:d.streamTraceId}});i!=null&&a.__markerAnnotate(i);e=this.waitForEstablishStream(k,a,d,function(a){j.$5.set(k,a)},function(){j.$17.putBackStreamId(k)});if(f!=null){a.__markerPoint("send_payload_start");a.__markerAnnotate({"int":{establishStreamPayloadSize:f.byteLength}});i=g?yield a.sendFrame(m,f,l):a.sendFrameAndForget(m,f);if(!i){a.__endMarker(3);return(h||(h=b("Promise"))).reject("Failed to send data when establishing stream")}a.__markerPoint("send_payload_end");a.__endMarker(2);return(h||(h=b("Promise"))).resolve(a)}a.__markerPoint("send_establish_stream_start");if(!this.send(m)){a.__endMarker(3);throw c("err")("Websocket connection closed before stream established")}a.__markerPoint("send_establish_stream_end");d=(yield e);a.__endMarker(2);return d});function d(b,c,d,e,f,g){return a.apply(this,arguments)}return d}();a.__prefixAppHeaders=function(a){return Object.keys(a).reduce(function(b,c){b[""+d("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+c]=a[c];return b},{})};e.waitForEstablishStream=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,d,e,f){var g=this;this.$13.streamEstablishmentPending(a,d.loggingId);try{var i=(yield new(h||(h=b("Promise")))(function(b,d){g.$6.set(a,new n(c,b,d,3e4,function(){g.streamEndCallback(a)}))}));e(c);this.$13.streamEstablishmentSuccess(a,d.loggingId);return i}catch(b){f();this.$13.streamEstablishmentTimeout("Stream establishment timeout. readyState: "+this.$1.readyState,a,d.loggingId);throw b}});function c(b,c,d,e,f){return a.apply(this,arguments)}return c}();a.$24=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c,e,f,g,h,i){var j=new a(b,d("DGWWebSocketTransport").getWebSocketConnection,e,c,f,g,h,i);j.$1.onmessage=a.$25(j);j.$1.onopen=function(){j.__markerPoint("onopen"),e.transportEstablished(b),j.$10!=null&&j.$10.cancel(),j.$7!=null&&(j.$10=new(d("DGWPinger").DGWPinger)(j.$7,function(){j.$26()},function(){j.abort(d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_KEEPALIVE_TIMEOUT,d("DGWStream").StreamError.KEEPALIVE_TIMEOUT,d("DGWConstants").WebsocketCloseCodes.KEEPALIVE_TIMEOUT,"Aborting transport because of keepalive timeout","readyState:"+j.$1.readyState+", bufferedAmount:"+j.$1.bufferedAmount)}))};j.$1.onerror=function(){j.__markerPoint("onerror"),j.$13.transportError("onerror","readyState: "+j.$1.readyState)};j.$1.onclose=a.$27(j);c=(yield a.getTransportPromise(j));return c});function e(a,b,d,e,f,g,h){return c.apply(this,arguments)}return e}();a.getTransportPromise=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield new(h||(h=b("Promise")))(function(b,c){var e=a.$1.onerror,f=a.$1.onmessage,g=a.$1.onclose;a.$19=window.setTimeout(function(){a.$15(),a.$13.transportClosed(!1,"TIMEOUT"),a.__markerPoint("connect_timeout"),a.close(),c(d("DGWStream").StreamError.TRANSPORT_ESTABLISHMENT_TIMEOUT)},k*1e3);a.$1.onerror=function(){a.$19!=null&&(window.clearTimeout(a.$19),a.$19=null),e(),a.close(),m||c(d("DGWStream").StreamError.ESTABLISHMENT_ERROR)};a.$1.onclose=function(b){a.$19!=null&&(window.clearTimeout(a.$19),a.$19=null),g(b),b.code===d("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED?c(d("DGWStream").StreamError.UNAUTHORIZED):c(b.code+":"+b.reason)};a.$1.onmessage=function(c){f(c),a.$19!=null&&!a.$3&&(window.clearTimeout(a.$19),a.$19=null,a.__markerPoint("connect_success"),b(a))}}));return c});function c(b){return a.apply(this,arguments)}return c}();a.$25=function(a){return function(b){var c;a.$21||(a.$21=!0,a.__markerPoint("onmessage"));(c=a.$10)==null||c.reset();if(!(b.data instanceof ArrayBuffer)){a.$13.transportError("Incorrect Data Protocol","Received "+typeof b.data+" instead of ArrayBuffer");return}a.$2.append(new Uint8Array(b.data));a.$2.processData()}};a.$27=function(a){return function(b){var c=a.$23.getGlobalState();a.__markerPoint("onclose");a.__markerAnnotate({string:{reason:b.reason},"int":{code:b.code,realtimeWebSockets:c.realtime,lightspeedWebSockets:c.lightspeed}});a.__endMarker(b.code===d("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE?2:3);(c=a.$10)==null||c.cancel();if(a.$8===!0||a.$4)return;a.$23.streamClosed(a.$14.serviceId);a.$8=!0;if(a.$3===!0){a.$13.transportEstablishmentFailure(b);a.$5.clear();a.$15();return}a.$15();a.$3=!0;if(b.code!==d("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE){a.$13.transportClosed(!1,"Websocket connection failure with code: "+b.code+" reason: "+b.reason+" wasClean: "+String(b.wasClean));c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR;var e=d("DGWStream").StreamError.UNKNOWN_ERROR;switch(b.code){case d("DGWConstants").WebsocketCloseCodes.NORMAL_CLOSURE:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_NORMAL_CLOSURE;e=d("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case d("DGWConstants").WebsocketCloseCodes.ABNORMAL_CLOSURE:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_ABNORMAL_CLOSURE;e=d("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case d("DGWConstants").WebsocketCloseCodes.SERVER_INTERNAL_ERROR:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR;e=d("DGWStream").StreamError.SERVER_INTERNAL_ERROR;break;case d("DGWConstants").WebsocketCloseCodes.GOING_AWAY:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_GOING_AWAY;e=d("DGWStream").StreamError.GOING_AWAY;break;case d("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNAUTHORIZED;e=d("DGWStream").StreamError.UNAUTHORIZED;break;case d("DGWConstants").WebsocketCloseCodes.REJECTED:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_REJECTED;e=d("DGWStream").StreamError.REJECTED;break;case d("DGWConstants").WebsocketCloseCodes.BAD_REQUEST:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_BAD_REQUEST;e=d("DGWStream").StreamError.BAD_REQUEST;break;case d("DGWConstants").WebsocketCloseCodes.DGW_SERVER_ERROR:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR;e=d("DGWStream").StreamError.DGW_SERVER_ERROR;c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_DGW_SERVER_ERROR;break;default:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR;e=d("DGWStream").StreamError.UNKNOWN_ERROR;break}a.$14.streamGroupCallbacks.onStreamGroupError(c);a.$5.forEach(function(a){a.__transportCloseHook(e)});a.$6.forEach(function(a){a.abortStream(e)})}else a.$13.transportClosed(!0,""),a.$14.streamGroupCallbacks.onStreamGroupTransportClose(),a.$5.forEach(function(a){a.__transportCloseHook()}),a.$6.forEach(function(a){a.abortStream(d("DGWStream").StreamError.TRANSPORT_CLOSED_BEFORE_STREAM_INIT)});a.$5.clear();a.$6.clear()}};e.$26=function(){var a=this.$2.encodePing();if(a==null)throw c("err")("Failed to encode Ping Frame");var b=this.send(a);this.$18=this.$1.bufferedAmount;this.$13.transportPingSent("readyState:"+this.$1.readyState+", bufferedAmount:"+this.$18+", payloadSize:"+(a==null?void 0:a.byteLength)+", sent:"+String(b))};e.isClosedLocally=function(){return this.$3||this.$8||this.$4};e.streamEndCallback=function(a){this.$5["delete"](a),this.$6["delete"](a),this.$17.putBackStreamId(a)};e.canCreateGroupedStream=function(){return this.$17.streamIdAvailable()};e.createEstablishStreamFrame=function(b,e){var f=a.__prefixAppHeaders(e.groupedStreamHeaders);e.streamTraceId!=null&&(f[d("DGWConstants").HEADER_CONSTANTS.HEADER_STREAM_TRACE_ID]=e.streamTraceId);e=this.$2.encodeEstablishStream(b,new Uint8Array(this.$11.encode(JSON.stringify(f))));if(e==null){this.$17.putBackStreamId(b);throw c("err")("Failed to encode EstablishStreamFrame")}return e};e.getStreamId=function(){try{return this.$17.getNextStreamId()}catch(a){this.$13.ranOutOfStreamIds("inFlightGroupedStreamSize: "+this.$6.size+" groupedStreamSize: "+this.$5.size);throw a}};e.__createGroupedStream=function(a,b,c,e){var f=this;return new(d("GroupedStream").GroupedStream)(a,b,c,this,e,this.$2,function(){f.streamEndCallback(a)})};e.__getStreamIdGenerator=function(){return new(d("StreamIdGenerator").StreamIdGeneratorImpl)()};e.__markerPoint=function(a){var b=this.$20;(i||(i=c("QuickPerformanceLogger"))).markerPoint(j,a,{instanceKey:b})};e.__markerAnnotate=function(a){var b=this.$20;(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(j,a,{instanceKey:b})};e.__endMarker=function(a){(i||(i=c("QuickPerformanceLogger"))).markerEnd(j,a,this.$20)};return a}();g.StreamGroupWebSocketTransport=a}),98);
__d("StreamGroup",["DGWConstants","DGWLoggingContext","DGWUtils","StreamGroupWebSocketTransport","asyncToGeneratorRuntime","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h={maxRetries:c("justknobx")._("2595"),baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};a=function(){function a(a,b,e,f,g,h,i,j,k){this.$2=k;this.$1=k.getNewStreamGroupId();k=(k=i.overrideUrl)!=null?k:g;this.$5=null;g=h;if(c("justknobx")._("3090")){var l;g=(l=i.guestFbid)!=null?l:h}this.$3={appId:a,appVersion:b,authType:(l=i.authType)!=null?l:e,deviceId:i.deviceId,dgwVersion:f,headers:i.streamGroupAppHeaders,tier:(h=i.serviceTier)!=null?h:d("DGWConstants").DEFAULT_SERVICE_TIER,connectEndpoint:k,fbId:g,loggingId:i.loggingId,serviceId:i.serviceId,streamGroupCallbacks:j,keepAliveMs:i.keepAliveMs,regionHint:i.regionHint,enableFirstStreamOnWsHandshake:!1,authToken:i.authToken};this.$4=i;this.streamGroupLoggingContext=new(d("DGWLoggingContext").DGWLoggingContext)(this.$3.dgwVersion,null,this.$3.serviceId,this.$3.fbId,this.$4.loggingId,!1,(a=i.verboseLoggingEnabled)!=null?a:!1);this.$6=d("DGWUtils").DGWUtils.constructConnectUrl({appId:this.$3.appId,appVersion:this.$3.appVersion,authType:this.$3.authType,deviceId:(b=this.$3.deviceId)!=null?b:void 0,dgwVersion:this.$3.dgwVersion,fbId:this.$3.fbId,headers:babelHelpers["extends"]({},this.$3.headers),loggingId:(l=this.$3.loggingId)!=null?l:void 0,tier:this.$3.tier,serviceId:this.$3.serviceId,endpoint:this.$3.connectEndpoint,regionHint:(e=this.$3.regionHint)!=null?e:void 0,trafficTracing:(f=this.$4.trafficTracing)!=null?f:void 0,authToken:(h=this.$4.authToken)!=null?h:void 0})}var e=a.prototype;e.initTransport=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=this,a={maxRetries:0,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};this.$5=this.$5||d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){b.$2.removeStreamGroupAndTransport(b.$1)},a);var c;try{c=(yield this.$5),this.$5=null}catch(a){this.$5=null;throw a}this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,c);return c});function c(){return a.apply(this,arguments)}return c}();e.establishStream=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){var g=this;if(this.$2.containsStreamGroup(this.$1)===!1){this.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"createTransportWhenEstablishStream");if(!this.$3.enableFirstStreamOnWsHandshake){this.$5=this.$5||d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){g.$2.removeStreamGroupAndTransport(g.$1)},h);var i;try{i=(yield this.$5),this.$5=null}catch(a){this.$5=null;throw a}this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,i)}else{var j=(yield d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransportWithInitialStream(a,b,this.$3,this.streamGroupLoggingContext,function(){g.$2.removeStreamGroupAndTransport(g.$1)},h));this.$2.setStreamGroupAndTransport(this.$1,j.transport);return j.streamPromise}}return this.establishStreamWithTransport(a,b,c,e,f)});function c(b,c,d,e,f){return a.apply(this,arguments)}return c}();e.establishStreamWithTransport=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){var g=a.loggingId;this.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Establishing Grouped Stream","initialData:"+String(c!=null),!0,g);g=(yield this.$2.getStreamGroupTransport(this.$1).establishGroupedStream(b,a,new(d("DGWLoggingContext").DGWLoggingContext)(this.$3.dgwVersion,g,this.$3.serviceId,this.$3.fbId,this.$3.loggingId,a.disableFalcoLogging,(b=a.verboseLoggingEnabled)!=null?b:!1),c,e,f));return g});function c(b,c,d,e,f){return a.apply(this,arguments)}return c}();e.canCreateGroupedStream=function(){var a=!0;if(this.$2.containsStreamGroup(this.$1)!==!1){var b=this.$2.getStreamGroupTransport(this.$1);a=b.canCreateGroupedStream()}d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,a?"can_create":"cannot_create");return a};e.close=function(){var a=this.$2.getStreamGroupTransport(this.$1);a.close()};return a}();g.StreamGroup=a}),98);
__d("StreamGroupRegistry",["Random","err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=new Map(),this.$2=new Set()}var b=a.prototype;b.setStreamGroupAndTransport=function(a,b){this.$1.set(a,b)};b.containsStreamGroup=function(a){return this.$1.has(a)};b.removeStreamGroupAndTransport=function(a){this.$1["delete"](a)};b.getStreamGroupTransport=function(a){a=this.$1.get(a);if(a==null)throw c("err")("No stream group transport");return a};b.getNewStreamGroupId=function(){var a=d("Random").uint32();while(this.$2.has(a))a=d("Random").uint32();this.$2.add(a);return a};return a}();g.StreamGroupRegistry=a}),98);
__d("RawDGWClient",["CurrentUser","DGWAuth","DGWLoggingContext","DGWStream","StreamGroup","StreamGroupRegistry","isFastRefreshEnabledForCurrentDomain"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.appId,c=a.appVersion,e=a.authType,f=a.dgwVersion,g=a.endpoint;a=a.fbId;this.$1=b;this.$2=c;this.$3=e;this.$4=f;this.$5=g;this.$6=a;this.$7=new(d("StreamGroupRegistry").StreamGroupRegistry)()}var b=a.prototype;b.createStreamGroup=function(a,b){var c;this.handleUserChecks((c=b.authType)!=null?c:this.$3);return new(d("StreamGroup").StreamGroup)(this.$1,this.$2,this.$3,this.$4,this.$5,this.$6,b,a,this.$7)};b.handleUserChecks=function(a){if(!c("CurrentUser").isLoggedInNow()&&d("DGWAuth").fromDGWAuthToString(a)!=="GUEST"&&!c("isFastRefreshEnabledForCurrentDomain")()){d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.RAW_CLIENT,"unauthenticated");throw d("DGWStream").StreamError.UNAUTHENTICATED}};return a}();g.RawDGWClient=a}),98);
__d("DGWClient",["DGWAuth","DGWEnvUtil","DGWWebConfig","RawDGWClient","err"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("RawDGWClient").RawDGWClient)({appId:c("DGWWebConfig").appId,appVersion:c("DGWWebConfig").appVersion,authType:d("DGWAuth").fromStringToDGWAuth(c("DGWEnvUtil").getDGWAuthType()),dgwVersion:c("DGWEnvUtil").getDGWVersion(),endpoint:c("DGWEnvUtil").getDGWEndpoint(),fbId:c("DGWWebConfig").fbId});function a(){if(c("DGWEnvUtil").isDGWEnvCompatible())return h;else throw c("err")("unsupported_environment_retry_with_mqtt")}g["default"]=a}),98);
__d("DGWRequestStreamUtils",["Base64","WebDriverConfig","cr:3024","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,d,e,f){var g={};for(a of Object.entries(a)){var h=a[0],i=a[1];typeof i=="string"?g["XRSS-"+h]=i:typeof i=="number"?g["XRSN-"+h]=i.toString():typeof i=="boolean"?g["XRSB-"+h]=i.toString():typeof i=="object"&&i!=null&&(g["XRSO-"+h]=c("Base64").encode(JSON.stringify(i)))}d&&(g["xrs-body"]="true");e!=null&&e.length>0&&(g["xrs-instrumentation"]=c("Base64").encode(e));g["XRS-Accept-Ack"]="RSAck";f!=null&&f.ackTimeoutSec!=null&&(g["XRS-SRAck-Timeout"]=f.ackTimeoutSec.toString());g["XRSS-http_referer"]=window.location.href;if(c("WebDriverConfig").isTestRunning&&c("gkx")("20919")){h=b("cr:3024")==null?void 0:b("cr:3024").get();h!=null&&(g["XRSB-is_test"]="true",g["XRSS-original_request_id"]=h)}return g}function h(a){return Object.keys(a).reduce(function(b,c){(typeof a[c]==="string"||typeof a[c]==="boolean"||typeof a[c]==="number"||typeof a[c]==="object")&&(b[c]=a[c]);return b},{})}function d(a){if(a.response&&a.response.instrumentation_data!=null&&a.response.instrumentation_data.length>0)try{a=JSON.parse(new TextDecoder("utf-8").decode(a.response.instrumentation_data));return{auxId:a.auxId,dfTraceId:(a=a.dataFlowTracingData)==null?void 0:a.traceId}}catch(a){}return null}function e(a,b){var c=a.headers;a=a.body;b.kill_body===!0&&(a=null);b.new_body!=null&&(a=b.new_body);if(b.new_headers!=null)try{c=h(JSON.parse(b.new_headers))}catch(a){}if(b.patch_headers!=null)try{c=babelHelpers["extends"]({},c,h(JSON.parse(b.patch_headers)))}catch(a){}return{headers:c,body:a}}g.convertHeaders=a;g.cleanHeaders=h;g.getInstrumentationDataFieldsFromPayload=d;g.transformContextWithRewriteDelta=e}),98);
__d("DGWStreamHandler",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c,d,e){this.$2=a,this.$3=b,this.$4=c,this.$5=d,this.$6=e,this.$1=!0}var b=a.prototype;b.onClose=function(a){if(!this.$1)return;this.$2(a)};b.onDataReceived=function(a){if(!this.$1)return;this.$3(a)};b.onError=function(a){if(!this.$1)return;this.$4(a)};b.onStreamMustDrain=function(a,b){if(!this.$1)return;this.$5(a,b)};b.onServerHasFinishedSendingData=function(a){if(!this.$1)return;this.$6(a)};b.stop=function(){this.$1=!1};b.isStopped=function(){return!this.$1};return a}();f["default"]=a}),66);
__d("InflightAmends",["Deferred","err"],(function(a,b,c,d,e,f,g){"use strict";var h="inflight_amends_timeout",i="inflight_amends_duplicate_id";a=function(){function a(a,b,c){this.$1=a,this.$3=b,this.$4=c,this.$2=new Map()}var b=a.prototype;b.add=function(a){var b=this;if(this.$2.has(a))throw c("err")(i);var d=new(c("Deferred"))(),e=Date.now(),f=setTimeout(function(){b.$2.has(a)&&b.reject(a,c("err")(h))},this.$1);this.$2.set(a,{id:a,deferred:d,createdTimestampMs:e,timeoutId:f});return d.getPromise()};b.getPromise=function(a){return(a=this.$5(a))==null?void 0:a.deferred.getPromise()};b.resolve=function(a,b){a=this.$5(a);a&&(a.deferred.resolve==null||a.deferred.resolve(b),this.$3(a.id,Date.now()-a.createdTimestampMs),this.$6(a))};b.reject=function(a,b){a=this.$5(a);a&&(a.deferred.reject==null||a.deferred.reject(b),this.$4(a.id,b),this.$6(a))};b.rejectAll=function(a){for(var b of this.$2.entries()){var c=b[0];b[1];this.reject(c,a)}};b.getSize=function(){return this.$2.size};b.getAllPromises=function(){var a=[];for(var b of this.$2.values())a.push(b.deferred.getPromise());return a};b.$6=function(a){clearTimeout(a.timeoutId),this.$2["delete"](a.id)};b.$5=function(a){return this.$2.get(a)};return a}();g["default"]=a}),98);
__d("RequestStreamCloseReason",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["UserIntention","StartStreamFailure","StreamError","RemoteTermination","ServerDataEnd","ServerDrain","ReestablishError","ClientError"]);f.RequestStreamCloseReason=a}),66);
__d("RequestStreamCommonRequestStreamCommonSerializers",["RequestStreamCommonRequestStreamCommonTypes","ThriftTypes","jsbi"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{}}function b(){return{expected_existing_headers:"",patch_headers_if_match:""}}function e(){return{bytes:Uint8Array.of()}}function f(){return{message:""}}function i(){return{reason:d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0)}}function j(){return{}}function k(){return{stream_id:"0",last_sequencer:0,amendment_count:0,last_status:d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0)}}function l(){return{caller_timestamp_ms:"0"}}function m(){return{original_ping_timestamp_ms:"0"}}function n(){return{}}function o(a,b){b.writeStructBegin("ResponseRewriteRequest"),a.new_headers!=null&&(b.writeFieldBegin({fname:"new_headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.new_headers),b.writeFieldEnd()),a.new_body!=null&&(b.writeFieldBegin({fname:"new_body",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.new_body),b.writeFieldEnd()),a.patch_headers!=null&&(b.writeFieldBegin({fname:"patch_headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.patch_headers),b.writeFieldEnd()),a.kill_body!=null&&(b.writeFieldBegin({fname:"kill_body",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:4}),b.writeBool(a.kill_body),b.writeFieldEnd()),a.temporary!=null&&(b.writeFieldBegin({fname:"temporary",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:5}),b.writeBool(a.temporary),b.writeFieldEnd()),a.conditional_patch_headers!=null&&(b.writeFieldBegin({fname:"conditional_patch_headers",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),p(a.conditional_patch_headers,b),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function p(a,b){b.writeStructBegin("ResponseRewriteConditionalPatchHeaders");b.writeFieldBegin({fname:"expected_existing_headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.expected_existing_headers!=null)b.writeString(a.expected_existing_headers);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"patch_headers_if_match",ftype:h.STRING,fid:2});if(a.patch_headers_if_match!=null)b.writeString(a.patch_headers_if_match);else{d="";b.writeString(d)}b.writeFieldEnd();a.patch_headers_otherwise!=null&&(b.writeFieldBegin({fname:"patch_headers_otherwise",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.patch_headers_otherwise),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function q(a,b){b.writeStructBegin("ResponseData");b.writeFieldBegin({fname:"bytes",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.bytes!=null)b.writeBinary(a.bytes);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.metadata!=null&&(b.writeFieldBegin({fname:"metadata",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.metadata),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function r(a,b){b.writeStructBegin("LogMessage");b.writeFieldBegin({fname:"message",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.message!=null)b.writeString(a.message);else{a="";b.writeString(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function s(a,b){b.writeStructBegin("Termination");b.writeFieldBegin({fname:"reason",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.reason!=null){var e;b.writeI32((e=a.reason)!=null?e:0)}else{e=d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.message!=null&&(b.writeFieldBegin({fname:"message",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.message),b.writeFieldEnd());a.retry_delay_ms!=null&&(b.writeFieldBegin({fname:"retry_delay_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(c("jsbi").BigInt(a.retry_delay_ms)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function t(a,b){b.writeStructBegin("AmendStreamAck"),a.amendment_id!=null&&(b.writeFieldBegin({fname:"amendment_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.amendment_id)),b.writeFieldEnd()),a.accepted!=null&&(b.writeFieldBegin({fname:"accepted",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:2}),b.writeBool(a.accepted),b.writeFieldEnd()),a.result!=null&&(b.writeFieldBegin({fname:"result",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeBinary(a.result),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function u(a,b){b.writeStructBegin("StreamCheck");b.writeFieldBegin({fname:"stream_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.stream_id!=null)b.writeI64(c("jsbi").BigInt(a.stream_id));else{var e="0";b.writeI64(c("jsbi").BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"last_sequencer",ftype:h.I32,fid:2});if(a.last_sequencer!=null)b.writeI32(a.last_sequencer);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"amendment_count",ftype:h.I32,fid:4});if(a.amendment_count!=null)b.writeI32(a.amendment_count);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"last_status",ftype:h.I32,fid:3});if(a.last_status!=null){b.writeI32((e=a.last_status)!=null?e:0)}else{a=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0);b.writeI32(a!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function v(a,b){b.writeStructBegin("Ping");b.writeFieldBegin({fname:"caller_timestamp_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.caller_timestamp_ms!=null)b.writeI64(c("jsbi").BigInt(a.caller_timestamp_ms));else{var d="0";b.writeI64(c("jsbi").BigInt(d))}b.writeFieldEnd();if(a.streams_to_check!=null){b.writeFieldBegin({fname:"streams_to_check",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.streams_to_check.length});for(d of a.streams_to_check)u(d,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function w(a,b){b.writeStructBegin("Pong");b.writeFieldBegin({fname:"original_ping_timestamp_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.original_ping_timestamp_ms!=null)b.writeI64(c("jsbi").BigInt(a.original_ping_timestamp_ms));else{var d="0";b.writeI64(c("jsbi").BigInt(d))}b.writeFieldEnd();if(a.stream_ids_missing!=null){b.writeFieldBegin({fname:"stream_ids_missing",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.I64,size:a.stream_ids_missing.length});for(d of a.stream_ids_missing)b.writeI64(c("jsbi").BigInt(d));b.writeListEnd();b.writeFieldEnd()}if(a.stream_ids_behind!=null){b.writeFieldBegin({fname:"stream_ids_behind",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:3});b.writeListBegin({etype:h.I64,size:a.stream_ids_behind.length});for(d of a.stream_ids_behind)b.writeI64(c("jsbi").BigInt(d));b.writeListEnd();b.writeFieldEnd()}if(a.stream_ids_with_lost_amendments!=null){b.writeFieldBegin({fname:"stream_ids_with_lost_amendments",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:4});b.writeListBegin({etype:h.I64,size:a.stream_ids_with_lost_amendments.length});for(d of a.stream_ids_with_lost_amendments)b.writeI64(c("jsbi").BigInt(d));b.writeListEnd();b.writeFieldEnd()}if(a.stream_ids_with_wrong_status!=null){b.writeFieldBegin({fname:"stream_ids_with_wrong_status",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:5});b.writeListBegin({etype:h.I64,size:a.stream_ids_with_wrong_status.length});for(d of a.stream_ids_with_wrong_status)b.writeI64(c("jsbi").BigInt(d));b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function x(a,b){b.writeStructBegin("StreamResponseDelta");if(a.flow_status!=null){var d;b.writeFieldBegin({fname:"flow_status",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});b.writeI32((d=a.flow_status)!=null?d:0);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.log!=null){b.writeFieldBegin({fname:"log",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2});r(a.log,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.rewrite!=null){b.writeFieldBegin({fname:"rewrite",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3});o(a.rewrite,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.data!=null){b.writeFieldBegin({fname:"data",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4});q(a.data,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.termination!=null){b.writeFieldBegin({fname:"termination",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5});s(a.termination,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.amend_ack!=null){b.writeFieldBegin({fname:"amend_ack",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6});t(a.amend_ack,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}b.writeFieldStop();b.writeStructEnd()}function y(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.new_headers=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.new_body=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.patch_headers=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).BOOL?b.kill_body=a.readBool():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).BOOL?b.temporary=a.readBool():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).STRUCT?b.conditional_patch_headers=z(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function z(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.expected_existing_headers=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.patch_headers_if_match=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.patch_headers_otherwise=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.expected_existing_headers===void 0&&(b.expected_existing_headers="");b.patch_headers_if_match===void 0&&(b.patch_headers_if_match="");return b}function A(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.bytes=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.metadata=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.bytes===void 0&&(b.bytes=Uint8Array.of());return b}function B(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.message=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.message===void 0&&(b.message="");return b}function C(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.reason=d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.message=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I64?b.retry_delay_ms=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.reason===void 0&&(b.reason=d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0));return b}function D(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.amendment_id=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).BOOL?b.accepted=a.readBool():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.result=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function E(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.stream_id=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.last_sequencer=a.readI32():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.amendment_count=a.readI32():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.last_status=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.stream_id===void 0&&(b.stream_id="0");b.last_sequencer===void 0&&(b.last_sequencer=0);b.amendment_count===void 0&&(b.amendment_count=0);b.last_status===void 0&&(b.last_status=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0));return b}function F(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.caller_timestamp_ms=a.readI64().toString():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.streams_to_check=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=E(a);b.streams_to_check.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.caller_timestamp_ms===void 0&&(b.caller_timestamp_ms="0");return b}function G(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.original_ping_timestamp_ms=a.readI64().toString():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_missing=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readI64().toString();b.stream_ids_missing.push(g)}}else a.skip(e);break;case 3:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_behind=[];g=a.readListBegin();for(f=0;f<g.size;f++){d=a.readI64().toString();b.stream_ids_behind.push(d)}}else a.skip(e);break;case 4:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_with_lost_amendments=[];d=a.readListBegin();for(f=0;f<d.size;f++){g=a.readI64().toString();b.stream_ids_with_lost_amendments.push(g)}}else a.skip(e);break;case 5:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_with_wrong_status=[];g=a.readListBegin();for(f=0;f<g.size;f++){d=a.readI64().toString();b.stream_ids_with_wrong_status.push(d)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.original_ping_timestamp_ms===void 0&&(b.original_ping_timestamp_ms="0");return b}function H(a){var b,e={};a.readStructBegin();while(!0){var f=a.readFieldBegin(),g=f.ftype;f=f.fid;if(g===(h||(h=c("ThriftTypes"))).STOP)break;switch(f){case 1:if(g===(h||(h=c("ThriftTypes"))).I32)if(b==null)e.flow_status=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(a.readI32()),b="flow_status";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: flow_status, previous deserialized field: "+b);else a.skip(g);break;case 2:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.log=B(a),b="log";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: log, previous deserialized field: "+b);else a.skip(g);break;case 3:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.rewrite=y(a),b="rewrite";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: rewrite, previous deserialized field: "+b);else a.skip(g);break;case 4:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.data=A(a),b="data";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: data, previous deserialized field: "+b);else a.skip(g);break;case 5:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.termination=C(a),b="termination";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: termination, previous deserialized field: "+b);else a.skip(g);break;case 6:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.amend_ack=D(a),b="amend_ack";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: amend_ack, previous deserialized field: "+b);else a.skip(g);break;default:a.skip(g)}a.readFieldEnd()}a.readStructEnd();return e}g.ResponseRewriteRequest$DefaultConstructor=a;g.ResponseRewriteConditionalPatchHeaders$DefaultConstructor=b;g.ResponseData$DefaultConstructor=e;g.LogMessage$DefaultConstructor=f;g.Termination$DefaultConstructor=i;g.AmendStreamAck$DefaultConstructor=j;g.StreamCheck$DefaultConstructor=k;g.Ping$DefaultConstructor=l;g.Pong$DefaultConstructor=m;g.StreamResponseDelta$DefaultConstructor=n;g.serializeResponseRewriteRequest=o;g.serializeResponseRewriteConditionalPatchHeaders=p;g.serializeResponseData=q;g.serializeLogMessage=r;g.serializeTermination=s;g.serializeAmendStreamAck=t;g.serializeStreamCheck=u;g.serializePing=v;g.serializePong=w;g.serializeStreamResponseDelta=x;g.deserializeResponseRewriteRequest=y;g.deserializeResponseRewriteConditionalPatchHeaders=z;g.deserializeResponseData=A;g.deserializeLogMessage=B;g.deserializeTermination=C;g.deserializeAmendStreamAck=D;g.deserializeStreamCheck=E;g.deserializePing=F;g.deserializePong=G;g.deserializeStreamResponseDelta=H}),98);
__d("RequestStreamSingleChannelSingleChannelRequestStreamTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({Ignored:100,Success:200,Queued:250,UnknownStream:400,HandledUnknownResult:450,Failure:500});c=b("$InternalEnum")({Request_headers:"request_headers",Request_body:"request_body",Amend:"amend",Ack:"ack",Response:"response",Ping:"ping",Pong:"pong"});e.exports={Ack:a,Payload$Types:c}}),null);
__d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers",["RequestStreamCommonRequestStreamCommonSerializers","RequestStreamCommonRequestStreamCommonTypes","RequestStreamSingleChannelSingleChannelRequestStreamTypes","ThriftTypes","jsbi"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{}}function b(){return{body:Uint8Array.of()}}function e(){return{amendment:Uint8Array.of()}}function f(){return{ack:d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0)}}function i(){return{delta:[]}}function j(){return{}}function k(a,b){b.writeStructBegin("RequestStreamHeaders"),a.headers!=null&&(b.writeFieldBegin({fname:"headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeBinary(a.headers),b.writeFieldEnd()),a.instrumentation_data!=null&&(b.writeFieldBegin({fname:"instrumentation_data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.instrumentation_data),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function l(a,b){b.writeStructBegin("RequestStreamBody");b.writeFieldBegin({fname:"body",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.body!=null)b.writeBinary(a.body);else{a=Uint8Array.of();b.writeBinary(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function m(a,b){b.writeStructBegin("AmendStream");a.amendment_id!=null&&(b.writeFieldBegin({fname:"amendment_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.amendment_id)),b.writeFieldEnd());b.writeFieldBegin({fname:"amendment",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.amendment!=null)b.writeBinary(a.amendment);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.is_query!=null&&(b.writeFieldBegin({fname:"is_query",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:3}),b.writeBool(a.is_query),b.writeFieldEnd());a.instrumentation_data!=null&&(b.writeFieldBegin({fname:"instrumentation_data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.instrumentation_data),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function n(a,b){b.writeStructBegin("StreamResponseAck");a.response_id!=null&&(b.writeFieldBegin({fname:"response_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.response_id)),b.writeFieldEnd());b.writeFieldBegin({fname:"ack",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});if(a.ack!=null){var e;b.writeI32((e=a.ack)!=null?e:0)}else{e=d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.query_result!=null&&(b.writeFieldBegin({fname:"query_result",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeBinary(a.query_result),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function o(a,b){b.writeStructBegin("StreamResponse");a.response_id!=null&&(b.writeFieldBegin({fname:"response_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.response_id)),b.writeFieldEnd());b.writeFieldBegin({fname:"delta",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});if(a.delta!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.delta.length});for(var e of a.delta)d("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(e,b);b.writeListEnd()}else{e=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:e.length});for(e of e)d("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(e,b);b.writeListEnd()}b.writeFieldEnd();if(a.ack_level!=null){b.writeFieldBegin({fname:"ack_level",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3});b.writeI32((e=a.ack_level)!=null?e:0);b.writeFieldEnd()}a.query_request!=null&&(b.writeFieldBegin({fname:"query_request",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.query_request),b.writeFieldEnd());a.instrumentation_data!=null&&(b.writeFieldBegin({fname:"instrumentation_data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeBinary(a.instrumentation_data),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function p(a,b){b.writeStructBegin("Payload");if(a.request_headers!=null){b.writeFieldBegin({fname:"request_headers",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});k(a.request_headers,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.request_body!=null){b.writeFieldBegin({fname:"request_body",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2});l(a.request_body,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.amend!=null){b.writeFieldBegin({fname:"amend",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3});m(a.amend,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.ack!=null){b.writeFieldBegin({fname:"ack",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4});n(a.ack,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.response!=null){b.writeFieldBegin({fname:"response",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5});o(a.response,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.ping!=null){b.writeFieldBegin({fname:"ping",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6});d("RequestStreamCommonRequestStreamCommonSerializers").serializePing(a.ping,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.pong!=null){b.writeFieldBegin({fname:"pong",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7});d("RequestStreamCommonRequestStreamCommonSerializers").serializePong(a.pong,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}b.writeFieldStop();b.writeStructEnd()}function q(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.headers=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.instrumentation_data=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function r(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.body=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.body===void 0&&(b.body=Uint8Array.of());return b}function s(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.amendment_id=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.amendment=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).BOOL?b.is_query=a.readBool():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.instrumentation_data=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.amendment===void 0&&(b.amendment=Uint8Array.of());return b}function t(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.response_id=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.ack=d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.query_result=a.readBinary():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.ack===void 0&&(b.ack=d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0));return b}function u(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.response_id=a.readI64().toString():a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).LIST){b.delta=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("RequestStreamCommonRequestStreamCommonSerializers").deserializeStreamResponseDelta(a);b.delta.push(i)}}else a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.ack_level=d("RequestStreamCommonRequestStreamCommonTypes").AckLevel.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.query_request=a.readBinary():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.instrumentation_data=a.readBinary():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.delta===void 0&&(b.delta=[]);return b}function v(a){var b,e={};a.readStructBegin();while(!0){var f=a.readFieldBegin(),g=f.ftype;f=f.fid;if(g===(h||(h=c("ThriftTypes"))).STOP)break;switch(f){case 1:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.request_headers=q(a),b="request_headers";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_headers, previous deserialized field: "+b);else a.skip(g);break;case 2:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.request_body=r(a),b="request_body";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_body, previous deserialized field: "+b);else a.skip(g);break;case 3:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.amend=s(a),b="amend";else throw new Error("more than one field have been deserialized in union type: Payload; current field: amend, previous deserialized field: "+b);else a.skip(g);break;case 4:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.ack=t(a),b="ack";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ack, previous deserialized field: "+b);else a.skip(g);break;case 5:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.response=u(a),b="response";else throw new Error("more than one field have been deserialized in union type: Payload; current field: response, previous deserialized field: "+b);else a.skip(g);break;case 6:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.ping=d("RequestStreamCommonRequestStreamCommonSerializers").deserializePing(a),b="ping";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ping, previous deserialized field: "+b);else a.skip(g);break;case 7:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.pong=d("RequestStreamCommonRequestStreamCommonSerializers").deserializePong(a),b="pong";else throw new Error("more than one field have been deserialized in union type: Payload; current field: pong, previous deserialized field: "+b);else a.skip(g);break;default:a.skip(g)}a.readFieldEnd()}a.readStructEnd();return e}g.RequestStreamHeaders$DefaultConstructor=a;g.RequestStreamBody$DefaultConstructor=b;g.AmendStream$DefaultConstructor=e;g.StreamResponseAck$DefaultConstructor=f;g.StreamResponse$DefaultConstructor=i;g.Payload$DefaultConstructor=j;g.serializeRequestStreamHeaders=k;g.serializeRequestStreamBody=l;g.serializeAmendStream=m;g.serializeStreamResponseAck=n;g.serializeStreamResponse=o;g.serializePayload=p;g.deserializeRequestStreamHeaders=q;g.deserializeRequestStreamBody=r;g.deserializeAmendStream=s;g.deserializeStreamResponseAck=t;g.deserializeStreamResponse=u;g.deserializePayload=v}),98);
__d("RequestStreamState",["RequestStreamCommonRequestStreamCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){switch(b){case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:if(a.seenAccepted)return a;return a.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?a:{flowStatus:d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted,seenAccepted:!0};default:if(!a.seenAccepted||a.flowStatus===b)return a;else return{flowStatus:b,seenAccepted:!0}}}g.getNextState=a}),98);
__d("StreamRetryState",[],(function(a,b,c,d,e,f){"use strict";var g=1e3,h=2*60*1e3;a=function(){function a(){this.$1=0}var b=a.prototype;b.resetErrorAndRetryCount=function(){this.$1=0};b.onRetry=function(){this.$1+=1};b.getRetryCount=function(){return this.$1};b.getBackoffDelayMs=function(){if(this.$1<=1)return 0;if(this.$1===2)return g*Math.random();var a=g*Math.pow(2,this.$1-3),b=a*Math.random();a=a+b;return Math.min(a,h)};return a}();f["default"]=a}),66);
__d("DGWRequestStreamRef",["CompactSerializerPolyfill","DGWRequestStreamUtils","DGWStream","DGWStreamHandler","InflightAmends","ODS","Promise","RequestStreamCloseReason","RequestStreamCommonRequestStreamCommonTypes","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamSingleChannelSingleChannelRequestStreamSerializers","RequestStreamSingleChannelSingleChannelRequestStreamTypes","RequestStreamState","RequestStreamTransport","RtiWebRequestStreamClient","StreamRetryState","asyncToGeneratorRuntime","err","gkx","justknobx","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=4,k=0,l=1e3,m=2,n=c("gkx")("20915")?3e4:5e3,o="dgw_stream_send_ack_failure",p=(a=c("qex")._("2097"))!=null?a:!1,q=(e=c("qex")._("2100"))!=null?e:!1;function r(a){if(!a){a=c("err")(o);a.stack;throw a}}function s(a,b){if(a==null||a.length===0)return null;a=JSON.parse(a);a.auxId=b;return new TextEncoder().encode(JSON.stringify(a))}function t(a){var b={};a=a.delta;a.forEach(function(a){if(a.flow_status){b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Flow_status;switch(a.flow_status){case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:b.flow_status="Accepted";break;case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started:b.flow_status="Started";break;case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped:b.flow_status="Stopped";break}}else a.log?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Log:a.rewrite?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Rewrite:a.data?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Data:a.termination?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Termination:a.amend_ack&&(b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Amend_ack)});return b}f=function(){function a(a,b,e,f,g,h){var i=this,k;this.$6=null;this.$7={};this.$10=!1;this.$15=new(c("StreamRetryState"))();this.$16=0;this.$17=0;this.$18=0;this.$21=0;var l=null;typeof b==="string"?l=new TextEncoder().encode(b):typeof b==="object"&&(l=b);this.$1={headers:a,body:l};this.$3=e;this.$4=f;this.$12=j;this.$9=!1;this.$14=!1;this.$20=h;l=f==null?void 0:f.serviceId;g!=null&&(this.$22()||(g.dgwStreamGroupLoggingId=this.$20.getStreamGroupLoggingId(l)),g.dgwCountPriorStreamsInGroup=this.$20.guessStreamGroupPriorStreamCount(l),g.transport="WEB_RS_STARGATE");this.$5=d("RequestStreamE2ESampling").validateInstrumentationData(a,g,f==null?void 0:f.requestLogContext,f==null?void 0:f.upsampleMultiplier);!this.$22()?this.$6=d("RequestStreamE2ELogger").createStreamLogger(a,this.$5,d("RequestStreamTransport").RequestStreamTransport.WEB_RS_STARGATE):this.$7.disableFalcoLogging=!0;(f==null?void 0:f.deviceId)!=null&&(this.$7.deviceId=f.deviceId);this.$6&&(this.$7.loggingId=this.$6.getRequestId());f&&f.overrideUrl!=null&&(this.$7.overrideUrl=f.overrideUrl);l!=null&&(this.$7.serviceId=l);this.$8={flowStatus:d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped,seenAccepted:!1};this.$19=new(c("InflightAmends"))(n,function(a,b){var d;(d=i.$6)==null||d.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,c("RequestStreamE2EClientLoggerEvent").RECEIVED,babelHelpers["extends"]({},i.$23(),{latency:b.toString()}),a)},function(a,b){if(b.message!==o){var d;(d=i.$6)==null||d.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,c("RequestStreamE2EClientLoggerEvent").FAILURE,babelHelpers["extends"]({},i.$23(),{reason:b.message}),a)}});(e=this.$6)==null||e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:(h=b==null||(k=b.length)==null?void 0:k.toString())!=null?h:"0"},"0","0")}var e=a.prototype;e.getInstrumentationData=function(){return this.$5};e.getE2EClientLogger=function(){return this.$6};e.amendWithAck=function(a){a=this.$24(a,!0);return a==null?(i||(i=b("Promise"))).resolve(!1):this.$19.getPromise(a)||(i||(i=b("Promise"))).resolve(!1)};e.amendWithoutAck=function(a){this.$24(a,!1)};e.cancel=function(){var a;(a=this.$6)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").CANCEL,c("RequestStreamE2EClientLoggerEvent").RECEIVED);this.$9=!0;this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)};e.start=function(a){var e=this;a===void 0&&(a=!1);var f=String(this.$16++),g=Date.now();return this.$26(f).then(function(){var a;e.$14=!1;e.$21=0;var b=(Date.now()-g).toString();(a=e.$6)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:b},f,String(e.$18))})["catch"](function(g){g.stack;if(g.message===o&&e.$10)return;e.$14=!1;if(g!==d("DGWStream").StreamError.ESTABLISHMENT_ERROR){var h,j=g.message;g===d("DGWStream").StreamError.UNAUTHENTICATED?j="UNAUTHENTICATED":g===d("DGWStream").StreamError.UNAUTHORIZED&&(j="UNAUTHORIZED");(h=e.$6)==null||h.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:j},f,String(e.$18));e.$25(a?d("RequestStreamCloseReason").RequestStreamCloseReason.ReestablishError:d("RequestStreamCloseReason").RequestStreamCloseReason.StartStreamFailure,j,!0);if(g===d("DGWStream").StreamError.UNAUTHENTICATED||g===d("DGWStream").StreamError.UNAUTHORIZED)return;throw g}else{(h=e.$6)==null||h.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:(j=g.message)!=null?j:g},f,String(e.$18));e.$15.onRetry();var k=c("gkx")("20916")?e.$15.getBackoffDelayMs():l*Math.pow(m,e.$21);return new(i||(i=b("Promise")))(function(a){return window.setTimeout(a,k)}).then(function(){e.$21++;e.$18++;return e.start()})}})};e.getFlowStatus=function(){return this.$8.flowStatus};e.shouldTerminateOrRetry=function(a,e,f,g){var h=this;if(this.$14)return;var j=e;this.$12||(j="cannot retry for error: "+e+" because of hit max retry limitation");if(a!==d("RequestStreamCloseReason").RequestStreamCloseReason.ClientError){(e=this.$6)==null||e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:j},null,String(this.$18))}e=f&&(c("gkx")("20916")||this.$12);this.$25(a,j,!e);if(e){var l=c("gkx")("20916")?Math.max(g!=null?g:0,this.$15.getBackoffDelayMs()):g!=null?g:k;this.$14=!0;return new(i||(i=b("Promise")))(function(a){return window.setTimeout(a,l)}).then(function(){return h.$27()})["catch"](function(a){})}};e.$28=function(){return this.$11!=null};e.$24=function(a,b){var e,f=this,g=typeof a==="string"?new TextEncoder().encode(a):a,h=String(this.$17++);(e=this.$6)==null||e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{},h);e=s(this.$5,h);g={amend:{amendment:g,instrumentation_data:e}};b&&g.amend&&(g.amend.amendment_id=h);e=d("CompactSerializerPolyfill").serialize(g,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);var i=Date.now();if(this.$29()&&this.$11!=null){var j;b&&this.$19.add(h);this.$11.send(e).then(function(a){var b;r(a);a=(Date.now()-i).toString();(b=f.$6)==null||b.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:a},h)})["catch"](function(a){var b;(b=f.$6)==null||b.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:a.message},h);f.$19.reject(h,a)});(g=this.$6)==null||g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").SENT,{data_size:(b=a==null||(j=a.length)==null?void 0:j.toString())!=null?b:"0"},h);return h}else{(e=this.$6)==null||e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},h)}};e.$26=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this;if(!this.$9){var e=this.$2||this.$1;try{var f=this.$30();this.$13=f;var g=e.headers.graphiql_sandbox,h=babelHelpers["extends"]({},e.headers,this.$31());g!=null&&(h=babelHelpers["extends"]({},h,{www_sandbox:g,distillery_sandbox:g+":8086"}));g=d("DGWRequestStreamUtils").convertHeaders(h,e.body!=null,this.$5);this.$11=(yield this.$20.establishStream(g,f,this.$7))}catch(a){if(a===d("DGWStream").StreamError.ESTABLISHMENT_ERROR)throw a;if(d("DGWStream").StreamError.isValid(a)&&!d("DGWStream").isRetryableError(a))throw a;else if(d("DGWStream").StreamError.isValid(a)&&d("DGWStream").isRetryableError(a)){this.$32(a);return}throw a}if(this.$9){this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0);return}h=new Uint8Array([]);if(e.body!=null){g={request_body:{body:e.body}};h=d("CompactSerializerPolyfill").serialize(g,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload)}if(!this.$11)throw new Error("dgwstream_is_null");f=this.$11.send(h).then(function(a){r(a),b.$9&&b.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)});(e=this.$6)==null||e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").SENT,{},a,String(this.$18));this.$12=j;return f}else throw new Error("stream_already_canceled")});function e(b){return a.apply(this,arguments)}return e}();e.$29=function(){return this.$8.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started||this.$8.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted};e.$25=function(a,b,c){var e;this.$11&&a!==d("RequestStreamCloseReason").RequestStreamCloseReason.StreamError&&a!==d("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination&&this.$11.close();(e=this.$13)==null||e.stop();this.$11=null;this.$10=!0;this.$33(d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped)&&this.$3.onFlowStatus(d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped);c&&!this.$9&&this.$3.onTermination("terminate stream because "+a+" with msg : "+b)};e.$33=function(a){var b=this.$8;this.$8=d("RequestStreamState").getNextState(b,a);return b!==this.$8};e.$27=function(){this.$12--;this.$18++;this.$15.onRetry();return this.start(!0)};e.$34=function(a){var b=this;a=d("CompactSerializerPolyfill").deserialize(a,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").deserializePayload);if(a.response){var e=d("DGWRequestStreamUtils").getInstrumentationDataFieldsFromPayload(a),f=e==null?void 0:e.auxId;e=e==null?void 0:e.dfTraceId;if(!this.$28()){var g;(g=this.$6)==null||g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"response_received_after_close"},f,String(this.$18),e);return}var i;(g=this.$6)==null||g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").RECEIVED,t(a.response),f,String(this.$18),e,i);g=a.response.delta;g.forEach(function(a){if(a.data)b.$15.resetErrorAndRetryCount(),c("justknobx")._("4109")?b.$3.onData(new TextDecoder("utf-8").decode(a.data.bytes)):b.$8.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?b.$3.onData(new TextDecoder("utf-8").decode(a.data.bytes)):(h||(h=d("ODS"))).bumpEntityKey(110,"RequestStream","data_before_started_"+(b.$22()?"falco":"graphql"));else if(a.flow_status){var e=a.flow_status;e===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started&&b.$15.resetErrorAndRetryCount();b.$33(e)&&b.$3.onFlowStatus(e)}else if(a.termination){e=(e=a.termination.message)!=null?e:"unknown termination msg";b.$2=null;b.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,e,a.termination.reason===d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.TryAgain,a.termination.retry_delay_ms!=null?parseInt(a.termination.retry_delay_ms,10):null)}else if(a.log)b.$3.onLog(a.log.message);else if(a.amend_ack){e=a.amend_ack.amendment_id;if(e!=null){var f=a.amend_ack.accepted||!1;b.$19.resolve(e,f)}}else if(a.rewrite){e=d("DGWRequestStreamUtils").transformContextWithRewriteDelta(b.$1,a.rewrite);a.rewrite.temporary===!0?b.$2=e:b.$1=e}});(g=this.$6)==null||g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").SENT,t(a.response),f,String(this.$18),e);a.response.ack_level===d("RequestStreamCommonRequestStreamCommonTypes").AckLevel.Device&&a.response.response_id!=null&&this.$35(a.response.response_id,f)}else{(g=this.$6)==null||g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"unexpected_payload_type"},null,String(this.$18))}};e.$35=function(a,b){a={ack:{response_id:a,ack:d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.Success}};a=d("CompactSerializerPolyfill").serialize(a,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);if(this.$11!=null){this.$11.send(a);(a=this.$6)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,c("RequestStreamE2EClientLoggerEvent").SENT,{},b,String(this.$18))}else{(a=this.$6)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},b,String(this.$18))}};e.$22=function(){return this.$1.headers.method==="Falco"};e.$30=function(){return new(c("DGWStreamHandler"))(this.$36.bind(this),this.$37.bind(this),this.$32.bind(this),this.$38.bind(this),this.$39.bind(this))};e.$39=function(a){(a=this.$6)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Has FinishedSendingData"},null,String(this.$18));this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.ServerDataEnd,"Client receive OnServerHasFinishedSendingData and Server will not send more data",!0)};e.$36=function(a){(a=this.$6)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Close Connection"},null,String(this.$18));this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,"Client receive OnClose and Server will not send more data",!0)};e.$37=function(a){try{this.$34(a)}catch(b){(a=this.$6)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:b.message},null,String(this.$18));this.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.ClientError,b.message,!1)}};e.$32=function(a){var b="",c=d("DGWStream").isRetryableError(a);b="StreamError: Received "+a;a=p?this.$12>0:c;c=q?l*m:void 0;this.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.StreamError,b,a,c)};e.$38=function(a,b){this.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.ServerDrain,b,!0)};e.$31=function(){return c("RtiWebRequestStreamClient").overrideHeaders};e.$23=function(){var a={};c("gkx")("20918")&&(a.pending_amendments_size=this.$19.getSize().toString());return a};return a}();g["default"]=f}),98);
__d("DGWStreamGroupHandler",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}var b=a.prototype;b.onStreamGroupError=function(a){this.$1(a)};b.onStreamGroupMustDrain=function(a){this.$2(a)};b.onStreamGroupTransportClose=function(){this.$3()};return a}();f["default"]=a}),66);
__d("DGWStreamFactory",["DGWClient","DGWStreamGroupHandler","Promise","gkx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i="realtime",j=1e4,k=null;a=function(){function a(){this.$1={}}a.get=function(){k==null&&(k=new a());return k};var d=a.prototype;d.$2=function(a){var b;this.$1=(b={},b[a]={dgwStreamGroup:null,multiStreamGroupLoggingId:null,multiStreamGroupPriorStreamCountGuess:0},b)};d.getStreamGroupLoggingId=function(a){a===void 0&&(a=null);return(a=this.$1[a!=null?a:i])==null?void 0:a.multiStreamGroupLoggingId};d.guessStreamGroupPriorStreamCount=function(a){a===void 0&&(a=null);return((a=this.$1[a!=null?a:i])==null?void 0:a.multiStreamGroupPriorStreamCountGuess)||0};d.establishStream=function(a,d,e){var f,g=this,k=e.serviceId==null?i:e.serviceId;f=(f=this.$1[k])==null?void 0:f.dgwStreamGroup;if(f==null||!f.canCreateGroupedStream()){var l={deviceId:e.deviceId,serviceId:k,disableFalcoLogging:e.disableFalcoLogging,streamGroupAppHeaders:{"stream-group":"group1"},authToken:e.authToken};e.overrideUrl!=null&&(l.overrideUrl=e.overrideUrl);l.keepAliveMs=j;c("gkx")("20920")&&(l.loggingId=c("uuidv4")());try{f=c("DGWClient")().createStreamGroup(new(c("DGWStreamGroupHandler"))(function(){g.$2(k)},function(){g.$2(k)},function(){g.$2(k)}),l),this.$1[k]={dgwStreamGroup:f,multiStreamGroupLoggingId:l.loggingId,multiStreamGroupPriorStreamCountGuess:0}}catch(a){return(h||(h=b("Promise"))).reject(a)}}this.$1[k].multiStreamGroupPriorStreamCountGuess++;return f.establishStream({loggingId:e.loggingId,disableFalcoLogging:e.disableFalcoLogging,groupedStreamHeaders:a},d)};return a}();g["default"]=a}),98);
__d("DGWRequestStreamClient",["DGWRequestStreamRef","DGWStreamFactory","Promise","cr:2046346"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){this.$1=a!=null?a:c("DGWStreamFactory").get()}var d=a.prototype;d.createStream=function(a,d,e,f,g){b("cr:2046346")!=null&&b("cr:2046346").startPulsarTest();return(h||(h=b("Promise"))).resolve(new(c("DGWRequestStreamRef"))(a,d,f,g,e,this.$1))};return a}();g["default"]=a}),98);
__d("InstagramODSObserver",["BaseEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=new(c("BaseEventEmitter"))();b=a;g["default"]=b}),98);
__d("InstagramODSImpl",["InstagramODSObserver","ODS"],(function(a,b,c,d,e,f,g){"use strict";var h,i="instagram",j={addListener:function(a){c("InstagramODSObserver").addListener("event",a)},incr:function(a,b){b===void 0&&(b=1),(h||(h=d("ODS"))).bumpEntityKey(5588,i,a,b),c("InstagramODSObserver").emit("event",{count:b,key:a})},incr_CAREFUL_WHEN_USE_DYNAMIC_KEY:function(a,b){j.incr(a,b)}};a=j;g["default"]=a}),98);
__d("VideoPlayerWithLiveVideoInterruptedOverlay.react",["fbt","FDSLoadingAnimation.react","FDSTextPairing.react","VideoPlayerHooks","VideoPlayerInteractionOverlay.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||d("react");function a(){var a=(j||(j=d("VideoPlayerHooks"))).useStreamInterrupted(),b=j.useIsLiveRewindActive();return!a||b?null:k.jsx(d("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{children:k.jsxs("div",{className:"x6s0dn4 x18l40ae x1ey2m1c x9f619 x78zum5 xdt5ytf xtijo5x x1o0tod xl56j7k x10l6tqk x13vifvy",children:[k.jsx("div",{children:k.jsx(c("FDSTextPairing.react"),{body:h._(/*BTDS*/"The broadcast is waiting for a signal. It should resume shortly."),bodyColor:"white",headline:h._(/*BTDS*/"Waiting for Live Video Signal"),headlineColor:"white",level:2,textAlign:"center"})}),k.jsx("div",{className:"xc9qbxq x1sy10c2 x1n2onr6 x14qfxbe",children:k.jsx(c("FDSLoadingAnimation.react"),{size:36})})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);/*FB_PKG_DELIM*/
__d("FxAuthenticationFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5227");b=d("FalcoLoggerInternal").create("fx_authentication",a);e=b;g["default"]=e}),98);
__d("FXAuthenticationLogger",["FxAuthenticationFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.event,d=a.target_account_id;d=d===void 0?null:d;a=a.target_account_type;a=a===void 0?null:a;var e={fx_auth_event:b,target_account_id:d,target_account_type:a};c("FxAuthenticationFalcoEvent").log(function(){return e})}g.logEvent=a}),98);
__d("IgtsDefaultsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4193");b=d("FalcoLoggerInternal").create("igts_defaults",a);e=b;g["default"]=e}),98);
__d("PolarisAPIFXCALAuthLogin",["PolarisEncryptionHelper","PolarisInstapi","asyncToGeneratorRuntime","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,d){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){e={requestUUID:c("uuidv4")()};b=babelHelpers["extends"]({},yield d("PolarisEncryptionHelper").getEncryptedParam("password",b,e),{etoken:f,username:a});return d("PolarisInstapi").apiPost("/api/v1/web/fxcal/auth/login/ajax/",{body:b}).then(function(a){return a.data})});return h.apply(this,arguments)}g.fxcalAuthLogin=a}),98);
__d("PolarisAPIFxcalAuthTwoFactorLogin",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e,f,g,h){g={app_id:g,etoken:h,identifier:a,trust_signal:b,two_fac_code:e,username:c,verification_method:f};return d("PolarisInstapi").apiPost("/api/v1/web/fxcal/auth/two_fac_login/ajax/",{body:g}).then(function(a){return a.data})}g.fxcalAuthTwoFactorLogin=a}),98);
__d("PolarisAPILoginTwoFactor",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e,f,g,h){h===void 0&&(h=!1);a={identifier:a,isPrivacyPortalReq:h,queryParams:g,trust_signal:b,username:c,verification_method:f,verificationCode:e};return d("PolarisInstapi").apiPost("/api/v1/web/accounts/login/ajax/two_factor/",{body:a}).then(function(a){return a.data})}g.loginTwoFactor=a}),98);
__d("PolarisAPISendAccountRecoveryEmail",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("PolarisInstapi").apiPost("/api/v1/web/accounts/send_account_recovery_email_ajax/",{body:{query:a}}).then(function(a){return a.data})}g.sendAccountRecoveryEmail=a}),98);
__d("PolarisAPISendTwoFactorLoginSms",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b={identifier:b,username:a};return d("PolarisInstapi").apiPost("/api/v1/web/accounts/send_two_factor_login_sms/",{body:b}).then(function(a){return a.data})}g.sendTwoFactorLoginSms=a}),98);
__d("PolarisAPISendTwoFactorLoginWhatsappMutation_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="10060380564020189"}),null);
__d("PolarisAPISendTwoFactorLoginWhatsappMutation.graphql",["PolarisAPISendTwoFactorLoginWhatsappMutation_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"request_data",variableName:"input"}],concreteType:"XDTSendTwoFactorLoginResponse",kind:"LinkedField",name:"xdt_send_two_factor_login_whatsapp",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTTwoFactorLoginInfo",kind:"LinkedField",name:"two_factor_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"obfuscated_phone_number",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_messenger_code_option",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_new_login_screen",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sms_not_allowed_reason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sms_two_factor_on",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totp_two_factor_on",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"two_factor_identifier",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"whatsapp_two_factor_on",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"two_factor_required",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"PolarisAPISendTwoFactorLoginWhatsappMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"PolarisAPISendTwoFactorLoginWhatsappMutation",selections:c},params:{id:b("PolarisAPISendTwoFactorLoginWhatsappMutation_instagramRelayOperation"),metadata:{is_distillery:!0,root_field_name:["xdt_send_two_factor_login_whatsapp"]},name:"PolarisAPISendTwoFactorLoginWhatsappMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("PolarisAPISendTwoFactorLoginWhatsapp",["CometRelay","PolarisAPISendTwoFactorLoginWhatsappMutation.graphql","PolarisRelayEnvironment","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h!==void 0?h:h=b("PolarisAPISendTwoFactorLoginWhatsappMutation.graphql");function a(a,e){return new(i||(i=b("Promise")))(function(b,f){d("CometRelay").commitMutation(c("PolarisRelayEnvironment"),{mutation:j,onCompleted:function(a,c){if(c&&c.length){f(c);return}b(a)},onError:function(a){f([a])},variables:{input:{identifier:e,username:a}}})})}g.sendTwoFactorLoginWhatsapp=a}),98);
__d("PolarisAPISetPrivateAccount",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){a={is_private:a};b&&(a.bypass_rate_limit_dialog="1");c&&(a.privacy_nux_action=!0);e&&(a.using_confirmation_dialog=!0);return d("PolarisInstapi").apiPost("/api/v1/web/accounts/set_private/",{body:a}).then(function(a){return babelHelpers["extends"]({},a.data,{status:a.status})})}g.setPrivateAccount=a}),98);
__d("PolarisAuthConstants",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a="IG_REG_MSITE";c="IG_REG_WEB";d="IG_REG_WEB";e="IG_REG_MSITE";var g="IG_NUX_MSITE",h="IG_NUX_WEB",i="IG_REG_WEB_OIDC",j="ssfErrorAlert";b=b("$InternalEnum").Mirrored(["Login","Signup"]);f.FLOW_TYPE_REG_MOBILE=a;f.FLOW_TYPE_REG_DESKTOP=c;f.FLOW_TYPE_IG_WEB_REG_DESKTOP=d;f.FLOW_TYPE_IG_WEB_REG_MOBILE=e;f.FLOW_TYPE_IG_WEB_NUX_MOBILE=g;f.FLOW_TYPE_IG_WEB_NUX_DESKTOP=h;f.FLOW_TYPE_IG_REG_WEB_OIDC=i;f.SLIM_SIGNUP_FORM_ALERT_ID=j;f.AuthPageType=b}),66);
__d("PolarisSignupFormFields.react",["IGDSBox.react","IGDSDialogFooter.react","IGDSTextVariants.react","PolarisAuthConstants","PolarisAuthStrings","PolarisGenericStrings","PolarisIGCoreButton.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(31),e=a.children,f=a.handleGoBack,g=a.handleNext,h=a.header,j=a.icon,k=a.isNextActionDisabled,l=a.requestInFlight,m=a.signupNonSpecificError,n=a.style;a=a.subHeader;var o;b[0]!==h?(o=i.jsx(c("IGDSBox.react"),{marginBottom:2,marginTop:4,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{textAlign:"center",children:h})}),b[0]=h,b[1]=o):o=b[1];b[2]!==a?(h=i.jsx(c("IGDSBox.react"),{marginBottom:2,marginTop:4,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:a})}),b[2]=a,b[3]=h):h=b[3];b[4]!==g||b[5]!==k||b[6]!==l||b[7]!==n?(a=n==="default"&&i.jsx(c("IGDSBox.react"),{paddingX:2,paddingY:4,position:"relative",width:"100%",children:i.jsx(c("PolarisIGCoreButton.react"),{disabled:k,fullWidth:!0,loading:l,onClick:g,children:d("PolarisGenericStrings").NEXT})}),b[4]=g,b[5]=k,b[6]=l,b[7]=n,b[8]=a):a=b[8];var p;b[9]!==m?(p=m!=null&&i.jsx(c("IGDSBox.react"),{marginBottom:2,position:"relative",children:i.jsx("div",{className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 xkmlbd1 x78zum5 xdt5ytf x2lah0s xln7xf2 xvs91rp xd4r4e8 xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x2b8uid x11njtxf",children:i.jsx("p",{"aria-atomic":"true",id:d("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID,role:"alert",children:m})})}),b[9]=m,b[10]=p):p=b[10];b[11]!==f||b[12]!==n?(m=n==="default"&&i.jsx(c("IGDSBox.react"),{marginBottom:2,position:"relative",children:i.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:f,children:d("PolarisGenericStrings").GO_BACK})}),b[11]=f,b[12]=n,b[13]=m):m=b[13];var q;b[14]!==e||b[15]!==j||b[16]!==o||b[17]!==h||b[18]!==a||b[19]!==p||b[20]!==m?(q=i.jsxs(c("IGDSBox.react"),{alignItems:"center",maxWidth:350,paddingX:7,paddingY:2,position:"relative",children:[j,o,h,e,a,p,m]}),b[14]=e,b[15]=j,b[16]=o,b[17]=h,b[18]=a,b[19]=p,b[20]=m,b[21]=q):q=b[21];b[22]!==f||b[23]!==g||b[24]!==k||b[25]!==l||b[26]!==n?(e=n==="modal"&&i.jsx(c("IGDSBox.react"),{marginTop:5,position:"relative",width:"100%",children:i.jsx(c("IGDSDialogFooter.react"),{endAdornment:i.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,disabled:k,loading:l,onClick:g,children:d("PolarisAuthStrings").CONTINUE}),startAdornment:i.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:f,children:d("PolarisGenericStrings").BACK_TEXT})})}),b[22]=f,b[23]=g,b[24]=k,b[25]=l,b[26]=n,b[27]=e):e=b[27];b[28]!==q||b[29]!==e?(j=i.jsxs(i.Fragment,{children:[q,e]}),b[28]=q,b[29]=e,b[30]=j):j=b[30];return j}g["default"]=a}),98);
__d("PolarisSignupTypesHelpers",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b={fullName:"",username:""};(a==null?void 0:a.fields)!=null&&Object.keys(a.fields).forEach(function(c){var d;if(((d=a.fields[c])==null?void 0:d.value)!=null)switch(c){case"optIntoOneTap":b[c]=Boolean(a.fields[c].value);break;default:b[c]=a.fields[c].value}});return b}f.convertSignupResultToSignupFields=a}),66);
__d("usePolarisEmailOrPhoneContactpointType",["PolarisReactRedux.react","polarisIsPhoneNumber"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a,b=d("PolarisReactRedux.react").useSelector(h);b=b==null||(a=b.fields.emailOrPhone)==null?void 0:a.value;if(b==null)return null;b=c("polarisIsPhoneNumber")(b);return b?"phone":"email"}function h(a){return(a=a.auth.signup)==null?void 0:a.signupResult}g["default"]=a}),98);
__d("PolarisAcceptTermsOfUseForm.react",["PolarisAcceptTermsOfUseBody.react","PolarisAuthStrings","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSignupActions","PolarisSignupFormFields.react","PolarisSignupTypesHelpers","react","react-compiler-runtime","usePolarisEmailOrPhoneContactpointType"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=d("react-compiler-runtime").c(18),e=a.onSignup,f=a.requestInFlight,g=a.signupNonSpecificError;a=a.style;a=a===void 0?"default":a;var h=d("PolarisReactRedux.react").useDispatch(),m=d("PolarisReactRedux.react").useSelector(l),n=c("usePolarisEmailOrPhoneContactpointType")(),o;b[0]!==n||b[1]!==h?(o=function(){h(d("PolarisSignupActions").returnToBaseSignupForm()),d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:n,event_name:"back_button_clicked",step:"acceptTerms"})},b[0]=n,b[1]=h,b[2]=o):o=b[2];o=o;var p;b[3]!==n||b[4]!==e||b[5]!==m?(p=function(){e(d("PolarisSignupTypesHelpers").convertSignupResultToSignupFields(m)),d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:n,event_name:"accept_terms_form_next_clicked"})},b[3]=n,b[4]=e,b[5]=m,b[6]=p):p=b[6];p=p;var q,r;b[7]!==n?(q=function(){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:n,event_name:"form_load",step:"acceptTerms"})},r=[n],b[7]=n,b[8]=q,b[9]=r):(q=b[8],r=b[9]);j(q,r);q=k(!0);r=q[0];var s=q[1];b[10]===Symbol["for"]("react.memo_cache_sentinel")?(q=i.jsx(c("PolarisAcceptTermsOfUseBody.react"),{onAcceptAllTermsChange:function(a){s(!a)}}),b[10]=q):q=b[10];b[11]!==o||b[12]!==p||b[13]!==r||b[14]!==f||b[15]!==g||b[16]!==a?(q=i.jsx(c("PolarisSignupFormFields.react"),{handleGoBack:o,handleNext:p,header:d("PolarisAuthStrings").AGREE_TO_TERMS,isNextActionDisabled:r,requestInFlight:f,signupNonSpecificError:g,style:a,subHeader:d("PolarisAuthStrings").PERSONAL_INFO_SECURE,children:q}),b[11]=o,b[12]=p,b[13]=r,b[14]=f,b[15]=g,b[16]=a,b[17]=q):q=b[17];return q}function l(a){return(a=a.auth.signup)==null?void 0:a.signupResult}g["default"]=a}),98);
__d("PolarisAccountPrivacyHelpers",[],(function(a,b,c,d,e,f){"use strict";a={PRIVATE:"private",PUBLIC:"public"};b={NUX_FORM_IMPRESSION:"web_pbd_nux_form_impression",NUX_FORM_NEXT_BUTTON_CLICK:"web_pbd_nux_form_next_button_click",NUX_FORM_SELECT_OPTION:"web_pbd_nux_form_select_option",NUX_FORM_SET_PRIVATE_FAILURE:"web_pbd_nux_form_set_private_failure",NUX_FORM_SET_PRIVATE_SUCCESS:"web_pbd_nux_form_set_private_success",NUX_PAGE_IMPRESSION:"web_pbd_nux_page_impression"};f.PrivacyOptionsEnum=a;f.PBDNuxEventsEnum=b}),66);
__d("PolarisAccountPrivacyBody.react",["IGDSBox.react","IGDSRadioButton.react","IGDSTextVariants.react","PolarisAccountPrivacyHelpers","PolarisAuthStrings","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(4),e=a.selectedBodyOption,f=a.setSelectedBodyOption;if(b[0]===Symbol["for"]("react.memo_cache_sentinel")){a=[{desc:(a=d("PolarisAuthStrings")).PRIVATE_ACCOUNT_DESCRIPTION,label:a.PRIVATE_ACCOUNT,value:d("PolarisAccountPrivacyHelpers").PrivacyOptionsEnum.PRIVATE},{desc:a.PUBLIC_ACCOUNT_DESCRIPTION,label:a.PUBLIC_ACCOUNT,value:d("PolarisAccountPrivacyHelpers").PrivacyOptionsEnum.PUBLIC}];b[0]=a}else a=b[0];a=a;b[1]!==e||b[2]!==f?(a=i.jsx(c("IGDSBox.react"),{marginTop:2,position:"relative",children:a.map(function(a){return i.jsx(c("IGDSBox.react"),{marginBottom:4,marginTop:3,children:i.jsx(c("IGDSRadioButton.react"),{isChecked:a.value===e,label:i.jsxs(i.Fragment,{children:[i.jsx(c("IGDSBox.react"),{children:i.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{textAlign:"start",children:a.label})}),i.jsx(c("IGDSBox.react"),{marginTop:1,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"start",children:a.desc})})]}),onChange:function(){return f(a.value)},value:a.value})},a.value)})}),b[1]=e,b[2]=f,b[3]=a):a=b[3];return a}g["default"]=a}),98);
__d("PolarisSettingsActionSetPrivateAccount",["FBLogger","InstagramGenericSettingStrings","PolarisAPISetPrivateAccount","PolarisGenericStrings","PolarisSentryFeedbackActions"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=a.handleFailure,e=a.handleSuccess,f=a.isNuxAction,g=a.isUsingConfirmationDialog,i=a.privateAccount,j=a.publicToPrivateRateLimitOverride,k=a.setErrorMessage,l=a.setLoading;return function(a){l!=null&&l(!0);k!=null&&k(null);a({privateAccount:i,type:"PRIVATE_ACCOUNT_UPDATE_REQUESTED"});return d("PolarisAPISetPrivateAccount").setPrivateAccount(i,j,f,g).then(function(c){if(i&&c.status==="ok"&&c.has_private_public_switch_restriction){var f=c.privacy_rate_limit_dialog_message;a({message:f,title:c.privacy_rate_limit_dialog_title,type:"ACCOUNT_PRIVACY_PUBLIC_TO_PRIVATE_SWITCH_RATE_LIMITED"});l!=null&&l(!1);k!=null&&k(f);b!=null&&b();return}if(!i&&c.status==="ok"&&c.has_private_public_switch_restriction){f=c.privacy_rate_limit_dialog_message;a({message:f,title:c.privacy_rate_limit_dialog_title,type:"ACCOUNT_PRIVACY_PRIVATE_TO_PUBLIC_SWITCH_RATE_LIMITED"});l!=null&&l(!1);k!=null&&k(f);b!=null&&b();return}c.status==="ok"?(a({privateAccount:i,toast:{text:d("InstagramGenericSettingStrings").GENERIC_SETTINGS_SAVED},type:"PRIVATE_ACCOUNT_UPDATE_SUCCEEDED"}),e!=null&&e()):(a({privateAccount:!i,toast:{actionHandler:function(){return a(h({privateAccount:i}))},actionText:d("PolarisGenericStrings").RETRY_TEXT,text:d("InstagramGenericSettingStrings").GENERIC_SETTINGS_ERROR},type:"PRIVATE_ACCOUNT_UPDATE_FAILED"}),l!=null&&l(!1),k!=null&&k(d("PolarisGenericStrings").GENERIC_ERROR_MESSAGE),b!=null&&b())},function(e){var f;l!=null&&l(!1);f=((f=e.responseObject)==null?void 0:f.spam)||!1;if(f){var g,j,m,n,o,p,q;g=(g=e.responseObject)==null?void 0:g.feedback_title;j=(j=e.responseObject)==null?void 0:j.feedback_message;m=(m=e.responseObject)==null?void 0:m.feedback_url;n=(n=e.responseObject)==null?void 0:n.feedback_action;o=(o=e.responseObject)==null?void 0:o.feedback_appeal_label;p=(p=e.responseObject)==null?void 0:p.restriction_enrollment_data;q=(q=e.responseObject)==null?void 0:q.enforcement_transparency_instance_identifier;a(d("PolarisSentryFeedbackActions").showSentryFeedback({action:n,enforcement_transparency_instance_identifier:q,feedback_appeal_label:o,message:j,restriction_enrollment_data:p,sourceOfAction:"set_private_account",title:g,url:m}));k!=null&&k(j);b!=null&&b()}q=(n=e.responseObject)==null?void 0:n.message;a({privateAccount:!i,toast:f?void 0:{actionHandler:function(){return a(h({privateAccount:i}))},actionText:d("PolarisGenericStrings").RETRY_TEXT,text:q||d("InstagramGenericSettingStrings").GENERIC_SETTINGS_ERROR},type:"PRIVATE_ACCOUNT_UPDATE_FAILED"});k!=null&&k(q||d("PolarisGenericStrings").GENERIC_ERROR_MESSAGE);b!=null&&b();c("FBLogger")("ig_web").catching(e)})}}g.setPrivateAccount=h}),98);
__d("PolarisAccountPrivacyForm.react",["IGDSBox.react","IGDSLockOutline96Icon.react","IGDSTextVariants.react","IgtsDefaultsFalcoEvent","InstagramODS","PolarisAccountPrivacyBody.react","PolarisAccountPrivacyHelpers","PolarisAuthStrings","PolarisConfig","PolarisGenericOnboardingUnit.react","PolarisReactRedux.react","PolarisSettingsActionSetPrivateAccount","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=d("react-compiler-runtime").c(32),e=a.buttonLabel,f=a.defaultedToPrivate,g=a.handleNext;a=a.subtitle;var h=f||c("gkx")("6489")||c("gkx")("25363");f=k(h?d("PolarisAccountPrivacyHelpers").PrivacyOptionsEnum.PRIVATE:null);var l=f[0],m=f[1];b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=d("PolarisConfig").getViewerId(),b[0]=f):f=b[0];var n=f,o=d("PolarisReactRedux.react").useDispatch();f=k(!1);var p=f[0],q=f[1];f=k(null);var r=f[0],s=f[1],t;b[1]!==h?(f=function(){c("InstagramODS").incr("web.pbd.impression"),c("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:n,event_type:d("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_IMPRESSION,is_set_to_private:h}})},t=[h,n],b[1]=h,b[2]=f,b[3]=t):(f=b[2],t=b[3]);j(f,t);b[4]!==g||b[5]!==l?(f=function(){c("InstagramODS").incr("web.pbd.set_private_success"),c("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:n,event_type:d("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_SET_PRIVATE_SUCCESS,target_control_type:l}}),g()},b[4]=g,b[5]=l,b[6]=f):f=b[6];var u=f;b[7]!==l?(t=function(){c("InstagramODS").incr("web.pbd.set_private_failure"),c("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:n,event_type:d("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_SET_PRIVATE_FAILURE,target_control_type:l}})},b[7]=l,b[8]=t):t=b[8];var v=t;b[9]!==o||b[10]!==v||b[11]!==u||b[12]!==l?(f=function(){c("InstagramODS").incr("web.pbd.next_button_click"),c("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:n,event_type:d("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_NEXT_BUTTON_CLICK,target_control_type:l}}),o(d("PolarisSettingsActionSetPrivateAccount").setPrivateAccount({handleFailure:v,handleSuccess:u,isNuxAction:!0,privateAccount:l===d("PolarisAccountPrivacyHelpers").PrivacyOptionsEnum.PRIVATE,publicToPrivateRateLimitOverride:!0,setErrorMessage:s,setLoading:q}))},b[9]=o,b[10]=v,b[11]=u,b[12]=l,b[13]=f):f=b[13];t=f;b[14]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(a){c("InstagramODS").incr("web.pbd.option_select"),c("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:n,event_type:d("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_SELECT_OPTION,target_control_type:a}}),m(a)},b[14]=f):f=b[14];f=f;var w;b[15]!==a?(w=i.jsx(c("IGDSBox.react"),{marginBottom:4,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",children:a})}),b[15]=a,b[16]=w):w=b[16];b[17]!==l?(a=i.jsx(c("PolarisAccountPrivacyBody.react"),{selectedBodyOption:l,setSelectedBodyOption:f}),b[17]=l,b[18]=a):a=b[18];b[19]!==w||b[20]!==a?(f=i.jsxs(i.Fragment,{children:[w,a]}),b[19]=w,b[20]=a,b[21]=f):f=b[21];w=l==null;b[22]!==r?(a=r!=null?i.jsx(c("IGDSBox.react"),{paddingX:1,paddingY:4,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"errorOrDestructive",textAlign:"center",children:r})}):null,b[22]=r,b[23]=a):a=b[23];b[24]===Symbol["for"]("react.memo_cache_sentinel")?(r=i.jsx(c("IGDSLockOutline96Icon.react"),{alt:d("PolarisAuthStrings").ACCOUNT_PRIVACY_HEADER_TEXT,size:64}),b[24]=r):r=b[24];b[25]!==e||b[26]!==t||b[27]!==p||b[28]!==f||b[29]!==w||b[30]!==a?(r=i.jsx(c("PolarisGenericOnboardingUnit.react"),{bodyText:f,buttonDisabled:w,buttonText:e,footer:a,headerText:d("PolarisAuthStrings").ACCOUNT_PRIVACY_HEADER_TEXT,icon:r,isProcessing:p,onButtonClick:t}),b[25]=e,b[26]=t,b[27]=p,b[28]=f,b[29]=w,b[30]=a,b[31]=r):r=b[31];return r}g["default"]=a}),98);
__d("PolarisAppsellUnit.react",["fbt","IGDSTextVariants.react","PolarisAppInstallLink.react","PolarisConfigConstants","gkx","polarisGetAppPlatform","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function k(){var a=d("react-compiler-runtime").c(2),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=h._(/*BTDS*/"Get the app."),a[0]=b):b=a[0];b=b;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx("div",{className:"x1anpbxc x3aesyq xyorhqc xqsn43r",children:j.jsx(d("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:b})}),a[1]=b):b=a[1];return b}function a(a){var b=d("react-compiler-runtime").c(21),e=a.appInstallCampaign,f=a.ctaTypeV2;a=a.hideText;var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=d("polarisGetAppPlatform").isWindowsNT()&&c("gkx")("25364"),b[0]=g):g=b[0];g=g;var h;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(h={className:"x78zum5 xdt5ytf"},b[1]=h):h=b[1];var i;b[2]!==a?(i=a!==!0&&j.jsx(k,{}),b[2]=a,b[3]=i):i=b[3];b[4]===Symbol["for"]("react.memo_cache_sentinel")?(a={className:"x78zum5 x1b7blni xl56j7k x1anpbxc x14z9mp xyorhqc x1lziwak"},b[4]=a):a=b[4];var l;b[5]!==e||b[6]!==f?(l=!d("polarisGetAppPlatform").isAndroid()&&!g&&j.jsx(c("PolarisAppInstallLink.react"),{campaign:e,ctaTypeV2:f,"data-testid":void 0,platform:d("PolarisConfigConstants").appPlatformTypes.IOS}),b[5]=e,b[6]=f,b[7]=l):l=b[7];var m;b[8]!==e||b[9]!==f?(m=!d("polarisGetAppPlatform").isIOS()&&j.jsx(c("PolarisAppInstallLink.react"),{campaign:e,ctaTypeV2:f,"data-testid":void 0,platform:d("PolarisConfigConstants").appPlatformTypes.ANDROID}),b[8]=e,b[9]=f,b[10]=m):m=b[10];b[11]!==e||b[12]!==f?(g=g&&j.jsx(c("PolarisAppInstallLink.react"),{campaign:e,ctaTypeV2:f,"data-testid":void 0,platform:d("PolarisConfigConstants").appPlatformTypes.WINDOWSNT10}),b[11]=e,b[12]=f,b[13]=g):g=b[13];b[14]!==l||b[15]!==m||b[16]!==g?(e=j.jsxs("div",babelHelpers["extends"]({},a,{children:[l,m,g]})),b[14]=l,b[15]=m,b[16]=g,b[17]=e):e=b[17];b[18]!==i||b[19]!==e?(f=j.jsxs("div",babelHelpers["extends"]({},h,{children:[i,e]})),b[18]=i,b[19]=e,b[20]=f):f=b[20];return f}g["default"]=a}),226);
__d("PolarisTooManyAccountsDialog.react",["fbt","PolarisConfirmDialog.react","PolarisGenericStrings","PolarisOneTapLogin","react","react-compiler-runtime","vulture"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(8),e=a.onClose;a=a.onConfirm;c("vulture")("wbTE0KKLIlE19f4lV1LTFdPxzP4=");var f=k;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=f(),b[0]=f):f=b[0];var g;b[1]!==a?(g=a!=null?h._(/*BTDS*/"Edit Accounts"):void 0,b[1]=a,b[2]=g):g=b[2];a=a!=null?a:void 0;var i;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(i=h._(/*BTDS*/"Can't Add Account"),b[3]=i):i=b[3];b[4]!==e||b[5]!==g||b[6]!==a?(f=j.jsx(c("PolarisConfirmDialog.react"),{body:f,cancelLabel:d("PolarisGenericStrings").OK_TEXT,confirmLabel:g,onClose:e,onConfirm:a,title:i}),b[4]=e,b[5]=g,b[6]=a,b[7]=f):f=b[7];return f}function k(){return d("PolarisOneTapLogin").TOO_MANY_ACCOUNTS_TEXT}g["default"]=a}),226);
__d("XPolarisLoginControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/accounts/login/",Object.freeze({force_authentication:!1,enable_fb_login:!1,is_from_rle:!1,mtn:!1,flo:!1}),new Set(["force_authentication","enable_fb_login","is_from_rle","mtn"]));b=a;g["default"]=b}),98);
__d("usePolarisOneTapLoginEditModeStateQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"XDTViewer",kind:"LinkedField",name:"xdt_viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,concreteType:"PolarisOneTapLogin",kind:"LinkedField",name:"one_tap_login",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"edit_mode",storageKey:null}],storageKey:null}]}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePolarisOneTapLoginEditModeStateQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"usePolarisOneTapLoginEditModeStateQuery",selections:a},params:{cacheID:"fded0f553435868ea14676d1156763b5",id:null,metadata:{is_distillery:!0,root_field_name:["xdt_viewer"]},name:"usePolarisOneTapLoginEditModeStateQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("usePolarisOneTapLoginEditModeState",["CometRelay","PolarisLoginLogger","react","react-compiler-runtime","usePolarisOneTapLoginEditModeStateQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useCallback;function a(){var a,c=d("react-compiler-runtime").c(7),e=d("CometRelay").useRelayEnvironment(),f,g;c[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=h!==void 0?h:h=b("usePolarisOneTapLoginEditModeStateQuery.graphql"),g={},c[0]=f,c[1]=g):(f=c[0],g=c[1]);f=d("CometRelay").useClientQuery(f,g);c[2]!==e?(g=function(a){d("CometRelay").commitLocalUpdate(e,function(b){b.getRoot().getOrCreateLinkedRecord("xdt_viewer","XDTViewer").getOrCreateLinkedRecord("one_tap_login","PolarisOneTapLogin").setValue(a,"edit_mode")}),d("PolarisLoginLogger").logLoginEvent({event_name:a?"one_tap_login_done_editing_click":"one_tap_login_manage_accounts_click",login_type:"device_based_login"})},c[2]=e,c[3]=g):g=c[3];g=g;f=(f=f==null||(a=f.xdt_viewer)==null||(a=a.one_tap_login)==null?void 0:a.edit_mode)!=null?f:!1;var i;c[4]!==f||c[5]!==g?(i=[f,g],c[4]=f,c[5]=g,c[6]=i):i=c[6];return i}g["default"]=a}),98);
__d("PolarisAuthTypeSwitcher.react",["fbt","IGDSBox.react","IGDSButton.react","IGDSTextVariants.react","PolarisAuthActionConstants","PolarisAuthActions","PolarisAuthConstants","PolarisAuthLimitedRegistrationHelpers","PolarisAuthStrings","PolarisFastLink.react","PolarisLinkBuilder","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutUpsellExposureV2","PolarisLoginLogger","PolarisMultiSignupTypes","PolarisOneTapLogin","PolarisOneTapLoginStorage","PolarisReactRedux.react","PolarisRoutes","PolarisSignupActions","PolarisTooManyAccountsDialog.react","PolarisUA","XPolarisLoginControllerRouteBuilder","XPolarisMultiStepSignupControllerRouteBuilder","react","react-compiler-runtime","usePolarisOneTapLoginEditModeState","usePolarisPageID"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));f=i;f.useCallback;var k=f.useState,l=d("PolarisAuthLimitedRegistrationHelpers").hasRestrictedRegistration();function m(a){var b=d("react-compiler-runtime").c(17),e=a.className,f=a.fromLoggedOutDialog,g=a.onClick,i=f===void 0?!1:f,k=d("PolarisReactRedux.react").useDispatch(),m=c("usePolarisPageID")();b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"primaryButton",children:h._(/*BTDS*/"Sign up")}),b[0]=a):a=b[0];f=a;b[1]!==k||b[2]!==i||b[3]!==g||b[4]!==m?(a=function(){d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("signup",i?"auth_form_dialog":"auth_form",m);d("PolarisLoginLogger").logLoginEvent({event_flow:"login_manual",event_name:"sign_up_button_clicked"});l&&k(d("PolarisSignupActions").setShowRegulatoryConsentModal());return g},b[1]=k,b[2]=i,b[3]=g,b[4]=m,b[5]=a):a=b[5];a=a;var n;b[6]!==m?(n=function(){if(d("PolarisUA").isMobile()&&!l)return c("XPolarisMultiStepSignupControllerRouteBuilder").buildUri({step_name:d("PolarisMultiSignupTypes").getFirstStep()}).toString();else if(!d("PolarisUA").isMobile()&&!l||m!=="unifiedHome")return d("PolarisRoutes").EMAIL_SIGNUP_PATH},b[6]=m,b[7]=n):n=b[7];n=n;var o;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(o=h._(/*BTDS*/"Don't have an account?"),b[8]=o):o=b[8];var p;b[9]!==n?(p=n(),b[9]=n,b[10]=p):p=b[10];b[11]!==a||b[12]!==p?(n=j.jsx(c("PolarisFastLink.react"),{"data-testid":void 0,href:p,onClick:a,prefetchQueriesOnMount_I_KNOW_WHAT_IM_DOING:c("PolarisLoggedOutUpsellExposureV2").xplatform.enable_faster_nav_for_cta,preloadCodeOnMount:c("PolarisLoggedOutUpsellExposureV2").xplatform.enable_faster_nav_for_cta,children:f}),b[11]=a,b[12]=p,b[13]=n):n=b[13];b[14]!==e||b[15]!==n?(f=j.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"auto",children:j.jsxs("p",{className:e,children:[o," ",n]})}),b[14]=e,b[15]=n,b[16]=f):f=b[16];return f}function n(a){var b=d("react-compiler-runtime").c(10),e=a.className,f=a.fromLoggedOutDialog,g=a.onClick,i=f===void 0?!1:f,k=c("usePolarisPageID")();b[0]!==i||b[1]!==g||b[2]!==k?(a=function(){d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("login",i?"auth_form_dialog":"auth_form",k);return g},b[0]=i,b[1]=g,b[2]=k,b[3]=a):a=b[3];f=a;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"primaryButton",children:h._(/*BTDS*/"Log in")}),b[4]=a):a=b[4];a=a;b[5]!==f?(a=h._(/*BTDS*/"Have an account? {link that reads Log in}",[h._param("link that reads Log in",j.jsx(c("PolarisFastLink.react"),{"data-testid":void 0,href:d("PolarisLinkBuilder").buildLoginLink("",{source:"auth_switcher"}),onClick:f,children:a}))]),b[5]=f,b[6]=a):a=b[6];b[7]!==e||b[8]!==a?(f=j.jsx("p",{className:e,children:a}),b[7]=e,b[8]=a,b[9]=f):f=b[9];return f}function o(a){var b=d("react-compiler-runtime").c(21),e=a.onSwitchAuthType;a=a.pageType;var f=d("PolarisReactRedux.react").useDispatch(),g=c("usePolarisPageID")(),i=c("usePolarisOneTapLoginEditModeState")(),m=i[0],n=i[1];i=k(!1);var o=i[0],p=i[1];b[0]!==e?(i=function(){d("PolarisOneTapLogin").hasMaxOneTapNonces()?(p(!0),d("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_switch_account_too_many_accounts",login_type:"device_based_login"})):(e(d("PolarisAuthActionConstants").AUTH.login),d("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_login_switch_account_click",login_type:"device_based_login"}))},b[0]=e,b[1]=i):i=b[1];i=i;var q;b[2]!==m||b[3]!==n?(q=function(){n(!m)},b[2]=m,b[3]=n,b[4]=q):q=b[4];var r=q;b[5]!==g?(q=function(){if(l&&g==="unifiedHome")return;return d("PolarisUA").isMobile()?c("XPolarisMultiStepSignupControllerRouteBuilder").buildUri({step_name:d("PolarisMultiSignupTypes").getFirstStep()}).toString():d("PolarisRoutes").EMAIL_SIGNUP_PATH},b[5]=g,b[6]=q):q=b[6];q=q;if(b[7]!==f||b[8]!==q||b[9]!==i||b[10]!==e||b[11]!==a){var s;b[13]!==a?(s=d("PolarisOneTapLogin").hasMaxOneTapNonces()?void 0:a===d("PolarisAuthConstants").AuthPageType.Signup?c("XPolarisLoginControllerRouteBuilder").buildURL({}):void 0,b[13]=a,b[14]=s):s=b[14];s=j.jsx("div",{children:h._(/*BTDS*/"{link that reads Switch Accounts} or {link that reads sign up}",[h._param("link that reads Switch Accounts",j.jsx(c("IGDSButton.react"),{display:"block",href:s,label:h._(/*BTDS*/"Switch accounts"),onClick:i,variant:"primary_link"})),h._param("link that reads sign up",j.jsx(c("IGDSButton.react"),{display:"block",href:q(),label:h._(/*BTDS*/"Sign Up"),onClick:function(){if(l){f(d("PolarisSignupActions").setShowRegulatoryConsentModal());return}e(d("PolarisAuthActionConstants").AUTH.signup);d("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_login_signup_click",login_type:"device_based_login"})},variant:"primary_link"}))])});b[7]=f;b[8]=q;b[9]=i;b[10]=e;b[11]=a;b[12]=s}else s=b[12];b[15]!==r||b[16]!==o?(q=o&&j.jsx(c("PolarisTooManyAccountsDialog.react"),{onClose:function(){return p(!1)},onConfirm:function(){r(),p(!1)}}),b[15]=r,b[16]=o,b[17]=q):q=b[17];b[18]!==s||b[19]!==q?(i=j.jsxs(j.Fragment,{children:[s,q]}),b[18]=s,b[19]=q,b[20]=i):i=b[20];return i}function a(a){var b=d("react-compiler-runtime").c(29),e=a.authType,f=a.className,g=a.fromLoggedOutDialog,h=a.onNavigate,i=a.onSwitchAuthType,k=a.pageType;a=a.primary;g=g===void 0?!1:g;if(e===d("PolarisAuthActionConstants").AUTH.login||e===d("PolarisAuthActionConstants").AUTH.none){var l;b[0]!==h?(l=function(){return h==null?void 0:h("signup")},b[0]=h,b[1]=l):l=b[1];var p;b[2]!==f||b[3]!==g||b[4]!==l?(p=j.jsx(m,{className:f,fromLoggedOutDialog:g,onClick:l}),b[2]=f,b[3]=g,b[4]=l,b[5]=p):p=b[5];return p}else if(e===d("PolarisAuthActionConstants").AUTH.signup){b[6]!==h?(l=function(){return h==null?void 0:h("login")},b[6]=h,b[7]=l):l=b[7];b[8]!==f||b[9]!==g||b[10]!==l?(p=j.jsx(n,{className:f,fromLoggedOutDialog:g,onClick:l}),b[8]=f,b[9]=g,b[10]=l,b[11]=p):p=b[11];return p}else if(e===d("PolarisAuthActionConstants").AUTH.fbLogin||e===d("PolarisAuthActionConstants").AUTH.fbAccountPicker||e===d("PolarisAuthActionConstants").AUTH.oneTapLogin){if(b[12]!==e||b[13]!==f){var q;g=d("PolarisOneTapLoginStorage").getLoginNonces();if(e===d("PolarisAuthActionConstants").AUTH.oneTapLogin&&Object.values(g).length===1){l=Object.keys(g)[0];q=g[l].username}p=f;g=q!=null&&j.jsx(c("IGDSBox.react"),{alignItems:"center",marginBottom:1,position:"relative",children:d("PolarisAuthStrings").notUsernameText(q)});b[12]=e;b[13]=f;b[14]=p;b[15]=g}else p=b[14],g=b[15];b[16]!==i||b[17]!==k||b[18]!==a?(l=j.jsx(o,{onSwitchAuthType:i,pageType:k,primary:a}),b[16]=i,b[17]=k,b[18]=a,b[19]=l):l=b[19];b[20]!==p||b[21]!==g||b[22]!==l?(e=j.jsxs("div",{className:p,children:[g,l]}),b[20]=p,b[21]=g,b[22]=l,b[23]=e):e=b[23];return e}else if(d("PolarisUA").isMobile()){b[24]!==h?(i=function(){return h==null?void 0:h("signup")},b[24]=h,b[25]=i):i=b[25];b[26]!==f||b[27]!==i?(k=j.jsx(m,{className:f,onClick:i}),b[26]=f,b[27]=i,b[28]=k):k=b[28];return k}return null}function b(a){a=a.auth.authType;return{authType:a}}function e(a){return{onSwitchAuthType:function(b){a(d("PolarisAuthActions").switchAuthType(b))}}}f=d("PolarisReactRedux.react").connect(b,e)(a);g["default"]=f}),226);
__d("PolarisBarcelonaAppSVGIcon.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j="Threads";function a(a){var b=d("react-compiler-runtime").c(5),c=a.fill;a=a.size;c=c===void 0?"var(--barcelona-logo)":c;a=a===void 0?34:a;var e;b[0]!==c?(e=i.jsx("path",{d:"M141.537 88.9883C140.71 88.5919 139.87 88.2104 139.019 87.8451C137.537 60.5382 122.616 44.905 97.5619 44.745C97.4484 44.7443 97.3355 44.7443 97.222 44.7443C82.2364 44.7443 69.7731 51.1409 62.102 62.7807L75.881 72.2328C81.6116 63.5383 90.6052 61.6848 97.2286 61.6848C97.3051 61.6848 97.3819 61.6848 97.4576 61.6855C105.707 61.7381 111.932 64.1366 115.961 68.814C118.893 72.2193 120.854 76.925 121.825 82.8638C114.511 81.6207 106.601 81.2385 98.145 81.7233C74.3247 83.0954 59.0111 96.9879 60.0396 116.292C60.5615 126.084 65.4397 134.508 73.775 140.011C80.8224 144.663 89.899 146.938 99.3323 146.423C111.79 145.74 121.563 140.987 128.381 132.296C133.559 125.696 136.834 117.143 138.28 106.366C144.217 109.949 148.617 114.664 151.047 120.332C155.179 129.967 155.42 145.8 142.501 158.708C131.182 170.016 117.576 174.908 97.0135 175.059C74.2042 174.89 56.9538 167.575 45.7381 153.317C35.2355 139.966 29.8077 120.682 29.6052 96C29.8077 71.3178 35.2355 52.0336 45.7381 38.6827C56.9538 24.4249 74.2039 17.11 97.0132 16.9405C119.988 17.1113 137.539 24.4614 149.184 38.788C154.894 45.8136 159.199 54.6488 162.037 64.9503L178.184 60.6422C174.744 47.9622 169.331 37.0357 161.965 27.974C147.036 9.60668 125.202 0.195148 97.0695 0H96.9569C68.8816 0.19447 47.2921 9.6418 32.7883 28.0793C19.8819 44.4864 13.2244 67.3157 13.0007 95.9325L13 96L13.0007 96.0675C13.2244 124.684 19.8819 147.514 32.7883 163.921C47.2921 182.358 68.8816 191.806 96.9569 192H97.0695C122.03 191.827 139.624 185.292 154.118 170.811C173.081 151.866 172.51 128.119 166.26 113.541C161.776 103.087 153.227 94.5962 141.537 88.9883ZM98.4405 129.507C88.0005 130.095 77.1544 125.409 76.6196 115.372C76.2232 107.93 81.9158 99.626 99.0812 98.6368C101.047 98.5234 102.976 98.468 104.871 98.468C111.106 98.468 116.939 99.0737 122.242 100.233C120.264 124.935 108.662 128.946 98.4405 129.507Z",fill:c}),b[0]=c,b[1]=e):e=b[1];b[2]!==a||b[3]!==e?(c=i.jsx("svg",{"aria-label":j,height:a,role:"img",viewBox:"0 0 192 192",width:a,xmlns:"http://www.w3.org/2000/svg",children:e}),b[2]=a,b[3]=e,b[4]=c):c=b[4];return c}g["default"]=a}),98);
__d("PolarisFacebookAccountPicker.react",["fbt","IGDSBox.react","IGDSButton.react","IGDSText.react","IGDSTextVariants.react","PolarisAuthStrings","PolarisAuthTypeSwitcher.react","PolarisIGCoreConstants","PolarisIGCorePressable.react","PolarisLoginLogger","PolarisReactRedux.react","PolarisUA","PolarisUserAvatar.react","emptyFunction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function k(a){var b=d("react-compiler-runtime").c(7),e=a.fbConnectedIgProfiles;a=a.onRequestFBLogin;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={className:"x1qjc9v5 x1xp8e9x x5kv4kf xh05dso x13lttk3 x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x972fbf x10w94by x1qhh985 x14e42zd x9f619 x78zum5 xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xyri2b x18d9i69 x1c1uobl xz9dl7a x1n2onr6 x11njtxf"},b[0]=f):f=b[0];b[1]!==e||b[2]!==a?(f=j.jsx(c("IGDSBox.react"),{padding:4,position:"relative",children:j.jsx("div",babelHelpers["extends"]({},f,{children:j.jsx(l,{fbConnectedIgProfiles:e,onRequestFBLogin:a})}))}),b[1]=e,b[2]=a,b[3]=f):f=b[3];b[4]===Symbol["for"]("react.memo_cache_sentinel")?(e=d("PolarisUA").isMobile()&&j.jsx(c("IGDSBox.react"),{alignItems:"center",position:"relative",children:j.jsx(c("PolarisAuthTypeSwitcher.react"),{primary:!0})}),b[4]=e):e=b[4];b[5]!==f?(a=j.jsxs("div",{children:[f,e]}),b[5]=f,b[6]=a):a=b[6];return a}function l(a){var b=d("react-compiler-runtime").c(15),e=a.fbConnectedIgProfiles,f=a.onRequestFBLogin,g=d("PolarisReactRedux.react").useSelector(n),h=d("PolarisReactRedux.react").useSelector(m);if(!f||!e)return null;b[0]!==g||b[1]!==h?(a=function(a){return g&&a!==h},b[0]=g,b[1]=h,b[2]=a):a=b[2];var i=a;b[3]!==g||b[4]!==h?(a=function(a){return g&&a===h},b[3]=g,b[4]=h,b[5]=a):a=b[5];var k=a;if(b[6]!==e||b[7]!==i||b[8]!==k||b[9]!==f){b[11]!==i||b[12]!==k||b[13]!==f?(a=function(a){var b=a.username,e=i(b),g=k(b),h=function(){return f(b)};return j.jsxs(c("PolarisIGCorePressable.react"),{className:"x6s0dn4 x5n08af x1ypdohk x78zum5 x1q0g3np xwhw2v2 xsag5q8",onPress:e?c("emptyFunction"):h,role:"button",tabIndex:0,children:[j.jsx(c("IGDSBox.react"),{marginEnd:3,position:"relative",children:j.jsx(c("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:a.profilePictureUrl,size:c("PolarisIGCoreConstants").AVATAR_SIZES.small,username:b})}),j.jsx(c("IGDSBox.react"),{display:"block",flex:"grow",position:"relative",children:j.jsx(c("IGDSText.react"),{weight:"semibold",children:b})}),j.jsx(c("IGDSBox.react"),{position:"relative",children:j.jsx(c("IGDSButton.react"),{display:"block",isDisabled:e,isLoading:g,label:d("PolarisAuthStrings").LOG_IN_BUTTON_TEXT,onClick:h})})]},b)},b[11]=i,b[12]=k,b[13]=f,b[14]=a):a=b[14];a=e.map(a);b[6]=e;b[7]=i;b[8]=k;b[9]=f;b[10]=a}else a=b[10];return a}function m(a){return a.auth.login.igUsername}function n(a){return a.auth.login.requestInFlight}function a(a){var b=d("react-compiler-runtime").c(5),e=a.fbConnectedIgProfiles;a=a.onRequestFBLogin;d("PolarisLoginLogger").logLoginEvent({event_name:"account_picker_multi_linked_user_form_load"});var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._(/*BTDS*/"You can log into these accounts because they're in your Accounts Center."),b[0]=f):f=b[0];f=f;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx(c("IGDSBox.react"),{marginBottom:4,marginTop:2,paddingX:3,position:"relative",children:j.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",children:f})}),b[1]=f):f=b[1];b[2]!==e||b[3]!==a?(f=j.jsxs(c("IGDSBox.react"),{position:"relative",width:"350px",children:[f,j.jsx(k,{fbConnectedIgProfiles:e,onRequestFBLogin:a})]}),b[2]=e,b[3]=a,b[4]=f):f=b[4];return f}g["default"]=a}),226);
__d("PolarisFacebookLoginForm.react",["fbt","IGDSBox.react","IGDSButton.react","PolarisAuthActionConstants","PolarisAuthConstants","PolarisAuthStrings","PolarisIGCoreButton.react","PolarisIGCoreText","PolarisLoggedOutCtaImpressionLogger","PolarisLoginActionConstants","PolarisLoginLogger","XPolarisEmailSignupControllerRouteBuilder","polarisLogAction","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");a=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.$1=function(a,c){a.preventDefault(),b.props.onSwitchAccountsClick(c)},babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.componentDidMount=function(){c("polarisLogAction")("facebookLoginFormDisplayed"),d("PolarisLoginLogger").logLoginEvent({event_name:"fb_login_form_load",fbconnect_status:this.props.fbConnectStatus,login_type:"fbconnect"}),d("PolarisLoggedOutCtaImpressionLogger").logLoggedOutCtaImpressionEvent("auth_form",this.props.pageID)};e.$2=function(){var a,b;this.props.errorMessage!=null&&this.props.errorMessage!==""&&(a=this.props.errorMessage,b="xkmlbd1 x1qoy3rc xdj266r xyu1916 xat24cr xbt2mb3 xexx8yu xf159sx xx6bls6 xe2zdcy xxymvpz");return a==null||a===""||a===d("PolarisLoginActionConstants").FB_SSO_DISABLED?null:j.jsx("div",{className:b,children:j.jsx("p",{"aria-atomic":"true",id:"errorAlert",role:"alert",children:a},"message")})};e.$3=function(){var a=this,b=this.props.accountInfo.profilePictureUrl,d=this.props.accountInfo.username,e=this.props.requestInFlight;return j.jsx(c("IGDSBox.react"),{alignItems:"center",justifyContent:"center",position:"relative",children:j.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:function(b){return a.props.onRequestLogin(d,b)},children:j.jsx("img",babelHelpers["extends"]({alt:h._(/*BTDS*/"{username}'s profile picture",[h._param("username",d)])},{0:{className:"x1ekkm8c x1143rjc xum4auv xj21bgg x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x1m2trrv xxy3q5o x119j0k9 x1ynp9ky x1lliihq xln7xf2 xk390pu xpyat2d x1anpbxc x11t971q xyorhqc xvc5jky xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf x1exxlbk"},1:{className:"x1ekkm8c x1143rjc xum4auv xj21bgg x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x1m2trrv xxy3q5o x119j0k9 x1ynp9ky x1lliihq xln7xf2 xk390pu xpyat2d x1anpbxc x11t971q xyorhqc xvc5jky xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf x1exxlbk xz5rk10"}}[!!e<<0],{src:b}))})})};e.render=function(){var a=this,b=this.props.accountInfo,e=h._(/*BTDS*/"Continue as {username}",[h._param("username",b.username)]);return j.jsxs("div",{className:"x78zum5 xdt5ytf",children:[this.$2(),this.$3(),j.jsx(c("IGDSBox.react"),{marginBottom:4,marginEnd:"auto",marginStart:"auto",marginTop:4,maxWidth:"100%",minWidth:120,position:"relative",width:"intrinsic",children:j.jsx(c("PolarisIGCoreButton.react"),{loading:this.props.requestInFlight,onClick:function(c){return a.props.onRequestLogin(b.username,c)},children:j.jsx(c("IGDSBox.react"),{paddingX:4,position:"relative",children:j.jsx(c("PolarisIGCoreText").BodyEmphasized,{color:"web-always-white",display:"truncated",zeroMargin:!0,children:e})})})}),j.jsx("div",{className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 x78zum5 xdt5ytf x2lah0s xln7xf2 xk390pu xcxhlts x14z9mp x1fqp7bg x1lziwak xexx8yu xp48ta0 x18d9i69 xtssl2i x1n2onr6 x2b8uid x11njtxf",children:j.jsxs("span",{className:"x972fbf x10w94by x1qhh985 x14e42zd x5n08af xt0psk2 xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf",children:[d("PolarisAuthStrings").notUsernameText(b.username)," ",this.props.pageType===d("PolarisAuthConstants").AuthPageType.Signup?j.jsx(c("IGDSButton.react"),{display:"block",href:c("XPolarisEmailSignupControllerRouteBuilder").buildURL({}),label:h._(/*BTDS*/"Sign Up"),onClick:function(b){return a.$1(b,d("PolarisAuthActionConstants").AUTH.signup)},variant:"primary_link"}):j.jsx(c("IGDSButton.react"),{display:"block",label:h._(/*BTDS*/"Switch accounts"),onClick:function(b){return a.$1(b,d("PolarisAuthActionConstants").AUTH.login)},variant:"primary_link"})]})})]})};return b}(j.Component);g["default"]=a}),226);
__d("PolarisLandingFormButtonGroup.react",["IGDSBox.react","IGDSText.react","PolarisAuthStrings","PolarisIGCoreButton.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={brandForwardPrimaryButtonContainer:{paddingTop:"xexx8yu",paddingInlineEnd:"x64bnmy",paddingBottom:"x18d9i69",paddingInlineStart:"x13jy36j",width:"xh8yej3",$$css:!0}};function k(a){var b=d("react-compiler-runtime").c(6);a=a.button;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e={__className:"x5yr21d"},b[0]=e):e=b[0];var f;b[1]!==a.label?(f=i.jsx(c("IGDSText.react"),{color:"primaryButton",weight:"semibold",children:a.label}),b[1]=a.label,b[2]=f):f=b[2];b[3]!==a.onClick||b[4]!==f?(e=i.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,dangerouslySetClassName:e,"data-testid":void 0,onClick:a.onClick,children:f}),b[3]=a.onClick,b[4]=f,b[5]=e):e=b[5];return e}function l(a){var b=d("react-compiler-runtime").c(11),e=a.buttonEnd;a=a.buttonStart;var f;b[0]!==a?(f=a&&i.jsx(k,{button:a}),b[0]=a,b[1]=f):f=b[1];var g;b[2]!==e||b[3]!==a?(g=a&&e&&i.jsx(c("IGDSBox.react"),{display:"inlineBlock",marginEnd:1,marginStart:1,position:"relative",children:i.jsx(c("IGDSText.react"),{color:"secondaryText",children:d("PolarisAuthStrings").OR})}),b[2]=e,b[3]=a,b[4]=g):g=b[4];b[5]!==e?(a=e&&i.jsx(k,{button:e}),b[5]=e,b[6]=a):a=b[6];b[7]!==f||b[8]!==g||b[9]!==a?(e=i.jsxs(c("IGDSBox.react"),{alignSelf:"center",display:"inlineBlock",marginTop:5,position:"relative",children:[f,g,a]}),b[7]=f,b[8]=g,b[9]=a,b[10]=e):e=b[10];return e}function m(a){var b=d("react-compiler-runtime").c(6),e=a.fullWidth;a=a.primaryButton;e=e===void 0?!1:e;var f;b[0]!==a.label?(f=i.jsx(c("IGDSBox.react"),{alignItems:"center",direction:"row",display:"flex",justifyContent:"center",position:"relative",children:a.label}),b[0]=a.label,b[1]=f):f=b[1];var g;b[2]!==e||b[3]!==a.onClick||b[4]!==f?(g=i.jsx(c("PolarisIGCoreButton.react"),{fullWidth:e,large:!0,onClick:a.onClick,children:f}),b[2]=e,b[3]=a.onClick,b[4]=f,b[5]=g):g=b[5];return g}function a(a){var b=d("react-compiler-runtime").c(12),e=a.isBrandForwardStyle,f=a.primaryButton,g=a.secondaryButtonEnd;a=a.secondaryButtonStart;e=e===void 0?!1:e;var h=e&&j.brandForwardPrimaryButtonContainer,k;b[0]!==e||b[1]!==f?(k=e?i.jsx("div",{className:"x1wmp3kr x15b4ht x11g16fi xkyum4 x6ikm8r x10wlt62",children:i.jsx(m,{fullWidth:!0,primaryButton:f})}):i.jsx(m,{primaryButton:f}),b[0]=e,b[1]=f,b[2]=k):k=b[2];b[3]!==h||b[4]!==k?(e=i.jsx(c("IGDSBox.react"),{marginEnd:10,marginStart:10,marginTop:4,position:"relative",xstyle:h,children:k}),b[3]=h,b[4]=k,b[5]=e):e=b[5];b[6]!==g||b[7]!==a?(f=i.jsx(l,{buttonEnd:g,buttonStart:a}),b[6]=g,b[7]=a,b[8]=f):f=b[8];b[9]!==e||b[10]!==f?(h=i.jsxs(i.Fragment,{children:[e,f]}),b[9]=e,b[10]=f,b[11]=h):h=b[11];return h}g["default"]=a}),98);
__d("PolarisLoggedOutCarouselCard.react",["CometImage.react","IGDSBox.react","PolarisHSnapScroll.react","PolarisStepIndicator.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useState,k={image:{display:"x1lliihq",height:"x5yr21d",width:"x14atkfc",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(20),e=a.images,f=a.texts;a=j(0);var g=a[0],h=a[1];b[0]!==g||b[1]!==e.length?(a=function(a){a=a.startPct;a=Math.round(a);a=Math.max(0,Math.min(a,e.length-1));a!==g&&h(a)},b[0]=g,b[1]=e.length,b[2]=a):a=b[2];a=a;if(b[3]!==e||b[4]!==f){var m;b[6]!==f?(m=function(a,b){return i.jsxs("div",{className:"x6s0dn4 x78zum5 xdt5ytf xl56j7k x1g81zrj xn9wirt",children:[i.jsx("div",{className:"x6s0dn4 x78zum5 xdt5ytf x1vd4hg5 xl56j7k x6ikm8r x10wlt62 x14atkfc",children:i.jsx(c("CometImage.react"),{src:a,xstyle:k.image})}),i.jsx("div",{className:"x1qz8m4s xnh215r xddofbv x1j61x8r xo1l8bm xkds0cx x1ls015a xat24cr xotxm5o x11fxgd9 x2b8uid",children:f[b]||""})]},b)},b[6]=f,b[7]=m):m=b[7];m=e.map(m);b[3]=e;b[4]=f;b[5]=m}else m=b[5];m=m;var n;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(n={className:"x16nrsnc xdj266r xpwdb9g xat24cr xefazk8 x1n2onr6 xh8yej3"},b[8]=n):n=b[8];var o;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(o={next:!0,previous:!0},b[9]=o):o=b[9];b[10]!==m||b[11]!==a||b[12]!==e.length?(o=i.jsx(c("PolarisHSnapScroll.react"),{animationDuration:150,enableMouseSwipe:!0,gutterWidth:0,itemCount:e.length,itemWidth:window.innerWidth,onInteract:l,onVisibilityChange:a,pagerDisabled:o,swipeSize:1,children:m}),b[10]=m,b[11]=a,b[12]=e.length,b[13]=o):o=b[13];b[14]!==g||b[15]!==e.length?(m=e.length>1&&i.jsx(c("PolarisStepIndicator.react"),{className:"x6s0dn4 xxzp1fc x1f889gz xrr41r3 xl56j7k x10l6tqk",numSteps:e.length,selectedStep:g,style:"lightContrast"}),b[14]=g,b[15]=e.length,b[16]=m):m=b[16];b[17]!==o||b[18]!==m?(a=i.jsx(c("IGDSBox.react"),{alignItems:"center",display:"flex",justifyContent:"center",position:"relative",children:i.jsxs("div",babelHelpers["extends"]({},n,{children:[o,m]}))}),b[17]=o,b[18]=m,b[19]=a):a=b[19];return a}function l(){}g["default"]=a}),98);
__d("PolarisLoggedOutMobileHomeBrandingContent.react",["fbt","ix","IGCoreImage.react","IGDSBox.react","IGDSButton.react","IGDSIgLogoFilledIcon.react","PolarisLandingFormUtils","PolarisLoggedOutCarouselCard.react","react","react-compiler-runtime","usePolarisLOXBrandForwardDeeplinkLogoUpsell","usePolarisLOXHomePageBrandForwardButtonSwitchUpsell"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react");function a(a){var b=d("react-compiler-runtime").c(9);a=a.onLogoClick;if(b[0]===Symbol["for"]("react.memo_cache_sentinel")){var e;e=[{images:[i("914477"),i("914478"),i("914479")],texts:[(e=d("PolarisLandingFormUtils")).WATCH_SEND_SHORT_VIDEOS,e.SEE_FRIENDS_CREATORS_UPDATES,e.FIND_SHARE_INTERESTS]},{images:[i("914480"),i("914481"),i("914482")],texts:[e.COMMUNITY_Q_AND_A,e.MATCH_MUSIC_TO_MOMENTS,e.SAVE_CORE_MEMORIES]},{images:[i("914483"),i("914484"),i("914485")],texts:[e.SHARE_WITH_CLOSE_FRIENDS,e.SPARK_DM_CONVERSATIONS,e.DROP_QUICK_NOTES]}];b[0]=e}else e=b[0];e=e;var f=c("usePolarisLOXHomePageBrandForwardButtonSwitchUpsell")();f=f.getBrandForwardButtonSwitchUpsellVariant;f=f()==="mweb_button_switch_a";var g=c("usePolarisLOXBrandForwardDeeplinkLogoUpsell")(),j=g.getBrandForwardDeeplinkLogoUpsellVariant;g=g.isBrandForwardDeeplinkLogoUpsell;j=j()==="mweb_deeplink_logo";var m;b[1]!==f||b[2]!==j||b[3]!==g||b[4]!==a?(m=f||g?k.jsxs(k.Fragment,{children:[j?k.jsx(c("IGDSBox.react"),{alignItems:"baseline",marginBottom:5,marginTop:2,paddingX:2,children:k.jsx(c("IGDSButton.react"),{icon:k.jsx(c("IGDSIgLogoFilledIcon.react"),{alt:"ins",color:"ig-primary-text",size:47}),onClick:a,variant:"tertiary"})}):k.jsx(c("IGDSBox.react"),{alignItems:"baseline",marginBottom:3,paddingX:6,children:k.jsx(c("IGDSIgLogoFilledIcon.react"),{alt:"ins",color:"ig-primary-text",size:47})}),k.jsxs(c("IGDSBox.react"),{alignItems:"center",marginBottom:13,marginTop:10,paddingX:6,children:[k.jsx(c("IGCoreImage.react"),{alt:h._(/*BTDS*/"Landing image"),"data-testid":void 0,src:{light:i("914486")}}),k.jsx("div",{className:"x1qz8m4s xnh215r x1j61x8r x2b8uid xcg35fi xo1l8bm xmx5zq6 x9d7mpn x14vqqas",children:d("PolarisLandingFormUtils").SHARE_EVERYDAY_MOMENTS_FBT})]})]}):k.jsxs(c("IGDSBox.react"),{marginBottom:3,marginTop:16,paddingY:10,position:"relative",children:[k.jsx(c("IGDSBox.react"),{alignItems:"center",marginBottom:3,marginTop:14,position:"relative",children:k.jsx(c("IGCoreImage.react"),{alt:h._(/*BTDS*/"Instagram"),src:{dark:i("222731"),light:i("222730")}})}),k.jsx(c("IGDSBox.react"),{marginBottom:16,paddingX:9,position:"relative",children:k.jsx("div",{className:"x1qz8m4s xnh215r x1j61x8r x2b8uid xngnso2 xk50ysn x8y9ox5 xggjnk3",children:d("PolarisLandingFormUtils").SHARE_EVERYDAY_MOMENTS_FBT})})]}),b[1]=f,b[2]=j,b[3]=g,b[4]=a,b[5]=m):m=b[5];f=m;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(j=e.map(l),b[6]=j):j=b[6];g=j;b[7]!==f?(a=k.jsxs(k.Fragment,{children:[f,g]}),b[7]=f,b[8]=a):a=b[8];return a}function l(a,b){return k.jsx("div",{className:"x1byr4rc xyri2b x1egpv2n x1c1uobl",children:k.jsx(c("PolarisLoggedOutCarouselCard.react"),{images:a.images,texts:a.texts},b)},b)}l.displayName=l.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("PolarisLandingForm.react",["IGDSBox.react","InstagramODS","PolarisAuthActionConstants","PolarisAuthActions","PolarisAuthLimitedRegistrationHelpers","PolarisAuthStrings","PolarisFooter.react","PolarisIGCoreText","PolarisIgLiteCarbonUpsellsUtils","PolarisLandingFormButtonGroup.react","PolarisLandingFormUtils","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutMobileHomeBrandingContent.react","PolarisLoggedOutUpsellUtils","PolarisReactRedux.react","PolarisRoutePropUtils","PolarisSignupActions","PolarisUA","XPolarisLoginControllerRouteBuilder","gkx","react","react-compiler-runtime","useCometRouterDispatcher","usePolarisLOXBrandForwardDeeplinkLogoUpsell","usePolarisLOXHomePageBrandForwardButtonSwitchUpsell","usePolarisOpenApp","usePolarisPageID"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useContext;function k(a,b,c){return{primary:{label:c.buttonText,onClick:c.onClickFn},secondary:{end:{label:d("PolarisAuthStrings").SIGN_UP_BUTTON_TEXT_LOWER_CASE,onClick:b},start:{label:d("PolarisAuthStrings").LOG_IN_BUTTON_TEXT,onClick:a}}}}function a(a){var b=d("react-compiler-runtime").c(27);a=a.ref;var e=d("PolarisReactRedux.react").useDispatch(),f=c("usePolarisPageID")(),g=c("useCometRouterDispatcher")(),h;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(h=d("PolarisIgLiteCarbonUpsellsUtils").isIgLiteCarbonUpsellsEligible(),b[0]=h):h=b[0];var l=h;h=c("usePolarisLOXHomePageBrandForwardButtonSwitchUpsell")();h=h.isBrandForwardButtonSwitchUpsell;var m=c("usePolarisLOXBrandForwardDeeplinkLogoUpsell")();m=m.isBrandForwardDeeplinkLogoUpsell;h=h||m;m=j(d("PolarisRoutePropUtils").PolarisRoutePropContext);var n;b[1]!==m.routePropQE?(n=m.routePropQE.getNumber("landing_page_value_prop_variant",0),b[1]=m.routePropQE,b[2]=n):n=b[2];m=Number(n);b[3]!==e||b[4]!==f?(n=function(){d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("signup","full_page",f),d("PolarisAuthLimitedRegistrationHelpers").hasRestrictedRegistration()?e(d("PolarisSignupActions").setShowRegulatoryConsentModal()):e(d("PolarisAuthActions").switchAuthType(d("PolarisAuthActionConstants").AUTH.signup))},b[3]=e,b[4]=f,b[5]=n):n=b[5];n=n;var o;b[6]!==g||b[7]!==e||b[8]!==f?(o=function(){d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("login","full_page",f),c("gkx")("18606")===!0?g==null||g.go(c("XPolarisLoginControllerRouteBuilder").buildUri({mtn:!0}).toString(),{}):e(d("PolarisAuthActions").switchAuthType(d("PolarisAuthActionConstants").AUTH.login))},b[6]=g,b[7]=e,b[8]=f,b[9]=o):o=b[9];o=o;var p=c("usePolarisOpenApp")(),q;b[10]!==p||b[11]!==f?(q=function(){d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("app_open","full_page",f),d("PolarisUA").isDesktop()&&c("InstagramODS").incr("web.desktop.app_open_click.PolarisLandingForm"),p(l?{utmCampaignDefault:"rootLandingPage",utmMedium:"installLink"}:void 0)},b[10]=p,b[11]=f,b[12]=q):q=b[12];q=q;var r=d("PolarisLoggedOutUpsellUtils").useGetUpsellTextAndAction(q,l),s;b[13]!==o||b[14]!==n||b[15]!==r?(s=k(o,n,r),b[13]=o,b[14]=n,b[15]=r,b[16]=s):s=b[16];o=s;b[17]!==o.primary||b[18]!==o.secondary.end||b[19]!==o.secondary.start||b[20]!==h||b[21]!==q||b[22]!==m?(n=h?i.jsxs(i.Fragment,{children:[i.jsx(c("PolarisLoggedOutMobileHomeBrandingContent.react"),{onLogoClick:q}),i.jsx(c("IGDSBox.react"),{marginTop:17,children:i.jsx(c("PolarisFooter.react"),{includeLanguageAndCopyright:!0,variant:"centered"})}),i.jsx("div",{className:"x6s0dn4 xm0mo6v xxux13n x1ey2m1c x78zum5 xdt5ytf xtijo5x x1o0tod xl84xjf xixxii4 xh8yej3 x1vjfegm",children:i.jsx(c("PolarisLandingFormButtonGroup.react"),{isBrandForwardStyle:h,primaryButton:o.primary,secondaryButtonEnd:o.secondary.end,secondaryButtonStart:o.secondary.start})})]}):i.jsxs(i.Fragment,{children:[i.jsx(c("IGDSBox.react"),{marginBottom:4,paddingX:7,position:"relative",children:i.jsx(c("PolarisIGCoreText"),{Element:"h1",size:"headline2",textAlign:"center",weight:"normal",children:d("PolarisLandingFormUtils").getLoginValuePropText(m)})}),i.jsx(c("PolarisLandingFormButtonGroup.react"),{primaryButton:o.primary,secondaryButtonEnd:o.secondary.end,secondaryButtonStart:o.secondary.start})]}),b[17]=o.primary,b[18]=o.secondary.end,b[19]=o.secondary.start,b[20]=h,b[21]=q,b[22]=m,b[23]=n):n=b[23];b[24]!==a||b[25]!==n?(r=i.jsx(c("IGDSBox.react"),{containerRef:a,flex:"grow",marginTop:5,position:"relative",width:"100%",children:n}),b[24]=a,b[25]=n,b[26]=r):r=b[26];return r}g["default"]=a}),98);
__d("PolarisLoggedOutContentWallDialogAuthCTAs.react",["IGDSText.react","PolarisAppInstallStrings","PolarisConsentStrings.react","PolarisLoggedOutLoginButton.react","PolarisLoggedOutSignupButton.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={button:{height:"xn3w4p2",$$css:!0}};function a(){var a=d("react-compiler-runtime").c(5),b,e,f,g;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b={className:"xkh2ocl x78zum5 xdt5ytf xyamay9 xv54qhq x1l90r2v xf7dkkf x3pnbk8"},e=i.jsx(c("PolarisLoggedOutSignupButton.react"),{ctaTypeV2:"auth_form_dialog",isDismissible:!0,label:d("PolarisAppInstallStrings").SIGNUP_UP_FOR_INSTAGRAM_APP,loginSource:"logged_out_megaphone_signup",variant:"primary",xstyle:j.button}),f=i.jsx(c("PolarisLoggedOutLoginButton.react"),{ctaTypeV2:"auth_form_dialog",loginSource:"logged_out_megaphone_signup",variant:"secondary",xstyle:j.button}),g={className:"xz9dl7a xsag5q8"},a[0]=b,a[1]=e,a[2]=f,a[3]=g):(b=a[0],e=a[1],f=a[2],g=a[3]);a[4]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsxs("div",babelHelpers["extends"]({},b,{children:[e,f,i.jsx("div",babelHelpers["extends"]({},g,{children:i.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",textAlign:"center",children:d("PolarisConsentStrings.react").instagramTermsOfUseAndPrivacyPolicyText("secondaryText")})}))]})),a[4]=b):b=a[4];return b}g["default"]=a}),98);
__d("PolarisLoginActionClearStopDeletionNonce",[],(function(a,b,c,d,e,f){"use strict";function a(){return function(a,b){a({deletionDate:null,deletionNonce:null,type:"ACCOUNT_DELETED"})}}f.clearStopDeletionNonce=a}),66);
__d("PolarisLoginActionOneTapLoginRemove",["PolarisAuthStrings","PolarisLoginLogger","PolarisOneTapLogin","PolarisToastActions"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return function(b,c){d("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_account_remove_click",ig_userid:a,login_type:"device_based_login"});try{d("PolarisOneTapLogin").removeLoginNonce(a)}catch(a){d("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_account_remove_failed",login_type:"device_based_login"}),b(d("PolarisToastActions").showToast({persistOnNavigate:!0,text:d("PolarisAuthStrings").LOGIN_FAILED_TEXT}))}window.location.reload()}}g.oneTapLoginRemove=a}),98);
__d("PolarisOneTapLoginForm.react",["fbt","CometPressable.react","IGDSBox.react","IGDSButton.react","IGDSDivider.react","IGDSXPanoFilledIcon.react","PolarisAuthStrings","PolarisAuthTypeSwitcher.react","PolarisConfirmDialog.react","PolarisGenericStrings","PolarisIGCoreSVGIconButton.react","PolarisLoginActionOneTapLogin","PolarisLoginActionOneTapLoginRemove","PolarisLoginLogger","PolarisReactRedux.react","PolarisUA","PolarisUserAvatar.react","emptyFunction","react","react-compiler-runtime","stylex","usePolarisOneTapLoginEditModeState","useSingleSimpleImpression"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react")),l=j,m=l.useCallback,n=l.useState,o=h._(/*BTDS*/"Manage Accounts"),p={account:{alignItems:"x6s0dn4",cursor:"x1ypdohk",display:"x78zum5",flexDirection:"x1q0g3np",flexGrow:"x1iyjqo2",fontWeight:"xwhw2v2",$$css:!0},multiContainer:{paddingBottom:"xx6bls6",paddingTop:"x7sb2j6",$$css:!0},profilePicture:{borderTopColor:"x1w6pcvv",borderInlineEndColor:"x1kr3336",borderBottomColor:"x1e5933n",borderInlineStartColor:"x8itksh",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",marginInlineEnd:"xbmvrgn",$$css:!0},profilePictureSingle:{borderTopColor:"x1w6pcvv",borderInlineEndColor:"x1kr3336",borderBottomColor:"x1e5933n",borderInlineStartColor:"x8itksh",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",marginTop:"x1xmf6yo",marginInlineEnd:"x11t971q",marginBottom:"x1yztbdb",marginInlineStart:"xvc5jky",$$css:!0},root:{fontSize:"xvs91rp",fontWeight:"xz5fbns",maxWidth:"x1dc814f",width:"xh8yej3",$$css:!0}};function q(a){var b=d("react-compiler-runtime").c(12),e=a.handleRemoveOneTapLoginDialogClose,f=a.handleRemoveOneTapLoginDialogConfirm,g=a.userId;a=a.username;var i;b[0]!==a?(i=h._(/*BTDS*/"You'll need to enter your username and password the next time you log in as {username}",[h._param("username",a)]),b[0]=a,b[1]=i):i=b[1];var j;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._(/*BTDS*/"Cancel"),j=h._(/*BTDS*/"Remove"),b[2]=a,b[3]=j):(a=b[2],j=b[3]);var l;b[4]!==f||b[5]!==g?(l=function(){return f(g)},b[4]=f,b[5]=g,b[6]=l):l=b[6];var m;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(m=h._(/*BTDS*/"Remove Account?"),b[7]=m):m=b[7];b[8]!==e||b[9]!==i||b[10]!==l?(a=k.jsx(c("PolarisConfirmDialog.react"),{body:i,cancelLabel:a,confirmLabel:j,onClose:e,onConfirm:l,title:m}),b[8]=e,b[9]=i,b[10]=l,b[11]=a):a=b[11];return a}function r(a){var b=d("react-compiler-runtime").c(33),e=a.fbConnectedUser,f=a.isLoginButtonDisabled,g=a.isLoginButtonLoading,h=a.onRequestFBLogin;if(!e||!h)return null;a=e.fbUserID;var i=e.profilePictureUrl,j=e.username;e=String(a);b[0]!==e||b[1]!==f?(a=f(e),b[0]=e,b[1]=f,b[2]=a):a=b[2];f=a;b[3]!==e||b[4]!==g?(a=g(e),b[3]=e,b[4]=g,b[5]=a):a=b[5];e=a;b[6]!==f||b[7]!==h||b[8]!==j?(g=f?c("emptyFunction"):function(){h(j)},b[6]=f,b[7]=h,b[8]=j,b[9]=g):g=b[9];b[10]===Symbol["for"]("react.memo_cache_sentinel")?(a="x1w6pcvv x1kr3336 x1e5933n x8itksh x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 xbmvrgn",b[10]=a):a=b[10];var l;b[11]!==h||b[12]!==j?(l=function(){return h(j)},b[11]=h,b[12]=j,b[13]=l):l=b[13];b[14]!==i||b[15]!==l||b[16]!==j?(a=k.jsx(c("PolarisUserAvatar.react"),{className:a,isLink:!1,onClick:l,profilePictureUrl:i,size:s,username:j}),b[14]=i,b[15]=l,b[16]=j,b[17]=a):a=b[17];b[18]===Symbol["for"]("react.memo_cache_sentinel")?(i={className:"x1qjc9v5 xdt5ytf x1iyjqo2 xs83m0k x6ikm8r x10wlt62 xlyipyv xuxw1ft"},b[18]=i):i=b[18];b[19]!==j?(l=k.jsx("div",babelHelpers["extends"]({},i,{children:j})),b[19]=j,b[20]=l):l=b[20];b[21]!==h||b[22]!==j?(i=function(){h(j)},b[21]=h,b[22]=j,b[23]=i):i=b[23];var m;b[24]!==f||b[25]!==e||b[26]!==i?(m=k.jsx(c("IGDSBox.react"),{justifyContent:"end",children:k.jsx(c("IGDSButton.react"),{display:"block",isDisabled:f,isLoading:e,label:d("PolarisAuthStrings").LOG_IN_BUTTON_TEXT,onClick:i})}),b[24]=f,b[25]=e,b[26]=i,b[27]=m):m=b[27];b[28]!==m||b[29]!==g||b[30]!==a||b[31]!==l?(f=k.jsxs(c("CometPressable.react"),{onPress:g,role:"button",xstyle:p.account,children:[a,l,m]}),b[28]=m,b[29]=g,b[30]=a,b[31]=l,b[32]=f):f=b[32];return f}var s=38,t=86;function u(a){var b=d("react-compiler-runtime").c(14),e=a.handleLoginClick,f=a.isSingleAccount,g=a.loginNonces,h=a.userId;a=g[h];var j=a.nonce;g=a.profilePicUrl;a=a.username;var l;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(l={className:"x78zum5 xl56j7k"},b[0]=l):l=b[0];var m=f?p.profilePictureSingle:p.profilePicture,n;b[1]!==m?(n=(i||(i=c("stylex")))(m),b[1]=m,b[2]=n):n=b[2];b[3]!==e||b[4]!==f||b[5]!==j||b[6]!==h?(m=f?function(){return e(h,j)}:void 0,b[3]=e,b[4]=f,b[5]=j,b[6]=h,b[7]=m):m=b[7];f=f?t:s;b[8]!==g||b[9]!==n||b[10]!==m||b[11]!==f||b[12]!==a?(l=k.jsx("div",babelHelpers["extends"]({},l,{children:k.jsx(c("PolarisUserAvatar.react"),{className:n,isLink:!1,onClick:m,profilePictureUrl:g,size:f,username:a})})),b[8]=g,b[9]=n,b[10]=m,b[11]=f,b[12]=a,b[13]=l):l=b[13];return l}function v(a){var b=d("react-compiler-runtime").c(39),e=a.editMode,f=a.handleLoginClick,g=a.handleRemoveAccountClick,h=a.isLoginButtonDisabled,i=a.isLoginButtonLoading,j=a.loginNonces,l=a.userId,m=j[l].nonce,n=j[l].username;b[0]!==h||b[1]!==l?(a=h(l),b[0]=h,b[1]=l,b[2]=a):a=b[2];h=a;b[3]!==i||b[4]!==l?(a=i(l),b[3]=i,b[4]=l,b[5]=a):a=b[5];i=a;b[6]!==e||b[7]!==f||b[8]!==h||b[9]!==m||b[10]!==l?(a=e||h?c("emptyFunction"):function(){return f(l,m)},b[6]=e,b[7]=f,b[8]=h,b[9]=m,b[10]=l,b[11]=a):a=b[11];a=a;var o=h||i,q;b[12]!==g||b[13]!==l||b[14]!==n?(q=function(){return g(l,n)},b[12]=g,b[13]=l,b[14]=n,b[15]=q):q=b[15];var r;b[16]===Symbol["for"]("react.memo_cache_sentinel")?(r=k.jsx(c("IGDSXPanoFilledIcon.react"),{alt:d("PolarisGenericStrings").CLOSE_TEXT,size:12}),b[16]=r):r=b[16];b[17]!==o||b[18]!==q?(r=k.jsx(c("PolarisIGCoreSVGIconButton.react"),{disabled:o,onClick:q,padding:0,children:r}),b[17]=o,b[18]=q,b[19]=r):r=b[19];o=r;b[20]!==f||b[21]!==j||b[22]!==l?(q=k.jsx(u,{handleLoginClick:f,isSingleAccount:!1,loginNonces:j,userId:l}),b[20]=f,b[21]=j,b[22]=l,b[23]=q):q=b[23];b[24]===Symbol["for"]("react.memo_cache_sentinel")?(r={className:"x1qjc9v5 xdt5ytf x1iyjqo2 xs83m0k x6ikm8r x10wlt62 xlyipyv xuxw1ft"},b[24]=r):r=b[24];b[25]!==n?(j=k.jsx("div",babelHelpers["extends"]({},r,{children:n})),b[25]=n,b[26]=j):j=b[26];b[27]!==e||b[28]!==a||b[29]!==h||b[30]!==i||b[31]!==o?(r=k.jsx(c("IGDSBox.react"),{justifyContent:"end",children:e?o:k.jsx(c("IGDSButton.react"),{display:"block",isDisabled:h,isLoading:i,label:d("PolarisAuthStrings").LOG_IN_BUTTON_TEXT,onClick:a})}),b[27]=e,b[28]=a,b[29]=h,b[30]=i,b[31]=o,b[32]=r):r=b[32];b[33]!==a||b[34]!==j||b[35]!==r||b[36]!==q||b[37]!==l?(e=k.jsx(c("IGDSBox.react"),{alignItems:"center",columnGap:2,direction:"row",flex:"grow",paddingY:2,children:k.jsxs(c("CometPressable.react"),{onPress:a,role:"button",xstyle:p.account,children:[q,j,r]},l)}),b[33]=a,b[34]=j,b[35]=r,b[36]=q,b[37]=l,b[38]=e):e=b[38];return e}function w(){var a=d("react-compiler-runtime").c(2),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=k.jsx(c("IGDSBox.react"),{paddingX:9,paddingY:2,position:"relative",width:"100%",children:k.jsx(c("IGDSDivider.react"),{})}),a[0]=b):b=a[0];a[1]===Symbol["for"]("react.memo_cache_sentinel")?(b=k.jsxs(k.Fragment,{children:[b,k.jsx(c("IGDSBox.react"),{alignItems:"center",marginBottom:4,marginTop:4,position:"relative",children:k.jsx(c("PolarisAuthTypeSwitcher.react"),{primary:!0})})]}),a[1]=b):b=a[1];return b}function x(a){var b=d("react-compiler-runtime").c(3);a=a.onRemoveClick;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._(/*BTDS*/"Remove Account"),b[0]=e):e=b[0];b[1]!==a?(e=k.jsx(c("IGDSButton.react"),{display:"block",label:e,onClick:a,variant:"primary_link"}),b[1]=a,b[2]=e):e=b[2];return e}function y(a){var b=d("react-compiler-runtime").c(29),e=a.handleLoginClick,f=a.handleRemoveAccountClick,g=a.isLoginButtonLoading,i=a.loginNonces;a=a.showSingleAccountProfilePicture;var j;b[0]!==i?(j=Object.keys(i),b[0]=i,b[1]=j):j=b[1];var l=j[0];j=i[l];var m=j.nonce,n=j.username;b[2]!==n?(j=h._(/*BTDS*/"Continue as {username}",[h._param("username",n)]),b[2]=n,b[3]=j):j=b[3];j=j;var o;b[4]!==e||b[5]!==i||b[6]!==a||b[7]!==l?(o=a&&k.jsx(u,{handleLoginClick:e,isSingleAccount:!0,loginNonces:i,userId:l}),b[4]=e,b[5]=i,b[6]=a,b[7]=l,b[8]=o):o=b[8];b[9]!==g||b[10]!==l?(i=g(l),b[9]=g,b[10]=l,b[11]=i):i=b[11];b[12]!==e||b[13]!==m||b[14]!==l?(a=function(){return e(l,m)},b[12]=e,b[13]=m,b[14]=l,b[15]=a):a=b[15];b[16]!==j||b[17]!==i||b[18]!==a?(g=k.jsx(c("IGDSBox.react"),{marginBottom:5,marginEnd:"auto",marginStart:"auto",marginTop:4,minWidth:120,position:"relative",width:"intrinsic",children:k.jsx(c("IGDSButton.react"),{isLoading:i,label:j,onClick:a,size:"small",variant:"primary"})}),b[16]=j,b[17]=i,b[18]=a,b[19]=g):g=b[19];b[20]!==f||b[21]!==l||b[22]!==n?(j=k.jsx(c("IGDSBox.react"),{alignItems:"center",marginBottom:5,position:"relative",children:k.jsx(x,{onRemoveClick:function(){return f(l,n)}})}),b[20]=f,b[21]=l,b[22]=n,b[23]=j):j=b[23];b[24]===Symbol["for"]("react.memo_cache_sentinel")?(i=d("PolarisUA").isMobile()&&k.jsx(w,{}),b[24]=i):i=b[24];b[25]!==o||b[26]!==g||b[27]!==j?(a=k.jsxs(c("IGDSBox.react"),{direction:"column",flex:"grow",children:[o,g,j,i]}),b[25]=o,b[26]=g,b[27]=j,b[28]=a):a=b[28];return a}function z(a){var b=d("react-compiler-runtime").c(27),e=a.editMode,f=a.fbConnectedUser,g=a.handleLoginClick,i=a.handleManageAccountsClick,j=a.handleRemoveAccountClick,l=a.isLoginButtonDisabled,m=a.isLoginButtonLoading,n=a.loginNonces;a=a.onRequestFBLogin;var q;b[0]!==e?(q=e?h._(/*BTDS*/"Done Editing"):o,b[0]=e,b[1]=q):q=b[1];q=q;var s;b[2]!==n?(s=Object.keys(n),b[2]=n,b[3]=s):s=b[3];var t;b[4]!==e||b[5]!==g||b[6]!==j||b[7]!==l||b[8]!==m||b[9]!==n||b[10]!==s?(t=s.map(function(a){return k.jsx(v,{editMode:e,handleLoginClick:g,handleRemoveAccountClick:j,isLoginButtonDisabled:l,isLoginButtonLoading:m,loginNonces:n,userId:a},"account_"+a)}),b[4]=e,b[5]=g,b[6]=j,b[7]=l,b[8]=m,b[9]=n,b[10]=s,b[11]=t):t=b[11];s=t;b[12]!==f||b[13]!==l||b[14]!==m||b[15]!==a?(t=k.jsx(r,{fbConnectedUser:f,isLoginButtonDisabled:l,isLoginButtonLoading:m,onRequestFBLogin:a}),b[12]=f,b[13]=l,b[14]=m,b[15]=a,b[16]=t):t=b[16];b[17]!==s||b[18]!==t?(f=k.jsxs(c("IGDSBox.react"),{alignItems:"stretch",direction:"column",paddingX:4,xstyle:p.multiContainer,children:[s,t]}),b[17]=s,b[18]=t,b[19]=f):f=b[19];b[20]!==i||b[21]!==q?(a=k.jsx(c("IGDSBox.react"),{marginBottom:6,position:"relative",children:k.jsx(c("IGDSBox.react"),{marginTop:4,position:"relative",children:k.jsx(c("IGDSButton.react"),{display:"block",label:q,onClick:i,variant:"primary_link"})})}),b[20]=i,b[21]=q,b[22]=a):a=b[22];b[23]===Symbol["for"]("react.memo_cache_sentinel")?(s=d("PolarisUA").isMobile()&&k.jsx(c("IGDSBox.react"),{alignItems:"center",position:"relative",children:k.jsx(c("PolarisAuthTypeSwitcher.react"),{primary:!0})}),b[23]=s):s=b[23];b[24]!==f||b[25]!==a?(t=k.jsxs(c("IGDSBox.react"),{direction:"column",flex:"grow",children:[f,a,s]}),b[24]=f,b[25]=a,b[26]=t):t=b[26];return t}function a(a){var b=a.fbConnectedUser,e=a.loginNonces,f=a.onLoginClick,g=a.onRemoveClick,h=a.onRequestFBLogin,i=a.requestInFlight,j=a.requestUserId;a=a.showSingleAccountProfilePicture;a=a===void 0?!0:a;var l=n({id:"",username:""}),o=l[0],r=l[1];l=n(!1);var s=l[0],t=l[1];l=c("usePolarisOneTapLoginEditModeState")();var u=l[0],v=l[1];c("useSingleSimpleImpression")(function(){Object.keys(e).length===1?d("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_single_user_form_load",login_type:"device_based_login"}):d("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_multi_user_form_load",login_type:"device_based_login"}),d("PolarisLoginLogger").logLoginEvent({event_category:"aymh_home_page_init",event_flow:"aymh",event_name:"aymh_step_view_loaded",event_step:"home_page",extra_client_data:{total_count:Object.keys(e).length.toString()}})});var w=m(function(a,b){f(a,b,function(){return w(a,b)}),d("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_login_login_click",extra_client_data:{credential_type:"nonce"},login_type:"device_based_login"})},[f]);l=m(function(a,b){r({id:a,username:b}),t(!0),d("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_login_remove_account_prompt_show",login_type:"device_based_login"})},[]);var x=m(function(a){g(a)},[g]),A=m(function(){r({id:"",username:""}),t(!1),d("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_remove_account_prompt_hide",login_type:"device_based_login"})},[]),B=m(function(){v(!u)},[u,v]),C=function(a){return i&&a!==j},D=function(a){return i&&a===j},E=Object.keys(e).length===1&&!b;return k.jsxs(c("IGDSBox.react"),{alignItems:"stretch",direction:"column",xstyle:p.root,children:[E?k.jsx(y,{handleLoginClick:w,handleRemoveAccountClick:l,isLoginButtonLoading:D,loginNonces:e,showSingleAccountProfilePicture:a}):k.jsx(z,{editMode:u,fbConnectedUser:b,handleLoginClick:w,handleManageAccountsClick:B,handleRemoveAccountClick:l,isLoginButtonDisabled:C,isLoginButtonLoading:D,loginNonces:e,onRequestFBLogin:h}),s&&o.id&&o.username&&k.jsx(q,{handleRemoveOneTapLoginDialogClose:A,handleRemoveOneTapLoginDialogConfirm:x,userId:o.id,username:o.username})]})}a.displayName=a.name+" [from "+f.id+"]";function b(a){var b,c;a=a.auth;return{requestInFlight:(a==null||(b=a.login)==null?void 0:b.requestInFlight)===!0,requestUserId:a==null||(c=a.login)==null?void 0:c.userId}}function e(a){return{onLoginClick:function(b,c,e){a(d("PolarisLoginActionOneTapLogin").oneTapLogin({loginNonce:c,retry:e,userId:b}))},onRemoveClick:function(b){a(d("PolarisLoginActionOneTapLoginRemove").oneTapLoginRemove(b))}}}l=d("PolarisReactRedux.react").connect(b,e)(a);g["default"]=l}),226);
__d("PolarisBirthdaySignupForm.react",["ix","IGCoreImage.react","IGDSBox.react","IGDSTextVariants.react","PolarisAgeCollectionHelpers","PolarisAuthStrings","PolarisBirthdayFormInput.react","PolarisBirthdaysAdditionalInfoModal.react","PolarisDateHelpers","PolarisDateStrings","PolarisIGCoreButton.react","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSignupActions","PolarisSignupFormFields.react","PolarisSignupTypesHelpers","gkx","react","usePolarisEmailOrPhoneContactpointType"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useState;function a(a){var b,e=a.onBirthdayEntered,f=a.onSignup,g=a.pageIdentifier,i=a.requestInFlight,m=a.signupNonSpecificError;a=a.style;a=a===void 0?"default":a;var n=d("PolarisReactRedux.react").useDispatch(),o=l(!1),p=o[0],q=o[1],r=d("PolarisReactRedux.react").useSelector(function(a){return(a=a.auth.signup)==null?void 0:a.signupResult});o=l((r==null||(b=r.fields.birthday)==null?void 0:b.value)!=null?d("PolarisDateHelpers").dateToDateType(new Date(r.fields.birthday.value)):d("PolarisDateHelpers").getOneYearAgoDateType());var s=o[0],t=o[1],u=c("usePolarisEmailOrPhoneContactpointType")();o=function(){n(d("PolarisSignupActions").returnToBaseSignupForm()),d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:u,event_name:"back_button_clicked",step:"birthday"})};var v=d("PolarisAgeCollectionHelpers").isDOBInputAttemptDisabled(s),w=function(){var a=d("PolarisSignupTypesHelpers").convertSignupResultToSignupFields(r);a.birthday=d("PolarisDateHelpers").dateTypeToString(s);c("gkx")("14029")===!0&&e();f(a)},x=function(a){d("PolarisRegistrationLogger").logRegistrationEvent({containermodule:g,event_name:"birthday_interaction"}),t(a)};k(function(){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:u,event_name:"form_load",step:"birthday"})},[u]);return j.jsxs(j.Fragment,{children:[j.jsx(c("PolarisSignupFormFields.react"),{handleGoBack:o,handleNext:w,header:d("PolarisAuthStrings").BIRTHDAY_HEADER_TEXT,icon:j.jsx(c("IGCoreImage.react"),{alt:d("PolarisAgeCollectionHelpers").BIRTHDAY_ICON_ALT_TEXT,src:{dark:h("877412"),light:h("877413")}}),isNextActionDisabled:v,requestInFlight:i,signupNonSpecificError:m,style:a,subHeader:d("PolarisAuthStrings").BIRTHDAY_SUBHEADER_TEXT,children:j.jsxs(j.Fragment,{children:[j.jsx(c("IGDSBox.react"),{marginBottom:2,position:"relative",children:j.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:function(){return q(!0)},children:j.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"primaryButton",children:d("PolarisAuthStrings").BIRTHDAY_WHY_LINK_TEXT})})}),j.jsx(c("IGDSBox.react"),{marginBottom:2,marginTop:2,position:"relative",children:j.jsx(c("PolarisBirthdayFormInput.react"),{birthday:d("PolarisDateHelpers").dateTypeToString(s),onBirthdayChange:x})}),j.jsx(c("IGDSBox.react"),{position:"relative",width:"100%",children:j.jsx(c("IGDSBox.react"),{marginBottom:2,marginTop:2,position:"relative",children:j.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",textAlign:"center",children:d("PolarisDateStrings").getBirthdayDisclaimerText()})})})]})}),p&&j.jsx(c("PolarisBirthdaysAdditionalInfoModal.react"),{onClose:function(){return q(!1)}})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisCaptchaSignupForm.react",["IGDSBox.react","IGDSTextVariants.react","PolarisAuthStrings","PolarisReactRedux.react","PolarisRecaptcha","PolarisRegistrationLogger","PolarisSignupActions","PolarisSignupFormFields.react","PolarisSignupTypesHelpers","react","usePolarisEmailOrPhoneContactpointType"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=a.onSignup,e=a.requestInFlight,f=a.signupNonSpecificError;a=a.style;a=a===void 0?"default":a;var g=d("PolarisReactRedux.react").useDispatch(),h=k(function(){return""}),l=h[0],m=h[1],n=d("PolarisReactRedux.react").useSelector(function(a){return(a=a.auth.signup)==null?void 0:a.signupResult}),o=c("usePolarisEmailOrPhoneContactpointType")();j(function(){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:o,event_name:"form_load",step:"captcha"})},[o]);h=function(){g(d("PolarisSignupActions").returnToBaseSignupForm()),d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:o,event_name:"back_button_clicked",step:"captcha"})};var p=l==="",q=function(){var a=d("PolarisSignupTypesHelpers").convertSignupResultToSignupFields(n);a.captcha=l;b(a)},r=function(a){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:o,event_name:"captcha_solved"}),m(a)};return i.jsxs(c("PolarisSignupFormFields.react"),{handleGoBack:h,handleNext:q,header:d("PolarisAuthStrings").SIGN_UP_BUTTON_TEXT,isNextActionDisabled:p,requestInFlight:e,style:a,subHeader:d("PolarisAuthStrings").SIGN_UP_PHONE_LINK_TEXT,children:[i.jsx(c("IGDSBox.react"),{alignItems:"center",justifyContent:"center",position:"relative",children:i.jsx(c("PolarisRecaptcha"),{onChange:r})}),f!=null&&i.jsx(c("IGDSBox.react"),{marginTop:4,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"errorOrDestructive",textAlign:"center",children:f})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisEmailConfirmationForm.react",["fbt","ix","IGCoreImage.react","IGDSBox.react","IGDSButton.react","IGDSDialogFooter.react","IGDSTextVariants.react","PolarisAuthStrings","PolarisGenericStrings","PolarisIGCoreTextInput.react","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSignupActions","qex","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react"));b=j;b.useCallback;var l=b.useEffect,m=b.useState,n=6,o=h._(/*BTDS*/"Email confirmation"),p=350;function a(a){var b,e,f=d("react-compiler-runtime").c(64),g=a.onSubmit,h=a.pageIdentifier,j=a.requestInFlight,r=a.signupNonSpecificError;a=a.style;a=a===void 0?"default":a;var s=d("PolarisReactRedux.react").useDispatch(),t=d("PolarisReactRedux.react").useSelector(q),u=(b=t==null||(e=t.fields.emailOrPhone)==null?void 0:e.value)!=null?b:"";b=m("");var v=b[0],w=b[1];b=m(!1);var x=b[0],y=b[1],z=v.length<n||j;b=r;if(b==null&&(t==null?void 0:t.fields)!=null){var A=t.fields;r=Object.keys(A).some(function(a){return((a=A[a])==null?void 0:a.error)!=null});r&&(b=d("PolarisAuthStrings").ERROR_SIGNUP_UNKNOWN)}f[0]===Symbol["for"]("react.memo_cache_sentinel")?(r=function(a){w(a.target.value)},f[0]=r):r=f[0];r=r;var B;f[1]!==s?(B=function(){s(d("PolarisSignupActions").returnToBaseSignupForm()),d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"email",event_name:"back_button_clicked",step:"emailConfirmation"})},f[1]=s,f[2]=B):B=f[2];B=B;var C;f[3]!==s||f[4]!==u?(C=function(){s(d("PolarisSignupActions").requestConfirmationEmailWithLogging(u,null,!0))},f[3]=s,f[4]=u,f[5]=C):C=f[5];C=C;var D;f[6]!==v||f[7]!==z||f[8]!==g||f[9]!==t?(D=function(){if(!z&&t!=null){var a=Object.keys(t.fields).reduce(function(a,b){var c;c=(c=t.fields[b])==null?void 0:c.value;c!=null&&b!=="optIntoOneTap"&&(a[b]=c);return a},{});a.emailConfirmationCode=v;g(a)}},f[6]=v,f[7]=z,f[8]=g,f[9]=t,f[10]=D):D=f[10];var E=D,F;f[11]!==h?(D=function(){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"email",containermodule:h,event_name:"form_load",step:"emailConfirmation"})},F=[h],f[11]=h,f[12]=D,f[13]=F):(D=f[12],F=f[13]);l(D,F);f[14]!==v.length||f[15]!==E||f[16]!==x?(D=function(){if(x)return;v.length===n&&c("qex")._("2155")===!0&&(y(!0),E())},f[14]=v.length,f[15]=E,f[16]=x,f[17]=D):D=f[17];f[18]!==v||f[19]!==E||f[20]!==x?(F=[v,E,x],f[18]=v,f[19]=E,f[20]=x,f[21]=F):F=f[21];l(D,F);f[22]===Symbol["for"]("react.memo_cache_sentinel")?(D=k.jsx(c("IGCoreImage.react"),{alt:o,src:{dark:i("148908"),light:i("835354")}}),f[22]=D):D=f[22];f[23]===Symbol["for"]("react.memo_cache_sentinel")?(F=k.jsx(c("IGDSBox.react"),{marginBottom:2,marginTop:4,position:"relative",children:k.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{textAlign:"center",children:d("PolarisAuthStrings").EMAIL_CONFIRMATION_CODE_HEADER})}),f[23]=F):F=f[23];var G;f[24]!==u?(G=d("PolarisAuthStrings").emailConfirmationCodeSubheader(u),f[24]=u,f[25]=G):G=f[25];var H;f[26]!==C?(H=k.jsx(c("IGDSButton.react"),{display:"block",label:d("PolarisAuthStrings").EMAIL_CONFIRMATION_RESEND_CODE,onClick:C,variant:"primary_link"}),f[26]=C,f[27]=H):H=f[27];f[28]!==G||f[29]!==H?(C=k.jsxs(c("IGDSBox.react"),{alignItems:"center",maxWidth:p,paddingX:7,paddingY:2,position:"relative",children:[D,F,k.jsx(c("IGDSBox.react"),{display:"inlineBlock",marginBottom:4,marginTop:4,position:"relative",children:k.jsxs(d("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:[G," ",H]})})]}),f[28]=G,f[29]=H,f[30]=C):C=f[30];f[31]!==E?(D=function(a){a.preventDefault(),E()},f[31]=E,f[32]=D):D=f[32];f[33]===Symbol["for"]("react.memo_cache_sentinel")?(F=k.jsx("input",{className:"x1s85apg",type:"submit"}),f[33]=F):F=f[33];f[34]!==h?(G=function(){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"email",containermodule:h,event_name:"confirmation_interaction"})},f[34]=h,f[35]=G):G=f[35];f[36]!==v||f[37]!==G?(H=k.jsx(c("IGDSBox.react"),{position:"relative",width:"100%",children:k.jsx(c("PolarisIGCoreTextInput.react"),{"aria-label":d("PolarisAuthStrings").EMAIL_CONFIRMATION_CODE,autoComplete:"off",maxLength:8,name:"email_confirmation_code",onChange:r,onFocus:G,placeholder:d("PolarisAuthStrings").EMAIL_CONFIRMATION_CODE,value:v})}),f[36]=v,f[37]=G,f[38]=H):H=f[38];f[39]!==z||f[40]!==B||f[41]!==E||f[42]!==j||f[43]!==a?(r=a==="default"&&k.jsxs(k.Fragment,{children:[k.jsx(c("IGDSBox.react"),{marginTop:4,position:"relative",width:"100%",children:k.jsx(c("IGDSButton.react"),{fullWidth:!0,isDisabled:z,isLoading:j,label:d("PolarisGenericStrings").NEXT,onClick:E})}),k.jsx(c("IGDSBox.react"),{marginTop:4,position:"relative",children:k.jsx(c("IGDSButton.react"),{display:"block",isDisabled:j,label:d("PolarisGenericStrings").GO_BACK,onClick:B,variant:"primary_link"})})]}),f[39]=z,f[40]=B,f[41]=E,f[42]=j,f[43]=a,f[44]=r):r=f[44];f[45]!==b?(G=b!=null&&k.jsx(c("IGDSBox.react"),{marginTop:4,position:"relative",children:k.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"errorOrDestructive",textAlign:"center",children:b})}),f[45]=b,f[46]=G):G=f[46];f[47]!==H||f[48]!==r||f[49]!==G?(b=k.jsxs(c("IGDSBox.react"),{alignItems:"center",margin:"auto",marginBottom:2,marginTop:2,maxWidth:p,paddingX:10,position:"relative",children:[H,r,G]}),f[47]=H,f[48]=r,f[49]=G,f[50]=b):b=f[50];f[51]!==z||f[52]!==B||f[53]!==E||f[54]!==j||f[55]!==a?(H=a==="modal"&&k.jsx(c("IGDSBox.react"),{marginTop:5,position:"relative",width:"100%",children:k.jsx(c("IGDSDialogFooter.react"),{endAdornment:k.jsx(c("IGDSButton.react"),{display:"block",isDisabled:z,isLoading:j,label:d("PolarisAuthStrings").CONTINUE,onClick:E,variant:"primary_link"}),startAdornment:k.jsx(c("IGDSButton.react"),{display:"block",label:d("PolarisGenericStrings").BACK_TEXT,onClick:B,variant:"primary_link"})})}),f[51]=z,f[52]=B,f[53]=E,f[54]=j,f[55]=a,f[56]=H):H=f[56];f[57]!==D||f[58]!==b||f[59]!==H?(r=k.jsx(c("IGDSBox.react"),{position:"relative",width:"100%",children:k.jsxs("form",{method:"POST",noValidate:!1,onSubmit:D,children:[F,b,H]})}),f[57]=D,f[58]=b,f[59]=H,f[60]=r):r=f[60];f[61]!==C||f[62]!==r?(G=k.jsxs(k.Fragment,{children:[C,r]}),f[61]=C,f[62]=r,f[63]=G):G=f[63];return G}function q(a){return(a=a.auth.signup)==null?void 0:a.signupResult}g["default"]=a}),226);
__d("PolarisPhoneSignupChangeNumberForm.react",["fbt","IGDSBox.react","PolarisGenericStrings","PolarisIGCoreButton.react","PolarisSlimTextInput.react","isStringNullOrEmpty","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useRef,m=b.useState,n="phoneSignupConfirmErrorAlert",o=h._(/*BTDS*/"New phone number");function a(a){var b=d("react-compiler-runtime").c(35),e=a.errorMessage,f=a.initialPhoneNumber,g=a.onGoBackClick,i=a.onSubmit;a=a.requestInFlight;var p=l(null),q=m(""),r=q[0],s=q[1],t;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(q=function(){var a;(a=p.current)==null||a.focus()},t=[],b[0]=q,b[1]=t):(q=b[0],t=b[1]);k(q,t);b[2]!==r||b[3]!==i?(q=function(a){a.preventDefault(),i(r)},b[2]=r,b[3]=i,b[4]=q):q=b[4];t=q;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(q=function(a){s(a.target.value)},b[5]=q):q=b[5];q=q;var u,v,w,x,y,z;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(v={className:"x889kno xyri2b x1a8lsjc x1c1uobl"},w=j.jsx("h2",{className:"x972fbf x10w94by x1qhh985 x14e42zd x1lliihq xln7xf2 x1jchvi3 x1s688f xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x2b8uid x11njtxf",children:h._(/*BTDS*/"Change phone number")}),x={className:"x972fbf x10w94by x1qhh985 x14e42zd x1lliihq xln7xf2 x1f6kntn x1fcty0u xd4r4e8 xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x2b8uid x11njtxf"},y=j.jsx("span",{className:"x972fbf x10w94by x1qhh985 x14e42zd x5n08af xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf",children:h._(/*BTDS*/"Current phone number:")}),z=j.jsx("br",{}),u={className:"x972fbf x10w94by x1qhh985 x14e42zd x1roi4f4 xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},b[6]=u,b[7]=v,b[8]=w,b[9]=x,b[10]=y,b[11]=z):(u=b[6],v=b[7],w=b[8],x=b[9],y=b[10],z=b[11]);b[12]!==f?(x=j.jsxs("p",babelHelpers["extends"]({},x,{children:[y,z,j.jsx("span",babelHelpers["extends"]({},u,{children:f}))]})),b[12]=f,b[13]=x):x=b[13];b[14]===Symbol["for"]("react.memo_cache_sentinel")?(y={className:"x972fbf x10w94by x1qhh985 x14e42zd x78zum5 xdt5ytf xln7xf2 xk390pu xdj266r x14z9mp x1lziwak x1yztbdb xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},b[14]=y):y=b[14];b[15]===Symbol["for"]("react.memo_cache_sentinel")?(z="xdj266r x11gldyt x1iymm2a x11hdunq",b[15]=z):z=b[15];b[16]!==r?(u=j.jsx(c("PolarisSlimTextInput.react"),{"aria-label":o,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",className:z,name:"newPhoneNumber",onChange:q,placeholder:o,ref:p,type:"tel",value:r}),b[16]=r,b[17]=u):u=b[17];b[18]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._(/*BTDS*/"Change"),b[18]=f):f=b[18];b[19]!==t||b[20]!==a?(z=j.jsx(c("IGDSBox.react"),{marginBottom:4,marginEnd:10,marginStart:10,position:"relative",children:j.jsx(c("PolarisIGCoreButton.react"),{loading:a,onClick:t,children:f})}),b[19]=t,b[20]=a,b[21]=z):z=b[21];b[22]!==t||b[23]!==u||b[24]!==z?(q=j.jsxs("form",babelHelpers["extends"]({},y,{method:"POST",onSubmit:t,children:[u,z]})),b[22]=t,b[23]=u,b[24]=z,b[25]=q):q=b[25];b[26]!==e?(f=!c("isStringNullOrEmpty")(e)&&j.jsx("div",{className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 xkmlbd1 x78zum5 xdt5ytf x2lah0s xln7xf2 x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x2b8uid x11njtxf",children:j.jsx("p",{"aria-atomic":"true",id:n,role:"alert",children:e})}),b[26]=e,b[27]=f):f=b[27];b[28]!==g?(a=j.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:g,children:d("PolarisGenericStrings").GO_BACK}),b[28]=g,b[29]=a):a=b[29];b[30]!==x||b[31]!==q||b[32]!==f||b[33]!==a?(y=j.jsxs("div",babelHelpers["extends"]({},v,{children:[w,x,q,f,a]})),b[30]=x,b[31]=q,b[32]=f,b[33]=a,b[34]=y):y=b[34];return y}g["default"]=a}),226);
__d("PolarisPhoneSignupConfirmForm.react",["fbt","IGDSBox.react","IGDSText.react","IGDSTextVariants.react","PolarisIGCoreButton.react","PolarisMultiSignupConstants","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSlimTextInput.react","qex","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useEffect,l=b.useRef,m=b.useState,n="phoneSignupConfirmErrorAlert",o="confirmationCodeDescription",p=h._(/*BTDS*/"Just one more step");function q(a){return h._(/*BTDS*/"Enter the 6-digit code we sent to: {phone number}",[h._param("phone number",a)])}var r="######",s=h._(/*BTDS*/"Confirm");function t(a,b){return j.jsx("div",{className:b,children:j.jsx("p",{"aria-atomic":"true",id:n,role:"alert",children:a})})}t.displayName=t.name+" [from "+f.id+"]";function a(a){var b=d("react-compiler-runtime").c(57),e=a.errorMessage,f=a.onChangeNumberClick,g=a.onResendClick,i=a.onSubmit,n=a.pageIdentifier,t=a.phoneNumber,x=a.requestInFlight;a=a.successMessage;var y=m(""),z=y[0],A=y[1];y=m(!1);var B=y[0],C=y[1],D=l(null),E;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(y=function(){(D==null?void 0:D.current)!=null&&D.current.focus()},E=[],b[0]=y,b[1]=E):(y=b[0],E=b[1]);k(y,E);y=w;E=v;var F=d("PolarisReactRedux.react").useSelector(u),G;b[2]!==z||b[3]!==i||b[4]!==F?(G=function(){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"phone",event_name:"twofac_form_next_clicked"});var a=z.replace(/\s+/g,"");if((F==null?void 0:F.fields)!=null){var b=Object.keys(F.fields).reduce(function(a,b){var c;c=(c=F.fields[b])==null?void 0:c.value;c!=null&&b!=="optIntoOneTap"&&(a[b]=c);return a},{});b.twofac=a;i(b)}},b[2]=z,b[3]=i,b[4]=F,b[5]=G):G=b[5];var H=G;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(G=function(a){a=a.target.value;if(!a.match(/^[0-9 ]*$/))return;A(a)},b[6]=G):G=b[6];G=G;var I;b[7]!==z.length||b[8]!==H||b[9]!==B?(I=function(){if(B)return;z.length===d("PolarisMultiSignupConstants").TWO_FAC_CODE_MIN_LENGTH&&c("qex")._("2156")===!0&&(C(!0),H())},b[7]=z.length,b[8]=H,b[9]=B,b[10]=I):I=b[10];var J;b[11]!==z||b[12]!==H||b[13]!==B?(J=[z,H,B],b[11]=z,b[12]=H,b[13]=B,b[14]=J):J=b[14];k(I,J);b[15]===Symbol["for"]("react.memo_cache_sentinel")?(I={className:"x889kno xyri2b x1a8lsjc x1c1uobl"},b[15]=I):I=b[15];b[16]===Symbol["for"]("react.memo_cache_sentinel")?(J=j.jsx(c("IGDSBox.react"),{marginBottom:2,marginTop:2,position:"relative",children:j.jsx(c("IGDSText.react"),{size:"label",textAlign:"center",weight:"semibold",children:p})}),b[16]=J):J=b[16];var K;b[17]!==t?(K=q(t),b[17]=t,b[18]=K):K=b[18];b[19]!==K?(t=j.jsxs(c("IGDSBox.react"),{alignItems:"center",id:o,paddingX:7,position:"relative",children:[J,j.jsx(c("IGDSBox.react"),{marginBottom:4,marginTop:4,position:"relative",children:j.jsx(d("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:K})})]}),b[19]=K,b[20]=t):t=b[20];b[21]===Symbol["for"]("react.memo_cache_sentinel")?(J={className:"x972fbf x10w94by x1qhh985 x14e42zd x78zum5 xdt5ytf xln7xf2 xk390pu xdj266r x14z9mp x1lziwak x1yztbdb xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},b[21]=J):J=b[21];b[22]!==H?(K=function(a){a.preventDefault(),H()},b[22]=H,b[23]=K):K=b[23];var L;b[24]===Symbol["for"]("react.memo_cache_sentinel")?(L="xdj266r x11gldyt x1iymm2a x11hdunq",b[24]=L):L=b[24];var M;b[25]!==n?(M=function(){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"phone",containermodule:n,event_name:"confirmation_interaction"})},b[25]=n,b[26]=M):M=b[26];b[27]!==z||b[28]!==M?(L=j.jsx(c("PolarisSlimTextInput.react"),{"aria-describedby":o,"aria-label":r,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",className:L,maxLength:6,name:"confirmationCode",onChange:G,onFocus:M,placeholder:r,ref:D,type:"tel",value:z}),b[27]=z,b[28]=M,b[29]=L):L=b[29];b[30]!==H||b[31]!==x?(G=j.jsx(c("IGDSBox.react"),{marginBottom:4,marginEnd:10,marginStart:10,position:"relative",children:j.jsx(c("PolarisIGCoreButton.react"),{loading:x,onClick:H,children:s})}),b[30]=H,b[31]=x,b[32]=G):G=b[32];b[33]!==K||b[34]!==L||b[35]!==G?(M=j.jsxs("form",babelHelpers["extends"]({},J,{method:"POST",onSubmit:K,children:[L,G]})),b[33]=K,b[34]=L,b[35]=G,b[36]=M):M=b[36];b[37]!==e?(x=e!=null&&e!==""&&y(e),b[37]=e,b[38]=x):x=b[38];b[39]!==a?(J=a!=null&&a!==""&&E(a),b[39]=a,b[40]=J):J=b[40];b[41]===Symbol["for"]("react.memo_cache_sentinel")?(K={className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt x1yztbdb x11hdunq x2b8uid"},b[41]=K):K=b[41];b[42]===Symbol["for"]("react.memo_cache_sentinel")?(L=h._(/*BTDS*/"Change Number"),b[42]=L):L=b[42];b[43]!==f?(G=j.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:f,children:L}),b[43]=f,b[44]=G):G=b[44];b[45]===Symbol["for"]("react.memo_cache_sentinel")?(y=h._(/*BTDS*/"Request New Code"),b[45]=y):y=b[45];b[46]!==g?(e=j.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:g,children:y}),b[46]=g,b[47]=e):e=b[47];b[48]!==G||b[49]!==e?(E=j.jsxs("div",babelHelpers["extends"]({},K,{children:[G," | ",e]})),b[48]=G,b[49]=e,b[50]=E):E=b[50];b[51]!==t||b[52]!==M||b[53]!==x||b[54]!==J||b[55]!==E?(a=j.jsxs("div",babelHelpers["extends"]({},I,{children:[t,M,x,J,E]})),b[51]=t,b[52]=M,b[53]=x,b[54]=J,b[55]=E,b[56]=a):a=b[56];return a}function u(a){return(a=a.auth.signup)==null?void 0:a.signupResult}function v(a){return t(a,"x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq x2b8uid x5n08af")}function w(a){return t(a,"x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq x2b8uid xkmlbd1")}g["default"]=a}),226);
__d("PolarisPhoneSignupForm.react",["fbt","invariant","FBLogger","IGDSBox.react","PolarisAssetManagerGlyphMapping","PolarisIGCoreIcon.react","PolarisPhoneSignupChangeNumberForm.react","PolarisPhoneSignupConfirmForm.react","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSignupActions","isStringNullOrEmpty","react","react-compiler-runtime","vulture"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useEffect,m=h._(/*BTDS*/"Phone confirmation");function a(a){var b,e=d("react-compiler-runtime").c(33),f=a.onSubmit,g=a.pageIdentifier;a=a.requestInFlight;c("vulture")("t9s5RfYZPnozrejm5PVEyAcxCLc=");var j=(b=d("PolarisReactRedux.react")).useSelector(q),r=b.useSelector(p),s=b.useSelector(o),t=b.useSelector(n),u=b.useDispatch();e[0]!==u?(b=function(){return u(d("PolarisSignupActions").switchPhoneSignupStep("changePhoneNumber"))},e[0]=u,e[1]=b):b=e[1];b=b;var v;e[2]!==u?(v=function(){return u(d("PolarisSignupActions").switchPhoneSignupStep("enterCode"))},e[2]=u,e[3]=v):v=e[3];v=v;var w;e[4]!==u?(w=function(a){return u(d("PolarisSignupActions").rerequestSMSCode(a))},e[4]=u,e[5]=w):w=e[5];w=w;var x;e[6]!==u?(x=function(){return u(d("PolarisSignupActions").rerequestSMSCode())},e[6]=u,e[7]=x):x=e[7];x=x;c("isStringNullOrEmpty")(r)&&i(0,51615);var y,z;e[8]!==g?(y=function(){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"phone",containermodule:g,event_name:"form_load",step:"twofac"})},z=[g],e[8]=g,e[9]=y,e[10]=z):(y=e[9],z=e[10]);l(y,z);if(s==="enterCode"){e[11]!==t?(y=t&&k.jsx("div",{className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 x5n08af x78zum5 xdt5ytf x2lah0s xln7xf2 x1f6kntn xd4r4e8 x1anpbxc x3aesyq xyorhqc xqsn43r xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x2b8uid x11njtxf",children:h._(/*BTDS*/"Your code was resent.")}),e[11]=t,e[12]=y):y=e[12];e[13]!==b||e[14]!==x||e[15]!==f||e[16]!==g||e[17]!==r||e[18]!==a||e[19]!==j?(z=k.jsx(c("PolarisPhoneSignupConfirmForm.react"),{errorMessage:j,onChangeNumberClick:b,onResendClick:x,onSubmit:f,pageIdentifier:g,phoneNumber:r,requestInFlight:a,successMessage:null}),e[13]=b,e[14]=x,e[15]=f,e[16]=g,e[17]=r,e[18]=a,e[19]=j,e[20]=z):z=e[20];e[21]!==y||e[22]!==z?(t=k.jsxs("div",{children:[y,z]}),e[21]=y,e[22]=z,e[23]=t):t=e[23];b=t}else if(s==="changePhoneNumber"){e[24]!==w||e[25]!==v||e[26]!==r||e[27]!==a||e[28]!==j?(x=k.jsx(c("PolarisPhoneSignupChangeNumberForm.react"),{errorMessage:j,initialPhoneNumber:r,onGoBackClick:v,onSubmit:w,requestInFlight:a}),e[24]=w,e[25]=v,e[26]=r,e[27]=a,e[28]=j,e[29]=x):x=e[29];b=x}else{c("FBLogger")("ig_web").mustfix("Unexpected phone signup step");return null}e[30]===Symbol["for"]("react.memo_cache_sentinel")?(f=k.jsx(c("PolarisIGCoreIcon.react"),{alt:m,icon:d("PolarisAssetManagerGlyphMapping").ICONS.PHONE_CONFIRM}),e[30]=f):f=e[30];e[31]!==b?(y=k.jsxs(c("IGDSBox.react"),{alignItems:"center",position:"relative",children:[f,b]}),e[31]=b,e[32]=y):y=e[32];return y}function n(a){return((a=a.auth.signup)==null?void 0:a.resentResetCode)||!1}function o(a){return(a=a.auth.signup)==null?void 0:a.phoneSignupConfirmStep}function p(a){return(a=a.auth.signup)==null||(a=a.signupCredentials)==null?void 0:a.phoneNumber}function q(a){return(a=a.auth.signup)==null?void 0:a.signupNonSpecificError}g["default"]=a}),226);
__d("PolarisEmailDomainHelpers",["PolarisConfig","memoize"],(function(a,b,c,d,e,f,g){"use strict";var h={"aol.com":{initialSuggestion:!1},"bk.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"gmail.com":{initialSuggestion:!0},"gmx.de":{countryCodeFilter:"DE",initialSuggestion:!1},"hotmail.com":{initialSuggestion:!0},"icloud.com":{initialSuggestion:!1},"inbox.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"list.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"live.com":{initialSuggestion:!1},"mail.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"msn.com":{initialSuggestion:!1},"naver.com":{initialSuggestion:!1},"onet.pl":{countryCodeFilter:"PL",initialSuggestion:!1},"outlook.com":{initialSuggestion:!0},"qq.com":{initialSuggestion:!1},"rambler.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"web.de":{countryCodeFilter:"DE",initialSuggestion:!1},"yahoo.co.jp":{countryCodeFilter:"JP",initialSuggestion:!1},"yahoo.com":{initialSuggestion:!0},"yandex.com":{initialSuggestion:!1},"yandex.ru":{countryCodeFilter:"RU",initialSuggestion:!1}},i=c("memoize")(function(){return Object.keys(h).filter(function(a){a=h[a];return"countryCodeFilter"in a?a.countryCodeFilter===d("PolarisConfig").getCountryCode():!0})});b=c("memoize")(function(){return i().reduce(function(a,b){var c=h[b];return!c.initialSuggestion?a:[].concat(a,[b])},[])});var j={"gail.com":"gmail.com","gamel.com":"gmail.com","gamil.com":"gmail.com","gamli.com":"gmail.com","gemil.com":"gmail.com","gma.com":"gmail.com","gmail.co":"gmail.com","gmaile.com":"gmail.com","gmali.com":"gmail.com","gmall.com":"gmail.com","gmel.com":"gmail.com","gmeli.com":"gmail.com","gmile.com":"gmail.com"};function a(a){a=a.split("@");var b=a[0];a=a[1];return a&&Object.prototype.hasOwnProperty.call(j,a)?b+"@"+j[a]:null}g.getPopularDomainList=i;g.getInitialSuggestedPopularDomains=b;g.getSuggestedEmail=a}),98);
__d("PolarisMultiSignupEmailSuggestionDialog.react",["fbt","IGCoreDialog.react","PolarisRegistrationLogger","memoizeStringOnly","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");a=function(a){function b(){var b;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=a.call.apply(a,[this].concat(f))||this,b.handleSuggestionClick=function(a){a===b.props.emailSuggestion?d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint:a,contactpoint_type:"email",event_name:"typo_fix_accept"}):d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint:a,contactpoint_type:"email",event_name:"typo_fix_skip"}),b.props.onSelection(a)},b.$1=c("memoizeStringOnly")(function(a){return b.handleSuggestionClick.bind(babelHelpers.assertThisInitialized(b),a)}),babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.getEmailDomain=function(a){return a.split("@")[1]};e.render=function(){var a=this.props,b=a.emailSuggestion;a=a.originalEmail;return j.jsxs(d("IGCoreDialog.react").IGCoreDialog,{body:h._(/*BTDS*/"It looks like you misspelled your email address. Did you mean to use {filled email domain} ?",[h._param("filled email domain",j.jsx("span",{className:"x972fbf x10w94by x1qhh985 x14e42zd xln7xf2 xk390pu xl7tqy7 xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf",children:"@"+this.getEmailDomain(a)}))]),onModalClose:this.props.onClose,title:h._(/*BTDS*/"Typo?"),children:[j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-primary-button",onClick:this.$1(b),children:h._(/*BTDS*/"Use {email suggestion} instead",[h._param("email suggestion","@"+this.getEmailDomain(b))])}),j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{onClick:this.$1(a),children:h._(/*BTDS*/"Keep as is")})]})};return b}(j.Component);g["default"]=a}),226);
__d("PolarisSlimSignupUsernameSuggestions.react",["IGDSBox.react","IGDSButton.react","PolarisRegistrationLogger","isEmail","polarisIsPhoneNumber","qex","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState,l=38,m=134;function n(a){if(a==null||a==="")return null;if(c("isEmail")(a))return"email";return c("polarisIsPhoneNumber")(a)?"phone":null}function a(a){var b=d("react-compiler-runtime").c(26),e=a.emailOrPhone,f=a.onUsernameUpdate,g=a.pageIdentifier,h=a.username;a=a.usernameSuggestions;var p;b[0]!==a?(p=a.filter(o),b[0]=a,b[1]=p):p=b[1];var q=p;a=k(q);p=a[0];var r=a[1];a=k(!1);var s=a[0],t=a[1],u;b[2]!==q||b[3]!==g?(a=function(){q.length>0&&d("PolarisRegistrationLogger").logRegistrationEvent({containermodule:g,event_name:"username_suggestion_fetch_success"}),r(q)},u=[q,g],b[2]=q,b[3]=g,b[4]=a,b[5]=u):(a=b[4],u=b[5]);j(a,u);b[6]!==q[0]||b[7]!==q.length||b[8]!==s||b[9]!==f||b[10]!==h?(a=function(){if(s)return;else if(h!=null&&h!=="")t(!0);else if(q.length>0){var a;a=(a=c("qex")._("2564"))!=null?a:!1;a&&f(q[0]);t(!0)}},b[6]=q[0],b[7]=q.length,b[8]=s,b[9]=f,b[10]=h,b[11]=a):a=b[11];b[12]!==q||b[13]!==s||b[14]!==f||b[15]!==h?(u=[h,q,s,f],b[12]=q,b[13]=s,b[14]=f,b[15]=h,b[16]=u):u=b[16];j(a,u);if(q.length===0)return null;if(b[17]!==e||b[18]!==f||b[19]!==p){b[21]!==e||b[22]!==f?(a=function(a){return i.jsx("div",{className:"x13t61ll x1kchd1x x1u0fnx4 xbxn0j6 x6ikm8r x10wlt62 x1n2onr6",style:{height:l,width:m},children:i.jsx(c("IGDSBox.react"),{marginBottom:2,marginEnd:1,position:"relative",children:i.jsx(c("IGDSButton.react"),{label:a,onClick:function(){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:n(e),event_name:"click_username_suggestions"}),f(a)},variant:"secondary"})})},a)},b[21]=e,b[22]=f,b[23]=a):a=b[23];u=p.slice(0,2).map(a);b[17]=e;b[18]=f;b[19]=p;b[20]=u}else u=b[20];b[24]!==u?(a=i.jsx(c("IGDSBox.react"),{direction:"row",height:l,marginEnd:10,marginStart:10,position:"relative",children:u}),b[24]=u,b[25]=a):a=b[25];return a}function o(a){return a.length<14}g["default"]=a}),98);
__d("PolarisTermsPrivacyPolicyBlurb.react",["fbt","IGDSTextVariants.react","PolarisConsentTypes","PolarisExternalRoutes","PolarisFastLink.react","PolarisReactRedux.react","PolarisRoutes","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function k(){return c("gkx")("25366")===!0}function l(a){var b=d("react-compiler-runtime").c(3);a=a.className;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:h._(/*BTDS*/"By signing up, you agree to our {=Terms} & {=Privacy Policy} .",[h._param("=Terms",j.jsx(c("PolarisFastLink.react"),{href:"/legal/terms/",target:"_blank",children:h._(/*BTDS*/"Terms")})),h._param("=Privacy Policy",j.jsx(c("PolarisFastLink.react"),{href:"/legal/privacy/",target:"_blank",children:h._(/*BTDS*/"Privacy Policy")}))])}),b[0]=e):e=b[0];b[1]!==a?(e=j.jsx("p",{className:a,children:e}),b[1]=a,b[2]=e):e=b[2];return e}function m(a){a===void 0&&(a=!0);return j.jsxs(j.Fragment,{children:[j.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:h._(/*BTDS*/"People who use our service may have uploaded your contact information to Instagram. {Contact uploading for non-users privacy policy}",[h._param("Contact uploading for non-users privacy policy",j.jsx(c("PolarisFastLink.react"),{href:d("PolarisExternalRoutes").FACEBOOK_CONTACT_UPLOADING_AND_NON_USERS,target:"_blank",children:h._(/*BTDS*/"Learn More")}))])}),a&&j.jsxs(j.Fragment,{children:[j.jsx("br",{}),j.jsx("br",{})]})]})}function n(a){var b=d("react-compiler-runtime").c(7);a=a.className;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsxs(d("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:[m(),h._(/*BTDS*/"By signing up, you agree to our {=Terms}. Learn how we collect, use and share your data in our {Privacy Policy} and how we use cookies and similar technology in our {Cookies Policy}.",[h._param("=Terms",j.jsx(c("PolarisFastLink.react"),{href:d("PolarisExternalRoutes").NEW_LEGAL_TERMS_PATH,target:"_blank",children:h._(/*BTDS*/"Terms")})),h._param("Privacy Policy",j.jsx(c("PolarisFastLink.react"),{href:d("PolarisExternalRoutes").NEW_PRIVACY_POLICY_PATH,target:"_blank",children:h._(/*BTDS*/"Privacy Policy")})),h._param("Cookies Policy",j.jsx(c("PolarisFastLink.react"),{href:d("PolarisRoutes").NEW_COOKIE_POLICY_PATH,target:"_blank",children:h._(/*BTDS*/"Cookies Policy")}))])]}),b[0]=e):e=b[0];var f;b[1]!==a?(e=j.jsx("p",{className:a,children:e}),f=k()&&j.jsx("p",{className:a,children:j.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:h._(/*BTDS*/"We {=fund our services} by using your personal data to show ads.",[h._param("=fund our services",j.jsx(c("PolarisFastLink.react"),{href:d("PolarisExternalRoutes").NEW_LEGAL_TERMS_PATH,target:"_blank",children:h._(/*BTDS*/"fund our services")}))])})}),b[1]=a,b[2]=e,b[3]=f):(e=b[2],f=b[3]);b[4]!==e||b[5]!==f?(a=j.jsxs(j.Fragment,{children:[e,f]}),b[4]=e,b[5]=f,b[6]=a):a=b[6];return a}function o(a){var b=d("react-compiler-runtime").c(3);a=a.className;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsxs(d("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:[m(),h._(/*BTDS*/"By signing up, you agree to our {=Terms} , {Privacy Policy} and {Cookies Policy} .",[h._param("=Terms",j.jsx(c("PolarisFastLink.react"),{href:d("PolarisExternalRoutes").NEW_LEGAL_TERMS_PATH,target:"_blank",children:h._(/*BTDS*/"Terms")})),h._param("Privacy Policy",j.jsx(c("PolarisFastLink.react"),{href:d("PolarisExternalRoutes").NEW_PRIVACY_POLICY_PATH,target:"_blank",children:h._(/*BTDS*/"Privacy Policy")})),h._param("Cookies Policy",j.jsx(c("PolarisFastLink.react"),{href:d("PolarisRoutes").NEW_COOKIE_POLICY_PATH,target:"_blank",children:h._(/*BTDS*/"Cookies Policy")}))])]}),b[0]=e):e=b[0];b[1]!==a?(e=j.jsx("p",{className:a,children:e}),b[1]=a,b[2]=e):e=b[2];return e}function p(a){var b=d("react-compiler-runtime").c(3);a=a.className;var c;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(c=m(!1),b[0]=c):c=b[0];b[1]!==a?(c=j.jsx("p",{className:a,children:c}),b[1]=a,b[2]=c):c=b[2];return c}function a(a){var b=d("react-compiler-runtime").c(8),c=a.className,e=a.cpeOnly;a=a.tosVersion;e=e===void 0?!1:e;if(e){b[0]!==c?(e=j.jsx(p,{className:c}),b[0]=c,b[1]=e):e=b[1];return e}switch(a){case d("PolarisConsentTypes").TosVersion.EU:b[2]!==c?(e=j.jsx(n,{className:c}),b[2]=c,b[3]=e):e=b[3];return e;case d("PolarisConsentTypes").TosVersion.ROW:b[4]!==c?(a=j.jsx(o,{className:c}),b[4]=c,b[5]=a):a=b[5];return a;case d("PolarisConsentTypes").TosVersion.DEFAULT:default:b[6]!==c?(e=j.jsx(l,{className:c}),b[6]=c,b[7]=e):e=b[7];return e}}function b(a){return{tosVersion:a.signup.tosVersion}}e=d("PolarisReactRedux.react").connect(b)(a);g["default"]=e}),226);
__d("whitelistObjectKeys",[],(function(a,b,c,d,e,f){function a(a,b){var c={};b=Array.isArray(b)?b:Object.keys(b);for(var d=0;d<b.length;d++)typeof a[b[d]]!=="undefined"&&(c[b[d]]=a[b[d]]);return c}f["default"]=a}),66);
__d("PolarisSlimSignupForm.react",["cx","fbt","IGDSBox.react","IGDSSpinner.react","IGDSTextVariants.react","PolarisAuthConstants","PolarisAuthLimitedRegistrationHelpers","PolarisAuthStrings","PolarisEmailDomainHelpers","PolarisIGCoreButton.react","PolarisMultiSignupEmailSuggestionDialog.react","PolarisOrBar.react","PolarisRegistrationLogger","PolarisRelayEnvironment","PolarisSlimSignupUsernameSuggestions.react","PolarisSlimTextInput.react","PolarisTermsPrivacyPolicyBlurb.react","PolarisUA","fetchPolarisLoggedOutExperiment","gkx","joinClasses","nullthrows","polarisIsPhoneNumber","polarisSignupSelectors","promiseDone","react","whitelistObjectKeys"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l=["username","password","emailOrPhone","fullName","optIntoOneTap"];a=function(a){function b(b){var e,f;f=a.call(this,b)||this;f.$5=function(){f.setState({emailSuggestion:null})};f.$6=function(a){f.setState({emailOrPhone:a,emailSuggestion:null},function(){f.$7()})};f.$8=function(){var a=f.props.usernameSuggestions.indexOf(f.state.username);f.setState({username:f.props.usernameSuggestions[++a]||f.props.usernameSuggestions[0]});d("PolarisRegistrationLogger").logRegistrationEvent({containermodule:f.props.pageIdentifier,event_name:"suggested_username_refreshed"})};f.$9=function(a){var b;a=a.target;var c=a.name;a=a.value;f.setState((b={},b[c]=a,b))};f.$10=function(){var a=f.state.isPasswordHidden;f.setState({isPasswordHidden:!a});a?d("PolarisRegistrationLogger").logRegistrationEvent({containermodule:f.props.pageIdentifier,event_name:"show_password_clicked"}):d("PolarisRegistrationLogger").logRegistrationEvent({containermodule:f.props.pageIdentifier,event_name:"hide_password_clicked"})};f.$11=function(a){if(a.relatedTarget instanceof HTMLElement&&f.$1&&f.$1.contains(a.relatedTarget))return;f.$4(f.state,null)};f.$12=function(a,b){a=a.target.name;f.$4(f.state,a);b&&d("PolarisRegistrationLogger").logRegistrationEvent({containermodule:f.props.pageIdentifier,event_name:b})};f.$14=function(a){a.preventDefault();a=f.state.emailOrPhone;d("PolarisRegistrationLogger").logRegistrationEvent({containermodule:f.props.pageIdentifier,event_name:"base_form_next_clicked"});if(a!=null&&!c("polarisIsPhoneNumber")(a)){a=d("PolarisEmailDomainHelpers").getSuggestedEmail(a);if(a!=null){f.setState({emailSuggestion:a});return}}f.$7()};f.$15=function(a){a.keyCode===13&&f.$14(a)};f.$22=function(a){f.setState({username:a})};e={emailOrPhone:((e=b.signupResult)==null||(e=e.fields)==null||(e=e.emailOrPhone)==null?void 0:e.value)||"",emailSuggestion:null,fullName:(e=(e=(e=b.signupResult)==null||(e=e.fields)==null||(e=e.fullName)==null?void 0:e.value)!=null?e:b.initialFullName)!=null?e:"",isPasswordHidden:!0,optIntoOneTap:!1,username:((e=b.signupResult)==null||(e=e.fields)==null||(e=e.username)==null?void 0:e.value)||""};if(f.props.needEmailOrPhone){e.emailOrPhone=(b=(b=(b=b.signupResult)==null||(b=b.fields)==null||(b=b.emailOrPhone)==null?void 0:b.value)!=null?b:f.props.prefillPhoneNumber)!=null?b:""}f.props.needPassword&&(e.password="");f.state=e;f.$2={};f.$3=!1;return f}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.componentDidMount=function(){var a=this.props.pageIdentifier==="fbSignupPage"?"fb_signup_form_load":"form_load";d("PolarisRegistrationLogger").logRegistrationEvent({containermodule:this.props.pageIdentifier,event_name:a,fb_userid:this.props.fbUserID,fbconnect_status:this.props.fbConnectedStatus})};e.componentDidUpdate=function(a,b){var c=this.props;this.state.username.length===0&&this.props.usernameSuggestions.length===0&&c.usernameSuggestions.length>=1&&this.setState({username:c.usernameSuggestions[0]});var d=this.state;a.usernameSuggestions.length===0&&c.usernameSuggestions.length>=1&&b.username!==d.username&&this.$4(d,"username")};e.focusUsername=function(){c("nullthrows")(this.$2.username).focus()};e.$4=function(a,b){var d=this.props.onSignupFocusChange;if(d){a=c("whitelistObjectKeys")(a,l);d(a,b)}};e.$13=function(){var a,b,e,f,g;if(this.props.requestInFlight)return!0;a=(a=this.props.signupResult)==null?void 0:a.fields;var h=a==null||(b=a.emailOrPhone)==null?void 0:b.error,i=a==null||(e=a.username)==null?void 0:e.error,j=a==null||(f=a.password)==null?void 0:f.error;a=a==null||(g=a.fullName)==null?void 0:g.error;if(h!==void 0||i!==void 0||j!==void 0||a!==void 0){c("promiseDone")(c("fetchPolarisLoggedOutExperiment")(c("PolarisRelayEnvironment"),{name:"ig_web_desktop_signup_disable_next_button_on_error"}));h=c("gkx")("16475")===!0;return h}i=this.props;j=i.needEmailOrPhone;a=i.needPassword;h=this.state;i=h.emailOrPhone;var k=h.password;h=h.username;return d("polarisSignupSelectors").getSubmitDisabled({needEmailOrPhone:j,needPassword:a},{emailOrPhone:i,password:k,username:h})};e.$7=function(){var a=c("whitelistObjectKeys")(this.state,l);this.$3=!0;this.props.onSubmit(a)};e.$16=function(a){var b;return!!(this.props.signupResult&&(b=this.props.signupResult.fields[a])!=null&&b.validated)};e.$17=function(a){var b;b=(b=this.props.signupResult)==null?void 0:b.fields;if(a==="emailOrPhone"){var c;return(b==null||(c=b.emailOrPhone)==null?void 0:c.value)!==this.state.emailOrPhone}else if(a==="username"){var d;return(b==null||(d=b.username)==null?void 0:d.value)!==this.state.username}else if(a==="password"){var e;return(b==null||(e=b.password)==null?void 0:e.value)!==this.state.password}return!1};e.$18=function(a){var b=this.props,c=b.focusedFields;b=b.signupResult;var d=b==null?void 0:b.wasDryRun;d=!d;if(c){var e=c.current===a;c=c.previous.indexOf(a)>-1;c=!e&&c;var f=this.$17(a)===!1;d=(c||e)&&f}if(d){var g;return b==null||(g=b.fields)==null||(g=g[a])==null?void 0:g.error}return null};e.$19=function(a){return k.jsx("div",{className:"_aaht",children:k.jsx("p",{"aria-atomic":"true",id:d("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID,role:"alert",children:a})})};e.$20=function(){return d("PolarisUA").isMobile()?d("PolarisAuthStrings").FB_CONTINUE_BUTTON_TEXT:d("PolarisAuthStrings").FB_LOGIN_BUTTON_TEXT};e.$21=function(){var a=this.props.hideHeader;if(a)return null;a=d("PolarisAuthStrings").SIGN_UP_VALUE_PROP_WITHOUT_GRADIENT;return d("PolarisUA").isMobile()?k.jsx("div",{className:"_aahx",children:k.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",zeroMargin:!0,children:a})}):k.jsx("div",{className:"_aahw",children:k.jsx(d("IGDSTextVariants.react").IGDSTextSection,{color:"secondaryText",textAlign:"center",zeroMargin:!0,children:a})})};e.render=function(){var a,b,e=this,f=this.props,g=f.canUsePhone,h=f.signupNonSpecificError;f=f.signupResult;var j=!!(this.props.usernameSuggestions.length&&(!this.props.needEmailOrPhone||this.state.emailOrPhone)),l=f==null?void 0:f.otherError;h!=null&&(l=h);h=l!=null&&(f==null?void 0:f.wasDryRun)===!0;var m=this.$18("emailOrPhone"),n=this.$18("fullName"),o=this.$18("username"),p=this.$18("password"),q=d("PolarisUA").isMobile()?"_aahv":"_aahy";f=(f==null||(a=f.fields.username)==null?void 0:a.errorCode)==null||(f==null||(b=f.fields.username)==null?void 0:b.errorCode)==="username_is_taken";return k.jsxs("div",{className:c("joinClasses")(this.props.className,"_aahz"),"data-testid":void 0,children:[this.state.emailSuggestion!=null?k.jsx(c("PolarisMultiSignupEmailSuggestionDialog.react"),{emailSuggestion:this.state.emailSuggestion,onClose:this.$5,onSelection:this.$6,originalEmail:c("nullthrows")(this.state.emailOrPhone)}):null,k.jsxs("form",{className:"_aah-",method:"post",onBlur:this.$11,onSubmit:this.$14,ref:function(a){return e.$1=a},children:[this.$21(),!this.props.hideFBOption&&k.jsxs(k.Fragment,{children:[k.jsx(c("IGDSBox.react"),{marginBottom:2,marginEnd:10,marginStart:10,marginTop:2,position:"relative",children:k.jsxs(c("PolarisIGCoreButton.react"),{onClick:this.props.onSignupWithFBClick,children:[k.jsx("span",{className:"_9zlu _aah_"}),this.$20()]})}),k.jsx("div",{className:"_aai0",children:k.jsx(c("PolarisOrBar.react"),{})})]}),this.props.needEmailOrPhone&&k.jsx(c("PolarisSlimTextInput.react"),{accepted:this.$16("emailOrPhone"),"aria-describedby":m!=null&&!h?d("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID:void 0,"aria-label":g?d("PolarisAuthStrings").EMAIL_OR_PHONE:d("PolarisAuthStrings").EMAIL,"aria-required":"true",autoCapitalize:"off",autoComplete:"tel",autoCorrect:"off",className:q,errorMessage:m,hasError:!!m,isInputFocused:!0,name:"emailOrPhone",onChange:this.$9,onFocus:function(a){return e.$12(a,"contactpoint_interaction")},onKeyDown:this.$15,placeholder:g?d("PolarisAuthStrings").EMAIL_OR_PHONE:d("PolarisAuthStrings").EMAIL,ref:function(a){return e.$2.emailOrPhone=a},value:this.state.emailOrPhone}),this.props.needPassword&&k.jsx(c("PolarisSlimTextInput.react"),{accepted:this.$16("password"),"aria-describedby":p!=null&&!h?d("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID:void 0,"aria-label":d("PolarisAuthStrings").PASSWORD,"aria-required":"true",autoCapitalize:"off",autoComplete:"new-password",autoCorrect:"off",className:q,errorMessage:p,hasError:!!p,isInputFocused:!0,isPasswordHidden:this.state.isPasswordHidden,name:"password",onChange:this.$9,onFocus:function(a){return e.$12(a,"password_interaction")},onKeyDown:this.$15,onPasswordToggle:this.$10,placeholder:d("PolarisAuthStrings").PASSWORD,ref:function(a){return e.$2.password=a},showPasswordToggleLink:!!this.state.password,type:this.state.isPasswordHidden?"password":"text",value:this.state.password}),k.jsx(c("PolarisSlimTextInput.react"),{accepted:this.$16("fullName"),"aria-describedby":n!=null&&!h?d("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID:void 0,"aria-label":d("PolarisAuthStrings").FULL_NAME,"aria-required":"false",autoCapitalize:"sentences",autoCorrect:"off",className:q,errorMessage:n,hasError:!!n,isInputFocused:!0,name:"fullName",onChange:this.$9,onFocus:function(a){return e.$12(a,"name_interaction_full_name")},onKeyDown:this.$15,placeholder:d("PolarisAuthStrings").FULL_NAME,ref:function(a){return e.$2.fullName=a},value:this.state.fullName}),k.jsx(c("PolarisSlimTextInput.react"),{accepted:this.$16("username"),"aria-describedby":o!=null&&!h?d("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID:void 0,"aria-label":d("PolarisAuthStrings").USERNAME,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",canRefresh:j,className:q,errorMessage:o,hasError:!!o,isInputFocused:!0,maxLength:30,name:"username",omitErrorMarginBottom:f,onChange:this.$9,onFocus:function(a){return e.$12(a,"username_interaction")},onKeyDown:this.$15,onRefresh:this.$8,placeholder:d("PolarisAuthStrings").USERNAME,ref:function(a){return e.$2.username=a},value:this.state.username}),f&&k.jsx(c("PolarisSlimSignupUsernameSuggestions.react"),{emailOrPhone:this.state.emailOrPhone,onUsernameUpdate:this.$22,pageIdentifier:this.props.pageIdentifier,username:this.state.username,usernameSuggestions:this.props.usernameSuggestions}),d("PolarisUA").isDesktop()&&k.jsx(c("PolarisTermsPrivacyPolicyBlurb.react"),{className:"_aai1",cpeOnly:d("PolarisAuthLimitedRegistrationHelpers").shouldShowSouthKoreaTOS()}),k.jsxs("div",{children:[k.jsx(c("IGDSBox.react"),{marginBottom:2,marginEnd:10,marginStart:10,marginTop:2,position:"relative",children:k.jsx(c("PolarisIGCoreButton.react"),{disabled:this.$13(),onClick:this.$14,type:"submit",children:!this.props.gdprRequired&&d("PolarisUA").isDesktop()?i._(/*BTDS*/"Sign up"):i._(/*BTDS*/"Next")})}),this.props.requestInFlight?k.jsx(c("IGDSSpinner.react"),{position:"absolute"}):null]}),l&&!h&&this.$19(l)]})]})};return b}(k.Component);a.defaultProps={hideFBOption:!1,hideHeader:!1,needPassword:!0};g["default"]=a}),226);
__d("polarisIsEligibleForFacebookLogin",["PolarisConfig","PolarisQueryParams"],(function(a,b,c,d,e,f,g){"use strict";var h={CN:!0,CU:!0,IR:!0,KP:!0},i=/^((preprod|business|www)\.)?([a-z0-9-]+\.){0,}instagram\.com$/;function j(a){return!!h[a]}function k(a){return i.test(a)}function a(){return k(window.location.hostname)&&!j(d("PolarisConfig").getCountryCode()||"")&&(!d("PolarisQueryParams").hasForceAuthenticationParam()||d("PolarisQueryParams").hasEnableFBLoginParam())}g["default"]=a}),98);
__d("PolarisSignupForm.react",["invariant","CometRouteURL","IGCoreDialog.react","PolarisAcceptTermsOfUseForm.react","PolarisAccountPrivacyForm.react","PolarisAgeCollectionHelpers","PolarisAuthStrings","PolarisBirthdaySignupForm.react","PolarisCaptchaSignupForm.react","PolarisEmailConfirmationForm.react","PolarisFBConnectHelpers","PolarisFBConnectStatus","PolarisGenericStrings","PolarisLoggedOutCtaClickLogger","PolarisPhoneSignupForm.react","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisRoutes","PolarisSignupActions","PolarisSignupTypes","PolarisSlimSignupForm.react","PolarisUA","polarisIsEligibleForFacebookLogin","qex","react","vulture"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");e=function(a){function b(b){var e;e=a.call(this,b)||this;e.$1=function(){d("PolarisRegistrationLogger").logRegistrationEvent({containermodule:e.props.pageIdentifier,event_name:"fbconnect_click",fb_userid:e.props.fbUserID,fbconnect_status:e.props.fbConnectedStatus});var a=d("PolarisRoutes").FXCAL_DISCLOSURE_PATH;d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("fb_connect","auth_form",e.props.pageIdentifier);d("PolarisFBConnectHelpers").redirectToFBOAuth(a,"signupPage")};e.state={showFacebookLogin:c("polarisIsEligibleForFacebookLogin")()};return e}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.componentDidMount=function(){var a=d("CometRouteURL").getWindowURLParams()||{};a=a.hide_fb_signup;Boolean(a)===!0&&this.setState({showFacebookLogin:!1})};e.$2=function(){return d("PolarisUA").isDesktop()&&c("qex")._("33")===!0};e.render=function(){switch(this.props.step){case d("PolarisSignupTypes").STEP.emailConfirmation:return j.jsx(c("PolarisEmailConfirmationForm.react"),{onSubmit:this.props.onSignup,pageIdentifier:this.props.pageIdentifier,requestInFlight:this.props.requestInFlight,signupNonSpecificError:this.props.signupNonSpecificError,style:this.props.style});case d("PolarisSignupTypes").STEP.phoneConfirmation:return j.jsx(c("PolarisPhoneSignupForm.react"),{onSubmit:this.props.onSignup,pageIdentifier:this.props.pageIdentifier,requestInFlight:this.props.requestInFlight,signupResult:this.props.signupResult,usernameSuggestions:this.props.usernameSuggestions});case d("PolarisSignupTypes").STEP.birthday:return j.jsxs(j.Fragment,{children:[j.jsx(c("PolarisBirthdaySignupForm.react"),{onBirthdayEntered:this.props.onBirthdayEntered,onSignup:this.props.onSignup,pageIdentifier:this.props.pageIdentifier,requestInFlight:this.props.requestInFlight,signupNonSpecificError:this.props.signupNonSpecificError,style:this.props.style}),this.props.signupAgeSpecificError!=null&&j.jsx(d("IGCoreDialog.react").IGCoreDialog,{onModalClose:this.props.onClearAgeError,title:d("PolarisAgeCollectionHelpers").WE_COULDNT_CREATE_AN_ACC,children:j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{onClick:this.props.onClearAgeError,children:d("PolarisGenericStrings").OK_TEXT})})]});case d("PolarisSignupTypes").STEP.accountPrivacy:c("vulture")("CSF1e4Q94Qx1U5d393aPFU3T8yY=");return j.jsx(c("PolarisAccountPrivacyForm.react"),{buttonLabel:d("PolarisGenericStrings").NEXT,defaultedToPrivate:!1,handleNext:function(){},subtitle:d("PolarisAuthStrings").ACCOUNT_PRIVACY_SUBHEADER_TEXT});case d("PolarisSignupTypes").STEP.acceptTerms:return j.jsx(c("PolarisAcceptTermsOfUseForm.react"),{onSignup:this.props.onSignup,requestInFlight:this.props.requestInFlight,signupNonSpecificError:this.props.signupNonSpecificError,style:this.props.style});case d("PolarisSignupTypes").STEP.captcha:return j.jsx(c("PolarisCaptchaSignupForm.react"),{onSignup:this.props.onSignup,requestInFlight:this.props.requestInFlight,signupNonSpecificError:this.props.signupNonSpecificError,style:this.props.style});case d("PolarisSignupTypes").STEP.base:default:var a=this.$2()||!this.state.showFacebookLogin;return j.jsx(c("PolarisSlimSignupForm.react"),{canUsePhone:!0,errorNonce:this.props.errorNonce,fbConnectedStatus:this.props.fbConnectedStatus,fbUserID:this.props.fbUserID,focusedFields:this.props.focusedFields,gdprRequired:this.props.gdprRequired,hideFBOption:a,hideHeader:this.props.hideHeader,needEmailOrPhone:!0,onSignupFocusChange:this.props.onSignupFocusChange,onSignupWithFBClick:this.$1,onSubmit:this.props.onSignup,pageIdentifier:this.props.pageIdentifier,requestInFlight:this.props.requestInFlight,signupNonSpecificError:this.props.signupNonSpecificError,signupResult:this.props.signupResult,usernameSuggestions:this.props.usernameSuggestions})}};return b}(j.Component);function a(a,b){var c,e=a.auth,f=e.login&&e.login.submissionCount||e.signup&&e.signup.submissionCount||0;b=e.signup&&e.signup.requestInFlight||b.requestInFlight;return{errorNonce:f,fbConnectedStatus:a.fb.status,fbEligible:a.fb.status!==d("PolarisFBConnectStatus").STATUS.ineligible,fbUserID:a==null||(c=a.fb)==null||(c=c.authResponse)==null?void 0:c.userID,focusedFields:e.signup&&e.signup.signupFocusedField,gdprRequired:a.signup.gdprRequired,requestInFlight:b,signupAgeSpecificError:e.signup&&e.signup.signupAgeSpecificError,signupNonSpecificError:e.signup&&e.signup.signupNonSpecificError,signupResult:e.signup&&e.signup.signupResult,step:e.signup&&e.signup.step||d("PolarisSignupTypes").STEP.base,usernameSuggestions:e.signup&&e.signup.usernameSuggestions||[]}}function b(a,b){return{onBirthdayEntered:function(){a(d("PolarisSignupActions").processBirthday())},onClearAgeError:function(){a({errorMessage:void 0,type:"SIGNUP_ERROR"})},onSignup:function(c){c.emailOrPhone!=null||h(0,51567),a(d("PolarisSignupActions").validateFormAndContinue(c,b.pageIdentifier))},onSignupFocusChange:function(b,c){a(d("PolarisSignupActions").changeSignupFormFocus(b,c)),a(d("PolarisSignupActions").performDryRun(b))}}}f=d("PolarisReactRedux.react").connect(a,b)(e);g["default"]=f}),98);
__d("PolarisAuthTestIDs",[],(function(a,b,c,d,e,f){"use strict";a="login-error-message";b="login-info-message";c="login-success-message";d="auth-message-modal";f.DESKTOP_AUTH_ERROR_MESSAGE=a;f.DESKTOP_AUTH_INFO_MESSAGE=b;f.DESKTOP_AUTH_SUCCESS_MESSAGE=c;f.MOBILE_AUTH_MESSAGE_MODAL=d}),66);
__d("PolarisStopDeletionDialogStrings",["fbt","PolarisExternalLink.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i;b=i||d("react");var j=b.jsx(c("PolarisExternalLink.react"),{href:"https://help.instagram.com/370452623149242",children:h._(/*BTDS*/"Learn more")});function a(a,b){return h._(/*BTDS*/"You requested to delete {username}. If you want to keep it, you have until {date} to let us know. Otherwise, all your posts and information will be deleted. {Learn More}",[h._param("username",a),h._param("date",b),h._param("Learn More",j)])}e=h._(/*BTDS*/"Want to keep using this account?");f=h._(/*BTDS*/"Keep account");d=h._(/*BTDS*/"Back to log in");g.getDeletionBodyText=a;g.DELETION_TITLE=e;g.DELETION_KEEP_ACCOUNT=f;g.DELETION_BACK_TO_LOGIN=d}),226);
__d("PolarisStopDeletionDialog.react",["IGCoreDialog.react","PolarisStopDeletionDialogStrings","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(12),c=a.onClose,e=a.onStopDeletion,f=a.stopDeletionDate,g=a.stopDeletionNonce;a=a.username;var h;b[0]!==f||b[1]!==a?(h=d("PolarisStopDeletionDialogStrings").getDeletionBodyText(a,f),b[0]=f,b[1]=a,b[2]=h):h=b[2];b[3]!==e||b[4]!==g?(f=i.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-primary-button",onClick:function(){return e(g)},children:d("PolarisStopDeletionDialogStrings").DELETION_KEEP_ACCOUNT}),b[3]=e,b[4]=g,b[5]=f):f=b[5];b[6]!==c?(a=i.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{onClick:c,children:d("PolarisStopDeletionDialogStrings").DELETION_BACK_TO_LOGIN}),b[6]=c,b[7]=a):a=b[7];b[8]!==h||b[9]!==f||b[10]!==a?(c=i.jsxs(d("IGCoreDialog.react").IGCoreDialog,{body:h,title:d("PolarisStopDeletionDialogStrings").DELETION_TITLE,children:[f,a]}),b[8]=h,b[9]=f,b[10]=a,b[11]=c):c=b[11];return c}g["default"]=a}),98);
__d("usePolarisSendAccountRecoveryEmailForBoost",["PolarisAPISendAccountRecoveryEmail","PolarisAuthStrings","PolarisInstajax","PolarisLoginLogger","PolarisReactRedux.react","nullthrows","react-compiler-runtime","useIGDSToaster"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a instanceof d("PolarisInstajax").AjaxError&&a.message?a.message:d("PolarisAuthStrings").SEND_ACCOUNT_RECOVERY_LINK_FAILED_TEXT}function a(){var a=d("react-compiler-runtime").c(6),b=c("useIGDSToaster")(),e=b.add,f=d("PolarisReactRedux.react").useDispatch(),g=d("PolarisReactRedux.react").useSelector(i);a[0]!==e?(b=function(a){e({message:a,target:"bottom"},{duration:1e4})},a[0]=e,a[1]=b):b=a[1];var j=b;a[2]!==j||a[3]!==f||a[4]!==g?(b=function(){f({type:"ACCOUNT_RECOVERY_MODAL_DISMISSED"});var a=g.accountRecovery,b=a==null?void 0:a.targetUsername;b=b!=null?b:a==null?void 0:a.query;var e={event_flow:"account_recovery",login_identifier:b!=null?b:void 0};d("PolarisLoginLogger").logLoginEvent(babelHelpers["extends"]({event_name:"boost_account_recovery_send_email_submit"},e));d("PolarisAPISendAccountRecoveryEmail").sendAccountRecoveryEmail(c("nullthrows")(b)).then(function(a){j(a.toast_message),d("PolarisLoginLogger").logLoginEvent(babelHelpers["extends"]({event_name:"boost_account_recovery_send_email_success"},e))})["catch"](function(a){j(h(a)),d("PolarisLoginLogger").logLoginEvent(babelHelpers["extends"]({event_name:"boost_account_recovery_send_email_error",extra_client_data:{error_message:a.message}},e))})},a[2]=j,a[3]=f,a[4]=g,a[5]=b):b=a[5];a=b;return a}function i(a){return a.auth}g["default"]=a}),98);
__d("PolarisSlimLoginForm.react",["fbt","CometImage.react","IGDSBox.react","IGDSButton.react","IGDSCheckbox.react","IGDSIconButton.react","IGDSInfoPanoFilledIcon.react","IGDSText.react","IGDSTextVariants.react","InstagramQueryParamsHelper","PolarisAccountSwitcherActions","PolarisAuthStrings","PolarisAuthTestIDs","PolarisAuthTypeSwitcher.react","PolarisConsentQEHelpers","PolarisConsentStrings.react","PolarisFacebookLoginButtonRevamped","PolarisFastLink.react","PolarisIGCoreButton.react","PolarisIsLoggedIn","PolarisLoggedOutCtaClickLogger","PolarisLoginLogger","PolarisLoginQPL","PolarisOneTapLogin","PolarisOrBar.react","PolarisQueryParams","PolarisReactRedux.react","PolarisRoutes","PolarisSlimTextInput.react","PolarisStopDeletionDialog.react","PolarisThirdPartyAuthHelpers","PolarisTooManyAccountsDialog.react","PolarisUA","gkx","justknobx","react","react-compiler-runtime","usePolarisPageID","usePolarisSendAccountRecoveryEmailForBoost"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect;b.useMemo;var l=b.useRef,m=b.useState,n="slfErrorAlert",o=6,p={profilePicture:{maxWidth:"x193iq5w",$$css:!0}};function q(a){var b=d("react-compiler-runtime").c(12),e=a.checkboxId,f=a.checkboxOnChange,g=a.checkboxState,h=a.checkboxText;a=a.disabled;var i=d("PolarisReactRedux.react").useSelector(r);i=d("PolarisUA").isMobile()&&i&&d("PolarisIsLoggedIn").isLoggedIn()?4:10;var k=a?"secondaryText":"primaryText",l;b[0]!==h||b[1]!==k?(l=j.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{color:k,children:h}),b[0]=h,b[1]=k,b[2]=l):l=b[2];b[3]!==f||b[4]!==g||b[5]!==a||b[6]!==l?(h=j.jsx(c("IGDSCheckbox.react"),{checkboxShape:"square",isChecked:g,isDisabled:a,name:"LoginCheckbox",onChange:f,size:16,zeroPadding:!0,children:l}),b[3]=f,b[4]=g,b[5]=a,b[6]=l,b[7]=h):h=b[7];b[8]!==e||b[9]!==i||b[10]!==h?(k=j.jsx(c("IGDSBox.react"),{id:e,marginBottom:3,marginEnd:2,marginStart:i,marginTop:3,position:"relative",children:h}),b[8]=e,b[9]=i,b[10]=h,b[11]=k):k=b[11];return k}function r(a){return a.navigation.isAccountSwitcherOpen}function s(a){var b=d("react-compiler-runtime").c(23),e=a.fromLoggedOutDialog,f=a.hideForgotPassword,g=a.isThreadsRequest,i=a.newAuthDesign,k=a.onClick,l=e===void 0?!1:e;a=g===void 0?!1:g;e=i===void 0?!1:i;var m=d("PolarisReactRedux.react").useDispatch();b[0]!==m?(g=function(){return m(d("PolarisAccountSwitcherActions").closeAccountSwitcher())},b[0]=m,b[1]=g):g=b[1];var n=g,o=d("PolarisReactRedux.react").useSelector(t);i=a?"center":"end";if(f===!0)return null;b[2]!==e?(g=e?h._(/*BTDS*/"Forgot?"):h._(/*BTDS*/"Forgot password?"),b[2]=e,b[3]=g):g=b[3];f=g;g=d("PolarisRoutes").PASSWORD_RESET_PATH;if(d("PolarisQueryParams").isFromLoginForAPI()){var p;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(p=d("InstagramQueryParamsHelper").appendQueryParams(d("PolarisRoutes").PASSWORD_RESET_PATH,{source:"api-login"}),b[4]=p):p=b[4];g=p}else if(d("PolarisQueryParams").isFromFxcal()){b[5]===Symbol["for"]("react.memo_cache_sentinel")?(p=d("InstagramQueryParamsHelper").appendQueryParams(d("PolarisRoutes").PASSWORD_RESET_PATH,{source:"fxcal"}),b[5]=p):p=b[5];g=p}b[6]!==f||b[7]!==a||b[8]!==e?(p=a?j.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",children:f}):e?j.jsx(d("IGDSTextVariants.react").IGDSTextFootnote,{color:"link",maxLines:1,textAlign:"center",children:f}):d("PolarisUA").isMobile()?j.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"primaryButton",textAlign:"center",children:f}):j.jsx(c("IGDSText.react"),{color:"link",zeroMargin:!0,children:f}),b[6]=f,b[7]=a,b[8]=e,b[9]=p):p=b[9];p=p;var q;b[10]!==l||b[11]!==o||b[12]!==k||b[13]!==n?(q=function(a){k==null||k(),d("PolarisLoginLogger").logLoginEvent({event_flow:"login_manual",event_name:"forgot_password_click"}),d("PolarisLoginLogger").logLoginEvent({event_category:"search",event_flow:"account_recovery_start",event_name:"account_recovery_start",event_step:"search",extra_client_data:l?{event_source:"login_logged_out_dialog_forgot"}:null}),o&&n()},b[10]=l,b[11]=o,b[12]=k,b[13]=n,b[14]=q):q=b[14];q=q;b[15]!==f||b[16]!==q||b[17]!==o||b[18]!==a||b[19]!==i||b[20]!==e||b[21]!==p?(g=d("PolarisUA").isMobile()&&!(o&&d("PolarisIsLoggedIn").isLoggedIn())||a?j.jsx(c("IGDSBox.react"),{direction:"row",justifyContent:i,marginBottom:e?0:2,marginEnd:e?0:10,marginStart:10,paddingY:3,position:"relative",children:j.jsx(c("PolarisFastLink.react"),{href:g,onClick:q,children:p},"reset")}):j.jsx(c("IGDSBox.react"),{alignContent:"center",alignSelf:"center",display:"flex",marginTop:3,children:j.jsx(c("IGDSButton.react"),{href:g,label:f,onClick:q,variant:d("PolarisUA").isMobile()&&o?"primary_link":"secondary_link"},"reset")}),b[15]=f,b[16]=q,b[17]=o,b[18]=a,b[19]=i,b[20]=e,b[21]=p,b[22]=g):g=b[22];return g}function t(a){return a.navigation.isAccountSwitcherOpen}function aa(a){var b=d("react-compiler-runtime").c(20),e=a.fromLoggedOutDialog,f=a.hideForgotPassword,g=a.isThreadsRequest,h=a.onForgotPasswordClick;a=a.onNavigate;e=e===void 0?!1:e;g=g===void 0?!1:g;var i=d("PolarisReactRedux.react").useSelector(u);if(g)return null;if(d("PolarisUA").isMobile()&&!(i&&d("PolarisIsLoggedIn").isLoggedIn())){if(d("PolarisQueryParams").isFromFxcal()||d("PolarisQueryParams").hasDisableSignupParam())return null;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=d("PolarisConsentQEHelpers").shouldShowIPFingerPrintingDisclosure(),b[0]=g):g=b[0];g=g;var k;b[1]!==a?(k=j.jsx(c("PolarisAuthTypeSwitcher.react"),{onNavigate:a}),b[1]=a,b[2]=k):k=b[2];b[3]===Symbol["for"]("react.memo_cache_sentinel")?(g=g&&j.jsx(c("IGDSBox.react"),{paddingY:9,width:"80%",children:j.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",children:d("PolarisConsentStrings.react").INSTAGRAM_TERMS_OF_USE_AND_PRIVACY_POLICY_TEXT})}),b[3]=g):g=b[3];b[4]!==k?(g=j.jsxs(c("IGDSBox.react"),{alignItems:"center",marginTop:4,position:"relative",children:[k,g]}),b[4]=k,b[5]=g):g=b[5];return g}if(d("PolarisUA").isDesktop()&&!(i&&d("PolarisIsLoggedIn").isLoggedIn())&&d("PolarisQueryParams").hasEnableSignupWeb()){b[6]!==e||b[7]!==f||b[8]!==h?(k=j.jsx(s,{fromLoggedOutDialog:e,hideForgotPassword:f,onClick:h}),b[6]=e,b[7]=f,b[8]=h,b[9]=k):k=b[9];b[10]!==e||b[11]!==a?(g=j.jsx(c("IGDSBox.react"),{alignItems:"center",marginTop:4,position:"relative",children:j.jsx(c("PolarisAuthTypeSwitcher.react"),{fromLoggedOutDialog:e,onNavigate:a})}),b[10]=e,b[11]=a,b[12]=g):g=b[12];b[13]!==k||b[14]!==g?(i=j.jsxs(j.Fragment,{children:[k,g]}),b[13]=k,b[14]=g,b[15]=i):i=b[15];return i}b[16]!==e||b[17]!==f||b[18]!==h?(a=j.jsx(s,{fromLoggedOutDialog:e,hideForgotPassword:f,onClick:h}),b[16]=e,b[17]=f,b[18]=h,b[19]=a):a=b[19];return a}function u(a){return a.navigation.isAccountSwitcherOpen}function v(a){var b=d("react-compiler-runtime").c(6),e=a.className,f=a.message;a=a.testid;var g;b[0]!==e||b[1]!==f?(g=j.jsx("div",{className:e,children:f}),b[0]=e,b[1]=f,b[2]=g):g=b[2];b[3]!==g||b[4]!==a?(e=j.jsx(c("IGDSText.react"),{testid:void 0,children:g}),b[3]=g,b[4]=a,b[5]=e):e=b[5];return e}function ba(a){var b,e=d("react-compiler-runtime").c(18);a=a.errorMessage;var f;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(f="xkmlbd1 xvs91rp xd4r4e8 x1anpbxc x11gldyt xyorhqc x11hdunq x2b8uid",e[0]=f):f=e[0];e[1]!==a?(f=j.jsx(v,{className:f,message:a,testid:void 0}),e[1]=a,e[2]=f):f=e[2];f=f;var g=c("usePolarisSendAccountRecoveryEmailForBoost")(),h=m(!1),i=h[0],l=h[1],n=a===d("PolarisAuthStrings").ERROR_LOGIN_PASSWORD_BOOST_ACCOUNT_RECOVERY||a===d("PolarisAuthStrings").ERROR_LOGIN_USERNAME_BOOST_ACCOUNT_RECOVERY;h=d("PolarisReactRedux.react").useSelector(w);h=h==null||(b=h.accountRecovery)==null||(b=b.options)==null?void 0:b.is_boost_user_eligible_for_account_recovery;var o;e[3]!==i||e[4]!==g?(o=function(){i||(l(!0),g(),d("PolarisLoginLogger").logLoginEvent({event_flow:"account_recovery",event_name:"boost_account_recovery_error_message_click"}))},e[3]=i,e[4]=g,e[5]=o):o=e[5];o=o;var p;e[6]!==n?(p=function(){n&&d("PolarisLoginLogger").logLoginEvent({event_flow:"account_recovery",event_name:"boost_account_recovery_error_message_view"})},e[6]=n,e[7]=p):p=e[7];var q;e[8]!==a||e[9]!==n?(q=[n,a],e[8]=a,e[9]=n,e[10]=q):q=e[10];k(p,q);if(n&&h===!0){e[11]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx(c("IGDSText.react"),{color:"link",maxLines:1,textAlign:"center",zeroMargin:!0,children:d("PolarisAuthStrings").ERROR_LOGIN_BOOST_ACCOUNT_RECOVERY_EMAIL_LINK}),e[11]=a):a=e[11];e[12]!==i||e[13]!==o?(p=j.jsx(c("IGDSBox.react"),{margin:"auto",children:j.jsx(c("PolarisFastLink.react"),{disabled:i,onClick:o,children:a})}),e[12]=i,e[13]=o,e[14]=p):p=e[14];e[15]!==f||e[16]!==p?(q=j.jsxs(c("IGDSBox.react"),{children:[f,p]}),e[15]=f,e[16]=p,e[17]=q):q=e[17];return q}return f}function w(a){return a.auth}function a(a){var b=d("react-compiler-runtime").c(140),e=a.dialogSource,f=a.errorMessage,g=a.fbConnectStatus,i=a.forceLoginIgId,r=a.forceLoginProfilePicUrl,t=a.forceLoginUsername,u=a.fromLoggedOutDialog,w=a.hideFBLogin,x=a.hideForgotPassword,y=a.infoMessage,ia=a.isFBLoggedIn,ja=a.isIGSSODisabled,z=a.isThreadsRequest,A=a.nextUrl,ka=a.onClearStopDeletionNonce,la=a.onLoginWithFBClick,ma=a.onStopAccountDeletion,na=a.onSubmit,B=a.requestInFlight,C=a.stopDeletionDate,D=a.stopDeletionNonce,oa=a.style,E=a.successMessage;a=a.usernameHint;var F=u===void 0?!1:u;u=z===void 0?!1:z;a=m((z=t!=null?t:a)!=null?z:"");var G=a[0],pa=a[1];z=m("");var H=z[0],qa=z[1];a=m(!1);var I=a[0],ra=a[1];b[0]===Symbol["for"]("react.memo_cache_sentinel")?(z=d("PolarisOneTapLogin").hasMaxOneTapNonces(),b[0]=z):z=b[0];a=z;var sa=a,ta=c("usePolarisPageID")();z=d("PolarisReactRedux.react").useSelector(ha);b[1]!==ia||b[2]!==ja||b[3]!==A||b[4]!==la||b[5]!==ta?(a=function(){d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("fb_connect","auth_form",ta),d("PolarisThirdPartyAuthHelpers").handleLoginOrFacebookAuth(A!=null?A:void 0,la,ia,ja)},b[1]=ia,b[2]=ja,b[3]=A,b[4]=la,b[5]=ta,b[6]=a):a=b[6];a=a;var J;b[7]!==F||b[8]!==na||b[9]!==I||b[10]!==H||b[11]!==G?(J=function(a){d("PolarisLoginLogger").logLoginEvent({event_category:F?"logged_out_dialog_interaction":null,event_flow:"login_manual",event_name:"login_button_clicked",event_step:F?"logged_out_dialog":null}),a.preventDefault(),I===!0&&d("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_optin"}),c("PolarisLoginQPL").addPointLoginButtonClick(),na(G,H,I)},b[7]=F,b[8]=na,b[9]=I,b[10]=H,b[11]=G,b[12]=J):J=b[12];J=J;var K;bb0:{if(d("PolarisQueryParams").isFromFxcal()||d("PolarisIsLoggedIn").isLoggedIn()||u){K=!1;break bb0}K=!w&&c("gkx")("5230")===!1}w=K;K=m(!1);var L=K[0],ua=K[1];K=m(!0);var M=K[0],va=K[1],wa=l(null);K=d("PolarisAuthStrings").PHONE_USERNAME_OR_EMAIL;bb1:{if(d("PolarisUA").isMobile()){var N;b[13]!==z?(N=z&&d("PolarisIsLoggedIn").isLoggedIn()?"xdj266r x1ys307a xzueoph xyqm7xq":"xdj266r x11gldyt xzueoph x11hdunq",b[13]=z,b[14]=N):N=b[14];N=N;break bb1}var O;b[15]===Symbol["for"]("react.memo_cache_sentinel")?(O="xdj266r x11gldyt xzueoph x11hdunq",b[15]=O):O=b[15];N=O}O=N;var P;b[16]!==e||b[17]!==g||b[18]!==F?(N=function(){d("PolarisLoginLogger").logLoginEvent({event_name:"login_form_load",fbconnect_status:g}),F?d("PolarisLoginLogger").logLoginEvent({event_category:"logged_out_dialog_init",event_flow:"login_manual",event_name:"login_step_view_loaded",event_step:"logged_out_dialog",extra_client_data:{dialog_source:e!=null?e:""}}):d("PolarisLoginLogger").logLoginEvent({event_flow:"login_manual",event_name:"login_step_view_loaded"}),d("PolarisQueryParams").hasForceAuthenticationParam()&&wa.current!=null&&wa.current.focus()},P=[e,g,F],b[16]=e,b[17]=g,b[18]=F,b[19]=P,b[20]=N):(P=b[19],N=b[20]);k(N,P);N=m(!1);var Q=N[0],xa=N[1];b[21]===Symbol["for"]("react.memo_cache_sentinel")?(P=c("justknobx")._("912"),b[21]=P):P=b[21];var ya=P;b[22]===Symbol["for"]("react.memo_cache_sentinel")?(N=function(){var a=function(){if(ya){var a;a=!!((a=document.querySelector("input[name=username]"))!=null&&a.matches("*:-webkit-autofill"));xa(a)}};a();window.setTimeout(a,200)},P=[ya],b[22]=N,b[23]=P):(N=b[22],P=b[23]);k(N,P);b[24]!==M?(N=function(a){va(!M),a.preventDefault()},b[24]=M,b[25]=N):N=b[25];P=N;b[26]!==I?(N=function(){sa?ua(!0):ra(!I)},b[26]=I,b[27]=N):N=b[27];N=N;var za=ga,Aa=fa,R;b[28]!==Q?(R=function(){Q&&xa(!1)},b[28]=Q,b[29]=R):R=b[29];var S=R;R=ea;var T;b[30]!==z?(T=d("PolarisUA").isMobile()&&z&&d("PolarisIsLoggedIn").isLoggedIn(),b[30]=z,b[31]=T):T=b[31];T=T;var U;b[32]!==z?(U=d("PolarisUA").isMobile()&&!(z&&d("PolarisIsLoggedIn").isLoggedIn()),b[32]=z,b[33]=U):U=b[33];U=U;var V=!G&&!H&&!Q&&ya;V=!G||!H||H.length<o||V;var W;b[34]!==z?(W=z&&d("PolarisIsLoggedIn").isLoggedIn(),b[34]=z,b[35]=W):W=b[35];W=W;W=W;var X=f==null||f===""?void 0:n;b[36]!==X||b[37]!==i||b[38]!==r||b[39]!==t||b[40]!==S||b[41]!==O||b[42]!==G?(K=j.jsx(j.Fragment,{children:i!=null&&t!=null&&r!=null?j.jsxs("div",{className:"x6s0dn4 x78zum5 x1q0g3np xdj266r x11gldyt x1fqp7bg x11hdunq",children:[j.jsx("div",{className:"x1ekkm8c x1143rjc xum4auv xj21bgg x972fbf x10w94by x1qhh985 x14e42zd x1kmio9f xln7xf2 xk390pu xc9qbxq xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf x14qfxbe",children:j.jsx(c("CometImage.react"),{alt:h._(/*BTDS*/"{username}'s profile picture",[h._param("username",t)]),src:r,xstyle:p.profilePicture})}),j.jsx("div",{className:"x1kmio9f x13fj5qh",children:j.jsx(c("IGDSText.react"),{size:"label",textAlign:"start",weight:"normal",children:t})})]}):j.jsx(c("PolarisSlimTextInput.react"),{"aria-describedby":X,"aria-label":K,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",className:O,"data-testid":void 0,isInputFocused:R(),maxLength:75,name:"username",onChange:function(a){a=a.target;a=a.value;pa(a);S()},onFocus:da,placeholder:K,ref:wa,value:G})}),b[36]=X,b[37]=i,b[38]=r,b[39]=t,b[40]=S,b[41]=O,b[42]=G,b[43]=K):K=b[43];r=K;t=d("PolarisAuthStrings").PASSWORD;K=d("PolarisAuthStrings").ONE_TAP_CHECKBOX_TEXT;var Y;b[44]!==i||b[45]!==S||b[46]!==H.length?(Y=function(a){a=a.target;a=a.value;H.length===0&&a.length>=6&&d("PolarisLoginLogger").logLoginEvent({event_name:"login_form_autofill",ig_userid:i!=null?i:void 0});qa(a);S()},b[44]=i,b[45]=S,b[46]=H.length,b[47]=Y):Y=b[47];var Z=!!H,$=M?"password":"text";b[48]!==X||b[49]!==P||b[50]!==O||b[51]!==M||b[52]!==H||b[53]!==Y||b[54]!==Z||b[55]!==$?(R=j.jsx(c("PolarisSlimTextInput.react"),{"aria-describedby":X,"aria-label":t,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",className:O,"data-testid":void 0,isInputFocused:R(),isPasswordHidden:M,name:"password",onChange:Y,onFocus:ca,onPasswordToggle:P,placeholder:t,showPasswordToggleLink:Z,type:$,value:H}),b[48]=X,b[49]=P,b[50]=O,b[51]=M,b[52]=H,b[53]=Y,b[54]=Z,b[55]=$,b[56]=R):R=b[56];b[57]!==N||b[58]!==I||b[59]!==W||b[60]!==L?(t=W&&j.jsxs(j.Fragment,{children:[j.jsxs(c("IGDSBox.react"),{direction:"row",position:"relative",children:[j.jsx(q,{checkboxId:"optIntoOneTap",checkboxOnChange:N,checkboxState:I,checkboxText:K,disabled:sa}),sa&&j.jsx(c("IGDSIconButton.react"),{onClick:N,padding:0,children:j.jsx(c("IGDSInfoPanoFilledIcon.react"),{alt:K,color:"ig-secondary-text",size:16})})]}),L&&j.jsx(c("PolarisTooManyAccountsDialog.react"),{onClose:function(){ua(!1)}})]}),b[57]=N,b[58]=I,b[59]=W,b[60]=L,b[61]=t):t=b[61];b[62]!==x||b[63]!==U||b[64]!==u?(X=U&&!u&&j.jsx(s,{hideForgotPassword:x,onClick:za}),b[62]=x,b[63]=U,b[64]=u,b[65]=X):X=b[65];b[66]!==R||b[67]!==t||b[68]!==X?(P=j.jsxs(j.Fragment,{children:[R,t,X]}),b[66]=R,b[67]=t,b[68]=X,b[69]=P):P=b[69];O=P;Y=T?4:10;Z=T?4:10;$=T?3:2;K=u?"barcelona-primary-button":"ig-primary-button";b[70]===Symbol["for"]("react.memo_cache_sentinel")?(N=j.jsx(c("IGDSBox.react"),{position:"relative",children:h._(/*BTDS*/"Log in")}),b[70]=N):N=b[70];b[71]!==J||b[72]!==V||b[73]!==B||b[74]!==K?(W=j.jsx(c("PolarisIGCoreButton.react"),{color:K,"data-testid":void 0,disabled:V,loading:B,onClick:J,type:"submit",children:N}),b[71]=J,b[72]=V,b[73]=B,b[74]=K,b[75]=W):W=b[75];b[76]!==Y||b[77]!==Z||b[78]!==$||b[79]!==W?(L=j.jsx(c("IGDSBox.react"),{marginBottom:2,marginEnd:Y,marginStart:Z,marginTop:$,position:"relative",children:W}),b[76]=Y,b[77]=Z,b[78]=$,b[79]=W,b[80]=L):L=b[80];b[81]!==x||b[82]!==u?(U=u&&j.jsx(s,{hideForgotPassword:x,isThreadsRequest:u,onClick:za}),b[81]=x,b[82]=u,b[83]=U):U=b[83];b[84]!==L||b[85]!==U?(R=j.jsxs(j.Fragment,{children:[L,U]}),b[84]=L,b[85]=U,b[86]=R):R=b[86];t=R;b[87]!==r||b[88]!==O||b[89]!==t?(X=j.jsxs(j.Fragment,{children:[r,O,t]}),b[87]=r,b[88]=O,b[89]=t,b[90]=X):X=b[90];P=X;b[91]===Symbol["for"]("react.memo_cache_sentinel")?(N=j.jsx("div",{className:"x1hmvnq2 x11gldyt x91k8ka x11hdunq",children:j.jsx(c("PolarisOrBar.react"),{})}),b[91]=N):N=b[91];V=N;if(!w)B=P;else if(d("PolarisUA").isMobile()||z){b[92]!==z||b[93]!==a?(K=j.jsx(c("PolarisFacebookLoginButtonRevamped"),{isAccountSwitcherOpen:z,onClick:a}),b[92]=z,b[93]=a,b[94]=K):K=b[94];b[95]!==P||b[96]!==K?(Y=j.jsxs(j.Fragment,{children:[K,V,P]}),b[95]=P,b[96]=K,b[97]=Y):Y=b[97];B=Y}else{b[98]!==z||b[99]!==a?(Z=j.jsx(c("PolarisFacebookLoginButtonRevamped"),{isAccountSwitcherOpen:z,onClick:a}),b[98]=z,b[99]=a,b[100]=Z):Z=b[100];b[101]!==P||b[102]!==Z?($=j.jsxs(j.Fragment,{children:[P,V,Z]}),b[101]=P,b[102]=Z,b[103]=$):$=b[103];B=$}b[104]!==y?(W=y!=null&&y!==""&&j.jsx(v,{className:"x1roi4f4 xvs91rp xd4r4e8 x1anpbxc x11gldyt x4n8cb0 x11hdunq x2b8uid",message:y,testid:void 0}),b[104]=y,b[105]=W):W=b[105];b[106]!==E?(L=E!=null&&E!==""&&j.jsx(v,{className:"x5n08af xvs91rp xd4r4e8 x1anpbxc x11gldyt x4n8cb0 x11hdunq x2b8uid",message:E,testid:void 0}),b[106]=E,b[107]=L):L=b[107];b[108]===Symbol["for"]("react.memo_cache_sentinel")?(U={className:"x972fbf x10w94by x1qhh985 x14e42zd x78zum5 xdt5ytf xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},b[108]=U):U=b[108];R=T?3:6;b[109]!==B||b[110]!==R?(r=j.jsx(c("IGDSBox.react"),{marginTop:R,position:"relative",children:B}),b[109]=B,b[110]=R,b[111]=r):r=b[111];b[112]!==f?(O=f!=null&&f!==""&&j.jsx(ba,{errorMessage:f}),b[112]=f,b[113]=O):O=b[113];b[114]!==F||b[115]!==x||b[116]!==u?(t=j.jsx(aa,{fromLoggedOutDialog:F,hideForgotPassword:x,isThreadsRequest:u,onForgotPasswordClick:za,onNavigate:Aa}),b[114]=F,b[115]=x,b[116]=u,b[117]=t):t=b[117];b[118]!==ka||b[119]!==ma||b[120]!==I||b[121]!==H||b[122]!==C||b[123]!==D||b[124]!==G?(X=D!=null&&C!=null&&j.jsx(c("PolarisStopDeletionDialog.react"),{onClose:ka,onStopDeletion:function(a){return ma(G,H,I,a)},stopDeletionDate:C,stopDeletionNonce:D,username:G}),b[118]=ka,b[119]=ma,b[120]=I,b[121]=H,b[122]=C,b[123]=D,b[124]=G,b[125]=X):X=b[125];b[126]!==T||b[127]!==oa?(N=oa==="modal"&&!T&&j.jsx(c("IGDSBox.react"),{marginBottom:6,position:"relative"}),b[126]=T,b[127]=oa,b[128]=N):N=b[128];b[129]!==J||b[130]!==r||b[131]!==O||b[132]!==t||b[133]!==X||b[134]!==N?(w=j.jsxs("form",babelHelpers["extends"]({},U,{"data-testid":void 0,id:"loginForm",method:"post",onSubmit:J,children:[r,O,t,X,N]})),b[129]=J,b[130]=r,b[131]=O,b[132]=t,b[133]=X,b[134]=N,b[135]=w):w=b[135];b[136]!==W||b[137]!==L||b[138]!==w?(K=j.jsxs("div",{children:[W,L,w]}),b[136]=W,b[137]=L,b[138]=w,b[139]=K):K=b[139];return K}function ca(){return c("PolarisLoginQPL").addPointPasswordFocus()}function da(){return c("PolarisLoginQPL").addPointUsernameFocus()}function ea(){return!d("PolarisIsLoggedIn").isLoggedIn()&&!d("PolarisUA").isMobile()}function fa(a){a==="signup"&&c("PolarisLoginQPL").endCancelNavigateToSignup()}function ga(){c("PolarisLoginQPL").endCancelNavigateToForgotPassword()}function ha(a){return a.navigation.isAccountSwitcherOpen}g["default"]=a}),226);
__d("PolarisStrategicWebTraffic",["ExecutionEnvironment","PolarisConfig","PolarisDismissEntry","PolarisQueryParams","PolarisUA","memoize"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("memoize")(function(){if((h||(h=c("ExecutionEnvironment"))).canUseDOM&&d("PolarisDismissEntry").isDismissed(d("PolarisDismissEntry").PROMOTED_TRAFFIC_TYPE))return!0;else if((h||(h=c("ExecutionEnvironment"))).canUseDOM&&d("PolarisUA").isMobile()&&d("PolarisQueryParams").parseQueryParams().utm_source&&d("PolarisQueryParams").parseQueryParams().utm_source.includes("_sd")){d("PolarisDismissEntry").setDismissEntry(d("PolarisDismissEntry").PROMOTED_TRAFFIC_TYPE);return!0}return!1});a=c("memoize")(function(){return d("PolarisConfig").isProgressiveWebApp()||i()});g.isStrategicTraffic=a}),98);
__d("PolarisFXAuthActions",["FXAuthenticationLogger","PolarisAPIExtractTwoFactorChallengeIfPresent","PolarisAPIFXCALAuthLogin","PolarisAuthStrings","PolarisNavigationUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){return function(f,g){f({appId:c,etoken:e,type:"FX_AUTH_LOGIN_ATTEMPTED"});return d("PolarisAPIFXCALAuthLogin").fxcalAuthLogin(a.replace(/\s+$/,""),b,c,e).then(function(a){a.authenticated?h(String(a.username),String(a.profile_pic_url),String(a.blob),String(a.token))(f,g):f({errorDescription:d("PolarisAuthStrings").ERROR_LOGIN_PASSWORD,type:"FX_AUTH_LOGIN_FAILED"})},function(a){a=d("PolarisAPIExtractTwoFactorChallengeIfPresent").extractTwoFactorChallengeIfPresent(a);if(a){f(babelHelpers["extends"]({fromFB:!1,fromFxAuth:!0,timeReceived:Date.now(),type:"TWO_FACTOR_CHALLENGE_RECEIVED"},a));f({type:"FX_AUTH_TWO_FACTOR_REQUIRED"});return}f({errorDescription:d("PolarisAuthStrings").ERROR_LOGIN_UNKNOWN,type:"FX_AUTH_LOGIN_FAILED"})})["catch"]()}}function b(){return function(a){a({type:"FX_AUTH_LOGOUT"}),d("FXAuthenticationLogger").logEvent({event:"web_auth_force_logout",target_account_type:1})}}function c(a,b,c){return function(e){if(a==null||b==null||c==null)return;var f=new URL(a);f.searchParams.append("blob",b);f.searchParams.append("token",c);e({redirectUrl:f.toString(),type:"FX_AUTH_CONFIRMED"});d("FXAuthenticationLogger").logEvent({event:"web_auth_confirmed_redirect",target_account_type:1});e=f.toString();d("PolarisNavigationUtils").openURLWithFullPageReload(e);e.startsWith("accountscenter://")&&window.close()}}function h(a,b,c,e){return function(f){f({blob:c,profilePicUrl:b,token:e,type:"FX_AUTH_LOGIN_SUCCEEDED",username:a}),d("FXAuthenticationLogger").logEvent({event:"web_auth_confirm_page_view",target_account_type:1})}}g.fxAuthLoginAction=a;g.fxAuthLogoutAction=b;g.fxAuthConfirmedAction=c;g.fxAuthSucceededAction=h}),98);
__d("polarisUpdateTwoFactorLoginNoncesFromResponse",["PolarisOneTapLogin","PolarisTrustedDevicesUtils","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.loginNonce,e=a.trustedDeviceNonce;a=a.userId;if(a==null)return;c("isStringNullOrEmpty")(e)||d("PolarisTrustedDevicesUtils").addTrustedDevicesNonce(a,e);c("isStringNullOrEmpty")(b)||d("PolarisOneTapLogin").updateLoginNonce(a,b)}g["default"]=a}),98);
__d("PolarisTwoFactorActions",["invariant","CAAWebLoginLoggingUtils","PolarisAPIFxcalAuthTwoFactorLogin","PolarisAPILoginTwoFactor","PolarisAPISendTwoFactorLoginSms","PolarisAPISendTwoFactorLoginWhatsapp","PolarisAuthStrings","PolarisFXAuthActions","PolarisInstajax","PolarisLoginQPL","PolarisOneTapLogin","PolarisQueryParams","PolarisRedirectHelper","polarisGetAppPlatform","polarisLogAction","polarisUpdateTwoFactorLoginNoncesFromResponse"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a,b,e,f,g){g===void 0&&(g=!1);return function(i,j){j=j();var k=j.auth,l=k.dyiJobID,m=k.next,n=k.showOneTap;k=j.auth.twoFactor;k||h(0,51503);var o=k.fromFB,p=k.fromFxAuth,q=k.identifier,r=k.username;k=j.fxAuth;j=k.appId;k=k.etoken;i({type:"TWO_FACTOR_VERIFY_ATTEMPTED"});var s={fb:o,platform:d("polarisGetAppPlatform").getAppPlatform(),source:a},t=p?{}:d("PolarisQueryParams").parseQueryParams();o=p?d("PolarisAPIFxcalAuthTwoFactorLogin").fxcalAuthTwoFactorLogin(q,b,r,e,f,j!=null?j:"0",k!=null?k:""):d("PolarisAPILoginTwoFactor").loginTwoFactor(q,b,r,e,f,d("PolarisOneTapLogin").queryParamStringWithOneTapInfo(t),g);c("PolarisLoginQPL").isActive()&&c("PolarisLoginQPL").addPointTwoFactorFormSubmit(f);c("polarisLogAction")("twoFacLoginAttempt",s);o.then(function(a){if(a.authenticated){i({type:"TWO_FACTOR_VERIFY_SUCCEEDED"});c("polarisLogAction")("loginSuccess",babelHelpers["extends"]({},s,{twoFac:!0}));d("CAAWebLoginLoggingUtils").logLoginResult("two_fac_redirect","two_fac",1,!0,null,null,!1,a.cryptedUid);c("PolarisLoginQPL").isActive()&&c("PolarisLoginQPL").endSuccess();c("polarisUpdateTwoFactorLoginNoncesFromResponse")(a);if(p&&a.blob!==null)i(d("PolarisFXAuthActions").fxAuthSucceededAction(r,String(a.profile_pic_url),String(a.blob),String(a.token)));else{var b;b=(b=t.dyi_job_id)!=null?b:"";d("PolarisRedirectHelper").redirectAfterLogin(m,!!a.reactivated,n&&!!a.oneTapPrompt,a.nonce!=null&&a.nonce!==""?a.nonce:"",l?l:b)}}else{a=d("PolarisAuthStrings").ERROR_LOGIN_UNKNOWN;i({message:a,type:"TWO_FACTOR_VERIFY_FAILED"});c("polarisLogAction")("loginFailure",babelHelpers["extends"]({},s,{twoFac:!0}));c("PolarisLoginQPL").isActive()&&c("PolarisLoginQPL").addPointUserError("two_factor_failed")}},function(a){a=a instanceof d("PolarisInstajax").AjaxError&&((a=a.responseObject)==null?void 0:a.message)||d("PolarisAuthStrings").ERROR_LOGIN_UNKNOWN;i({message:a,type:"TWO_FACTOR_VERIFY_FAILED"});c("polarisLogAction")("loginFailure",babelHelpers["extends"]({},s,{twoFac:!0}));d("CAAWebLoginLoggingUtils").logLoginResult("two_fac_redirect","two_fac",1,!1);c("PolarisLoginQPL").isActive()&&c("PolarisLoginQPL").addPointUserError("two_factor_failed")})}}function i(){return{type:"TWO_FACTOR_CODE_REQUESTED"}}function j(a){return{message:a,type:"TWO_FACTOR_CODE_REQUEST_FAILED"}}function k(a,b){return{identifier:a,timeSent:Date.now(),type:"TWO_FACTOR_CODE_SENT",verificationMethod:b}}function b(){return l("SMS")}function e(){return l("WHATSAPP")}function l(a){return function(b,e){b(i());e=e().auth.twoFactor;e||h(0,51504);var f=e.identifier;e=e.username;c("PolarisLoginQPL").isActive()&&c("PolarisLoginQPL").addPointTwoFactorRequestNewSMSCode();return a==="SMS"?d("PolarisAPISendTwoFactorLoginSms").sendTwoFactorLoginSms(e,f).then(function(a){b(k(a.two_factor_info.two_factor_identifier,"SMS"))},function(a){var e;e=a instanceof d("PolarisInstajax").AjaxError&&((e=a.responseObject)==null?void 0:e.message)||d("PolarisAuthStrings").TWOFAC_CODE_RESEND_FAILED_TEXT;b(j(e));c("polarisLogAction")("newCodeSentFailure",{platform:d("polarisGetAppPlatform").getAppPlatform()});c("PolarisLoginQPL").isActive()&&c("PolarisLoginQPL").markError("request_new_sms_code_failed",a)}):d("PolarisAPISendTwoFactorLoginWhatsapp").sendTwoFactorLoginWhatsapp(e,f).then(function(a){b(k(a.xdt_send_two_factor_login_whatsapp.two_factor_info.two_factor_identifier,"WHATSAPP"))},function(a){var e;e=a instanceof d("PolarisInstajax").AjaxError&&((e=a.responseObject)==null?void 0:e.message)||d("PolarisAuthStrings").TWOFAC_CODE_RESEND_FAILED_TEXT;b(j(e));c("polarisLogAction")("newCodeSentFailure",{platform:d("polarisGetAppPlatform").getAppPlatform()});c("PolarisLoginQPL").isActive()&&c("PolarisLoginQPL").markError("request_new_whatsapp_code_failed",a)})}}function f(a){return{eligibleForMultipleTotp:!1,fromFB:!1,fromFxAuth:!1,identifier:a.identifier||"",isInSowaExperience:a.isInSowaExperience,lastFourDigits:a.lastFourDigits||"",maskedPhoneNumber:a.maskedPhoneNumber||"",showTrustedDevice:!1,smsTwoFactorOn:a.smsTwoFactorOn||!1,timeReceived:Date.now(),totpTwoFactorOn:a.totpTwoFactorOn||!1,type:"TWO_FACTOR_CHALLENGE_RECEIVED",username:a.username||""}}g.submitVerificationCode=a;g.requestSMSCode=b;g.requestWhatsappCode=e;g.loadTwoFactorAuthenticationData=f}),98);
__d("PolarisTwoFactorForm.react",["fbt","invariant","IGDSBox.react","IGDSCheckbox.react","IGDSDialogFooter.react","IGDSText.react","PolarisAuthStrings","PolarisGenericStrings","PolarisIGCoreButton.react","PolarisIGCoreText","PolarisIsLoggedIn","PolarisLoginQPL","PolarisNavigationUtils","PolarisReactRedux.react","PolarisSlimTextInput.react","PolarisTwoFactorActions","PolarisUA","react","react-compiler-runtime","vulture"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l="twoFactorErrorAlert",m=h._(/*BTDS*/"backup codes"),n=h._(/*BTDS*/"text message"),o=h._(/*BTDS*/"authentication app"),p=h._(/*BTDS*/"resend it"),q=h._(/*BTDS*/"Send code via SMS instead"),r=h._(/*BTDS*/"Send code via WhatsApp instead"),s=h._(/*BTDS*/"Trust this device"),t=h._(/*BTDS*/"We won't ask for a code next time"),u=h._(/*BTDS*/"Security Code"),v=h._(/*BTDS*/"Confirm");h._(/*BTDS*/"Enter login code");var w=h._(/*BTDS*/"Enter the 6-digit code generated by your authentication app."),x=h._(/*BTDS*/"Enter a 6-digit login code generated by an authentication app."),y=h._(/*BTDS*/"Enter one of the 8-digit codes provided when you set up two-factor authentication.");function z(a){var b=d("react-compiler-runtime").c(9),e=a.onClickAuthAppCode,f=a.onClickBackupCode;a=a.verificationMethod;var g=d("PolarisReactRedux.react").useSelector(A),i;b[0]!==g?(i={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(d("PolarisUA").isMobile()&&g&&d("PolarisIsLoggedIn").isLoggedIn())<<0],b[0]=g,b[1]=i):i=b[1];b[2]!==e||b[3]!==f||b[4]!==a?(g=a==="TOTP"?h._(/*BTDS*/"If you're unable to receive a login code from an authentication app, you can use one of your {=backup codes}.",[h._param("=backup codes",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:f,children:k.jsx(c("PolarisIGCoreText").Body,{color:"ig-primary-action",children:m})}))]):h._(/*BTDS*/"If you're unable to use one of your backup codes, you can get one from your {=auth app codes}",[h._param("=auth app codes",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:e,children:o}))]),b[2]=e,b[3]=f,b[4]=a,b[5]=g):g=b[5];b[6]!==i||b[7]!==g?(e=k.jsx("div",babelHelpers["extends"]({},i,{children:g})),b[6]=i,b[7]=g,b[8]=e):e=b[8];return e}function A(a){return a.navigation.isAccountSwitcherOpen}function B(a){var b=d("react-compiler-runtime").c(9),e=a.onClickBackupCode,f=a.onClickSmsCode;a=a.verificationMethod;var g=d("PolarisReactRedux.react").useSelector(C),i;b[0]!==g?(i={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(d("PolarisUA").isMobile()&&g&&d("PolarisIsLoggedIn").isLoggedIn())<<0],b[0]=g,b[1]=i):i=b[1];b[2]!==e||b[3]!==f||b[4]!==a?(g=a==="SMS"||a==="WHATSAPP"?h._(/*BTDS*/"If you're unable to receive a security code, use one of your {=backup codes}.",[h._param("=backup codes",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:e,children:k.jsx(c("PolarisIGCoreText").Body,{color:"ig-primary-action",children:m})}))]):h._(/*BTDS*/"If you're unable to use a security code from your backup codes, you can get one by {=resend it}",[h._param("=resend it",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:f,children:n}))]),b[2]=e,b[3]=f,b[4]=a,b[5]=g):g=b[5];b[6]!==i||b[7]!==g?(e=k.jsx("div",babelHelpers["extends"]({},i,{children:g})),b[6]=i,b[7]=g,b[8]=e):e=b[8];return e}function C(a){return a.navigation.isAccountSwitcherOpen}function D(a){var b=d("react-compiler-runtime").c(10),e=a.onClickAuthAppCode,f=a.onClickBackupCode,g=a.onClickSmsCode;a=a.verificationMethod;var i=d("PolarisReactRedux.react").useSelector(E),j;b[0]!==i?(j={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(d("PolarisUA").isMobile()&&i&&d("PolarisIsLoggedIn").isLoggedIn())<<0],b[0]=i,b[1]=j):j=b[1];b[2]!==e||b[3]!==f||b[4]!==g||b[5]!==a?(i=a==="TOTP"?h._(/*BTDS*/"If you're unable to use a login code from an authentication app, you can get one by {=sms code} or use one of your {=backup codes}.",[h._param("=sms code",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:g,children:n})),h._param("=backup codes",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:f,children:k.jsx(c("PolarisIGCoreText").Body,{color:"ig-primary-action",children:m})}))]):a==="SMS"?h._(/*BTDS*/"If you're unable to receive a security code by text message, you can get one from your {=auth app codes} or use one of your {=backup codes}.",[h._param("=auth app codes",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:e,children:o})),h._param("=backup codes",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:f,children:k.jsx(c("PolarisIGCoreText").Body,{color:"ig-primary-action",children:m})}))]):h._(/*BTDS*/"If you're unable to use a security code from your backup codes, you can get one by {=resend it} or use one from your {=auth app codes}",[h._param("=resend it",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:g,children:n})),h._param("=auth app codes",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:e,children:o}))]),b[2]=e,b[3]=f,b[4]=g,b[5]=a,b[6]=i):i=b[6];b[7]!==j||b[8]!==i?(e=k.jsx("div",babelHelpers["extends"]({},j,{children:i})),b[7]=j,b[8]=i,b[9]=e):e=b[9];return e}function E(a){return a.navigation.isAccountSwitcherOpen}function F(a){var b=d("react-compiler-runtime").c(7);a=a.onNewCodeClicked;var e=d("PolarisReactRedux.react").useSelector(G),f;b[0]!==e?(f={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(d("PolarisUA").isMobile()&&e&&d("PolarisIsLoggedIn").isLoggedIn())<<0],b[0]=e,b[1]=f):f=b[1];b[2]!==a?(e=h._(/*BTDS*/"Didn't get a security code? We can {=resend it}.",[h._param("=resend it",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:k.jsx(c("PolarisIGCoreText").Body,{color:"ig-primary-action",children:p})}))]),b[2]=a,b[3]=e):e=b[3];b[4]!==f||b[5]!==e?(a=k.jsx("div",babelHelpers["extends"]({},f,{children:e})),b[4]=f,b[5]=e,b[6]=a):a=b[6];return a}function G(a){return a.navigation.isAccountSwitcherOpen}function H(a){var b=d("react-compiler-runtime").c(13),e=a.onNewCodeClicked,f=a.onOtherMethodCodeClicked;a=a.verificationMethod;var g=d("PolarisReactRedux.react").useSelector(I),i;b[0]!==g?(i={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(d("PolarisUA").isMobile()&&g&&d("PolarisIsLoggedIn").isLoggedIn())<<0],b[0]=g,b[1]=i):i=b[1];b[2]!==e||b[3]!==f||b[4]!==a?(g=a==="SMS"&&h._(/*BTDS*/"Didn't get a security code? We can {=resend it}. {=send WhatsApp instead}",[h._param("=resend it",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:e,children:k.jsx(c("PolarisIGCoreText").Body,{color:"ig-primary-action",children:p})})),h._param("=send WhatsApp instead",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:f,children:k.jsx(c("PolarisIGCoreText").Body,{color:"ig-primary-action",children:r})}))]),b[2]=e,b[3]=f,b[4]=a,b[5]=g):g=b[5];b[6]!==f||b[7]!==a?(e=a==="WHATSAPP"&&h._(/*BTDS*/"Didn't get a security code? {=send sms instead}",[h._param("=send sms instead",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:f,children:k.jsx(c("PolarisIGCoreText").Body,{color:"ig-primary-action",children:q})}))]),b[6]=f,b[7]=a,b[8]=e):e=b[8];b[9]!==i||b[10]!==g||b[11]!==e?(f=k.jsxs("div",babelHelpers["extends"]({},i,{children:[g,e]})),b[9]=i,b[10]=g,b[11]=e,b[12]=f):f=b[12];return f}function I(a){return a.navigation.isAccountSwitcherOpen}var J="verificationCodeDescription";function K(a){switch(a){case"SMS":return 1;case"BACKUP_CODE":return 2;case"TOTP":return 3;case"WHATSAPP":return 6;default:c("vulture")("yhGvsyGQ7jRu4D6I_6RGJXqrpD8=");return 0}}e=function(a){function b(b){var d;d=a.call(this,b)||this;d.$3=function(){c("PolarisLoginQPL").isActive()&&c("PolarisLoginQPL").addPointTwoFactorCodeFocus()};d.$4=function(a){c("PolarisLoginQPL").isActive()&&c("PolarisLoginQPL").addPointTwoFactorSubmitButtonClick(),d.$5(a)};d.$5=function(a){a.preventDefault();a=d.state;var b=a.currentVerificationMethod,c=a.trustSignal;a=a.verificationCode;a=a.replace(/\s+/g,"");b=K(b).toString();d.props.onSubmit(c,a,b)};d.$6=function(a){a=a.target.value;if(!a.match(/^[0-9 ]*$/))return;d.setState({verificationCode:a})};d.state={currentVerificationMethod:b.totpTwoFactorOn?"TOTP":b.isInSowaExperience?"WHATSAPP":"SMS",trustSignal:b.showTrustedDevice,verificationCode:""};return d}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.componentDidMount=function(){this.$1&&this.$1.focus(),this.$2()};e.componentDidUpdate=function(){this.$2()};e.$2=function(){this.props.hasTwoFactorState||d("PolarisNavigationUtils").openURL("/")};e.$7=function(a){return this.$8(a,"x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq x2b8uid x1atzwio")};e.$9=function(a){return this.$8(a,"x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq x2b8uid x5n08af")};e.$8=function(a,b){return k.jsx("div",{className:b,children:k.jsx("p",{"aria-atomic":"true",id:l,role:"alert",size:"footnote",children:a})})};e.getSubTextIndex=function(){var a=this.state.currentVerificationMethod,b=this.props,c=b.eligibleForMultipleTotp;b=b.isInSowaExperience;switch(a){case"TOTP":return c===!0?0:1;case"BACKUP_CODE":return 2;case"WHATSAPP":return 3;case"SMS":return b?4:5}};e.render=function(){var a=this,b=this.props,e=b.errorMessage,f=b.isAccountSwitcherOpen,g=b.showTrustedDevice,j=b.smsTwoFactorOn,l=b.successMessage;b=b.totpTwoFactorOn;var m=this.state.currentVerificationMethod;j||b||i(0,51594);var n=h._(/*BTDS*/"Enter the code we sent via WhatsApp to your mobile number: {maskedPhoneNumber}.",[h._param("maskedPhoneNumber",this.props.maskedPhoneNumber)]),o=h._(/*BTDS*/"Enter the code we sent via SMS to your mobile number: {maskedPhoneNumber}.",[h._param("maskedPhoneNumber",this.props.maskedPhoneNumber)]),p=h._(/*BTDS*/"Enter the code we sent to your number ending in {lastFourDigits}.",[h._param("lastFourDigits",this.props.lastFourDigits)]);n=[x,w,y,n,o,p];return k.jsxs("div",babelHelpers["extends"]({},{0:{className:"x889kno xyri2b x1a8lsjc x1c1uobl"},1:{className:"x889kno xyri2b x18d9i69 x1c1uobl"}}[!!(this.props.style==="modal")<<0],{children:[k.jsx("div",babelHelpers["extends"]({},{0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(d("PolarisUA").isMobile()&&f&&d("PolarisIsLoggedIn").isLoggedIn())<<0],{id:J,children:n[this.getSubTextIndex()]})),k.jsxs("form",{className:"x972fbf x10w94by x1qhh985 x14e42zd x78zum5 xdt5ytf xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf",method:"POST",onSubmit:this.$5,children:[k.jsx(c("PolarisSlimTextInput.react"),{"aria-describedby":J,"aria-label":u,"aria-required":"true",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",className:{0:"xdj266r x11gldyt xzueoph x11hdunq",1:"x14vqqas x1ys307a x1hq5gj4 xyqm7xq"}[!!(d("PolarisUA").isMobile()&&f&&d("PolarisIsLoggedIn").isLoggedIn())<<0],"data-testid":void 0,maxLength:8,name:"verificationCode",onChange:this.$6,onFocus:this.$3,placeholder:u,ref:function(b){return a.$1=b},type:"tel",value:this.state.verificationCode}),this.props.style==="default"&&k.jsx(c("IGDSBox.react"),{marginBottom:4,marginEnd:10,marginStart:10,marginTop:1,position:"relative",children:k.jsx(c("PolarisIGCoreButton.react"),{loading:this.props.requestInFlight,onClick:this.$4,children:v})}),e!=null&&e!==""&&this.$7(e),l!=null&&l!==""&&this.$9(l),g?k.jsx(c("IGDSBox.react"),{marginBottom:6,marginEnd:10,marginStart:10,marginTop:2,position:"relative",children:k.jsx(c("IGDSCheckbox.react"),{isChecked:this.state.trustSignal,onChange:function(){var b=a.state.trustSignal;a.setState({trustSignal:!b})},size:16,children:k.jsxs(c("IGDSBox.react"),{direction:"column",display:"flex",position:"relative",children:[k.jsx(c("IGDSText.react"),{size:"footnote",weight:"semibold",children:s}),k.jsx(c("IGDSBox.react"),{marginTop:2,position:"relative",children:k.jsx(c("IGDSText.react"),{size:"footnote",children:t})})]})})}):null,b&&j&&k.jsx(D,{onClickAuthAppCode:function(){a.setState({currentVerificationMethod:"TOTP"})},onClickBackupCode:function(){a.setState({currentVerificationMethod:"BACKUP_CODE"})},onClickSmsCode:function(b){a.props.onNewCodeClicked(b),a.setState({currentVerificationMethod:"SMS"})},verificationMethod:m}),b&&!j&&k.jsx(z,{onClickAuthAppCode:function(){a.setState({currentVerificationMethod:"TOTP"})},onClickBackupCode:function(){a.setState({currentVerificationMethod:"BACKUP_CODE"})},verificationMethod:m}),!b&&m==="WHATSAPP"&&k.jsx(H,{onOtherMethodCodeClicked:function(b){a.props.onNewCodeClicked(b),a.setState({currentVerificationMethod:"SMS"})},verificationMethod:"WHATSAPP"}),!b&&m==="SMS"&&this.props.isInSowaExperience&&k.jsx(H,{onNewCodeClicked:function(b){a.props.onNewCodeClicked(b),a.setState({currentVerificationMethod:"SMS"})},onOtherMethodCodeClicked:function(b){a.props.onNewWhatsappCodeClicked(b),a.setState({currentVerificationMethod:"WHATSAPP"})},verificationMethod:"SMS"}),!b&&m==="SMS"&&!this.props.isInSowaExperience&&k.jsx(F,{onNewCodeClicked:this.props.onNewCodeClicked}),!b&&k.jsx(B,{onClickBackupCode:function(){a.setState({currentVerificationMethod:"BACKUP_CODE"})},onClickSmsCode:function(b){a.props.onNewCodeClicked(b),a.setState({currentVerificationMethod:"SMS"})},verificationMethod:m}),this.props.style==="modal"&&(d("PolarisUA").isMobile()?k.jsx(c("IGDSBox.react"),{marginBottom:8,marginEnd:4,marginStart:3,marginTop:3,position:"relative",children:k.jsx(c("PolarisIGCoreButton.react"),{loading:this.props.requestInFlight,onClick:this.$5,children:d("PolarisAuthStrings").CONTINUE})}):k.jsx(c("IGDSBox.react"),{marginTop:5,position:"relative",width:"100%",children:k.jsx(c("IGDSDialogFooter.react"),{endAdornment:k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,loading:this.props.requestInFlight,onClick:this.$5,children:d("PolarisAuthStrings").CONTINUE}),startAdornment:this.props.onBackClick!=null?k.jsx(c("IGDSBox.react"),{alignItems:"start",justifyContent:"center",paddingX:3,position:"relative",children:k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:this.props.onBackClick,children:d("PolarisGenericStrings").BACK_TEXT})}):null})}))]})]}))};return b}(k.Component);e.defaultProps={style:"default"};function a(a,b){var c,d=a.twoFactor,e=d==null?void 0:d.message;return{eligibleForMultipleTotp:(d==null?void 0:d.eligibleForMultipleTotp)||!1,errorMessage:e&&e.isError&&e.text||((c=b.errorMessage)!=null?c:null),hasTwoFactorState:!!d,isAccountSwitcherOpen:a.navigation.isAccountSwitcherOpen,isInSowaExperience:(d==null?void 0:d.isInSowaExperience)||!1,lastFourDigits:d==null?void 0:d.lastFourDigits,maskedPhoneNumber:d==null?void 0:d.maskedPhoneNumber,requestInFlight:(d==null?void 0:d.requestInFlight)||b.requestInFlight,showTrustedDevice:(d==null?void 0:d.showTrustedDevice)||!1,smsTwoFactorOn:(d==null?void 0:d.smsTwoFactorOn)||!1,successMessage:e&&!e.isError?e.text:"",totpTwoFactorOn:(d==null?void 0:d.totpTwoFactorOn)||!1}}function b(a,b){return{onNewCodeClicked:function(b){a(d("PolarisTwoFactorActions").requestSMSCode())},onNewWhatsappCodeClicked:function(b){a(d("PolarisTwoFactorActions").requestWhatsappCode())},onSubmit:function(c,e,f){a(d("PolarisTwoFactorActions").submitVerificationCode(b.pageIdentifier,c,e,f,(c=b.isPrivacyPortalReq)!=null?c:!1))}}}f=d("PolarisReactRedux.react").connect(a,b)(e);g["default"]=f}),226);
__d("XPolarisLoginControllerParamsRefineValidator",["coerceRouteParams","refine"],(function(a,b,c,d,e,f,g){e=(b=d("refine")).or(b.literal(null),b.string());f=b.object({dyi_job_id:e,e_un:e,enable_fb_login:b.bool(),flo:b.bool(),force_authentication:b.bool(),force_login_igid:e,hl:e,is_from_rle:b.bool(),logged_out_reporting_url:e,mtn:b.bool(),next:e,platform_app_id:e,request_id:e,source:e,target_user_id:e});var h=b.coercion(f),i=Object.freeze({force_authentication:{legacyNames:[],"default":!1,coercibleType:"EXISTS"},target_user_id:{legacyNames:[],"default":null,coercibleType:"STRING"},force_login_igid:{legacyNames:[],"default":null,coercibleType:"STRING"},platform_app_id:{legacyNames:[],"default":null,coercibleType:"STRING"},logged_out_reporting_url:{legacyNames:[],"default":null,coercibleType:"STRING"},next:{legacyNames:[],"default":null,coercibleType:"STRING"},dyi_job_id:{legacyNames:[],"default":null,coercibleType:"STRING"},source:{legacyNames:[],"default":null,coercibleType:"STRING"},hl:{legacyNames:[],"default":null,coercibleType:"STRING"},e_un:{legacyNames:[],"default":null,coercibleType:"STRING"},enable_fb_login:{legacyNames:[],"default":!1,coercibleType:"EXISTS"},request_id:{legacyNames:[],"default":null,coercibleType:"STRING"},is_from_rle:{legacyNames:[],"default":!1,coercibleType:"EXISTS"},mtn:{legacyNames:[],"default":!1,coercibleType:"EXISTS"},flo:{legacyNames:[],"default":!1,coercibleType:"BOOL"}});function a(a){return h(c("coerceRouteParams")(a,i))}g.refineXPolarisLoginControllerParams=a}),98);
__d("PolarisAuthFormCard.react",["fbt","invariant","ix","CometRouteParams","FBLogger","IGCoreImage.react","IGDSBox.react","IGDSDivider.react","IGDSSpinner.react","IGDSText.react","IGDSTextVariants.react","InstagramQueryParamsHelper","PolarisAppsellUnit.react","PolarisAuthActionConstants","PolarisAuthActions","PolarisAuthTypeSwitcher.react","PolarisBarcelonaAppSVGIcon.react","PolarisConfig","PolarisConsentModal.react","PolarisExternalLink.react","PolarisFBConnectActions","PolarisFBConnectHelpers","PolarisFacebookAccountPicker.react","PolarisFacebookLoginForm.react","PolarisIsLoggedIn","PolarisLandingForm.react","PolarisLoggedOutContentWallDialogAuthCTAs.react","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutCtaImpressionLogger","PolarisLoggedOutNetzDGReportLink.react","PolarisLoggedOutUpsellStrings","PolarisLoginActionClearStopDeletionNonce","PolarisLoginActionLogin","PolarisLoginActionLoginWithFBAccessToken","PolarisLoginActionLoginWithFBJSSDK","PolarisLoginLogger","PolarisLoginQPL","PolarisOneTapLogin","PolarisOneTapLoginForm.react","PolarisOneTapLoginStorage","PolarisQueryParams","PolarisReactRedux.react","PolarisSenderNameHelpers","PolarisSignupForm.react","PolarisSignupTypes","PolarisSlimLoginForm.react","PolarisStrategicWebTraffic","PolarisTwoFactorForm.react","PolarisUA","PolarisUserAvatar.react","URI","XPolarisLoginControllerParamsRefineValidator","nullthrows","polarisIsEligibleForFacebookLogin","polarisUserSelectors","react","react-compiler-runtime","stylex","usePolarisCentralizedUpsellState","usePolarisLOXBrandForwardDeeplinkLogoUpsell","usePolarisLOXHomePageBrandForwardButtonSwitchUpsell","usePolarisPageID","usePrevious","useSinglePartialViewImpression","warning"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k,l,m,n=m||(m=d("react")),o=m.useEffect,p=h._(/*BTDS*/"Continue without login."),q=h._(/*BTDS*/"Your password has been reset. Please try logging in again."),r=h._(/*BTDS*/"Log in to follow people on Instagram."),s=h._(/*BTDS*/"Two factor authentication lock icon"),t={mobileBrandingForwardPadding:{paddingTop:"xexx8yu",$$css:!0},mobileBrandPadding:{paddingTop:"xnk5j39",$$css:!0},mobileFooterPadding:{paddingBottom:"xefzj8c",$$css:!0},root:{color:"x5n08af",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k x7qam4e",marginTop:"x14vqqas x15lw1kp",maxWidth:"x1dc814f x1owpceq",width:"xh8yej3",$$css:!0},rootModal:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",maxWidth:"x1319t99",width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(66),e=a.authTypeOverride,f=a.dialogSource,g=a.forceLoginIgId,h=a.forceLoginProfilePicUrl,j=a.forceLoginUsername,l=a.fromLoggedOutDialog,m=a.hideAppUpsells,p=a.hideBorder,q=a.hideForgotPassword,r=a.intentSource,s=a.isPrivacyPortalReq,v=a.pageIdentifier,w=a.pageType,x=a.showNetzDGReportLink,y=a.style,z=a.useMobileBrandPadding,A=a.useMobileFooterPadding,B=a.usernameHint;a=a.xstyle;l=l===void 0?!1:l;m=m===void 0?!1:m;q=q===void 0?!1:q;s=s===void 0?!1:s;x=x===void 0?!1:x;y=y===void 0?"default":y;z=z===void 0?!0:z;A=A===void 0?!0:A;var C=c("usePolarisPageID")();v=v!=null?v:C;C=d("PolarisReactRedux.react").useSelector(u);C=C.auth;C=C.authType;var D=e!=null?e:C;D!=null||i(0,51551);e=c("usePolarisLOXHomePageBrandForwardButtonSwitchUpsell")();C=e.isBrandForwardButtonSwitchUpsell;e=c("usePolarisLOXBrandForwardDeeplinkLogoUpsell")();e=e.isBrandForwardDeeplinkLogoUpsell;C=C||e;var E=c("usePrevious")(D),F;b[0]!==D||b[1]!==E?(e=function(){!c("PolarisLoginQPL").isActive()&&E!==d("PolarisAuthActionConstants").AUTH.login&&D===d("PolarisAuthActionConstants").AUTH.login&&c("PolarisLoginQPL").start()},F=[E,D],b[0]=D,b[1]=E,b[2]=e,b[3]=F):(e=b[2],F=b[3]);o(e,F);var G=d("PolarisReactRedux.react").useStore();b[4]!==D||b[5]!==G?(e=function(){if(D===d("PolarisAuthActionConstants").AUTH.login||D===d("PolarisAuthActionConstants").AUTH.twoFactor)return function(){var a=G.getState().auth.authType===d("PolarisAuthActionConstants").AUTH.twoFactor;c("PolarisLoginQPL").isActive()&&!a&&c("PolarisLoginQPL").endCancel()}},F=[D,G],b[4]=D,b[5]=G,b[6]=e,b[7]=F):(e=b[6],F=b[7]);o(e,F);if(b[8]!==D||b[9]!==C||b[10]!==y||b[11]!==z||b[12]!==A||b[13]!==a){b[15]!==D||b[16]!==C||b[17]!==z?(e=d("PolarisUA").isMobile()&&D===d("PolarisAuthActionConstants").AUTH.none&&z&&(C?t.mobileBrandingForwardPadding:t.mobileBrandPadding),b[15]=D,b[16]=C,b[17]=z,b[18]=e):e=b[18];F=(k||(k=c("stylex"))).props(t.root,y==="modal"&&t.rootModal,d("PolarisUA").isMobile()&&!!A&&t.mobileFooterPadding,e,a);b[8]=D;b[9]=C;b[10]=y;b[11]=z;b[12]=A;b[13]=a;b[14]=F}else F=b[14];b[19]!==p||b[20]!==y?(e={0:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf"},2:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x7r02ix xdj266r x14z9mp xat24cr x1lziwak xyri2b x18d9i69 x1c1uobl xz9dl7a xh8yej3"},1:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd"},3:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x7r02ix xdj266r x14z9mp xat24cr x1lziwak xyri2b x18d9i69 x1c1uobl xz9dl7a xh8yej3 x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd"}}[!!(y==="modal")<<1|!!(p===!0)<<0],b[19]=p,b[20]=y,b[21]=e):e=b[21];b[22]!==D||b[23]!==v||b[24]!==C?(z=!C&&n.jsx(W,{authType:D,pageID:v}),b[22]=D,b[23]=v,b[24]=C,b[25]=z):z=b[25];b[26]!==D||b[27]!==f||b[28]!==g||b[29]!==h||b[30]!==j||b[31]!==l||b[32]!==q||b[33]!==r||b[34]!==s||b[35]!==v||b[36]!==w||b[37]!==y||b[38]!==B?(A=n.jsx(L,{authType:D,dialogSource:f,forceLoginIgId:g,forceLoginProfilePicUrl:h,forceLoginUsername:j,fromLoggedOutDialog:l,hideForgotPassword:q,intentSource:r,isPrivacyPortalReq:s,pageID:v,pageType:w,style:y,usernameHint:B}),b[26]=D,b[27]=f,b[28]=g,b[29]=h,b[30]=j,b[31]=l,b[32]=q,b[33]=r,b[34]=s,b[35]=v,b[36]=w,b[37]=y,b[38]=B,b[39]=A):A=b[39];b[40]!==D||b[41]!==A?(a=n.jsx(J,{authType:D,children:A}),b[40]=D,b[41]=A,b[42]=a):a=b[42];b[43]!==v||b[44]!==x?(C=n.jsx(ca,{pageID:v,showNetzDGReportLink:x}),b[43]=v,b[44]=x,b[45]=C):C=b[45];b[46]===Symbol["for"]("react.memo_cache_sentinel")?(f=n.jsx(da,{}),b[46]=f):f=b[46];b[47]!==e||b[48]!==z||b[49]!==a||b[50]!==C?(h=n.jsxs("div",babelHelpers["extends"]({},e,{"data-testid":void 0,children:[z,a,C,f]})),b[47]=e,b[48]=z,b[49]=a,b[50]=C,b[51]=h):h=b[51];b[52]===Symbol["for"]("react.memo_cache_sentinel")?(j=n.jsx(c("PolarisConsentModal.react"),{}),b[52]=j):j=b[52];b[53]!==D||b[54]!==g||b[55]!==l||b[56]!==m||b[57]!==p||b[58]!==v||b[59]!==w||b[60]!==y?(q=n.jsx(ea,{authType:D,forceLoginIgId:g,fromLoggedOutDialog:l,hideAppUpsells:m,hideBorder:p,pageId:v,pageType:w,style:y}),b[53]=D,b[54]=g,b[55]=l,b[56]=m,b[57]=p,b[58]=v,b[59]=w,b[60]=y,b[61]=q):q=b[61];b[62]!==F||b[63]!==h||b[64]!==q?(r=n.jsxs("div",babelHelpers["extends"]({},F,{children:[h,j,q]})),b[62]=F,b[63]=h,b[64]=q,b[65]=r):r=b[65];return r}function u(a){return a}function v(a,b,e){var f=d("react-compiler-runtime").c(4),g;f[0]!==a||f[1]!==b||f[2]!==e?(g={onImpressionStart:function(){a||d("PolarisLoggedOutCtaImpressionLogger").logLoggedOutCtaImpressionEvent("auth_form",e,{},b!=null?b:void 0)}},f[0]=a,f[1]=b,f[2]=e,f[3]=g):g=f[3];return c("useSinglePartialViewImpression")(g)}function w(a){var b=c("usePolarisCentralizedUpsellState")();b=b[0];b=b.isProfileOrPostPage;return a===d("PolarisAuthActionConstants").AUTH.signup&&b}function x(a){var b=d("react-compiler-runtime").c(4),e=d("PolarisReactRedux.react").useSelector(y);e=e.auth;e=e.signup;var f=c("usePolarisCentralizedUpsellState")();f=f[0];f=f.isProfileOrPostPage;var g;b[0]!==a||b[1]!==f||b[2]!==(e==null?void 0:e.step)?(g=!d("PolarisIsLoggedIn").isLoggedIn()&&d("PolarisUA").isDesktop()&&f&&(a===d("PolarisAuthActionConstants").AUTH.signup?(e==null?void 0:e.step)===d("PolarisSignupTypes").STEP.base:!0),b[0]=a,b[1]=f,b[2]=e==null?void 0:e.step,b[3]=g):g=b[3];return g}function y(a){return a}function z(){var a=d("react-compiler-runtime").c(6),b=d("PolarisReactRedux.react").useSelector(A);b=b.fb;var c=b.authResponse,e=b.igProfile,f=b.igProfiles;b=b.igSSODisabled;if(e==null)return null;c=c==null?void 0:c.userID;var g;a[0]!==e.profilePictureUrl||a[1]!==e.username||a[2]!==f||a[3]!==b||a[4]!==c?(g={fbUserID:c,igSSODisabled:b,linkedIGProfiles:f,profilePictureUrl:e.profilePictureUrl,username:e.username},a[0]=e.profilePictureUrl,a[1]=e.username,a[2]=f,a[3]=b,a[4]=c,a[5]=g):g=a[5];return g}function A(a){return a}function B(){var a,b,c=d("PolarisReactRedux.react").useSelector(C);c=c.auth;var e=c.login;c=c.twoFactor;if((e==null?void 0:e.errorMessage)!=null)return e.errorMessage;return(c==null||(a=c.message)==null?void 0:a.isError)===!0&&(c==null||(b=c.message)==null?void 0:b.text)!=null?c.message.text:null}function C(a){return a}function D(){var a=d("PolarisReactRedux.react").useSelector(E);a=a.auth;var b=a.login,c=a.signup;a=a.twoFactor;return(c=(b=(b=b==null?void 0:b.requestInFlight)!=null?b:c==null?void 0:c.requestInFlight)!=null?b:a==null?void 0:a.requestInFlight)!=null?c:!1}function E(a){return a}function F(){var a=d("react-compiler-runtime").c(2),b=d("PolarisReactRedux.react").useDispatch(),c;a[0]!==b?(c=function(a){b(d("PolarisAuthActions").switchAuthType(a))},a[0]=b,a[1]=c):c=a[1];return c}function G(){var a=d("react-compiler-runtime").c(2),b=d("PolarisReactRedux.react").useSelector(I);b=b.auth;b=b.next;var e;if(a[0]!==b){e=Symbol["for"]("react.early_return_sentinel");bb0:{var f=new(l||(l=c("URI")))(b),g=f.getPath(),h=f.getDomain();if(h===""&&g==="/oauth/authorize"){h=f.getQueryData();f=(g=h.scope)==null?void 0:g.split(",");e=(f==null?void 0:f.every(H))===!0;break bb0}}a[0]=b;a[1]=e}else e=a[1];return e!==Symbol["for"]("react.early_return_sentinel")?e:!1}function H(a){return a.startsWith("threads_")}function I(a){return a}function J(a){var b=d("react-compiler-runtime").c(1),e=a.authType;a=a.children;var f=d("PolarisReactRedux.react").useSelector(K);f=f.auth;f=f.isFBLoggedIn;if((e===d("PolarisAuthActionConstants").AUTH.fbLogin||e===d("PolarisAuthActionConstants").AUTH.fbAccountPicker)&&f==null){b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=n.jsx(c("IGDSBox.react"),{alignItems:"center",justifyContent:"center",minHeight:160,position:"relative",children:n.jsx(c("IGDSSpinner.react"),{size:"small"})}),b[0]=e):e=b[0];return e}return a}function K(a){return a}function L(a){var b=d("react-compiler-runtime").c(30),e=a.authType,f=a.dialogSource,g=a.forceLoginIgId,h=a.forceLoginProfilePicUrl,i=a.forceLoginUsername,j=a.fromLoggedOutDialog,k=a.hideForgotPassword,l=a.intentSource,m=a.isPrivacyPortalReq,o=a.pageID,p=a.pageType,q=a.style;a=a.usernameHint;m=m===void 0?!1:m;var r=d("PolarisReactRedux.react").useSelector(M);r=r.auth;r=r.isFBLoggedIn;var s=z(),t=G(),u=g!=null;r=(e===d("PolarisAuthActionConstants").AUTH.fbLogin||e===d("PolarisAuthActionConstants").AUTH.fbAccountPicker)&&r===!0&&!!s;if(e===d("PolarisAuthActionConstants").AUTH.signup&&!d("PolarisUA").isMobile()){var v;b[0]!==e||b[1]!==j||b[2]!==l||b[3]!==o||b[4]!==q?(v=n.jsx(N,{authType:e,fromLoggedOutDialog:j,intentSource:l,pageID:o,style:q}),b[0]=e,b[1]=j,b[2]=l,b[3]=o,b[4]=q,b[5]=v):v=b[5];return v}else if(e===d("PolarisAuthActionConstants").AUTH.twoFactor){b[6]!==m||b[7]!==o||b[8]!==q?(v=n.jsx(O,{isPrivacyPortalReq:m,pageID:o,style:q}),b[6]=m,b[7]=o,b[8]=q,b[9]=v):v=b[9];return v}else if(!u&&r&&!t&&(s==null?void 0:s.igSSODisabled)!==!0){b[10]!==e||b[11]!==o||b[12]!==p?(v=n.jsx(P,{authType:e,pageID:o,pageType:p}),b[10]=e,b[11]=o,b[12]=p,b[13]=v):v=b[13];return v}else if(!u&&d("PolarisOneTapLogin").isOneTapLoginEligible()&&e===d("PolarisAuthActionConstants").AUTH.oneTapLogin){b[14]!==e?(r=n.jsx(S,{authType:e}),b[14]=e,b[15]=r):r=b[15];return r}else if(d("PolarisUA").isMobile()&&e===d("PolarisAuthActionConstants").AUTH.none){b[16]!==o?(t=n.jsx(T,{pageID:o}),b[16]=o,b[17]=t):t=b[17];return t}c("warning")(e===d("PolarisAuthActionConstants").AUTH.login||e===d("PolarisAuthActionConstants").AUTH.oneTapLogin||e===d("PolarisAuthActionConstants").AUTH.multiStepSignup,'Expected authType to be "login or oneTapLogin"; got "%s"',e);b[18]!==f||b[19]!==g||b[20]!==h||b[21]!==i||b[22]!==j||b[23]!==k||b[24]!==l||b[25]!==m||b[26]!==o||b[27]!==q||b[28]!==a?(s=n.jsx(U,{dialogSource:f,forceLoginIgId:g,forceLoginProfilePicUrl:h,forceLoginUsername:i,fromLoggedOutDialog:j,hideForgotPassword:k,intentSource:l,isPrivacyPortalReq:m,pageID:o,style:q,usernameHint:a}),b[18]=f,b[19]=g,b[20]=h,b[21]=i,b[22]=j,b[23]=k,b[24]=l,b[25]=m,b[26]=o,b[27]=q,b[28]=a,b[29]=s):s=b[29];return s}function M(a){return a}function N(a){var b=d("react-compiler-runtime").c(9),e=a.authType,f=a.fromLoggedOutDialog,g=a.intentSource,h=a.pageID;a=a.style;f=v(f,g,h);g=D();e=w(e);var i=c("usePolarisCentralizedUpsellState")();i=i[0];i=i.isProfileOrPostPage;if(e){b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=n.jsx(c("PolarisLoggedOutContentWallDialogAuthCTAs.react"),{}),b[0]=e):e=b[0];return e}b[1]!==i||b[2]!==h||b[3]!==g||b[4]!==a?(e=n.jsx(c("PolarisSignupForm.react"),{hideHeader:i,pageIdentifier:h,requestInFlight:g,style:a}),b[1]=i,b[2]=h,b[3]=g,b[4]=a,b[5]=e):e=b[5];b[6]!==f||b[7]!==e?(i=n.jsx("div",{ref:f,children:e}),b[6]=f,b[7]=e,b[8]=i):i=b[8];return i}function O(a){var b=d("react-compiler-runtime").c(6),e=a.isPrivacyPortalReq,f=a.pageID;a=a.style;e=e===void 0?!1:e;var g=B(),h=D();g=g||"";var i;b[0]!==e||b[1]!==f||b[2]!==h||b[3]!==a||b[4]!==g?(i=n.jsx(c("PolarisTwoFactorForm.react"),{errorMessage:g,isPrivacyPortalReq:e,pageIdentifier:f,requestInFlight:h,style:a}),b[0]=e,b[1]=f,b[2]=h,b[3]=a,b[4]=g,b[5]=i):i=b[5];return i}function P(a){var b=d("react-compiler-runtime").c(36),e=a.authType,f=a.pageID;a=a.pageType;var g=d("PolarisReactRedux.react").useSelector(R),h=g.auth;g=g.fb;var i=h.login,j=g.status,k=d("PolarisReactRedux.react").useDispatch();h=z();g=B();var l=F(),m=D(),o=x(e);if(b[0]!==(h==null?void 0:h.linkedIGProfiles)){var p;p=(p=h==null?void 0:h.linkedIGProfiles)!=null?p:[];b[0]=h==null?void 0:h.linkedIGProfiles;b[1]=p}else p=b[1];p=p;var q;b[2]!==k||b[3]!==f?(q=function(a){a!=null?(d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("login_with_fb","auth_form",f),k(d("PolarisLoginActionLoginWithFBJSSDK").loginWithFBJSSDK({pageID:f,source:f},a))):(d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("fb_connect","auth_form",f),d("PolarisFBConnectHelpers").redirectToFBOAuth("/",f)["catch"](Q))},b[2]=k,b[3]=f,b[4]=q):q=b[4];q=q;var r;b[5]!==h?(r=!!h&&d("PolarisFBConnectHelpers").isFBCUnique(h.username),b[5]=h,b[6]=r):r=b[6];r=r;var s=p.length<=1,t=d("PolarisQueryParams").getShouldRefreshFBCookie();if(d("PolarisOneTapLogin").isOneTapLoginEligible()&&e!==d("PolarisAuthActionConstants").AUTH.fbAccountPicker&&(!t||s)){b[7]!==r?(e=d("PolarisOneTapLoginStorage").getLoginNonces(),t=Object.values(e).length>=1||r,b[7]=r,b[8]=e,b[9]=t):(e=b[8],t=b[9]);if(t){t=r&&s?h:null;s=r&&s?q:void 0;o=!o;var u;b[10]!==e||b[11]!==t||b[12]!==s||b[13]!==o?(u=n.jsx(c("PolarisOneTapLoginForm.react"),{fbConnectedUser:t,loginNonces:e,onRequestFBLogin:s,showSingleAccountProfilePicture:o}),b[10]=e,b[11]=t,b[12]=s,b[13]=o,b[14]=u):u=b[14];return u}}else if(p.length>1&&r){b[15]!==(i==null?void 0:i.deletionNonce)||b[16]!==k||b[17]!==f?(e=function(a){k(d("PolarisLoginActionLoginWithFBAccessToken").loginWithFBAccessToken({pageID:f,skipped:!1,source:"fbSignupPage"},a,i==null?void 0:i.deletionNonce))},b[15]=i==null?void 0:i.deletionNonce,b[16]=k,b[17]=f,b[18]=e):e=b[18];t=e;b[19]!==p||b[20]!==t?(s=n.jsx(c("PolarisFacebookAccountPicker.react"),{fbConnectedIgProfiles:p,onRequestFBLogin:t}),b[19]=p,b[20]=t,b[21]=s):s=b[21];return s}b[22]!==j||b[23]!==l?(o=function(a){d("PolarisLoginLogger").logLoginEvent({event_name:"fb_switch_accounts_click",fbconnect_status:j}),l(a)},b[22]=j,b[23]=l,b[24]=o):o=b[24];u=o;b[25]!==h?(r=c("nullthrows")(h),b[25]=h,b[26]=r):r=b[26];e=a!=null?a:void 0;b[27]!==j||b[28]!==u||b[29]!==g||b[30]!==q||b[31]!==f||b[32]!==m||b[33]!==r||b[34]!==e?(p=n.jsx(c("PolarisFacebookLoginForm.react"),{accountInfo:r,errorMessage:g,fbConnectStatus:j,onRequestLogin:q,onSwitchAccountsClick:u,pageID:f,pageType:e,requestInFlight:m}),b[27]=j,b[28]=u,b[29]=g,b[30]=q,b[31]=f,b[32]=m,b[33]=r,b[34]=e,b[35]=p):p=b[35];return p}function Q(a){return c("FBLogger")("ig_web").catching(a).mustfix("unexpected")}function R(a){return a}function S(a){var b=d("react-compiler-runtime").c(3);a=a.authType;a=x(a);var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=d("PolarisOneTapLoginStorage").getLoginNonces(),b[0]=e):e=b[0];a=!a;b[1]!==a?(e=n.jsx(c("PolarisOneTapLoginForm.react"),{loginNonces:e,showSingleAccountProfilePicture:a}),b[1]=a,b[2]=e):e=b[2];return e}function T(a){var b=d("react-compiler-runtime").c(4),e=a.pageID;b[0]!==e?(a={onImpressionStart:function(){d("PolarisLoggedOutCtaImpressionLogger").logLoggedOutCtaImpressionEvent("full_page",e)}},b[0]=e,b[1]=a):a=b[1];a=c("useSinglePartialViewImpression")(a);var f;b[2]!==a?(f=n.jsx(c("PolarisLandingForm.react"),{ref:a}),b[2]=a,b[3]=f):f=b[3];return f}function U(a){var b=d("react-compiler-runtime").c(47),e=a.dialogSource,f=a.forceLoginIgId,g=a.forceLoginProfilePicUrl,h=a.forceLoginUsername,i=a.fromLoggedOutDialog,j=a.hideForgotPassword,k=a.intentSource,l=a.isPrivacyPortalReq,m=a.pageID,o=a.style;a=a.usernameHint;var p=l===void 0?!1:l;l=d("PolarisReactRedux.react").useSelector(V);var s=l.auth;l=l.fb;var t=s.isFBLoggedIn,u=s.login;s=s.next;l=l.status;var w=d("PolarisReactRedux.react").useDispatch(),x=F();k=v(i,k,m);var y=G(),A=z(),C=u&&u.source==="follow"?r:"",E=B(),H=D(),I=u&&u.wasPasswordJustReset?q:"",J;b[0]!==w||b[1]!==i||b[2]!==p||b[3]!==m?(J=function(a,b,c){w(d("PolarisLoginActionLogin").login(a,b,{source:m},c,!1,null,i,p))},b[0]=w,b[1]=i,b[2]=p,b[3]=m,b[4]=J):J=b[4];J=J;var K;b[5]!==w?(K=function(a){w(d("PolarisFBConnectActions").setShowSSODisabledModal(a))},b[5]=w,b[6]=K):K=b[6];var L=K;b[7]!==w||b[8]!==i||b[9]!==m?(K=function(a,b,c,e){w(d("PolarisLoginActionLogin").login(a,b,{source:m},c,!1,e,i))},b[7]=w,b[8]=i,b[9]=m,b[10]=K):K=b[10];K=K;var M;b[11]!==w?(M=function(){w(d("PolarisLoginActionClearStopDeletionNonce").clearStopDeletionNonce())},b[11]=w,b[12]=M):M=b[12];M=M;var N;b[13]!==(A==null?void 0:A.igSSODisabled)||b[14]!==(A==null?void 0:A.linkedIGProfiles)||b[15]!==(A==null?void 0:A.username)||b[16]!==L||b[17]!==x?(N=function(){var a;a=(a=A==null?void 0:A.linkedIGProfiles)!=null?a:[];(A==null?void 0:A.igSSODisabled)===!0?(x(d("PolarisAuthActionConstants").AUTH.login),L(A==null?void 0:A.username)):a.length>1?x(d("PolarisAuthActionConstants").AUTH.fbAccountPicker):x(d("PolarisAuthActionConstants").AUTH.fbLogin)},b[13]=A==null?void 0:A.igSSODisabled,b[14]=A==null?void 0:A.linkedIGProfiles,b[15]=A==null?void 0:A.username,b[16]=L,b[17]=x,b[18]=N):N=b[18];N=N;var O;b[19]===Symbol["for"]("react.memo_cache_sentinel")?(O={className:"xod5an3 x1dc814f xh8yej3"},b[19]=O):O=b[19];t=!!t;var P=(A==null?void 0:A.igSSODisabled)===!0,Q=u==null?void 0:u.deletionDate;u=u==null?void 0:u.deletionNonce;a=a!=null?a:void 0;var R;b[20]!==e||b[21]!==l||b[22]!==f||b[23]!==g||b[24]!==h||b[25]!==i||b[26]!==N||b[27]!==j||b[28]!==C||b[29]!==y||b[30]!==E||b[31]!==s||b[32]!==M||b[33]!==J||b[34]!==K||b[35]!==H||b[36]!==o||b[37]!==I||b[38]!==t||b[39]!==P||b[40]!==Q||b[41]!==u||b[42]!==a?(R=n.jsx(c("PolarisSlimLoginForm.react"),{dialogSource:e,errorMessage:E,fbConnectStatus:l,forceLoginIgId:f,forceLoginProfilePicUrl:g,forceLoginUsername:h,fromLoggedOutDialog:i,hideFBLogin:!c("polarisIsEligibleForFacebookLogin")(),hideForgotPassword:j,infoMessage:C,isFBLoggedIn:t,isIGSSODisabled:P,isThreadsRequest:y,nextUrl:s,onClearStopDeletionNonce:M,onLoginWithFBClick:N,onStopAccountDeletion:K,onSubmit:J,requestInFlight:H,stopDeletionDate:Q,stopDeletionNonce:u,style:o,successMessage:I,usernameHint:a}),b[20]=e,b[21]=l,b[22]=f,b[23]=g,b[24]=h,b[25]=i,b[26]=N,b[27]=j,b[28]=C,b[29]=y,b[30]=E,b[31]=s,b[32]=M,b[33]=J,b[34]=K,b[35]=H,b[36]=o,b[37]=I,b[38]=t,b[39]=P,b[40]=Q,b[41]=u,b[42]=a,b[43]=R):R=b[43];b[44]!==k||b[45]!==R?(e=n.jsx("div",babelHelpers["extends"]({},O,{ref:k,children:R})),b[44]=k,b[45]=R,b[46]=e):e=b[46];return e}function V(a){return a}function W(a){var b=d("react-compiler-runtime").c(8),e=a.authType;a=a.pageID;var f=d("PolarisReactRedux.react").useSelector(X);f=f.auth;f=f.signup;var g=x(e),h=c("usePolarisCentralizedUpsellState")();h=h[0];var i=h.isProfileOrPostPage,j=h.lastViewedOwnerID;b[0]!==i||b[1]!==j?(h=function(a){return i&&j!=null?(a=d("polarisUserSelectors").maybeGetUserById(a,j))!=null?a:{}:{}},b[0]=i,b[1]=j,b[2]=h):h=b[2];h=d("PolarisReactRedux.react").useSelector(h);f=!g&&d("PolarisUA").isDesktop()&&e===d("PolarisAuthActionConstants").AUTH.signup?(f==null?void 0:f.step)===d("PolarisSignupTypes").STEP.base:!0;if(g&&(h==null?void 0:h.username)!=null){b[3]!==a||b[4]!==h?(g=n.jsx(aa,{pageID:a,user:h}),b[3]=a,b[4]=h,b[5]=g):g=b[5];return g}else if(f){b[6]!==e?(a=n.jsx(Y,{authType:e}),b[6]=e,b[7]=a):a=b[7];return a}return null}function X(a){return a}function Y(a){var b=d("react-compiler-runtime").c(3);a=a.authType;var e=G(),f;b[0]!==a||b[1]!==e?(f=n.jsx(c("IGDSBox.react"),{marginBottom:3,marginTop:9,position:"relative",children:e?n.jsx(c("PolarisBarcelonaAppSVGIcon.react"),{fill:"var(--barcelona-logo)",size:34}):a===d("PolarisAuthActionConstants").AUTH.twoFactor?n.jsx(c("IGCoreImage.react"),{alt:s,src:{light:j("222729")}}):n.jsx(c("IGCoreImage.react"),{alt:h._(/*BTDS*/"Instagram"),src:{dark:j("222731"),light:j("222730")}})}),b[0]=a,b[1]=e,b[2]=f):f=b[2];return f}var Z={container:{borderTopColor:"x1yhmmig",borderInlineEndColor:"xpcrz0c",borderBottomColor:"xyb01ml",borderInlineStartColor:"x1vpptxl",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"xmn4e3e",borderInlineEndWidth:"x1if355w",borderBottomWidth:"x2x41l1",borderInlineStartWidth:"xct1zlm",position:"x1n2onr6",$$css:!0}};function aa(a){var b,e=d("react-compiler-runtime").c(15),f=a.pageID;a=a.user;var g=a.fullName,h=a.profilePictureUrl;a=a.username;a=c("nullthrows")(a);var i=d("PolarisReactRedux.react").useSelector(ba);i=i.sharerInformation;f=d("PolarisSenderNameHelpers").shouldShowSenderName(f);b=i!=null&&f?d("PolarisLoggedOutUpsellStrings").seePhotosFromFullNameBodyText((b=i.fullName)!=null?b:i.username):d("PolarisLoggedOutUpsellStrings").seePhotosFromFullNameBodyText(g!=null?g:a);g=i!=null&&f?d("PolarisLoggedOutUpsellStrings").joinSharerHeaderText((g=i.fullName)!=null?g:i.username):d("PolarisLoggedOutUpsellStrings").getSeeMoreFrom(a);f=i!=null&&f?(f=i.profilePicUrl)!=null?f:h:h;var j;e[0]!==b||e[1]!==g||e[2]!==f?(j={body:b,header:g,sharerProfilePictureUrl:f},e[0]=b,e[1]=g,e[2]=f,e[3]=j):j=e[3];b=j;g=b.body;f=b.header;j=b.sharerProfilePictureUrl;b=j!=null?j:h;h=(j=i==null?void 0:i.username)!=null?j:a;e[4]!==b||e[5]!==h?(i=n.jsx(c("IGDSBox.react"),{height:104,justifyContent:"center",marginBottom:4,marginTop:8,shape:"circle",width:104,xstyle:Z.container,children:n.jsx(c("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:b,size:96,username:h})}),e[4]=b,e[5]=h,e[6]=i):i=e[6];e[7]!==f?(j=n.jsx(c("IGDSBox.react"),{marginBottom:5,width:"100%",children:n.jsx(c("IGDSText.react"),{color:"primaryText",size:"title",textAlign:"center",weight:"semibold",children:f})}),e[7]=f,e[8]=j):j=e[8];e[9]!==g?(a=n.jsx(c("IGDSBox.react"),{paddingX:10,children:n.jsx(d("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:g})}),e[9]=g,e[10]=a):a=e[10];e[11]!==i||e[12]!==j||e[13]!==a?(b=n.jsxs(c("IGDSBox.react"),{alignItems:"center",marginBottom:4,children:[i,j,a]}),e[11]=i,e[12]=j,e[13]=a,e[14]=b):b=e[14];return b}function ba(a){return a.upsell}function ca(a){var b=d("react-compiler-runtime").c(3),e=a.pageID;a=a.showNetzDGReportLink;if(a!==!0||!d("PolarisConfig").isLoggedOutFRXEligible())return null;a=(a=d("InstagramQueryParamsHelper").getQueryParams(window.location.search))==null?void 0:a.next;a=a!=null?""+window.location.origin+a:e==="StoriesPage"?window.location.href:null;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=d("PolarisUA").isMobile()&&n.jsx(c("IGDSBox.react"),{marginBottom:6,position:"relative",children:n.jsx(c("IGDSDivider.react"),{})}),b[0]=e):e=b[0];b[1]!==a?(e=n.jsxs(c("IGDSBox.react"),{marginEnd:d("PolarisUA").isMobile()?1:0,marginStart:d("PolarisUA").isMobile()?1:0,paddingX:d("PolarisUA").isMobile()?12:8,paddingY:d("PolarisUA").isMobile()?8:4,position:"relative",children:[e,n.jsx(c("PolarisLoggedOutNetzDGReportLink.react"),{reportedUrlOrContentId:a,textSize:"footnote"})]}),b[1]=a,b[2]=e):e=b[2];return e}function da(){var a=d("react-compiler-runtime").c(3),b=d("CometRouteParams").useCometRefinedRouteParams(d("XPolarisLoginControllerParamsRefineValidator").refineXPolarisLoginControllerParams);b=b==null?void 0:b.logged_out_reporting_url;if(b==null)return null;var e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=d("PolarisUA").isMobile()&&n.jsx(c("IGDSBox.react"),{marginBottom:6,position:"relative",width:"100%",children:n.jsx(c("IGDSDivider.react"),{})}),a[0]=e):e=a[0];a[1]!==b?(e=n.jsxs(c("IGDSBox.react"),{marginEnd:d("PolarisUA").isMobile()?1:0,marginStart:d("PolarisUA").isMobile()?1:0,paddingX:d("PolarisUA").isMobile()?12:8,paddingY:d("PolarisUA").isMobile()?8:4,position:"relative",children:[e,n.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",textAlign:"center",children:n.jsx(c("PolarisExternalLink.react"),{href:b,children:p})})]}),a[1]=b,a[2]=e):e=a[2];return e}var $={oneTap:{color:"x1roi4f4",$$css:!0},root:{color:"x5n08af",fontSize:"x1f6kntn",marginTop:"xcxhlts",marginInlineEnd:"xjx09e3",marginBottom:"x1fqp7bg",marginInlineStart:"xx6jrq6",textAlign:"x2b8uid",$$css:!0}};function ea(a){var b=d("react-compiler-runtime").c(18),e=a.authType,f=a.forceLoginIgId,g=a.fromLoggedOutDialog,h=a.hideAppUpsells,i=a.hideBorder,j=a.pageId,l=a.pageType;a=a.style;var m=d("PolarisReactRedux.react").useSelector(ga),o=m.auth;m=m.navigation;o=o.isFBLoggedIn;m=m.isAccountSwitcherOpen;var p=G(),q=w(e),r=z(),s=f!=null,t=(f=r==null?void 0:r.linkedIGProfiles)!=null?f:[],u=(e===d("PolarisAuthActionConstants").AUTH.fbLogin||e===d("PolarisAuthActionConstants").AUTH.fbAccountPicker)&&o===!0&&!!r;f=function(){var a=t.length>1;a=!s&&u&&a;return!p&&d("PolarisUA").isDesktop()&&!d("PolarisQueryParams").hasForceAuthenticationParam()&&(!(e===d("PolarisAuthActionConstants").AUTH.fbLogin&&!d("PolarisOneTapLogin").isOneTapLoginEligible())||a)&&!q};if(!f()||m)return null;o=fa;r=!(h==null||h)&&!d("PolarisStrategicWebTraffic").isStrategicTraffic();b[0]!==i||b[1]!==a?(f={0:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf"},2:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf x7r02ix"},1:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd"},3:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf x7r02ix x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd"}}[!!(a==="modal")<<1|!!(i===!0)<<0],b[0]=i,b[1]=a,b[2]=f):f=b[2];m=e===d("PolarisAuthActionConstants").AUTH.oneTapLogin&&$.oneTap;b[3]!==m?(h=(k||(k=c("stylex")))($.root,m),b[3]=m,b[4]=h):h=b[4];i=l!=null?l:void 0;b[5]!==g||b[6]!==h||b[7]!==i?(a=n.jsx(c("PolarisAuthTypeSwitcher.react"),{className:h,fromLoggedOutDialog:g,onNavigate:o,pageType:i,primary:!0}),b[5]=g,b[6]=h,b[7]=i,b[8]=a):a=b[8];b[9]!==f||b[10]!==a?(m=n.jsx("div",babelHelpers["extends"]({},f,{children:a})),b[9]=f,b[10]=a,b[11]=m):m=b[11];b[12]!==r||b[13]!==j?(l=r?n.jsx(c("PolarisAppsellUnit.react"),{appInstallCampaign:j,ctaTypeV2:"auth_form"}):null,b[12]=r,b[13]=j,b[14]=l):l=b[14];b[15]!==m||b[16]!==l?(o=n.jsxs(n.Fragment,{children:[m,l]}),b[15]=m,b[16]=l,b[17]=o):o=b[17];return o}function fa(a){c("PolarisLoginQPL").isActive()&&a==="signup"&&c("PolarisLoginQPL").endCancelNavigateToSignup()}function ga(a){return a}g["default"]=a}),226);/*FB_PKG_DELIM*/
__d("ACSCipherSuiteModule",[],(function(a,b,c,d,e,f){"use strict";b={hash:"SHA-512",name:"HMAC"};c={curveName:"RISTRETTO",macAlgorithm:b,value:1};var g=new Map([[c.value,c]]);function a(a){return g.has(a)?g.get(a):null}f.VOPRF_RISTRETTO_HMACSHA512=c;f.getACSCipherSuiteByValue=a}),66);
__d("ACSTokenHmacUtil",["XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return h(a,b).then(function(a){return j(a,c)})}function h(a,b){return d("XPlatReactCrypto").subtleImportKey("raw",b,a,!1,["sign"]).then(function(b){return{algo:a,key:b}})}function i(a){return typeof a.hash==="string"?a.hash:a.hash.name}function j(a,b){var c=a.algo;a=a.key;c={hash:i(c),name:"HMAC"};return d("XPlatReactCrypto").subtleSign(c,a,b).then(function(a){return new Uint8Array(a)})}g.hmac=a}),98);
__d("LSCryptoUtils",["FBLogger","XPlatReactTextDecoder","XPlatReactTextEncoder"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new Uint8Array(a)}function h(a){var b=new(d("XPlatReactTextEncoder").TextEncoder)();return b.encode(a)}function i(a){var b=new(d("XPlatReactTextDecoder").TextDecoder)();return b.decode(a)}function b(a){return i(new Uint8Array(a))}function e(a){return h(a).buffer}function f(a,b){var d=a.byteLength,e=b.byteLength;if(d!==e)throw c("FBLogger")("messenger_web").mustfixThrow("[LS] Mismatched lengths for modAdd, %d != %d",d,e);var f=new Uint8Array(d);new Uint8Array(d).reduceRight(function(c,d,e){d=a[e];var g=b[e];d=d+g+c;g=d>255?[d-256,1]:[d,0];f[e]=g[0];return g[1]},0);return f}g.bufToUint8=a;g.strToUint8=h;g.uint8ToStr=i;g.bufToStr=b;g.strToBuf=e;g.modAddBytes=f}),98);
__d("LSMaxInt32",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("I64")).of_int32(2147483647);g["default"]=a}),98);
__d("WACryptoHkdfSync",["WABinary","WACryptoSha256HmacBuilder","err"],(function(a,b,c,d,e,f,g){"use strict";var h=32,i=new Uint8Array(h),j=255*h;function k(a,b){return new(d("WACryptoSha256HmacBuilder").Sha256HMacBuilder)(b!=null?b:i).update(a).finish()}function l(a,b,e){e===void 0&&(e=new Uint8Array(0));if(b<0||b>j)throw c("err")("HKDF::expand given bad length "+b);var f=Math.ceil(b/h),g=new Uint8Array(0),i=new(d("WABinary").Binary)();for(var k=1;k<=f;k++)g=new(d("WACryptoSha256HmacBuilder").Sha256HMacBuilder)(a).update(d("WABinary").Binary.build(g,e,k).readByteArrayView()).finish(),i.writeByteArray(g);return i.readByteArrayView(b)}function a(a,b,c,d){return l(k(a,b),d,c)}g.hkdf=a}),98);
__d("CreateDerivedKeys",["CryptoLogger","I64","LSCryptoUtils","LSMaxInt32","LSSynchronousPromise","LSVec","Promise","RetUtil","WACryptoHkdfSync","XPlatReactCrypto","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,f,g){var j=d("CryptoLogger").CryptoLogger("create_derived_keys");if(g.length<1||g.some(function(a){return(i||(i=d("I64"))).gt(a,c("LSMaxInt32"))})){j.mustfix("Invalid key lengths for derive keys");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(void 0))}var k=g.map((i||(i=d("I64"))).to_int32),l=g.map(i.to_int32).reduce(function(a,b){return a+b},0),m=function(a){var b=[],e=0;for(var f=0,g=k.length;f<g;++f){var h=e+k[f];b.push(a.slice(e,h).buffer);e=h}return d("RetUtil").getNullableRetResult(c("LSVec").ofArray(b))};if(c("gkx")("13860"))try{g=d("WACryptoHkdfSync").hkdf(d("LSCryptoUtils").bufToUint8(f),d("LSCryptoUtils").bufToUint8(e!=null?e:new Uint8Array(10).buffer),d("LSCryptoUtils").bufToUint8(a),l);return d("LSSynchronousPromise").makeSynchronousPromise(m(g))}catch(a){d("CryptoLogger").captureError(j,a).mustfix("hkdf failed at LSCreateDerivedKeys.nop");return d("LSSynchronousPromise").makeSynchronousPromise(d("RetUtil").getNullableRetResult())}return d("XPlatReactCrypto").subtleImportKey("raw",f,"HKDF",!1,["deriveBits"]).then(function(b){return d("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:a,name:"HKDF",salt:e!=null?e:new Uint8Array(10).buffer},b,l*8)}).then(function(a){a=new Uint8Array(a);return m(a)})["catch"](function(a){j.catching(a).mustfix("Failed to create derived keys");return d("RetUtil").getNullableRetResult()})}g.CreateDerivedKeys=a}),98);
__d("EncryptedBackupsSymmetricEncryptionUtils",[],(function(a,b,c,d,e,f){"use strict";a=16;b=28;c=16;d=128;f.hChaCha20SubKeyNonceLengthInBytes=a;f.totalNonceLengthInBytes=b;f.aesGcmTagLengthInBytes=c;f.aesGcmTagLength=d}),66);
__d("GetBlobFromInt64BE",["I64","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var e=new Uint8Array(8);e.reduceRight(function(a,b,c){b=(i||(i=d("I64"))).to_int32(i.mod_(a,i.of_string("256")));e[c]=b;return i.div(a,i.of_string("256"))},a);return(h||(h=b("Promise"))).resolve(c("LSResult")(e.buffer))}g.GetBlobFromInt64BE=a}),98);
__d("HChaCha20",["err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}a.fromHexString=function(a){var b=a.match(/[A-Fa-f0-9]{1,2}/g);if(a.length===0||a.length%2!==0||b==null)throw c("err")('The string "'+a+'" is not valid hex.');return new Uint8Array(b.map(function(a){return parseInt(a,16)}))};a.bufferToUint32Array=function(a){var b=new DataView(a),c=[];a=a.byteLength/4;for(var d=0;d<a;d++)c.push(new DataView(b.buffer.slice(d*4,d*4+4)).getInt32(0));return Uint32Array.from(c)};a.rotate=function(a,b){a=a&4294967295;b=b&31;return(a<<b|a>>>32-b)>>>0};a.quarterRound=function(b,c,d,e){b=b;c=c;d=d;e=e;b=b+c&4294967295;e=a.rotate(e^b,16);d=d+e&4294967295;c=a.rotate(c^d,12);b=b+c&4294967295;e=a.rotate(e^b,8);d=d+e&4294967295;c=a.rotate(c^d,7);return[b>>>0,c>>>0,d>>>0,e>>>0]};var b=a.prototype;b.createHCtx=function(b,d){var e=new Uint32Array(16),f=a.fromHexString("657870616e642033322d62797465206b");if(f.byteLength!==16)throw c("err")("Could not create context. Invalid constant buffer length of "+f.byteLength+". Expected a length of 16");else if(b.byteLength!==32)throw c("err")("Could not create context. Invalid key buffer length of "+b.byteLength+". Expected a length of 32");else if(d.byteLength!==16)throw c("err")("Could not create context. Invalid nonce buffer length of "+d.byteLength+". Expected a length of 16");f=a.bufferToUint32Array(f.buffer);b=a.bufferToUint32Array(b);d=a.bufferToUint32Array(d);e.set(f);e.set(b,f.length);e.set(d,f.length+b.length);return e.buffer};b.hChaCha20Bytes=function(b,c){c=new DataView(this.createHCtx(c,b));b=c.getInt32(0);var d=c.getInt32(1<<2),e=c.getInt32(2<<2),f=c.getInt32(3<<2),g=c.getInt32(4<<2),h=c.getInt32(5<<2),i=c.getInt32(6<<2),j=c.getInt32(7<<2),k=c.getInt32(8<<2),l=c.getInt32(9<<2),m=c.getInt32(10<<2),n=c.getInt32(11<<2),o=c.getInt32(12<<2),p=c.getInt32(13<<2),q=c.getInt32(14<<2);c=c.getInt32(15<<2);for(var r=0;r<10;r++){var s=a.quarterRound(b,g,k,o);b=s[0];g=s[1];k=s[2];o=s[3];s=a.quarterRound(d,h,l,p);d=s[0];h=s[1];l=s[2];p=s[3];s=a.quarterRound(e,i,m,q);e=s[0];i=s[1];m=s[2];q=s[3];s=a.quarterRound(f,j,n,c);f=s[0];j=s[1];n=s[2];c=s[3];s=a.quarterRound(b,h,m,c);b=s[0];h=s[1];m=s[2];c=s[3];s=a.quarterRound(d,i,n,o);d=s[0];i=s[1];n=s[2];o=s[3];s=a.quarterRound(e,j,k,p);e=s[0];j=s[1];k=s[2];p=s[3];s=a.quarterRound(f,g,l,q);f=s[0];g=s[1];l=s[2];q=s[3]}return Uint32Array.from([b,d,e,f,o,p,q,c]).buffer};return a}();g.HChaCha20=a}),98);
__d("PakeCpaceUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.buffer.slice(a.byteOffset,a.byteLength+a.byteOffset)}function b(a,b){var c=new a.VectorInt();b.forEach(function(a){c.push_back(a)});return c}f.typedArrayToBuffer=a;f.uint8ArrayToVectorInt=b}),66);
__d("Hmac_v2",["CryptoLogger","LSResult","PakeCpaceUtils","Promise","WACryptoSha256HmacBuilder"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e){try{a=new(d("WACryptoSha256HmacBuilder").Sha256HMacBuilder)(new Uint8Array(a)).update(new Uint8Array(e)).finish();return(h||(h=b("Promise"))).resolve(c("LSResult")(d("PakeCpaceUtils").typedArrayToBuffer(a)))}catch(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("hmac_v2"),a).mustfix("Crypto signing failed: data length: %s, was_timeout: %s",e==null?void 0:e.byteLength,!1);throw a}};g["default"]=a}),98);
__d("LSACSExperimentCapability",[],(function(a,b,c,d,e,f){a=Object.freeze({RETRY_AFTER_TASK_SERIALIZATION_FAILURE_EXPONENTIAL_BACKOFF:0,BUMP_TOKEN_SYNC_TASK_AT_TASK_SERIALIZATION:1,INSERT_PENDING_TASK_PARENT_ROW_WHEN_NO_ACS_TOKENS_AT_TASK_INSERTION:2});f["default"]=a}),66);
__d("LSBeginHandlingFireForgetTasksForQueue",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return c[0]=b.createArray(),b.forEach(b.filter(b.db.table(5).fetch(),function(b){return b.queueName===a[0]}),function(a){a=a.item;return c[3]=new b.Map(),c[3].set("label",a.context),c[3].set("payload",a.taskValue),c[3].set("queue_name",a.queueName),c[3].set("task_id",a.taskId),c[3].set("failure_count",b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))?void 0:b.i64.cast([0,0])),c[4]=(c[0].push(c[3]),c[0])})},function(e){return c[1]=new b.Map(),c[1].set("tasks",c[0]),c[1].set("epoch_id",void 0),c[2]=new b.Map(),c[2].set("queue_name",a[0]),c[2].set("next_sync_ms",void 0),c[2].set("work_item_type",b.i64.cast([0,5])),c[2].set("network_payload",c[1]),c[2].set("http_url_override",void 0),c[2].set("skip_realtime_gateway",!1),d[0]=c[2]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreBeginHandlingFireForgetTasksForQueueStoredProcedure";a.__tables__=["pending_fire_and_forget_tasks"];e.exports=a}),null);
__d("LSBeginHandlingFireForgetTasksForQueueStoredProcedure",["LSBeginHandlingFireForgetTasksForQueue","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSBeginHandlingFireForgetTasksForQueue"),e.queueName);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSForceTaskExecutionImmediately",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.db.table(2).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?0:(e=d.item,c[1]=b.i64.of_float(Date.now()),b.i64.lt(c[1],e.minTimeToSyncTimestampMs)?b.forEach(b.db.table(2).fetch([[[a[0]]]]),function(a){var c=a.update;a=a.item;return c({minTimeToSyncTimestampMs:b.i64.cast([0,0]),failureCount:b.i64.add(a.failureCount,b.i64.cast([0,1]))})}):b.resolve())})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreForceTaskExecutionImmediatelyStoredProcedure";a.__tables__=["pending_tasks"];e.exports=a}),null);
__d("LSRemoveUsedTokens",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.filter(b.db.table(309).fetch(),function(a){return b.i64.le(a.redeemLimit,b.i64.cast([0,0]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSAnonymousCredentialsRemoveUsedTokensStoredProcedure";a.__tables__=["secure_acs_tokens"];e.exports=a}),null);
__d("LSGetCurrentTokenPoolState",["LSArrayGetObjectAt","LSRemoveBlindedTokens","LSRemoveUsedTokens"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),d[1]=c.createArray(),c.count(c.filter(c.db.table(307).fetch(),function(b){return b.projectName===a[0]})).then(function(a){return d[2]=a})},function(b){return c.forEach(c.filter(c.db.table(307).fetch(),function(b){return b.projectName===a[0]}),function(a){a=a.item;return d[7]=a.configId,c.i64.gt(d[0],a.expirationTimestampMs)?c.forEach(c.db.table(307).fetch([[[d[7]]]]),function(a){return a["delete"]()}):c.resolve(d[8]=(d[1].push(d[7]),d[1]))})},function(a){return c.storedProcedure(b("LSRemoveUsedTokens"))},function(a){return d[3]=c.i64.cast([0,0]),d[4]=c.i64.of_int32(d[1].length),c.i64.gt(d[4],c.i64.cast([0,0]))?c.loopAsync(d[4],function(a){return d[7]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[1],d[7]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],a})},function(a){return c.count(c.filter(c.db.table(309).fetch(),function(a){return a.configId===d[8]})).then(function(a){return d[10]=a})},function(a){return d[3]=c.i64.add(d[10],d[3]),c.storedProcedure(b("LSRemoveBlindedTokens"),d[8])}])}):c.resolve()},function(a){return c.i64.gt(d[2],c.i64.cast([0,0]))?(d[7]=c.i64.of_int32(d[1].length),d[5]=c.i64.ge(d[7],c.i64.cast([0,1]))):d[5]=void 0,d[5]!==void 0?(d[5]?(c.i64.gt(d[3],c.i64.cast([0,0]))?d[8]=c.i64.cast([0,3]):d[8]=c.i64.cast([0,2]),d[7]=d[8]):d[7]=c.i64.cast([0,1]),d[6]=d[7]):d[6]=c.i64.cast([0,0]),a=[d[6],d[3]],e[0]=a[0],e[1]=a[1]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsGetCurrentTokenPoolStateStoredProcedure";a.__tables__=["secure_acs_configurations","secure_acs_tokens"];e.exports=a}),null);
__d("LSVoprfBlind.nop",["XPlatReactVoprf","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield d("XPlatReactVoprf").loadXPlatReactVoprf());b=a.voprfInstance;a=b.voprfInfo;var e=b.voprfWasm;try{e=e.blind(a,new Uint8Array(c));return[e.blindedElement.buffer,e.blindingFactor.buffer]}catch(a){throw a}finally{d("XPlatReactVoprf").freeVoprfInstance(b)}});function c(b,c,d){return a.apply(this,arguments)}return c}();a.__nop_name__="LSVoprfBlind";g["default"]=a}),98);
__d("LSVoprfCreateNonce.nop",["LSSynchronousPromise","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h=32;a=function(a,b){a=h;b=new Uint8Array(a);d("XPlatReactCrypto").getRandomValues(b);return d("LSSynchronousPromise").makeSynchronousPromise([b.buffer])};a.__nop_name__="LSVoprfCreateNonce";g["default"]=a}),98);
__d("LSTaskSerializerAcsIssueNextSync",["LSBase64Encode.nop","LSGetCurrentTokenPoolState","LSIssueNextSync","LSVoprfBlind.nop","LSVoprfCreateNonce.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.db.table(310).fetch([[[a[0]]]]).next().then(function(a,e){var f=a.done;a=a.value;return f?(function(a){c.logger(a).mustfix(a)}("Request context for the passed task_id was not found"),f=[void 0,void 0,void 0],d[0]=f[0],d[1]=f[1],d[2]=f[2]):(e=a.item,c.sequence([function(a){return d[9]=e.projectName,d[10]=e.maxClientTokenPoolSize,c.storedProcedure(b("LSGetCurrentTokenPoolState"),d[9]).then(function(a){return a=a,d[4]=a[0],d[5]=a[1],a})},function(a){return c.i64.eq(d[4],c.i64.cast([0,0]))||c.i64.eq(d[4],c.i64.cast([0,1]))?c.resolve((d[11]=new c.Map(),d[11].set("project_name",d[9]),d[12]=c.toJSON(d[11]),a=[d[12],c.i64.cast([0,351]),void 0],d[6]=a[0],d[7]=a[1],d[8]=a[2])):c.sequence([function(a){return d[11]=c.i64.of_float(Date.now()),c.islc(c.sortBy(c.filter(c.db.table(307).fetch(),function(a){return a.projectName===d[9]&&c.i64.gt(a.expirationTimestampMs,d[11])}),[["expirationTimestampMs","DESC"]]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,f){var a=e.done;e=e.value;return a?(function(a){c.logger(a).mustfix(a)}("A config for the passed project name was not found"),d[16]=new c.Map(),d[16].set("project_name",d[9]),d[16].set("max_client_token_pool_size",d[10]),d[17]=c.toJSON(d[16]),a=[d[17],c.i64.cast([0,362]),void 0],d[12]=a[0],d[13]=a[1],d[14]=a[2]):(f=e.item,c.sequence([function(a){return d[24]=f.configId,d[16]=f.maxEvals,d[26]=f.tokenPollFrequencyMs,d[25]=f.maxClientTokenPoolSize,d[17]=c.i64.sub(d[10],d[5]),d[23]=c.i64.lt(d[16],d[17])?d[16]:d[17],d[18]=c.createArray(),c.i64.gt(d[23],c.i64.cast([0,0]))?c.loopAsync(d[23],function(a){return d[27]=a,c.sequence([function(a){return c.nativeOperation(b("LSVoprfCreateNonce.nop")).then(function(a){return a=a,d[28]=a[0],a})},function(a){return c.blobs.neq(d[28],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSVoprfBlind.nop"),d[28]).then(function(a){return a=a,d[29]=a[0],d[30]=a[1],a})},function(a){return c.blobs.neq(d[29],void 0)?c.blobs.neq(d[30],void 0)?c.sequence([function(a){return d[31]=c.i64.cast([-1,4294967295]),c.db.table(308).peekNextAutoIncrementId().then(function(a){return d[31]=a})},function(a){return c.db.table(308).add({tokenId:void 0,blindedNonce:d[29],blindingFactor:d[30],nonce:d[28],configId:d[24]})},function(a){return c.db.table(308).fetch([[[d[31]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[32]=c.i64.cast([-1,4294967295]):(e=b.item,d[32]=e.tokenId)})},function(a){return c.i64.eq(d[32],c.i64.cast([-1,4294967295]))?c.sequence([function(a){return c.islc(c.db.table(308).fetchDesc([[[{gt:c.i64.cast([0,0])}]]]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(b,e){var a=b.done;b=b.value;return a?d[37]=c.i64.cast([-1,4294967295]):(e=b.item,d[37]=e.tokenId)})},function(a){return d[34]=d[37]}]):c.resolve(d[34]=d[32])},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[29]).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[36]=new c.Map(),d[36].set("id",d[34]),d[36].set("data",d[35]==null?"":d[35]),d[37]=(d[18].push(d[36]),d[18])}]):c.resolve():c.resolve()}]):c.resolve()}])}):c.resolve()},function(a){return d[19]=c.i64.of_int32(d[18].length),c.i64.gt(d[19],c.i64.cast([0,0]))?c.resolve((d[27]=new c.Map(),d[27].set("project_name",d[9]),d[27].set("config_id",d[24]),d[27].set("blinded_nonces",d[18]),d[28]=c.toJSON(d[27]),a=[d[28],c.i64.cast([0,354]),void 0],d[20]=a[0],d[21]=a[1],d[22]=a[2])):c.sequence([function(a){return c.i64.neq(d[26],void 0)?c.sequence([function(a){return c.i64.neq(d[25],void 0)?c.sequence([function(a){return function(a){c.logger(a).info(a)}(["Already have the max number of tokens. Scheduling next ACS token sync locally for project: ",d[9]].join("")),c.storedProcedure(b("LSIssueNextSync"),d[25],d[9],d[26],!1)},function(a){return a=[void 0,void 0,void 0],d[30]=a[0],d[31]=a[1],d[32]=a[2],a}]):c.resolve((function(a){c.logger(a).info(a)}(["token_poll_frequency is nonnull but max_client_token_pool_size is null. Already have the max number of tokens. Scheduling the next ACS token sync for project: ",d[9]].join("")),d[33]=new c.Map(),d[33].set("project_name",d[9]),d[33].set("max_client_token_pool_size",d[10]),d[34]=c.toJSON(d[33]),a=[d[34],c.i64.cast([0,362]),void 0],d[30]=a[0],d[31]=a[1],d[32]=a[2]))},function(a){return a=[d[30],d[31],d[32]],d[27]=a[0],d[28]=a[1],d[29]=a[2],a}]):c.resolve((function(a){c.logger(a).info(a)}(["Already have the max number of tokens. Scheduling the next ACS token sync for project: ",d[9]].join("")),d[30]=new c.Map(),d[30].set("project_name",d[9]),d[30].set("max_client_token_pool_size",d[10]),d[31]=c.toJSON(d[30]),a=[d[31],c.i64.cast([0,362]),void 0],d[27]=a[0],d[28]=a[1],d[29]=a[2]))},function(a){return a=[d[27],d[28],d[29]],d[20]=a[0],d[21]=a[1],d[22]=a[2],a}])},function(a){return a=[d[20],d[21],d[22]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]))})},function(a){return a=[d[12],d[13],d[14]],d[6]=a[0],d[7]=a[1],d[8]=a[2],a}])},function(a){return a=[d[6],d[7],d[8]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}]))})},function(a){return a=[d[0],d[1],d[2]],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsTaskSerializerAcsIssueNextSyncStoredProcedure";a.__tables__=["acs_request_context","secure_acs_configurations","secure_acs_blinded_tokens"];e.exports=a}),null);
__d("LSTaskSerializerDeleteChatHistory",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(32).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("taskSerializerDeleteChatHistory: Task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2]):(e=d.item,b.sequence([function(a){return c[8]=e.threadKey,b.db.table(9).fetch([[[c[8]]]]).next().then(function(a,d){d=a.done;a=a.value;return d?(c[9]=b.createArray(),c[10]=(c[9].push("taskSerializerDeleteChatHistory: Thread not found"),c[9]),c[11]=(c[9].push(c[8]),c[9]),c[12]=b.toJSON(c[9]),function(a){b.logger(a).mustfix(a)}(c[12]),d=[void 0,void 0,void 0],c[4]=d[0],c[5]=d[1],c[6]=d[2]):(a.item,b.sequence([function(a){return b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[9]=b.i64.cast([0,1]):(e=d.item,c[14]=e.syncGroup,b.i64.neq(c[14],void 0)?c[13]=c[14]:c[13]=b.i64.cast([0,1]),c[9]=c[13])})},function(a){return c[11]=new b.Map(),c[11].set("thread_key",c[8]),c[11].set("sync_group",c[9]),c[12]=b.toJSON(c[11]),a=[c[12],b.i64.cast([0,903]),void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2]}]))})},function(a){return a=[c[4],c[5],c[6]],c[0]=a[0],c[1]=a[1],c[2]=a[2],a}]))})},function(a){return a=[c[0],c[1],c[2]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxTaskSerializerDeleteChatHistoryStoredProcedure";a.__tables__=["threads_optimistic_context","threads"];e.exports=a}),null);
__d("LSTaskSerializerE2eeMessageIntegrityCheckV2",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,c.i64.cast([0,705]),void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],c.resolve(d)}a.__sproc_name__="LSEncryptedBackupsTaskSerializerE2eeMessageIntegrityCheckV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTaskSerializerE2eeMetadataThreadIntegrityCheck",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,c.i64.cast([0,700]),void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],c.resolve(d)}a.__sproc_name__="LSE2EEMessagingMetadataMailboxTaskSerializerE2eeMetadataThreadIntegrityCheckStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupAction",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,c.i64.cast([0,319]),void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],c.resolve(d)}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupActionStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsLoopingUpload",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(a){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsLoopingUpload] Beginning execution."),d[1]=c.i64.of_float(Date.now()),function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure] LSEncryptedBackupsLoopingUploadPayloadsTable table not found"),d[3]="LSEncryptedBackupsLoopingUploadPayloadsTable table not found",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure] ","",d[3]].join("")),d[2]=c.createArray(),void 0!==void 0?d[10]=(d[2].push(void 0),d[2]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure",d[3],d[2],c.i64.cast([0,3]))},function(a){return d[4]=c.i64.of_float(Date.now()),d[5]=c.i64.random(),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[4],d[0])),d[9]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsLoopingUpload] ",d[6],d[7],d[6],d[8],d[6],d[9]].join("")),c.i64.eq(c.i64.mod_(d[5],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[10]=",",d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsLoopingUpload",[d[7],d[10],d[8],d[10],d[9]].join(""),d[11],c.i64.cast([0,4]))):c.resolve()},function(a){return a=['{"request_id":"unknown","upload_type":"FBN","payload":{"error_code":2,"operation":"","error_message":"","__typename":"MPSUploadFailurePayload"}}',c.i64.cast([0,50043]),void 0],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSGetBlobFromString.nop",["CryptoLogger","LSResult","LSSynchronousPromise","XPlatReactTextEncoder"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,e){a=new(d("XPlatReactTextEncoder").TextEncoder)();try{b=a.encode(e).buffer;return d("LSSynchronousPromise").makeSynchronousPromise(c("LSResult")(b))}catch(b){a=d("CryptoLogger").CryptoLogger("get_blob_from_string");a.catching(b).mustfix(b.message?b.message:"Error in get blob from string.");throw b}};a.__nop_name__="LSGetBlobFromString";g["default"]=a}),98);
__d("LSQueryLocalPersistenceStoreForBackup.nop",["Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){c=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableDescending(a.local_message_persistence_store).filter(function(a){var b=a.offlineThreadingId;a=a.threadId;return a===e&&f===b})));if(c.length===0)return(h||(h=b("Promise"))).resolve([void 0,void 0,!1]);a=c[0];return(h||(h=b("Promise"))).resolve([a.messagePayload,a.messageTimestampMs,!1])});function c(b,c,d,e){return a.apply(this,arguments)}return c}();a.__nop_name__="LSQueryLocalPersistenceStoreForBackup";g["default"]=a}),98);
__d("LSQueryLocalPersistenceStoreSupplementalForBackup.nop",["Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g){c=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.local_message_persistence_store_supplemental).filter(function(a){var b=a.supplementalKey,c=a.threadId;a=a.toplevelOfflineThreadingId;return c===e&&a===f&&b===g})));return c==null?(h||(h=b("Promise"))).resolve([void 0,void 0]):(h||(h=b("Promise"))).resolve([c.messagePayload,c.messageTimestampMs])});function c(b,c,d,e,f){return a.apply(this,arguments)}return c}();a.__nop_name__="LSQueryLocalPersistenceStoreSupplementalForBackup";g["default"]=a}),98);
__d("LSQueryLocalPersistenceStoreTagsForBackup.nop",["LSVec","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=":";a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){e=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.local_message_persistence_store_tag_index.index("offlineThreadingId")).getKeyRange(g,f)));if(e==null)return(h||(h=b("Promise"))).resolve([c("LSVec").ofArray([])]);a=e.tag;return(h||(h=b("Promise"))).resolve([c("LSVec").ofArray(a.split(i))])});function e(b,c,d,e){return a.apply(this,arguments)}return e}();a.__nop_name__="LSQueryLocalPersistenceStoreTagsForBackup";g["default"]=a}),98);
__d("LSLoadUnencryptedProtobufWithInputs",["LSBase64Encode.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSQueryLocalPersistenceStoreForBackup.nop","LSQueryLocalPersistenceStoreSupplementalForBackup.nop","LSQueryLocalPersistenceStoreTagsForBackup.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadUnencryptedProtobufWithInputs] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.i64.eq(a[0],c.i64.cast([0,1]))?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[10]=a[0],d[11]=a[1],d[12]=a[2],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[13]=a[0],a})},function(e){return c.blobs.neq(d[10],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[10]).then(function(a){return a=a,d[16]=a[0],a})},function(b){return d[16]!==void 0?(d[13]!==void 0?(d[21]=new c.Map(),d[21].set("message_tags",d[13]),d[22]=c.toJSON(d[21]),d[19]=d[22]):d[19]=void 0,d[20]=new c.Map(),d[20].set("backup_action",a[0]),d[20].set("protobuf_encrypted",d[16]),d[20].set("supplemental_data_encrypted",void 0),d[20].set("timestamp_ms",a[4]),d[20].set("message_tags",d[19]),b=[d[20],void 0],d[17]=b[0],d[18]=b[1]):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_FORMATTING_FAILED"),d[19]=new c.Map(),d[19].set("error_code",c.i64.cast([0,68])),d[19].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[19].set("error_message",""),b=[void 0,d[19]],d[17]=b[0],d[18]=b[1]),b=[d[17],d[18]],d[14]=b[0],d[15]=b[1]}]):c.resolve((d[12]?(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),d[18]=new c.Map(),d[18].set("error_code",c.i64.cast([0,70])),d[18].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[18].set("error_message",""),e=[void 0,d[18]],d[16]=e[0],d[17]=e[1]):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),d[18]=new c.Map(),d[18].set("error_code",c.i64.cast([0,63])),d[18].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[18].set("error_message",""),e=[void 0,d[18]],d[16]=e[0],d[17]=e[1]),e=[d[16],d[17]],d[14]=e[0],d[15]=e[1]))},function(a){return a=[d[14],d[15]],d[2]=a[0],d[3]=a[1],a}]):c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([0,2]))?c.sequence([function(e){return a[3]!==void 0?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreSupplementalForBackup.nop"),a[1],a[2],a[3]).then(function(a){return a=a,d[14]=a[0],d[15]=a[1],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[16]=a[0],a})},function(e){return c.blobs.neq(d[14],void 0)?c.sequence([function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[3]).then(function(a){return a=a,d[19]=a[0],a})},function(e){return c.blobs.neq(d[19],void 0)?c.sequence([function(a){return d[22]=new c.Map(),d[22].set("sk_ciphertext",d[19]),d[22].set("sk_hash",d[19]),c.nativeOperation(b("LSBase64Encode.nop"),d[14]).then(function(a){return a=a,d[23]=a[0],a})},function(b){return d[23]!==void 0?(d[16]!==void 0?(d[28]=new c.Map(),d[28].set("message_tags",d[16]),d[29]=c.toJSON(d[28]),d[26]=d[29]):d[26]=void 0,d[27]=new c.Map(),d[27].set("backup_action",a[0]),d[27].set("protobuf_encrypted",d[23]),d[27].set("supplemental_data_encrypted",d[22]),d[27].set("timestamp_ms",a[4]),d[27].set("message_tags",d[26]),b=[d[27],void 0],d[24]=b[0],d[25]=b[1]):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_FORMATTING_FAILED"),d[26]=new c.Map(),d[26].set("error_code",c.i64.cast([0,68])),d[26].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[26].set("error_message",""),b=[void 0,d[26]],d[24]=b[0],d[25]=b[1]),b=[d[24],d[25]],d[20]=b[0],d[21]=b[1]}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error SUPPLEMENTAL_FORMATTING_FAILED"),d[22]=new c.Map(),d[22].set("error_code",c.i64.cast([0,69])),d[22].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[22].set("error_message",""),e=[void 0,d[22]],d[20]=e[0],d[21]=e[1]))},function(a){return a=[d[20],d[21]],d[17]=a[0],d[18]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE"),d[19]=new c.Map(),d[19].set("error_code",c.i64.cast([0,64])),d[19].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[19].set("error_message",""),e=[void 0,d[19]],d[17]=e[0],d[18]=e[1]))},function(a){return a=[d[17],d[18]],d[12]=a[0],d[13]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),d[14]=new c.Map(),d[14].set("error_code",c.i64.cast([0,65])),d[14].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[14].set("error_message",""),e=[void 0,d[14]],d[12]=e[0],d[13]=e[1]))},function(a){return a=[d[12],d[13]],d[10]=a[0],d[11]=a[1],a}]):c.resolve((c.i64.eq(a[0],c.i64.cast([0,3]))?(d[14]=new c.Map(),d[14].set("backup_action",a[0]),d[14].set("protobuf_encrypted",void 0),d[14].set("supplemental_data_encrypted",void 0),d[14].set("timestamp_ms",a[4]),d[14].set("message_tags",void 0),e=[d[14],void 0],d[12]=e[0],d[13]=e[1]):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error INVALID_BACKUP_OPERATION"),d[14]=new c.Map(),d[14].set("error_code",c.i64.cast([-1,4294967289])),d[14].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[14].set("error_message",""),e=[void 0,d[14]],d[12]=e[0],d[13]=e[1]),e=[d[12],d[13]],d[10]=e[0],d[11]=e[1]))},function(a){return a=[d[10],d[11]],d[2]=a[0],d[3]=a[1],a}])},function(a){return d[4]=c.i64.of_float(Date.now()),d[5]=c.i64.random(),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[4],d[0])),d[9]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadUnencryptedProtobufWithInputs] ",d[6],d[7],d[6],d[8],d[6],d[9]].join("")),c.i64.eq(c.i64.mod_(d[5],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[10]=",",d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadUnencryptedProtobufWithInputs",[d[7],d[10],d[8],d[10],d[9]].join(""),d[11],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSLoadUnencryptedProtobufBackupSerializedPayloadData",["LSLoadUnencryptedProtobufWithInputs","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){var e;return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadUnencryptedProtobufBackupSerializedPayloadData] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[18]=c.i64.mul(d[1],c.i64.cast([0,1e6])),c.sequence([function(b){return c.db.table(2).fetch([[[a[0]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?(d[30]=c.i64.of_float(Date.now()),f=[a[0],void 0,void 0,void 0,void 0,c.i64.sub(c.i64.mul(d[30],c.i64.cast([0,1e6])),d[18]),void 0],d[22]=f[0],d[23]=f[1],d[24]=f[2],d[25]=f[3],d[26]=f[4],d[27]=f[5],d[28]=f[6]):(e=b.item,d[30]=c.i64.of_float(Date.now()),f=[a[0],e.queueName,e.enqueueTimestampMs,e.priority,e.firstExecutedTimestampMs,c.i64.sub(c.i64.mul(d[30],c.i64.cast([0,1e6])),d[18]),void 0],d[22]=f[0],d[23]=f[1],d[24]=f[2],d[25]=f[3],d[26]=f[4],d[27]=f[5],d[28]=f[6])})},function(a){return a=[d[22],d[23],d[24],d[25],d[26],d[27],d[28]],d[2]=a[0],d[3]=a[1],d[4]=a[2],d[5]=a[3],d[6]=a[4],d[7]=a[5],d[8]=a[6],a}])},function(e){return d[9]=new c.Map(),d[9].set("task_id",d[2]),d[9].set("queue_name",d[3]),d[9].set("enqueue_timestamp_ms",d[4]),d[9].set("priority",d[5]),d[9].set("first_executed_timestamp_ms",d[6]),d[9].set("execution_time_ns",d[7]),d[9].set("echo_encoding_execution_time_ns",d[8]),d[10]=new c.Map(),d[10].set("task_metadata",d[9]),d[10].set("action_type",void 0),d[10].set("content_type",void 0),d[10].set("identifiers",void 0),d[10].set("identifiers_v2",void 0),d[10].set("task_creation_source",void 0),d[10].set("message_payload_source",c.i64.cast([0,2])),c.filter(c.db.table(305).fetch(),function(b){return c.i64.eq(b.pendingBackupTaskId,a[0])}).next().then(function(e,f){var g=e.done;e=e.value;return g?(d[22]=new c.Map(),d[22].set("error_code",c.i64.cast([0,5])),d[22].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufBackupSerializedPayloadDataStoredProcedure"),d[22].set("error_message",""),g=[void 0,d[22],d[10]],d[11]=g[0],d[12]=g[1],d[13]=g[2]):(f=e.item,c.sequence([function(b){var e;return d[39]=f.actThreadId,d[40]=f.toplevelOfflineThreadingId,d[23]=f.messageTimestampMs,d[22]=new c.Map(),d[22].set("backup_id","openEbUploadGenericBackupId"),d[22].set("act_thread_id",d[39]),d[22].set("server_thread_id",d[39]),d[22].set("timestamp",c.i64.to_string(d[23])),d[22].set("otid",d[40]),d[24]=new c.Map(),d[24].set("backup_id","openEbUploadGenericBackupId"),d[24].set("act_thread_id",d[39]),d[24].set("timestamp",c.i64.to_string(d[23])),d[24].set("otid",d[40]),c.sequence([function(b){return c.db.table(2).fetch([[[a[0]]]]).next().then(function(e,f){var b=e.done;e=e.value;return b?(d[49]=c.i64.of_float(Date.now()),b=[a[0],void 0,void 0,void 0,void 0,c.i64.sub(c.i64.mul(d[49],c.i64.cast([0,1e6])),d[18]),void 0],d[41]=b[0],d[42]=b[1],d[43]=b[2],d[44]=b[3],d[45]=b[4],d[46]=b[5],d[47]=b[6]):(f=e.item,d[49]=c.i64.of_float(Date.now()),b=[a[0],f.queueName,f.enqueueTimestampMs,f.priority,f.firstExecutedTimestampMs,c.i64.sub(c.i64.mul(d[49],c.i64.cast([0,1e6])),d[18]),void 0],d[41]=b[0],d[42]=b[1],d[43]=b[2],d[44]=b[3],d[45]=b[4],d[46]=b[5],d[47]=b[6])})},function(a){return a=[d[41],d[42],d[43],d[44],d[45],d[46],d[47]],d[25]=a[0],d[26]=a[1],d[27]=a[2],d[28]=a[3],d[29]=a[4],d[30]=a[5],d[31]=a[6],a}])},function(a){return d[32]=new c.Map(),d[32].set("task_id",d[25]),d[32].set("queue_name",d[26]),d[32].set("enqueue_timestamp_ms",d[27]),d[32].set("priority",d[28]),d[32].set("first_executed_timestamp_ms",d[29]),d[32].set("execution_time_ns",d[30]),d[32].set("echo_encoding_execution_time_ns",d[31]),d[33]=new c.Map(),d[33].set("task_metadata",d[32]),d[33].set("action_type",void 0),d[33].set("content_type",void 0),d[33].set("identifiers",void 0),d[33].set("identifiers_v2",d[24]),d[33].set("task_creation_source",void 0),d[33].set("message_payload_source",c.i64.cast([0,2])),c.storedProcedure(b("LSLoadUnencryptedProtobufWithInputs"),f.backupAction,d[39],d[40],f.supplementalKey,d[23],d[22]).then(function(a){return a=a,d[34]=a[0],d[35]=a[1],a})},function(a){return d[34]!==void 0?(d[41]=new c.Map(),d[41].set("unencrypted_protobuf_backup_payload",d[34]),d[41].set("message_identifiers",d[22]),d[41].set("attachment_backup_payload",f.attachmentPayload),d[41].set("sender_id",f.senderId),d[41].set("extra_data_for_eb_upload",void 0),a=[d[41],void 0,d[33]],d[36]=a[0],d[37]=a[1],d[38]=a[2]):(a=[void 0,d[35],d[33]],d[36]=a[0],d[37]=a[1],d[38]=a[2],a),a=[d[36],d[37],d[38]],d[11]=a[0],d[12]=a[1],d[13]=a[2]}]))})},function(a){return d[15]=c.i64.of_float(Date.now()),d[16]=c.i64.random(),d[19]="Finishing execution. Execution time: ",d[20]=c.i64.to_string(c.i64.sub(d[15],d[0])),d[21]=" ms",d[17]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadUnencryptedProtobufBackupSerializedPayloadData] ",d[17],d[19],d[17],d[20],d[17],d[21]].join("")),c.i64.eq(c.i64.mod_(d[16],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[22]=",",d[23]=c.createArray(),void 0!==void 0?d[24]=(d[23].push(void 0),d[23]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadUnencryptedProtobufBackupSerializedPayloadData",[d[19],d[22],d[20],d[22],d[21]].join(""),d[23],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[11],d[12],d[13]],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsLoadUnencryptedProtobufBackupSerializedPayloadDataStoredProcedure";a.__tables__=["pending_tasks","pending_protobuf_backups_context"];e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsOpenUpload",["LSArrayGetObjectAt","LSBase64Encode.nop","LSDeserializeFromJsonIntoDictionaryV2.nop","LSLoadUnencryptedProtobufBackupSerializedPayloadData","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsOpenUpload] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSLoadUnencryptedProtobufBackupSerializedPayloadData"),a[0]).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],d[4]=a[2],a})},function(a){return d[2]!==void 0?c.sequence([function(a){return d[15]=d[2].get("message_identifiers"),d[16]=d[2].get("unencrypted_protobuf_backup_payload"),d[17]=d[15].get("server_thread_id"),d[18]=d[15].get("timestamp"),d[19]=d[15].get("otid"),d[20]=d[15].get("act_thread_id"),d[21]=new c.Map(),d[21].set("server_thread_key",d[17]),d[21].set("timestamp",d[18]),d[21].set("otid",d[19]),d[21].set("wa_thread_id",c.i64.from_string(d[20])),d[22]=new c.Map(),d[22].set("message_identifiers",d[21]),d[23]=d[2].get("extra_data_for_eb_upload"),d[23]!==void 0?c.sequence([function(a){return c.nativeOperation(b("LSDeserializeFromJsonIntoDictionaryV2.nop"),d[23]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=new c.Map(),d[34]=d[32].keys(),d[35]=c.i64.of_int32(d[34].length),c.i64.gt(d[35],c.i64.cast([0,0]))?c.loopAsync(d[35],function(a){return d[36]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[34],d[36]).then(function(a){return a=a,d[37]=a[0],d[38]=a[1],a})},function(a){return d[39]=d[32].get(d[37]),d[33].set(d[37],d[39])}])}):c.resolve()},function(a){return d[24]=d[33]}]):c.resolve(d[24]=void 0)},function(a){return d[24]!==void 0?c.sequence([function(a){return d[32]=d[24].get("mt"),d[32]?d[33]=!1:d[33]=!0,d[33]?c.resolve(d[34]=void 0):c.sequence([function(a){return d[36]=new c.Map(),d[37]=d[32].keys(),d[38]=c.i64.of_int32(d[37].length),c.i64.gt(d[38],c.i64.cast([0,0]))?c.loopAsync(d[38],function(a){return d[39]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[37],d[39]).then(function(a){return a=a,d[40]=a[0],d[41]=a[1],a})},function(a){return d[42]=d[32].get(d[40]),d[36].set(d[40],d[42])}])}):c.resolve()},function(a){return d[34]=d[36]}])},function(a){return d[34]!==void 0?(d[36]=c.toJSON(d[34]),d[35]=d[36]):d[35]=void 0,d[25]=d[35]}]):c.resolve(d[25]=void 0)},function(a){return d[26]=d[16].get("supplemental_data_encrypted"),d[26]!==void 0?c.sequence([function(a){return d[32]=d[16].get("protobuf_encrypted"),d[33]=d[16].get("backup_action"),d[34]=d[16].get("timestamp_ms"),d[35]=d[26].get("sk_ciphertext"),c.nativeOperation(b("LSBase64Encode.nop"),d[35]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[37]=d[26].get("sk_hash"),c.nativeOperation(b("LSBase64Encode.nop"),d[37]).then(function(a){return a=a,d[38]=a[0],a})},function(a){return d[39]=new c.Map(),d[39].set("supplementary_data_key",void 0),d[39].set("encrypted_protobuf",d[32]),d[39].set("key_value_backup_action",d[33]),d[39].set("protobuf_ts_ms",d[34]),d[39].set("supplemental_key_ciphertext",d[36]),d[39].set("supplemental_key_hash",d[38]),d[39].set("message_tags",d[25]),d[27]=d[39]}]):c.resolve((d[32]=d[16].get("protobuf_encrypted"),d[33]=d[16].get("backup_action"),d[34]=d[16].get("timestamp_ms"),d[35]=new c.Map(),d[35].set("supplementary_data_key",void 0),d[35].set("encrypted_protobuf",d[32]),d[35].set("key_value_backup_action",d[33]),d[35].set("protobuf_ts_ms",d[34]),d[35].set("message_tags",d[25]),d[27]=d[35]))},function(a){return d[22].set("key_value_backup_unencrypted_payload",d[27]),d[28]=d[2].get("sender_id"),d[22].set("sender_id",d[28]),d[29]=d[2].get("attachment_backup_payload"),d[29]!==void 0?d[22].set("attachment_backup_payload",d[29]):0,d[24]!==void 0?c.sequence([function(a){return d[32]=d[24].get("ttd"),d[32]?d[33]=!1:d[33]=!0,d[33]?c.resolve(d[34]=void 0):c.sequence([function(a){return d[36]=new c.Map(),d[37]=d[32].keys(),d[38]=c.i64.of_int32(d[37].length),c.i64.gt(d[38],c.i64.cast([0,0]))?c.loopAsync(d[38],function(a){return d[39]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[37],d[39]).then(function(a){return a=a,d[40]=a[0],d[41]=a[1],a})},function(a){return d[42]=d[32].get(d[40]),d[36].set(d[40],d[42])}])}):c.resolve()},function(a){return d[34]=d[36]}])},function(a){return d[34]!==void 0?(d[36]=c.toJSON(d[34]),d[35]=d[36]):d[35]=void 0,d[30]=d[35]}]):c.resolve(d[30]=void 0)},function(a){return d[30]!==void 0?d[22].set("tags_to_delete",d[30]):0,d[31]=c.toJSON(d[22]),a=[d[31],void 0,d[4]],d[5]=a[0],d[6]=a[1],d[7]=a[2]}]):c.resolve((d[3]?d[15]=!1:d[15]=!0,d[15]?(a=[void 0,void 0,d[4]],d[16]=a[0],d[17]=a[1],d[18]=a[2],a):(a=[void 0,d[3],d[4]],d[16]=a[0],d[17]=a[1],d[18]=a[2],a),a=[d[16],d[17],d[18]],d[5]=a[0],d[6]=a[1],d[7]=a[2]))},function(a){return d[15]=new c.Map(),d[16]=d[15].set("success",d[5]),d[17]=d[15].set("failure",d[6]),d[18]=d[15].set("context",d[7]),d[19]=c.toJSON(d[15]),d[8]=d[19],d[9]=c.i64.of_float(Date.now()),d[10]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[9],d[0])),d[14]=" ms",d[11]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsOpenUpload] ",d[11],d[12],d[11],d[13],d[11],d[14]].join("")),c.i64.eq(c.i64.mod_(d[10],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsOpenUpload",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[8],c.i64.cast([0,50048])],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsOpenUploadStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsRestoreWithSerializer",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,void 0,void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],c.resolve(d)}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSCreateDerivedKeys.nop",["CreateDerivedKeys","LSVec"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,e,f,g,h){return d("CreateDerivedKeys").CreateDerivedKeys(e,f,g,c("LSVec").toArray(h))};a.__nop_name__="LSCreateDerivedKeys";g["default"]=a}),98);
__d("LSDeriveValueSecretRefV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][deriveValueSecretRefV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]=a[2].get("message_payload_encryption_keys"),d[3]=d[2].get("encryption_version"),d[4]=d[2].get("epoch_anon_id"),d[5]=d[2].get("epoch_root_key"),d[6]=d[2].get("payload_key"),d[7]=c.createArray(),d[41]=(d[7].push(c.i64.cast([0,6])),d[7]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(a){return a=a,d[8]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[8],void 0,d[4],d[7]).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[9]?d[10]=!1:d[10]=!0,d[10]?c.resolve(d[11]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[9],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[11]=d[43]==null?"":d[43]}])},function(a){return d[12]=c.createArray(),d[41]=(d[12].push(c.i64.cast([0,6])),d[12]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(a){return a=a,d[13]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[13],void 0,d[5],d[12]).then(function(a){return a=a,d[14]=a[0],a})},function(a){return d[14]?d[15]=!1:d[15]=!0,d[15]?c.resolve(d[16]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[14],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[16]=d[43]==null?"":d[43]}])},function(a){return d[17]=c.createArray(),d[41]=(d[17].push(c.i64.cast([0,6])),d[17]),c.nativeOperation(b("LSGetBlobFromString.nop"),"message_key_debug").then(function(a){return a=a,d[18]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[18],void 0,d[6],d[17]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return d[19]?d[20]=!1:d[20]=!0,d[20]?c.resolve(d[21]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[19],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[21]=d[43]==null?"":d[43]}])},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[5]).then(function(a){return a=a,d[22]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),[d[22]==null?"":d[22],a[0]].join("")).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[24]=c.createArray(),d[41]=(d[24].push(c.i64.cast([0,6])),d[24]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(a){return a=a,d[25]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[25],void 0,d[23],d[24]).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[26]?d[27]=!1:d[27]=!0,d[27]?c.resolve(d[28]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[26],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[28]=d[43]==null?"":d[43]}])},function(a){return d[29]=":",c.blobs.neq(d[5],void 0)?c.sequence([function(a){return d[41]=c.createArray(),d[47]=(d[41].push(c.i64.cast([0,18])),d[41]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[5],d[41]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return d[42]!==void 0?c.sequence([function(a){return d[47]=c.i64.of_int32(d[42].length),c.i64.ge(d[47],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[42],c.i64.cast([0,0])).then(function(a){return a=a,d[49]=a[0],d[50]=a[1],a})},function(a){return d[48]=d[49]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[50]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[50]].join("")),d[49]=c.createArray(),void 0!==void 0?d[51]=(d[49].push(void 0),d[49]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[50],d[49],c.i64.cast([0,3]))},function(a){return d[48]=void 0}])},function(a){return d[43]=d[48]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[48]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[48]].join("")),d[47]=c.createArray(),void 0!==void 0?d[49]=(d[47].push(void 0),d[47]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[48],d[47],c.i64.cast([0,3]))},function(a){return d[43]=void 0}])},function(a){return c.blobs.neq(d[43],void 0)?d[44]=!0:d[44]=!1,d[44]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSBase64Encode.nop"),d[43]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return d[45]!==void 0?d[46]=d[45]:d[46]="encodingfailed",d[30]=d[46]}]):c.resolve(d[30]="null")},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[4]).then(function(a){return a=a,d[31]=a[0],a})},function(e){return d[32]=new c.Map(),d[32].set("encryption_version",d[3]),d[32].set("epoch_anon_id",d[31]==null?"":d[31]),d[32].set("message_encryption_values",[d[11],d[29],d[16],d[29],d[21],d[29],d[28]].join("")),d[32].set("root_key_fingerprint",d[30]),d[32].set("backup_id",a[1]),d[33]=c.toJSON(d[32]),d[34]=new c.Map(),d[34].set("value_secret_ref",d[33]),d[35]=c.i64.of_float(Date.now()),d[36]=c.i64.random(),d[38]="Finishing execution. Execution time: ",d[39]=c.i64.to_string(c.i64.sub(d[35],d[0])),d[40]=" ms",d[37]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][deriveValueSecretRefV2] ",d[37],d[38],d[37],d[39],d[37],d[40]].join("")),c.i64.eq(c.i64.mod_(d[36],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[41]=",",d[42]=c.createArray(),void 0!==void 0?d[43]=(d[42].push(void 0),d[42]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"deriveValueSecretRefV2",[d[38],d[41],d[39],d[41],d[40]].join(""),d[42],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[34],void 0],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDeriveValueSecretRefV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSBinaryToHex.nop",["LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,d,e){a=Array.from(new Uint8Array(e));d=a.map(function(a){return a.toString(16).padStart(2,"0")});e=d.join("").toUpperCase();return(h||(h=b("Promise"))).resolve(c("LSResult")(e))};a.__nop_name__="LSBinaryToHex";g["default"]=a}),98);
__d("LSGetBlobFromInt64BE.nop",["GetBlobFromInt64BE"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,c){return d("GetBlobFromInt64BE").GetBlobFromInt64BE(c)};a.__nop_name__="LSGetBlobFromInt64BE";g["default"]=a}),98);
__d("LSHmac_v2.nop",["Hmac_v2"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,d,e){return c("Hmac_v2")(d,e)};a.__nop_name__="LSHmac_v2";g["default"]=a}),98);
__d("OcmfClientMap",["CryptoLogger","LSCryptoUtils","Promise","requireDeferred","tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("ristretto255").__setRef("OcmfClientMap");a=function(a,c){c=d("tweetnacl").hash(d("LSCryptoUtils").bufToUint8(c));return(h||(h=b("Promise"))).all([c,i.load()]).then(function(b){var c=b[0];b=b[1];c=b.fromHash(new Uint8Array(c));b=b.scalarMult(new Uint8Array(a),c);return b.buffer})["catch"](function(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("ocmf_client_map"),a).mustfix("Failed OcmfClientMap.");throw a})};g["default"]=a}),98);
__d("LSOcmfClientMap.nop",["LSResult","OcmfClientMap"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,d,e){return c("OcmfClientMap")(d,e).then(function(a){return c("LSResult")(a)})};a.__nop_name__="LSOcmfClientMap";g["default"]=a}),98);
__d("UInt8Array",["XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.length;if(!(b>0&&b%2===0&&/^[\da-f]+$/gi.test(a)))return;var c=[];for(var d=0,b=b/2|0;d<b;++d){var e=parseInt(a.substring(d<<1,(d<<1)+2|0),16);c.push(e)}return new Uint8Array(c)}function b(a){return d("XPlatReactCrypto").getRandomValues(new Uint8Array(a)).buffer}function c(a){a=a.filter(function(a){return a.byteLength!==0});var b=a.reduce(function(a,b){return a+b.byteLength|0},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(b,a);return a+b.byteLength|0},0);return c}g.fromHexString=a;g.getBufferWithRandomValuesFromLength=b;g.concatBytes=c}),98);
__d("OrderPreservingEncryption",["FBLogger","LSCryptoUtils","LSSynchronousPromise","Promise","UInt8Array","WACryptoHkdfSync","XPlatReactCrypto","gkx","isPromise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){return d("XPlatReactCrypto").getRandomValues(new Uint8Array(32)).buffer}function j(a){var b=a.length;return b%2!==0?"0"+a:a}function k(a){a=BigInt(a);var b=j(a.toString(16));a=b.length;a=a/2;var c=[];for(var d=0;d<a;++d)c.push(d*2);return new Uint8Array(c.map(function(a){var c=a+2;return b.slice(a,c)}).map(function(a){return parseInt(a,16)}))}function l(a){a=a.map(function(a){return a._0});return{_0:d("UInt8Array").concatBytes(a)}}function m(a){return"OPE key has length "+String(a)+", expected  "+String(32)}function n(a,b,e){var f=new ArrayBuffer(0);if(c("gkx")("13860"))try{var g=d("WACryptoHkdfSync").hkdf(a,d("LSCryptoUtils").bufToUint8(f),d("LSCryptoUtils").bufToUint8(b.buffer),e);return d("LSSynchronousPromise").makeSynchronousPromise({_0:g})}catch(a){c("FBLogger")("wmi_eb").mustfix("hkdf failed at OrderPreservingEncryption");throw a}return d("XPlatReactCrypto").subtleImportKey("raw",a.buffer,"HKDF",!1,["deriveKey","deriveBits"]).then(function(a){return d("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:b.buffer,name:"HKDF",salt:f},a,e*8)}).then(function(a){return{_0:d("LSCryptoUtils").bufToUint8(a)}})}function o(a,b){return{_0:d("LSCryptoUtils").modAddBytes(a._0,b)}}function p(a,e,f,g){var j=f.byteLength;if(j!==32)throw c("FBLogger")("wmi_eb").mustfixThrow(m(j));var k=g.byteLength,p=function(a,b){var c=new Uint8Array(1+k),d=new Uint8Array(k-b).fill(0);c.set([b]);c.set(a.subarray(0,b),1);c.set(d,b+1);return c};if(k>=255)throw c("FBLogger")("wmi_eb").mustfixThrow("Input is too large");j=Array.from(g).map(function(b,c){c=p(g,c);var e=new Uint8Array(a);e[a-1]=b;b=d("LSCryptoUtils").bufToUint8(f);return n(b,c,a).then(function(a){return o(a,e)})}).map(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise);j=(i||(i=c("isPromise")))(j[0])?(h||(h=b("Promise"))).all(j):d("LSSynchronousPromise").makeSynchronousPromise(j);return j.then(function(a){return d("UInt8Array").concatBytes([new Uint8Array([e]),l(a)._0])})}function e(a,b,c,d){d=k(d);return p(a,b,c,d)}g.keyGen=a;g.intStringToBEBytes=k;g.buildKeyLengthErrorMsg=m;g.encryptBigEndianBytes=p;g.encryptIntString=e}),98);
__d("OpeEncrypt",["CryptoLogger","I64","LSResult","OrderPreservingEncryption"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){var f=d("CryptoLogger").CryptoLogger("ope_encrypt");return d("OrderPreservingEncryption").encryptBigEndianBytes((h||(h=d("I64"))).to_int32(e),1,a,new Uint8Array(b)).then(function(a){return c("LSResult")(a.buffer)},function(a){d("CryptoLogger").captureError(f,a).mustfix("OpeEncrypt_impl failed");throw a})}g.OpeEncrypt=a}),98);
__d("LSOpeEncrypt.nop",["OpeEncrypt"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,c,e,f){return d("OpeEncrypt").OpeEncrypt(c,e,f)};a.__nop_name__="LSOpeEncrypt";g["default"]=a}),98);
__d("TruncateSortKey",["CryptoLogger","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("CryptoLogger").CryptoLogger("truncate_sort_key");function a(a){if(a.byteLength!==8)throw i.mustfixThrow("Bad length on sort key for truncation");var d=new Uint8Array(a);d=d.subarray(0,2);if(d.some(function(a){return a!==0}))throw i.mustfixThrow("Bad prefix on sort key for truncation");return(h||(h=b("Promise"))).resolve(c("LSResult")(a.slice(2)))}g.TruncateSortKey=a}),98);
__d("LSTruncateSortKey.nop",["TruncateSortKey"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,c){return d("TruncateSortKey").TruncateSortKey(c)};a.__nop_name__="LSTruncateSortKey";g["default"]=a}),98);
__d("LSEncryptIdentifiersV2",["LSBase64Encode.nop","LSBinaryToHex.nop","LSGetBlobFromInt64BE.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSOpeEncrypt.nop","LSTruncateSortKey.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][encryptIdentifiersV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]=a[6].get("ocmf_shared_key"),c.nativeOperation(b("LSGetBlobFromString.nop"),a[2]).then(function(a){return a=a,d[3]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWFpbGJveF9pZF9zY29wZQ=="),d[3]).then(function(a){return a=a,d[4]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[2],d[4]).then(function(a){return a=a,d[5]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[5]).then(function(a){return a=a,d[6]=a[0],a})},function(e){return c.i64.eq(a[0],c.i64.cast([0,2]))&&c.i64.eq(a[1],c.i64.cast([0,2]))?d[7]=a[5]:d[7]=a[3],d[8]=a[6].get("ocmf_shared_key"),c.nativeOperation(b("LSGetBlobFromString.nop"),d[7]).then(function(a){return a=a,d[9]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("dGhyZWFkX2lkX3Njb3Bl"),d[9]).then(function(a){return a=a,d[10]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[8],d[10]).then(function(a){return a=a,d[11]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[11]).then(function(a){return a=a,d[12]=a[0],a})},function(e){return d[13]=a[6].get("ope_key"),c.nativeOperation(b("LSGetBlobFromInt64BE.nop"),a[4]).then(function(a){return a=a,d[14]=a[0],a})},function(a){return c.nativeOperation(b("LSTruncateSortKey.nop"),d[14]).then(function(a){return a=a,d[15]=a[0],a})},function(a){return c.nativeOperation(b("LSOpeEncrypt.nop"),d[13],d[15],c.i64.cast([0,16])).then(function(a){return a=a,d[16]=a[0],a})},function(a){return c.nativeOperation(b("LSBinaryToHex.nop"),d[16]).then(function(a){return a=a,d[17]=a[0],a})},function(e){return d[18]=a[6].get("ocmf_shared_key"),c.nativeOperation(b("LSGetBlobFromString.nop"),a[5]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWVzc2FnZV9pZF9zY29wZQ=="),d[19]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[18],d[20]).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[21]).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[23]=new c.Map(),d[23].set("backup_id_ocmf_partial",d[6]==null?"":d[6]),d[23].set("act_thread_id_ocmf_partial",d[12]==null?"":d[12]),d[23].set("timestamp_encrypted",d[17]==null?"":d[17]),d[23].set("otid_ocmf_partial",d[22]==null?"":d[22]),d[24]=c.i64.of_float(Date.now()),d[25]=c.i64.random(),d[27]="Finishing execution. Execution time: ",d[28]=c.i64.to_string(c.i64.sub(d[24],d[0])),d[29]=" ms",d[26]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][encryptIdentifiersV2] ",d[26],d[27],d[26],d[28],d[26],d[29]].join("")),c.i64.eq(c.i64.mod_(d[25],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[30]=",",d[31]=c.createArray(),void 0!==void 0?d[32]=(d[31].push(void 0),d[31]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"encryptIdentifiersV2",[d[27],d[30],d[28],d[30],d[29]].join(""),d[31],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[23],void 0],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsEncryptIdentifiersV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("SymmetricEncryptionPaddingUtils",["XPlatReactTextEncoder"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a<10)return 10-a;var b=Math.floor(Math.log2(a)),c=Math.floor(Math.log2(b))+1;b=b-c;c=(1<<b)-1;b=a+c&(c^-1);return b-a}function i(a){var b=Uint32Array.BYTES_PER_ELEMENT,c=a.byteLength,d=h(c);d=b+c+d;d=new DataView(new ArrayBuffer(d));d.setUint32(0,c);c=new Uint8Array(d.buffer);c.set(new Uint8Array(a),b);return c.buffer}function a(a){var b=new(d("XPlatReactTextEncoder").TextEncoder)();b=b.encode(a).buffer;return i(b)}function b(a){var b=Uint32Array.BYTES_PER_ELEMENT,c=new DataView(a);if(c.byteLength<b)return;var d=a.byteLength;c=c.getUint32(0);d=d-b;if(c>=0&&c<=d)return a.slice(b,b+c)}g.getPaddingLength=h;g.padData=i;g.pad=a;g.stripPadding=b}),98);
__d("SymmetricEncryptionCreateEncryptedData",["CryptoLogger","EncryptedBackupsSymmetricEncryptionUtils","HChaCha20","Promise","RetUtil","SymmetricEncryptionPaddingUtils","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,c,e){var f=d("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_data"),g=d("SymmetricEncryptionPaddingUtils").padData(e),i=d("XPlatReactCrypto").getRandomValues(new Uint8Array(d("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes));e=new(d("HChaCha20").HChaCha20)();e=e.hChaCha20Bytes(i.slice(0,d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer,a);return d("XPlatReactCrypto").subtleImportKey("raw",e,"AES-GCM",!1,["encrypt"]).then(function(a){return d("XPlatReactCrypto").subtleEncrypt({additionalData:c,iv:new Uint8Array(i.slice(d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer),name:"AES-GCM",tagLength:d("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLength},a,g)}).then(function(a){var c=i.byteLength+a.byteLength;c=new Uint8Array(c);c.set(i);c.set(new Uint8Array(a),d("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes);return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(c.buffer))})["catch"](function(a){d("CryptoLogger").captureError(f,a).mustfix("symmetric data encryption failed");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult())})};g["default"]=a}),98);
__d("LSSymmetricEncryptionCreateEncryptedData.nop",["SymmetricEncryptionCreateEncryptedData"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,d,e,f){return c("SymmetricEncryptionCreateEncryptedData")(d,e,f)};a.__nop_name__="LSSymmetricEncryptionCreateEncryptedData";g["default"]=a}),98);
__d("LSSymmetricEncryptionCreateEncryptedString.nop",["Base64Utils","CryptoLogger","LSCryptoUtils","LSSymmetricEncryptionCreateEncryptedData.nop","Promise","RetUtil"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g,i){var j=d("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_string");return c("LSSymmetricEncryptionCreateEncryptedData.nop")(a,e,f,g,d("LSCryptoUtils").strToBuf(i)).then(function(a){return a[0]}).then(function(a){return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(a?d("Base64Utils").fromArrayBuffer(a):void 0))})["catch"](function(a){d("CryptoLogger").captureError(j,a).mustfix("symmetric string encryption failed");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult())})};a.__nop_name__="LSSymmetricEncryptionCreateEncryptedString";g["default"]=a}),98);
__d("LSEncryptMessagePayloadV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSSymmetricEncryptionCreateEncryptedString.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][encryptMessagePayloadV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]=a[2].get("message_payload_encryption_keys"),d[3]=d[2].get("payload_key"),c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedString.nop"),d[3],c.blobs.of_string(["message_thread","_",a[1]].join("")),a[3]).then(function(a){return a=a,d[4]=a[0],a})},function(e){return d[4]!==void 0?c.sequence([function(a){return d[13]=d[2].get("encryption_version"),d[14]=d[2].get("epoch_anon_id"),d[15]=d[2].get("epoch_root_key"),d[16]=d[2].get("payload_key"),d[17]=c.createArray(),d[45]=(d[17].push(c.i64.cast([0,6])),d[17]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(a){return a=a,d[18]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[18],void 0,d[14],d[17]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return d[19]?d[20]=!1:d[20]=!0,d[20]?c.resolve(d[21]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[19],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[21]=d[47]==null?"":d[47]}])},function(a){return d[22]=c.createArray(),d[45]=(d[22].push(c.i64.cast([0,6])),d[22]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(a){return a=a,d[23]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[23],void 0,d[15],d[22]).then(function(a){return a=a,d[24]=a[0],a})},function(a){return d[24]?d[25]=!1:d[25]=!0,d[25]?c.resolve(d[26]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[24],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[26]=d[47]==null?"":d[47]}])},function(a){return d[27]=c.createArray(),d[45]=(d[27].push(c.i64.cast([0,6])),d[27]),c.nativeOperation(b("LSGetBlobFromString.nop"),"message_key_debug").then(function(a){return a=a,d[28]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[28],void 0,d[16],d[27]).then(function(a){return a=a,d[29]=a[0],a})},function(a){return d[29]?d[30]=!1:d[30]=!0,d[30]?c.resolve(d[31]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[29],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[31]=d[47]==null?"":d[47]}])},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[15]).then(function(a){return a=a,d[32]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),[d[32]==null?"":d[32],a[1]].join("")).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[34]=c.createArray(),d[45]=(d[34].push(c.i64.cast([0,6])),d[34]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(a){return a=a,d[35]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[35],void 0,d[33],d[34]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[36]?d[37]=!1:d[37]=!0,d[37]?c.resolve(d[38]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[36],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[38]=d[47]==null?"":d[47]}])},function(a){return d[39]=":",c.blobs.neq(d[15],void 0)?c.sequence([function(a){return d[45]=c.createArray(),d[51]=(d[45].push(c.i64.cast([0,18])),d[45]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[15],d[45]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[46]!==void 0?c.sequence([function(a){return d[51]=c.i64.of_int32(d[46].length),c.i64.ge(d[51],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[46],c.i64.cast([0,0])).then(function(a){return a=a,d[53]=a[0],d[54]=a[1],a})},function(a){return d[52]=d[53]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[54]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[54]].join("")),d[53]=c.createArray(),void 0!==void 0?d[55]=(d[53].push(void 0),d[53]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[54],d[53],c.i64.cast([0,3]))},function(a){return d[52]=void 0}])},function(a){return d[47]=d[52]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[52]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[52]].join("")),d[51]=c.createArray(),void 0!==void 0?d[53]=(d[51].push(void 0),d[51]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[52],d[51],c.i64.cast([0,3]))},function(a){return d[47]=void 0}])},function(a){return c.blobs.neq(d[47],void 0)?d[48]=!0:d[48]=!1,d[48]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSBase64Encode.nop"),d[47]).then(function(a){return a=a,d[49]=a[0],a})},function(a){return d[49]!==void 0?d[50]=d[49]:d[50]="encodingfailed",d[40]=d[50]}]):c.resolve(d[40]="null")},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[14]).then(function(a){return a=a,d[41]=a[0],a})},function(b){return d[42]=new c.Map(),d[42].set("encryption_version",d[13]),d[42].set("epoch_anon_id",d[41]==null?"":d[41]),d[42].set("message_encryption_values",[d[21],d[39],d[26],d[39],d[31],d[39],d[38]].join("")),d[42].set("root_key_fingerprint",d[40]),d[42].set("backup_id",a[0]),d[43]=c.toJSON(d[42]),d[44]=new c.Map(),d[44].set("encrypted_message_payload",d[4]),d[44].set("value_secret_ref",d[43]),b=[d[44],void 0],d[5]=b[0],d[6]=b[1]}]):c.resolve((d[13]=new c.Map(),d[13].set("error_code",c.i64.cast([0,40])),d[13].set("stored_procedure","LSEncryptedBackupsEncryptMessagePayloadV2StoredProcedure"),d[13].set("error_message",""),e=[void 0,d[13]],d[5]=e[0],d[6]=e[1]))},function(a){return d[7]=c.i64.of_float(Date.now()),d[8]=c.i64.random(),d[10]="Finishing execution. Execution time: ",d[11]=c.i64.to_string(c.i64.sub(d[7],d[0])),d[12]=" ms",d[9]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][encryptMessagePayloadV2] ",d[9],d[10],d[9],d[11],d[9],d[12]].join("")),c.i64.eq(c.i64.mod_(d[8],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[13]=",",d[14]=c.createArray(),void 0!==void 0?d[15]=(d[14].push(void 0),d[14]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"encryptMessagePayloadV2",[d[10],d[13],d[11],d[13],d[12]].join(""),d[14],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[5],d[6]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsEncryptMessagePayloadV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSGetLatestEpochKeys",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][getLatestEpochKeys] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]="",d[3]=void 0,d[4]=void 0,d[5]=void 0,a[0]?c.resolve(0):(d[15]=void 0,c.i64.neq(d[15],void 0)?c.sequence([function(a){return c.count(c.db.table(169).fetch([[[d[15]]]])).then(function(a){return d[16]=a})},function(a){return c.i64.le(d[16],c.i64.cast([0,1]))?c.sequence([function(a){return c.db.table(169).fetch([[[d[15]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[26]=new c.Map(),d[26].set("error_msg","Expected a nonempty query result"),d[26].set("code",c.i64.cast([0,3])),d[26].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),d[27]=c.createArray(),d[28]=(d[27].push(d[26]),d[27]),e=[void 0,d[27]],d[22]=e[0],d[23]=e[1]):(b=a.item,d[26]=new c.Map(),d[26].set("epoch_id",b.epochId),d[26].set("backup_id",b.backupId),d[26].set("epoch_anon_id_blob",b.epochAnonIdBlob),d[26].set("epoch_root_key_blob",b.epochRootKeyBlob),d[26].set("epoch_status",b.epochStatus),d[26].set("epoch_head",b.epochHead),d[26].set("authority_level",b.authorityLevel),e=[d[26],void 0],d[22]=e[0],d[23]=e[1])})},function(a){return d[25]=new c.Map(),d[25].set("value",d[22]),d[25].set("errors",d[23]),d[17]=d[25]}]):c.resolve((d[22]=new c.Map(),d[22].set("error_msg","Expected at most one result"),d[22].set("code",c.i64.cast([0,4])),d[22].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),d[23]=c.createArray(),d[25]=(d[23].push(d[22]),d[23]),d[24]=new c.Map(),d[24].set("value",void 0),d[24].set("errors",d[23]),d[17]=d[24]))},function(a){return d[18]=d[17].get("value"),d[18]!==void 0?(d[22]=d[18].get("epoch_id"),d[23]=d[18].get("backup_id"),d[24]=d[18].get("epoch_anon_id_blob"),d[25]=d[18].get("epoch_root_key_blob"),d[26]=d[18].get("epoch_status"),d[27]=d[18].get("epoch_head"),d[28]=d[18].get("authority_level"),d[29]=d[17],d[19]=d[29]):(d[22]=d[17].get("errors"),d[23]=d[17].get("errors"),d[24]=new c.Map(),d[24].set("value",void 0),d[24].set("errors",d[22]),d[19]=d[24]),d[20]=d[19].get("value"),d[20]!==void 0?(d[22]=d[20].get("epoch_id"),d[23]=d[20].get("backup_id"),d[24]=d[20].get("epoch_anon_id_blob"),d[25]=d[20].get("epoch_root_key_blob"),d[26]=d[20].get("epoch_status"),d[27]=d[20].get("epoch_head"),d[28]=d[20].get("authority_level"),d[2]=c.blobs.to_string(d[24]),d[3]=d[22],d[4]=d[25],c.blobs.neq(d[27],void 0)?d[5]=d[27]:0,d[21]=!0):(d[22]=d[19].get("errors"),d[23]=d[19].get("errors"),d[21]=!1)}]):c.resolve())},function(b){return c.i64.neq(d[3],void 0)?c.resolve(0):c.sequence([function(b){return d[15]=void 0,d[16]="",d[17]=void 0,d[18]=void 0,c.forEach(c.filter(c.db.table(169).fetch(),function(b){return a[0]||c.i64.eq(b.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[20]=c.blobs.to_string(a.epochAnonIdBlob),c.i64.eq([0,d[20].length],[0,d[16].length])?d[19]=d[20]>d[16]:d[19]=c.i64.gt([0,d[20].length],[0,d[16].length]),d[19]?(d[15]=a.epochId,d[16]=d[20],d[17]=a.epochRootKeyBlob,d[18]=a.epochHead):0})},function(a){return c.i64.neq(d[15],void 0)?(d[2]=d[16],d[3]=d[15],d[4]=d[17],c.blobs.neq(d[18],void 0)?d[5]=d[18]:0,d[19]=c.i64.of_float(Date.now()),0):0}])},function(a){return d[11]=c.blobs.of_string(d[2]),c.i64.neq(d[3],void 0)?(c.blobs.neq(d[11],void 0)?(c.blobs.neq(d[4],void 0)?(d[19]=new c.Map(),d[19].set("epoch_id",d[3]),d[19].set("epoch_root_key",d[4]),d[19].set("epoch_anon_id",d[11]),d[19].set("epoch_head",d[5]),d[20]=new c.Map(),d[20].set("epoch_keys",d[19]),a=[d[20],void 0],d[17]=a[0],d[18]=a[1]):(d[19]=new c.Map(),d[19].set("error_code",c.i64.cast([0,402])),d[19].set("error_message","failed to query latest epoch"),d[19].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,d[19]],d[17]=a[0],d[18]=a[1]),a=[d[17],d[18]],d[15]=a[0],d[16]=a[1]):(d[17]=new c.Map(),d[17].set("error_code",c.i64.cast([0,403])),d[17].set("error_message","failed to query latest epoch"),d[17].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,d[17]],d[15]=a[0],d[16]=a[1]),a=[d[15],d[16]],d[6]=a[0],d[7]=a[1]):(d[15]=new c.Map(),d[15].set("error_code",c.i64.cast([0,400])),d[15].set("error_message","failed to query latest epoch"),d[15].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,d[15]],d[6]=a[0],d[7]=a[1]),d[8]=c.i64.of_float(Date.now()),d[9]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[8],d[0])),d[14]=" ms",d[10]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][getLatestEpochKeys] ",d[10],d[12],d[10],d[13],d[10],d[14]].join("")),c.i64.eq(c.i64.mod_(d[9],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"getLatestEpochKeys",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[6],d[7]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsGetLatestEpochKeysStoredProcedure";a.__tables__=["secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSLoadAndEncryptProtobufWithInputsV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSLogMebClientEvent.nop","LSQueryLocalPersistenceStoreForBackup.nop","LSQueryLocalPersistenceStoreSupplementalForBackup.nop","LSQueryLocalPersistenceStoreTagsForBackup.nop","LSSymmetricEncryptionCreateEncryptedData.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadAndEncryptProtobufWithInputsV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.i64.eq(a[0],c.i64.cast([0,1]))?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[10]=a[0],d[11]=a[1],d[12]=a[2],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[13]=a[0],a})},function(e){return d[14]=new c.Map(),d[14].set("message_tags",d[13]),d[15]=new c.Map(),d[15].set("mt",d[14]),c.blobs.neq(d[10],void 0)?c.sequence([function(e){return d[18]=a[5].get("message_payload_encryption_keys"),d[19]=d[18].get("payload_key"),c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),d[19],c.blobs.of_string(["message_thread","_",a[1]].join("")),d[10]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return c.blobs.neq(d[20],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[20]).then(function(a){return a=a,d[24]=a[0],a})},function(a){return d[21]=d[24]}]):c.resolve(d[21]=void 0)},function(e){return d[21]!==void 0?c.sequence([function(a){return d[15]!==void 0?c.sequence([function(a){return d[27]=d[15].get("mt"),d[27]?d[28]=!1:d[28]=!0,d[28]?c.resolve(d[29]=void 0):c.sequence([function(a){return d[31]=new c.Map(),d[32]=d[27].keys(),d[33]=c.i64.of_int32(d[32].length),c.i64.gt(d[33],c.i64.cast([0,0]))?c.loopAsync(d[33],function(a){return d[34]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[32],d[34]).then(function(a){return a=a,d[35]=a[0],d[36]=a[1],a})},function(a){return d[37]=d[27].get(d[35]),d[31].set(d[35],d[37])}])}):c.resolve()},function(a){return d[29]=d[31]}])},function(a){return d[29]!==void 0?(d[31]=c.toJSON(d[29]),d[30]=d[31]):d[30]=void 0,d[24]=d[30]}]):c.resolve(d[24]=void 0)},function(b){return d[15]!==void 0?(d[27]=d[15].get("mooos"),d[25]=d[27]):d[25]=void 0,d[26]=new c.Map(),d[26].set("backup_action",a[0]),d[26].set("protobuf_encrypted",d[21]),d[26].set("supplemental_data_encrypted",void 0),d[26].set("timestamp_ms",a[4]),d[26].set("message_tags",d[24]),d[26].set("serialized_attachment_backup_payload",void 0),d[26].set("maybe_ooo_supplemental_upload",d[25]),b=[d[26],void 0],d[22]=b[0],d[23]=b[1]}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),d[24]=new c.Map(),d[24].set("error_code",c.i64.cast([0,62])),d[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[24].set("error_message",""),e=[void 0,d[24]],d[22]=e[0],d[23]=e[1]))},function(a){return a=[d[22],d[23]],d[16]=a[0],d[17]=a[1],a}]):c.resolve((d[12]?(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),d[20]=new c.Map(),d[20].set("error_code",c.i64.cast([0,70])),d[20].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[20].set("error_message",""),e=[void 0,d[20]],d[18]=e[0],d[19]=e[1]):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),d[20]=new c.Map(),d[20].set("error_code",c.i64.cast([0,63])),d[20].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[20].set("error_message",""),e=[void 0,d[20]],d[18]=e[0],d[19]=e[1]),e=[d[18],d[19]],d[16]=e[0],d[17]=e[1]))},function(a){return a=[d[16],d[17]],d[2]=a[0],d[3]=a[1],a}]):c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([0,2]))?c.sequence([function(e){return a[3]!==void 0?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreSupplementalForBackup.nop"),a[1],a[2],a[3]).then(function(a){return a=a,d[14]=a[0],d[15]=a[1],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[16]=a[0],a})},function(e){return d[17]=new c.Map(),d[17].set("message_tags",d[16]),d[18]=new c.Map(),d[18].set("mt",d[17]),c.blobs.neq(d[14],void 0)?c.sequence([function(e){return a[3]!==void 0?c.sequence([function(e){return d[23]=a[5].get("mailbox_root_key_v2"),c.blobs.neq(d[23],void 0)?c.sequence([function(e){return d[26]=a[5].get("message_payload_encryption_keys"),d[27]=d[26].get("epoch_root_key"),d[28]=c.createArray(),d[41]=(d[28].push(c.i64.cast([0,32])),d[28]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfcHJmX2tleQ=="),void 0,d[23],d[28]).then(function(a){return a=a,d[29]=a[0],a})},function(a){return d[29]!==void 0?c.sequence([function(a){return d[41]=c.i64.of_int32(d[29].length),c.i64.ge(d[41],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[29],c.i64.cast([0,0])).then(function(a){return a=a,d[43]=a[0],d[44]=a[1],a})},function(a){return d[42]=d[43]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[44]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[44]].join("")),d[43]=c.createArray(),void 0!==void 0?d[45]=(d[43].push(void 0),d[43]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[44],d[43],c.i64.cast([0,3]))},function(a){return d[42]=void 0}])},function(a){return d[30]=d[42]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[42]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[42]].join("")),d[41]=c.createArray(),void 0!==void 0?d[43]=(d[41].push(void 0),d[41]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[42],d[41],c.i64.cast([0,3]))},function(a){return d[30]=void 0}])},function(a){return c.blobs.neq(d[30],void 0)?d[31]=!0:d[31]=!1,d[31]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),d[32]=c.createArray(),d[41]=(d[32].push(c.i64.cast([0,32])),d[32]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfZW5jX2tleQ=="),void 0,d[27],d[32]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[33]!==void 0?c.sequence([function(a){return d[41]=c.i64.of_int32(d[33].length),c.i64.ge(d[41],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[33],c.i64.cast([0,0])).then(function(a){return a=a,d[43]=a[0],d[44]=a[1],a})},function(a){return d[42]=d[43]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[44]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[44]].join("")),d[43]=c.createArray(),void 0!==void 0?d[45]=(d[43].push(void 0),d[43]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[44],d[43],c.i64.cast([0,3]))},function(a){return d[42]=void 0}])},function(a){return d[34]=d[42]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[42]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[42]].join("")),d[41]=c.createArray(),void 0!==void 0?d[43]=(d[41].push(void 0),d[41]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[42],d[41],c.i64.cast([0,3]))},function(a){return d[34]=void 0}])},function(e){return c.blobs.neq(d[34],void 0)?d[35]=!0:d[35]=!1,d[35]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSGetBlobFromString.nop"),a[3]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),d[30],d[36]).then(function(a){return a=a,d[37]=a[0],a})},function(a){return c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),d[34],c.blob("c3VwcGxlbWVudGFsX2VuY19hYWQ="),d[36]).then(function(a){return a=a,d[38]=a[0],a})},function(e){return c.blobs.neq(d[38],void 0)?c.sequence([function(e){return d[41]=new c.Map(),d[41].set("sk_ciphertext",d[38]),d[41].set("sk_hash",d[37]),d[42]=a[5].get("message_payload_encryption_keys"),d[43]=d[42].get("payload_key"),c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),d[43],c.blobs.of_string(["message_thread","_",a[1]].join("")),d[14]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return c.blobs.neq(d[44],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[44]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return d[45]=d[48]}]):c.resolve(d[45]=void 0)},function(e){return d[45]!==void 0?c.sequence([function(a){return d[18]!==void 0?c.sequence([function(a){return d[51]=d[18].get("mt"),d[51]?d[52]=!1:d[52]=!0,d[52]?c.resolve(d[53]=void 0):c.sequence([function(a){return d[55]=new c.Map(),d[56]=d[51].keys(),d[57]=c.i64.of_int32(d[56].length),c.i64.gt(d[57],c.i64.cast([0,0]))?c.loopAsync(d[57],function(a){return d[58]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[56],d[58]).then(function(a){return a=a,d[59]=a[0],d[60]=a[1],a})},function(a){return d[61]=d[51].get(d[59]),d[55].set(d[59],d[61])}])}):c.resolve()},function(a){return d[53]=d[55]}])},function(a){return d[53]!==void 0?(d[55]=c.toJSON(d[53]),d[54]=d[55]):d[54]=void 0,d[48]=d[54]}]):c.resolve(d[48]=void 0)},function(b){return d[18]!==void 0?(d[51]=d[18].get("mooos"),d[49]=d[51]):d[49]=void 0,d[50]=new c.Map(),d[50].set("backup_action",a[0]),d[50].set("protobuf_encrypted",d[45]),d[50].set("supplemental_data_encrypted",d[41]),d[50].set("timestamp_ms",a[4]),d[50].set("message_tags",d[48]),d[50].set("serialized_attachment_backup_payload",void 0),d[50].set("maybe_ooo_supplemental_upload",d[49]),b=[d[50],void 0],d[46]=b[0],d[47]=b[1]}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),d[48]=new c.Map(),d[48].set("error_code",c.i64.cast([0,62])),d[48].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[48].set("error_message",""),e=[void 0,d[48]],d[46]=e[0],d[47]=e[1]))},function(a){return a=[d[46],d[47]],d[39]=a[0],d[40]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_ENCRYPTION_FAILED"),d[41]=new c.Map(),d[41].set("error_code",c.i64.cast([0,66])),d[41].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[41].set("error_message",""),e=[void 0,d[41]],d[39]=e[0],d[40]=e[1]))},function(a){return a=[d[39],d[40]],d[24]=a[0],d[25]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error NULL_MAILBOX_ROOT_KEY_V2"),d[26]=new c.Map(),d[26].set("error_code",c.i64.cast([0,27])),d[26].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[26].set("error_message",""),e=[void 0,d[26]],d[24]=e[0],d[25]=e[1]))},function(a){return a=[d[24],d[25]],d[21]=a[0],d[22]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),d[23]=new c.Map(),d[23].set("error_code",c.i64.cast([0,65])),d[23].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[23].set("error_message",""),e=[void 0,d[23]],d[21]=e[0],d[22]=e[1]))},function(a){return a=[d[21],d[22]],d[19]=a[0],d[20]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE"),d[21]=new c.Map(),d[21].set("error_code",c.i64.cast([0,64])),d[21].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[21].set("error_message",""),e=[void 0,d[21]],d[19]=e[0],d[20]=e[1]))},function(a){return a=[d[19],d[20]],d[12]=a[0],d[13]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),d[14]=new c.Map(),d[14].set("error_code",c.i64.cast([0,65])),d[14].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[14].set("error_message",""),e=[void 0,d[14]],d[12]=e[0],d[13]=e[1]))},function(a){return a=[d[12],d[13]],d[10]=a[0],d[11]=a[1],a}]):c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([0,4]))?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[14]=a[0],d[15]=a[1],d[16]=a[2],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[17]=a[0],a})},function(e){return d[18]=new c.Map(),d[18].set("message_tags",d[17]),d[19]=new c.Map(),d[19].set("mt",d[18]),c.blobs.neq(d[14],void 0)?c.sequence([function(e){return d[22]=a[5].get("message_payload_encryption_keys"),d[23]=d[22].get("payload_key"),c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),d[23],c.blobs.of_string(["message_thread","_",a[1]].join("")),d[14]).then(function(a){return a=a,d[24]=a[0],a})},function(a){return c.blobs.neq(d[24],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[24]).then(function(a){return a=a,d[28]=a[0],a})},function(a){return d[25]=d[28]}]):c.resolve(d[25]=void 0)},function(e){return d[25]!==void 0?c.sequence([function(a){return d[19]!==void 0?c.sequence([function(a){return d[31]=d[19].get("mt"),d[31]?d[32]=!1:d[32]=!0,d[32]?c.resolve(d[33]=void 0):c.sequence([function(a){return d[35]=new c.Map(),d[36]=d[31].keys(),d[37]=c.i64.of_int32(d[36].length),c.i64.gt(d[37],c.i64.cast([0,0]))?c.loopAsync(d[37],function(a){return d[38]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[36],d[38]).then(function(a){return a=a,d[39]=a[0],d[40]=a[1],a})},function(a){return d[41]=d[31].get(d[39]),d[35].set(d[39],d[41])}])}):c.resolve()},function(a){return d[33]=d[35]}])},function(a){return d[33]!==void 0?(d[35]=c.toJSON(d[33]),d[34]=d[35]):d[34]=void 0,d[28]=d[34]}]):c.resolve(d[28]=void 0)},function(b){return d[19]!==void 0?(d[31]=d[19].get("mooos"),d[29]=d[31]):d[29]=void 0,d[30]=new c.Map(),d[30].set("backup_action",a[0]),d[30].set("protobuf_encrypted",d[25]),d[30].set("supplemental_data_encrypted",void 0),d[30].set("timestamp_ms",a[4]),d[30].set("message_tags",d[28]),d[30].set("serialized_attachment_backup_payload",void 0),d[30].set("maybe_ooo_supplemental_upload",d[29]),b=[d[30],void 0],d[26]=b[0],d[27]=b[1]}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),d[28]=new c.Map(),d[28].set("error_code",c.i64.cast([0,62])),d[28].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[28].set("error_message",""),e=[void 0,d[28]],d[26]=e[0],d[27]=e[1]))},function(a){return a=[d[26],d[27]],d[20]=a[0],d[21]=a[1],a}]):c.resolve((d[16]?(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),d[24]=new c.Map(),d[24].set("error_code",c.i64.cast([0,70])),d[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[24].set("error_message",""),e=[void 0,d[24]],d[22]=e[0],d[23]=e[1]):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),d[24]=new c.Map(),d[24].set("error_code",c.i64.cast([0,63])),d[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[24].set("error_message",""),e=[void 0,d[24]],d[22]=e[0],d[23]=e[1]),e=[d[22],d[23]],d[20]=e[0],d[21]=e[1]))},function(a){return a=[d[20],d[21]],d[12]=a[0],d[13]=a[1],a}]):c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([0,3]))?c.sequence([function(a){return void 0!==void 0?c.sequence([function(a){return d[19]=(void 0).get("mt"),d[19]?d[20]=!1:d[20]=!0,d[20]?c.resolve(d[21]=void 0):c.sequence([function(a){return d[23]=new c.Map(),d[24]=d[19].keys(),d[25]=c.i64.of_int32(d[24].length),c.i64.gt(d[25],c.i64.cast([0,0]))?c.loopAsync(d[25],function(a){return d[26]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[24],d[26]).then(function(a){return a=a,d[27]=a[0],d[28]=a[1],a})},function(a){return d[29]=d[19].get(d[27]),d[23].set(d[27],d[29])}])}):c.resolve()},function(a){return d[21]=d[23]}])},function(a){return d[21]!==void 0?(d[23]=c.toJSON(d[21]),d[22]=d[23]):d[22]=void 0,d[16]=d[22]}]):c.resolve(d[16]=void 0)},function(b){return void 0!==void 0?(d[19]=(void 0).get("mooos"),d[17]=d[19]):d[17]=void 0,d[18]=new c.Map(),d[18].set("backup_action",a[0]),d[18].set("protobuf_encrypted",void 0),d[18].set("supplemental_data_encrypted",void 0),d[18].set("timestamp_ms",a[4]),d[18].set("message_tags",d[16]),d[18].set("serialized_attachment_backup_payload",void 0),d[18].set("maybe_ooo_supplemental_upload",d[17]),b=[d[18],void 0],d[14]=b[0],d[15]=b[1]}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error UNKNOWN_PROTOBUF_TYPE"),d[16]=new c.Map(),d[16].set("error_code",c.i64.cast([0,60])),d[16].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[16].set("error_message",""),e=[void 0,d[16]],d[14]=e[0],d[15]=e[1]))},function(a){return a=[d[14],d[15]],d[12]=a[0],d[13]=a[1],a}])},function(a){return a=[d[12],d[13]],d[10]=a[0],d[11]=a[1],a}])},function(a){return a=[d[10],d[11]],d[2]=a[0],d[3]=a[1],a}])},function(a){return d[4]=c.i64.of_float(Date.now()),d[5]=c.i64.random(),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[4],d[0])),d[9]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadAndEncryptProtobufWithInputsV2] ",d[6],d[7],d[6],d[8],d[6],d[9]].join("")),c.i64.eq(c.i64.mod_(d[5],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[10]=",",d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadAndEncryptProtobufWithInputsV2",[d[7],d[10],d[8],d[10],d[9]].join(""),d[11],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSLoadAndEncryptProtobufV2",["LSLoadAndEncryptProtobufWithInputsV2","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadAndEncryptProtobufV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.filter(c.db.table(305).fetch(),function(b){return c.i64.eq(b.pendingBackupTaskId,a[0])}).next().then(function(e,f){var g=e.done;e=e.value;return g?(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure] Returning error PROTOBUF_CONTEXT_ROW_NOT_FOUND"),d[11]=new c.Map(),d[11].set("error_code",c.i64.cast([0,67])),d[11].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure"),d[11].set("error_message",""),g=[void 0,d[11]],d[2]=g[0],d[3]=g[1]):(f=e.item,c.sequence([function(e){return c.storedProcedure(b("LSLoadAndEncryptProtobufWithInputsV2"),f.backupAction,a[2],f.toplevelOfflineThreadingId,f.supplementalKey,f.messageTimestampMs,a[1]).then(function(a){return a=a,d[11]=a[0],d[12]=a[1],a})},function(a){return a=[d[11],d[12]],d[2]=a[0],d[3]=a[1],a}]))})},function(a){return d[5]=c.i64.of_float(Date.now()),d[6]=c.i64.random(),d[8]="Finishing execution. Execution time: ",d[9]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[10]=" ms",d[7]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadAndEncryptProtobufV2] ",d[7],d[8],d[7],d[9],d[7],d[10]].join("")),c.i64.eq(c.i64.mod_(d[6],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[11]=",",d[12]=c.createArray(),void 0!==void 0?d[13]=(d[12].push(void 0),d[12]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadAndEncryptProtobufV2",[d[8],d[11],d[9],d[11],d[10]].join(""),d[12],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure";a.__tables__=["pending_protobuf_backups_context"];e.exports=a}),null);
__d("LSLogWebQpl.nop",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("LogWebQplNOP").__setRef("LSLogWebQpl.nop");a=function(a,b,c,d,e,f,g,i){return h.load().then(function(a){return a.call(c,d,e,f,g,i)})};a.__nop_name__="LSLogWebQpl";g["default"]=a}),98);
__d("LSQplAnnotateBool.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g,i,j){try{a=c("nullthrows")(d("EBMarkerIdToQPLEvent").markerIdToQPLEvent(f));e=d("WAHashStringToNumber").hashStringToNumber(g);c("QPLUserFlow").addAnnotations(a,{bool:(f={},f[i]=j,f)},{instanceKey:e});return(h||(h=b("Promise"))).resolve()}catch(a){return(h||(h=b("Promise"))).resolve()}};a.__nop_name__="LSQplAnnotateBool";g["default"]=a}),98);
__d("LSSerializeBackupPayloadV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSDeriveValueSecretRefV2","LSEncryptIdentifiersV2","LSEncryptMessagePayloadV2","LSGetBlobFromString.nop","LSGetLatestEpochKeys","LSIsEncryptionVersionSecure","LSLoadAndEncryptProtobufV2","LSLogMebClientEvent.nop","LSLogWebQpl.nop","LSQplAnnotateBool.nop","LSQplAnnotateString.nop","LSQplMarkEnd.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop","gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1],e=[],f=[];return d.sequence([function(g){return d.sequence([function(b){return e[0]=d.i64.of_float(Date.now()),function(a){d.logger(a).info(a)}("[EncryptedBackups][serializeBackupPayloadV2] Beginning execution."),e[1]=d.i64.of_float(Date.now()),e[19]=d.i64.mul(e[1],d.i64.cast([0,1e6])),e[2]=d.i64.random(),e[6]=d.i64.to_string(e[2]),d.db.table(2).fetch([[[a[0]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?e[3]=void 0:(b=a.item,e[3]=b.dataTraceId)})},function(a){return e[3]!==void 0?e[5]=e[3]:e[5]=void 0,e[6]!==void 0?d.nativeOperation(b("LSQplStartTrace.nop"),d.i64.cast([0,637746317]),e[6],!0,e[5]):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkPoint.nop"),d.i64.cast([0,637746317]),e[6],"LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure_start"):d.resolve()},function(a){return d.islc(d.filter(d.db.table(168).fetch(),function(a){return d.i64.eq(a.authorityLevel,d.i64.cast([0,80]))||!1}),0,d.i64.to_float(d.i64.cast([0,1]))).next().then(function(a,b){var c=a.done;a=a.value;return c?(e[23]=new d.Map(),e[23].set("error_msg","Expected a nonempty query result"),e[23].set("code",d.i64.cast([0,3])),e[23].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),e[24]=d.createArray(),e[25]=(e[24].push(e[23]),e[24]),c=[void 0,e[24]],e[7]=c[0],e[8]=c[1]):(b=a.item,e[23]=new d.Map(),e[23].set("backup_id",b.backupId),e[23].set("device_public_key_blob",b.devicePublicKeyBlob),e[23].set("device_private_key_blob",b.devicePrivateKeyBlob),e[23].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),e[23].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),e[23].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),e[23].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),e[23].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),e[23].set("ocmf_client_state_blob",b.ocmfClientStateBlob),e[23].set("orf_client_state_v2_blob",void 0),e[23].set("orf_v2_authority_level",void 0),e[23].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),e[23].set("device_id",b.deviceId),e[23].set("backup_tenancy",b.backupTenancy),e[23].set("encryption_version",b.encryptionVersion),e[23].set("revision_version",b.revisionVersion),e[23].set("initialize_restore_result",void 0),e[23].set("device_creation_timestamp_sec",void 0),e[23].set("authority_level",b.authorityLevel),c=[e[23],void 0],e[7]=c[0],e[8]=c[1])})},function(f){return e[10]=new d.Map(),e[10].set("value",e[7]),e[10].set("errors",e[8]),e[11]=e[10].get("value"),e[11]!==void 0?d.sequence([function(f){return e[23]=e[11].get("backup_id"),e[24]=e[11].get("device_public_key_blob"),e[25]=e[11].get("device_private_key_blob"),e[26]=e[11].get("epoch_storage_public_key_blob"),e[27]=e[11].get("epoch_storage_private_key_blob"),e[28]=e[11].get("epoch_auth_public_key_blob"),e[29]=e[11].get("epoch_auth_private_key_blob"),e[30]=e[11].get("mailbox_root_key_blob"),e[31]=e[11].get("ocmf_client_state_blob"),e[32]=e[11].get("orf_client_state_v2_blob"),e[33]=e[11].get("orf_v2_authority_level"),e[34]=e[11].get("oblivious_validation_token_blob"),e[35]=e[11].get("device_id"),e[36]=e[11].get("backup_tenancy"),e[37]=e[11].get("encryption_version"),e[38]=e[11].get("revision_version"),e[39]=e[11].get("initialize_restore_result"),e[40]=e[11].get("device_creation_timestamp_sec"),e[41]=e[11].get("authority_level"),d.i64.neq(e[35],void 0)?d.sequence([function(a){return e[46]=void 0,d.i64.neq(e[46],void 0)?d.resolve(e[47]=e[46]):d.sequence([function(a){return e[55]=d.createArray(),d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,0])).then(function(a){return a=a,e[56]=a[0],a})},function(a){return e[56]?e[65]=(e[55].push(d.i64.cast([0,0])),e[55]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,2])).then(function(a){return a=a,e[57]=a[0],a})},function(a){return e[57]?e[65]=(e[55].push(d.i64.cast([0,2])),e[55]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,3])).then(function(a){return a=a,e[58]=a[0],a})},function(a){return e[58]?e[65]=(e[55].push(d.i64.cast([0,3])),e[55]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,4])).then(function(a){return a=a,e[59]=a[0],a})},function(a){return e[59]?e[65]=(e[55].push(d.i64.cast([0,4])),e[55]):0,e[60]=d.createArray(),e[61]=d.i64.of_int32(e[55].length),d.i64.gt(e[61],d.i64.cast([0,0]))?d.loopAsync(e[61],function(a){return e[65]=a,d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[55],e[65]).then(function(a){return a=a,e[66]=a[0],e[67]=a[1],a})},function(a){return e[68]=(e[60].push(e[66]),e[60])}])}):d.resolve()},function(a){return d.sequence([function(a){return e[65]=d.createArray(),e[66]=d.i64.of_int32(e[60].length),d.i64.gt(e[66],d.i64.cast([0,0]))?d.loopAsync(e[66],function(a){return e[68]=a,d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[60],e[68]).then(function(a){return a=a,e[69]=a[0],e[70]=a[1],a})},function(a){return e[71]=(e[65].push(d.i64.to_string(e[69])),e[65])}])}):d.resolve()},function(a){return e[67]=e[65].join(","),e[62]=e[67]}])},function(a){return e[60].some(function(a){return d.i64.eq(e[37],a)})?e[63]=e[37]:e[63]=void 0,d.i64.neq(e[63],void 0)?e[64]=e[63]:e[64]=void 0,e[47]=e[64]}])},function(f){return d.i64.neq(e[47],void 0)?e[48]=e[47]:e[48]=d.i64.cast([0,0]),d.i64.neq(e[36],void 0)?e[49]=e[36]:e[49]=d.i64.cast([0,1]),d.db.table(177).fetch([[[a[0]]],"fk_pending_tasks"]).next().then(function(f,g){var h=f.done;f=f.value;return h?d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[67]=d.i64.of_float(Date.now()),b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[67],d.i64.cast([0,1e6])),e[19]),void 0],e[55]=b[0],e[56]=b[1],e[57]=b[2],e[58]=b[3],e[59]=b[4],e[60]=b[5],e[61]=b[6]):(f=c.item,e[67]=d.i64.of_float(Date.now()),b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[67],d.i64.cast([0,1e6])),e[19]),void 0],e[55]=b[0],e[56]=b[1],e[57]=b[2],e[58]=b[3],e[59]=b[4],e[60]=b[5],e[61]=b[6])})},function(a){return e[63]=new d.Map(),e[63].set("task_id",e[55]),e[63].set("queue_name",e[56]),e[63].set("enqueue_timestamp_ms",e[57]),e[63].set("priority",e[58]),e[63].set("first_executed_timestamp_ms",e[59]),e[63].set("execution_time_ns",e[60]),e[63].set("echo_encoding_execution_time_ns",e[61]),e[64]=new d.Map(),e[64].set("task_metadata",e[63]),e[64].set("action_type",void 0),e[64].set("content_type",void 0),e[64].set("identifiers",void 0),e[64].set("identifiers_v2",void 0),e[64].set("task_creation_source",void 0),e[64].set("message_payload_source",d.i64.cast([0,2])),e[65]=new d.Map(),e[65].set("error_code",d.i64.cast([0,5])),e[65].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[65].set("error_message","Pending backup context row not found"),e[65]!==void 0?(e[67]=e[65].get("stored_procedure"),e[68]=e[65].get("error_code"),e[69]=e[65].get("error_message"),e[70]=".",e[71]=[e[67],e[70],d.i64.to_string(e[68]),e[70],e[69]].join(""),e[6]!==void 0?e[71]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[71]):d.resolve():d.resolve()):d.resolve()},function(a){return void 0!==void 0?(e[67]=(void 0).get("stored_procedure"),e[68]=(void 0).get("error_code"),e[69]=(void 0).get("error_message"),e[70]=".",e[71]=[e[67],e[70],d.i64.to_string(e[68]),e[70],e[69]].join(""),e[6]!==void 0?e[71]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[71]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[66]=d.createArray(),a=[void 0,e[65],e[64],e[66]],e[50]=a[0],e[51]=a[1],e[52]=a[2],e[53]=a[3]}]):(g=f.item,d.sequence([function(b){return e[62]=g.actionType,e[63]=g.contentType,e[68]=g.echoContent,e[69]=g.lsTraceId,e[67]=g.echoEncodingLatencyNs,e[66]=g.attachmentPayload,e[70]=g.tamThreadSubtype,e[71]=g.isInstamadillo,e[55]=new d.Map(),e[55].set("backup_id",d.i64.to_string(e[23])),e[55].set("act_thread_id",g.listKey),e[55].set("timestamp",g.sortKey),e[55].set("otid",g.uniqueKey),d.filter(d.db.table(305).fetch(),function(b){return d.i64.eq(b.pendingBackupTaskId,a[0])}).next().then(function(b,c){var a=b.done;b=b.value;return a?e[56]=!1:(c=b.item,e[55].set("supplemental_otid",c.supplementalOfflineThreadingId),e[55].set("deletion_otid",c.deletionOfflineThreadingId),e[56]=!0)})},function(a){return e[65]=d.i64.eq(void 0,void 0),e[6]!==void 0?d.nativeOperation(b("LSQplAnnotateBool.nop"),d.i64.cast([0,637746317]),e[6],"should_run_device_timestamp_sync",e[65]):d.resolve()},function(f){return e[64]=g.error==null?d.i64.cast([0,0]):g.error,[d.i64.cast([0,0]),d.i64.cast([0,32])].some(function(a){return d.i64.eq(e[64],a)})?d.sequence([function(a){return e[72]=e[55].get("act_thread_id"),e[73]=e[55].get("otid"),d.storedProcedure(b("LSGetLatestEpochKeys"),!1).then(function(a){return a=a,e[74]=a[0],e[75]=a[1],a})},function(a){return e[74]!==void 0?d.sequence([function(a){return d.i64.eq(e[63],d.i64.cast([0,1]))?d.sequence([function(a){return e[85]=d.createArray(),e[90]=(e[85].push(d.i64.cast([0,32])),e[85]),d.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",e[72]].join("")).then(function(a){return a=a,e[86]=a[0],a})},function(a){return d.nativeOperation(b("LSCreateDerivedKeys.nop"),e[86],void 0,e[30],e[85]).then(function(a){return a=a,e[87]=a[0],a})},function(a){return e[87]?e[88]=!1:e[88]=!0,e[88]?d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),e[91]="Got null keys while deriving message list OPE key. Returning null blobish",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[91]].join("")),e[90]=d.createArray(),void 0!==void 0?e[92]=(e[90].push(void 0),e[90]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[91],e[90],d.i64.cast([0,3]))},function(a){return e[89]=void 0}]):d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[87],d.i64.cast([0,0])).then(function(a){return a=a,e[90]=a[0],e[91]=a[1],a})},function(a){return e[89]=e[90]}])},function(a){return e[82]=e[89]}]):d.sequence([function(a){return d.i64.eq(e[62],d.i64.cast([0,2]))?d.sequence([function(a){return e[86]=d.createArray(),e[91]=(e[86].push(d.i64.cast([0,32])),e[86]),d.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",e[73]].join("")).then(function(a){return a=a,e[87]=a[0],a})},function(a){return d.nativeOperation(b("LSCreateDerivedKeys.nop"),e[87],void 0,e[30],e[86]).then(function(a){return a=a,e[88]=a[0],a})},function(a){return e[88]?e[89]=!1:e[89]=!0,e[89]?d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),e[92]="Got null keys while deriving message list OPE key. Returning null blobish",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[92]].join("")),e[91]=d.createArray(),void 0!==void 0?e[93]=(e[91].push(void 0),e[91]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[92],e[91],d.i64.cast([0,3]))},function(a){return e[90]=void 0}]):d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[88],d.i64.cast([0,0])).then(function(a){return a=a,e[91]=a[0],e[92]=a[1],a})},function(a){return e[90]=e[91]}])},function(a){return e[85]=e[90]}]):d.resolve(e[85]=void 0)},function(a){return e[82]=e[85]}])},function(a){return d.blobs.neq(e[82],void 0)?d.sequence([function(a){return e[85]=e[74].get("epoch_keys"),e[86]=e[85].get("epoch_anon_id"),e[87]=e[85].get("epoch_root_key"),e[88]=d.createArray(),e[103]=(e[88].push(d.i64.cast([0,32])),e[88]),d.i64.ge(e[48],d.i64.cast([0,3]))?d.resolve(e[89]=void 0):d.sequence([function(a){return d.nativeOperation(b("LSGetBlobFromString.nop"),e[72]).then(function(a){return a=a,e[103]=a[0],a})},function(a){return e[89]=e[103]}])},function(a){return d.i64.ge(e[48],d.i64.cast([0,4]))?(e[103]="_",e[90]=["message_key_in_epoch",e[103],d.blobs.to_string(e[86]),e[103],"cipher_version",e[103],d.i64.to_string(e[48]),e[103],"thread",e[103],e[72]==null?"":e[72]].join("")):(d.i64.ge(e[48],d.i64.cast([0,3]))?(e[104]="_",e[103]=["message_key_in_epoch",e[104],d.blobs.to_string(e[86]),e[104],"cipher_version",e[104],d.i64.to_string(e[48]),e[104],"thread",e[104],e[72]==null?"":e[72]].join("")):(d.i64.ge(e[48],d.i64.cast([0,2]))?(e[105]="_",e[104]=["message_key_in_epoch",e[105],d.blobs.to_string(e[86]),e[105],"cipher_version",e[105],d.i64.to_string(e[48])].join("")):e[104]=["message_key_in_epoch","_",d.blobs.to_string(e[86])].join(""),e[103]=e[104]),e[90]=e[103]),d.nativeOperation(b("LSGetBlobFromString.nop"),e[90]).then(function(a){return a=a,e[91]=a[0],a})},function(a){return d.nativeOperation(b("LSCreateDerivedKeys.nop"),e[91],e[89],e[87],e[88]).then(function(a){return a=a,e[92]=a[0],a})},function(a){return e[92]?e[93]=!1:e[93]=!0,e[93]?d.resolve(e[94]=void 0):d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[92],d.i64.cast([0,0])).then(function(a){return a=a,e[103]=a[0],e[104]=a[1],a})},function(a){return e[94]=e[103]}])},function(a){return d.filter(d.db.table(169).fetch(),function(a){return d.blobs.eq(a.epochAnonIdBlob,d.blob("MA=="))}).next().then(function(b,c){var a=b.done;b=b.value;return a?(e[103]=new d.Map(),e[103].set("error_msg","Expected a nonempty query result"),e[103].set("code",d.i64.cast([0,3])),e[103].set("src_line","MEBEpochClientUtils.php:556 MEBEpochClientUtils::maybeEpochWithAnonIDFromPersistentEpochsTableDirectly()"),e[104]=d.createArray(),e[105]=(e[104].push(e[103]),e[104]),a=[void 0,e[104]],e[95]=a[0],e[96]=a[1]):(c=b.item,e[103]=new d.Map(),e[103].set("epoch_id",c.epochId),e[103].set("backup_id",c.backupId),e[103].set("epoch_anon_id_blob",c.epochAnonIdBlob),e[103].set("epoch_root_key_blob",c.epochRootKeyBlob),e[103].set("epoch_status",c.epochStatus),e[103].set("epoch_head",c.epochHead),e[103].set("authority_level",c.authorityLevel),a=[e[103],void 0],e[95]=a[0],e[96]=a[1])})},function(a){return e[98]=new d.Map(),e[98].set("value",e[95]),e[98].set("errors",e[96]),e[99]=e[98].get("value"),e[99]!==void 0?d.sequence([function(a){return e[103]=e[99].get("epoch_id"),e[104]=e[99].get("backup_id"),e[105]=e[99].get("epoch_anon_id_blob"),e[106]=e[99].get("epoch_root_key_blob"),e[107]=e[99].get("epoch_status"),e[108]=e[99].get("epoch_head"),e[109]=e[99].get("authority_level"),e[110]=d.createArray(),e[118]=(e[110].push(d.i64.cast([0,32])),e[110]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5zYWx0X21haWxib3hfcm9vdF9rZXlfdjI="),void 0,e[30],e[110]).then(function(a){return a=a,e[111]=a[0],a})},function(a){return e[111]!==void 0?d.sequence([function(a){return e[118]=d.i64.of_int32(e[111].length),d.i64.ge(e[118],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[111],d.i64.cast([0,0])).then(function(a){return a=a,e[120]=a[0],e[121]=a[1],a})},function(a){return e[119]=e[120]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[121]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[121]].join("")),e[120]=d.createArray(),void 0!==void 0?e[122]=(e[120].push(void 0),e[120]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[121],e[120],d.i64.cast([0,3]))},function(a){return e[119]=void 0}])},function(a){return e[112]=e[119]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[119]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[119]].join("")),e[118]=d.createArray(),void 0!==void 0?e[120]=(e[118].push(void 0),e[118]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[119],e[118],d.i64.cast([0,3]))},function(a){return e[112]=void 0}])},function(a){return d.blobs.neq(e[112],void 0)?e[113]=!0:e[113]=!1,e[113]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[114]=d.createArray(),e[118]=(e[114].push(d.i64.cast([0,32])),e[114]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5tYWlsYm94X3Jvb3Rfa2V5X3Yy"),e[112],e[106],e[114]).then(function(a){return a=a,e[115]=a[0],a})},function(a){return e[115]!==void 0?d.sequence([function(a){return e[118]=d.i64.of_int32(e[115].length),d.i64.ge(e[118],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[115],d.i64.cast([0,0])).then(function(a){return a=a,e[120]=a[0],e[121]=a[1],a})},function(a){return e[119]=e[120]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[121]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[121]].join("")),e[120]=d.createArray(),void 0!==void 0?e[122]=(e[120].push(void 0),e[120]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[121],e[120],d.i64.cast([0,3]))},function(a){return e[119]=void 0}])},function(a){return e[116]=e[119]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[119]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[119]].join("")),e[118]=d.createArray(),void 0!==void 0?e[120]=(e[118].push(void 0),e[118]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[119],e[118],d.i64.cast([0,3]))},function(a){return e[116]=void 0}])},function(a){return d.blobs.neq(e[116],void 0)?e[117]=!0:e[117]=!1,e[117]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[100]=e[116]}]):d.sequence([function(a){return e[103]=e[98].get("errors"),e[104]=e[98].get("errors"),function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBEpochClientUtils] Failed to get mailbox_root_key_v2: epoch 0 is not available."),e[106]="Failed to get mailbox_root_key_v2: epoch 0 is not available.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBEpochClientUtils] ","",e[106]].join("")),e[105]=d.createArray(),void 0!==void 0?e[107]=(e[105].push(void 0),e[105]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBEpochClientUtils",e[106],e[105],d.i64.cast([0,3]))},function(a){return e[100]=void 0}])},function(a){return d.blobs.neq(e[94],void 0)?d.sequence([function(a){return d.blobs.neq(e[100],void 0)?d.sequence([function(a){return e[109]=d.createArray(),e[113]=(e[109].push(d.i64.cast([0,32])),e[109]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5mYWxsYmFja19rZXk="),void 0,e[100],e[109]).then(function(a){return a=a,e[110]=a[0],a})},function(a){return e[110]!==void 0?d.sequence([function(a){return e[113]=d.i64.of_int32(e[110].length),d.i64.ge(e[113],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[110],d.i64.cast([0,0])).then(function(a){return a=a,e[115]=a[0],e[116]=a[1],a})},function(a){return e[114]=e[115]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[116]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[116]].join("")),e[115]=d.createArray(),void 0!==void 0?e[117]=(e[115].push(void 0),e[115]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[116],e[115],d.i64.cast([0,3]))},function(a){return e[114]=void 0}])},function(a){return e[111]=e[114]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[114]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[114]].join("")),e[113]=d.createArray(),void 0!==void 0?e[115]=(e[113].push(void 0),e[113]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[114],e[113],d.i64.cast([0,3]))},function(a){return e[111]=void 0}])},function(a){return d.blobs.neq(e[111],void 0)?e[112]=!0:e[112]=!1,e[112]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[103]=e[111]}]):d.resolve(e[103]=void 0)},function(a){return e[104]=e[85].get("epoch_root_key"),e[105]=e[85].get("epoch_anon_id"),e[106]=e[85].get("epoch_id"),e[107]=new d.Map(),e[107].set("payload_key",e[94]),e[107].set("payload_fallback_key",e[103]),e[107].set("encryption_version",e[48]),e[107].set("epoch_root_key",e[104]),e[107].set("epoch_anon_id",e[105]),e[107].set("epoch_id",e[106]),e[108]=new d.Map(),e[108].set("ope_key",e[82]),e[108].set("message_payload_encryption_keys",e[107]),e[108].set("ocmf_shared_key",e[31]),e[108].set("mailbox_base_salt",e[30]),e[108].set("mailbox_root_key_v2",e[100]),a=[e[108],void 0],e[101]=a[0],e[102]=a[1]}]):d.resolve((e[103]=new d.Map(),e[103].set("error_code",d.i64.cast([0,26])),e[103].set("stored_procedure","MEBKeyDeriver"),e[103].set("error_message",""),a=[void 0,e[103]],e[101]=a[0],e[102]=a[1]))},function(a){return a=[e[101],e[102]],e[83]=a[0],e[84]=a[1],a}]):d.resolve((e[85]=new d.Map(),e[85].set("error_code",d.i64.cast([0,25])),e[85].set("stored_procedure","MEBKeyDeriver"),e[85].set("error_message",""),a=[void 0,e[85]],e[83]=a[0],e[84]=a[1]))},function(a){return a=[e[83],e[84]],e[76]=a[0],e[77]=a[1],a}]):d.resolve((a=[void 0,e[75]],e[76]=a[0],e[77]=a[1],a))},function(f){return e[76]!==void 0?d.sequence([function(a){return e[82]=e[55].get("backup_id"),e[83]=e[55].get("act_thread_id"),e[84]=e[55].get("timestamp"),e[85]=e[55].get("otid"),d.storedProcedure(b("LSEncryptIdentifiersV2"),e[62],e[63],e[82],e[83],d.i64.from_string(e[84]),e[85],e[76]).then(function(a){return a=a,e[86]=a[0],e[87]=a[1],a})},function(f){return e[86]!==void 0?d.sequence([function(c){return e[92]=e[55].get("act_thread_id"),d.storedProcedure(b("LSLoadAndEncryptProtobufV2"),a[0],e[76],e[92]).then(function(a){return a=a,e[93]=a[0],e[94]=a[1],a})},function(f){return e[99]=d.i64.eq(e[64],d.i64.cast([0,32]))||!1||c("gkx")("12541")||!1,e[100]=e[93]!==void 0,e[99]&&e[100]?d.sequence([function(a){return e[101]=e[55].get("act_thread_id"),e[102]=e[55].get("backup_id"),d.storedProcedure(b("LSDeriveValueSecretRefV2"),e[101],e[102],e[76]).then(function(a){return a=a,e[103]=a[0],e[104]=a[1],a})},function(c){return e[93]!==void 0?d.sequence([function(c){return e[103]!==void 0?d.sequence([function(a){return e[113]=e[103].get("value_secret_ref"),e[114]=e[86].get("act_thread_id_ocmf_partial"),e[115]=e[86].get("otid_ocmf_partial"),e[116]=e[86].get("timestamp_encrypted"),e[117]=new d.Map(),e[117].set("list_key",e[114]),e[117].set("unique_key",e[115]),e[117].set("sort_key",e[116]),void 0!==void 0?(e[151]=(void 0).get("encrypted_message_payload"),e[152]=(void 0).get("value_secret_ref"),e[153]=new d.Map(),e[153].set("value",e[151]),e[153].set("value_secret_ref",e[152]),e[118]=e[153]):e[118]=void 0,e[119]=new d.Map(),e[119].set("list_item_id",e[117]),e[119].set("list_item",e[118]),e[119].set("action_type",e[62]),e[120]=e[55].get("timestamp"),e[121]=e[55].get("otid"),e[122]=e[55].get("act_thread_id"),e[123]=e[55].get("supplemental_otid"),e[124]=e[55].get("deletion_otid"),e[125]=new d.Map(),e[125].set("timestamp",e[120]),e[125].set("otid",e[121]),e[125].set("wa_thread_id",d.i64.from_string(e[122])),e[125].set("supplemental_otid",e[123]),e[125].set("deletion_otid",e[124]),e[126]=e[76].get("mailbox_base_salt"),d.nativeOperation(b("LSBase64Encode.nop"),e[126]).then(function(a){return a=a,e[127]=a[0],a})},function(a){return e[128]=e[76].get("ocmf_shared_key"),d.nativeOperation(b("LSBase64Encode.nop"),e[128]).then(function(a){return a=a,e[129]=a[0],a})},function(a){return e[130]=new d.Map(),e[130].set("mailbox_root_key",e[127]==null?"":e[127]),e[130].set("ocmf_client_state_blob",e[129]==null?"":e[129]),e[131]=e[86].get("backup_id_ocmf_partial"),e[132]=e[76].get("message_payload_encryption_keys"),e[133]=e[132].get("epoch_id"),e[134]=e[76].get("message_payload_encryption_keys"),e[135]=e[134].get("encryption_version"),e[150]=e[69]==null?"":e[69],e[136]=new d.Map(),e[136].set("mailbox_partial_id",e[131]),e[136].set("action",e[119]),e[136].set("device_id",e[35]),e[136].set("echo_version",d.i64.cast([0,0])),e[136].set("epoch_id",e[133]),e[136].set("trace_id",void 0),e[136].set("encryption_version",e[135]),e[136].set("is_thread",d.i64.eq(e[63],d.i64.cast([0,2]))),e[136].set("raw_identifiers",e[125]),e[136].set("raw_tokens",e[130]),e[136].set("request_id",e[150]),e[136].set("tam_thread_subtype",e[70]==null?d.i64.cast([0,0]):e[70]),e[136].set("is_instamadillo",e[71]==null?!1:e[71]),e[136].set("should_run_device_creation_timestamp_sync",e[65]),e[136].set("value_secret_ref",e[113]),e[136].set("empty_echo_payload_reason",d.i64.cast([0,1])),e[93]!==void 0?d.sequence([function(a){return e[151]=e[93].get("supplemental_data_encrypted"),e[151]!==void 0?d.sequence([function(a){return e[153]=e[93].get("protobuf_encrypted"),e[154]=e[93].get("backup_action"),e[155]=e[93].get("timestamp_ms"),e[156]=e[151].get("sk_ciphertext"),d.nativeOperation(b("LSBase64Encode.nop"),e[156]).then(function(a){return a=a,e[157]=a[0],a})},function(a){return e[158]=e[151].get("sk_hash"),d.nativeOperation(b("LSBase64Encode.nop"),e[158]).then(function(a){return a=a,e[159]=a[0],a})},function(a){return e[160]=e[93].get("message_tags"),e[161]=e[93].get("maybe_ooo_supplemental_upload"),e[162]=new d.Map(),e[162].set("supplementary_data_key",void 0),e[162].set("encrypted_protobuf",e[153]),e[162].set("key_value_backup_action",e[154]),e[162].set("protobuf_ts_ms",e[155]),e[162].set("supplemental_key_ciphertext",e[157]),e[162].set("supplemental_key_hash",e[159]),e[162].set("message_tags",e[160]),e[162].set("maybe_ooo_supplemental_upload",e[161]),e[152]=e[162]}]):d.resolve((e[153]=e[93].get("protobuf_encrypted"),e[154]=e[93].get("backup_action"),e[155]=e[93].get("timestamp_ms"),e[156]=e[93].get("message_tags"),e[157]=new d.Map(),e[157].set("supplementary_data_key",void 0),e[157].set("encrypted_protobuf",e[153]),e[157].set("key_value_backup_action",e[154]),e[157].set("protobuf_ts_ms",e[155]),e[157].set("message_tags",e[156]),e[152]=e[157]))},function(a){return e[136].set("key_value_backup_payload",e[152])}]):d.resolve()},function(a){return e[66]!==void 0?d.resolve(e[136].set("attachment_backup_payload",e[66])):(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure] attachment_payload is null."),e[151]="payload_null",e[6]!==void 0?e[151]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"attachment_info",e[151]):d.resolve():d.resolve())},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplAnnotateBool.nop"),d.i64.cast([0,637746317]),e[6],"process_attachments_via_message_upload",!0):d.resolve()},function(a){return e[150]!==void 0?d.nativeOperation(b("LSLogWebQpl.nop"),e[150],d.i64.cast([0,521481602]),"upload_start",d.i64.cast([0,0]),void 0,void 0):d.resolve()},function(b){return e[137]=d.toJSON(e[136]),d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[151]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[152]=void 0:e[152]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[151],d.i64.cast([0,1e6])),e[19]),e[152]],e[138]=b[0],e[139]=b[1],e[140]=b[2],e[141]=b[3],e[142]=b[4],e[143]=b[5],e[144]=b[6]):(f=c.item,e[151]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[152]=void 0:e[152]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[151],d.i64.cast([0,1e6])),e[19]),e[152]],e[138]=b[0],e[139]=b[1],e[140]=b[2],e[141]=b[3],e[142]=b[4],e[143]=b[5],e[144]=b[6])})},function(a){return e[146]=new d.Map(),e[146].set("task_id",e[138]),e[146].set("queue_name",e[139]),e[146].set("enqueue_timestamp_ms",e[140]),e[146].set("priority",e[141]),e[146].set("first_executed_timestamp_ms",e[142]),e[146].set("execution_time_ns",e[143]),e[146].set("echo_encoding_execution_time_ns",e[144]),e[147]=new d.Map(),e[147].set("task_metadata",e[146]),e[147].set("action_type",e[62]),e[147].set("content_type",e[63]),e[147].set("identifiers",void 0),e[147].set("identifiers_v2",e[55]),e[147].set("task_creation_source",void 0),e[147].set("message_payload_source",d.i64.cast([0,2])),void 0!==void 0?(e[151]=(void 0).get("stored_procedure"),e[152]=(void 0).get("error_code"),e[153]=(void 0).get("error_message"),e[154]=".",e[155]=[e[151],e[154],d.i64.to_string(e[152]),e[154],e[153]].join(""),e[6]!==void 0?e[155]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[155]):d.resolve():d.resolve()):d.resolve()},function(a){return void 0!==void 0?(e[151]=(void 0).get("stored_procedure"),e[152]=(void 0).get("error_code"),e[153]=(void 0).get("error_message"),e[154]=".",e[155]=[e[151],e[154],d.i64.to_string(e[152]),e[154],e[153]].join(""),e[6]!==void 0?e[155]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[155]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!0):d.resolve()},function(a){return e[148]=new d.Map(),e[148].set("payload",e[137]),e[149]=d.createArray(),e[151]=(e[149].push(void 0),e[149]),a=[e[148],void 0,e[147],e[149]],e[109]=a[0],e[110]=a[1],e[111]=a[2],e[112]=a[3]}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[124]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[125]=void 0:e[125]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[124],d.i64.cast([0,1e6])),e[19]),e[125]],e[113]=b[0],e[114]=b[1],e[115]=b[2],e[116]=b[3],e[117]=b[4],e[118]=b[5],e[119]=b[6]):(f=c.item,e[124]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[125]=void 0:e[125]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[124],d.i64.cast([0,1e6])),e[19]),e[125]],e[113]=b[0],e[114]=b[1],e[115]=b[2],e[116]=b[3],e[117]=b[4],e[118]=b[5],e[119]=b[6])})},function(a){return e[121]=new d.Map(),e[121].set("task_id",e[113]),e[121].set("queue_name",e[114]),e[121].set("enqueue_timestamp_ms",e[115]),e[121].set("priority",e[116]),e[121].set("first_executed_timestamp_ms",e[117]),e[121].set("execution_time_ns",e[118]),e[121].set("echo_encoding_execution_time_ns",e[119]),e[122]=new d.Map(),e[122].set("task_metadata",e[121]),e[122].set("action_type",e[62]),e[122].set("content_type",e[63]),e[122].set("identifiers",void 0),e[122].set("identifiers_v2",e[55]),e[122].set("task_creation_source",void 0),e[122].set("message_payload_source",d.i64.cast([0,2])),e[104]!==void 0?(e[124]=e[104].get("stored_procedure"),e[125]=e[104].get("error_code"),e[126]=e[104].get("error_message"),e[127]=".",e[128]=[e[124],e[127],d.i64.to_string(e[125]),e[127],e[126]].join(""),e[6]!==void 0?e[128]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[128]):d.resolve():d.resolve()):d.resolve()},function(a){return void 0!==void 0?(e[124]=(void 0).get("stored_procedure"),e[125]=(void 0).get("error_code"),e[126]=(void 0).get("error_message"),e[127]=".",e[128]=[e[124],e[127],d.i64.to_string(e[125]),e[127],e[126]].join(""),e[6]!==void 0?e[128]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[128]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[123]=d.createArray(),e[124]=(e[123].push(void 0),e[123]),a=[void 0,e[104],e[122],e[123]],e[109]=a[0],e[110]=a[1],e[111]=a[2],e[112]=a[3]}])},function(a){return a=[e[109],e[110],e[111],e[112]],e[105]=a[0],e[106]=a[1],e[107]=a[2],e[108]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[120]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[121]=void 0:e[121]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[120],d.i64.cast([0,1e6])),e[19]),e[121]],e[109]=b[0],e[110]=b[1],e[111]=b[2],e[112]=b[3],e[113]=b[4],e[114]=b[5],e[115]=b[6]):(f=c.item,e[120]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[121]=void 0:e[121]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[120],d.i64.cast([0,1e6])),e[19]),e[121]],e[109]=b[0],e[110]=b[1],e[111]=b[2],e[112]=b[3],e[113]=b[4],e[114]=b[5],e[115]=b[6])})},function(a){return e[117]=new d.Map(),e[117].set("task_id",e[109]),e[117].set("queue_name",e[110]),e[117].set("enqueue_timestamp_ms",e[111]),e[117].set("priority",e[112]),e[117].set("first_executed_timestamp_ms",e[113]),e[117].set("execution_time_ns",e[114]),e[117].set("echo_encoding_execution_time_ns",e[115]),e[118]=new d.Map(),e[118].set("task_metadata",e[117]),e[118].set("action_type",e[62]),e[118].set("content_type",e[63]),e[118].set("identifiers",void 0),e[118].set("identifiers_v2",e[55]),e[118].set("task_creation_source",void 0),e[118].set("message_payload_source",d.i64.cast([0,2])),void 0!==void 0?(e[120]=(void 0).get("stored_procedure"),e[121]=(void 0).get("error_code"),e[122]=(void 0).get("error_message"),e[123]=".",e[124]=[e[120],e[123],d.i64.to_string(e[121]),e[123],e[122]].join(""),e[6]!==void 0?e[124]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[124]):d.resolve():d.resolve()):d.resolve()},function(a){return e[94]!==void 0?(e[120]=e[94].get("stored_procedure"),e[121]=e[94].get("error_code"),e[122]=e[94].get("error_message"),e[123]=".",e[124]=[e[120],e[123],d.i64.to_string(e[121]),e[123],e[122]].join(""),e[6]!==void 0?e[124]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[124]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[119]=d.createArray(),e[120]=(e[119].push(e[94]),e[119]),a=[void 0,void 0,e[118],e[119]],e[105]=a[0],e[106]=a[1],e[107]=a[2],e[108]=a[3]}])},function(a){return a=[e[105],e[106],e[107],e[108]],e[95]=a[0],e[96]=a[1],e[97]=a[2],e[98]=a[3],a}]):d.sequence([function(c){return e[99]===!0&&e[100]===!1?d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[116]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[117]=void 0:e[117]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[116],d.i64.cast([0,1e6])),e[19]),e[117]],e[105]=b[0],e[106]=b[1],e[107]=b[2],e[108]=b[3],e[109]=b[4],e[110]=b[5],e[111]=b[6]):(f=c.item,e[116]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[117]=void 0:e[117]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[116],d.i64.cast([0,1e6])),e[19]),e[117]],e[105]=b[0],e[106]=b[1],e[107]=b[2],e[108]=b[3],e[109]=b[4],e[110]=b[5],e[111]=b[6])})},function(a){return e[113]=new d.Map(),e[113].set("task_id",e[105]),e[113].set("queue_name",e[106]),e[113].set("enqueue_timestamp_ms",e[107]),e[113].set("priority",e[108]),e[113].set("first_executed_timestamp_ms",e[109]),e[113].set("execution_time_ns",e[110]),e[113].set("echo_encoding_execution_time_ns",e[111]),e[114]=new d.Map(),e[114].set("task_metadata",e[113]),e[114].set("action_type",e[62]),e[114].set("content_type",e[63]),e[114].set("identifiers",void 0),e[114].set("identifiers_v2",e[55]),e[114].set("task_creation_source",void 0),e[114].set("message_payload_source",d.i64.cast([0,2])),void 0!==void 0?(e[116]=(void 0).get("stored_procedure"),e[117]=(void 0).get("error_code"),e[118]=(void 0).get("error_message"),e[119]=".",e[120]=[e[116],e[119],d.i64.to_string(e[117]),e[119],e[118]].join(""),e[6]!==void 0?e[120]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[120]):d.resolve():d.resolve()):d.resolve()},function(a){return e[94]!==void 0?(e[116]=e[94].get("stored_procedure"),e[117]=e[94].get("error_code"),e[118]=e[94].get("error_message"),e[119]=".",e[120]=[e[116],e[119],d.i64.to_string(e[117]),e[119],e[118]].join(""),e[6]!==void 0?e[120]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[120]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[115]=d.createArray(),e[116]=(e[115].push(e[94]),e[115]),a=[void 0,void 0,e[114],e[115]],e[101]=a[0],e[102]=a[1],e[103]=a[2],e[104]=a[3]}]):d.sequence([function(c){return d.i64.eq(e[62],d.i64.cast([0,1]))?(e[113]=e[68]===""?void 0:e[68],e[113]!==void 0?(c=[e[113],void 0],e[111]=c[0],e[112]=c[1],c):(e[114]=new d.Map(),e[114].set("error_code",d.i64.cast([0,30])),e[114].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[114].set("error_message",""),c=[void 0,e[114]],e[111]=c[0],e[112]=c[1]),c=[e[111],e[112]],e[105]=c[0],e[106]=c[1]):(c=["",void 0],e[105]=c[0],e[106]=c[1],c),e[105]!==void 0?d.sequence([function(a){return d.i64.eq(e[62],d.i64.cast([0,1]))?d.sequence([function(a){return e[117]=e[55].get("backup_id"),e[118]=e[55].get("act_thread_id"),d.storedProcedure(b("LSEncryptMessagePayloadV2"),e[117],e[118],e[76],e[105]).then(function(a){return a=a,e[119]=a[0],e[120]=a[1],a})},function(a){return a=[e[119],e[120]],e[111]=a[0],e[112]=a[1],a}]):d.resolve((e[117]=new d.Map(),e[117].set("encrypted_message_payload",""),e[117].set("value_secret_ref",""),a=[e[117],void 0],e[111]=a[0],e[112]=a[1]))},function(c){return e[111]!==void 0?d.sequence([function(a){return e[93]!==void 0&&d.i64.eq(e[62],d.i64.cast([0,2]))?d.sequence([function(a){return e[155]=e[55].get("act_thread_id"),e[156]=e[55].get("backup_id"),d.storedProcedure(b("LSDeriveValueSecretRefV2"),e[155],e[156],e[76]).then(function(a){return a=a,e[157]=a[0],e[158]=a[1],a})},function(a){return e[157]!==void 0?(e[160]=e[157].get("value_secret_ref"),e[159]=e[160]):e[159]="",e[117]=e[159]}]):d.resolve(e[117]="")},function(a){return e[118]=e[86].get("act_thread_id_ocmf_partial"),e[119]=e[86].get("otid_ocmf_partial"),e[120]=e[86].get("timestamp_encrypted"),e[121]=new d.Map(),e[121].set("list_key",e[118]),e[121].set("unique_key",e[119]),e[121].set("sort_key",e[120]),e[111]!==void 0?(e[155]=e[111].get("encrypted_message_payload"),e[156]=e[111].get("value_secret_ref"),e[157]=new d.Map(),e[157].set("value",e[155]),e[157].set("value_secret_ref",e[156]),e[122]=e[157]):e[122]=void 0,e[123]=new d.Map(),e[123].set("list_item_id",e[121]),e[123].set("list_item",e[122]),e[123].set("action_type",e[62]),e[124]=e[55].get("timestamp"),e[125]=e[55].get("otid"),e[126]=e[55].get("act_thread_id"),e[127]=e[55].get("supplemental_otid"),e[128]=e[55].get("deletion_otid"),e[129]=new d.Map(),e[129].set("timestamp",e[124]),e[129].set("otid",e[125]),e[129].set("wa_thread_id",d.i64.from_string(e[126])),e[129].set("supplemental_otid",e[127]),e[129].set("deletion_otid",e[128]),e[130]=e[76].get("mailbox_base_salt"),d.nativeOperation(b("LSBase64Encode.nop"),e[130]).then(function(a){return a=a,e[131]=a[0],a})},function(a){return e[132]=e[76].get("ocmf_shared_key"),d.nativeOperation(b("LSBase64Encode.nop"),e[132]).then(function(a){return a=a,e[133]=a[0],a})},function(a){return e[134]=new d.Map(),e[134].set("mailbox_root_key",e[131]==null?"":e[131]),e[134].set("ocmf_client_state_blob",e[133]==null?"":e[133]),e[135]=e[86].get("backup_id_ocmf_partial"),e[136]=e[76].get("message_payload_encryption_keys"),e[137]=e[136].get("epoch_id"),e[138]=e[76].get("message_payload_encryption_keys"),e[139]=e[138].get("encryption_version"),e[154]=e[69]==null?"":e[69],e[140]=new d.Map(),e[140].set("mailbox_partial_id",e[135]),e[140].set("action",e[123]),e[140].set("device_id",e[35]),e[140].set("echo_version",d.i64.cast([0,0])),e[140].set("epoch_id",e[137]),e[140].set("trace_id",void 0),e[140].set("encryption_version",e[139]),e[140].set("is_thread",d.i64.eq(e[63],d.i64.cast([0,2]))),e[140].set("raw_identifiers",e[129]),e[140].set("raw_tokens",e[134]),e[140].set("request_id",e[154]),e[140].set("tam_thread_subtype",e[70]==null?d.i64.cast([0,0]):e[70]),e[140].set("is_instamadillo",e[71]==null?!1:e[71]),e[140].set("should_run_device_creation_timestamp_sync",e[65]),e[140].set("value_secret_ref",e[117]),e[93]!==void 0?d.sequence([function(a){return e[155]=e[93].get("supplemental_data_encrypted"),e[155]!==void 0?d.sequence([function(a){return e[157]=e[93].get("protobuf_encrypted"),e[158]=e[93].get("backup_action"),e[159]=e[93].get("timestamp_ms"),e[160]=e[155].get("sk_ciphertext"),d.nativeOperation(b("LSBase64Encode.nop"),e[160]).then(function(a){return a=a,e[161]=a[0],a})},function(a){return e[162]=e[155].get("sk_hash"),d.nativeOperation(b("LSBase64Encode.nop"),e[162]).then(function(a){return a=a,e[163]=a[0],a})},function(a){return e[164]=e[93].get("message_tags"),e[165]=e[93].get("maybe_ooo_supplemental_upload"),e[166]=new d.Map(),e[166].set("supplementary_data_key",void 0),e[166].set("encrypted_protobuf",e[157]),e[166].set("key_value_backup_action",e[158]),e[166].set("protobuf_ts_ms",e[159]),e[166].set("supplemental_key_ciphertext",e[161]),e[166].set("supplemental_key_hash",e[163]),e[166].set("message_tags",e[164]),e[166].set("maybe_ooo_supplemental_upload",e[165]),e[156]=e[166]}]):d.resolve((e[157]=e[93].get("protobuf_encrypted"),e[158]=e[93].get("backup_action"),e[159]=e[93].get("timestamp_ms"),e[160]=e[93].get("message_tags"),e[161]=new d.Map(),e[161].set("supplementary_data_key",void 0),e[161].set("encrypted_protobuf",e[157]),e[161].set("key_value_backup_action",e[158]),e[161].set("protobuf_ts_ms",e[159]),e[161].set("message_tags",e[160]),e[156]=e[161]))},function(a){return e[140].set("key_value_backup_payload",e[156])}]):d.resolve()},function(a){return e[66]!==void 0?d.resolve(e[140].set("attachment_backup_payload",e[66])):(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure] attachment_payload is null."),e[155]="payload_null",e[6]!==void 0?e[155]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"attachment_info",e[155]):d.resolve():d.resolve())},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplAnnotateBool.nop"),d.i64.cast([0,637746317]),e[6],"process_attachments_via_message_upload",!0):d.resolve()},function(a){return e[154]!==void 0?d.nativeOperation(b("LSLogWebQpl.nop"),e[154],d.i64.cast([0,521481602]),"upload_start",d.i64.cast([0,0]),void 0,void 0):d.resolve()},function(b){return e[141]=d.toJSON(e[140]),d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[155]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[156]=void 0:e[156]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[155],d.i64.cast([0,1e6])),e[19]),e[156]],e[142]=b[0],e[143]=b[1],e[144]=b[2],e[145]=b[3],e[146]=b[4],e[147]=b[5],e[148]=b[6]):(f=c.item,e[155]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[156]=void 0:e[156]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[155],d.i64.cast([0,1e6])),e[19]),e[156]],e[142]=b[0],e[143]=b[1],e[144]=b[2],e[145]=b[3],e[146]=b[4],e[147]=b[5],e[148]=b[6])})},function(a){return e[150]=new d.Map(),e[150].set("task_id",e[142]),e[150].set("queue_name",e[143]),e[150].set("enqueue_timestamp_ms",e[144]),e[150].set("priority",e[145]),e[150].set("first_executed_timestamp_ms",e[146]),e[150].set("execution_time_ns",e[147]),e[150].set("echo_encoding_execution_time_ns",e[148]),e[151]=new d.Map(),e[151].set("task_metadata",e[150]),e[151].set("action_type",e[62]),e[151].set("content_type",e[63]),e[151].set("identifiers",void 0),e[151].set("identifiers_v2",e[55]),e[151].set("task_creation_source",void 0),e[151].set("message_payload_source",d.i64.cast([0,2])),void 0!==void 0?(e[155]=(void 0).get("stored_procedure"),e[156]=(void 0).get("error_code"),e[157]=(void 0).get("error_message"),e[158]=".",e[159]=[e[155],e[158],d.i64.to_string(e[156]),e[158],e[157]].join(""),e[6]!==void 0?e[159]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[159]):d.resolve():d.resolve()):d.resolve()},function(a){return e[94]!==void 0?(e[155]=e[94].get("stored_procedure"),e[156]=e[94].get("error_code"),e[157]=e[94].get("error_message"),e[158]=".",e[159]=[e[155],e[158],d.i64.to_string(e[156]),e[158],e[157]].join(""),e[6]!==void 0?e[159]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[159]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!0):d.resolve()},function(a){return e[152]=new d.Map(),e[152].set("payload",e[141]),e[153]=d.createArray(),e[155]=(e[153].push(e[94]),e[153]),a=[e[152],void 0,e[151],e[153]],e[113]=a[0],e[114]=a[1],e[115]=a[2],e[116]=a[3]}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[128]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[129]=void 0:e[129]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[128],d.i64.cast([0,1e6])),e[19]),e[129]],e[117]=b[0],e[118]=b[1],e[119]=b[2],e[120]=b[3],e[121]=b[4],e[122]=b[5],e[123]=b[6]):(f=c.item,e[128]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[129]=void 0:e[129]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[128],d.i64.cast([0,1e6])),e[19]),e[129]],e[117]=b[0],e[118]=b[1],e[119]=b[2],e[120]=b[3],e[121]=b[4],e[122]=b[5],e[123]=b[6])})},function(a){return e[125]=new d.Map(),e[125].set("task_id",e[117]),e[125].set("queue_name",e[118]),e[125].set("enqueue_timestamp_ms",e[119]),e[125].set("priority",e[120]),e[125].set("first_executed_timestamp_ms",e[121]),e[125].set("execution_time_ns",e[122]),e[125].set("echo_encoding_execution_time_ns",e[123]),e[126]=new d.Map(),e[126].set("task_metadata",e[125]),e[126].set("action_type",e[62]),e[126].set("content_type",e[63]),e[126].set("identifiers",void 0),e[126].set("identifiers_v2",e[55]),e[126].set("task_creation_source",void 0),e[126].set("message_payload_source",d.i64.cast([0,2])),e[112]!==void 0?(e[128]=e[112].get("stored_procedure"),e[129]=e[112].get("error_code"),e[130]=e[112].get("error_message"),e[131]=".",e[132]=[e[128],e[131],d.i64.to_string(e[129]),e[131],e[130]].join(""),e[6]!==void 0?e[132]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[132]):d.resolve():d.resolve()):d.resolve()},function(a){return e[94]!==void 0?(e[128]=e[94].get("stored_procedure"),e[129]=e[94].get("error_code"),e[130]=e[94].get("error_message"),e[131]=".",e[132]=[e[128],e[131],d.i64.to_string(e[129]),e[131],e[130]].join(""),e[6]!==void 0?e[132]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[132]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[127]=d.createArray(),e[128]=(e[127].push(e[94]),e[127]),a=[void 0,e[112],e[126],e[127]],e[113]=a[0],e[114]=a[1],e[115]=a[2],e[116]=a[3]}])},function(a){return a=[e[113],e[114],e[115],e[116]],e[107]=a[0],e[108]=a[1],e[109]=a[2],e[110]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[122]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[123]=void 0:e[123]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[122],d.i64.cast([0,1e6])),e[19]),e[123]],e[111]=b[0],e[112]=b[1],e[113]=b[2],e[114]=b[3],e[115]=b[4],e[116]=b[5],e[117]=b[6]):(f=c.item,e[122]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[123]=void 0:e[123]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[122],d.i64.cast([0,1e6])),e[19]),e[123]],e[111]=b[0],e[112]=b[1],e[113]=b[2],e[114]=b[3],e[115]=b[4],e[116]=b[5],e[117]=b[6])})},function(a){return e[119]=new d.Map(),e[119].set("task_id",e[111]),e[119].set("queue_name",e[112]),e[119].set("enqueue_timestamp_ms",e[113]),e[119].set("priority",e[114]),e[119].set("first_executed_timestamp_ms",e[115]),e[119].set("execution_time_ns",e[116]),e[119].set("echo_encoding_execution_time_ns",e[117]),e[120]=new d.Map(),e[120].set("task_metadata",e[119]),e[120].set("action_type",e[62]),e[120].set("content_type",e[63]),e[120].set("identifiers",void 0),e[120].set("identifiers_v2",e[55]),e[120].set("task_creation_source",void 0),e[120].set("message_payload_source",d.i64.cast([0,2])),e[106]!==void 0?(e[122]=e[106].get("stored_procedure"),e[123]=e[106].get("error_code"),e[124]=e[106].get("error_message"),e[125]=".",e[126]=[e[122],e[125],d.i64.to_string(e[123]),e[125],e[124]].join(""),e[6]!==void 0?e[126]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[126]):d.resolve():d.resolve()):d.resolve()},function(a){return e[94]!==void 0?(e[122]=e[94].get("stored_procedure"),e[123]=e[94].get("error_code"),e[124]=e[94].get("error_message"),e[125]=".",e[126]=[e[122],e[125],d.i64.to_string(e[123]),e[125],e[124]].join(""),e[6]!==void 0?e[126]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[126]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[121]=d.createArray(),e[122]=(e[121].push(e[94]),e[121]),a=[void 0,e[106],e[120],e[121]],e[107]=a[0],e[108]=a[1],e[109]=a[2],e[110]=a[3]}])},function(a){return a=[e[107],e[108],e[109],e[110]],e[101]=a[0],e[102]=a[1],e[103]=a[2],e[104]=a[3],a}])},function(a){return a=[e[101],e[102],e[103],e[104]],e[95]=a[0],e[96]=a[1],e[97]=a[2],e[98]=a[3],a}])},function(a){return a=[e[95],e[96],e[97],e[98]],e[88]=a[0],e[89]=a[1],e[90]=a[2],e[91]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[103]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[104]=void 0:e[104]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[103],d.i64.cast([0,1e6])),e[19]),e[104]],e[92]=b[0],e[93]=b[1],e[94]=b[2],e[95]=b[3],e[96]=b[4],e[97]=b[5],e[98]=b[6]):(f=c.item,e[103]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[104]=void 0:e[104]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[103],d.i64.cast([0,1e6])),e[19]),e[104]],e[92]=b[0],e[93]=b[1],e[94]=b[2],e[95]=b[3],e[96]=b[4],e[97]=b[5],e[98]=b[6])})},function(a){return e[100]=new d.Map(),e[100].set("task_id",e[92]),e[100].set("queue_name",e[93]),e[100].set("enqueue_timestamp_ms",e[94]),e[100].set("priority",e[95]),e[100].set("first_executed_timestamp_ms",e[96]),e[100].set("execution_time_ns",e[97]),e[100].set("echo_encoding_execution_time_ns",e[98]),e[101]=new d.Map(),e[101].set("task_metadata",e[100]),e[101].set("action_type",e[62]),e[101].set("content_type",e[63]),e[101].set("identifiers",void 0),e[101].set("identifiers_v2",e[55]),e[101].set("task_creation_source",void 0),e[101].set("message_payload_source",d.i64.cast([0,2])),e[87]!==void 0?(e[103]=e[87].get("stored_procedure"),e[104]=e[87].get("error_code"),e[105]=e[87].get("error_message"),e[106]=".",e[107]=[e[103],e[106],d.i64.to_string(e[104]),e[106],e[105]].join(""),e[6]!==void 0?e[107]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[107]):d.resolve():d.resolve()):d.resolve()},function(a){return void 0!==void 0?(e[103]=(void 0).get("stored_procedure"),e[104]=(void 0).get("error_code"),e[105]=(void 0).get("error_message"),e[106]=".",e[107]=[e[103],e[106],d.i64.to_string(e[104]),e[106],e[105]].join(""),e[6]!==void 0?e[107]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[107]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[102]=d.createArray(),e[103]=(e[102].push(void 0),e[102]),a=[void 0,e[87],e[101],e[102]],e[88]=a[0],e[89]=a[1],e[90]=a[2],e[91]=a[3]}])},function(a){return a=[e[88],e[89],e[90],e[91]],e[78]=a[0],e[79]=a[1],e[80]=a[2],e[81]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[93]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[94]=void 0:e[94]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[93],d.i64.cast([0,1e6])),e[19]),e[94]],e[82]=b[0],e[83]=b[1],e[84]=b[2],e[85]=b[3],e[86]=b[4],e[87]=b[5],e[88]=b[6]):(f=c.item,e[93]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[94]=void 0:e[94]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[93],d.i64.cast([0,1e6])),e[19]),e[94]],e[82]=b[0],e[83]=b[1],e[84]=b[2],e[85]=b[3],e[86]=b[4],e[87]=b[5],e[88]=b[6])})},function(a){return e[90]=new d.Map(),e[90].set("task_id",e[82]),e[90].set("queue_name",e[83]),e[90].set("enqueue_timestamp_ms",e[84]),e[90].set("priority",e[85]),e[90].set("first_executed_timestamp_ms",e[86]),e[90].set("execution_time_ns",e[87]),e[90].set("echo_encoding_execution_time_ns",e[88]),e[91]=new d.Map(),e[91].set("task_metadata",e[90]),e[91].set("action_type",e[62]),e[91].set("content_type",e[63]),e[91].set("identifiers",void 0),e[91].set("identifiers_v2",e[55]),e[91].set("task_creation_source",void 0),e[91].set("message_payload_source",d.i64.cast([0,2])),e[77]!==void 0?(e[93]=e[77].get("stored_procedure"),e[94]=e[77].get("error_code"),e[95]=e[77].get("error_message"),e[96]=".",e[97]=[e[93],e[96],d.i64.to_string(e[94]),e[96],e[95]].join(""),e[6]!==void 0?e[97]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[97]):d.resolve():d.resolve()):d.resolve()},function(a){return void 0!==void 0?(e[93]=(void 0).get("stored_procedure"),e[94]=(void 0).get("error_code"),e[95]=(void 0).get("error_message"),e[96]=".",e[97]=[e[93],e[96],d.i64.to_string(e[94]),e[96],e[95]].join(""),e[6]!==void 0?e[97]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[97]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[92]=d.createArray(),e[93]=(e[92].push(void 0),e[92]),a=[void 0,e[77],e[91],e[92]],e[78]=a[0],e[79]=a[1],e[80]=a[2],e[81]=a[3]}])},function(a){return a=[e[78],e[79],e[80],e[81]],e[58]=a[0],e[59]=a[1],e[60]=a[2],e[61]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[84]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[85]=void 0:e[85]=e[67],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[84],d.i64.cast([0,1e6])),e[19]),e[85]],e[72]=b[0],e[73]=b[1],e[74]=b[2],e[75]=b[3],e[76]=b[4],e[77]=b[5],e[78]=b[6]):(f=c.item,e[84]=d.i64.of_float(Date.now()),d.i64.eq(e[67],d.i64.cast([0,0]))||d.i64.eq(e[67],void 0)?e[85]=void 0:e[85]=e[67],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[84],d.i64.cast([0,1e6])),e[19]),e[85]],e[72]=b[0],e[73]=b[1],e[74]=b[2],e[75]=b[3],e[76]=b[4],e[77]=b[5],e[78]=b[6])})},function(a){return e[80]=new d.Map(),e[80].set("task_id",e[72]),e[80].set("queue_name",e[73]),e[80].set("enqueue_timestamp_ms",e[74]),e[80].set("priority",e[75]),e[80].set("first_executed_timestamp_ms",e[76]),e[80].set("execution_time_ns",e[77]),e[80].set("echo_encoding_execution_time_ns",e[78]),e[81]=new d.Map(),e[81].set("task_metadata",e[80]),e[81].set("action_type",e[62]),e[81].set("content_type",e[63]),e[81].set("identifiers",void 0),e[81].set("identifiers_v2",e[55]),e[81].set("task_creation_source",void 0),e[81].set("message_payload_source",d.i64.cast([0,2])),e[82]=new d.Map(),e[82].set("error_code",e[64]),e[82].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[82].set("error_message",""),e[82]!==void 0?(e[84]=e[82].get("stored_procedure"),e[85]=e[82].get("error_code"),e[86]=e[82].get("error_message"),e[87]=".",e[88]=[e[84],e[87],d.i64.to_string(e[85]),e[87],e[86]].join(""),e[6]!==void 0?e[88]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[88]):d.resolve():d.resolve()):d.resolve()},function(a){return void 0!==void 0?(e[84]=(void 0).get("stored_procedure"),e[85]=(void 0).get("error_code"),e[86]=(void 0).get("error_message"),e[87]=".",e[88]=[e[84],e[87],d.i64.to_string(e[85]),e[87],e[86]].join(""),e[6]!==void 0?e[88]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[88]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[83]=d.createArray(),a=[void 0,e[82],e[81],e[83]],e[58]=a[0],e[59]=a[1],e[60]=a[2],e[61]=a[3]}])},function(a){return a=[e[58],e[59],e[60],e[61]],e[50]=a[0],e[51]=a[1],e[52]=a[2],e[53]=a[3],a}]))})},function(a){return a=[e[50],e[51],e[52],e[53]],e[42]=a[0],e[43]=a[1],e[44]=a[2],e[45]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(b,c){var f=b.done;b=b.value;return f?(e[58]=d.i64.of_float(Date.now()),f=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[58],d.i64.cast([0,1e6])),e[19]),void 0],e[46]=f[0],e[47]=f[1],e[48]=f[2],e[49]=f[3],e[50]=f[4],e[51]=f[5],e[52]=f[6]):(c=b.item,e[58]=d.i64.of_float(Date.now()),f=[a[0],c.queueName,c.enqueueTimestampMs,void 0,c.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[58],d.i64.cast([0,1e6])),e[19]),void 0],e[46]=f[0],e[47]=f[1],e[48]=f[2],e[49]=f[3],e[50]=f[4],e[51]=f[5],e[52]=f[6])})},function(a){return e[54]=new d.Map(),e[54].set("task_id",e[46]),e[54].set("queue_name",e[47]),e[54].set("enqueue_timestamp_ms",e[48]),e[54].set("priority",e[49]),e[54].set("first_executed_timestamp_ms",e[50]),e[54].set("execution_time_ns",e[51]),e[54].set("echo_encoding_execution_time_ns",e[52]),e[55]=new d.Map(),e[55].set("task_metadata",e[54]),e[55].set("action_type",void 0),e[55].set("content_type",void 0),e[55].set("identifiers",void 0),e[55].set("identifiers_v2",void 0),e[55].set("task_creation_source",void 0),e[55].set("message_payload_source",d.i64.cast([0,2])),e[56]=new d.Map(),e[56].set("error_code",d.i64.cast([0,24])),e[56].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[56].set("error_message",""),e[56]!==void 0?(e[58]=e[56].get("stored_procedure"),e[59]=e[56].get("error_code"),e[60]=e[56].get("error_message"),e[61]=".",e[62]=[e[58],e[61],d.i64.to_string(e[59]),e[61],e[60]].join(""),e[6]!==void 0?e[62]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[62]):d.resolve():d.resolve()):d.resolve()},function(a){return void 0!==void 0?(e[58]=(void 0).get("stored_procedure"),e[59]=(void 0).get("error_code"),e[60]=(void 0).get("error_message"),e[61]=".",e[62]=[e[58],e[61],d.i64.to_string(e[59]),e[61],e[60]].join(""),e[6]!==void 0?e[62]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[62]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[57]=d.createArray(),a=[void 0,e[56],e[55],e[57]],e[42]=a[0],e[43]=a[1],e[44]=a[2],e[45]=a[3]}])},function(a){return a=[e[42],e[43],e[44],e[45]],e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=a[3],a}]):d.sequence([function(b){return e[23]=e[10].get("errors"),e[24]=e[10].get("errors"),d.db.table(2).fetch([[[a[0]]]]).next().then(function(b,c){var f=b.done;b=b.value;return f?(e[37]=d.i64.of_float(Date.now()),f=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[37],d.i64.cast([0,1e6])),e[19]),void 0],e[25]=f[0],e[26]=f[1],e[27]=f[2],e[28]=f[3],e[29]=f[4],e[30]=f[5],e[31]=f[6]):(c=b.item,e[37]=d.i64.of_float(Date.now()),f=[a[0],c.queueName,c.enqueueTimestampMs,void 0,c.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[37],d.i64.cast([0,1e6])),e[19]),void 0],e[25]=f[0],e[26]=f[1],e[27]=f[2],e[28]=f[3],e[29]=f[4],e[30]=f[5],e[31]=f[6])})},function(a){return e[33]=new d.Map(),e[33].set("task_id",e[25]),e[33].set("queue_name",e[26]),e[33].set("enqueue_timestamp_ms",e[27]),e[33].set("priority",e[28]),e[33].set("first_executed_timestamp_ms",e[29]),e[33].set("execution_time_ns",e[30]),e[33].set("echo_encoding_execution_time_ns",e[31]),e[34]=new d.Map(),e[34].set("task_metadata",e[33]),e[34].set("action_type",void 0),e[34].set("content_type",void 0),e[34].set("identifiers",void 0),e[34].set("identifiers_v2",void 0),e[34].set("task_creation_source",void 0),e[34].set("message_payload_source",d.i64.cast([0,2])),e[35]=new d.Map(),e[35].set("error_code",d.i64.cast([0,1])),e[35].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[35].set("error_message",""),e[35]!==void 0?(e[37]=e[35].get("stored_procedure"),e[38]=e[35].get("error_code"),e[39]=e[35].get("error_message"),e[40]=".",e[41]=[e[37],e[40],d.i64.to_string(e[38]),e[40],e[39]].join(""),e[6]!==void 0?e[41]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[41]):d.resolve():d.resolve()):d.resolve()},function(a){return void 0!==void 0?(e[37]=(void 0).get("stored_procedure"),e[38]=(void 0).get("error_code"),e[39]=(void 0).get("error_message"),e[40]=".",e[41]=[e[37],e[40],d.i64.to_string(e[38]),e[40],e[39]].join(""),e[6]!==void 0?e[41]!==void 0?d.nativeOperation(b("LSQplAnnotateString.nop"),d.i64.cast([0,637746317]),e[6],"exception_error",e[41]):d.resolve():d.resolve()):d.resolve()},function(a){return e[6]!==void 0?d.nativeOperation(b("LSQplMarkEnd.nop"),d.i64.cast([0,637746317]),e[6],!1):d.resolve()},function(a){return e[36]=d.createArray(),a=[void 0,e[35],e[34],e[36]],e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=a[3]}])},function(a){return e[16]=d.i64.of_float(Date.now()),e[17]=d.i64.random(),e[20]="Finishing execution. Execution time: ",e[21]=d.i64.to_string(d.i64.sub(e[16],e[0])),e[22]=" ms",e[18]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][serializeBackupPayloadV2] ",e[18],e[20],e[18],e[21],e[18],e[22]].join("")),d.i64.eq(d.i64.mod_(e[17],d.i64.cast([0,1e3])),d.i64.cast([0,0]))?(e[23]=",",e[24]=d.createArray(),void 0!==void 0?e[25]=(e[24].push(void 0),e[24]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"serializeBackupPayloadV2",[e[20],e[23],e[21],e[23],e[22]].join(""),e[24],d.i64.cast([0,4]))):d.resolve()},function(a){return a=[e[12],e[13],e[14],e[15]],f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3],a}])},function(a){return d.resolve(f)}])}a.__sproc_name__="LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure";a.__tables__=["pending_tasks","secure_encrypted_backups_client_state","pending_backups_context_v2","pending_protobuf_backups_context","secure_encrypted_backups_epochs"];d=a;g["default"]=d}),98);
__d("LSTaskSerializerEncryptedBackupsUpload",["LSArrayGetObjectAt","LSLogMebClientEvent.nop","LSSerializeBackupPayloadV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsUpload] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.forEach(c.db.table(177).fetch([[[a[0]]],"fk_pending_tasks"]),function(a){var b=a.update;a.item;return b({backupStatus:c.i64.cast([0,2])})})},function(e){return c.storedProcedure(b("LSSerializeBackupPayloadV2"),a[0]).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],d[4]=a[2],d[5]=a[3],a})},function(a){return d[6]=c.createArray(),d[7]=c.i64.of_int32(d[5].length),c.i64.gt(d[7],c.i64.cast([0,0]))?c.loopAsync(d[7],function(a){return d[23]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[5],d[23]).then(function(a){return a=a,d[24]=a[0],d[25]=a[1],a})},function(a){return d[24]!==void 0?d[26]=(d[6].push(d[24]),d[6]):0}])}):c.resolve()},function(a){return d[8]=c.i64.of_int32(d[6].length),c.i64.gt(d[8],c.i64.cast([0,0]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[6],c.i64.cast([0,0])).then(function(a){return a=a,d[23]=a[0],d[24]=a[1],a})},function(a){return d[9]=d[23]}]):c.resolve(d[9]=void 0)},function(a){return d[2]?d[10]=!1:d[10]=!0,d[10]?(d[3]?d[23]=!1:d[23]=!0,d[23]?(a=[void 0,void 0,d[9],d[6],d[4]],d[24]=a[0],d[25]=a[1],d[26]=a[2],d[27]=a[3],d[28]=a[4],a):(a=[void 0,d[3],d[9],d[6],d[4]],d[24]=a[0],d[25]=a[1],d[26]=a[2],d[27]=a[3],d[28]=a[4],a),a=[d[24],d[25],d[26],d[27],d[28]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4]):(d[23]=d[2].get("payload"),a=[d[23],d[3],d[9],d[6],d[4]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4]),d[23]=new c.Map(),d[24]=d[23].set("success",d[11]),d[25]=d[23].set("failure",d[12]),d[26]=d[23].set("protobuf_failure",d[13]),d[27]=d[23].set("protobuf_failures",d[14]),d[28]=d[23].set("context",d[15]),d[29]=c.toJSON(d[23]),d[16]=d[29],d[17]=c.i64.of_float(Date.now()),d[18]=c.i64.random(),d[20]="Finishing execution. Execution time: ",d[21]=c.i64.to_string(c.i64.sub(d[17],d[0])),d[22]=" ms",d[19]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsUpload] ",d[19],d[20],d[19],d[21],d[19],d[22]].join("")),c.i64.eq(c.i64.mod_(d[18],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[23]=",",d[24]=c.createArray(),void 0!==void 0?d[25]=(d[24].push(void 0),d[24]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsUpload",[d[20],d[23],d[21],d[23],d[22]].join(""),d[24],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[16],c.i64.cast([0,50026])],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadStoredProcedure";a.__tables__=["pending_backups_context_v2"];e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsUploadProtobufOnly",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[],e=[];return d[0]=new c.Map(),d[0].set("error_code",c.i64.cast([0,802])),d[0].set("stored_procedure","LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadProtobufOnlyStoredProcedure"),d[0].set("error_message",""),d[2]=new c.Map(),d[3]=d[2].set("success",void 0),d[4]=d[2].set("failure",d[0]),d[5]=d[2].set("context",void 0),d[6]=c.toJSON(d[2]),d[1]=d[6],a=[d[1],c.i64.cast([0,50042]),void 0],e[0]=a[0],e[1]=a[1],e[2]=a[2],c.resolve(e)}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadProtobufOnlyStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsUploadSenderBackup",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(a){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsUploadSenderBackup] Beginning execution."),d[1]=c.i64.of_float(Date.now()),function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure] LSEncryptedBackupsMinosEncrypt native op not supported"),d[3]="LSEncryptedBackupsMinosEncrypt native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure] ","",d[3]].join("")),d[2]=c.createArray(),void 0!==void 0?d[12]=(d[2].push(void 0),d[2]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure",d[3],d[2],c.i64.cast([0,3]))},function(a){return d[4]=new c.Map(),d[4].set("error_code",c.i64.cast([0,3])),d[4].set("stored_procedure","taskSerializerEncryptedBackupsUploadSenderBackup"),d[4].set("error_message",""),d[12]=new c.Map(),d[13]=d[12].set("success",void 0),d[14]=d[12].set("failure",d[4]),d[15]=d[12].set("context",void 0),d[16]=c.toJSON(d[12]),d[5]=d[16],d[6]=c.i64.of_float(Date.now()),d[7]=c.i64.random(),d[9]="Finishing execution. Execution time: ",d[10]=c.i64.to_string(c.i64.sub(d[6],d[0])),d[11]=" ms",d[8]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsUploadSenderBackup] ",d[8],d[9],d[8],d[10],d[8],d[11]].join("")),c.i64.eq(c.i64.mod_(d[7],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[12]=",",d[13]=c.createArray(),void 0!==void 0?d[14]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsUploadSenderBackup",[d[9],d[12],d[10],d[12],d[11]].join(""),d[13],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[5],c.i64.cast([0,50057]),void 0],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTaskSerializerMuteThreadV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(32).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("TaskSerializerMuteThreadV2: Task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2]):(e=d.item,b.sequence([function(a){return c[8]=e.threadKey,b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?(c[9]=b.createArray(),c[10]=(c[9].push("TaskSerializerMuteThreadV2: Thread not found"),c[9]),c[11]=(c[9].push(c[8]),c[9]),c[12]=b.toJSON(c[9]),function(a){b.logger(a).mustfix(a)}(c[12]),a=[void 0,void 0,void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2]):(e=d.item,b.sequence([function(a){return b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[9]=b.i64.cast([0,1]):(e=d.item,c[14]=e.syncGroup,b.i64.neq(c[14],void 0)?c[13]=c[14]:c[13]=b.i64.cast([0,1]),c[9]=c[13])})},function(a){return c[11]=new b.Map(),c[11].set("thread_key",c[8]),c[11].set("mailbox_type",b.i64.cast([0,0])),c[11].set("mute_expire_time_ms",e.muteExpireTimeMs),c[11].set("sync_group",c[9]),c[12]=b.toJSON(c[11]),a=[c[12],b.i64.cast([0,144]),void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2]}]))})},function(a){return a=[c[4],c[5],c[6]],c[0]=a[0],c[1]=a[1],c[2]=a[2],a}]))})},function(a){return a=[c[0],c[1]],d[0]=a[0],d[1]=a[1],a}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxTaskSerializerMuteThreadV2StoredProcedure";a.__tables__=["threads_optimistic_context","threads"];e.exports=a}),null);
__d("LSTaskSerializerRemoveThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(32).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("TaskSerializerRemoveThreadV2: Task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2]):(e=d.item,c[7]=e.removeType,b.i64.neq(c[7],void 0)?(c[8]=new b.Map(),c[8].set("thread_key",e.threadKey),c[8].set("remove_type",c[7]),c[8].set("sync_group",e.syncGroup==null?b.i64.cast([0,1]):e.syncGroup),c[9]=b.toJSON(c[8]),f=[c[9],b.i64.cast([0,146]),void 0],c[4]=f[0],c[5]=f[1],c[6]=f[2]):(d=[void 0,void 0,void 0],c[4]=d[0],c[5]=d[1],c[6]=d[2],d),e=[c[4],c[5],c[6]],c[0]=e[0],c[1]=e[1],c[2]=e[2])})},function(a){return a=[c[0],c[1]],d[0]=a[0],d[1]=a[1],a}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxTaskSerializerRemoveThreadStoredProcedure";a.__tables__=["threads_optimistic_context"];e.exports=a}),null);
__d("LSTaskSerializerSendMessageV2",["LSSymmetricEncryptionCreateEncryptedString.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(31).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2]):(e=d.item,b.sequence([function(d){return c[11]=e.offlineThreadingId,c[12]=e.messageId,c[23]=e.threadAttributionSource,c[9]=e.platformRef,c[10]=e.platformToken,c[8]=e.replySourceId,c[13]=e.replySourceType,c[22]=e.sendType,c[25]=e.markThreadRead,c[15]=e.initiatingSource,c[16]=e.skipUrlPreviewGen,c[18]=e.textHasLinks,c[19]=e.dataclassParams,c[20]=e.multitabEnv,c[21]=e.metadataDataclass,c[17]=e.richTextFormatType,c[24]=e.subthreadParentMessageId,c[14]=e.isExclusiveToSubthread,b.db.table(12).fetch([[[c[11]]],"optimistic"]).next().then(function(e,f){var d=e.done;e=e.value;return d?(c[26]=b.createArray(),c[27]=(c[26].push("OTID not found"),c[26]),c[28]=(c[26].push(c[11]),c[26]),c[29]=b.toJSON(c[26]),function(a){b.logger(a).mustfix(a)}(c[29]),d=[void 0,void 0,void 0],c[4]=d[0],c[5]=d[1],c[6]=d[2]):(f=e.item,b.sequence([function(d){return c[34]=f.text,c[30]=f.threadKey,c[35]=f.messageId,c[43]=f.senderId,c[32]=f.stickerId,c[37]=f.mentionOffsets,c[38]=f.mentionLengths,c[31]=f.mentionIds,c[39]=f.mentionTypes,c[42]=f.replyType,c[40]=f.isForwarded,c[36]=f.forwardScore,c[41]=f.hotEmojiSize,c[33]=f.metadataDataclass,b.db.table(9).fetch([[[c[30]]]]).next().then(function(e,g){var d=e.done;e=e.value;return d?(c[44]=b.createArray(),c[45]=(c[44].push("thread not found"),c[44]),c[46]=(c[44].push(c[30]),c[44]),c[47]=b.toJSON(c[44]),function(a){b.logger(a).mustfix(a)}(c[47]),d=[void 0,void 0,void 0],c[26]=d[0],c[27]=d[1],c[28]=d[2]):(g=e.item,b.sequence([function(d){return c[51]=g.threadName,c[50]=g.threadKey,c[52]=g.mailboxType,c[44]=g.threadType,c[53]=g.capabilities,c[54]=g.capabilities2,c[55]=g.capabilities3,c[56]=g.capabilities4,c[57]=g.capabilities5,b.db.table(2).fetch([[[a[0]]]]).next().then(function(e,f){var d=e.done;e=e.value;return d?c[45]=!1:(f=e.item,b.sequence([function(d){return b.islc(b.db.table(2).fetch([[[f.queueName]],"queueNameTaskId"]),0,b.i64.to_float(b.i64.cast([0,1]))).next().then(function(e,f){var d=e.done;e=e.value;return d?c[58]=!1:(f=e.item,c[58]=b.i64.eq(f.taskId,a[0]))})},function(a){return c[45]=c[58]}]))})},function(a){return b.i64.eq(g.authorityLevel,b.i64.cast([0,20]))&&(b.i64.eq(c[44],b.i64.cast([0,2]))||b.i64.eq(c[44],b.i64.cast([0,5]))||b.i64.eq(c[44],b.i64.cast([0,26])))&&c[45]?b.sequence([function(a){return c[61]=c[22]==null?b.i64.cast([0,1]):c[22],b.db.table(9).fetch([[[c[30]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[58]=b.i64.cast([0,1]):(e=d.item,c[77]=e.syncGroup,b.i64.neq(c[77],void 0)?c[76]=c[77]:c[76]=b.i64.cast([0,1]),c[58]=c[76])})},function(a){return c[60]=new b.Map(),c[60].set("thread_id",c[30]),c[60].set("otid",c[11]),c[60].set("source",c[23]==null?b.i64.cast([0,0]):c[23]),c[60].set("send_type",b.i64.cast([0,1])),c[60].set("sync_group",c[58]),c[60].set("mark_thread_read",c[25]),b.i64.eq(c[61],b.i64.cast([0,1]))?b.resolve(c[60].set("text",c[34])):b.i64.eq(c[61],b.i64.cast([0,2]))?b.resolve(b.i64.neq(c[32],void 0)?(c[60].set("sticker_id",c[32]),c[60].set("send_type",c[61])):0):b.i64.eq(c[61],b.i64.cast([0,7]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[30],c[35]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[76]=a[0],c[77]=a[1],a):(d=b.item,a=[d.filename,d.attributionAppId],c[76]=a[0],c[77]=a[1])})},function(a){return c[76]!==void 0?b.i64.neq(c[77],void 0)?(c[60].set("url",c[76]),c[60].set("attribution_app_id",c[77]),c[60].set("send_type",c[61]),c[33]!==void 0?c[60].set("metadata_dataclass",c[33]):0):0:0}]):b.i64.eq(c[61],b.i64.cast([0,3]))?b.sequence([function(a){return c[60].set("text",c[34]),c[76]=b.createArray(),c[77]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[c[30],c[35]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return c[78]=a.offlineAttachmentId,c[79]=(c[76].push(b.i64.from_string(a.attachmentFbid)),c[76]),c[78]!==void 0?c[79]=(c[77].push(c[78]),c[77]):0})},function(a){return c[60].set("attachment_fbids",c[76]),b.i64.eq(c[61],b.i64.cast([0,9]))?c[60].set("offline_attachment_ids",c[77]):0,c[60].set("send_type",c[61])}]):b.i64.eq(c[61],b.i64.cast([0,9]))?b.sequence([function(a){return c[60].set("text",c[34]),c[76]=b.createArray(),c[77]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[c[30],c[35]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return c[78]=a.offlineAttachmentId,c[79]=(c[76].push(b.i64.from_string(a.attachmentFbid)),c[76]),c[78]!==void 0?c[79]=(c[77].push(c[78]),c[77]):0})},function(a){return c[60].set("attachment_fbids",c[76]),b.i64.eq(c[61],b.i64.cast([0,9]))?c[60].set("offline_attachment_ids",c[77]):0,c[60].set("send_type",c[61])}]):b.i64.eq(c[61],b.i64.cast([0,4]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[30],c[35]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[76]=void 0:(d=b.item,c[76]=d.attachmentFbid)})},function(a){return b.db.table(16).fetch([[[c[30],c[35]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[78]=void 0:(d=b.item,c[78]=d.actionUrl)})},function(a){return c[76]!==void 0?(c[60].set("text",c[34]),c[78]!==void 0?c[60].set("url",c[78]):0,c[60].set("forwarded_share_id",c[76]),c[60].set("send_type",c[61])):0}]):b.i64.eq(c[61],b.i64.cast([0,5]))?b.resolve(c[12]!==void 0?(c[60].set("forwarded_msg_id",c[12]),c[60].set("send_type",c[61]),b.i64.neq(c[36],void 0)?c[60].set("forward_score",c[36]):0,c[60].set("strip_forwarded_msg_caption",!1)):0):b.i64.eq(c[61],b.i64.cast([0,6]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[30],c[35]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[76]=a[0],c[77]=a[1],a):(d=b.item,a=[d.filename,d.attributionAppId],c[76]=a[0],c[77]=a[1])})},function(a){return c[76]!==void 0?(c[60].set("url",c[76]),c[60].set("text",c[34]),c[60].set("send_type",c[61])):0}]):b.i64.eq(c[61],b.i64.cast([0,11]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[30],c[35]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[76]=a[0],c[77]=a[1],a):(d=b.item,a=[d.actionUrl,d.attributionAppId],c[76]=a[0],c[77]=a[1])})},function(a){return c[76]!==void 0?(c[60].set("url",c[76]),c[60].set("text",c[34]),c[60].set("send_type",c[61])):0}]):b.resolve(b.i64.eq(c[61],b.i64.cast([0,12]))?c[60].set("send_type",c[61]):0)},function(a){return c[72]=c[24]==null?void 0:c[24],c[71]=c[8]===""?void 0:c[8],c[71]!==void 0?b.i64.neq(c[13],void 0)?(c[76]=new b.Map(),c[76].set("reply_source_id",c[71]),c[76].set("reply_source_type",c[13]),c[76].set("reply_type",c[42]==null?b.i64.cast([0,0]):c[42]),c[76].set("reply_source_attachment_id",void 0),c[60].set("reply_metadata",c[76])):0:0,c[72]!==void 0?c[14]!==void 0?(c[76]=new b.Map(),c[76].set("subthread_parent_message_id",c[72]),c[76].set("is_exclusive_to_subthread",c[14]),c[60].set("subthread_data",c[76])):0:0,c[73]=c[31]===""?void 0:c[31],c[73]!==void 0?(c[76]=c[37]===""?void 0:c[37],c[76]!==void 0?(c[77]=c[38]===""?void 0:c[38],c[77]!==void 0?(c[78]=new b.Map(),c[78].set("mention_ids",c[73]),c[78].set("mention_offsets",c[76]),c[78].set("mention_lengths",c[77]),c[78].set("mention_types",c[39]===""?void 0:c[39]),c[60].set("mention_data",c[78])):0):0):0,c[40]!==void 0?c[60].set("is_forwarded",c[40]):0,c[74]=c[9]===""?void 0:c[9],c[74]!==void 0?c[60].set("platform_ref",c[74]):0,c[75]=c[10]===""?void 0:c[10],c[75]!==void 0?c[60].set("platform_token",c[75]):0,[b.i64.cast([0,1]),b.i64.cast([0,2])].some(function(a){return b.i64.eq(c[61],a)})?b.i64.neq(c[41],void 0)?c[60].set("hot_emoji_size",c[41]):0:0,b.i64.neq(c[15],void 0)?c[60].set("initiating_source",c[15]):0,c[16]!==void 0?c[60].set("skip_url_preview_gen",c[16]):0,b.i64.neq(c[17],void 0)?c[60].set("rich_text_format_type",c[17]):0,b.resolve()},function(a){return c[18]!==void 0?c[60].set("text_has_links",c[18]):0,c[19]!==void 0?c[60].set("dataclass_params",c[19]):0,c[20]!==void 0?c[60].set("multitab_env",c[20]):0,c[21]!==void 0?c[60].set("metadata_dataclass",c[21]):0,b.filter(b.db.table(14).fetch([[[c[50],c[43]]]]),function(a){return b.i64.eq(a.threadKey,c[50])&&b.i64.eq(b.i64.cast([0,0]),c[52])&&b.i64.eq(a.contactId,c[43])}).next().then(function(d,e){var a=d.done;d=d.value;return a?c[62]=!1:(e=d.item,b.i64.eq(c[44],b.i64.cast([0,152]))?(c[77]=e.threadRoles,b.i64.lt(b.i64.cast([0,7]),b.i64.cast([0,0]))||b.i64.gt(b.i64.cast([0,7]),b.i64.cast([0,9]))?c[78]=!1:c[78]=!b.i64.eq(b.i64.and_(b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.cast([0,7]))),c[77]),b.i64.cast([0,0])),c[79]=c[53],c[80]=c[54],c[81]=c[55],c[82]=c[56],c[83]=c[57],c[85]=b.i64.div(b.i64.cast([0,223]),b.i64.cast([0,64])),c[86]=b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.sub(b.i64.cast([0,223]),b.i64.mul(c[85],b.i64.cast([0,64]))))),b.i64.lt(b.i64.cast([0,223]),b.i64.cast([0,0]))||b.i64.gt(b.i64.cast([0,223]),b.i64.cast([0,294]))?c[84]=!1:(b.i64.eq(c[85],b.i64.cast([0,0]))?c[87]=!b.i64.eq(b.i64.and_(c[86],c[79]),b.i64.cast([0,0])):(b.i64.eq(c[85],b.i64.cast([0,1]))?c[88]=!b.i64.eq(b.i64.and_(c[86],c[80]),b.i64.cast([0,0])):(b.i64.eq(c[85],b.i64.cast([0,2]))?c[89]=!b.i64.eq(b.i64.and_(c[86],c[81]),b.i64.cast([0,0])):(b.i64.eq(c[85],b.i64.cast([0,3]))?c[90]=!b.i64.eq(b.i64.and_(c[86],c[82]),b.i64.cast([0,0])):(b.i64.eq(c[85],b.i64.cast([0,4]))?c[91]=!b.i64.eq(b.i64.and_(c[86],c[83]),b.i64.cast([0,0])):c[91]=!1,c[90]=c[91]),c[89]=c[90]),c[88]=c[89]),c[87]=c[88]),c[84]=c[87]),c[78]===c[84]?0:(function(a){b.logger(a).mustfix(a)}("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),b["throw"]("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),c[76]=c[78]):c[76]=!1,c[62]=c[76])})},function(a){return c[62]?c[60].set("perform_action_as_page",!0):0,c[64]=b.createArray(),b.forEach(b.db.table(14).fetch([[[c[30]]]]),function(a){a=a.item;return c[76]=(c[64].push(a.contactId),c[64])})},function(a){return c[65]=new b.Map(),c[65].set("participants",c[64]),c[65].set("send_payload",c[60]),c[51]!==void 0?c[65].set("thread_name",c[51]):0,b.db.table(312).fetch([[[c[30]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[66]=void 0:(d=b.item,c[66]=d.metadata)})},function(a){return c[65].set("thread_metadata",c[66]),b.forEach(b.db.table(9).fetch([[[c[50]]]]),function(a){var b=a.update;a.item;return b({otidOfFirstMessage:f.offlineThreadingId})})},function(a){return c[66]===void 0||!1?(b.i64.eq(c[44],b.i64.cast([0,5]))||b.i64.eq(c[44],b.i64.cast([0,26]))?(function(a){b.logger(a).mustfix(a)}("For Marketplace & community chat subthreads, thread metadata cannot be null"),a=[void 0,void 0,void 0],c[76]=a[0],c[77]=a[1],c[78]=a[2]):(c[79]=b.toJSON(c[65]),a=[c[79],b.i64.cast([0,130]),void 0],c[76]=a[0],c[77]=a[1],c[78]=a[2]),a=[c[76],c[77],c[78]],c[68]=a[0],c[69]=a[1],c[70]=a[2]):(b.i64.eq(c[44],b.i64.cast([0,5]))?(c[79]=b.toJSON(c[65]),a=[c[79],b.i64.cast([0,645]),void 0],c[76]=a[0],c[77]=a[1],c[78]=a[2]):(b.i64.eq(c[44],b.i64.cast([0,2]))?(c[82]=b.toJSON(c[65]),a=[c[82],b.i64.cast([0,787]),void 0],c[79]=a[0],c[80]=a[1],c[81]=a[2]):(c[82]=b.toJSON(c[65]),a=[c[82],b.i64.cast([0,645]),void 0],c[79]=a[0],c[80]=a[1],c[81]=a[2]),a=[c[79],c[80],c[81]],c[76]=a[0],c[77]=a[1],c[78]=a[2]),a=[c[76],c[77],c[78]],c[68]=a[0],c[69]=a[1],c[70]=a[2]),a=[c[68],c[69],c[70]],c[47]=a[0],c[48]=a[1],c[49]=a[2]}]):b.sequence([function(a){return c[61]=c[22]==null?b.i64.cast([0,1]):c[22],b.db.table(9).fetch([[[c[30]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[58]=b.i64.cast([0,1]):(e=d.item,c[71]=e.syncGroup,b.i64.neq(c[71],void 0)?c[70]=c[71]:c[70]=b.i64.cast([0,1]),c[58]=c[70])})},function(a){return c[60]=new b.Map(),c[60].set("thread_id",c[30]),c[60].set("otid",c[11]),c[60].set("source",c[23]==null?b.i64.cast([0,0]):c[23]),c[60].set("send_type",b.i64.cast([0,1])),c[60].set("sync_group",c[58]),c[60].set("mark_thread_read",c[25]),b.i64.eq(c[61],b.i64.cast([0,1]))?b.resolve(c[60].set("text",c[34])):b.i64.eq(c[61],b.i64.cast([0,2]))?b.resolve(b.i64.neq(c[32],void 0)?(c[60].set("sticker_id",c[32]),c[60].set("send_type",c[61])):0):b.i64.eq(c[61],b.i64.cast([0,7]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[30],c[35]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[70]=a[0],c[71]=a[1],a):(d=b.item,a=[d.filename,d.attributionAppId],c[70]=a[0],c[71]=a[1])})},function(a){return c[70]!==void 0?b.i64.neq(c[71],void 0)?(c[60].set("url",c[70]),c[60].set("attribution_app_id",c[71]),c[60].set("send_type",c[61]),c[33]!==void 0?c[60].set("metadata_dataclass",c[33]):0):0:0}]):b.i64.eq(c[61],b.i64.cast([0,3]))?b.sequence([function(a){return c[60].set("text",c[34]),c[70]=b.createArray(),c[71]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[c[30],c[35]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return c[72]=a.offlineAttachmentId,c[73]=(c[70].push(b.i64.from_string(a.attachmentFbid)),c[70]),c[72]!==void 0?c[73]=(c[71].push(c[72]),c[71]):0})},function(a){return c[60].set("attachment_fbids",c[70]),b.i64.eq(c[61],b.i64.cast([0,9]))?c[60].set("offline_attachment_ids",c[71]):0,c[60].set("send_type",c[61])}]):b.i64.eq(c[61],b.i64.cast([0,9]))?b.sequence([function(a){return c[60].set("text",c[34]),c[70]=b.createArray(),c[71]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[c[30],c[35]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return c[72]=a.offlineAttachmentId,c[73]=(c[70].push(b.i64.from_string(a.attachmentFbid)),c[70]),c[72]!==void 0?c[73]=(c[71].push(c[72]),c[71]):0})},function(a){return c[60].set("attachment_fbids",c[70]),b.i64.eq(c[61],b.i64.cast([0,9]))?c[60].set("offline_attachment_ids",c[71]):0,c[60].set("send_type",c[61])}]):b.i64.eq(c[61],b.i64.cast([0,4]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[30],c[35]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[70]=void 0:(d=b.item,c[70]=d.attachmentFbid)})},function(a){return b.db.table(16).fetch([[[c[30],c[35]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[72]=void 0:(d=b.item,c[72]=d.actionUrl)})},function(a){return c[70]!==void 0?(c[60].set("text",c[34]),c[72]!==void 0?c[60].set("url",c[72]):0,c[60].set("forwarded_share_id",c[70]),c[60].set("send_type",c[61])):0}]):b.i64.eq(c[61],b.i64.cast([0,5]))?b.resolve(c[12]!==void 0?(c[60].set("forwarded_msg_id",c[12]),c[60].set("send_type",c[61]),b.i64.neq(c[36],void 0)?c[60].set("forward_score",c[36]):0,c[60].set("strip_forwarded_msg_caption",!1)):0):b.i64.eq(c[61],b.i64.cast([0,6]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[30],c[35]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[70]=a[0],c[71]=a[1],a):(d=b.item,a=[d.filename,d.attributionAppId],c[70]=a[0],c[71]=a[1])})},function(a){return c[70]!==void 0?(c[60].set("url",c[70]),c[60].set("text",c[34]),c[60].set("send_type",c[61])):0}]):b.i64.eq(c[61],b.i64.cast([0,11]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[30],c[35]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[70]=a[0],c[71]=a[1],a):(d=b.item,a=[d.actionUrl,d.attributionAppId],c[70]=a[0],c[71]=a[1])})},function(a){return c[70]!==void 0?(c[60].set("url",c[70]),c[60].set("text",c[34]),c[60].set("send_type",c[61])):0}]):b.resolve(b.i64.eq(c[61],b.i64.cast([0,12]))?c[60].set("send_type",c[61]):0)},function(a){return c[66]=c[24]==null?void 0:c[24],c[65]=c[8]===""?void 0:c[8],c[65]!==void 0?b.i64.neq(c[13],void 0)?(c[70]=new b.Map(),c[70].set("reply_source_id",c[65]),c[70].set("reply_source_type",c[13]),c[70].set("reply_type",c[42]==null?b.i64.cast([0,0]):c[42]),c[70].set("reply_source_attachment_id",void 0),c[60].set("reply_metadata",c[70])):0:0,c[66]!==void 0?c[14]!==void 0?(c[70]=new b.Map(),c[70].set("subthread_parent_message_id",c[66]),c[70].set("is_exclusive_to_subthread",c[14]),c[60].set("subthread_data",c[70])):0:0,c[67]=c[31]===""?void 0:c[31],c[67]!==void 0?(c[70]=c[37]===""?void 0:c[37],c[70]!==void 0?(c[71]=c[38]===""?void 0:c[38],c[71]!==void 0?(c[72]=new b.Map(),c[72].set("mention_ids",c[67]),c[72].set("mention_offsets",c[70]),c[72].set("mention_lengths",c[71]),c[72].set("mention_types",c[39]===""?void 0:c[39]),c[60].set("mention_data",c[72])):0):0):0,c[40]!==void 0?c[60].set("is_forwarded",c[40]):0,c[68]=c[9]===""?void 0:c[9],c[68]!==void 0?c[60].set("platform_ref",c[68]):0,c[69]=c[10]===""?void 0:c[10],c[69]!==void 0?c[60].set("platform_token",c[69]):0,[b.i64.cast([0,1]),b.i64.cast([0,2])].some(function(a){return b.i64.eq(c[61],a)})?b.i64.neq(c[41],void 0)?c[60].set("hot_emoji_size",c[41]):0:0,b.i64.neq(c[15],void 0)?c[60].set("initiating_source",c[15]):0,c[16]!==void 0?c[60].set("skip_url_preview_gen",c[16]):0,b.i64.neq(c[17],void 0)?c[60].set("rich_text_format_type",c[17]):0,b.resolve()},function(a){return c[18]!==void 0?c[60].set("text_has_links",c[18]):0,c[19]!==void 0?c[60].set("dataclass_params",c[19]):0,c[20]!==void 0?c[60].set("multitab_env",c[20]):0,c[21]!==void 0?c[60].set("metadata_dataclass",c[21]):0,b.filter(b.db.table(14).fetch([[[c[50],c[43]]]]),function(a){return b.i64.eq(a.threadKey,c[50])&&b.i64.eq(b.i64.cast([0,0]),c[52])&&b.i64.eq(a.contactId,c[43])}).next().then(function(d,e){var a=d.done;d=d.value;return a?c[62]=!1:(e=d.item,b.i64.eq(c[44],b.i64.cast([0,152]))?(c[71]=e.threadRoles,b.i64.lt(b.i64.cast([0,7]),b.i64.cast([0,0]))||b.i64.gt(b.i64.cast([0,7]),b.i64.cast([0,9]))?c[72]=!1:c[72]=!b.i64.eq(b.i64.and_(b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.cast([0,7]))),c[71]),b.i64.cast([0,0])),c[73]=c[53],c[74]=c[54],c[75]=c[55],c[76]=c[56],c[77]=c[57],c[79]=b.i64.div(b.i64.cast([0,223]),b.i64.cast([0,64])),c[80]=b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.sub(b.i64.cast([0,223]),b.i64.mul(c[79],b.i64.cast([0,64]))))),b.i64.lt(b.i64.cast([0,223]),b.i64.cast([0,0]))||b.i64.gt(b.i64.cast([0,223]),b.i64.cast([0,294]))?c[78]=!1:(b.i64.eq(c[79],b.i64.cast([0,0]))?c[81]=!b.i64.eq(b.i64.and_(c[80],c[73]),b.i64.cast([0,0])):(b.i64.eq(c[79],b.i64.cast([0,1]))?c[82]=!b.i64.eq(b.i64.and_(c[80],c[74]),b.i64.cast([0,0])):(b.i64.eq(c[79],b.i64.cast([0,2]))?c[83]=!b.i64.eq(b.i64.and_(c[80],c[75]),b.i64.cast([0,0])):(b.i64.eq(c[79],b.i64.cast([0,3]))?c[84]=!b.i64.eq(b.i64.and_(c[80],c[76]),b.i64.cast([0,0])):(b.i64.eq(c[79],b.i64.cast([0,4]))?c[85]=!b.i64.eq(b.i64.and_(c[80],c[77]),b.i64.cast([0,0])):c[85]=!1,c[84]=c[85]),c[83]=c[84]),c[82]=c[83]),c[81]=c[82]),c[78]=c[81]),c[72]===c[78]?0:(function(a){b.logger(a).mustfix(a)}("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),b["throw"]("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),c[70]=c[72]):c[70]=!1,c[62]=c[70])})},function(a){return c[62]?c[60].set("perform_action_as_page",!0):0,c[64]=b.toJSON(c[60]),a=[c[64],b.i64.cast([0,46]),void 0],c[47]=a[0],c[48]=a[1],c[49]=a[2]}])},function(a){return a=[c[47],c[48],c[49]],c[26]=a[0],c[27]=a[1],c[28]=a[2],a}]))})},function(a){return a=[c[26],c[27],c[28]],c[4]=a[0],c[5]=a[1],c[6]=a[2],a}]))})},function(a){return a=[c[4],c[5],c[6]],c[0]=a[0],c[1]=a[1],c[2]=a[2],a}]))})},function(a){return a=[c[0],c[1]],d[0]=a[0],d[1]=a[1],a}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxTaskSerializerSendMessageV2StoredProcedure";a.__tables__=["messages_optimistic_context","messages","threads","pending_tasks","attachments","participants","threads_optimistic_metadata"];e.exports=a}),null);
__d("LSTaskSerializerSyncThreadCapabilities",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,void 0,void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],c.resolve(d)}a.__sproc_name__="LSMailboxTaskSerializerSyncThreadCapabilitiesStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSIsExperimentCapabilityEnabled.nop",["LSACSExperimentCapability","LSIntEnum","MetaConfig","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("MetaConfig")._("87"),k=c("MetaConfig")._("156");a=function(a,e,f,g){switch((i||(i=d("LSIntEnum"))).toNumber(f)){case c("LSACSExperimentCapability").BUMP_TOKEN_SYNC_TASK_AT_TASK_SERIALIZATION:return(h||(h=b("Promise"))).resolve([k]);case c("LSACSExperimentCapability").INSERT_PENDING_TASK_PARENT_ROW_WHEN_NO_ACS_TOKENS_AT_TASK_INSERTION:return(h||(h=b("Promise"))).resolve([!1]);case c("LSACSExperimentCapability").RETRY_AFTER_TASK_SERIALIZATION_FAILURE_EXPONENTIAL_BACKOFF:return(h||(h=b("Promise"))).resolve([j])}return(h||(h=b("Promise"))).resolve([!1])};a.__nop_name__="LSIsExperimentCapabilityEnabled";g["default"]=a}),98);
__d("LSVoprfHmac.nop",["ACSCipherSuiteModule","ACSTokenHmacUtil","Promise","XPlatReactTextEncoder","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){a=d("ACSCipherSuiteModule").getACSCipherSuiteByValue(d("ACSCipherSuiteModule").VOPRF_RISTRETTO_HMACSHA512.value);if(!a)return(h||(h=b("Promise"))).resolve([void 0]);c=(yield d("ACSTokenHmacUtil").hmac(a.macAlgorithm,new Uint8Array(f).slice(),new(d("XPlatReactTextEncoder").TextEncoder)().encode(e)));return(h||(h=b("Promise"))).resolve([c.buffer])});function c(b,c,d,e){return a.apply(this,arguments)}return c}();a.__nop_name__="LSVoprfHmac";g["default"]=a}),98);
__d("LSTaskSerializerUnauthenticatedTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIsExperimentCapabilityEnabled.nop","LSMailboxTaskCompletionApiOnTaskCompletion","LSRemoveUsedTokens","LSVoprfHmac.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return c.db.table(311).fetch([[[a[0]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=void 0:(b=a.item,d[0]=b.projectName)})},function(e){return d[0]!==void 0?c.sequence([function(e){return a[1]!==void 0?c.sequence([function(a){return d[9]=c.createArray(),d[10]=c.i64.of_float(Date.now()),c.forEach(c.filter(c.db.table(307).fetch(),function(a){return d[0]===a.projectName&&c.i64.gt(a.expirationTimestampMs,d[10])}),function(a){a=a.item;return d[16]=(d[9].push(a.configId),d[9])})},function(a){return c.sequence([function(a){return d[16]=c.createArray(),d[17]=c.i64.of_int32(d[9].length),c.i64.gt(d[17],c.i64.cast([0,0]))?c.loopAsync(d[17],function(a){return d[19]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[9],d[19]).then(function(a){return a=a,d[20]=a[0],d[21]=a[1],a})},function(a){return d[22]=(d[16].push(d[20]),d[16])}])}):c.resolve()},function(a){return d[18]=d[16].join(","),d[11]=d[18]}])},function(e){return c.filter(c.db.table(309).fetch(),function(a){return d[9].includes(a.configId)&&c.i64.gt(a.redeemLimit,c.i64.cast([0,0]))}).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(a){return c.nativeOperation(b("LSIsExperimentCapabilityEnabled.nop"),c.i64.cast([0,0]),d[0]).then(function(a){return a=a,d[16]=a[0],a})},function(e){return d[16]?c.sequence([function(b){return c.db.table(311).fetch([[[a[0]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[20]=c.i64.cast([0,0]):(e=b.item,d[20]=e.failureCount)})},function(b){return c.forEach(c.db.table(311).fetch([[[a[0]]]]),function(a){a=a.item;return c.forEach(c.db.table(311).fetch([[[a.taskId]]]),function(a){var b=a.update;a.item;return b({failureCount:c.i64.add(d[20],c.i64.cast([0,1]))})})})},function(a){return a=[void 0,void 0,c.i64.mul(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.mod_(d[20],c.i64.cast([0,7])))),c.i64.cast([0,500]))],d[17]=a[0],d[18]=a[1],d[19]=a[2],a}]):c.sequence([function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[20]=c.createArray(),d[21]=(d[20].push("Unauthenticated Task Serializer: no valid tokens"),d[20]),d[22]=(d[20].push(a[0]),d[20]),d[23]=(d[20].push(d[0]),d[20]),d[24]=c.toJSON(d[20]),function(a){c.logger(a).mustfix(a)}(d[24]),b=[void 0,void 0,void 0],d[17]=b[0],d[18]=b[1],d[19]=b[2]}])},function(a){return a=[d[17],d[18],d[19]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]):(f=e.item,c.sequence([function(e){return d[20]=f.tokenId,c.nativeOperation(b("LSVoprfHmac.nop"),a[2]==null?"":a[2],f.sharedSecret).then(function(a){return a=a,d[16]=a[0],a})},function(e){return c.blobs.neq(d[16],void 0)?c.sequence([function(a){return c.forEach(c.db.table(309).fetch([[[d[20]]]]),function(a){var b=a.update;a=a.item;return b({redeemLimit:c.i64.sub(a.redeemLimit,c.i64.cast([0,1]))})})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[16]).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),f.nonce).then(function(a){return a=a,d[22]=a[0],a})},function(b){return d[23]=new c.Map(),d[23].set("config_id",f.configId),d[23].set("tag",d[21]==null?"":d[21]),d[23].set("aux",d[22]==null?"":d[22]),d[23].set("project_name",d[0]),d[24]=c.toJSON(d[23]),d[25]=new c.Map(),d[25].set("payload",a[2]==null?"":a[2]),d[25].set("token",d[24]),d[26]=c.toJSON(d[25]),b=[d[26],c.i64.from_string(a[1]),void 0],d[17]=b[0],d[18]=b[1],d[19]=b[2]}]):c.sequence([function(a){return c.forEach(c.db.table(309).fetch([[[d[20]]]]),function(a){return a["delete"]()})},function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[21]=c.createArray(),d[22]=(d[21].push("Unauthenticated Task Serializer: hmac failed"),d[21]),d[23]=(d[21].push(a[0]),d[21]),d[24]=c.toJSON(d[21]),function(a){c.logger(a).mustfix(a)}(d[24]),b=[void 0,void 0,void 0],d[17]=b[0],d[18]=b[1],d[19]=b[2]}])},function(a){return a=[d[17],d[18],d[19]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]))})},function(a){return a=[d[12],d[13],d[14]],d[6]=a[0],d[7]=a[1],d[8]=a[2],a}]):c.sequence([function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[9]=c.createArray(),d[10]=(d[9].push("Unauthenticated Task Serializer: task has no write label"),d[9]),d[11]=(d[9].push(a[0]),d[9]),d[12]=c.toJSON(d[9]),function(a){c.logger(a).mustfix(a)}(d[12]),b=[void 0,void 0,void 0],d[6]=b[0],d[7]=b[1],d[8]=b[2]}])},function(a){return a=[d[6],d[7],d[8]],d[2]=a[0],d[3]=a[1],d[4]=a[2],a}]):c.sequence([function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[6]=c.createArray(),d[7]=(d[6].push("Unauthenticated Task Serializer: anonymous_task_context row not found"),d[6]),d[8]=(d[6].push(a[0]),d[6]),d[9]=c.toJSON(d[6]),function(a){c.logger(a).mustfix(a)}(d[9]),b=[void 0,void 0,void 0],d[2]=b[0],d[3]=b[1],d[4]=b[2]}])},function(a){return c.storedProcedure(b("LSRemoveUsedTokens"))},function(a){return d[0]!==void 0?c.sequence([function(a){return c.nativeOperation(b("LSIsExperimentCapabilityEnabled.nop"),c.i64.cast([0,1]),d[0]).then(function(a){return a=a,d[6]=a[0],a})},function(a){return d[6]?c.sequence([function(a){return c.i64.neq(d[4],void 0)?c.resolve(d[8]=!0):c.sequence([function(a){return d[10]=c.createArray(),d[11]=c.i64.of_float(Date.now()),c.forEach(c.filter(c.db.table(307).fetch(),function(a){return d[0]===a.projectName&&c.i64.gt(a.expirationTimestampMs,d[11])}),function(a){a=a.item;return d[15]=(d[10].push(a.configId),d[10])})},function(a){return c.sequence([function(a){return d[15]=c.createArray(),d[16]=c.i64.of_int32(d[10].length),c.i64.gt(d[16],c.i64.cast([0,0]))?c.loopAsync(d[16],function(a){return d[18]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[10],d[18]).then(function(a){return a=a,d[19]=a[0],d[20]=a[1],a})},function(a){return d[21]=(d[15].push(d[19]),d[15])}])}):c.resolve()},function(a){return d[17]=d[15].join(","),d[12]=d[17]}])},function(a){return c.filter(c.db.table(309).fetch(),function(a){return d[10].includes(a.configId)&&c.i64.gt(a.redeemLimit,c.i64.cast([0,0]))}).next().then(function(a,b){b=a.done;a=a.value;return b?d[13]=!0:(a.item,d[13]=!1)})},function(a){return d[8]=d[13]}])},function(a){return d[8]?c.sequence([function(a){return c.filter(c.db.table(310).fetch(),function(a){return a.projectName===d[0]}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[10]=void 0:(b=a.item,d[10]=b.taskId)})},function(a){return d[9]=d[10]}]):c.resolve(d[9]=void 0)},function(a){return d[7]=d[9]}]):c.resolve(d[7]=void 0)},function(a){return d[5]=d[7]}]):c.resolve(d[5]=void 0)},function(a){return a=[d[2],d[3],d[4],d[5]],e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsTaskSerializerUnauthenticatedTaskStoredProcedure";a.__tables__=["anonymous_task_context","secure_acs_configurations","secure_acs_tokens","acs_request_context"];e.exports=a}),null);
__d("LSTaskSerializerUpdateThreadName",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(32).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("taskSerializerUpdateThreadName: Task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2]):(e=d.item,b.sequence([function(a){return c[8]=e.threadKey,b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?(c[9]=b.createArray(),c[10]=(c[9].push("taskSerializerUpdateThreadName: Thread not found"),c[9]),c[11]=(c[9].push(c[8]),c[9]),c[12]=b.toJSON(c[9]),function(a){b.logger(a).mustfix(a)}(c[12]),a=[void 0,void 0,void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2]):(e=d.item,b.sequence([function(a){return b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[9]=b.i64.cast([0,1]):(e=d.item,c[14]=e.syncGroup,b.i64.neq(c[14],void 0)?c[13]=c[14]:c[13]=b.i64.cast([0,1]),c[9]=c[13])})},function(a){return c[11]=new b.Map(),c[11].set("thread_key",c[8]),c[11].set("thread_name",e.threadName==null?"":e.threadName),c[11].set("sync_group",c[9]),c[12]=b.toJSON(c[11]),a=[c[12],b.i64.cast([0,32]),void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2]}]))})},function(a){return a=[c[4],c[5],c[6]],c[0]=a[0],c[1]=a[1],c[2]=a[2],a}]))})},function(a){return a=[c[0],c[1],c[2]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxTaskSerializerUpdateThreadNameStoredProcedure";a.__tables__=["threads_optimistic_context","threads"];e.exports=a}),null);
__d("LSSerializeTask",["LSForceTaskExecutionImmediately","LSLogMebClientEvent.nop","LSTaskSerializerAcsIssueNextSync","LSTaskSerializerDeleteChatHistory","LSTaskSerializerE2eeMessageIntegrityCheckV2","LSTaskSerializerE2eeMetadataThreadIntegrityCheck","LSTaskSerializerEncryptedBackupAction","LSTaskSerializerEncryptedBackupsLoopingUpload","LSTaskSerializerEncryptedBackupsOpenUpload","LSTaskSerializerEncryptedBackupsRestoreWithSerializer","LSTaskSerializerEncryptedBackupsUpload","LSTaskSerializerEncryptedBackupsUploadProtobufOnly","LSTaskSerializerEncryptedBackupsUploadSenderBackup","LSTaskSerializerMuteThreadV2","LSTaskSerializerRemoveThread","LSTaskSerializerSendMessageV2","LSTaskSerializerSyncThreadCapabilities","LSTaskSerializerUnauthenticatedTask","LSTaskSerializerUpdateThreadName"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return a[1]==="46"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerSendMessageV2"),a[0]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],a})},function(a){return a=[d[8],c.i64.to_string(d[9]),void 0,void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],a}]):c.sequence([function(e){return a[1]==="144"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerMuteThreadV2"),a[0]).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(a){return a=[d[12],c.i64.to_string(d[13]),void 0,void 0],d[8]=a[0],d[9]=a[1],d[10]=a[2],d[11]=a[3],a}]):c.sequence([function(e){return a[1]==="146"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerRemoveThread"),a[0]).then(function(a){return a=a,d[16]=a[0],d[17]=a[1],a})},function(a){return a=[d[16],c.i64.to_string(d[17]),void 0,void 0],d[12]=a[0],d[13]=a[1],d[14]=a[2],d[15]=a[3],a}]):c.sequence([function(e){return a[1]==="32"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerUpdateThreadName"),a[0]).then(function(a){return a=a,d[20]=a[0],d[21]=a[1],d[22]=a[2],a})},function(a){return a=[d[20],c.i64.to_string(d[21]),void 0,d[22]],d[16]=a[0],d[17]=a[1],d[18]=a[2],d[19]=a[3],a}]):c.sequence([function(e){return a[1]==="362"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerAcsIssueNextSync"),a[0]).then(function(a){return a=a,d[24]=a[0],d[25]=a[1],d[26]=a[2],a})},function(a){return a=[d[24],c.i64.to_string(d[25]),void 0,d[26]],d[20]=a[0],d[21]=a[1],d[22]=a[2],d[23]=a[3],a}]):c.sequence([function(e){return a[1]==="50015"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsRestoreWithSerializer"),a[0]).then(function(a){return a=a,d[28]=a[0],d[29]=a[1],d[30]=a[2],a})},function(a){return a=[d[28],c.i64.to_string(d[29]),void 0,d[30]],d[24]=a[0],d[25]=a[1],d[26]=a[2],d[27]=a[3],a}]):c.sequence([function(e){return a[1]==="319"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupAction"),a[0]).then(function(a){return a=a,d[32]=a[0],d[33]=a[1],d[34]=a[2],a})},function(a){return a=[d[32],c.i64.to_string(d[33]),void 0,d[34]],d[28]=a[0],d[29]=a[1],d[30]=a[2],d[31]=a[3],a}]):c.sequence([function(e){return a[1]==="50026"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsUpload"),a[0]).then(function(a){return a=a,d[36]=a[0],d[37]=a[1],a})},function(a){return a=[d[36],c.i64.to_string(d[37]),void 0,void 0],d[32]=a[0],d[33]=a[1],d[34]=a[2],d[35]=a[3],a}]):c.sequence([function(e){return a[1]==="50042"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsUploadProtobufOnly"),a[0]).then(function(a){return a=a,d[40]=a[0],d[41]=a[1],d[42]=a[2],a})},function(a){return a=[d[40],c.i64.to_string(d[41]),void 0,d[42]],d[36]=a[0],d[37]=a[1],d[38]=a[2],d[39]=a[3],a}]):c.sequence([function(e){return a[1]==="700"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerE2eeMetadataThreadIntegrityCheck"),a[0]).then(function(a){return a=a,d[44]=a[0],d[45]=a[1],d[46]=a[2],a})},function(a){return a=[d[44],c.i64.to_string(d[45]),void 0,d[46]],d[40]=a[0],d[41]=a[1],d[42]=a[2],d[43]=a[3],a}]):c.sequence([function(e){return a[1]==="705"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerE2eeMessageIntegrityCheckV2"),a[0]).then(function(a){return a=a,d[48]=a[0],d[49]=a[1],d[50]=a[2],a})},function(a){return a=[d[48],c.i64.to_string(d[49]),void 0,d[50]],d[44]=a[0],d[45]=a[1],d[46]=a[2],d[47]=a[3],a}]):c.sequence([function(e){return a[1]==="50043"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsLoopingUpload"),a[0]).then(function(a){return a=a,d[52]=a[0],d[53]=a[1],d[54]=a[2],a})},function(a){return a=[d[52],c.i64.to_string(d[53]),void 0,d[54]],d[48]=a[0],d[49]=a[1],d[50]=a[2],d[51]=a[3],a}]):c.sequence([function(e){return a[1]==="50048"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsOpenUpload"),a[0]).then(function(a){return a=a,d[56]=a[0],d[57]=a[1],a})},function(a){return a=[d[56],c.i64.to_string(d[57]),void 0,void 0],d[52]=a[0],d[53]=a[1],d[54]=a[2],d[55]=a[3],a}]):c.sequence([function(e){return a[1]==="160013"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerSyncThreadCapabilities"),a[0]).then(function(a){return a=a,d[60]=a[0],d[61]=a[1],d[62]=a[2],a})},function(a){return a=[d[60],c.i64.to_string(d[61]),void 0,d[62]],d[56]=a[0],d[57]=a[1],d[58]=a[2],d[59]=a[3],a}]):c.sequence([function(e){return a[1]==="903"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerDeleteChatHistory"),a[0]).then(function(a){return a=a,d[64]=a[0],d[65]=a[1],d[66]=a[2],a})},function(a){return a=[d[64],c.i64.to_string(d[65]),void 0,d[66]],d[60]=a[0],d[61]=a[1],d[62]=a[2],d[63]=a[3],a}]):c.sequence([function(e){return a[1]==="50057"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsUploadSenderBackup"),a[0]).then(function(a){return a=a,d[68]=a[0],d[69]=a[1],d[70]=a[2],a})},function(a){return a=[d[68],c.i64.to_string(d[69]),void 0,d[70]],d[64]=a[0],d[65]=a[1],d[66]=a[2],d[67]=a[3],a}]):c.resolve((e=[a[2],a[1],void 0,void 0],d[64]=e[0],d[65]=e[1],d[66]=e[2],d[67]=e[3],e))},function(a){return a=[d[64],d[65],d[66],d[67]],d[60]=a[0],d[61]=a[1],d[62]=a[2],d[63]=a[3],a}])},function(a){return a=[d[60],d[61],d[62],d[63]],d[56]=a[0],d[57]=a[1],d[58]=a[2],d[59]=a[3],a}])},function(a){return a=[d[56],d[57],d[58],d[59]],d[52]=a[0],d[53]=a[1],d[54]=a[2],d[55]=a[3],a}])},function(a){return a=[d[52],d[53],d[54],d[55]],d[48]=a[0],d[49]=a[1],d[50]=a[2],d[51]=a[3],a}])},function(a){return a=[d[48],d[49],d[50],d[51]],d[44]=a[0],d[45]=a[1],d[46]=a[2],d[47]=a[3],a}])},function(a){return a=[d[44],d[45],d[46],d[47]],d[40]=a[0],d[41]=a[1],d[42]=a[2],d[43]=a[3],a}])},function(a){return a=[d[40],d[41],d[42],d[43]],d[36]=a[0],d[37]=a[1],d[38]=a[2],d[39]=a[3],a}])},function(a){return a=[d[36],d[37],d[38],d[39]],d[32]=a[0],d[33]=a[1],d[34]=a[2],d[35]=a[3],a}])},function(a){return a=[d[32],d[33],d[34],d[35]],d[28]=a[0],d[29]=a[1],d[30]=a[2],d[31]=a[3],a}])},function(a){return a=[d[28],d[29],d[30],d[31]],d[24]=a[0],d[25]=a[1],d[26]=a[2],d[27]=a[3],a}])},function(a){return a=[d[24],d[25],d[26],d[27]],d[20]=a[0],d[21]=a[1],d[22]=a[2],d[23]=a[3],a}])},function(a){return a=[d[20],d[21],d[22],d[23]],d[16]=a[0],d[17]=a[1],d[18]=a[2],d[19]=a[3],a}])},function(a){return a=[d[16],d[17],d[18],d[19]],d[12]=a[0],d[13]=a[1],d[14]=a[2],d[15]=a[3],a}])},function(a){return a=[d[12],d[13],d[14],d[15]],d[8]=a[0],d[9]=a[1],d[10]=a[2],d[11]=a[3],a}])},function(a){return a=[d[8],d[9],d[10],d[11]],d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],a}])},function(e){return a[3]?c.sequence([function(a){return d[9]="60009"===d[1]||"60006"===d[1]||"60008"===d[1]||"60011"===d[1]||"765"===d[1]||"1006"===d[1]||"160009"===d[1]||"761"===d[1]||"1018"===d[1]||"632"===d[1]||"384"===d[1]||"384"===d[1],d[9]?d[1]!==void 0?(d[15]=["Deidentified task is being executed through the 'identified' path. Canceling task with label: ",d[1]].join(""),function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSCoreSerializeTaskStoredProcedure] ","",d[15]].join("")),d[14]=c.createArray(),void 0!==void 0?d[16]=(d[14].push(void 0),d[14]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSCoreSerializeTaskStoredProcedure",d[15],d[14],c.i64.cast([0,3]))):c.resolve():c.resolve()},function(a){return c.resolve(d[8]=!1)},function(a){return d[9]||d[8]?(a=[void 0,void 0,void 0,void 0],d[10]=a[0],d[11]=a[1],d[12]=a[2],d[13]=a[3],a):(a=[d[0],d[1],d[2],d[3]],d[10]=a[0],d[11]=a[1],d[12]=a[2],d[13]=a[3],a),a=[d[10],d[11],d[12],d[13]],d[4]=a[0],d[5]=a[1],d[6]=a[2],d[7]=a[3]}]):c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerUnauthenticatedTask"),a[0],d[1],d[0]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],d[10]=a[2],d[11]=a[3],a})},function(a){return c.i64.neq(d[11],void 0)?c.storedProcedure(b("LSForceTaskExecutionImmediately"),d[11]):c.resolve()},function(a){return a=[d[8],c.i64.to_string(d[9]),void 0,d[10]],d[4]=a[0],d[5]=a[1],d[6]=a[2],d[7]=a[3],a}])},function(a){return a=[d[4],d[5],d[6],d[7]],e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSCoreSerializeTaskStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSSerializeTaskStoredProcedure",["LSSerializeTask","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSSerializeTask"),e.taskId,e.taskLabel,e.taskValue,e.requiresAuthentication);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSBeginHandlingPendingTasksForQueue2",["I64","LSFactory","LSIntEnum","LSPendingTasksPluginType","LSSerializeTaskStoredProcedure","LSShape","LSVec","Promise","ReQL","XPlatReactCrypto","asyncToGeneratorRuntime","gkx","isNativeTask"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=500,l=3e4,m=5,n=100,o=7;function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield a.lightspeed_task_context.get(b));return a==null||a.requiresAuthentication});return q.apply(this,arguments)}function r(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.pending_tasks.index("queueNameTaskId")).getKeyRange(b)));return a==null?{context:void 0,failureCount:(i||(i=d("I64"))).neg_one,httpUrlOverride:void 0,minTimeToSyncTimestampMs:i.neg_one,pluginType:(j||(j=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").LS_BROKER),queueName:""}:a});return s.apply(this,arguments)}function t(a,b){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange(b)));return a==null?0:(i||(i=d("I64"))).to_float(a.lastSyncRequestTimestampMs)});return u.apply(this,arguments)}function v(a,b,c){b=(i||(i=d("I64"))).equal(a.failureCount,(i||(i=d("I64"))).zero)||b;if(b)return 0;b=(i||(i=d("I64"))).to_float(a.failureCount)>o?(i||(i=d("I64"))).to_float(a.failureCount)-o:(i||(i=d("I64"))).to_float(a.failureCount);a=Math.min((1<<Math.min(b-1,o))*k,l);b=c+a;return Math.max(b-Date.now(),0)}function w(){var a=Array.from(d("XPlatReactCrypto").getRandomValues(new Uint32Array(2)));a[0]>>>=1;return(i||(i=d("I64"))).add(i.lsl_(i.of_float(a[0]),32),i.of_float(a[1]))}function x(){var a=(i||(i=d("I64"))).of_float(Date.now());return i.and_(i.or_(i.lsl_(a,22),i.and_(w(),i.castExn([0,4194303]))),i.castExn([2147483647,4294967295]))}function y(a,b){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=x(),e=(yield a.network_requests.get(b,(i||(i=d("I64"))).neg_one));e==null?yield a.network_requests.add({epochId:c,failureCount:(i||(i=d("I64"))).zero,lastSentTimestampMs:i.zero,lastSyncRequestTimestampMs:i.of_float(Date.now()),syncDatabaseId:i.neg_one,taskQueueName:b}):yield a.network_requests.put(babelHelpers["extends"]({},e,{epochId:c,lastSyncRequestTimestampMs:(i||(i=d("I64"))).of_float(Date.now())}));return c});return z.apply(this,arguments)}function A(a,b){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange(b).filter(function(a){return a.epochId!=null})))!=null});return B.apply(this,arguments)}function C(a,b,c){var e=(i||(i=d("I64"))).to_float(a.minTimeToSyncTimestampMs),f=Date.now();e=e-f;f=e<=0;return f?v(a,b,c):e}function D(a){return a.httpUrlOverride!=null||(i||(i=d("I64"))).to_float(a.failureCount)>o}function E(a){return a.timeoutTimestampMs!=null?(i||(i=d("I64"))).to_float(a.timeoutTimestampMs)<=Date.now():!1}function F(a){return a===90..toString()||a===130..toString()||a===153..toString()}function G(a,b,c,d,e){e=e===0?void 0:e;return{failureCount:e,label:a,payload:b,queueName:c,taskId:d}}function H(a,b,c){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){a=(yield c("LSSerializeTaskStoredProcedure")(c("LSFactory")(a),{requiresAuthentication:e,taskId:b.taskId,taskLabel:b.context,taskValue:b.taskValue}));e=a[0];var f=a[1];a[2];a=a[3];if(e==null){if(a!=null)return{minRetryDelayMs:a};return}return G(f,e,b.queueName,b.taskId,(i||(i=d("I64"))).to_float(b.failureCount))});return I.apply(this,arguments)}function J(a,b,c){return K.apply(this,arguments)}function K(){K=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(b.context==null){yield a.pending_tasks["delete"](b.taskId);return}var d=E(b);if(d){yield a.pending_tasks["delete"](b.taskId);return}return H(a,b,c)});return K.apply(this,arguments)}function L(a,b){b=b>=(c("gkx")("26373")&&a===String(207)?n:m)||F(a);return!b}function M(a,b){return N.apply(this,arguments)}function N(){N=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield a.pending_tasks.get(b.taskId));c!=null&&(i||(i=d("I64"))).equal(b.firstExecutedTimestampMs,(i||(i=d("I64"))).zero)&&(yield a.pending_tasks.put(babelHelpers["extends"]({},c,{firstExecutedTimestampMs:(i||(i=d("I64"))).of_float(Date.now())})))});return N.apply(this,arguments)}function O(a,b){return P.apply(this,arguments)}function P(){P=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){if(c.length===0)return{epochId:void 0,tasks:[]};var e=[],f=c[0].httpUrlOverride,g=(yield (h||(h=b("Promise"))).all(c.map(function(b){return p(a,b.taskId)}))).some(Boolean);for(c of c){var j=c.httpUrlOverride===f,k=(yield p(a,c.taskId))===g;yield M(a,c);if(!j||!k)break;j=(yield J(a,c,g));if(j!=null&&j.payload!=null)e.push(j);else if((j==null?void 0:j.minRetryDelayMs)!=null){k=(yield a.pending_tasks.get(c.taskId));if(k!=null){yield a.pending_tasks.put(babelHelpers["extends"]({},k,{failureCount:(i||(i=d("I64"))).add((k=k.failureCount)!=null?k:(i||(i=d("I64"))).zero,i.one),minTimeToSyncTimestampMs:i.add(j.minRetryDelayMs,i.of_float(Date.now()))}))}}else yield a.pending_tasks["delete"](c.taskId);if(!L(c.context,e.length))break}return{epochId:void 0,tasks:e}});return P.apply(this,arguments)}function Q(a,b,c,d,e){return R.apply(this,arguments)}function R(){R=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d,e){e===void 0&&(e=!0);b=(yield O(a,b));var f=b.tasks;if(f.length===0)return{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:void 0,queueName:c,skipRealtimeGateway:!1,workItemType:4};if(e===!0){f=(yield y(a,c));b.epochId=f}e=(yield r(a,c));return{httpUrlOverride:e.httpUrlOverride,networkPayload:b,nextSyncMs:void 0,queueName:c,skipRealtimeGateway:D(e),workItemType:d}});return R.apply(this,arguments)}function S(a,b,c){return T.apply(this,arguments)}function T(){T=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=(yield r(a,b)),g=(yield t(a,b));f=C(f,e,g);e=f!==0;if(e)return[{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:f,queueName:b,skipRealtimeGateway:!1,workItemType:3}];g=[];e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.pending_tasks.index("queueNameTaskId")).getKeyRange(b)));f=e.filter(c("isNativeTask"));if(f.length>0){f=(yield Q(a,f,b,2,c("gkx")("4778")===!0));g.push(f)}f=e.filter(function(a){return!c("isNativeTask")(a)});if(f.length>0){e=(yield Q(a,f,b,1));g.push(e)}return g});return T.apply(this,arguments)}function U(a,b,c){return V.apply(this,arguments)}function V(){V=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var d=!(yield A(a,b));return d?S(a,b,c):[{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:void 0,queueName:b,skipRealtimeGateway:!1,workItemType:4}]});return V.apply(this,arguments)}function a(a,b){return W.apply(this,arguments)}function W(){W=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.ignoreSoftDelay;b=b.queueName;a=(yield U(a,b,e));return a.map(function(a){var b;return d("LSShape").ofRecord({network_payload:d("LSShape").ofRecord({epoch_id:(b=a.networkPayload)==null?void 0:b.epochId,tasks:c("LSVec").ofArray(((b=(b=a.networkPayload)==null?void 0:b.tasks)!=null?b:[]).map(function(a){var b;return d("LSShape").ofRecord({failure_count:a.failureCount!=null?(i||(i=d("I64"))).of_float(a.failureCount):void 0,label:(b=a.label)!=null?b:void 0,payload:a.payload,queue_name:a.queueName,task_id:a.taskId})}))}),next_sync_ms:a.nextSyncMs!=null?(i||(i=d("I64"))).of_float(a.nextSyncMs):void 0,queue_name:a.queueName,skip_realtime_gateway:a.skipRealtimeGateway,work_item_type:(j||(j=d("LSIntEnum"))).ofNumber(a.workItemType)})})});return W.apply(this,arguments)}a._updateTaskIfNeeded=M;a._getHeadOfNormalQueue=r;a._lastSyncRequestTimestampForQueue=t;a._exponentialBackoffForNormalQueue=v;a._generateNewEpoch=x;a._openNewEpochForQueue=y;a._isEpochOpenForQueue=A;a._calculateDelayForNormalQueue=C;a._queueShouldSkipRealtimeGateway=D;a._isNativeTask=c("isNativeTask");a._taskIsTimedOut=E;a._taskShouldStopBatching=F;a._buildTaskPayloadExpressionForNormalTaskWithParameters=G;a._buildTaskPayloadExpressionForValidatedNormalTask=H;a._buildTaskPayloadExpressionForUnvalidatedNormalTask=J;a._workForNormalQueueWithoutDelay=Q;a._workForNormalQueueWithClosedEpoch=S;a._buildWorkForNormalQueue=U;a._buildNetworkPayloadShapeForTasks=O;a._canContinueBatchingForQueue=L;g["default"]=a}),98);
__d("LSCookie",["$InternalEnum","Cookie","CookieCore","CurrentEnvironment","CurrentMessengerUser","FBLogger","I64","LSE2EEMetadataSyncGroupUtils","LSIntEnum","MessengerLogHistory","MqttWebDeviceID","ReQL","SortedAsyncIterable","getErrorSafe","isPromise","isStringNullOrEmpty","pageID","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=b("$InternalEnum")({SYNCING:"1",NOT_SYNCING:"0"}),l=d("MessengerLogHistory").getInstance("client_init"),m=c("CurrentEnvironment").instagramdotcom?"igd_ls":"m_ls",n={c:{},d:c("MqttWebDeviceID").clientID,s:k.NOT_SYNCING,u:c("pageID")};function o(a){function b(a){d("CookieCore").setWithDomain_FOR_MESSENGER_LS_ONLY(m,JSON.stringify(a),window.location.hostname)}var e=c("Cookie").get(m);if(e==null){var f;b((f={},f[d("CurrentMessengerUser").getIDorEIMU()]=a,f));return}f=JSON.parse(e);if(f.u==null){b(babelHelpers["extends"]({},f,(e={},e[d("CurrentMessengerUser").getIDorEIMU()]=a,e)))}else{b((f={},f[d("CurrentMessengerUser").getIDorEIMU()]=a,f))}}function a(){c("Cookie").clear(m)}function p(a){if(typeof a!=="object")return null;if(a==null)return null;var b=a.c,c=a.d,d=a.s;a=a.u;d=typeof d==="string"?k.cast(d):null;b=typeof b==="object"&&b!=null?Object.entries(b).reduce(function(a,b){var c=b[0];b=b[1];if(a==null||typeof b!=="string")return null;a[c]=b;return a},{}):null;if(typeof c!=="string")return null;if(d==null)return null;if(b==null)return null;return typeof a!=="string"?null:{c:b,d:c,s:d,u:a}}function q(){var a=c("Cookie").get(m);if(c("isStringNullOrEmpty")(a))return n;a=JSON.parse(a);var b=d("CurrentMessengerUser").getIDorEIMU(),e=p(a);a=typeof a==="object"&&a!=null?p(a[b]):null;return(b=a!=null?a:e)!=null?b:n}function r(a){var b=q();if(b.u!==c("pageID"))return;var e={};a.forEach(function(a){a[0];a=a[1];var b=a.currentCursor;a=a.groupId;b!=null&&(e[(i||(i=d("I64"))).to_string(a)]=b)});l.debug("Updated sync cookie to set syncing=false, saving latest cursors");o(babelHelpers["extends"]({},b,{c:e,s:k.NOT_SYNCING}))}var s=[1,2,d("LSE2EEMetadataSyncGroupUtils").shouldAlwaysResetE2EEMetadata()?null:95];function e(a){var b=d("SortedAsyncIterable").toArray(d("ReQL").union.apply(void 0,s.map(function(b){return b==null?d("ReQL").empty():d("ReQL").fromTableAscending(a.tables.sync_groups).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(b))})));if((h||(h=c("isPromise")))(b)){c("promiseDone")(b.then(function(a){r(a)}));return}r(b)}function f(){try{var a=q();l.debug("Updated sync cookie to set syncing=true");o(babelHelpers["extends"]({},a,{s:k.SYNCING,u:c("pageID")}))}catch(a){c("FBLogger")("messenger_web").catching(c("getErrorSafe")(a)).warn("[LS] Failed to sync cookie")}}g.Status=k;g.DEFAULT_COOKIE=n;g.clear=a;g.get=q;g.syncBeforeUnload=e;g.setSyncing=f}),98);
__d("LSDataTraceFlushDeferred",["MetaConfig","Promise","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("LSDataTraceFlush").__setRef("LSDataTraceFlushDeferred");function a(a){if(!c("MetaConfig")._("62"))return(h||(h=b("Promise"))).resolve(function(){});else return i.load().then(function(b){return b.flushExpiredDataTraces(a)})}g.watchForExpiredTraces=a}),98);
__d("LSDatabaseProviderType",[],(function(a,b,c,d,e,f){"use strict";function a(a){return g(a.persistenceTypes)}function g(a){return a.includes("indexeddb")}f.isProviderPersisted=a;f.hasPersistentType=g}),66);
__d("LSDatascriptEvaluatorMaybeDeferred",["cr:6542"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:6542")}),98);
__d("LSTruncateTableAndSetShowError",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(a){return b.forEach(b.db.table(115).fetch(),function(a){return a["delete"]()})},function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(115).add({statusId:b.i64.cast([0,0]),timestampMs:c[0],errorShouldBeShown:a[0]})}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSConnectivityTruncateTableAndSetShowErrorStoredProcedure";a.__tables__=["user_visible_network_connectivity_error"];e.exports=a}),null);
__d("LSDeleteAllAndInsertConnectivityStatus",["LSTruncateTableAndSetShowError"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.forEach(c.db.table(114).fetch(),function(a){return a["delete"]()})},function(b){return d[0]=c.i64.of_float(Date.now()),c.db.table(114).add({statusId:void 0,timestampMs:d[0],internetConnectionState:a[0]})},function(d){return c.storedProcedure(b("LSTruncateTableAndSetShowError"),c.i64.neq(a[0],c.i64.cast([0,1])))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSConnectivityDeleteAllAndInsertConnectivityStatusStoredProcedure";a.__tables__=["connectivity_status"];e.exports=a}),null);
__d("LSDeleteAllAndInsertConnectivityStatusStoredProcedure",["LSDeleteAllAndInsertConnectivityStatus","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSDeleteAllAndInsertConnectivityStatus"),e.internetConnectionState);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSEagerlyLoadOnMessenger",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}f.eagerlyLoadOnMessenger=a}),66);
__d("LSSyncStoredProcedureUtils",["I64","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c=c!=null?(h||(h=d("I64"))).of_float(Date.now()+c):b.minTimeToSyncTimestampMs;yield a.pending_tasks.put(babelHelpers["extends"]({},b,{failureCount:(h||(h=d("I64"))).add(b.failureCount,h.one),minTimeToSyncTimestampMs:c}))});return j.apply(this,arguments)}function a(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.pending_tasks.index("queueNameTaskId")).getKeyRange(b)));if(b==null)return;return i(a,b,c)});return k.apply(this,arguments)}function c(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield a.network_requests.get(b,c));if(b==null)return;yield a.network_requests.put(babelHelpers["extends"]({},b,{failureCount:(h||(h=d("I64"))).add(b==null?void 0:b.failureCount,h.one)}))});return l.apply(this,arguments)}function e(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield a.network_requests.get(b,c));if(b==null)return;yield a.network_requests.put(babelHelpers["extends"]({},b,{epochId:void 0,networkTaskIdentifier:void 0}))});return m.apply(this,arguments)}g.incrementPendingTaskFailureCount=i;g.incrementPendingTasksTaskFailureCount=a;g.incrementNetworkRequestsTaskFailureCount=c;g.closeEpoch=e}),98);
__d("LSHandleTaskSendFailureForQueue2",["I64","LSSyncStoredProcedureUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){yield d("LSSyncStoredProcedureUtils").incrementPendingTasksTaskFailureCount(a,b,c),yield d("LSSyncStoredProcedureUtils").incrementNetworkRequestsTaskFailureCount(a,b,(h||(h=d("I64"))).neg_one),yield d("LSSyncStoredProcedureUtils").closeEpoch(a,b,h.neg_one)});return i.apply(this,arguments)}g["default"]=a}),98);
__d("LSHandleTaskSendSuccessForQueue2",["I64","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield a.network_requests.get(b,(h||(h=d("I64"))).neg_one));if(c==null||c.epochId==null)return;yield a.network_requests["delete"](b,h.neg_one)});return i.apply(this,arguments)}g["default"]=a}),98);
__d("LSHandleTaskSuccessOpsDownloadFailureForQueue",["I64","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield a.network_requests.get(b,(h||(h=d("I64"))).neg_one));c!=null&&c.epochId!=null&&(yield a.network_requests["delete"](b,(h||(h=d("I64"))).neg_one));c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.pending_tasks.index("queueNameTaskId")).getKeyRange(b)));c!=null&&(yield a.pending_tasks["delete"](c.taskId))});return i.apply(this,arguments)}g["default"]=a}),98);
__d("LSInternetConnectionState",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_CONNECTED:0,CONNECTED:1});f["default"]=a}),66);
__d("LSPlatformDefaultUnderlyingApi",["Promise","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return c("emptyFunction")}function d(){return(h||(h=b("Promise"))).resolve()}e={cleanup:c("emptyFunction"),logEvent:function(a){},onConnectionStatusChange:a,onReconnect:a,publish:d,subscribe:a};g["default"]=e}),98);
__d("LSPlatformDeviceId",["ChannelClientID","FBLogger","LSCookie","MqttWebDeviceID","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){if(c("gkx")("21118"))return c("MqttWebDeviceID").clientID;else return c("ChannelClientID").getID()}b=h();function a(a){a==null&&c("FBLogger")("messenger_web").info("Missed provider type for deviceId");return a==="persisted"?d("LSCookie").get().d:h()}g.deviceId=b;g.getDeviceIdForProviderType=a}),98);
__d("LSStreamGroupRef",["I64","LSMailboxInitialSyncCursor"],(function(a,b,c,d,e,f,g){"use strict";var h,i={connectionStatusChangeHandler:null,current:null,currentStreamGroupId:null,publishBuffer:new Map(),reconnectHandler:null,status:"Disconnected",subscribers:new Map()};function a(){if((h||(h=d("I64"))).equal((h||(h=d("I64"))).of_int32(1),d("LSMailboxInitialSyncCursor").syncChannel))return"mqtt";return i.current==null||i.current.streamGroupLoggingContext.sgTransportId==null?"null":i.current.streamGroupLoggingContext.sgTransportId}function b(){return i.status}g.streamGroupRef=i;g.getTransportId=a;g.getTransportStatus=b}),98);
__d("MessengerPWAVersionForUserAgent",["isMessengerPWA","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function a(){if(!c("justknobx")._("3005"))return void 0;var a=c("isMessengerPWA")();if(!a)return void 0;a=(a=new URL(window.location.href).searchParams.get("__pwa"))!=null?a:"1.0.0";return a}g["default"]=a}),98);
__d("LSPlatformRealtimeTransport",["I64","LSDynamicDependencies","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSShape","LSStreamGroupRef","MessengerPWAVersionForUserAgent","NetworkStatus","Promise","QuickPerformanceLogger","Random","clearTimeout","promiseDone","qpl","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=c("qpl")._(701246226,"1285");e="LSPlatformRealtimeTransport.NotConnected";var m="LSPlatformRealtimeTransport.Timeout";function n(a){var b=new Map();return{getAll:function(){return Array.from(b.values())},getOrStart:function(c){var d=c.toString(),e=b.get(d);e==null&&(e=a(c),b.set(d,e));return e}}}function o(a){}function a(a,e,f){var g=new Map(),p={contents:o},q=new Set(),r=new Map(),s=[],t=n(function(b){b=a(b,f);s.push(b.subscribe(function(a){var b=JSON.parse(a),e=d("LSDynamicDependencies").downloadBootloaderDependencies(b.sp,b.nop,b.ntop);a=b.request_id;var f;if(a!=null){var h=g.get(a);if(h==null)f=!1;else{c("clearTimeout")(h.timeoutId);h.resolve({downloadTask:e,payload:b,type:"taskresponse"});g["delete"](a);a=h.instanceKey;(k||(k=c("QuickPerformanceLogger"))).markerPoint(l,"response",{instanceKey:a});k.markerAnnotate(l,{string:{isWebApp:String(d("LSMailboxInitialSyncCursor").isWebApp),networkStatus:String(c("NetworkStatus").isOnline()),streamGroupId:d("LSStreamGroupRef").getTransportId(),streamGroupStatus:d("LSStreamGroupRef").getTransportStatus(),syncOverDGW:String(d("LSMailboxInitialSyncCursor").syncOverDGW)}},{instanceKey:a});k.markerEnd(l,2,a);f=!0}}else f=!1;if(!f){Array.from(r.entries()).forEach(function(a){return a[1](e,b)});return}}));s.push(b.onReconnect(function(a){return p.contents(a)}));s.push(b.onConnectionStatusChange(function(a){q.forEach(function(b){return b(a)})}));return b});t.getOrStart((j||(j=d("LSIntEnum"))).unwrapIntEnum(d("LSMailboxInitialSyncCursor").syncChannel));return{cleanup:function(){s.forEach(function(a){return a()}),t.getAll().forEach(function(a){return a.cleanup()})},logEvent:function(a){t.getAll().forEach(function(b){return b.logEvent(a)})},onConnectionStatusChange:function(a){q.add(a);return function(){q["delete"](a)}},onReconnect:function(a){p.contents=a;return function(){p.contents=o}},publish:function(a){var f=a.databaseType,n=a.payload,o=a.queueName,p=a.requestId,q=a.syncChannel,r=a.type_;return new(h||(h=b("Promise")))(function(a,b){var h=t.getOrStart((j||(j=d("LSIntEnum"))).unwrapIntEnum(q));if((i||(i=d("I64"))).equal(r,(j||(j=d("LSIntEnum"))).ofNumber(3))){var s=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);(k||(k=c("QuickPerformanceLogger"))).markerStart(l,s);k.markerPoint(l,"publish",{instanceKey:s});var u=c("setTimeout")(function(){h.logEvent("Timeout");var a=g.get(p);(k||(k=c("QuickPerformanceLogger"))).markerPoint(l,"timeout",{instanceKey:s});k.markerEnd(l,3,s);a!=null&&(g["delete"](p),a.reject({RE_EXN_ID:m}));return b({RE_EXN_ID:m})},3e4);g.set(p,{instanceKey:s,queueName:o,reject:b,resolve:a,timeoutId:u,timestamp:Date.now()})}u=c("MessengerPWAVersionForUserAgent")();c("promiseDone")(h.publish(d("LSJson").stringify(d("LSShape").ofRecord(babelHelpers["extends"]({app_id:e,payload:n},u!=null?{pwa_version:u}:{},{request_id:p,type:r}))),r,f),function(){if(!(i||(i=d("I64"))).equal(r,(j||(j=d("LSIntEnum"))).ofNumber(3)))return a({type:"noresponseexpected"})},function(a){b(a)})})},subscribeToNonTaskResponses:function(a){var b={};r.set(b,a);return function(){r["delete"](b)}}}}g.NotConnected=e;g.Timeout=m;g.LSPlatformRealtimeTransport=a}),98);
__d("shouldStubUnderlyingTransport",["ExecutionEnvironment"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return!(h||(h=c("ExecutionEnvironment"))).canUseDOM&&!(h||(h=c("ExecutionEnvironment"))).isInWorker}g["default"]=a}),98);
__d("LSPlatformMqttRealtimeTransport",["I64","LSIntEnum","LSPlatformDefaultUnderlyingApi","LSPlatformRealtimeTransport","Promise","promiseDone","shouldStubUnderlyingTransport"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a){return[{payload:JSON.stringify({ls_fdid:"",ls_sv:a}),qos:1,topic:"/ls_app_settings"}]}function l(a){var e={contents:a.getConnectionState()},f={contents:function(){}},g={contents:new(j||(j=b("Promise")))(function(a,b){f.contents=a})},k={onMQTTStateChanged:function(a){a==="Connected"?f.contents():a==="Disconnected"&&e.contents==="Connected"&&(g.contents=new(j||(j=b("Promise")))(function(a,b){f.contents=a})),e.contents=a}};e.contents==="Connected"&&f.contents();a.subscribeChannelEvents(k);return[function(){a.unsubscribeChannelEvents(k)},function(e,f,k){return g.contents.then(function(){return new(j||(j=b("Promise")))(function(b,g){c("promiseDone")(a.publish("/ls_req",e,{listener:{onEvent:function(a){if(a==="NOT_CONNECTED")return g({RE_EXN_ID:d("LSPlatformRealtimeTransport").NotConnected})}},qos:(h||(h=d("I64"))).equal(f,(i||(i=d("LSIntEnum"))).ofNumber(4))?0:1,skipBuffer:!1}),function(){return b()},function(a){if(a.message==="Publish Timed Out")return g({RE_EXN_ID:d("LSPlatformRealtimeTransport").Timeout});else return g(a)})})})}]}var m={contents:void 0};function a(a,b,d){if(c("shouldStubUnderlyingTransport")())return c("LSPlatformDefaultUnderlyingApi");var e=d.getInstance(b),f={getPublishMessages:function(){return k(a)}};e.registerExtraConnectPayloadProvider(f);var g={onMQTTStateChanged:function(a){var b=m.contents;if(b!=null)return b(a)}};e.subscribeChannelEvents(g);var h=e.subscribe("/ls_foreground_state",function(){});b=l(e);var i=b[0];b=b[1];return{cleanup:function(){e.unregisterExtraConnectPayloadProvider(f),d.shutdownAndClear(),e.unsubscribeChannelEvents(g),h(),i()},logEvent:function(a){},onConnectionStatusChange:function(a){m.contents=a;return function(){m.contents=void 0}},onReconnect:function(a){var b={contents:e.getConnectionState()},c={contents:b.contents==="Connected"},d={onMQTTStateChanged:function(d){d==="Connected"&&(c.contents&&b.contents!=="Connected"&&a(1),c.contents=!0),b.contents=d}};e.subscribeChannelEvents(d);return function(){e.unsubscribeChannelEvents(d)}},publish:b,subscribe:function(a){return e.subscribe("/ls_resp",function(b){return a(b)})}}}g["default"]=a}),98);
__d("LSPlatformRequestId",[],(function(a,b,c,d,e,f){"use strict";var g=4;function a(){var a=g;g+=1;return a}b={generate:a};f["default"]=b}),66);
__d("LSPlatformRequestScheduler",["clearTimeout","justknobx","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=Math.pow(2,31)-1;a=function(){function a(){this.requests=new Map()}var b=a.prototype;b.schedule=function(a,b,d){var e=this.requests.get(b);e!=null&&c("clearTimeout")(e);e=c("justknobx")._("4435")?Math.min(d,h):d;this.requests.set(b,c("setTimeout")(a,e))};b.cleanup=function(){this.requests.forEach(function(a){return c("clearTimeout")(a)})};return a}();g["default"]=a}),98);
__d("LSPlatformServerResponseHandler",["FBLogger","Promise","asyncToGeneratorRuntime","clearTimeout","nullthrows","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i="executeFirstBlockForSyncTransaction";a=function(){function a(a){this.eval=a,this.currentlyRunning=new Map()}var d=a.prototype;d.evalWhenReady=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var d;try{yield a,d=c("setTimeout")(function(){c("FBLogger")("messenger_web").mustfix("waited longer than 30 seconds to eval sync script")},3e4),yield this.eval(b)}finally{c("clearTimeout")(d)}});function d(b,c){return a.apply(this,arguments)}return d}();d.$1=function(a){var c=this.currentlyRunning.get(a);c==null&&(c=(h||(h=b("Promise"))).resolve(),this.currentlyRunning.set(a,c));return c};a.getSyncScriptType=function(a){var b;if(!((b=a.sp)!=null&&b.includes(i)))return{status:"non-transactional"};b=function(){try{var b;return(b=JSON.parse(a.syncScript))==null?void 0:b.step}catch(a){return null}}();if(!Array.isArray(b)){c("FBLogger")("messenger_web").warn("Sync payload appears invalid.");return{status:"non-transactional"}}b=[b];while(b.length){var d=c("nullthrows")(b.shift());for(d of d)if(Array.isArray(d)){if(d[0]===5&&d[1]===i&&Array.isArray(d[2]))return{status:"transactional",syncGroup:parseInt(d[2][1],10)};b.push(d)}}return{status:"err"}};d.maybeEvalInOrderReceived=function(b,d){var e,f=this,g=a.getSyncScriptType(d),h=0;switch(g.status){case"err":c("FBLogger")("messenger_web").warn("Sync script sync group parsing failed: employed sprocs were %s",JSON.stringify((e=d.sp)!=null?e:void 0));break;case"non-transactional":return this.evalWhenReady(b,d);case"transactional":h=g.syncGroup;break}e=this.$1(h);g=e.then(function(){return f.evalWhenReady(b,babelHelpers["extends"]({},d,{priority:"sync_script"}))})["catch"](function(a){f.currentlyRunning["delete"](h);throw a});this.currentlyRunning.set(h,g);return g};return a}();g["default"]=a}),98);
__d("LSPlatformTaskSyncGroupId",[],(function(a,b,c,d,e,f){"use strict";a=-1;b=a;f["default"]=b}),66);
__d("MWPBeginHandlingPendingTasksForQueue",["LSBeginHandlingFireForgetTasksForQueueStoredProcedure","LSBeginHandlingPendingTasksForQueue2","LSFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d){var e=d.fireAndForgetTask,g=d.ignoreSoftDelay,h=d.queueName;d=(yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(e===!0){var b=(yield c("LSBeginHandlingFireForgetTasksForQueueStoredProcedure")(c("LSFactory")(a),{queueName:h}));b=b[0];return[b]}return c("LSBeginHandlingPendingTasksForQueue2")(a,{ignoreSoftDelay:g,queueName:h})});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":37"));return d});return h.apply(this,arguments)}g["default"]=a}),98);
__d("MWPlatformTaskUtils",["FBLogger","I64","JSScheduler","MetaConfig","Promise","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,e){function f(){return g.apply(this,arguments)}function g(){g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield a(e)}catch(a){c("FBLogger")("messenger_web").catching(a).warn("Failed to calculate work for task queue %s",e.queueName)}});return g.apply(this,arguments)}if((j||(j=d("I64"))).gt(e.priority,(j||(j=d("I64"))).zero)&&c("MetaConfig")._("78")){var h=function(){f()};(i||(i=c("JSScheduler"))).scheduleLoggingPriCallback(h)}else c("promiseDone")(f())}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{yield a(b)}catch(a){c("FBLogger")("messenger_web").catching(a).warn("Failed to calculate work for fire forget queue %s",b.queueName)}});return m.apply(this,arguments)}function a(a,c){var e=new Set(),f=[],g=[];g.push(a.tables.pending_tasks.index("queueNameTaskId").subscribe(function(a,b){var c;if(b.operation==="delete"){e.add(a[0]);return}a=b.operation==="put"&&b.prevValue==null||b.operation==="add";c=b.operation==="put"&&(j||(j=d("I64"))).compare(b.value.failureCount,(c=(c=b.prevValue)==null?void 0:c.failureCount)!=null?c:(j||(j=d("I64"))).zero)>0;(a||c)&&e.add(b.value.queueName);(b.operation==="add"&&b.value.dataTraceId==null||b.value.dataTraceId==="")&&f.push(b.value)}));g.push(a.tables.network_requests.subscribe(function(a,b){a=a[0];if(a==="")return;b.operation==="delete"?e.add(a):b.value.epochId==null&&e.add(a)}));g.push(a.subscribeToCommit(function(){var g=Array.from(e);e.clear();f=[];g.forEach(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.pending_tasks.index("queueNameTaskId")).bounds({gte:[b]})));b!=null&&k(c,b)});return function(a){return e.apply(this,arguments)}}())}));return g}function e(a,e){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.pending_tasks))),c=new Set();for(b of b){if(c.has(b.queueName))continue;c.add(b.queueName);k(e,b)}})())}function n(a,e){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var g=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.pending_fire_and_forget_tasks)));yield (h||(h=b("Promise"))).all(g.map(function(a){return l(e,a)}));c("promiseDone")(a.runInTransaction(function(a){return(h||(h=b("Promise"))).all(g.map(function(b){return a.pending_fire_and_forget_tasks["delete"](b.taskId)}))},"readwrite","background",void 0,f.id+":196"))})())}function o(a,b){var c=!1,d=[];d.push(a.tables.pending_fire_and_forget_tasks.subscribe(function(a,b){if(b.operation==="delete")return;a=b.operation==="put"&&b.prevValue==null||b.operation==="add";a&&(c=!0)}));d.push(a.subscribeToCommit(function(){c&&n(a,b),c=!1}));return d}g.checkQueuesWhenPendingTaskTableUpdates=a;g.checkAllPendingTasksForWork=e;g.checkAllFireForgetTasksForWork=n;g.checkQueuesWhenPendingFireForgetTaskTableUpdates=o}),98);
__d("LSPlatformTaskSystemTransport",["CurrentMessengerUser","FBLogger","I64","JSResourceForInteraction","JSScheduler","LSDatabaseProviderType","LSHandleTaskSendFailureForQueue2","LSHandleTaskSendSuccessForQueue2","LSHandleTaskSuccessOpsDownloadFailureForQueue","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSPlatformRealtimeTransport","LSPlatformRequestId","LSPlatformRequestScheduler","LSPlatformServerResponseHandler","LSPlatformTaskSyncGroupId","LSShape","LSVec","MWPBeginHandlingPendingTasksForQueue","MWPBumpEntityKey","MWPlatformTaskUtils","Promise","ReQL","asyncToGeneratorRuntime","cr:4031","cr:6668","gkx","promiseDone","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=500,m=c("JSResourceForInteraction")("publishLSPlatformDeidentifiedPayload").__setRef("LSPlatformTaskSystemTransport"),n=new Set([632,765,60011,1006,1018].map(function(a){return a.toString()}));a=function(){function a(a,e,f,g){var h=this;this.key="ls";this.$8=!1;this.$19=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield c("MWPBeginHandlingPendingTasksForQueue")(h.$1,{ignoreSoftDelay:b,queueName:a}));for(a of b)yield h.$18(d("LSShape").toRecord(a))});return function(b,c){return a.apply(this,arguments)}}();this.$1=a;this.$2=e;this.$3=f;this.$4=g;this.$8=d("LSDatabaseProviderType").isProviderPersisted(a);this.$5=new(c("LSPlatformRequestScheduler"))();this.$6=new(c("LSPlatformServerResponseHandler"))(f);this.$7=this.$9();this.$10()}var e=a.prototype;e.$11=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var d=a.filter(function(a){return a.label!=null&&n.has(a.label)});if(d.length<a.length){d.length>0&&c("FBLogger")("maw_ohai").mustfix("Deidentifed tasks label %s sent together with normal tasks",d[0].label);a=(yield this.$2.publish(b));return a}a=d[0];d=(yield m.load());d=(yield d(babelHelpers["extends"]({},b,{taskLabel:a.label})));return d});function d(b,c){return a.apply(this,arguments)}return d}();e.$12=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.$1.runInTransaction(function(b){return c("LSHandleTaskSendFailureForQueue2")(b,a)},"readwrite",void 0,void 0,f.id+":151")});function d(b){return a.apply(this,arguments)}return d}();e.$13=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.$1.runInTransaction(function(b){return c("LSHandleTaskSendSuccessForQueue2")(b,a)},"readwrite","background",void 0,f.id+":160")});function d(b){return a.apply(this,arguments)}return d}();e.$14=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.$1.runInTransaction(function(b){return c("LSHandleTaskSuccessOpsDownloadFailureForQueue")(b,a)},"readwrite",void 0,void 0,f.id+":168")});function d(b){return a.apply(this,arguments)}return d}();e.$15=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=c("LSVec").toArray(a.tasks).slice(0).map(function(a){return d("LSShape").toRecord(a)});a=a[0];if(a==null)return;a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(this.$1.tables.pending_tasks).getKeyRange(a.task_id)));return a==null?void 0:a.dataTraceId});function e(b){return a.apply(this,arguments)}return e}();e.$16=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=this;if(a.network_payload==null)return;var g=d("LSShape").toRecord(a.network_payload);(k||(k=c("JSScheduler"))).scheduleLoggingPriCallback(function(){return g&&(b("cr:6668")==null?void 0:b("cr:6668").recordTaskSending(g.tasks))});var i=this.$4;try{yield (j||(j=b("Promise"))).all(c("LSVec").toArray(g.tasks).map(function(a){return d("LSShape").toRecord(a)}).map(function(b){var g=c("LSPlatformRequestId").generate();return f.$11([b],{databaseType:c("LSPlatformTaskSyncGroupId"),payload:d("LSJson").stringify(d("LSShape").ofRecord({label:b.label,payload:b.payload,version:i})),queueName:a.queue_name,requestId:g,syncChannel:d("LSMailboxInitialSyncCursor").taskChannel,type_:(h||(h=d("I64"))).of_int32(e)})}))}catch(a){}});function e(b,c){return a.apply(this,arguments)}return e}();e.$17=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(a.network_payload==null)return;var f=d("LSShape").toRecord(a.network_payload),g=c("LSVec").toArray(f.tasks).map(function(a){return d("LSShape").toRecord(a)}),j=(yield this.$15(f));(k||(k=c("JSScheduler"))).scheduleLoggingPriCallback(function(){return f&&(b("cr:6668")==null?void 0:b("cr:6668").recordTaskSending(f.tasks))});var l=c("LSPlatformRequestId").generate(),m,n=c("qex")._("2071");if(n!=null&&n!=="default"){var o=n+"."+(i||(i=d("LSIntEnum"))).toNumber(d("LSMailboxInitialSyncCursor").taskChannel)+"."+e.toString();d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",o)}try{m=(yield this.$11(g,{databaseType:c("LSPlatformTaskSyncGroupId"),payload:d("LSJson").stringify(d("LSShape").ofRecord(babelHelpers["extends"]({},f,{version_id:this.$4},j==null?{}:{data_trace_id:j}))),queueName:a.queue_name,requestId:l,syncChannel:d("LSMailboxInitialSyncCursor").taskChannel,type_:(h||(h=d("I64"))).of_int32(e)}))}catch(b){if(n!=null&&n!=="default"){o=n+"."+(i||(i=d("LSIntEnum"))).toNumber(d("LSMailboxInitialSyncCursor").taskChannel)+"."+e.toString();d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",o+".exception");b.RE_EXN_ID===d("LSPlatformRealtimeTransport").Timeout?d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",o+".exception.timeout"):b.RE_EXN_ID===d("LSPlatformRealtimeTransport").NotConnected&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",o+".exception.notconnected")}b.RE_EXN_ID===d("LSPlatformRealtimeTransport").Timeout?d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_timeout"):b.RE_EXN_ID===d("LSPlatformRealtimeTransport").NotConnected?(d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_notconnected"),c("FBLogger")("messenger_web").warn("Publishing a task to the server not connected")):(d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_generic"),c("FBLogger")("messenger_web").warn("Error while publishing a task for request: %s, error %s",e,JSON.stringify(b)));yield this.$12(a.queue_name)}if(m!=null&&m.type==="taskresponse")try{j=m.downloadTask;var p=m.payload;l={experiments:p.ex,sp:p.sp,syncScript:p.payload,target:p.target,taskNames:g.map(function(a){return a.label}).filter(Boolean)};this.$8||c("gkx")("10470")?yield this.$6.evalWhenReady(j,l):yield this.$3(l);yield this.$13(a.queue_name);(k||(k=c("JSScheduler"))).scheduleLoggingPriCallback(function(){return f&&(b("cr:6668")==null?void 0:b("cr:6668").recordTaskSent(f.tasks,p.payload))})}catch(b){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","handle_task_failure"),c("FBLogger")("messenger_web").catching(b).mustfix("Encountered an error while processing a task response via realtime transport"),(b==null?void 0:b.name)==="dynamic_sproc_loading_timeout"&&c("gkx")("14417")?yield this.$14(a.queue_name):yield this.$12(a.queue_name)}});function e(b,c){return a.apply(this,arguments)}return e}();e.decideWhatToDoWithTask=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){var h=this,i=(yield c("MWPBeginHandlingPendingTasksForQueue")(a,{fireAndForgetTask:g,ignoreSoftDelay:!1,queueName:e,transportKey:f}));c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){for(var a of i)yield h.$18(d("LSShape").toRecord(a))})())});function e(b,c,d,e){return a.apply(this,arguments)}return e}();e.$18=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=this.$5,f=this.$19;function g(a,b){e.schedule(function(){c("promiseDone")(f(a,!1))},a,b!=null?(h||(h=d("I64"))).to_float(b):l)}var i=(h||(h=d("I64"))).to_int32(a.work_item_type);switch(i){case 1:yield this.$17(a,3);break;case 5:yield this.$16(a,4);break;case 3:g(a.queue_name,a.next_sync_ms);break;case 2:yield b("cr:4031").handleLSWork(this.$1,a,d("CurrentMessengerUser").getAccountID());break;case 4:break;default:c("FBLogger")("messenger_web").warn("Unknown Task type of %s",i)}});function e(b){return a.apply(this,arguments)}return e}();e.$9=function(){var a=this,e=this.$1;return this.$2.onReconnect(function(g){if(d("LSMailboxInitialSyncCursor").isWebApp&&3===g&&c("qex")._("2082")===!0)return;c("promiseDone")(e.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.network_requests).bounds({gte:d("ReQL").key("")})));yield (j||(j=b("Promise"))).all(e.map(function(b){b=b.taskQueueName;return c("LSHandleTaskSendFailureForQueue2")(a,b)}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":488"));a.$10()})};e.$10=function(){var a=this;d("MWPlatformTaskUtils").checkAllPendingTasksForWork(this.$1,function(b){b=b.queueName;return a.decideWhatToDoWithTask(a.$1,b)})};e.cleanup=function(){this.$7()};return a}();g["default"]=a}),98);
__d("LSProgramTarget",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({DASM:1,JS:2,JSON:3});c=a;f["default"]=c}),66);
__d("LSVersion",[],(function(a,b,c,d,e,f){e.exports="31622020667412769"}),null);
__d("MWPlatformTaskSystem",["LSPlatformRequestScheduler","MWPlatformTaskUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var e=this;this.$1=a;this.$2=b;this.$3=new(c("LSPlatformRequestScheduler"))();this.$4=d("MWPlatformTaskUtils").checkQueuesWhenPendingTaskTableUpdates(a,function(b){var c=b.queueName;b=b.transportKey;return e.$6(a,c,b,!1)});this.$5=d("MWPlatformTaskUtils").checkQueuesWhenPendingFireForgetTaskTableUpdates(a,function(b){var c=b.queueName;b=b.transportKey;return e.$6(a,c,b,!0)});this.$7()}var e=a.prototype;e.$6=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){yield this.$2.decideWhatToDoWithTask(a,b,c,d)});function c(b,c,d,e){return a.apply(this,arguments)}return c}();e.$7=function(){var a=this;d("MWPlatformTaskUtils").checkAllPendingTasksForWork(this.$1,function(b){b=b.queueName;return a.$6(a.$1,b)})};e.cleanup=function(){this.$4.forEach(function(a){return a()}),this.$5.forEach(function(a){return a()}),this.$2.cleanup()};return a}();g["default"]=a}),98);
__d("getMWLSRegion",["MessengerWebRegion"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("MessengerWebRegion").regionNullable;return a==null?"":a}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("DedupMiThreadCreationCache",["justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set();a=function(a){var b=c("justknobx")._("4749");b&&h.add(a)};g.DedupMiThreadCreationCache=h;g.addToDedupMiThreadCreationCache=a}),98);
__d("EBMainThreadListeners",["EBReenrollmentTriggerListener","LSDatabaseSingleton","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);d("EBReenrollmentTriggerListener").initEBReenrollmentTriggerListener(a)});return i.apply(this,arguments)}g.initEBListeners=a}),98);
__d("LSSetIGE2EEEligibility",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.filter(c.db.table(176).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.contactId,a[0])&&c.i64.eq(b.e2eeEligibility,a[1])}).next().then(function(e,f){f=e.done;e=e.value;return f?(d[1]=new c.Map(),d[1].set("contact_id",a[0]),d[1].set("new_eligibility",a[1]),d[2]=c.toJSON(d[1]),c.storedProcedure(b("LSIssueNewTask"),"ig_set_e2ee_eligibility",c.i64.cast([0,60001]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):(e.item,0)})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSContactSetIGE2EEEligibilityStoredProcedure";a.__tables__=["ig_contact_info"];e.exports=a}),null);
__d("LSSetIGE2EEEligibilityStoredProcedure",["LSSetIGE2EEEligibility","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSSetIGE2EEEligibility"),e.id,e.e2eeEligibility);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("IGDSetIGE2EEEligibility",["I64","LSDatabaseSingleton","LSFactory","LSInstagramE2EEEligibility","LSIntEnum","LSSetIGE2EEEligibilityStoredProcedure","MAWCurrentUser","asyncToGeneratorRuntime","justknobx","promiseDone","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(h||d("react")).useEffect;function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton);return e.runInTransaction(function(e){return c("LSSetIGE2EEEligibilityStoredProcedure")(c("LSFactory")(e),{e2eeEligibility:(j||(j=d("LSIntEnum"))).ofNumber(b),id:(k||(k=d("I64"))).of_string(a)})},"readwrite",void 0,void 0,f.id+":31")});return n.apply(this,arguments)}function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=[],a[0]=b):b=a[0];l(o,b)}function o(){if(c("justknobx")._("2058"))return;var a=d("MAWCurrentUser").getID();c("promiseDone")(m(a,c("LSInstagramE2EEEligibility").ELIGIBLE))}g.useUpsertSetIGE2EEEligibilityOnMount=a}),98);
__d("LSGetLatestThreadIds.nop",["I64","LSVec","MAWBridgeSafeActionsWorkerAndUI","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=[];e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(e.mi_act_mapping_table)).then(function(a){return a.map(function(a){a=a.jid;return(i||(i=d("I64"))).to_string(a)})}));if(e.length>0){var g=new Set(e);a.forEach(function(a){g.has(a)&&f.push(a)})}return(h||(h=b("Promise"))).resolve([c("LSVec").ofArray(f),!0])});return k.apply(this,arguments)}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("MAWBridgeSafeActionsWorkerAndUI").sendAndReceiveBackendWorkerAndUIShared("getLatestThreadIds",{numThreads:(i||(i=d("I64"))).to_int32(a)}));return a});return m.apply(this,arguments)}a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k){k===void 0&&(k=!1);if((i||(i=d("I64"))).gt(g,(i||(i=d("I64"))).zero))try{e=(yield l(g));return k?j(e,a):(h||(h=b("Promise"))).resolve([c("LSVec").ofArray(e),!0])}catch(a){return(h||(h=b("Promise"))).resolve([c("LSVec").ofArray([]),!1])}return(h||(h=b("Promise"))).resolve([c("LSVec").ofArray([]),!0])});function e(b,c,d,e,f){return a.apply(this,arguments)}return e}();a.__nop_name__="LSGetLatestThreadIds";g["default"]=a}),98);
__d("LSPlatformGraphQLLightspeedRequestQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"deviceId"},{defaultValue:null,kind:"LocalArgument",name:"requestId"},{defaultValue:null,kind:"LocalArgument",name:"requestPayload"},{defaultValue:null,kind:"LocalArgument",name:"requestType"}],b=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"device_id",variableName:"deviceId"},{kind:"Variable",name:"request_id",variableName:"requestId"},{kind:"Variable",name:"request_payload",variableName:"requestPayload"},{kind:"Variable",name:"request_type",variableName:"requestType"}],concreteType:"LightspeedWebResponse",kind:"LinkedField",name:"lightspeed_web_request",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"payload",storageKey:null},{alias:null,args:null,concreteType:"LightspeedWebRequestDependency",kind:"LinkedField",name:"dependencies",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"experiments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"target",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LSPlatformGraphQLLightspeedRequestQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LSPlatformGraphQLLightspeedRequestQuery",selections:b},params:{id:"8996647210435532",metadata:{},name:"LSPlatformGraphQLLightspeedRequestQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("LSPlatformGraphQLLightspeedRequestQuery",["LSPlatformGraphQLLightspeedRequestQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("LSPlatformGraphQLLightspeedRequestQuery.graphql");g.query=a}),98);
__d("LSPlatformGraphQLLightspeedRequest",["CometRelay","LSPlatformGraphQLLightspeedRequestQuery","XPlatRelayEnvironment"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){return d("CometRelay").fetchQuery(d("XPlatRelayEnvironment").getRelayEnvironment(),d("LSPlatformGraphQLLightspeedRequestQuery").query,{deviceId:a,requestId:b,requestPayload:c,requestType:e}).toPromise().then(function(a){var b;a=a==null||(b=a.viewer)==null?void 0:b.lightspeed_web_request;if(a!=null)return babelHelpers["extends"]({dependencies:void 0},a)})}g["default"]=a}),98);
__d("WAChatState",[],(function(a,b,c,d,e,f){"use strict";a="typing";b="recording_audio";c="idle";d={TYPING:a,RECORDING_AUDIO:b};e={IDLE:c};f.TYPING=a;f.RECORDING_AUDIO=b;f.IDLE=c;f.ACTIVE_CHAT_STATE_TYPE=d;f.IDLE_CHAT_STATE_TYPE=e}),66);
__d("MAWBridgeReceivedChatStateHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise","ServerTime","WAChatState","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeReceivedChatStateHandler",function(a,f){var g=(i||(i=d("I64"))).of_string(e.senderId),j=i.of_float(3e3+d("ServerTime").getMillis());if(e.state===d("WAChatState").TYPING)return a.typing_indicator.upsert([f,g],{expirationTimestampMs:j,senderId:g,threadKey:f}).then(c("emptyFunction"));else if(e.state===d("WAChatState").IDLE)return a.typing_indicator["delete"](f,g).then(c("emptyFunction"));else return(h||(h=b("Promise"))).resolve()})}g.call=a}),98);
__d("MAWFTSRawStringMatcher",["JSResourceForInteraction","asyncToGeneratorRuntime","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=c("JSResourceForInteraction")("WAFtsMultiLangTokenizer").__setRef("MAWFTSRawStringMatcher"),i=null;function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){i=(yield h.load());return l});return j.apply(this,arguments)}function k(a){return new(c("nullthrows")(i))().tokenize(a)}function l(a,b){a=Array.from(k(a)).filter(function(a){return a.length>1});if(a.length===0)return!1;var c=Array.from(k(b));return a.every(function(a){return c.some(function(b){return b.startsWith(a)})})}g.load=a}),98);
__d("MAWFTSMergeCutoverSearchResults",["fbt","I64"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function a(a,b){var c,e;c=(i||(i=d("I64"))).add((c=a.matchCount)!=null?c:(i||(i=d("I64"))).of_string("1"),(c=b.matchCount)!=null?c:(i||(i=d("I64"))).of_string("1"));b=i.max((e=a.messageTimestampMs)!=null?e:(i||(i=d("I64"))).minus_one,(e=b.messageTimestampMs)!=null?e:(i||(i=d("I64"))).minus_one);return babelHelpers["extends"]({},a,{contextLine:h._(/*BTDS*/"_j{\"*\":\"{number} matched messages\",\"_1\":\"1 matched message\"}",[h._plural(i.to_int32(c),"number")]).toString(),matchCount:c,matchLengths:void 0,matchOffsets:void 0,messageId:void 0,messageTimestampMs:(i||(i=d("I64"))).equal(b,(i||(i=d("I64"))).minus_one)?void 0:b})}g.mergeCutoverSearchResults=a}),226);
__d("MAWMiActOnActThreadReadyDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MAWMiActOnActThreadReady").__setRef("MAWMiActOnActThreadReadyDeferred");function a(a,b,c,d){return h.load().then(function(e){e=e.onActThreadReady;return e(a.tables,b,c,d)})}g["default"]=a}),98);
__d("MAWFTSUniversalSearchQPLLogger",["QPLUserFlow","emptyFunction","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h={hasStarted:!1,instanceKey:5e3},i=c("qpl")._(25301522,"2409");function a(){h.hasStarted&&j();h.instanceKey++;h.hasStarted=!0;c("QPLUserFlow").start(i,{annotations:{bool:{isInThread:!1}},instanceKey:h.instanceKey});return h.instanceKey}function j(a){if(!h.hasStarted||a!=null&&h.instanceKey!==a)return;h.hasStarted=!1;c("QPLUserFlow").endCancel(i,{instanceKey:h.instanceKey})}function b(a){var b=a.annotations,d=a.instanceKey;a=a.point;if(!h.hasStarted||d!=null&&h.instanceKey!==d)return;c("QPLUserFlow").addPoint(i,a,{instanceKey:h.instanceKey});b!=null&&k({annotations:b,instanceKey:h.instanceKey})}function k(a){var b=a.annotations;a=a.instanceKey;if(!h.hasStarted||a!=null&&h.instanceKey!==a)return;c("QPLUserFlow").addAnnotations(i,b,{instanceKey:h.instanceKey})}function d(a){if(!h.hasStarted||a!=null&&h.instanceKey!==a)return;h.hasStarted=!1;c("QPLUserFlow").endSuccess(i,{annotations:{"int":{result_count:h.currentResultCount}},instanceKey:h.instanceKey})}e={getCurrentInstanceKey:function(){return h.instanceKey},qplAddAnnotations:k,qplAddPoint:b,qplCancel:j,qplMarkFirstResultShowUp:c("emptyFunction"),qplStart:a,qplSuccess:d,updateCurrentResultCount:c("emptyFunction")};f=e;g["default"]=f}),98);
__d("escapeRegExp",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}f["default"]=a}),66);
__d("MWContentSearchUtils",["fbt","I64","LSIntEnum","LSMessageSearchType","MAWVault","escapeRegExp","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=c("gkx")("1798");function l(a){return a.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function m(a,b){a=l(a).split(" ");var d=l(b),e=[],f=[];a.forEach(function(a){var b=new RegExp(c("escapeRegExp")(a),"gi");b=d.matchAll(b);b=Array.from(b);b=b.map(function(a){return a.index});var g=b.map(function(b){return a.length});f.push.apply(f,b);e.push.apply(e,g)});return{matchLengths:e.join(","),matchOffsets:f.join(",")}}function a(a,b,e,f){if(e!=null&&(b===1||(i||(i=d("I64"))).equal(f,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE)))){f=d("MAWVault").isVaulted(e)?d("MAWVault").unvault(e):e;e=m(a,f);return babelHelpers["extends"]({contextLine:f},e)}else return{contextLine:h._(/*BTDS*/"_j{\"*\":\"{number} matched messages\",\"_1\":\"1 matched message\"}",[h._plural(b,"number")]).toString(),matchLengths:void 0,matchOffsets:void 0}}function b(a,b){return a===1&&b!=null?b:void 0}function e(a,b){return a===1&&b!=null?b:void 0}function f(a){return a!=null?(i||(i=d("I64"))).of_float(a):void 0}function n(a,b){a=(i||(i=d("I64"))).of_float(-a);return b==null?a:i.min(a,b)}function o(a,b){if(!k||a.messageTimestampMs==null||b.messageTimestampMs==null)if((i||(i=d("I64"))).gt(a.globalIndex,b.globalIndex))return 1;else if((i||(i=d("I64"))).lt(a.globalIndex,b.globalIndex))return-1;else return 0;else if((i||(i=d("I64"))).lt(a.messageTimestampMs,b.messageTimestampMs))return 1;else if((i||(i=d("I64"))).gt(a.messageTimestampMs,b.messageTimestampMs))return-1;else return 0}g.getContextLineAndMatches=a;g.getMessageOtid=b;g.getMessageId=e;g.getMessageTimestamp=f;g.getGlobalIndex=n;g.searchResultsCompareFn=o}),226);
__d("LSThreadPointQueryAndRestoreMessagesWithGroupJID",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("wa_jid",a[0]),d[0].set("tam_thread_subtype",c.i64.cast([0,0])),d[1]=d[0].get("wa_jid"),d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[1]),c.i64.cast([0,1021]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure",["LSSynchronousPromise","LSThreadPointQueryAndRestoreMessagesWithGroupJID","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSThreadPointQueryAndRestoreMessagesWithGroupJID"),e.waJid);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("waitForMiActMappingForUniversalSearch",["FBLogger","I64","LSAuthorityLevel","LSFactory","LSThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure","LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure","MAWCurrentUser","MAWJids","Promise","ReQL","WAJids","asyncToGeneratorRuntime","emptyFunction","err","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=3e4,k=3e4;function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("ReQL").toArrayAsync(a));return a.some(function(a){return a==null||(i||(i=d("I64"))).lt(a.authorityLevel,(i||(i=d("I64"))).of_int32(c("LSAuthorityLevel").AUTHORITATIVE))})===!1});return m.apply(this,arguments)}function n(a,b,c,d){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){f===void 0&&(f=c("emptyFunction"));g===void 0&&(g=c("emptyFunction"));var h=(i||(i=d("I64"))).of_string(d("MAWCurrentUser").getID()),j=d("ReQL").leftJoin(d("ReQL").fromTableAscending(a.tables.participants,["contactId"]).getKeyRange(e.serverThreadKey).filter(function(a){return!(i||(i=d("I64"))).equal(a.contactId,h)}),d("ReQL").fromTableAscending(a.tables.contacts)).map(function(a){a[0];a=a[1];return a}),m=null,n={contents:function(){}};function o(){f(e),n.contents()}if(yield l(j))return o();n.contents=j.subscribe(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b.operation==="delete")return;m!=null&&window.clearTimeout(m);if(yield l(j))return o()});return function(b,c){return a.apply(this,arguments)}}());m=window.setTimeout(function(){n.contents(),g(c("err")("Contacts timed out"))},k)});return o.apply(this,arguments)}function a(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var g=d("MAWJids").convertChatJidToIntJid(e),i=d("WAJids").interpretAsGroupJid(e)!=null,k=d("ReQL").fromTableAscending(a.tables.mi_act_mapping_table.index("jid")).getKeyRange(g);e=(yield d("ReQL").firstAsync(k));if(e!=null){yield n(a,e);return(h||(h=b("Promise"))).resolve(e)}var l=null,m=new(h||(h=b("Promise")))(function(d,e){var f={contents:function(){}};function g(a){f.contents(),d(a)}function h(a){f.contents(),e(a)}f.contents=k.subscribe(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){if(c.operation==="delete")return;l!=null&&window.clearTimeout(l);yield n(a,c.value,g,h)});return function(a,b){return c.apply(this,arguments)}}());l=window.setTimeout(function(){h(c("err")("MiActMapping timed out"))},j)});c("promiseDone")(a.runInTransaction(function(a){return i?c("LSThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure")(c("LSFactory")(a),{waJid:g}):c("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure")(c("LSFactory")(a),{waJid:g})},"readwrite",void 0,void 0,f.id+":149"));try{e=(yield m)}catch(a){c("FBLogger")("messenger_web").warn("[FTS] Issue waiting for mi_act_mapping to be ready",a)}return e});return p.apply(this,arguments)}g["default"]=a}),98);
__d("MAWUniversalMessageSearch",["FBLogger","I64","JSResourceForInteraction","LSIntEnum","LSMessageSearchType","LSMessagingThreadTypeUtil","LSSearchRequestStatusType","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWFTSMergeCutoverSearchResults","MAWFTSUniversalSearchQPLLogger","MWContentSearchUtils","MWSearchThreadUtils","Promise","ReQL","asyncToGeneratorRuntime","groupBy","promiseDone","waitForMiActMappingForUniversalSearch"],(function(a,b,c,d,e,f,g){"use strict";var h=["matchedTerms","recordType"],i,j,k,l=(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD),m=new Map(),n=c("JSResourceForInteraction")("MAWAsyncEBIssueBulkMessagesPointQuery").__setRef("MAWUniversalMessageSearch");function o(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){yield a.message_search_queries.put(babelHelpers["extends"]({hasNextPage:!1,query:b,threadKeyV2:(k||(k=d("I64"))).one,type_:l},c))});return p.apply(this,arguments)}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(k||(k=d("I64"))).to_string(b.threadKey);b.matchCount!=null&&m.set(c,(k||(k=d("I64"))).to_float(b.matchCount));c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.message_search_results).getKeyRange(l,b.query,b.threadKey)));if(c==null)yield a.message_search_results.put(babelHelpers["extends"]({},b));else{var e=d("MAWFTSMergeCutoverSearchResults").mergeCutoverSearchResults(c,b);yield a.message_search_results.upsert([l,c.query,c.threadKey,c.globalIndex],babelHelpers["extends"]({},e,{globalIndex:b.globalIndex}))}});return r.apply(this,arguments)}function a(a,b){var c;c=(c=m.get((k||(k=d("I64"))).to_string(a)))!=null?c:0;c+=b;m.set((k||(k=d("I64"))).to_string(a),c)}function e(){m.clear()}function s(a,b){return!d("LSMessagingThreadTypeUtil").isArmadilloSecure(b)?null:(b=m.get((k||(k=d("I64"))).to_string(a)))!=null?b:null}function t(a,b,c){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g){m.clear();yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield o(a,g,{resultCount:(k||(k=d("I64"))).zero,status:(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").PENDING)})});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":142");c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"search_local_result_start"});var p=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:g,searchMode:d("MAWBridgeSearchMsg").MESSAGE_CONTENT_SEARCH}));p=p.map(function(a){if(a.recordType==="msg"){a.matchedTerms;a.recordType;a=babelHelpers.objectWithoutPropertiesLoose(a,h);return babelHelpers["extends"]({},a)}}).filter(Boolean);p=c("groupBy")(p,function(a){return a.chatJid});var r=Object.values(p);c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{"int":{numResult:r.length}},point:"search_local_result_end"});c("promiseDone")((i||(i=b("Promise"))).all(r.map(function(){var h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(h,i){var j=h[0].chatJid;yield c("waitForMiActMappingForUniversalSearch")(a,j);var m=(yield d("MWSearchThreadUtils").getThreadDataForSearchResult(a,j,e,l));if(m==null)return;var o=m.profilePicUrl,p=m.secondaryProfilePicUrl,r=m.threadDisplayName,s=m.threadKey;m=m.threadType;var t=h.sort(function(a,b){return b.sortOrderMs-a.sortOrderMs})[0],u=h.length===1&&t.msg==null?{id:t.externalId,sortOrderMs:t.sortOrderMs}:null,v={displayName:r,globalIndex:d("MWContentSearchUtils").getGlobalIndex(t.sortOrderMs),matchCount:(k||(k=d("I64"))).of_int32(h.length),profilePicUrl:o,query:g,secondaryProfilePicUrl:p,threadKey:s,threadType:m,type_:l};if(u==null)yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,c;yield q(a,babelHelpers["extends"]({},v,d("MWContentSearchUtils").getContextLineAndMatches(g,h.length,t==null||(b=t.msg)==null?void 0:b.content,l),{messageId:d("MWContentSearchUtils").getMessageId(h.length,t==null||(c=t.msg)==null?void 0:c.msgId),messageOtid:d("MWContentSearchUtils").getMessageOtid(h.length,t==null?void 0:t.externalId),messageTimestampMs:d("MWContentSearchUtils").getMessageTimestamp(t==null?void 0:t.sortOrderMs)}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":243");else{c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"fetch_missing_message_"+i+"_start"});r=(yield n.load().then(function(a){a=a.issueQueryAsPromiseForSearchResult;return a(j,[u])}));if(r!=null&&r.length!==0){var w=r[0];c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"fetch_missing_message_"+i+"_end"});yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;yield q(a,babelHelpers["extends"]({},v,d("MWContentSearchUtils").getContextLineAndMatches(g,h.length,t==null||(b=t.msg)==null?void 0:b.content,l),{messageOtid:w.externalId,messageTimestampMs:w.sortOrderMs!=null?(k||(k=d("I64"))).of_float(w.sortOrderMs):void 0}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":282")}else c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{bool:{failedFetchingMissingMessage:!0}},point:"fetch_missing_message_"+i+"_end"})}});return function(a,b){return h.apply(this,arguments)}}())),function(){c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{"int":{numResult:r.length}},point:"issue_secure_search_query_end"}),c("promiseDone")(a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield o(a,g,{hasNextPage:!1,resultCount:(k||(k=d("I64"))).of_int32(r.length),status:(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").COMPLETE)})});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":322"))},function(a){c("FBLogger")("maw_fts_search").mustfix("Error while searching in secure threads. Err: %s",a==null?void 0:a.message)})});return u.apply(this,arguments)}g.updateSecureMsgMatchCountForThread=a;g.clearSecureMsgMatchCountForThread=e;g.getSecureMsgsMatchCountForThread=s;g.search=t}),98);
__d("isEBSearchEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("4741")}g["default"]=a}),98);
__d("MWInboxSecureContentSearch",["I64","JSResourceForInteraction","LSIntEnum","LSMessageSearchType","LSSearchRequestStatusType","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWChatJid","MAWFTSMergeCutoverSearchResults","MAWMiActOnActThreadReadyDeferred","MAWUniversalMessageSearch","MWContentSearchUtils","MWSearchThreadUtils","Promise","ReQL","asyncToGeneratorRuntime","emptyFunction","groupBy","isEBSearchEnabled","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h=["matchedTerms","recordType"],i,j,k,l=c("JSResourceForInteraction")("MAWAsyncEBIssueBulkMessagesPointQuery").__setRef("MWInboxSecureContentSearch"),m=c("justknobx")._("2605");function a(a,c,e){return(k||(k=b("Promise"))).all([d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.tables.participants,[]).getKeyRange(a),d("ReQL").fromTableAscending(e.tables.contacts)),d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.threads).getKeyRange(a))]).then(function(a){var b=a[0];a[1];a=b.filter(function(a){a[0];a=a[1];a=(i||(i=d("I64"))).equal(a.id,c);return!a}).map(function(a){a[0];a=a[1];return a});return d("ReQL").firstAsync(a)})}function n(a,c){return d("MAWChatJid").toThreadKeyMaybe(c,a.chatJid).then(function(e){return e==null?(k||(k=b("Promise"))).resolve([null,a]):(k||(k=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(c.threads).getKeyRange(e)),k.resolve(a)])})}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange((i||(i=d("I64"))).of_string(b))));return a});return p.apply(this,arguments)}function q(a,b){var e=b.query;b=b.threadKey;return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.message_search_results).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD),e,b))}function r(a,e,g,h,l,m,p,r){r===void 0&&(r=c("LSSearchRequestStatusType").COMPLETE);var s=function(f){return n(a,f).then(function(a){var n=a[0];if(n==null)return;var p=a[1],s=p.msg;if(s==null)return;if(p!=null)return(k||(k=b("Promise"))).all([d("MWSearchThreadUtils").getThreadPics(n,l,m),d("MWSearchThreadUtils").getThreadParticipants(n,m),(i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE))?o(m,s.sender):(k||(k=b("Promise"))).resolve(null),(i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))?q(f,{query:g,threadKey:n.threadKey}):(k||(k=b("Promise"))).resolve(null)]).then(function(a){var m=a[0],o=m[0];m=m[1];var q=a[1],t=a[2];a=a[3];(i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))&&d("MAWUniversalMessageSearch").updateSecureMsgMatchCountForThread(n.threadKey,e);q=babelHelpers["extends"]({},d("MWContentSearchUtils").getContextLineAndMatches(g,e,s.content,h),{displayName:d("MWSearchThreadUtils").getThreadDisplayName(l,n,q,t,h),globalIndex:(i||(i=d("I64"))).of_float(-p.sortOrderMs),matchCount:i.of_int32(e),messageId:s.msgId,messageOtid:p.externalId,messageTimestampMs:(i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))&&e>1?void 0:(i||(i=d("I64"))).of_string(""+p.sortOrderMs),profilePicUrl:(i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE))&&t!=null?t.profilePictureUrl:o,query:g,secondaryProfilePicUrl:(i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE))&&t!=null?t.profilePictureFallbackUrl:m,threadKey:n.threadKey,threadType:n.threadType,type_:h});if((i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))||a==null)o=f.message_search_results.put(q);else{t=d("MAWFTSMergeCutoverSearchResults").mergeCutoverSearchResults(a,q);o=f.message_search_results.upsert([h,a.query,a.threadKey,a.globalIndex],babelHelpers["extends"]({},t,{globalIndex:q.globalIndex}))}return(k||(k=b("Promise"))).all([f.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:g,resultCount:i.of_int32(e),status:(j||(j=d("LSIntEnum"))).ofNumber(r),threadKeyV2:n.threadKey,type_:h}),o]).then(c("emptyFunction"))})})};return p!=null?s(p):m.runInTransaction(function(a){return s(a)},"readwrite",void 0,void 0,f.id+":284")}function s(a,b,c,d){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){f!=null&&f.flow.qplAddPoint({instanceKey:f.instanceKey,point:"search_local_result_start"});c=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:c,searchMode:d("MAWBridgeSearchMsg").MESSAGE_CONTENT_SEARCH}));return(k||(k=b("Promise"))).all(c.map(function(b){if(b.recordType==="msg"){b.matchedTerms;b.recordType;var c=babelHelpers.objectWithoutPropertiesLoose(b,h);return d("MAWChatJid").toThreadKeyMaybe(a.tables,c.chatJid).then(function(a){return[c,a]})}}).filter(Boolean)).then(function(a){a=e!=null?a.filter(function(a){a[0];a=a[1];return a!=null&&(i||(i=d("I64"))).equal(a,e)}):a.filter(function(a){a[0];a=a[1];return a!=null});var b=null;e!=null&&(b={"int":{numResult:a.length}});f!=null&&f.flow.qplAddPoint({annotations:babelHelpers["extends"]({},b),instanceKey:f.instanceKey,point:"search_local_result_end"});return a})});return t.apply(this,arguments)}function e(a,e,f,g){d("MAWUniversalMessageSearch").clearSecureMsgMatchCountForThread();return s(f,a,void 0,g).then(function(h){h=Object.values(c("groupBy")(h,function(a){a[0];a=a[1];return a==null?"":(i||(i=d("I64"))).to_string(a)}));g!=null&&g.flow.qplAddAnnotations({annotations:{"int":{numResult:h.length}}});return h.map(function(b){var g=b[0];if(g!==null){g=g[0];return r(g,b.length,a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD),e,f)}}).reduce(function(a,d){return(k||(k=b("Promise"))).all([a,d]).then(c("emptyFunction"))},(k||(k=b("Promise"))).resolve())})}function u(a,e,f,g,h,i){return(k||(k=b("Promise"))).all(g.map(function(b){return r(b,h,f,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),i,a,e)})).then(c("emptyFunction"))}function v(a,e,f,g,h){return(k||(k=b("Promise"))).all(f.map(function(b){return r(b,g,e,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),h,a)})).then(c("emptyFunction"))}function w(a,e,g,h,n){return h.runInTransaction(function(b){return b.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:a,resultCount:(i||(i=d("I64"))).of_int32(0),status:(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").PENDING),threadKeyV2:e,type_:j.ofNumber(c("LSMessageSearchType").MESSAGE)})},"readwrite",void 0,void 0,f.id+":468").then(function(b){return s(h,a,e,n)}).then(function(o){var p=o.length,q=o.filter(function(a){var b=a[0];a[1];return b.msg!=null}).length,s=q,t=function(){var d=o.map(function(a){a=a[0];return a}).filter(function(a){return a.msg==null});if(d.length===0)return(k||(k=b("Promise"))).resolve();d=d.slice(0,m);n.flow.qplAddPoint({annotations:{"int":{numRequestedMessages:d.length}},instanceKey:n.instanceKey,point:"fetch_missing_messages_start"});return c("MAWMiActOnActThreadReadyDeferred")(h,e,"MWMessageSearchInput.react",function(c,e){var f=d.map(function(a){return{id:a.externalId,sortOrderMs:a.sortOrderMs}});return l.load().then(function(c){var d=c.issueQueryAsPromiseForSearchResult;c=d(e,f);return c==null?(k||(k=b("Promise"))).resolve():c.then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b;if(b.length!==f.length){n.flow.qplAddPoint({annotations:{"int":{numRemainingMessages:f.length-b.length}},instanceKey:n.instanceKey,point:"fetch_missing_messages_partial"});var i=f.filter(function(a){return!c.some(function(b){return b.externalId===a.id})});if(i.length>0){i=(yield d(e,i));i!=null&&(c=[].concat(b,i))}}s=q+c.length;n.flow.qplAddPoint({annotations:{"int":{numRespondedMessages:c.length}},instanceKey:n.instanceKey,point:"fetch_missing_messages_end"});return v(h,a,c,s,g)});return function(a){return c.apply(this,arguments)}}())})})};return(k||(k=b("Promise"))).all([o.map(function(b){b=b[0];return r(b,p,a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),g,h,void 0,c("LSSearchRequestStatusType").PENDING)}).reduce(function(a,d){return(k||(k=b("Promise"))).all([a,d]).then(c("emptyFunction"))},k.resolve()),c("isEBSearchEnabled")()?t():(k||(k=b("Promise"))).resolve()]).then(function(b){return h.runInTransaction(function(b){return b.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:a,resultCount:(i||(i=d("I64"))).of_int32(s),status:(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").COMPLETE),threadKeyV2:e,type_:j.ofNumber(c("LSMessageSearchType").MESSAGE)})},"readwrite",void 0,void 0,f.id+":618")}).then(function(a){return(k||(k=b("Promise"))).resolve()})})}g.getThreadOtherParticipantContact=a;g.searchSecureDatabaseThreads=e;g.addBridgeSearchMsgsToSearchResult=u;g.addMessagesToSearchResult=v;g.searchSecureDatabaseMessages=w}),98);
__d("addMAWBridgeSearchMessagesToUniversalSearch",["I64","LSIntEnum","LSMessageSearchType","MAWCurrentUser","MAWUniversalMessageSearch","MWContentSearchUtils","MWSearchThreadUtils","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("LSIntEnum")).ofNumber(c("LSMessageSearchType").THREAD);function a(a,b,c,d,e){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g,h,k){var l;d("MAWUniversalMessageSearch").updateSecureMsgMatchCountForThread(e,h.length);var m=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.message_search_results).getKeyRange(j,g,e))),n=m==null;l=(i||(i=d("I64"))).to_int32((l=m==null?void 0:m.matchCount)!=null?l:(i||(i=d("I64"))).zero);var o=l+h.length;l=(yield d("MWSearchThreadUtils").getThreadDataByThreadKey(a,e,i.of_string(d("MAWCurrentUser").getID()),j));if(l==null)return;var p=l.profilePicUrl,q=l.secondaryProfilePicUrl,r=l.threadDisplayName,s=l.threadType,t=m==null?void 0:m.globalIndex,u=d("MWContentSearchUtils").getGlobalIndex(h[0].sortOrderMs,m==null?void 0:m.globalIndex),v=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;yield a.message_search_results.upsert([j,g,e,t!=null?t:u],babelHelpers["extends"]({},d("MWContentSearchUtils").getContextLineAndMatches(g,o,(b=h[0].msg)==null?void 0:b.content,j),{displayName:r,globalIndex:u,matchCount:(i||(i=d("I64"))).of_int32(o),messageTimestampMs:d("MWContentSearchUtils").getMessageTimestamp(h[0].sortOrderMs),profilePicUrl:p,query:g,secondaryProfilePicUrl:q,threadKey:e,threadType:s,type_:j}));n&&(yield a.message_search_queries.put(babelHelpers["extends"]({},k,{resultCount:(i||(i=d("I64"))).add(k.resultCount,i.one)})))});return function(b){return a.apply(this,arguments)}}();c("promiseDone")(a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield v(a)});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":113"))});return k.apply(this,arguments)}g["default"]=a}),98);
__d("MAWBridgeAddMessageSearchResultHandler",["I64","LSIntEnum","LSMessageSearchType","MAWCurrentUser","MAWFTSRawStringMatcher","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MWInboxSecureContentSearch","Promise","ReQL","addMAWBridgeSearchMessagesToUniversalSearch","asyncToGeneratorRuntime","emptyFunction","isMAWUniversalSearchWithEBEnabled","promiseDone","waitForMiActMappingForUniversalSearch"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),l=j.ofNumber(c("LSMessageSearchType").THREAD);function a(a,d,e){return e.length===0?(h||(h=b("Promise"))).resolve():(h||(h=b("Promise"))).all([o(a,d,e),q(a,d,e)]).then(c("emptyFunction"))}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("MAWFTSRawStringMatcher").load());return b.filter(function(b){b=(b=b.msg)==null?void 0:b.content;return b==null?!1:c(a,b)})});return n.apply(this,arguments)}function o(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(e.message_search_queries).getKeyRange(k)));if(g.length===0)return;return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,f[0].chatJid,"MAWBridgeAddMessageSearchResultHandler",function(e,h){return b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=g.filter(function(a){return(i||(i=d("I64"))).equal(a.threadKeyV2,h)})[0];if(b==null)return;var c=b.query;if(c==null||c.length<2)return;var j=(i||(i=d("I64"))).to_int32(b.resultCount);c=(yield m(c,f));if(c.length===0)return;yield d("MWInboxSecureContentSearch").addBridgeSearchMsgsToSearchResult(a,e,b.query,c,j+c.length,i.of_string(d("MAWCurrentUser").getID()))})().then(c("emptyFunction"))})});return p.apply(this,arguments)}function q(a,b,c){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){if(!c("isMAWUniversalSearchWithEBEnabled")())return;var f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.message_search_queries).getKeyRange(l).filter(function(a){return(i||(i=d("I64"))).equal(a.threadKeyV2,i.one)})));if(f==null)return;var g=f.query;if(g==null||g.length<2)return;var h=(yield m(g,e));if(h.length===0)return;c("promiseDone")(c("waitForMiActMappingForUniversalSearch")(a,e[0].chatJid),function(b){if(b!=null)return c("addMAWBridgeSearchMessagesToUniversalSearch")(a,b.serverThreadKey,g,h,f)})});return r.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeCallRestoreNativeOpHandler",["I64","MAWMpsGating","Promise","WAJids","WALogger","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("requireDeferred")("LSProtobufRestoreHandler").__setRef("MAWBridgeCallRestoreNativeOpHandler"),l=c("requireDeferred")("LSRestoreEchoBlobs.nop").__setRef("MAWBridgeCallRestoreNativeOpHandler");function a(a,c){var e=c.chatJid,f=c.decryptedMessagesProtobufs,g=c.echoMessages,m=c.hasMoreAfter,n=c.hasMoreBefore,o=c.isPointQuery,p=c.nextMessageTimestampMsAfter,q=c.nextMessageTimestampMsBefore,r=c.referenceTimestamp,s=c.requestId,t=c.taskSource;if(d("MAWMpsGating").isFullMpsEnabled())return(j||(j=b("Promise"))).resolve();if(f!=null)return k.load().then(function(a){return a.handleProtobufRestoreHelper(d("WAJids").threadIdForChatJid(e),{convertedProtobufs:f,type:"convertedProtobufs"},n,q,m,p,o,s,r,void 0,void 0,t,e)});else if(g!=null)return l.load().then(function(c){return c(a,0,(i||(i=d("I64"))).zero,g,n,q,m,p,o,d("WAJids").threadIdForChatJid(e),s,r,t,e).then(function(){return(j||(j=b("Promise"))).resolve()})});else d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Unable to call restore native op - echo and protobuf messages are both null"])));return(j||(j=b("Promise"))).resolve()}g.call=a}),98);
__d("MAWBridgeDeleteGroupInviteHandler",["LSThreadBitOffset","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeDeleteGroupInviteHandler",function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e,f){var g=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(e.group_invites).getKeyRange(f)));return(h||(h=b("Promise"))).all(g.map(function(a){return e.group_invites["delete"](a.threadKey,a.inviterId,a.inviteeId)})).then(function(){c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(f)),function(b){if(b==null)return;var c=d("LSThreadBitOffset").clear([105],b.capabilities,b.capabilities2,b.capabilities3,b.capabilities4,b.capabilities5),e=c[0],f=c[1],g=c[2],h=c[3];c=c[4];return a.threads.put(babelHelpers["extends"]({},b,{capabilities:e,capabilities2:f,capabilities3:g,capabilities4:h,capabilities5:c,snippet:void 0}))})})});return function(a,b){return e.apply(this,arguments)}}())}g.call=a}),98);
__d("LSIssueThreadRemove",["LSArrayGetObjectAt","LSIsEncryptionVersionSecure","LSIssueNewTaskAndGetTaskID","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][issueThreadRemove] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[15]=new c.Map(),d[15].set("error_msg","Expected a nonempty query result"),d[15].set("code",c.i64.cast([0,3])),d[15].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[16]=c.createArray(),d[17]=(d[16].push(d[15]),d[16]),e=[void 0,d[16]],d[2]=e[0],d[3]=e[1]):(b=a.item,d[15]=new c.Map(),d[15].set("backup_id",b.backupId),d[15].set("device_public_key_blob",b.devicePublicKeyBlob),d[15].set("device_private_key_blob",b.devicePrivateKeyBlob),d[15].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[15].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[15].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[15].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[15].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[15].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[15].set("orf_client_state_v2_blob",void 0),d[15].set("orf_v2_authority_level",void 0),d[15].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[15].set("device_id",b.deviceId),d[15].set("backup_tenancy",b.backupTenancy),d[15].set("encryption_version",b.encryptionVersion),d[15].set("revision_version",b.revisionVersion),d[15].set("initialize_restore_result",void 0),d[15].set("device_creation_timestamp_sec",void 0),d[15].set("authority_level",b.authorityLevel),e=[d[15],void 0],d[2]=e[0],d[3]=e[1])})},function(e){return d[5]=new c.Map(),d[5].set("value",d[2]),d[5].set("errors",d[3]),d[6]=d[5].get("value"),d[6]!==void 0?c.sequence([function(e){return d[15]=d[6].get("backup_id"),d[16]=d[6].get("device_public_key_blob"),d[17]=d[6].get("device_private_key_blob"),d[18]=d[6].get("epoch_storage_public_key_blob"),d[19]=d[6].get("epoch_storage_private_key_blob"),d[20]=d[6].get("epoch_auth_public_key_blob"),d[21]=d[6].get("epoch_auth_private_key_blob"),d[22]=d[6].get("mailbox_root_key_blob"),d[23]=d[6].get("ocmf_client_state_blob"),d[24]=d[6].get("orf_client_state_v2_blob"),d[25]=d[6].get("orf_v2_authority_level"),d[26]=d[6].get("oblivious_validation_token_blob"),d[27]=d[6].get("device_id"),d[28]=d[6].get("backup_tenancy"),d[29]=d[6].get("encryption_version"),d[30]=d[6].get("revision_version"),d[31]=d[6].get("initialize_restore_result"),d[32]=d[6].get("device_creation_timestamp_sec"),d[33]=d[6].get("authority_level"),c.i64.neq(d[27],void 0)?c.sequence([function(a){return d[36]=void 0,c.i64.neq(d[36],void 0)?c.resolve(d[37]=d[36]):c.sequence([function(a){return d[43]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[44]?d[53]=(d[43].push(c.i64.cast([0,0])),d[43]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[45]=a[0],a})},function(a){return d[45]?d[53]=(d[43].push(c.i64.cast([0,2])),d[43]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[46]?d[53]=(d[43].push(c.i64.cast([0,3])),d[43]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[47]?d[53]=(d[43].push(c.i64.cast([0,4])),d[43]):0,d[48]=c.createArray(),d[49]=c.i64.of_int32(d[43].length),c.i64.gt(d[49],c.i64.cast([0,0]))?c.loopAsync(d[49],function(a){return d[53]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[43],d[53]).then(function(a){return a=a,d[54]=a[0],d[55]=a[1],a})},function(a){return d[56]=(d[48].push(d[54]),d[48])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[53]=c.createArray(),d[54]=c.i64.of_int32(d[48].length),c.i64.gt(d[54],c.i64.cast([0,0]))?c.loopAsync(d[54],function(a){return d[56]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[48],d[56]).then(function(a){return a=a,d[57]=a[0],d[58]=a[1],a})},function(a){return d[59]=(d[53].push(c.i64.to_string(d[57])),d[53])}])}):c.resolve()},function(a){return d[55]=d[53].join(","),d[50]=d[55]}])},function(a){return d[48].some(function(a){return c.i64.eq(d[29],a)})?d[51]=d[29]:d[51]=void 0,c.i64.neq(d[51],void 0)?d[52]=d[51]:d[52]=void 0,d[37]=d[52]}])},function(e){return c.i64.neq(d[37],void 0)?d[38]=d[37]:d[38]=c.i64.cast([0,0]),c.i64.neq(d[28],void 0)?d[39]=d[28]:d[39]=c.i64.cast([0,1]),d[40]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),["eb_upload",":",a[0]].join(""),c.i64.cast([0,50026]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,93]),void 0,c.i64.le(c.i64.cast([0,0]),c.i64.cast([0,0]))?c.i64.cast([0,0]):c.i64.add(d[40],c.i64.sub(c.i64.cast([0,0]),c.i64.mod_(d[40],c.i64.cast([0,0])))),c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],a})},function(b){return c.db.table(177).add({pk:void 0,pendingBackupTaskId:d[41],actionType:c.i64.cast([0,2]),contentType:c.i64.cast([0,2]),backupStatus:c.i64.cast([0,1]),listKey:a[0],uniqueKey:a[0],sortKey:a[1],persistentId:"",isInstamadillo:!1,lsTraceId:a[3],error:a[4]})},function(b){return c.i64.eq(c.i64.cast([0,2]),c.i64.cast([0,1]))?c.i64.eq(c.i64.cast([0,2]),c.i64.cast([0,1]))?(d[43]=c.createArray(),d[45]=(d[43].push("Successfully issued message backup task. act thread id = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[45]=(d[43].push(", otid = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[44]=d[43].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[44]].join("")),c.resolve()):(d[43]=c.createArray(),d[45]=(d[43].push("Successfully issued message remove task. act thread id = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[45]=(d[43].push(", otid = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[44]=d[43].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[44]].join("")),c.resolve()):(d[43]=c.createArray(),d[45]=(d[43].push("Successfully issued thread remove task. act thread id = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[44]=d[43].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[44]].join("")),c.resolve())},function(a){return d[42]=new c.Map(),d[42].set("task_id",d[41]),a=[d[42],void 0],d[34]=a[0],d[35]=a[1]}]):c.sequence([function(b){return d[36]=c.createArray(),d[39]=(d[36].push("Skipping thread remove since EB is disabled. act thread id = "),d[36]),d[39]=(d[36].push(a[0]),d[36]),d[37]=d[36].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[37]].join("")),c.resolve()},function(a){return d[38]=new c.Map(),d[38].set("error_code",c.i64.cast([0,24])),d[38].set("stored_procedure","LSEncryptedBackupsIssueThreadRemoveStoredProcedure"),d[38].set("error_message",""),a=[void 0,d[38]],d[34]=a[0],d[35]=a[1]}])},function(a){return a=[d[34],d[35]],d[7]=a[0],d[8]=a[1],a}]):c.sequence([function(b){return d[15]=d[5].get("errors"),d[16]=d[5].get("errors"),d[17]=c.createArray(),d[20]=(d[17].push("Skipping thread remove since EB is disabled. act thread id = "),d[17]),d[20]=(d[17].push(a[0]),d[17]),d[18]=d[17].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[18]].join("")),c.resolve()},function(a){return d[19]=new c.Map(),d[19].set("error_code",c.i64.cast([0,1])),d[19].set("stored_procedure","LSEncryptedBackupsIssueThreadRemoveStoredProcedure"),d[19].set("error_message",""),a=[void 0,d[19]],d[7]=a[0],d[8]=a[1]}])},function(a){return d[9]=c.i64.of_float(Date.now()),d[10]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[9],d[0])),d[14]=" ms",d[11]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ",d[11],d[12],d[11],d[13],d[11],d[14]].join("")),c.i64.eq(c.i64.mod_(d[10],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"issueThreadRemove",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[7],d[8]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueThreadRemoveStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","pending_backups_context_v2"];e.exports=a}),null);
__d("LSIssueThreadRemoveStoredProcedure",["LSIssueThreadRemove","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueThreadRemove"),e.actThreadId,e.sortKey,e.source,e.traceId,e.error);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBridgeDeleteMessagesOfThreadHandler",["EBIsEbEnabled","LSFactory","LSIntEnum","LSIssueThreadRemoveStoredProcedure","LSMEBTaskCreationSource","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b.actionType===2){if(!(yield d("EBIsEbEnabled").isEbEnabledLS(a)))return;yield c("LSIssueThreadRemoveStoredProcedure")(c("LSFactory")(a),{actThreadId:b.threadId,sortKey:b.ts.toString(),source:(h||(h=d("LSIntEnum"))).ofNumber(c("LSMEBTaskCreationSource").TAM_WEB)})}});return i.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeEphemeralSettingsUpdatedForUIHandler",["MAWChatJid","MAWEphemeralSettingsUpdate","Promise","asyncToGeneratorRuntime","cr:17100"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("MAWChatJid").toThreadKeyMaybe(a,c.chatJid));return e!=null?d("MAWEphemeralSettingsUpdate").updateEphemeralSettingsWithTxn(a,c.ephemeralSettingArgs.ephemeralExpirationInSec,yield b("cr:17100").castUnixTimeToMillisTime(c.ephemeralSettingArgs.ephemeralLastUpdatedOrSetTimestamp),c.isEphemeralSettingReset,e,!1,c.author):(h||(h=b("Promise"))).resolve()});return i.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeFulfillRestorePromisePayloadHandler",["MAWAsyncEBPendingQueryPromise","MAWEBRestoreTrackingUtils","Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a.success?(d("MAWAsyncEBPendingQueryPromise").resolvePendingQueryUponReStore(a.value.traceId),d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(a.value.traceId)):(d("MAWAsyncEBPendingQueryPromise").rejectPendingQueryIfPresent(a.error.traceId,c("err")(a.error.message)),d("MAWEBRestoreTrackingUtils").markEBRestoreFail(a.error.traceId));return(h||(h=b("Promise"))).resolve()}g.call=a}),98);
__d("MAWBridgeGroupInfoUpdatedHandler",["I64","MAWMiActMappingTableAPI","MWFBLogger","ODS","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=d("MWFBLogger").MWLogger().tags(["bridgeUIEvent","Occam","Middleware"]);function a(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c,e=(yield d("MAWMiActMappingTableAPI").getMappingRowForChatJid(a,b.chatJid));if(e==null){m.WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Missing thread key for chatJid: ",""])),b.chatJid);return}c=(c=b.threadName)!=null?c:void 0;e=e.serverThreadKey;a=a.threads;var f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a).getKeyRange(e)));if(f==null){(k||(k=d("ODS"))).bumpEntityKey(3185,"armadillo_group_info_update","missing_thread");m.WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Missing thread for updating group with threadKey: ",""])),(l||(l=d("I64"))).to_string(e));return}else c==null&&(c=f.threadName,m.WARN(j||(j=babelHelpers.taggedTemplateLiteralLoose(['MAWDB groupInfo is missing "name" field for threadKey: ',""])),(l||(l=d("I64"))).to_string(e)));e=b.memberAddMode!=="all_member_add";yield a.put(babelHelpers["extends"]({},f,{needsAdminApprovalForNewParticipant:e,threadName:c}))});return n.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeGroupInviteUpdateHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWUpdateLSThreadCapabilities","Promise","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeGroupInviteUpdateHandler",function(a,f){var g=(i||(i=d("I64"))).of_string(e.inviterId);return(h||(h=b("Promise"))).all([d("MAWUpdateLSThreadCapabilities").setGroupInviteTxn(a,f,g)]).then(c("emptyFunction"))})}g.call=a}),98);
__d("MAWBridgeHandleCOPDigest",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c){return(g||(g=b("Promise"))).resolve()}f.call=a}),66);
__d("MAWBridgeMediaExpiredHandler",["MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeMediaExpiredHandler.bs",function(a,c){return a.attachments["delete"](c,b.msgId,String(b.plaintextHash))})}g.call=a}),98);
__d("MAWBridgeMsgUpdatedHandler",["FBLogger","MAWAdminMsgCTA","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWMsgFetchLSReplyMsgAndAttachment","MAWUpdateMsg","MsgrWebGating","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.chatJid,"MAWBridgeMsgUpdatedHandler",function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,f){var g,h=(yield (g=d("ReQL")).firstAsync(g.fromTableAscending(b.messages.index("messageId")).getKeyRange(e.msgId)));g=(yield g.firstAsync(g.fromTableAscending(b.attachments).getKeyRange(f,e.msgId)));if(h==null){c("FBLogger")("messenger_web").info("existing message is null for type %s, and attachment is null: %s",e.type_,g==null);return}g=(yield d("MAWAdminMsgCTA").getAdminMsgCtaStep(b,f,e));f=(yield i(a,e));return d("MAWUpdateMsg").call(b,f,h,g)});return function(a,b){return f.apply(this,arguments)}}())}function i(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){if(d("MsgrWebGating").isQuotedMessagesInLsEnabled()){a=(yield d("MAWMsgFetchLSReplyMsgAndAttachment").fetchReplyLocalViaLS(a,c));return a!=null?a:c}return(h||(h=b("Promise"))).resolve(c)});return j.apply(this,arguments)}g.call=a}),98);
__d("LSUpsertAttachmentRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.db.table(17).fetch([[[a[0],a[1]]]]),function(a){return a["delete"]()})},function(c){return b.db.table(17).add({threadKey:a[0],mediaGroup:a[1],minTimestampMs:a[2],maxTimestampMs:b.i64.cast([2328,1316134911]),hasMoreBefore:a[3],hasMoreAfter:!1,isLoadingBefore:!1,isLoadingAfter:!1,lastLoadedMessageId:a[4]})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpsertAttachmentRangeStoredProcedure";a.__tables__=["attachments_ranges_v2__generated"];e.exports=a}),null);
__d("LSUpsertAttachmentRangeStoredProcedure",["LSSynchronousPromise","LSUpsertAttachmentRange","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSUpsertAttachmentRange"),e.threadKey,e.mediaGroup,e.newMinTs,e.hasMoreBefore,e.newLastLoadedMessageId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBridgeNewMediaRangeHandler",["I64","LSFactory","LSIntEnum","LSUpsertAttachmentRangeStoredProcedure","MAWMediaGalleryEBTaggingUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","cr:20238","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,e){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeNewMediaRangeHandler",function(a,f){var g=(h||(h=d("I64"))).of_float(e.earliestLoadedMediaTs),j=e.mediaGalleryGroup,k=b("cr:20238")!=null?b("cr:20238").getMediaRestoreEBRange().getRange(f):null;k=Boolean(k==null?void 0:k.hasMoreBefore)&&d("MAWMediaGalleryEBTaggingUtils").isMediaGalleryGroupSupportedForTaggedRestore(j);k=e.hasMoreBefore||k;return c("LSUpsertAttachmentRangeStoredProcedure")(c("LSFactory")(a),{hasMoreBefore:k,mediaGroup:(i||(i=d("LSIntEnum"))).ofNumber(j),newLastLoadedMessageId:e.lastLoadedMessageId,newMinTs:g,threadKey:f})})}function a(a,b){return j(a,b).then(c("emptyFunction"))}g.call=a}),98);
__d("MAWBridgeNoteReplyStartCountdownHandler",["MAWMessageExpirationStorage","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,c){return c.msgs.reduce(function(a,b){return a.then(function(){d("MAWMessageExpirationStorage").setMessageForExpiration({bridgeMsgStartCountdown:b,expirationEvent:d("MAWMessageExpirationStorage").expirationNoteReplyEvent})})},(h||(h=b("Promise"))).resolve())}g.call=a}),98);
__d("LSCreateE2EEMetadataThread",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLogMebClientEvent.nop","LSQplAnnotateString.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][createE2EEMetadataThread] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[19]=new c.Map(),d[19].set("error_msg","Expected a nonempty query result"),d[19].set("code",c.i64.cast([0,3])),d[19].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[20]=c.createArray(),d[21]=(d[20].push(d[19]),d[20]),e=[void 0,d[20]],d[2]=e[0],d[3]=e[1]):(b=a.item,d[19]=new c.Map(),d[19].set("backup_id",b.backupId),d[19].set("device_public_key_blob",b.devicePublicKeyBlob),d[19].set("device_private_key_blob",b.devicePrivateKeyBlob),d[19].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[19].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[19].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[19].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[19].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[19].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[19].set("orf_client_state_v2_blob",void 0),d[19].set("orf_v2_authority_level",void 0),d[19].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[19].set("device_id",b.deviceId),d[19].set("backup_tenancy",b.backupTenancy),d[19].set("encryption_version",b.encryptionVersion),d[19].set("revision_version",b.revisionVersion),d[19].set("initialize_restore_result",void 0),d[19].set("device_creation_timestamp_sec",void 0),d[19].set("authority_level",b.authorityLevel),e=[d[19],void 0],d[2]=e[0],d[3]=e[1])})},function(a){return d[5]=new c.Map(),d[5].set("value",d[2]),d[5].set("errors",d[3]),d[6]=d[5].get("value"),d[6]!==void 0?c.sequence([function(a){return d[19]=d[6].get("backup_id"),d[20]=d[6].get("device_public_key_blob"),d[21]=d[6].get("device_private_key_blob"),d[22]=d[6].get("epoch_storage_public_key_blob"),d[23]=d[6].get("epoch_storage_private_key_blob"),d[24]=d[6].get("epoch_auth_public_key_blob"),d[25]=d[6].get("epoch_auth_private_key_blob"),d[26]=d[6].get("mailbox_root_key_blob"),d[27]=d[6].get("ocmf_client_state_blob"),d[28]=d[6].get("orf_client_state_v2_blob"),d[29]=d[6].get("orf_v2_authority_level"),d[30]=d[6].get("oblivious_validation_token_blob"),d[31]=d[6].get("device_id"),d[32]=d[6].get("backup_tenancy"),d[33]=d[6].get("encryption_version"),d[34]=d[6].get("revision_version"),d[35]=d[6].get("initialize_restore_result"),d[36]=d[6].get("device_creation_timestamp_sec"),d[37]=d[6].get("authority_level"),c.i64.neq(d[31],void 0)?c.sequence([function(a){return d[39]=void 0,c.i64.neq(d[39],void 0)?c.resolve(d[40]=d[39]):c.sequence([function(a){return d[52]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[53]=a[0],a})},function(a){return d[53]?d[62]=(d[52].push(c.i64.cast([0,0])),d[52]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[54]=a[0],a})},function(a){return d[54]?d[62]=(d[52].push(c.i64.cast([0,2])),d[52]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[55]=a[0],a})},function(a){return d[55]?d[62]=(d[52].push(c.i64.cast([0,3])),d[52]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[56]=a[0],a})},function(a){return d[56]?d[62]=(d[52].push(c.i64.cast([0,4])),d[52]):0,d[57]=c.createArray(),d[58]=c.i64.of_int32(d[52].length),c.i64.gt(d[58],c.i64.cast([0,0]))?c.loopAsync(d[58],function(a){return d[62]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[52],d[62]).then(function(a){return a=a,d[63]=a[0],d[64]=a[1],a})},function(a){return d[65]=(d[57].push(d[63]),d[57])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[62]=c.createArray(),d[63]=c.i64.of_int32(d[57].length),c.i64.gt(d[63],c.i64.cast([0,0]))?c.loopAsync(d[63],function(a){return d[65]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[57],d[65]).then(function(a){return a=a,d[66]=a[0],d[67]=a[1],a})},function(a){return d[68]=(d[62].push(c.i64.to_string(d[66])),d[62])}])}):c.resolve()},function(a){return d[64]=d[62].join(","),d[59]=d[64]}])},function(a){return d[57].some(function(a){return c.i64.eq(d[33],a)})?d[60]=d[33]:d[60]=void 0,c.i64.neq(d[60],void 0)?d[61]=d[60]:d[61]=void 0,d[40]=d[61]}])},function(a){return c.i64.neq(d[40],void 0)?d[41]=d[40]:d[41]=c.i64.cast([0,0]),c.i64.neq(d[32],void 0)?d[42]=d[32]:d[42]=c.i64.cast([0,1]),c.nativeOperation(b("LSBase64Encode.nop"),d[27]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[26]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[45]=new c.Map(),d[45].set("ocmf_client_state_blob",d[43]==null?"":d[43]),d[45].set("mailbox_root_key",d[44]==null?"":d[44]),d[46]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[52]=(d[46].push(a.epochId),d[46])})},function(a){return d[50]="Queried locally available epochs. Count: ",d[47]=c.i64.of_int32(d[46].length),d[51]=c.i64.to_string(d[47]),d[48]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[48],d[50],d[48],d[51]].join("")),c.resolve()},function(a){return d[49]=new c.Map(),d[49].set("device_id",d[31]),d[49].set("raw_tokens",d[45]),d[49].set("locally_available_epochs",d[46]),d[38]=d[49]}]):c.resolve(d[38]=void 0)},function(a){return d[7]=d[38]}]):c.resolve((d[19]=d[5].get("errors"),d[20]=d[5].get("errors"),d[7]=void 0))},function(a){return d[8]=c.i64.random(),d[9]=void 0==null?c.i64.to_string(d[8]):void 0,d[9]!==void 0?c.nativeOperation(b("LSQplStartTrace.nop"),c.i64.cast([0,679677570]),d[9],!0,void 0):c.resolve()},function(a){return d[9]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,679677570]),d[9],"issue_task"):c.resolve()},function(a){return d[9]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679677570]),d[9],"request_type","THREAD_POINT_QUERY"):c.resolve()},function(e){return d[10]=new c.Map(),d[10].set("wa_jid",a[0]),d[10].set("offline_thread_key",a[1]),d[10].set("thread_type",a[2]),d[10].set("folder_type",a[3]),d[10].set("bump_timestamp_ms",a[4]),d[10].set("tam_thread_subtype",c.i64.cast([0,0])),d[10].set("created_by_local_device",a[5]),d[10].set("device_context",d[7]),d[10].set("qpl_instance_key",d[9]),d[10].set("should_run_privacy_and_folder_checks",!1),d[10].set("should_only_create_server_thread",!1),d[11]=d[10].get("offline_thread_key"),d[12]=c.toJSON(d[10]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[11]),c.i64.cast([0,388]),d[12],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[13]=c.i64.of_float(Date.now()),d[14]=c.i64.random(),d[16]="Finishing execution. Execution time: ",d[17]=c.i64.to_string(c.i64.sub(d[13],d[0])),d[18]=" ms",d[15]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][createE2EEMetadataThread] ",d[15],d[16],d[15],d[17],d[15],d[18]].join("")),c.i64.eq(c.i64.mod_(d[14],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[19]=",",d[20]=c.createArray(),void 0!==void 0?d[21]=(d[20].push(void 0),d[20]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"createE2EEMetadataThread",[d[16],d[19],d[17],d[19],d[18]].join(""),d[20],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxCreateE2EEMetadataThreadStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSCreateE2EEMetadataThreadStoredProcedure",["LSCreateE2EEMetadataThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSCreateE2EEMetadataThread"),e.waJid,e.offlineThreadKey,e.threadType,e.folderType,e.bumpTimestampMs,e.createdByLocalDevice);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSCreateOfflineThreadingIDStoredProcedure",["LSCreateOfflineThreadingID","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSCreateOfflineThreadingID"),e.timestampMs);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWCreateOptimisticThread",["I64","LSAuthorityLevel","LSCreateOfflineThreadingIDStoredProcedure","LSFactory","LSIntEnum","LSMailboxType","LSRtcCallState","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield c("LSCreateOfflineThreadingIDStoredProcedure")(c("LSFactory")(a),{timestampMs:(h||(h=d("I64"))).of_float(Date.now())}));a=a[0];return a});return k.apply(this,arguments)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e={authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),folderName:"inbox",lastReadWatermarkTimestampMs:(h||(h=d("I64"))).of_float(0),mailboxType:i.ofNumber(c("LSMailboxType").MESSENGER),ongoingCallState:i.ofNumber(c("LSRtcCallState").NO_ONGOING_CALL),parentThreadKey:h.zero,threadKey:b,threadType:i.ofNumber(15)};yield a.threads.put(e);return b});return m.apply(this,arguments)}function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield j(a));yield l(a,b);return b});return n.apply(this,arguments)}g.createOfflineThreadingId=j;g.createOptimisticThreadWithThreadKey=l;g.createOptimisticThread=a}),98);
__d("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2",["DedupMiThreadCreationCache","FBLogger","I64","LSAuthorityLevel","LSCreateE2EEMetadataThreadStoredProcedure","LSFactory","LSIntEnum","MAWCreateOptimisticThread","MAWFolderUtils","MAWJids","MAWThreadLoadingState","MAWThreadUtils","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k="[Occamadillo][CreateE2EEMetadataThreadHandlerV2]";function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.bumpTimestampMs,f=b.creationSource,g=b.folderId,h=b.jid;b=b.optimisticThreadKey;p(f,h);b=b!=null?yield a.threads.get((i||(i=d("I64"))).of_string(b)):null;if(b!=null&&d("DedupMiThreadCreationCache").DedupMiThreadCreationCache.has(h)){t(h);return}if(b!=null&&m(b)){q(h,(i||(i=d("I64"))).to_string(b.threadKey));return}e={bumpTimestampMs:e,createdByLocalDevice:f==="outgoing_message",folderType:d("MAWFolderUtils").systemFolderToLSCoreClientFolder(g),offlineThreadKey:yield n(b,h,a),threadType:d("MAWThreadUtils").getLSThreadTypeFromJid(h),waJid:d("MAWJids").convertChatJidToIntJid(h)};s(e);return c("LSCreateE2EEMetadataThreadStoredProcedure")(c("LSFactory")(a),e).then(function(){d("DedupMiThreadCreationCache").addToDedupMiThreadCreationCache(h)})});return l.apply(this,arguments)}function m(a){a=(j||(j=d("LSIntEnum"))).unwrapIntEnum(a.authorityLevel);switch(a){case c("LSAuthorityLevel").CLIENT_PARTIAL:case c("LSAuthorityLevel").OPTIMISTIC:case c("LSAuthorityLevel").SERVER_PARTIAL:return!1;case c("LSAuthorityLevel").AUTHORITATIVE:case c("LSAuthorityLevel").AUTHORITATIVE_PENDING_REPLACEMENT:case c("LSAuthorityLevel").CLIENT_AUTHORITATIVE_DELETE:return!0;default:a;throw c("FBLogger")("messenger_web").mustfixThrow("Unknown authority level")}}function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){if(a!=null)return(h||(h=b("Promise"))).resolve(a.threadKey);a=(yield d("MAWCreateOptimisticThread").createOfflineThreadingId(e));r(c,a);yield (h||(h=b("Promise"))).all([d("MAWCreateOptimisticThread").createOptimisticThreadWithThreadKey(e,a),d("MAWThreadLoadingState").markActThreadLoadingAsCompleted(e,{intJid:d("MAWJids").convertChatJidToIntJid(c),threadKey:a})]);return a});return o.apply(this,arguments)}function p(a,b){c("FBLogger")("messenger_web").info(k+" handler called from %s for jid %s",a,b)}function q(a,b){c("FBLogger")("messenger_web").info(k+" handler returned early for jid %s because thread %s was already authoritative",a,b)}function r(a,b){c("FBLogger")("messenger_web").info(k+" no thread exists for jid %s, creating optimistic thread with key %s",a,(i||(i=d("I64"))).to_string(b))}function s(a){c("FBLogger")("messenger_web").info(k+" Calling LSCreateE2EEMetadataThreadStoredProcedure with params: bumpTimestampMs: %s, createdByLocalDevice: %s, folderType: %s, offlineThreadKey: %s, offlineThreadKeySource: %s, threadType: %s, waJid: %s",(i||(i=d("I64"))).to_string(a.bumpTimestampMs),a.createdByLocalDevice,i.to_string(a.folderType),i.to_string(a.offlineThreadKey),i.to_string(a.threadType),i.to_string(a.waJid))}function t(a){c("FBLogger")("messenger_web").info(k+" LSCreateE2EEMetadataThreadStoredProcedure has already been called for jid %s, early returning",a)}g.call=a}),98);
__d("MAWBridgeParticipantRemovedHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeParticipantRemovedHandler",function(a,c){return a.participants["delete"](c,(h||(h=d("I64"))).of_string(b.userId))})}g.call=a}),98);
__d("MAWBridgeRavenActionMsgForUIHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWMsg","MAWRavenUtils","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=["ephemeralMediaState"],i,j;function a(a,c){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,c.threadJid,"MAWBridgeRavenActionMsgForUIHandler",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){a=a.attachments;e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a).getKeyRange(e,c.ravenMsgId)));if(e==null)return(j||(j=b("Promise"))).resolve();if(e.ephemeralMediaState==null)return(j||(j=b("Promise"))).resolve();var f=(i||(i=d("I64"))).to_int32(e.ephemeralMediaState);if(e.ephemeralMediaViewMode==null)return(j||(j=b("Promise"))).resolve();var g=i.to_int32(e.ephemeralMediaViewMode);f=d("MAWMsg").MAWRavenMsgEphemeralMediaState.cast(f);g=d("MAWMsg").MAWRavenMsgEphemeralType.cast(g);if(f==null||g==null)return(j||(j=b("Promise"))).resolve();f=d("MAWRavenUtils").getNextRavenMessageEphemeralState(f,g);if(f==null)return(j||(j=b("Promise"))).resolve();e.ephemeralMediaState;g=babelHelpers.objectWithoutPropertiesLoose(e,h);e=babelHelpers["extends"]({ephemeralMediaState:i.of_int32(f)},g,{transportKey:"WhatsApp"});f=[g.threadKey,g.messageId,g.attachmentFbid];return a.upsert(f,e)});return function(b,c){return a.apply(this,arguments)}}())}g.call=a}),98);
__d("MAWBridgeReceivedReceiptHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=(h||(h=d("I64"))).of_string(b.fbid);b=d("MAWTimeUtils").toTimestamp(b.deliveredWatermarkTs);c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.participants).getKeyRange(c,e)));c!=null&&(yield a.participants.put({authorityLevel:c.authorityLevel,contactId:c.contactId,deliveredWatermarkTimestampMs:(h||(h=d("I64"))).equal(b,(h||(h=d("I64"))).zero)?c.deliveredWatermarkTimestampMs:b,groupParticipantJoinState:c.groupParticipantJoinState,isAdmin:c.isAdmin,isModerator:c.isModerator,isSuperAdmin:c.isSuperAdmin,nickname:c.nickname,normalizedSearchTerms:c.normalizedSearchTerms,participantCapabilities:c.participantCapabilities,readActionTimestampMs:c.readActionTimestampMs,readWatermarkTimestampMs:c.readWatermarkTimestampMs,subscribeSource:c.subscribeSource,threadKey:c.threadKey,threadRoles:(h||(h=d("I64"))).zero}))});return j.apply(this,arguments)}function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.chatJid,"MAWBridgeReceivedReceiptHandler",function(a,c){return i(a,b,c)})}g.callWithoutWaitingForAnything=i;g.call=a}),98);
__d("LSRefetchContactRowIfExists",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.filter(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,c.i64.le(f.authorityLevel,c.i64.cast([0,80]))?(d[0]=new c.Map(),d[0].set("contact_id",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"cpq_v2",c.i64.cast([0,207]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.resolve())})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSContactRefetchContactRowIfExistsStoredProcedure";a.__tables__=["contacts"];e.exports=a}),null);
__d("LSRefetchContactRowIfExistsStoredProcedure",["LSRefetchContactRowIfExists","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSRefetchContactRowIfExists"),e.id);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBridgeRefreshContactHandler",["LSFactory","LSRefetchContactRowIfExistsStoredProcedure"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return c("LSRefetchContactRowIfExistsStoredProcedure")(c("LSFactory")(a),{id:b})}g.call=a}),98);
__d("MAWBridgeRemoveMessageSearchResultHandler",["Promise","ReQL","asyncToGeneratorRuntime","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){return b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.message_search_results).filter(function(a){return e.includes(a.messageOtid)})));yield (h||(h=b("Promise"))).all(c.map(function(b){return a.message_search_results["delete"](b.type_,b.query,b.threadKey,b.globalIndex)}))})().then(c("emptyFunction"))}g.call=a}),98);
__d("LSIssueAttachmentRestoreTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSBinaryToHex.nop","LSCreateDerivedKeys.nop","LSFindBackup","LSGetBlobFromInt64BE.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSOpeEncrypt.nop","LSQplAnnotateString.nop","LSQplMarkEnd.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop","LSTruncateSortKey.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] Beginning execution."),a[7]!==void 0?c.resolve(d[1]=a[7]):c.sequence([function(a){return d[28]=c.i64.random(),d[29]=c.i64.to_string(d[28]),d[29]!==void 0?c.nativeOperation(b("LSQplStartTrace.nop"),c.i64.cast([0,679684335]),d[29],!0,void 0):c.resolve()},function(a){return d[1]=d[29]}])},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,679684335]),d[1],"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure_start"):c.resolve()},function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,e){var f=a.done;a=a.value;return f?(f=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,20]),void 0,void 0],d[2]=f[0],d[3]=f[1],d[4]=f[2],d[5]=f[3],d[6]=f[4],d[7]=f[5],d[8]=f[6],d[9]=f[7],d[10]=f[8],d[11]=f[9],d[12]=f[10],d[13]=f[11],d[14]=f[12],d[15]=f[13],d[16]=f[14],d[17]=f[15],d[18]=f[16],d[19]=f[17],f):(e=a.item,c.sequence([function(a){return d[33]=e.backupTenancy,d[32]=e.encryptionVersion,d[28]=void 0,c.i64.neq(d[28],void 0)?c.resolve(d[29]=d[28]):c.sequence([function(a){return d[34]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[35]?d[44]=(d[34].push(c.i64.cast([0,0])),d[34]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[36]?d[44]=(d[34].push(c.i64.cast([0,2])),d[34]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[37]=a[0],a})},function(a){return d[37]?d[44]=(d[34].push(c.i64.cast([0,3])),d[34]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[38]=a[0],a})},function(a){return d[38]?d[44]=(d[34].push(c.i64.cast([0,4])),d[34]):0,d[39]=c.createArray(),d[40]=c.i64.of_int32(d[34].length),c.i64.gt(d[40],c.i64.cast([0,0]))?c.loopAsync(d[40],function(a){return d[44]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[34],d[44]).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return d[47]=(d[39].push(d[45]),d[39])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[44]=c.createArray(),d[45]=c.i64.of_int32(d[39].length),c.i64.gt(d[45],c.i64.cast([0,0]))?c.loopAsync(d[45],function(a){return d[47]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[39],d[47]).then(function(a){return a=a,d[48]=a[0],d[49]=a[1],a})},function(a){return d[50]=(d[44].push(c.i64.to_string(d[48])),d[44])}])}):c.resolve()},function(a){return d[46]=d[44].join(","),d[41]=d[46]}])},function(a){return d[39].some(function(a){return c.i64.eq(d[32],a)})?d[42]=d[32]:d[42]=void 0,c.i64.neq(d[42],void 0)?d[43]=d[42]:d[43]=void 0,d[29]=d[43]}])},function(a){return c.i64.neq(d[29],void 0)?d[30]=d[29]:d[30]=c.i64.cast([0,0]),c.i64.neq(d[33],void 0)?d[31]=d[33]:d[31]=c.i64.cast([0,1]),a=[e.backupId,e.deviceId,e.mailboxRootKeyBlob,e.ocmfClientStateBlob,void 0,void 0,d[30],d[31],e.epochAuthPublicKeyBlob,e.epochAuthPrivateKeyBlob,e.devicePublicKeyBlob,e.devicePrivateKeyBlob,e.epochStoragePublicKeyBlob,e.epochStoragePrivateKeyBlob,e.obliviousValidationTokenBlob,e.authorityLevel,void 0,void 0],d[2]=a[0],d[3]=a[1],d[4]=a[2],d[5]=a[3],d[6]=a[4],d[7]=a[5],d[8]=a[6],d[9]=a[7],d[10]=a[8],d[11]=a[9],d[12]=a[10],d[13]=a[11],d[14]=a[12],d[15]=a[13],d[16]=a[14],d[17]=a[15],d[18]=a[16],d[19]=a[17]}]))})},function(a){return c.storedProcedure(b("LSFindBackup")).then(function(a){return a=a,d[21]=a[0],a})},function(e){return c.blobs.neq(d[5],void 0)?c.i64.neq(d[3],void 0)?d[21]!==void 0?c.blobs.neq(d[4],void 0)?c.sequence([function(e){return d[28]=c.createArray(),d[35]=(d[28].push(d[21]),d[28]),d[35]=(d[28].push(a[1]),d[28]),d[29]=c.toJSON(d[28]),d[30]=c.createArray(),d[35]=(d[30].push(c.i64.cast([0,32])),d[30]),c.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",a[5]].join("")).then(function(a){return a=a,d[31]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[31],void 0,d[4],d[30]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[32]?d[33]=!1:d[33]=!0,d[33]?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),d[36]="Got null keys while deriving message list OPE key. Returning null blobish",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[36]].join("")),d[35]=c.createArray(),void 0!==void 0?d[37]=(d[35].push(void 0),d[35]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[36],d[35],c.i64.cast([0,3]))},function(a){return d[34]=void 0}]):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[32],c.i64.cast([0,0])).then(function(a){return a=a,d[35]=a[0],d[36]=a[1],a})},function(a){return d[34]=d[35]}])},function(e){return c.blobs.neq(d[34],void 0)?c.sequence([function(e){return c.i64.neq(a[9],void 0)?d[35]=a[9]:d[35]=c.i64.cast([-1,4294967295]),c.nativeOperation(b("LSGetBlobFromInt64BE.nop"),a[6]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return c.nativeOperation(b("LSTruncateSortKey.nop"),d[36]).then(function(a){return a=a,d[37]=a[0],a})},function(a){return c.nativeOperation(b("LSOpeEncrypt.nop"),d[34],d[37],c.i64.cast([0,16])).then(function(a){return a=a,d[38]=a[0],a})},function(a){return c.nativeOperation(b("LSBinaryToHex.nop"),d[38]).then(function(a){return a=a,d[39]=a[0],a})},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),d[29]).then(function(a){return a=a,d[40]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF9rZXlfc2NvcGU="),d[40]).then(function(a){return a=a,d[41]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[41]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[42]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),d[21]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWFpbGJveF9pZF9zY29wZQ=="),d[44]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[45]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[46]).then(function(a){return a=a,d[47]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[4]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWVzc2FnZV9pZF9zY29wZQ=="),d[48]).then(function(a){return a=a,d[49]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[49]).then(function(a){return a=a,d[50]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[50]).then(function(a){return a=a,d[51]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[4]).then(function(a){return a=a,d[52]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),d[52]).then(function(a){return a=a,d[53]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[53]).then(function(a){return a=a,d[54]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[54]).then(function(a){return a=a,d[55]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[5]).then(function(a){return a=a,d[56]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("dGhyZWFkX2lkX3Njb3Bl"),d[56]).then(function(a){return a=a,d[57]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[57]).then(function(a){return a=a,d[58]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[58]).then(function(a){return a=a,d[59]=a[0],a})},function(e){return d[60]=new c.Map(),d[60].set("attachment_index_key",d[43]==null?"":d[43]),d[60].set("backup_ent_fbid",a[0]),d[60].set("delivery_object_id",a[1]),d[60].set("device_id",d[3]),d[60].set("mailbox_partial_id",d[47]==null?"":d[47]),d[60].set("media_type",a[3]),d[60].set("message_partial_id",d[51]==null?"":d[51]),d[60].set("product_type",a[2]),d[60].set("salt_partial_id",d[55]==null?"":d[55]),d[60].set("sort_key",d[39]==null?"":d[39]),d[60].set("thread_partial_id",d[59]==null?"":d[59]),d[60].set("trace_id",d[1]),d[60].set("source",d[35]),d[61]=new c.Map(),d[61].set("otid",a[4]),d[61].set("server_thread_key",a[8]),d[61].set("timestamp",c.i64.to_string(a[6])),c.nativeOperation(b("LSBase64Encode.nop"),d[5]).then(function(a){return a=a,d[62]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[4]).then(function(a){return a=a,d[63]=a[0],a})},function(e){return d[64]=new c.Map(),d[64].set("ocmf_client_state_blob",d[62]==null?"":d[62]),d[64].set("mailbox_root_key",d[63]==null?"":d[63]),d[65]=c.createArray(),d[76]=(d[65].push(a[4]),d[65]),d[76]=(d[65].push(a[1]),d[65]),d[66]=c.toJSON(d[65]),d[60].set("raw_identifiers",d[61]),d[60].set("backup_id",d[21]),d[60].set("thread_id",a[5]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[66]).then(function(a){return a=a,d[67]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),d[67]).then(function(a){return a=a,d[68]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[68]).then(function(a){return a=a,d[69]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[69]).then(function(a){return a=a,d[70]=a[0],a})},function(a){return d[60].set("salt_partial_access_token",d[70]==null?"":d[70]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[29]).then(function(a){return a=a,d[71]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF9rZXlfc2FsdF9zY29wZQ=="),d[71]).then(function(a){return a=a,d[72]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[72]).then(function(a){return a=a,d[73]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[73]).then(function(a){return a=a,d[74]=a[0],a})},function(a){return d[60].set("salt_partial_attachment_index_key",d[74]==null?"":d[74]),d[60].set("raw_tokens",d[64]),void 0!==void 0?d[60].set("access_token_secret",void 0):0,void 0!==void 0?d[60].set("primary_key_secret",void 0):0,d[75]=c.toJSON(d[60]),c.storedProcedure(b("LSIssueNewTask"),"encrypted_backups_attachment_restore",c.i64.cast([0,50020]),d[75],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):c.sequence([function(a){return d[37]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","OPE_key_is_null"].join(""),d[1]!==void 0?d[37]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679684335]),d[1],"error",d[37]):c.resolve():c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkEnd.nop"),c.i64.cast([0,679684335]),d[1],!1):c.resolve()},function(a){return d[36]="OPE key is null for IssueAttachmentRestoreTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",d[36]].join("")),d[35]=c.createArray(),void 0!==void 0?d[38]=(d[35].push(void 0),d[35]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",d[36],d[35],c.i64.cast([0,3]))}])}]):c.sequence([function(a){return d[30]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","missing_mailbox_root_key"].join(""),d[1]!==void 0?d[30]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679684335]),d[1],"error",d[30]):c.resolve():c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkEnd.nop"),c.i64.cast([0,679684335]),d[1],!1):c.resolve()},function(a){return d[29]="Missing mailbox_root_key for IssueAttachmentRestoreTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",d[29]].join("")),d[28]=c.createArray(),void 0!==void 0?d[31]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",d[29],d[28],c.i64.cast([0,3]))}]):c.sequence([function(a){return d[30]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","missing_backup_id"].join(""),d[1]!==void 0?d[30]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679684335]),d[1],"error",d[30]):c.resolve():c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkEnd.nop"),c.i64.cast([0,679684335]),d[1],!1):c.resolve()},function(a){return d[29]="Missing backup_id for IssueAttachmentRestoreTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",d[29]].join("")),d[28]=c.createArray(),void 0!==void 0?d[31]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",d[29],d[28],c.i64.cast([0,3]))}]):c.sequence([function(a){return d[30]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","missing_device_id"].join(""),d[1]!==void 0?d[30]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679684335]),d[1],"error",d[30]):c.resolve():c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkEnd.nop"),c.i64.cast([0,679684335]),d[1],!1):c.resolve()},function(a){return d[29]="Missing device_id for IssueAttachmentRestoreTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",d[29]].join("")),d[28]=c.createArray(),void 0!==void 0?d[31]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",d[29],d[28],c.i64.cast([0,3]))}]):c.sequence([function(a){return d[30]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","missing_ocmf_client_state_blob"].join(""),d[1]!==void 0?d[30]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679684335]),d[1],"error",d[30]):c.resolve():c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkEnd.nop"),c.i64.cast([0,679684335]),d[1],!1):c.resolve()},function(a){return d[29]="Missing ocmf_client_state_blob for IssueAttachmentRestoreTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",d[29]].join("")),d[28]=c.createArray(),void 0!==void 0?d[31]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",d[29],d[28],c.i64.cast([0,3]))}])},function(a){return d[22]=c.i64.of_float(Date.now()),d[23]=c.i64.random(),d[25]="Finishing execution. Execution time: ",d[26]=c.i64.to_string(c.i64.sub(d[22],d[0])),d[27]=" ms",d[24]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ",d[24],d[25],d[24],d[26],d[24],d[27]].join("")),c.i64.eq(c.i64.mod_(d[23],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[28]=",",d[29]=c.createArray(),void 0!==void 0?d[30]=(d[29].push(void 0),d[29]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",[d[25],d[28],d[26],d[28],d[27]].join(""),d[29],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state"];e.exports=a}),null);
__d("LSIssueAttachmentRestoreTaskStoredProcedure",["LSIssueAttachmentRestoreTask","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueAttachmentRestoreTask"),e.backupEntFbid,e.deliveryObjectId,e.productType,e.mediaType,e.messageId,e.threadId,e.sortOrder,e.traceId,e.serverThreadKey,e.source);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWAsyncEBMediaDownloadPromise",[],(function(a,b,c,d,e,f){"use strict";var g=new Map();function a(a){var b=a.messageId,c=a.objectId,d=a.plaintextHash;a=a.threadId;var e=g.get(c);g.set(c,e!=null?[].concat(e,[{messageId:b,plaintextHash:d,threadId:a}]):[{messageId:b,plaintextHash:d,threadId:a}])}function b(a){return(a=g.get(a))==null?void 0:a.pop()}f.setMediaDownloadPayload=a;f.retrieveMediaDownloadPayload=b}),66);
__d("MAWBridgeResignAttachmentCDNUrlHandler",["I64","LSFactory","LSIssueAttachmentRestoreTaskStoredProcedure","MAWAsyncEBMediaDownloadPromise","MAWBridgeFireAndForget","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";var h,i="-8";function a(a,b){var e,f=b.traceId,g=(e=b.skipLegacyMediaDownloadFlow)!=null?e:!1;function j(a,b,c){!g&&f!=null&&d("MAWBridgeFireAndForget").fireAndForget("backend","addMediaDownloadQpl",{annotations:c!=null?c:void 0,pointName:b,qplInstanceKey:f,qplType:a})}j("point","resign_cdn_url_bridge_handler_start");return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeResignAttachmentCDNUrlHandler",function(a,e){e={backupEntFbid:(h||(h=d("I64"))).of_string(i),deliveryObjectId:b.deliveryObjectId,mediaType:b.mediaType,messageId:b.messageId,productType:b.productType,serverThreadKey:h.to_string(e),sortOrder:h.of_float(b.sortOrder),threadId:b.threadId,traceId:f.toString()};b.skipLegacyMediaDownloadFlow!==!0&&d("MAWAsyncEBMediaDownloadPromise").setMediaDownloadPayload({messageId:b.msgId,objectId:b.deliveryObjectId,plaintextHash:b.plaintextHash,threadId:b.threadId});j("point","resign_cdn_url_issue_attachment_task",{string:{taskTraceId:e.traceId}});return c("LSIssueAttachmentRestoreTaskStoredProcedure")(c("LSFactory")(a),e).then(function(){j("point","resign_cdn_url_issue_attachment_task_end")})["catch"](function(a){j("fail","resign_cdn_url_issue_attachment_task_fail",{string:{error:a.toString()}})})})}g.call=a}),98);
__d("MAWBridgeTraceUtils",["I64","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,c,e){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.data_trace_meta).filter(function(a){var b=a.contextThree;if(b!=null&&c===b&&(i||(i=d("I64"))).equal(a.traceType,e))return a.shouldFlush===!1;else return!1})).then(function(a){if(a.length!==0)return(h||(h=b("Promise"))).resolve(a[0].traceId);else return(h||(h=b("Promise"))).resolve()})}g.getTraceId=a}),98);
__d("MAWBridgeStartTraceHandler",["ArmadilloDataTraceCheckPoint","ArmadilloDataTraceType","I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceTag","LSFactory","LSRequestId","MAWAckLevel","MAWBridgeTraceUtils","MAWMsg","MAWTimeUtils","Promise","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,e){return a.data_trace_meta.add({contextOne:void 0,contextThree:b.externalId,contextTwo:void 0,foregroundTimestampMs:(i||(i=d("I64"))).zero,initTimestampMs:d("MAWTimeUtils").toTimestamp(b.ts),predefinedId:void 0,shouldFlush:!1,traceId:e,traceType:b.traceType}).then(function(){return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").traceCreated,dataTraceId:e,syncChannel:(i||(i=d("I64"))).neg_one})}).then(function(){var f;if(b.threadKey==null||!c("gkx")("23995"))return;return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloTlcControlOpenThread,dataTraceId:e,syncChannel:(i||(i=d("I64"))).neg_one,tags:(f=b.threadKey)!=null?f:void 0})})}function a(a,e){var f=e.ack,g=e.traceType;return f===d("MAWAckLevel").ACK.clock?d("MAWBridgeTraceUtils").getTraceId(a,e.externalId,e.traceType).then(function(f){if(f!=null)return;var k=c("LSRequestId").generate();if((i||(i=d("I64"))).equal(g,d("ArmadilloDataTraceType").armadilloMessageSend))return j(a,e,k).then(function(){var b=e.threadType;if(b==="User")return;return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").traceGroupMessage,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one})}).then(function(){if(e.isFirstMsg)return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloActMessageSend,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one,tags:"first_msg=1"})}).then(function(){var f=e.type_;f=f===d("MAWMsg").text?d("ArmadilloDataTraceCheckPoint").traceTextMessage:f===d("MAWMsg").ptt||f===d("MAWMsg").image||f===d("MAWMsg").video||f===d("MAWMsg").gif?d("ArmadilloDataTraceCheckPoint").traceMediaMessage:void 0;if(f==null)return(h||(h=b("Promise"))).resolve(f);c("promiseDone")(c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:f,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one}));return(h||(h=b("Promise"))).resolve(f)}).then(function(b){if(b==null)return;if(!(i||(i=d("I64"))).equal(b,d("ArmadilloDataTraceCheckPoint").traceMediaMessage))return;b=e.type_;b=b===d("MAWMsg").image?d("LSDataTraceTag").image:b===d("MAWMsg").ptt?d("LSDataTraceTag").audio:b===d("MAWMsg").video?d("LSDataTraceTag").video:b===d("MAWMsg").gif?d("LSDataTraceTag").animatedImage:d("LSDataTraceTag").none;return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").richMediaMediaSendAttachmentType,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one,tags:String(b)})});else return j(a,e,k)}):(h||(h=b("Promise"))).resolve()}g.call=a}),98);
__d("MAWBridgeXMAShareTombstonedHandler",["FBLogger","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){var f=String(e.xmaId);return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeXMAShareTombstonedHandler",function(a,g){return a.attachments.get(g,e.msgId,f).then(function(i){if(i==null)return(h||(h=b("Promise"))).resolve();i=[i.defaultCtaId,i.attachmentCta1Id,i.attachmentCta2Id,i.attachmentCta3Id].filter(Boolean);i=i.map(function(b){return a.attachment_ctas["delete"](b)});return(h||(h=b("Promise"))).all(i).then(function(){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(g,e.msgId,f)).then(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(d){if(d!=null){d=babelHelpers["extends"]({},d,{attachmentCta1Id:void 0,attachmentCta2Id:void 0,attachmentCta3Id:void 0,cta1Title:void 0,cta1Type:void 0,cta2Title:void 0,cta2Type:void 0,cta3Title:void 0,cta3Type:void 0,defaultCtaId:void 0,defaultCtaTitle:void 0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,previewHeight:void 0,previewHeightLarge:void 0,previewWidth:void 0,previewWidthLarge:void 0,subtitleText:void 0,titleText:void 0});yield a.attachments.put(d)}c("FBLogger")("messenger_web_sharing").blameToPreviousFrame().mustfix("Trying to tombstone a secure xma attachment but no existing attachment");return(h||(h=b("Promise"))).resolve()});return function(a){return d.apply(this,arguments)}}())})})})}g.call=a}),98);
__d("MAWBridgeStoryReplyStartCountdownHandler",["I64","MAWBridgeXMAShareTombstonedHandler","MAWDbXMA","MAWMessageExpirationStorage","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,c){return c.msgs.reduce(function(c,e){return c.then(function(){d("MAWMessageExpirationStorage").setMessageForExpiration({bridgeMsgStartCountdown:e,expirationEvent:d("MAWMessageExpirationStorage").expirationStoryReplyEvent});(i||(i=d("I64"))).of_int32(e.millisecondsUntilCountdownTs);return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeMsgsStartCountdownHandler",function(a,c){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(c,e.msgId)).then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){yield (h||(h=b("Promise"))).all(c.map(function(b){b=d("MAWDbXMA").convertNumberToXMAId(Number.parseInt(b.attachmentFbid,10));b={msgId:e.msgId,threadJid:e.threadJid,xmaId:b};return d("MAWBridgeXMAShareTombstonedHandler").call(a,b)}))});return function(a){return c.apply(this,arguments)}}())})})},(h||(h=b("Promise"))).resolve())}g.call=a}),98);
__d("MAWBridgeSyncContacts",["CurrentMessengerUser","I64","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSVerifyContactRowExistsStoredProcedure","Promise","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=d("CurrentMessengerUser").getID();function a(a,e){return e.reduce(function(b,e){var f=(i||(i=d("I64"))).of_string(e);return b.then(function(){return c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(a),{authorityLevel:(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),blockedByViewerStatus:j.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:j.ofNumber(c("LSContactIdType").FBID),contactType:j.ofNumber(c("LSContactType").USER),contactViewerRelationship:j.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:j.ofNumber(c("LSContactGender").UNKNOWN),id:f,isBlocked:!1,isMemorialized:!1,isSelf:k===e,workForeignEntityType:j.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)})}).then(c("emptyFunction"))},(h||(h=b("Promise"))).resolve())}g.call=a}),98);
__d("MAWBridgeThreadHiddenV2Handler",["LSFactory","LSIntEnum","LSOptimisticRemoveThreadStoredProcedure","LSThreadRemoveType","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b,"MAWBridgeThreadHiddenV2Handler",function(a,b){a=c("LSFactory")(a);return c("LSOptimisticRemoveThreadStoredProcedure")(a,{removeType:(h||(h=d("LSIntEnum"))).ofNumber(c("LSThreadRemoveType").DELETE_THREAD),threadKey:b})})}g.call=a}),98);
__d("MAWBridgeThreadUpdatedHandler",["MAWBridgeBuildThreadSnippet","MAWBridgeUIEventDataValidation","MAWFolderUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","ReQL","asyncToGeneratorRuntime","getMAWLastMessageCtaType"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c=b.folder!=null?d("MAWFolderUtils").getMessagingFolderTag(b.folder):a.folderName;return(b=b.cannotReplyReason)!=null?b:c==="inbox"?void 0:a.cannotReplyReason}function i(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(e)));if(e==null)return;var f=d("MAWBridgeBuildThreadSnippet").buildBridgeThreadSnippet(b,e.snippet),g=h(e,b),i=c("getMAWLastMessageCtaType")(b.snippetType);g=babelHelpers["extends"]({},e,{cannotReplyReason:g,folderName:e.folderName,lastMessageCtaType:i,parentThreadKey:e.parentThreadKey,snippet:f,snippetSenderContactId:b.snippetSenderContactId==null?e.snippetSenderContactId:d("MAWBridgeUIEventDataValidation").stringToI64Opt(b.snippetSenderContactId)});yield a.threads.put(g)});return j.apply(this,arguments)}function a(a,b){var c=b.threadJid;return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,c,"MAWBridgeThreadUpdatedHandler",function(a,c){return i(a,b,c)})}g.callWithoutWaitingForAnything=i;g.call=a}),98);
__d("MAWBridgeUIEventQueueQPLLogger",["QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){c("QPLUserFlow").start(c("qpl")._(1056849266,"1765"),{annotations:{string_array:{events:b}},instanceKey:a})}function b(a,b){c("QPLUserFlow").addAnnotations(c("qpl")._(1056849266,"1765"),b,{instanceKey:a})}function d(a){c("QPLUserFlow").endSuccess(c("qpl")._(1056849266,"1765"),{instanceKey:a})}function e(a,b){c("QPLUserFlow").endFailure(c("qpl")._(1056849266,"1765"),"MAWBridgeUIEventHandlerFailure",{annotations:{string:{failedEventTag:b}},instanceKey:a})}g.start=a;g.addAnnotations=b;g.endSuccess=d;g.endFailure=e}),98);
__d("MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c){return(g||(g=b("Promise"))).resolve()}f.call=a}),66);
__d("MAWBridgeUpdateClientRestoreStatus",["I64","LSEncryptedBackupsClientRestoreState","LSIntEnum","MAWUpdateClientRestoreStatusOperationType","Promise","ReQL","asyncToGeneratorRuntime","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,e){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.encrypted_backups_client_restore_status).filter(function(a){return a.threadId===e})).then(function(d){if(d!=null)return a.encrypted_backups_client_restore_status["delete"](d.threadId).then(c("emptyFunction"));else return(j||(j=b("Promise"))).resolve()})}function l(a,e,f,g){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.encrypted_backups_client_restore_status).getKeyRange(e)).then(function(g){if(g!=null)return a.encrypted_backups_client_restore_status.put({lastUpdated:(h||(h=d("I64"))).of_float(Date.now()),restoreStatus:(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsClientRestoreState").RESTORE_COMPLETE),serverThreadKey:f,threadId:e});else return(j||(j=b("Promise"))).resolve()})}function a(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.encrypted_backups_client_restore_status)).then(function(c){return c.reduce(function(b,c){return b.then(function(){return k(a,c.threadId)})},(j||(j=b("Promise"))).resolve())})}function e(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=e.threadId,g=e.action;g===d("MAWUpdateClientRestoreStatusOperationType").upsertClientRestoreStatus?yield a.encrypted_backups_client_restore_status.put({lastUpdated:(h||(h=d("I64"))).of_float(Date.now()),restoreStatus:(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsClientRestoreState").RESTORE_IN_PROGRESS),serverThreadKey:void 0,threadId:f}):yield l(a,e.threadId,void 0,e.ebPrefetch);return(j||(j=b("Promise"))).resolve()});return m.apply(this,arguments)}g.truncateClientRestoreStatusTable=a;g.call=e}),98);
__d("MAWBridgeUpdateContactAsConnectedHandler",["FBLogger","I64","LSAddMessengerContactStoredProcedure","LSContactViewerRelationship","LSFactory","LSIntEnum","LSOptimisticAcceptMessageRequestStoredProcedure","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWUpdateLSThreadCapabilities","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=e.contactUserId;e=e.threadJid;var g=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.contacts).getKeyRange((i||(i=d("I64"))).of_string(f))));if(g==null){c("FBLogger")("messenger_web").warn("Missing contact in MAWBridgeUpdateContactAsConnectedHandler");return}var k=babelHelpers["extends"]({},g,{contactViewerRelationship:(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactViewerRelationship").CONTACT_OF_VIEWER)});return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e,"MAWBridgeUpdateContactAsConnectedHandler",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){yield (h||(h=b("Promise"))).allSettled([a.contacts.upsert([g.id],k),c("LSAddMessengerContactStoredProcedure")(c("LSFactory")(a),{contactId:g.id}),d("MAWUpdateLSThreadCapabilities").updateNonMessageRequestThreadTxn(a,e),c("LSOptimisticAcceptMessageRequestStoredProcedure")(c("LSFactory")(a),{threadKey:e})])});return function(b,c){return a.apply(this,arguments)}}())});return k.apply(this,arguments)}g.call=a}),98);
__d("LSUpdateE2EEMetadataParticipants",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("user_self_remove",!1),d[1]=d[0].get("thread_key"),d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[1]),c.i64.cast([0,394]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateE2EEMetadataParticipantsStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSUpdateE2EEMetadataParticipantsStoredProcedure",["LSSynchronousPromise","LSUpdateE2EEMetadataParticipants","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSUpdateE2EEMetadataParticipants"),e.threadKey);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBridgeUpdateE2EEMetadataParticipantsHandler",["LSFactory","LSUpdateE2EEMetadataParticipantsStoredProcedure","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeThreadsLoadedHandler",function(a,b){return c("LSUpdateE2EEMetadataParticipantsStoredProcedure")(c("LSFactory")(a),{threadKey:b})})}g.call=a}),98);
__d("LSBumpE2EEMetadataThread",["LSCancelTaskByQueueName","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("bump_timestamp_ms",a[1]),d[0].set("thread_key",a[0]),d[0].set("bumped_by_local_device_send",a[2]),d[0].set("tam_thread_subtype",c.i64.cast([0,0])),d[0].set("wa_jid",void 0),d[0].set("message_ephemeral_duration_in_sec",c.i64.cast([0,0])),d[0].set("message_product_type",void 0),d[0].set("is_message_deletion",!1),d[0].set("is_unbump",a[3]),d[1]=d[0].get("thread_key"),c.storedProcedure(b("LSCancelTaskByQueueName"),c.i64.to_string(d[1]),c.i64.cast([0,389]))},function(e){return d[2]=new c.Map(),d[2].set("bump_timestamp_ms",a[1]),d[2].set("thread_key",a[0]),d[2].set("bumped_by_local_device_send",a[2]),d[2].set("tam_thread_subtype",c.i64.cast([0,0])),d[2].set("wa_jid",void 0),d[2].set("message_ephemeral_duration_in_sec",c.i64.cast([0,0])),d[2].set("message_product_type",void 0),d[2].set("is_message_deletion",!1),d[2].set("is_unbump",a[3]),d[3]=d[2].get("thread_key"),d[4]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[3]),c.i64.cast([0,389]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxBumpE2EEMetadataThreadStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSBumpE2EEMetadataThreadStoredProcedure",["LSBumpE2EEMetadataThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSBumpE2EEMetadataThread"),e.threadKey,e.serverAuthoritativeTimestampMs,e.bumpedByLocalDeviceSend,e.isUnbump);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBridgeUpdateThreadActivityHandler",["I64","LSBumpE2EEMetadataThreadStoredProcedure","LSFactory","MAWChatJid","MAWJids","MAWMiActGetThreadLifecycleState__DO_NOT_USE","MWFBLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("MWFBLogger").MWLogger().tags(["bridgeUIEvent","Occam","ActivityUpdate"]);function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("MAWChatJid").toThreadMaybe(a,b.chatJid));if(c==null){yield q(a,b.chatJid);return}switch(b.source){case"outgoing_msg":case"incoming_msg":return k(a,c,b);case"deleted_msg":return m(a,c,b);case"inserted_admin_msg":return p(c,b,"No bump for admin message");case"eb_restore":return i.warn("Attempted bump from EB restore");default:b.source;throw i.mustfixThrow("Unknown source")}});return j.apply(this,arguments)}function k(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){if(o(b,d)){p(b,d,"Stale incoming bump");return}yield c("LSBumpE2EEMetadataThreadStoredProcedure")(c("LSFactory")(a),{bumpedByLocalDeviceSend:d.source==="outgoing_msg",isUnbump:!1,serverAuthoritativeTimestampMs:d.bumpTimestampMs,threadKey:b.threadKey});p(b,d,"Thread bumped")});return l.apply(this,arguments)}function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){yield a.threads.put(babelHelpers["extends"]({},b,{lastActivityTimestampMs:(h||(h=d("I64"))).min(b.lastActivityTimestampMs,c.bumpTimestampMs),lastReadWatermarkTimestampMs:h.min(b.lastReadWatermarkTimestampMs,c.bumpTimestampMs)})),p(b,c,"Thread unbumped")});return n.apply(this,arguments)}function o(a,b){return b.source==="incoming_msg"&&(h||(h=d("I64"))).le(b.bumpTimestampMs,a.lastActivityTimestampMs)}function p(a,b,c){b=[(h||(h=d("I64"))).to_string(a.threadKey),b.source,h.to_string(b.bumpTimestampMs),h.to_string(a.lastActivityTimestampMs),h.to_string(a.lastReadWatermarkTimestampMs)];i.debug.apply(i,[c+". threadKey: %s, source: %s, bumpTimestampMs: %s, originalLastActivityTimestampMs: %s, originalLastReadWatermarkTimestampMs: %s"].concat(b))}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("MAWMiActGetThreadLifecycleState__DO_NOT_USE").getThreadLifecycleStateByJid(a,d("MAWJids").convertChatJidToIntJid(b),"MAWBridgeUpdateThreadActivityHandler"));i.mustfix("Missing LSDBThread when updating thread activity. jid: %s, thread state: %s",b,a.type)});return r.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeUpdateTraceHandler",["ArmadilloDataTraceCheckPoint","I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSFactory","LSIntEnum","MAWBridgeTraceEvent","Promise","ReQL","emptyFunction","updateAndFlushLSDataTrace"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,e,f){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.data_trace_meta).filter(function(a){var b=a.contextThree;if(b!=null&&e.externalIds.includes(b)&&(j||(j=d("I64"))).equal(a.traceType,e.traceType))return a.shouldFlush===!1;else return!1})).then(function(g){var i=[];return g.reduce(function(b,g){return b.then(function(){i.push(g.traceId);var b=e.errorMessage;if(b!=null)return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:f,dataTraceId:g.traceId,errorMessage:b,syncChannel:(j||(j=d("I64"))).neg_one});else return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:f,dataTraceId:g.traceId,syncChannel:(j||(j=d("I64"))).neg_one})})},(h||(h=b("Promise"))).resolve()).then(function(){return i})})}function l(a,d){return d.reduce(function(b,d){return b.then(function(){return c("updateAndFlushLSDataTrace")(a,d)})},(h||(h=b("Promise"))).resolve())}function a(a,e){var f=e.event;if(f===c("MAWBridgeTraceEvent").ReceivedReceipt)return k(a,e,d("ArmadilloDataTraceCheckPoint").deliveryReceiptReceived).then(function(b){return l(a,b)});else if(f===c("MAWBridgeTraceEvent").ReceivedSent)return k(a,e,d("ArmadilloDataTraceCheckPoint").advancedCryptoMEMSendTaskComplete).then(c("emptyFunction"));else if(f===c("MAWBridgeTraceEvent").FlowEndForFailure)return k(a,e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE)).then(function(b){return l(a,b)});else if(f===c("MAWBridgeTraceEvent").FlowEndForSuccess)return k(a,e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH)).then(function(b){return l(a,b)});else return(h||(h=b("Promise"))).resolve()}g.call=a}),98);
__d("LSIssueAttachmentBackupTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSQplAnnotateString.nop","LSQplMarkEnd.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] Beginning execution."),a[5]!==void 0?c.resolve(d[1]=a[5]):c.sequence([function(a){return d[27]=c.i64.random(),d[28]=c.i64.to_string(d[27]),d[28]!==void 0?c.nativeOperation(b("LSQplStartTrace.nop"),c.i64.cast([0,637738637]),d[28],!0,void 0):c.resolve()},function(a){return d[1]=d[28]}])},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,637738637]),d[1],"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure_start"):c.resolve()},function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,e){var f=a.done;a=a.value;return f?(f=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,20]),void 0,void 0],d[2]=f[0],d[3]=f[1],d[4]=f[2],d[5]=f[3],d[6]=f[4],d[7]=f[5],d[8]=f[6],d[9]=f[7],d[10]=f[8],d[11]=f[9],d[12]=f[10],d[13]=f[11],d[14]=f[12],d[15]=f[13],d[16]=f[14],d[17]=f[15],d[18]=f[16],d[19]=f[17],f):(e=a.item,c.sequence([function(a){return d[32]=e.backupTenancy,d[31]=e.encryptionVersion,d[27]=void 0,c.i64.neq(d[27],void 0)?c.resolve(d[28]=d[27]):c.sequence([function(a){return d[33]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[34]=a[0],a})},function(a){return d[34]?d[43]=(d[33].push(c.i64.cast([0,0])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[35]?d[43]=(d[33].push(c.i64.cast([0,2])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[36]?d[43]=(d[33].push(c.i64.cast([0,3])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[37]=a[0],a})},function(a){return d[37]?d[43]=(d[33].push(c.i64.cast([0,4])),d[33]):0,d[38]=c.createArray(),d[39]=c.i64.of_int32(d[33].length),c.i64.gt(d[39],c.i64.cast([0,0]))?c.loopAsync(d[39],function(a){return d[43]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[33],d[43]).then(function(a){return a=a,d[44]=a[0],d[45]=a[1],a})},function(a){return d[46]=(d[38].push(d[44]),d[38])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[43]=c.createArray(),d[44]=c.i64.of_int32(d[38].length),c.i64.gt(d[44],c.i64.cast([0,0]))?c.loopAsync(d[44],function(a){return d[46]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[38],d[46]).then(function(a){return a=a,d[47]=a[0],d[48]=a[1],a})},function(a){return d[49]=(d[43].push(c.i64.to_string(d[47])),d[43])}])}):c.resolve()},function(a){return d[45]=d[43].join(","),d[40]=d[45]}])},function(a){return d[38].some(function(a){return c.i64.eq(d[31],a)})?d[41]=d[31]:d[41]=void 0,c.i64.neq(d[41],void 0)?d[42]=d[41]:d[42]=void 0,d[28]=d[42]}])},function(a){return c.i64.neq(d[28],void 0)?d[29]=d[28]:d[29]=c.i64.cast([0,0]),c.i64.neq(d[32],void 0)?d[30]=d[32]:d[30]=c.i64.cast([0,1]),a=[e.backupId,e.deviceId,e.mailboxRootKeyBlob,e.ocmfClientStateBlob,void 0,void 0,d[29],d[30],e.epochAuthPublicKeyBlob,e.epochAuthPrivateKeyBlob,e.devicePublicKeyBlob,e.devicePrivateKeyBlob,e.epochStoragePublicKeyBlob,e.epochStoragePrivateKeyBlob,e.obliviousValidationTokenBlob,e.authorityLevel,void 0,void 0],d[2]=a[0],d[3]=a[1],d[4]=a[2],d[5]=a[3],d[6]=a[4],d[7]=a[5],d[8]=a[6],d[9]=a[7],d[10]=a[8],d[11]=a[9],d[12]=a[10],d[13]=a[11],d[14]=a[12],d[15]=a[13],d[16]=a[14],d[17]=a[15],d[18]=a[16],d[19]=a[17]}]))})},function(e){return c.blobs.neq(d[5],void 0)?c.i64.neq(d[3],void 0)?(d[27]=c.i64.to_string(d[2]),d[27]!==void 0?c.sequence([function(e){return d[28]=c.createArray(),d[63]=(d[28].push(d[27]),d[28]),d[63]=(d[28].push(a[0]),d[28]),d[29]=c.toJSON(d[28]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[29]).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF9rZXlfc2NvcGU="),d[30]).then(function(a){return a=a,d[31]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[31]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[32]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),d[27]).then(function(a){return a=a,d[34]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWFpbGJveF9pZF9zY29wZQ=="),d[34]).then(function(a){return a=a,d[35]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[35]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[36]).then(function(a){return a=a,d[37]=a[0],a})},function(e){return d[38]=new c.Map(),d[38].set("attachment_index_key",d[33]==null?"":d[33]),d[38].set("delivery_object_id",a[0]),d[38].set("device_id",d[3]),d[38].set("mailbox_partial_id",d[37]==null?"":d[37]),d[38].set("media_type",a[2]),d[38].set("product_type",a[1]),d[38].set("trace_id",d[1]),d[39]=new c.Map(),d[39].set("otid",a[3]),d[39].set("server_thread_key",a[6]),d[39].set("timestamp",void 0),c.nativeOperation(b("LSGetBlobFromString.nop"),a[3]).then(function(a){return a=a,d[40]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),d[40]).then(function(a){return a=a,d[41]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[41]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[42]).then(function(a){return a=a,d[43]=a[0],a})},function(e){return d[38].set("salt_partial_id",d[43]==null?"":d[43]),c.nativeOperation(b("LSGetBlobFromString.nop"),a[4]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("dGhyZWFkX2lkX3Njb3Bl"),d[44]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[45]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[46]).then(function(a){return a=a,d[47]=a[0],a})},function(e){return d[38].set("thread_partial_id",d[47]==null?"":d[47]),c.nativeOperation(b("LSGetBlobFromString.nop"),a[3]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWVzc2FnZV9pZF9zY29wZQ=="),d[48]).then(function(a){return a=a,d[49]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[49]).then(function(a){return a=a,d[50]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[50]).then(function(a){return a=a,d[51]=a[0],a})},function(e){return d[38].set("message_partial_id",d[51]==null?"":d[51]),d[52]=c.createArray(),d[63]=(d[52].push(a[3]),d[52]),d[63]=(d[52].push(a[0]),d[52]),d[53]=c.toJSON(d[52]),d[38].set("raw_identifiers",d[39]),d[38].set("backup_id",d[27]),d[38].set("thread_id",a[4]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[53]).then(function(a){return a=a,d[54]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),d[54]).then(function(a){return a=a,d[55]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[55]).then(function(a){return a=a,d[56]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[56]).then(function(a){return a=a,d[57]=a[0],a})},function(a){return d[38].set("salt_partial_access_token",d[57]==null?"":d[57]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[29]).then(function(a){return a=a,d[58]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF9rZXlfc2FsdF9zY29wZQ=="),d[58]).then(function(a){return a=a,d[59]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[59]).then(function(a){return a=a,d[60]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[60]).then(function(a){return a=a,d[61]=a[0],a})},function(a){return d[38].set("salt_partial_attachment_index_key",d[61]==null?"":d[61]),d[1]!==void 0?c.nativeOperation(b("LSQplMarkEnd.nop"),c.i64.cast([0,637738637]),d[1],!0):c.resolve()},function(a){return d[62]=c.toJSON(d[38]),c.storedProcedure(b("LSIssueNewTask"),"encrypted_backups_attachment_upload",c.i64.cast([0,50012]),d[62],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):c.sequence([function(a){return d[29]="Missing backup_id for IssueAttachmentBackupTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ","",d[29]].join("")),d[28]=c.createArray(),void 0!==void 0?d[31]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",d[29],d[28],c.i64.cast([0,3]))},function(a){return d[30]=["LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",".","missing_backup_id"].join(""),d[1]!==void 0?d[30]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,637738637]),d[1],"error",d[30]):c.resolve():c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkEnd.nop"),c.i64.cast([0,637738637]),d[1],!1):c.resolve()}])):c.sequence([function(a){return d[28]="Missing device_id for IssueAttachmentBackupTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ","",d[28]].join("")),d[27]=c.createArray(),void 0!==void 0?d[30]=(d[27].push(void 0),d[27]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",d[28],d[27],c.i64.cast([0,3]))},function(a){return d[29]=["LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",".","missing_device_id"].join(""),d[1]!==void 0?d[29]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,637738637]),d[1],"error",d[29]):c.resolve():c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkEnd.nop"),c.i64.cast([0,637738637]),d[1],!1):c.resolve()}]):c.sequence([function(a){return d[28]="Missing ocmf_client_state_blob for IssueAttachmentBackupTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ","",d[28]].join("")),d[27]=c.createArray(),void 0!==void 0?d[30]=(d[27].push(void 0),d[27]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",d[28],d[27],c.i64.cast([0,3]))},function(a){return d[29]=["LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",".","missing_ocmf_client_state_blob"].join(""),d[1]!==void 0?d[29]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,637738637]),d[1],"error",d[29]):c.resolve():c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkEnd.nop"),c.i64.cast([0,637738637]),d[1],!1):c.resolve()}])},function(a){return d[21]=c.i64.of_float(Date.now()),d[22]=c.i64.random(),d[24]="Finishing execution. Execution time: ",d[25]=c.i64.to_string(c.i64.sub(d[21],d[0])),d[26]=" ms",d[23]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ",d[23],d[24],d[23],d[25],d[23],d[26]].join("")),c.i64.eq(c.i64.mod_(d[22],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[27]=",",d[28]=c.createArray(),void 0!==void 0?d[29]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",[d[24],d[27],d[25],d[27],d[26]].join(""),d[28],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state"];e.exports=a}),null);
__d("LSIssueAttachmentBackupTaskStoredProcedure",["LSIssueAttachmentBackupTask","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueAttachmentBackupTask"),e.deliveryObjectId,e.productType,e.mediaType,e.messageId,e.threadId,e.traceId,e.serverThreadKey);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBridgeUploadAttachmentHandler",["I64","LSFactory","LSIssueAttachmentBackupTaskStoredProcedure","LSRequestId","MAWEBFrontendQPLLogger","MAWEncryptedBackupUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","Promise","isInstamadilloEB"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e){var f;if(c("isInstamadilloEB")())return(i||(i=b("Promise"))).resolve();var g=(f=e.traceId)!=null?f:c("LSRequestId").generate();f=e.mediaType;return f==="document"?(i||(i=b("Promise"))).resolve():d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeUploadAttachmentHandler",function(a,f){var j=(h||(h=d("I64"))).to_string(f),k=d("MAWTimeUtils").isTimestampNewerThanXDays(e.ts,30);return d("MAWEncryptedBackupUtils").getBackupTenancy(a).then(function(f){var h=e.productType;if(f!=null&&k)if(g!=null){d("MAWEBFrontendQPLLogger").startFlowUploadAttachmentBackup({deliveryObjectId:e.deliveryObjectId,flow:"old",mediaType:e.mediaType,messageId:e.messageId,threadId:e.threadId,traceId:g});return c("LSIssueAttachmentBackupTaskStoredProcedure")(c("LSFactory")(a),{deliveryObjectId:e.deliveryObjectId,mediaType:e.mediaType,messageId:e.messageId,productType:h,serverThreadKey:j,threadId:e.threadId,traceId:g})}else return c("LSIssueAttachmentBackupTaskStoredProcedure")(c("LSFactory")(a),{deliveryObjectId:e.deliveryObjectId,mediaType:e.mediaType,messageId:e.messageId,productType:h,serverThreadKey:j,threadId:e.threadId});else{d("MAWEBFrontendQPLLogger").endFlowUploadAttachmentBackup(g,!1,"old");return(i||(i=b("Promise"))).resolve()}})})}g.call=a}),98);
__d("MAWBridgeUploadMessageByBatchHandler",["MAWBridgeTraceRecordCheckpointHandler","MAWBridgeUploadMessageHandler","MAWEBFrontendQPLLogger","Promise","QPLUserFlow","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b){a.forEach(function(a){a.uploadTrackingInstanceKey!=null&&d("MAWEBFrontendQPLLogger").addPointEBUploadTracking(a.uploadTrackingInstanceKey,b)})}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){i(e.messages,"upload_tracking_bridge_batch_handler");e.qpl.forEach(function(a){return c("QPLUserFlow").addPoint(a.event,a.action.name,{instanceKey:a.instanceKey,timestamp:a.timestamp})});e.checkPoint.forEach(function(b){return c("promiseDone")(d("MAWBridgeTraceRecordCheckpointHandler").call(a,b))});for(e of e.messages)yield d("MAWBridgeUploadMessageHandler").call(a,e);return(h||(h=b("Promise"))).resolve()});return j.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeXMAShareExpiredHandler",["MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,c,d){var e=String(d.xmaId);return a.attachments.get(c,d.msgId,e).then(function(f){if(f==null)return(h||(h=b("Promise"))).resolve();f=[f.defaultCtaId,f.attachmentCta1Id,f.attachmentCta2Id,f.attachmentCta3Id].filter(Boolean);f=f.map(function(b){return a.attachment_ctas["delete"](b)});return(h||(h=b("Promise"))).all(f).then(function(){return a.attachments["delete"](c,d.msgId,e)})})}function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeXMAShareExpiredHandler",function(a,c){return i(a,c,b)})}g.callWithoutWaitingForAnything=i;g.call=a}),98);
__d("MAWBridgeUIEventHandler",["EBLogger","MAWAbPropsClient","MAWBridgeAddMessageSearchResultHandler","MAWBridgeCallRestoreNativeOpHandler","MAWBridgeDeleteGroupInviteHandler","MAWBridgeDeleteMessagesHandler","MAWBridgeDeleteMessagesOfThreadHandler","MAWBridgeDeleteReactionHandler","MAWBridgeDropAllSecureThreadsHandler","MAWBridgeEditMsgHistoryAddedHandler","MAWBridgeEphemeralSettingsUpdatedForUIHandler","MAWBridgeFulfillRestorePromisePayloadHandler","MAWBridgeGroupInfoUpdatedHandler","MAWBridgeGroupInviteLoadedHandler","MAWBridgeGroupInviteUpdateHandler","MAWBridgeHandleCOPDigest","MAWBridgeMediaExpiredHandler","MAWBridgeMsgUpdatedHandler","MAWBridgeMsgsStartCountdownHandler","MAWBridgeNewMediaHandler","MAWBridgeNewMediaRangeHandler","MAWBridgeNewMsgHandler","MAWBridgeNewPollHandler","MAWBridgeNewReceiverFetchInfoHandler","MAWBridgeNewXMAHandler","MAWBridgeNoteReplyStartCountdownHandler","MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2","MAWBridgeOccamadilloVerifyThreadExistsHandler","MAWBridgeOneToOneMessageRequestLoadedHandler","MAWBridgeParticipantRemovedHandler","MAWBridgeParticipantsUpdatedHandler","MAWBridgeRavenActionMsgForUIHandler","MAWBridgeReactionUpsertHandler","MAWBridgeReceivedChatStateHandler","MAWBridgeReceivedReceiptHandler","MAWBridgeRefreshContactHandler","MAWBridgeRemoveMessageSearchResultHandler","MAWBridgeResignAttachmentCDNUrlHandler","MAWBridgeStartTraceHandler","MAWBridgeStoryReplyStartCountdownHandler","MAWBridgeSyncContacts","MAWBridgeThreadHiddenV2Handler","MAWBridgeThreadUpdatedHandler","MAWBridgeTraceRecordCheckpointHandler","MAWBridgeUIEventQueueQPLLogger","MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler","MAWBridgeUpdateClientRestoreStatus","MAWBridgeUpdateContactAsConnectedHandler","MAWBridgeUpdateE2EEMetadataParticipantsHandler","MAWBridgeUpdateThreadActivityHandler","MAWBridgeUpdateTraceHandler","MAWBridgeUploadAttachmentHandler","MAWBridgeUploadMessageByBatchHandler","MAWBridgeUploadMessageHandler","MAWBridgeXMAShareExpiredHandler","MAWBridgeXMAShareTombstonedHandler","MAWLoggerUtils","MAWMessageExpirationStorage","MWFBLogger","Promise","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime","emptyFunction","getErrorSafe","isArmadillo","isInstamadilloDYI","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=d("MWFBLogger").MWLogger().tags(["MAWBridgeUIEvent"]);function m(a,c,e){switch(e.tag){case"NewMsg":return d("MAWBridgeNewMsgHandler").call(c,e.value);case"MsgsStartCountdown":return d("MAWBridgeMsgsStartCountdownHandler").call(c,e.value);case"StoryReplyStartCountdown":return d("MAWBridgeStoryReplyStartCountdownHandler").call(c,e.value);case"NoteReplyStartCountdown":return d("MAWBridgeNoteReplyStartCountdownHandler").call(c,e.value);case"MsgClearCountdown":return(k||(k=b("Promise"))).resolve(d("MAWMessageExpirationStorage").clearMessageFromExpiration(e.value));case"DropAllSecureThreads":return d("MAWBridgeDropAllSecureThreadsHandler").call(c);case"VerifyThreadExists":var f=e.value;return d("MAWBridgeOccamadilloVerifyThreadExistsHandler").call(c,f);case"CreateE2EEMetadataThreadV2":return d("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2").call(c,e.value);case"EditMsgHistoryAdded":return d("MAWBridgeEditMsgHistoryAddedHandler").call(a,c,e.value);case"MsgUpdated":return d("MAWBridgeMsgUpdatedHandler").call(c,e.value);case"NewMedia":return d("MAWBridgeNewMediaHandler").call(c,e.value);case"NewMediaRange":return d("MAWBridgeNewMediaRangeHandler").call(c,e.value);case"MediaExpired":return d("MAWBridgeMediaExpiredHandler").call(c,e.value);case"XMAShareExpired":return d("MAWBridgeXMAShareExpiredHandler").call(c,e.value);case"NewXMA":return d("MAWBridgeNewXMAHandler").call(c,e.value);case"XMAShareTombstoned":return d("MAWBridgeXMAShareTombstonedHandler").call(c,e.value);case"ParticipantRemoved":return d("MAWBridgeParticipantRemovedHandler").call(c,e.value);case"UpdateE2EEMetadataParticipants":return d("MAWBridgeUpdateE2EEMetadataParticipantsHandler").call(c,e.value);case"ReceivedReceipt":return d("MAWBridgeReceivedReceiptHandler").call(c,e.value);case"ThreadUpdated":return d("MAWBridgeThreadUpdatedHandler").call(c,e.value);case"GroupInfoUpdated":return d("MAWBridgeGroupInfoUpdatedHandler").call(c,e.value);case"UpdateThreadActivity":return d("MAWBridgeUpdateThreadActivityHandler").call(c,e.value);case"StartTrace":return d("MAWBridgeStartTraceHandler").call(c,e.value);case"UpdateTrace":return d("MAWBridgeUpdateTraceHandler").call(c,e.value);case"ThreadHiddenV2":return d("MAWBridgeThreadHiddenV2Handler").call(c,e.value);case"SyncContacts":return d("MAWBridgeSyncContacts").call(c,e.value);case"ReceivedChatState":return d("MAWBridgeReceivedChatStateHandler").call(c,e.value);case"ClockSkewUpdated":return(k||(k=b("Promise"))).resolve(d("WATimeUtils").setClockSkew(e.value));case"ABPropsUpdated":l.warn("ABPropsUpdated has been deprecated. Please use the bridge with ABPropsUpdated");return(k||(k=b("Promise"))).resolve(d("MAWAbPropsClient").rewrite(e.value));case"COPDigestReceived":return d("MAWBridgeHandleCOPDigest").call(c,e.value);case"UpsertReaction":return d("MAWBridgeReactionUpsertHandler").call(c,e.value);case"DeleteReaction":return d("MAWBridgeDeleteReactionHandler").call(c,e.value);case"UploadMessage":return d("MAWBridgeUploadMessageHandler").call(c,e.value);case"UploadMessageByBatch":return d("MAWBridgeUploadMessageByBatchHandler").call(c,e.value);case"DeleteMessagesOfThread":return d("MAWBridgeDeleteMessagesOfThreadHandler").call(c,e.value);case"UploadAttachment":return d("MAWBridgeUploadAttachmentHandler").call(c,e.value);case"ResignAttachmentCDNUrl":return d("MAWBridgeResignAttachmentCDNUrlHandler").call(c,e.value);case"DeleteMessages":return d("MAWBridgeDeleteMessagesHandler").call(c,e.value);case"RestoreMessageBatch":d("EBLogger").EBLogger().tags(["labyrinth_dyi"]).WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Attempted to call the old DYI V1 flow"])));return(k||(k=b("Promise"))).resolve();case"OneToOneMessageRequestLoaded":return d("MAWBridgeOneToOneMessageRequestLoadedHandler").call(c,e.value);case"GroupInviteUpdate":return d("MAWBridgeGroupInviteUpdateHandler").call(c,e.value);case"UpdateDyiStatus":d("EBLogger").EBLogger().tags(["labyrinth_dyi"]).WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Attempted to call the old DYI V1 flow"])));return(k||(k=b("Promise"))).resolve();case"DeleteGroupInvite":return d("MAWBridgeDeleteGroupInviteHandler").call(c,e.value);case"TraceRecordCheckpoint":return d("MAWBridgeTraceRecordCheckpointHandler").call(c,e.value);case"ParticipantsUpdated":return d("MAWBridgeParticipantsUpdatedHandler").call(c,e.value);case"StartTraceWithTraceId":return(k||(k=b("Promise"))).resolve();case"UpdateClientRestoreStatus":return d("MAWBridgeUpdateClientRestoreStatus").call(c,e.value);case"NewMsgs":return d("MAWBridgeNewMsgHandler").bulkCall(c,e.value.msgs);case"UnArchivedSelfDeviceChangeAlerts":return d("MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler").call(c,e.value);case"EphemeralSettingsUpdatedForUI":return d("MAWBridgeEphemeralSettingsUpdatedForUIHandler").call(c,e.value);case"RavenActionUpdate":return d("MAWBridgeRavenActionMsgForUIHandler").call(c,e.value);case"GroupInviteLoaded":return d("MAWBridgeGroupInviteLoadedHandler").call(c,e.value);case"RemoveMessageSearchResult":return d("MAWBridgeRemoveMessageSearchResultHandler").call(c,e.value);case"AddMessageSearchResult":return d("MAWBridgeAddMessageSearchResultHandler").call(a,c,e.value);case"FulfillRestorePromise":return d("MAWBridgeFulfillRestorePromisePayloadHandler").call(e.value);case"UpdateContactAsConnected":return d("MAWBridgeUpdateContactAsConnectedHandler").call(c,e.value);case"RefreshContact":return d("MAWBridgeRefreshContactHandler").call(c,e.value);case"NewReceiverFetchInfo":return d("MAWBridgeNewReceiverFetchInfoHandler").call(c,e.value);case"RestoreNativeOp":return d("MAWBridgeCallRestoreNativeOpHandler").call(c,e.value);case"NewPoll":return d("MAWBridgeNewPollHandler").call(c,e.value);default:return(k||(k=b("Promise"))).resolve()}}function a(a,b){if(!c("isArmadillo")()&&!c("isInstamadilloDYI")()){l.mustfix("User is neither part of armadillo QE and dual send QE but somehow loaded this handler");return}if(!(b.length===1&&b[0].tag==="TraceRecordCheckpoint")){var d={};d=b.reduce(function(a,b){a[b.tag]=((b=a[b.tag])!=null?b:0)+1;return a},d);l.DEBUG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Handle UI Events: ",""])),JSON.stringify(d))}c("promiseDone")(n(a,b),c("emptyFunction"),function(a){l.catching(a).mustfix("[MAWBridgeUIEventHandler] Failed to handle UI events: %s",b.map(function(a){return a.tag}).join(", "))})}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var g=(yield a);a=d("MAWLoggerUtils").getInstanceKey();var h=e.map(function(a){return a.tag}),i="";d("MAWBridgeUIEventQueueQPLLogger").start(a,h);d("MAWBridgeUIEventQueueQPLLogger").addAnnotations(a,{"int":{queue_size:e.length}});var j;try{j=(yield g.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){for(var b=0;b<e.length;b++){var f=e[b];try{yield m(g,a,f)}catch(a){i=f.tag;return d("WAResultOrError").makeError(c("getErrorSafe")(a))}}return d("WAResultOrError").makeResult(!0)});return function(b){return a.apply(this,arguments)}}(),"readwrite","background",{events:e,type:"maw_ui_bridge"},f.id+":290"))}catch(a){j=d("WAResultOrError").makeError(c("getErrorSafe")(a))}!j.success?(d("MAWBridgeUIEventQueueQPLLogger").endFailure(a,i),l.catching(j.error).mustfix("MAWBridgeUIEventHandler] Did not commit UI events to DB, failed at %s, all events: %s",i,h.toString())):d("MAWBridgeUIEventQueueQPLLogger").endSuccess(a)});return o.apply(this,arguments)}function e(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){try{yield m(a,b,d)}catch(b){a=c("getErrorSafe")(b);l.catching(a).mustfix("[handleShimEvent] Failed to handle UI event: %s",d.tag);throw b}});return p.apply(this,arguments)}g.handleEvents=a;g.handleShimEvent=e}),98);
__d("toMsgrUserJid",["MAWJids"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=d("MAWJids").toUserJid}),98);
__d("MAWFetchContacts",["I64","LSContactTypeExact","LSIntEnum","MAWContactRelationshipType","ReQL","WAJids","asyncToGeneratorRuntime","requireDeferred","toMsgrUserJid"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("MAWFetchContacts");function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield j.load());b=(yield b());var e=new Set(a.map(function(a){return d("WAJids").extractUserId(a)}));return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.tables.contacts).filter(function(a){return e.has((h||(h=d("I64"))).to_string(a.id))})).then(function(a){return new Map(a.map(function(a){return[c("toMsgrUserJid")((h||(h=d("I64"))).to_string(a.id)),a]}))})});return l.apply(this,arguments)}function a(a){return k(a).then(function(a){var b=new Map();a.forEach(function(a,c){b.set(c,d("MAWContactRelationshipType").getContactRelationshipType(a))});return b})}function e(a){return k(a).then(function(a){var b=new Map();a.forEach(function(a,e){a=a.contactTypeExact!=null&&(h||(h=d("I64"))).equal(a.contactTypeExact,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").MESSENGER_ONLY_NOT_ALLOWED_ON_FB));b.set(e,a)});return b})}g.fetchContacts=k;g.fetchContactsRelationships=a;g.fetchContactsIsMsplit=e}),98);
__d("MAWSetupBridgeOfflineSnapshot",["InteractionTracingMetrics","MAWMIC","MWChatInteraction","MWFBLogger","WAOfflineUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=d("MWFBLogger").MWLogger().tags(["ServerRPC","Offline"]);function m(a){d("MAWMIC").addIntAnnotation("offlineQueueSize",a);var b=d("MWChatInteraction").get(d("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);b!=null&&c("InteractionTracingMetrics").addAnnotationInt(b,"offlineQueueSize",a)}a=function(a){return function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b.downloaded,e=b.expected,f=b.status;b=b.timestamp;switch(f){case d("WAOfflineUtils").WAClientInfraOfflineProgress.Initializing:l.DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Stats start: ",", messages: ",""])),e.count,e.message);m(e.count);a({tag:"InitOfflineQueueSyncStart",value:e.count});d("MAWMIC").addPoint("download_offline_queue_start",b);return;case d("WAOfflineUtils").WAClientInfraOfflineProgress.Processing:l.DEBUG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Progress: "," / ",", messages: "," / ",""])),c.count,e.count,c.message,e.message);a({tag:"InitOfflineQueueSyncProgress",value:c.count});return;case d("WAOfflineUtils").WAClientInfraOfflineProgress.Complete:l.DEBUG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Stats end: "," / ",", messages: "," / ",""])),c.count,e.count,c.message,e.message);d("MAWMIC").addIntAnnotation("offlineQueueDownloadedCount",c.count);a({tag:"InitOfflineQueueSyncProgress",value:e.count});d("MAWMIC").addPoint("download_offline_queue_end",b);return;case d("WAOfflineUtils").WAClientInfraOfflineProgress.Failed:l.DEBUG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["WA infra offline connection lost"])));d("MAWMIC").addPoint("download_offline_queue_failed",b);return}});return function(a){return c.apply(this,arguments)}}()};e=a;g["default"]=e}),98);
__d("MWWorkerOwnedDbKeychain",["Deferred","MAWCryptoConsts","MWFBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;c={accountKey:null,databaseEncryptionKeys:new Map(),dbReady:new(c("Deferred"))(),latestVersion:d("MAWCryptoConsts").VERSION};var i=babelHelpers["extends"]({},c),j="uninitialized",k=d("MWFBLogger").MWLogger().tags(["MWWorkerOwnedDbKeychain"]);function a(){return i}function b(a){k.DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["handleEARKeyChange"]))),j="initialized",i=a}function e(){return j==="initialized"}function f(){return i.latestVersion}g.getEARKey=a;g.handleEARKeyChange=b;g.isInitialised=e;g.getLatestVersion=f}),98);
__d("IGDSetupBridge",["DTSG","FBLogger","JSResourceForInteraction","LSDatabaseSingleton","LSGetLatestThreadIds.nop","LSInitSyncCompleteSubscription","LSPlatformGraphQLLightspeedRequest","LSPlatformGraphQLLightspeedRequestForIGD","MAWAbPropsClient","MAWBridgeReceivedChatStateHandler","MAWBridgeUIEventHandler","MAWCommonSetupBridge","MAWFetchContacts","MAWGetEphemeralSettings","MAWSetupBridgeOfflineSnapshot","MAWUnrecoverableDbErrors","MWWorkerOwnedDbKeychain","Promise","Run","WAExceededStorageQuota","WAResultOrError","asyncToGeneratorRuntime","cr:3411","emptyFunction","gkx","isInstamadillo","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(e=c("requireDeferred"))("ArmadilloCutoverClientFalcoEvent").__setRef("IGDSetupBridge"),k=e("IGDBridgeResignCdnUrlHandler").__setRef("IGDSetupBridge"),l=e("MAWBridgeUpdateDYIStatusV2").__setRef("IGDSetupBridge"),m=e("MAWSetupBridgeOfflineConsumer").__setRef("IGDSetupBridge"),n=(i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(d("LSInitSyncCompleteSubscription").use).then(function(){return(i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton}),o=function(a){j.loadImmediately(function(b){b=b.log;return b(function(){return{armadillo_thread_id:a.armadilloThreadId,domain:a.domain,event:a.event,event_details:a.eventDetails,open_thread_id:a.openThreadId,success:a.success,trace_id:a.traceId}})})},p=new Set(["StartTraceWithTraceId","TraceRecordCheckpoint"]),q=new Set(["ABPropsUpdated","ClockSkewUpdated","DropAllSecureThreads","LargeClockSkewValue","ReceivedChatState","UpdateMediaStatus"]);function a(a){var e=a.dispatch,g=a.logout,j=a.reregisterDevice,r=a.rotateCryptoAuthToken,s=a.worker;function t(){s.postMessage({type:"force-flush-data"})}d("Run").onUnload(t);d("Run").onBeforeUnload(t,!1);return d("MAWCommonSetupBridge").initBridge({customizeEventHandlers:{abPropsUpdated:function(a){d("MAWAbPropsClient").rewrite(a.abProps)},earKeyChange:function(a){d("MWWorkerOwnedDbKeychain").handleEARKeyChange(a)},executeGraphQLLightSpeedRequest:function(a){a=a.args;return c("gkx")("3889")?c("LSPlatformGraphQLLightspeedRequestForIGD").apply(void 0,a):c("LSPlatformGraphQLLightspeedRequest").apply(void 0,a)},getDTSGToken:function(){return(h||(h=b("Promise"))).resolve(d("DTSG").getToken())},getLSDBEphemeralSetting:function(a){return d("MAWGetEphemeralSettings").getEphemeralSetting(a.chatJid)},getLSDBLatestThreadIds:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton);return b.runInTransaction(function(b){return c("LSGetLatestThreadIds.nop")(b,0,"",a.numThreads,a.miActMappingFilteredThreads)},"readonly",void 0,void 0,f.id+":141")});function e(b){return a.apply(this,arguments)}return e}(),getLSDBUsersIsMsplit:function(a){return d("MAWFetchContacts").fetchContactsIsMsplit(a.users)},getLSDBUsersRelationships:function(a){return d("MAWFetchContacts").fetchContactsRelationships(a.users)},getMediaStorageResult:function(){return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeError({errorMessage:"getMediaStorageResult is not supported in IGD",errorName:"igd-unsupported"}))},getMinosEpochDataForUser:a=c("emptyFunction"),isDbMigrating:function(a){e({tag:"IsDbMigrating",value:!1})},logCutoverEvent:o,logout:g,offlineConsumerProgress:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return(yield m.load())(n,e).apply(void 0,arguments)});function c(){return a.apply(this,arguments)}return c}(),offlineSnapshot:c("MAWSetupBridgeOfflineSnapshot")(e),receivedChatState:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield n);yield c.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield d("MAWBridgeReceivedChatStateHandler").call(b,a)});return function(a){return c.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":182")});function c(b){return a.apply(this,arguments)}return c}(),reregisterDevice:j,resignCdnUrl:function(a){var b=a.deliveryObjectId,c=a.payload;return k.load().then(function(a){return a.call(c,b)})},rotateCryptoAuthToken:r,storageQuota:function(a){a=a.exceededStorageQuota;d("WAExceededStorageQuota").setExceededStorageQuota(a)},trackEbConsistency:function(){},uiUpdate:function(a){a=a.events;var e=[],f=a.filter(function(a){if(p.has(a.tag)){e.push(a);return!1}if(q.has(a.tag))return!1});e.length>0&&(b("cr:3411")==null||b("cr:3411").recordBridgeUIEvent(a),d("MAWBridgeUIEventHandler").handleEvents(n,a));if(f.length===0)return;c("isInstamadillo")()?c("FBLogger")("igd_web").warn("[Instamadillo] Unsupported invocation of UI Event Handler. Please deprecate UI Event Handler: %s",a.map(function(a){return a.tag}).join(", ")):c("FBLogger")("igd_web").warn("[IGD] Deprecating UIEventHandlers, please update LSDB directly for UI changes: %s",a.map(function(a){return a.tag}).join(", "))},unrecoverableDbError:function(a){a=a.error;return d("MAWUnrecoverableDbErrors").setError(a)},updateDYIStatus:function(a){var b=a.qplEvent,d=a.qplInstanceKeyE2E,e=a.status;c("promiseDone")(l.load().then(function(a){return a.call({qplEvent:b,qplInstanceKeyE2E:d,status:e})}))},updateEBLSInWokerStateInMainThread:a,updateMediaStatus:a,updateStateManagerStateInMainThread:a,uploadMessagesToBackupV2:function(){return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeError("gql_cancelled_instamadillo"))},uploadOpenMessages:function(a){var b=a.uploadPayloads;c("promiseDone")(c("JSResourceForInteraction")("IGDMessageUploadMutation").__setRef("IGDSetupBridge").load().then(function(a){return a.uploadOpenMessageOverGQL(b)}))},writeToMediaStorage:a},worker:s})}g.setupBridge=a}),98);
__d("MessengerWaitForEvent",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c,d){var e,f=d;return new(g||(g=b("Promise")))(function(b){f?e=function(){f.apply(this,arguments)&&b.apply(this,arguments)}:e=b,a==null||a.addEventListener==null||a.addEventListener(c,e)})["finally"](function(){a==null||a.removeEventListener==null||a.removeEventListener(c,e)})}f.waitForEvent=a}),66);
__d("LocalStorageMutex",["FBLogger","MessengerWaitForEvent","Promise","QPLUserFlow","emptyFunction","pageID","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null,j=1e3,k=c("qpl")._(1056847375,"584");a=function(){function a(a){var b=this,d=a.mutexKey,e=a.localTakeoverKey,f=a.log,g=a.logError,h=a.getStorage,i=a.setItemGuarded,k=a.mutexTimeoutMs;k=k===void 0?j:k;a=a.mutexTimeoutCallback;this.mutexFilter=function(a){if(a.key!==b.$1)return!1;a=a.newValue||"";return!a.includes(c("pageID"))};this.$1=d;this.$2=e;this.$5=h;this.$6=i;this.$3=f;this.$4=g;this.$7=k;this.$8=a}var e=a.prototype;e.init=function(){c("QPLUserFlow").start(k);this.$3("APPMUTEX - this tab is "+c("pageID"));var a=this.getMutex();if(a===c("pageID")){this.$3("APPMUTEX - WE ALREADY HAVE THE MUTEX LOCK WITHIN INIT");c("QPLUserFlow").endSuccess(k);return(h||(h=b("Promise"))).resolve(!0)}if(a!=null){this.$3("APPMUTEX - initiating localTAKEOVER");return this.localTakeover()}else{this.$3("APPMUTEX - NO1 ELSE IS ALIVE, GET THE MUTEX");a=this.$9(c("pageID"));var d=this.$10(c("pageID"));if(!a.success||!d.success){c("QPLUserFlow").addAnnotations(k,{bool:{setMutexResult:d.success,setTakeoverResult:a.success},string:{setMutexError:d.error,setTakeoverError:a.error}});c("QPLUserFlow").endFailure(k,"fail_to_set_takeover_or_mutex");return(h||(h=b("Promise"))).resolve(!1)}c("QPLUserFlow").endSuccess(k);return(h||(h=b("Promise"))).resolve(!0)}};e.localTakeover=function(){var a,e=this,f=this.$9(c("pageID"));if(!f.success){c("QPLUserFlow").addAnnotations(k,{string:{initTakeoverError:f.error}});c("QPLUserFlow").endFailure(k,"local_takeover_init_takeover_failure");return(h||(h=b("Promise"))).resolve(!1)}var g,i=function(){g!=null&&clearTimeout(g)};f=d("MessengerWaitForEvent").waitForEvent(window,"storage",this.mutexFilter);var l=(a=this.$7)!=null?a:j;return(h||(h=b("Promise"))).race([f,new h(function(a){g=setTimeout(function(){a()},l)}),this.$8?this.$8():new(h||(h=b("Promise")))(c("emptyFunction"))]).then(function(a){if(a==null){e.$3("AppMutex - Forcefully took the mutex and takeover lock");var b=e.$9(c("pageID")),d=e.$10(c("pageID"));if(!b.success||!d.success){c("QPLUserFlow").addAnnotations(k,{string:{setMutexError:d.error,setTakeoverError:b.error}});c("QPLUserFlow").endFailure(k,"local_takeover_forcefully_takeover_failure");return!1}c("QPLUserFlow").endSuccess(k);return!0}e.$3("APPMUTEX - GOT MUTEX STORAGE EVENT CHANGE FROM ANOTHER TAB");d=e.$11(a.newValue);if(!d&&e.hasTakeoverPermission()){e.$3("APPMUTEX - setting mutex on localtakeover");b=e.$10(c("pageID"));if(!b.success){c("QPLUserFlow").addAnnotations(k,{string:{setMutexError:b.error}});c("QPLUserFlow").endFailure(k,"local_takeover_set_mutex_failure");return!1}c("QPLUserFlow").endSuccess(k);return!0}else{e.hasTakeoverPermission()&&e.$12();c("QPLUserFlow").endFailure(k,"local_takeover_no_takeover_permission");return!1}}).then(function(a){i();return a})["catch"](function(a){i();e.$4("AppMutex - localTakeover error no permission - "+a);c("QPLUserFlow").endFailure(k,"local_takeover_general_failure");return!1})};e.onMutexDeath=function(){var a=this.getMutex();a!=null&&a===c("pageID")&&(this.$3("APPMUTEX - removing mutex on death"),this.$13(),this.hasTakeoverPermission()&&this.$12())};e.takeoverFilter=function(a){if(a.key!==this.$2)return!1;a=a.newValue||"";return!a.includes(c("pageID"))};e.$14=function(){if(!i){var a=this.$5();if(!a)throw c("FBLogger")("messenger_web").mustfixThrow("Could not get localStorage");i=a}return i};e.getMutex=function(){i=this.$14();return i.getItem(this.$1)};e.$10=function(a){i=this.$14();return this.$6(i,this.$1,a)};e.$13=function(){i=this.$14(),i.removeItem(this.$1)};e.getTakeover=function(){i=this.$14();return i.getItem(this.$2)};e.$9=function(a){i=this.$14();return this.$6(i,this.$2,a)};e.$12=function(){i=this.$14(),i.removeItem(this.$2)};e.$11=function(a){return a!=null?a:""};e.hasTakeoverPermission=function(){var a=this.getTakeover();return a!=null&&a===c("pageID")};return a}();g.THIS_TAB=c("pageID");g.LocalStorageMutex=a}),98);
__d("MAWAppMutex",["LocalStorageMutex","MAWLocalStorage","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h="armadillo_msgr_mutex",i="armadillo_msgr_local_takeover",j=null;function a(){j==null&&(j=new(d("LocalStorageMutex").LocalStorageMutex)({getStorage:d("MAWLocalStorage").getStorage,localTakeoverKey:i,log:function(a){d("WALogger").LOG([a])},logError:function(a){d("WALogger").ERROR([a])},mutexKey:h,setItemGuarded:d("MAWLocalStorage").setItemGuarded}));return j}g.MAW_MUTEX_KEY=h;g.MAW_LOCALTAKEOVER_KEY=i;g.use=a}),98);
__d("MAWCommonBackendSetup",["EBIsEbEnabled","FBLogger","MAWAppMutex","MAWInitError","MAWLocalStorage","MAWLoggerUtils","MAWSetupWorker","MAWVaultMaterialsStorage","MAWWorkerReboot","Promise","asyncToGeneratorRuntime","getErrorSafe","gkx","requireDeferredForDisplay","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferredForDisplay")("MAWMainThreadLogger").__setRef("MAWCommonBackendSetup"),j=function(a,c){if(c)return(h||(h=b("Promise"))).resolve(!0);else return a.measurePerformance("acquire_mutex",function(){return d("MAWAppMutex").use().init()})};function a(a,b,c,d,e,f){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k,l){yield a.measurePerformance("prepare_logger",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=i.load();(yield a).setupMainWaLogger()}));d("MAWLoggerUtils").initMessengerWebLogging();var m=d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker();m||(yield a.measurePerformance("detection_support",function(){if(!d("MAWLocalStorage").isLocalStorageAvailable())throw new(d("MAWInitError").MAWInitError)("localstorage_not_supported");return(h||(h=b("Promise"))).resolve()}));var n=a.measurePerformance("setup_vault_materials",function(){return d("MAWVaultMaterialsStorage").setupVaultMaterials()});m=(yield j(a,m));if(!m){a.logPoint("maw_appmutex_no_permission");throw new(d("MAWInitError").MAWInitError)("maw_appmutex_no_permission")}var o=(yield n),p;if(c("gkx")("1458"))try{p=(yield d("EBIsEbEnabled").isEBEnabled())}catch(b){m=c("getErrorSafe")(b).message;a.addStringAnnotation("eb_state_fetch_error",m);c("FBLogger")("wmi_eb").mustfix("Failed to get EB state: %s",m);p=void 0}else p=void 0;yield a.measurePerformance("setup_worker",function(){return d("MAWSetupWorker").getOrSetupWorker(o,e,f,g,k,l,p)["catch"](function(b){a.logPoint("reboot_worker_on_backend_setup_failure");a.addStringAnnotation("backend_setup_failure_reason",b.message);return d("MAWWorkerReboot").rebootWorker(o,e,f,g,"backend_setup_failure",l)["catch"](function(a){throw new(d("MAWInitError").MAWInitError)("worker_setup_error",a)})})})});return k.apply(this,arguments)}g.getMutexPermission=j;g.setupArmadilloBackend=a}),98);
__d("WADynamicRouterSync",["ExecutionEnvironment","Promise","WALogger","WAMapWithDefault","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=["toLastActiveClient"],l,m;function n(a,b){if(a==null)return;var c=a.toLastActiveClient;a=babelHelpers.objectWithoutPropertiesLoose(a,k);if(c===!0&&b!=null){return babelHelpers["extends"]({},a,{toClientId:(c=a.toClientId)!=null?c:b})}return a}a=function(){function a(){var a=this;this.$2=new Map();this.$4=new(d("WAMapWithDefault").MapWithDefault)(function(){return new Set()});this.$5=null;this.fireAndForget=function(b,c,d,e,f,g){e===void 0&&(e=!1),a.$3==null||a.$3(b,c,d),a.$4.get(b).add({route:c,arg:d,resolver:null,silentLog:e,eventCallbacks:f,opts:n(g,a.$5)}),a.$6(b,c)};this.sendAndReceive=function(c,d,e,f,g,h){f===void 0&&(f=!1);return new(m||(m=b("Promise")))(function(b){a.$3==null||a.$3(c,d,e),a.$4.get(c).add({route:d,arg:e,resolver:function(a){b(a)},silentLog:f,eventCallbacks:g,opts:n(h,a.$5)}),a.$6(c,d)})}}var e=a.prototype;e.setAckPayload=function(a){this.$1=a};e.getAckPayoad=function(){return this.$1};e.hasHandlerForNamespace=function(a){return this.$2.has(a)};e.getHandledNamespaces=function(){return Array.from(this.$2.keys())};e.setOnRouteCalled=function(a){this.$3=a};e.setNamespaceHandler=function(a,b){var c=this.$2,d=c.get(a);if(d===b)return;c.set(a,b);d==null&&this.$6(a)};e.$7=function(a,c){var e=a.route,f=a.arg,g=a.resolver,i=a.silentLog,j=a.eventCallbacks;a=a.opts;try{var k;this.$5=(k=a==null?void 0:a.fromClientId)!=null?k:this.$5;c(e,f,g,i,j,a)}catch(a){g==null||g((m||(m=b("Promise"))).reject(a)),d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Bridge handler: ",""])),a)}};e.$6=function(a,b){var e=this,f=this.$4.get(a),g=this.$2.get(a);if(g==null){var h=(l||(l=c("ExecutionEnvironment"))).isInWorker?"worker":"main-thread";d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["No handler for bridge with namespace: "," route: "," called in environment: ",""])),a,b,h);return}f.forEach(function(a){f["delete"](a),e.$7(a,g)})};e.setHandlers=function(a,b){function e(e,f,g,h,i,k){if(b[e]==null){d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose([""," is not defined for ",""])),e,a);throw c("err")(e+" is not defined for "+a)}h=b[e](f,k);g&&g(h)}this.setNamespaceHandler(a,e)};return a}();g.normaliseHandlerOptions=n;g.DynamicRouterSync=a}),98);
__d("shouldDisableWorkerOnAppsSubdomain",["qex","shouldHideChatOnAppsSubdomain"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("2119")===!0&&c("shouldHideChatOnAppsSubdomain")()}g["default"]=a}),98);
__d("useMWEncryptedBackupsProcessBackupIdsDeferred",["promiseDone","react","requireDeferred","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect,j=c("requireDeferred")("MWEncryptedBackupsProcessBackupIdsDEPRECATED").__setRef("useMWEncryptedBackupsProcessBackupIdsDeferred");function a(a){var b=c("useAsyncReStore")();i(function(){var d,e=!1;j.onReadyImmediately(function(f){c("promiseDone")(b,function(b){e||(d=f.subscribeToEncryptedBackupsRow(b,a))})});return function(){e=!0,d==null||d()}},[b,a])}g["default"]=a}),98);
__d("MAWCommonSetup",["EBMainThreadEBDBApiDeferred","EBMainThreadListeners","EBMinosCheckWasmFeatureSupport","ExecutionEnvironment","MAWBridgeFireAndForget","MAWCacheServiceDB","MAWCommonBackendSetup","MAWEncryptedBackupsStateManager","MAWInit","MAWInitError","MAWIsIDBOperational","MAWIssueNewUserVisibleErrors","MAWJobDefinitions","MAWLoggerUtils","MAWMIC","MAWStateContext.react","MAWUIJob","MAWWaitForBackendSetup","WABridge","WADynamicRouterSync","WAJobOrchestratorTypes","WALogger","asyncToGeneratorRuntime","cr:13007","cr:13747","cr:8498","getErrorSafe","justknobx","performance","promiseDone","react","requireDeferred","shouldDisableWorkerOnAppsSubdomain","useMWEncryptedBackupsProcessBackupIdsDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;e=k||d("react");var l=e.useContext,m=e.useEffect,n=c("requireDeferred")("FBLogger").__setRef("MAWCommonSetup"),o=b("cr:13747")||b("cr:8498"),p=b("cr:13007")==null?void 0:b("cr:13007").MAWInitialiseMAWDbInUI;c("requireDeferred")("MAWTimedJob").__setRef("MAWCommonSetup");var q=!1,r=function(){return(i||(i=c("performance"))).now()},s=function(a){d("MAWEncryptedBackupsStateManager").setEncryptedBackupsState(a),d("MAWBridgeFireAndForget").fireAndForget("backend","setEncryptedBackupsState",{newState:a})};function t(){d("MAWBridgeFireAndForget").fireAndForget("backend","resendEBLSInWorkerEbEnabledState")}function u(){d("MAWBridgeFireAndForget").fireAndForget("backend","resendWorkerStateManagerValuesToMainThread")}function v(){t(),u()}function a(a){d("MAWLoggerUtils").initMessengerWebLogging();var b=l(d("MAWStateContext.react").MAWDispatchContext),e=d("MAWIsIDBOperational").useIsIDBOperational();m(function(){e&&(j||(j=c("ExecutionEnvironment"))).isInBrowser&&c("promiseDone")(w(b,a))},[a,b,e]);m(function(){e&&c("promiseDone")(d("EBMainThreadListeners").initEBListeners())},[e]);c("useMWEncryptedBackupsProcessBackupIdsDeferred")(s);c("justknobx")._("4966")===!1&&v()}function w(a,b){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.logout,f=b.reregisterDevice,g=b.rotateCryptoAuthToken,i=b.setupBridge;if(q){void n.load().then(function(a){a("messenger_web").warn("Armadillo already setup - return")});return}if(c("shouldDisableWorkerOnAppsSubdomain")()){d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Armadillo is disabled on apps subdomain"])));return}q=!0;d("MAWMIC").startMAWMICFlow();d("MAWInit").MAWInit.start();(j||(j=c("ExecutionEnvironment"))).isInBrowser&&(yield d("MAWCacheServiceDB").getOrSetupMAWCacheDB());p!=null&&(j||(j=c("ExecutionEnvironment"))).isInBrowser&&c("promiseDone")(p(a),function(){},function(a){return n.load().then(function(b){return b("messenger_web").catching(a).mustfix("UI Dexie initialisation failed: %s",a.message)})});d("WABridge").makeWABridge(new(d("WADynamicRouterSync").DynamicRouterSync)());try{d("MAWIssueNewUserVisibleErrors").deleteAllErrors(),yield d("MAWCommonBackendSetup").setupArmadilloBackend(d("MAWInit").MAWInit,function(b){return i({dispatch:a,logout:e,reregisterDevice:f,rotateCryptoAuthToken:g,worker:b})},function(){a({tag:"InitOfflineQueueSyncComplete",value:void 0}),a({tag:"IsDbMigrating",value:!1}),c("justknobx")._("4966")===!0&&v(),d("MAWMIC").onConnectToExistingWorker()},function(){a({tag:"InitOfflineQueueSyncComplete",value:void 0}),a({tag:"IsDbMigrating",value:!1})},"mawInit",function(a){}),d("MAWUIJob").UIJobStarters.fireAndForget(d("MAWJobDefinitions").jobSerializers.handleFutureproofMsg({priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW})),d("MAWInit").MAWInit.addIntAnnotation("endTimePageRelative",r()),d("MAWInit").MAWInit.endSuccess()}catch(a){var k,l=c("getErrorSafe")(a);b=l instanceof d("MAWInitError").MAWInitError?l.message:"maw_init_failure";l.message=(k=l.message)!=null?k:"Unknown";k=l.message==="maw_appmutex_no_permission"&&document.visibilityState!=="visible";k?d("MAWInit").MAWInit.cancel(b,l):(d("MAWWaitForBackendSetup").rejectBackendSetup(l),d("MAWInit").MAWInit.fail(b,l));d("MAWIssueNewUserVisibleErrors").issueError(d("MAWIssueNewUserVisibleErrors").MAWGeneralErrorMsgBody,d("MAWIssueNewUserVisibleErrors").MAWGeneralErrorMsgTitle,d("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER,l.message);l&&void n.load().then(function(a){a("messenger_web").catching(l).mustfix("MAW backend setup failed -- %s",l.message)});throw l}void d("EBMainThreadEBDBApiDeferred").startListeningDeviceRegistrations();k=(yield d("EBMinosCheckWasmFeatureSupport").checkWasmFeatureSupport());o!=null&&k&&void o.initializeMinosDb()});return x.apply(this,arguments)}g.useArmadillo=a}),98);
__d("MAWOccamadilloOnMutexChange",["I64","LSDefaultSyncGroups","LSIntEnum","LSSyncGroupsUtils","Promise","WALogger","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a){var c=d("LSDefaultSyncGroups").e2eeMetadataSyncGroup;if(c!=null)return a.sync_groups.put(babelHelpers["extends"]({},d("LSSyncGroupsUtils").defaultSyncGroup,{groupId:(k||(k=d("LSIntEnum"))).ofNumber(c.groupId)}));else return(i||(i=b("Promise"))).resolve()}function m(a){return a.network_requests.put({epochId:void 0,failureCount:(j||(j=d("I64"))).zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:j.zero,lastSyncRequestTimestampMs:j.zero,networkTaskIdentifier:void 0,syncDatabaseId:(k||(k=d("LSIntEnum"))).ofNumber(95),taskQueueName:""})}function a(a){d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Resetting sync cursor and network request"]))),c("promiseDone")(a.runInTransaction(function(a){return(i||(i=b("Promise"))).all([l(a),m(a)])},"readwrite",void 0,void 0,f.id+":53"))}g.onOccamadilloMutexChange=a}),98);
__d("MAWReinit",["ExecutionEnvironment","MAWCurrentUser","QPLUserFlow","QuickPerformanceLogger","WAGetStorageQplAnnotations","asyncToGeneratorRuntime","gkx","qpl","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("qpl")._(25310984,"169");function a(a){var e=a!=null?{instanceKey:a}:void 0,f=!1,g=!1;function k(){if(g)return;g=!0;c("QPLUserFlow").start(j,babelHelpers["extends"]({cancelOnUnload:!0,onFlowTimeout:function(){f=!0},timeoutInMs:(h||(h=c("ExecutionEnvironment"))).canUseDOM?6e4:0},e));void d("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(a){c("QPLUserFlow").addAnnotations(j,a)});t()}function l(a){if(!g||f)return;t();c("QPLUserFlow").addPoint(j,a,e)}function m(a,b){var d;if(!g||f)return;c("QPLUserFlow").addAnnotations(j,{bool:(d={},d[a]=b,d)})}function n(a,b){var d;if(!g||f)return;c("QPLUserFlow").addAnnotations(j,{string:(d={},d[a]=b,d)})}function o(a,b){var d;if(!g||f)return;c("QPLUserFlow").addAnnotations(j,{string_array:(d={},d[a]=b,d)})}function p(a,b){var d;if(!g||f)return;c("QPLUserFlow").addAnnotations(j,{"int":(d={},d[a]=b,d)})}function q(a){t(),f=!0,c("QPLUserFlow").addAnnotations(j,{string:{failReason:a}},e),c("QPLUserFlow").endFailure(j,"maw_init_fail",e),s=!1}function r(a){t(),f=!0,s=!1,c("QPLUserFlow").addAnnotations(j,{string:{dropReason:a}},e),(i||(i=c("QuickPerformanceLogger"))).markerDrop(j)}var s=!1;function t(){if(s)return;s=!0;c("QPLUserFlow").addAnnotations(j,{bool:{armadillo_init_sync_api_improvements:c("gkx")("24025"),isArmadilloPublicLaunchUser:c("gkx")("23405"),isTlcPublicUser:d("MAWCurrentUser").isTlcPublicUser(),useSharedWorker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()}})}function u(a){t(),f=!0,c("QPLUserFlow").addAnnotations(j,{string:{cancelReason:a}},e),c("QPLUserFlow").endCancel(j,e),s=!1}function v(){t(),f=!0,c("QPLUserFlow").endSuccess(j,e),s=!1}function w(a,b){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a+"_start";a=a+"_end";l(c);c=(yield b());l(a);return c});return x.apply(this,arguments)}return{addBoolAnnotation:m,addIntAnnotation:p,addStringAnnotation:n,addStringArrayAnnotation:o,cancel:u,drop:r,endSuccess:v,fail:q,logPoint:l,measurePerformance:w,start:k}}g.getMAWReinit=a}),98);
__d("MAWReinitWorker",["MAWCommonBackendSetup","MAWOccamadilloOnMutexChange","MAWReinit","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.allTablesPersisted,c=a.db,e=a.dispatch,f=a.dispatchClearEphemeralSettings,g=a.instanceKey,h=a.logout,i=a.reregisterDevice,j=a.rotateCryptoAuthToken,k=a.setupBridge;a=a.workerCreateReason;g=d("MAWReinit").getMAWReinit(g);g.start();var l=function(){e({tag:"InitOfflineQueueSyncComplete",value:void 0})};yield d("MAWCommonBackendSetup").setupArmadilloBackend(g,function(a){a=k({dispatch:e,logout:h,reregisterDevice:i,rotateCryptoAuthToken:j,worker:a});b||d("MAWOccamadilloOnMutexChange").onOccamadilloMutexChange(c);return a},l,l,a,function(a){});g.endSuccess();f()});return h.apply(this,arguments)}g["default"]=a}),98);
__d("MAWSetupMutex",["LocalStorageMutex","MAWAppMutex","MAWBridge","MAWInit","MAWIssueNewUserVisibleErrors","MAWLocalStorage","MAWMIC","MAWReinitWorker","MAWSetupWorker","MAWStateContext.react","MAWWaitForBackendSetup","MAWWebWorkerSingleton","MWFBLogger","QPLUserFlow","Run","asyncToGeneratorRuntime","isInstamadillo","promiseDone","qpl","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.useCallback,k=e.useEffect,l=e.useMemo,m=d("MWFBLogger").MWLogger().tags(["MAWInit"]),n=!1,o=0;function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(document.visibilityState!=="visible")return!1;var b=window.indexedDB!=null,c=d("MAWLocalStorage").isLocalStorageAvailable();if(a){m.debug("AppMutex - Shouldn't reinitialize, worker already exists");return!1}return!b||!c?!1:!0});return q.apply(this,arguments)}function a(a,e){var f=a.logout,g=a.reregisterDevice,i=a.rotateCryptoAuthToken,q=a.setupBridge,r=l(function(){return d("MAWAppMutex").use()},[]),s=(h||(h=c("useReStore")))(),t=d("MAWStateContext.react").useDispatchClearEphemeralSettings(),u=s.persistenceTypes.includes("indexeddb"),v=j(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=r.takeoverFilter(a);if(!b||a.newValue===d("LocalStorageMutex").THIS_TAB||a.newValue==="")return;!u&&!c("isInstamadillo")()&&d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"DropAllSecureThreads",value:void 0}]});yield d("MAWSetupWorker").terminateDedicatedWorker("MAWSetupMutexV2:handleStoreChange");d("MAWWaitForBackendSetup").resetBackendSetup();d("MAWMIC").cancel("workerMutexLost");d("MAWInit").MAWInit.cancel("workerMutexLost");r.onMutexDeath()});return function(b){return a.apply(this,arguments)}}(),[r,u]),w=j(function(){r.onMutexDeath(),c("promiseDone")(d("MAWSetupWorker").terminateDedicatedWorker("MAWSetupMutexV2:handleUnload"))},[r]),x=j(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("MAWWebWorkerSingleton").doesWorkerExist());a=(yield p(a));if(!a||n)return;n=!0;o++;try{yield c("MAWReinitWorker")({allTablesPersisted:u,db:s,dispatch:e,dispatchClearEphemeralSettings:t,instanceKey:o,logout:f,reregisterDevice:g,rotateCryptoAuthToken:i,setupBridge:q,workerCreateReason:"mawReinitSetupMutex"}),d("MAWIssueNewUserVisibleErrors").deleteUserVisibleErrorByJSErrorMessage("maw_appmutex_no_permission")}catch(a){m.catching(a).mustfix("AppMutex - failed to reinitialize worker"),c("QPLUserFlow").endFailure(c("qpl")._(25310984,"169"),"failed_to_reinitialize_worker",{annotations:{string:{error:a.message.concat(": ",a.error)}},error:a,instanceKey:o})}finally{n=!1}}),[u,s,e,t,f,g,i,q]);k(function(){window.addEventListener("storage",v);var a=d("Run").onBeforeUnload(w,!1),b=d("Run").onUnload(w);window.addEventListener("visibilitychange",x);return function(){window.removeEventListener("storage",v),a.remove(),b.remove(),window.removeEventListener("visibilitychange",x)}},[v,w,x])}g.useMutex=a}),98);
__d("MAWSetupMutex.react",["MAWSetupMutex"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.dispatch;a.environment;a.fbId;a=a.platformSetupUtils;d("MAWSetupMutex").useMutex(a,b);return null}g["default"]=a}),98);
__d("LSScheduleOccamThreadsIntegrityCheckerStoredProcedure",["LSScheduleOccamThreadsIntegrityChecker","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e===void 0&&(e={});a=a.storedProcedure(c("LSScheduleOccamThreadsIntegrityChecker"),e.delayMs,e.maxThreadCount);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MWChatFetchThreadMessageCounts",["asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";function a(a){return g.apply(this,arguments)}function g(){g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return{}});return g.apply(this,arguments)}function c(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return 0});return h.apply(this,arguments)}f.fetchArmadilloThreadMessageCounts=a;f.fetchArmadilloThreadMessageCount=c}),66);
__d("globalCryptoSubtle",[],(function(a,b,c,d,e,f){"use strict";b=a.crypto.subtle;c=b;f["default"]=c}),66);
__d("useDataLossStatisticsStorageListener",["LSDatabaseSingleton","MWChatFetchThreadMessageCounts","Visibility","WebStorage","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(i||d("react")).useEffect,l="armadillo_msgr_data_loss_stats";function a(){k(function(){var a;window.setTimeout(function(){a=c("Visibility").addListener(c("Visibility").HIDDEN,function(){c("promiseDone")((j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(a){return d("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCounts(a).then(function(a){(h||(h=c("WebStorage"))).setItemGuarded(h.getLocalStorage(),l,JSON.stringify(a))})}))})},3e4);return function(){var b;(b=a)==null||b.remove()}},[])}g.DATA_LOSS_STATISTICS_STORAGE_KEY=l;g.useDataLossStatisticsStorageListener=a}),98);
__d("MWChatDataLossCheckerUtil",["FBLogger","I64","MWChatFetchThreadMessageCounts","Promise","QuickPerformanceLogger","WebStorage","asyncToGeneratorRuntime","globalCryptoSubtle","promiseDone","qpl","useDataLossStatisticsStorageListener"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a){a=Array.from(new Uint8Array(a));return a.map(function(a){return a.toString(16).padStart(2,"0")}).join("")}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{var b=new TextEncoder();b=b.encode(a).buffer;a=(yield c("globalCryptoSubtle").digest("SHA-256",b));return l(a)}catch(a){return a}});return n.apply(this,arguments)}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.currentIDBCnt,d=a.currentMsgCnt,e=a.logThreadId,f=a.prevMsgCnt,g=a.qplEvent;a=a.threadId;if(e!=null&&e){e=(yield m(a));b!=null?((j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(g),j.markerAnnotate(g,{"int":{current_idb_count:b,current_msg_count:d,prev_msg_count:f},string:{encrypted_threadId:e}}),j.markerEnd(g,2)):((j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(g),j.markerAnnotate(g,{"int":{current_msg_count:d,prev_msg_count:f},string:{encrypted_threadId:e}}),j.markerEnd(g,2))}else b!=null?((j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(g),j.markerAnnotate(g,{"int":{current_idb_count:b,current_msg_count:d,prev_msg_count:f}}),j.markerEnd(g,2)):((j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(g),j.markerAnnotate(g,{"int":{current_msg_count:d,prev_msg_count:f}}),j.markerEnd(g,2))});return p.apply(this,arguments)}function q(a){var b=a.currentMsgCnt,c=a.logThreadId,d=a.prevMsgCnt,e=a.qplEvent;a=a.threadId;return o({currentMsgCnt:b,logThreadId:c,prevMsgCnt:d,qplEvent:e,threadId:a})}function a(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{a=(yield d("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCount(a,b));var e=(k||(k=c("WebStorage"))).getAllowlistedKeyFromLocalStorage(d("useDataLossStatisticsStorageListener").DATA_LOSS_STATISTICS_STORAGE_KEY);if(e==null)return{isThreadMissingMessages:!1};e=JSON.parse(e);b=(e=e[(i||(i=d("I64"))).to_string(b)])!=null?e:null;if(b==null)return{isThreadMissingMessages:!1};return b>0&&a===0?{currCount:a,isThreadMissingMessages:!0,prevCount:b}:{isThreadMissingMessages:!1}}catch(a){c("FBLogger")("labyrinth").catching(a).warn("Failed to check for data loss");return{isThreadMissingMessages:!1}}});return r.apply(this,arguments)}function e(a){a=d("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCounts(a);a.then(function(a){var e=(k||(k=c("WebStorage"))).getAllowlistedKeyFromLocalStorage(d("useDataLossStatisticsStorageListener").DATA_LOSS_STATISTICS_STORAGE_KEY);if(e==null)return(h||(h=b("Promise"))).resolve(null);e=JSON.parse(e);return(h||(h=b("Promise"))).resolve({current:a,previous:e})}).then(function(a){if(a==null)return(h||(h=b("Promise"))).resolve();var c=a.current;a=a.previous;return s(a,c)})["catch"](function(a){return c("FBLogger")("labyrinth").catching(a).warn("Failed to check for data loss")});return a.then(function(){})}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d){var e=[];for(var f in a)Object.prototype.hasOwnProperty.call(d,f)&&e.push(f);f=[];for(var g=0;g<e.length;g++){var i=e[g],j={currentMsgCnt:d[i],prevMsgCnt:a[i],threadId:i};a[i]>0&&d[i]===0?(f.push(q(babelHelpers["extends"]({},j,{qplEvent:c("qpl")._(717553665,"1183")}))),f.push(q(babelHelpers["extends"]({},j,{logThreadId:!0,qplEvent:c("qpl")._(717562243,"1358")})))):(f.push(q(babelHelpers["extends"]({},j,{qplEvent:c("qpl")._(717553666,"1184")}))),f.push(q(babelHelpers["extends"]({},j,{logThreadId:!0,qplEvent:c("qpl")._(717556541,"1361")}))))}yield (h||(h=b("Promise"))).all(f)});return t.apply(this,arguments)}function f(a){var b=function(b){c("promiseDone")(m(b).then(function(d){(j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(c("qpl")._(717567419,"1383")),j.markerAnnotate(c("qpl")._(717567419,"1383"),{string:{encryptedThreadId:d,msg_count:a[b].toString()}}),j.markerEnd(c("qpl")._(717567419,"1383"),2)}))};for(var d in a)b(d)}g.qplLog=q;g.checkIsThreadMissingMessages=a;g.fetchCountsAndLogDataLoss=e;g.logThreadCompleteDataLoss=s;g.logLocalStatistics=f}),98);
__d("useOnMawSetupComplete.react",["emptyFunction","promiseDone","react","waitForMAWMIC"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a,b,e){b===void 0&&(b=c("emptyFunction")),i(function(){var e=!1;c("promiseDone")(d("waitForMAWMIC").promise.then(function(){if(e)return;a()})["catch"](function(){if(e)return;b()}));return function(){e=!0}},e)}g.useOnMawSetupComplete=a}),98);
__d("useDataLossChecker",["FBLogger","I64","LSDatabaseSingleton","LSFactory","LSScheduleOccamThreadsIntegrityCheckerStoredProcedure","MWChatDataLossCheckerUtil","asyncToGeneratorRuntime","gkx","justknobx","promiseDone","useDataLossStatisticsStorageListener","useOnMawSetupComplete.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){d("useDataLossStatisticsStorageListener").useDataLossStatisticsStorageListener(),d("useOnMawSetupComplete.react").useOnMawSetupComplete(function(){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);yield d("MWChatDataLossCheckerUtil").fetchCountsAndLogDataLoss(a)})()),j()},j(),[])}function j(){try{var a=c("gkx")("24061"),e=c("justknobx")._("1683");a&&e&&c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);return a.runInTransaction(function(a){return c("LSScheduleOccamThreadsIntegrityCheckerStoredProcedure")(c("LSFactory")(a),{delayMs:(i||(i=d("I64"))).of_int32(6e4),maxThreadCount:i.of_int32(20)})},"readonly",void 0,void 0,f.id+":61")})())}catch(a){c("FBLogger")("wmi_eb").warn("Error running thread integrity checker",a)}}g["default"]=a}),98);
__d("useLegacyUserWatchdog",["MAWIssueNewUserVisibleErrors","clearTimeout","react","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;b=24*60*60*1e3;var j=5*b;function a(){i(function(){var a=c("setTimeout")(function(){var a;(a=d("MAWIssueNewUserVisibleErrors")).issueError(a.MAWLegacyUserErrorMsgBody,a.MAWLegacyUserErrorMsgTitle,a.MAWUserVisibleErrorPresentationType.BANNER)},j);return function(){return c("clearTimeout")(a)}},void 0)}g["default"]=a}),98);
__d("useMAWReregisterDeviceOnError",["FBLogger","LSPersistedDbGating","MAWEBSwitch","MAWIssueNewUserVisibleErrors","MAWLoggerUtils","MAWReinitWorker","MAWSetupWorker","MAWStateContext.react","MAWWaitForBackendSetup","MWEncryptedBackupsInitializeRestoreDeferred","ODS","WAOdsEnums","WMIWABridgeApi","asyncToGeneratorRuntime","emptyFunction","promiseDone","react","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=i||d("react");var k=e.useCallback,l=e.useContext,m=!1,n=typeof window!=="undefined"?window:self;function o(){m=!0,c("promiseDone")(d("MAWSetupWorker").terminateWorkerPermanently(),function(){(j||(j=d("ODS"))).bumpEntityKey(3185,"armadillo_forced_reregister_fail",n.location.hostname),j.bumpEntityKey(3185,d("WAOdsEnums").Entity.WA_REREGISTRATION,"reregister_fail_logout"),d("MAWIssueNewUserVisibleErrors").issueError(d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgBody,d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgTitle,d("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER)})}function a(a){var e=a.rotateCryptoAuthToken,f=a.setupBridge,g=c("useAsyncReStore")(),i=d("MAWStateContext.react").useDispatchClearEphemeralSettings(),p=l(d("MAWStateContext.react").MAWDispatchContext);return k(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(m)return;(j||(j=d("ODS"))).bumpEntityKey(3185,"armadillo_forced_deregister",n.location.hostname);yield c("WMIWABridgeApi").removeCurrentDevice();yield d("MAWSetupWorker").terminateWorker("useMAWReregisterDeviceOnError");d("MAWWaitForBackendSetup").resetBackendSetup();try{var a=(yield g);(j||(j=d("ODS"))).bumpEntityKey(3185,d("WAOdsEnums").Entity.WA_REREGISTRATION,"reinit_worker");yield c("MAWReinitWorker")({allTablesPersisted:d("LSPersistedDbGating").allTablesPersisted,db:a,dispatch:p,dispatchClearEphemeralSettings:i,logout:o,reregisterDevice:o,rotateCryptoAuthToken:e,setupBridge:f,workerCreateReason:"mawReinitReregDevice"});c("MAWEBSwitch").isEnabled()&&((j||(j=d("ODS"))).bumpEntityKey(3185,d("WAOdsEnums").Entity.WA_REREGISTRATION,"eb_initial_restore"),yield d("MWEncryptedBackupsInitializeRestoreDeferred").encryptedBackupsInitializeRestoreDeferred({db:a,onFailure:c("emptyFunction"),onSuccess:c("emptyFunction")}))}catch(b){d("MAWWaitForBackendSetup").rejectBackendSetup(b);a=b.description||b.message||b;c("FBLogger")("wmi_wa").tags([d("MAWLoggerUtils").Tag.DeviceRegistration,d("MAWLoggerUtils").Tag.LogoutHandler,d("MAWLoggerUtils").Tag.WorkerSetup,d("MAWLoggerUtils").Tag.MAWWorker,d("MAWLoggerUtils").Tag.MAWInit]).catching(b).MUSTFIX(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Unable to reinit worker: ",""])),a);(j||(j=d("ODS"))).bumpEntityKey(3185,d("WAOdsEnums").Entity.WA_REREGISTRATION,"reinit_worker_fail.${message}");d("MAWIssueNewUserVisibleErrors").issueError(d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgBody,d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgTitle,d("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER)}}),[g,p,i,e,f])}g["default"]=a}),98);
__d("useStorageUsageMetricsLogger",["cr:20551","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(){i(function(){void (b("cr:20551")==null?void 0:b("cr:20551").logMAWDBUsageMetrics())},[])}g["default"]=a}),98);
__d("MAWSetupImpl.react",["BaseHeadingContext","CometRelay","MAWCommonSetup","MAWCryptoAuthToken","MAWSetupMutex.react","MAWStateContext.react","cr:6159","cr:6160","cr:8800","promiseDone","react","shouldUseMAWSharedWorker","useDataLossChecker","useLegacyUserWatchdog","useMAWReregisterDeviceOnError","useStorageUsageMetricsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;var j=e.useCallback,k=e.useContext,l=e.useMemo;window.XPlatTesting=b("cr:6159");window.XPlatTestingGroups=b("cr:6160");window.XPlatMockServer=b("cr:8800");function a(a){var b=a.children,e=a.fbid,f=a.logout,g=a.setupBridge;a=k(d("MAWStateContext.react").MAWDispatchContext);var h=d("CometRelay").useRelayEnvironment(),m=j(function(){return d("MAWCryptoAuthToken").fetchFreshCAT(h)},[h]),n=c("useMAWReregisterDeviceOnError")({rotateCryptoAuthToken:m,setupBridge:g}),o=l(function(){return{logout:f!=null?f:function(){return c("promiseDone")(n())},reregisterDevice:function(){return c("promiseDone")(n())},rotateCryptoAuthToken:m,setupBridge:g}},[m,f,n,g]);d("MAWCommonSetup").useArmadillo(o);c("useLegacyUserWatchdog")();c("useDataLossChecker")();c("useStorageUsageMetricsLogger")();var p=k(c("BaseHeadingContext")),q=!d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker();return i.jsxs(c("BaseHeadingContext").Provider,{value:p+1,children:[b,q?i.jsx(c("MAWSetupMutex.react"),{dispatch:a,environment:h,fbId:e,platformSetupUtils:o}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWBridgeInitOfflineQueueSyncStartHandler",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MessengerLogHistory").__setRef("MAWBridgeInitOfflineQueueSyncStartHandler");function a(){h.onReady(function(a){a=a.getInstance("maw_setup");a.debug("Init Offline Queue Sync Start")})}g.call=a}),98);
__d("MAWDeviceChangeState-resolver",[],(function(a,b,c,d,e,f){"use strict";var g=0,h=[],i={getDeviceAlertCount:function(){return g},subscribe:function(a){h.push(a);return function(){h=h.filter(function(b){return b!==a})}}};function a(a){g!==a&&(g=a,h.forEach(function(a){return a()}))}function b(){return{read:function(){return i.getDeviceAlertCount()},subscribe:function(a){return i.subscribe(a)}}}f.updateDeviceCount=a;f.deviceAlertCount=b}),66);
__d("MAWStateContextProvider.react",["MAWBridgeInitOfflineQueueSyncCompleteHandler","MAWBridgeInitOfflineQueueSyncStartHandler","MAWDeviceChangeState-resolver","MAWOfflineQueueThreadStatus","MAWSharedProtocolQueueConst","MAWStateContext.react","cr:19624","gkx","react","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;var k=e.useCallback,l=e.useEffect,m=e.useMemo,n=e.useReducer,o=e.useTransition,p=(e=c("gkx")("12254"))!=null?e:!1,q=(e=c("gkx")("12254"))!=null?e:!1,r=(e=c("gkx")("12254"))!=null?e:!1,s=(e=c("gkx")("12254"))!=null?e:!1,t=function(a,b){switch(b.tag){case"OptimisticSendMessage":var c;return p?a:babelHelpers["extends"]({},a,{messageLatencies:babelHelpers["extends"]({},a.messageLatencies,(c={},c[b.optimisticMsgId]={sent:b.timestamp},c))});case"NewMsg":case"MsgUpdated":var e,f;if(p)return a;c=b.value.ack;var g=b.value.msgId;e=(e=b.value.offlineMsg)==null?void 0:e.msgId;e!=null&&a.messageLatencies[e]!=null&&(a.messageLatencies[g]=a.messageLatencies[e],delete a.messageLatencies[e]);e=a.messageLatencies[g];if((e==null?void 0:e.sent)!=null&&(e==null?void 0:e.acked)!=null)return a;e=(e==null?void 0:e.sent)||Date.now();c=c!==0?Date.now():void 0;return babelHelpers["extends"]({},a,{messageLatencies:babelHelpers["extends"]({},a.messageLatencies,(f={},f[g]={acked:c,sent:e},f))});case"InitOfflineQueueSyncProgress":g=b.value;return babelHelpers["extends"]({},a,{offlineQueueProgressDownloaded:g});case"InitOfflineQueueConsumerSyncProgress":c=b.value;e=c.chatJidStatus;f=c.processed;g=a.offlineQueueThreadStatus||{};c=d("MAWOfflineQueueThreadStatus").calculateOfflineQueueThreadStatus(e,g);return babelHelpers["extends"]({},a,{offlineQueueProgressProcessed:f,offlineQueueThreadStatus:c});case"InitOfflineQueueSyncStart":d("MAWBridgeInitOfflineQueueSyncStartHandler").call();e=b.value;return babelHelpers["extends"]({},a,{offlineQueueCount:e});case"InitOfflineQueueSyncComplete":d("MAWBridgeInitOfflineQueueSyncCompleteHandler").call();g=b.value;f=a.offlineQueueThreadStatus||{};c=d("MAWOfflineQueueThreadStatus").calculateOfflineQueueThreadStatus(g,f);return babelHelpers["extends"]({},a,{offlineQueueSyncState:d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete,offlineQueueThreadStatus:c});case"UnArchivedSelfDeviceChangeAlerts":e=b.value;return babelHelpers["extends"]({},a,{unArchivedSelfDeviceChangeAlerts:e});case"EphemeralSettingsUpdatedForUI":if(r)return a;g=b.value;f=g.chatJid;c=g.ephemeralSettingArgs;e=c.ephemeralExpirationInSec;g=c.ephemeralLastUpdatedOrSetTimestamp;c=f;return babelHelpers["extends"]({},a,{ephemeralSettings:babelHelpers["extends"]({},a.ephemeralSettings,(f={},f[c]={ephemeralExpirationInSec:e,ephemeralLastUpdatedOrSetTimestamp:g},f))});case"ClearEphemeralSettings":return r?a:babelHelpers["extends"]({},a,{ephemeralSettings:{}});case"NewXMA":case"NewXMAs":return a;case"SetIsMAWDBinUILoaded":return q?a:babelHelpers["extends"]({},a,{isMAWDBinUILoaded:!0});case"UpdateEBState":return babelHelpers["extends"]({},a,{ebState:b.value.newState});case"UpdateWorkerState":return babelHelpers["extends"]({},a,{workerState:b.value.newState})}return a},u=function(a){if(b("cr:19624")==null)return!1;if(a.tag==="InitOfflineQueueSyncProgress"){var c=a.value;b("cr:19624").initOfflineQueueSyncProgress(c);return!0}if(a.tag==="InitOfflineQueueConsumerSyncProgress"){c=a.value;var e=c.chatJidStatus;c=c.processed;b("cr:19624").initOfflineQueueConsumerSyncProgress(c,e);return!0}if(a.tag==="InitOfflineQueueSyncStart"){d("MAWBridgeInitOfflineQueueSyncStartHandler").call();c=a.value;b("cr:19624").initOfflineQueueSyncStart(c);return!0}if(a.tag==="InitOfflineQueueSyncComplete"){d("MAWBridgeInitOfflineQueueSyncCompleteHandler").call();e=a.value;b("cr:19624").initOfflineQueueSyncComplete(e);return!0}return!1},v=function(a){if(!s)return!1;if(a.tag==="UnArchivedSelfDeviceChangeAlerts"){a=a.value;d("MAWDeviceChangeState-resolver").updateDeviceCount(a);return!0}return!1};function a(a){var b;a=a.children;var c=n(t,(b=d("MAWStateContext.react")).initialState),e=c[0],f=c[1];c=o();c[0];var g=c[1];c=k(function(a){var b=u(a);if(!b){b=v(a);b||g(function(){return f(a)})}},[]);var h=m(function(){return new Set()},[]),i=m(function(){return{state:e,subscriptions:h}},[e,h]),p=w(i),q=k(function(){return p.current},[p]);l(function(){h==null||h.forEach(function(a){return a(e)})},[e,h]);return j.jsx(b.MAWDispatchContext.Provider,{value:c,children:j.jsx(b.MAWStateContext.Provider,{value:i,children:j.jsx(b.MAWNonRerenderingStateContext.Provider,{value:q,children:a})})})}a.displayName=a.name+" [from "+f.id+"]";function w(a){var b=(h||(h=c("useUnsafeRef_DEPRECATED")))(a);b.current=a;return b}g.MAWStateContextProvider=a}),98);
__d("IGDAWSetup.react",["FBLogger","IGDSetIGE2EEEligibility","IGDSetupBridge","MAWCurrentUser","MAWSetupImpl.react","MAWStateContextProvider.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var b=d("react-compiler-runtime").c(4);a=a.children;var e=j;d("IGDSetIGE2EEEligibility").useUpsertSetIGE2EEEligibilityOnMount();var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={className:"xjp7ctv"},b[0]=f):f=b[0];var g;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(g=d("MAWCurrentUser").getID(),b[1]=g):g=b[1];b[2]!==a?(f=i.jsx("div",babelHelpers["extends"]({},f,{"data-testid":void 0,children:i.jsx(d("MAWStateContextProvider.react").MAWStateContextProvider,{children:i.jsx(c("MAWSetupImpl.react"),{fbid:g,logout:e,setupBridge:d("IGDSetupBridge").setupBridge,children:a})})})),b[2]=a,b[3]=f):f=b[3];return f}function j(){}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("AggregateError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){function b(c,d){var e;d=d!=null?d:g(c);e=a.call(this,d)||this;e.name="AggregateError";e.errors=c;e.message=d;Error.captureStackTrace&&Error.captureStackTrace(e,b);return e}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));function g(a){if(a.length===0)return"No errors";return a.length===1?a[0].message:a.map(function(a){return"- "+a.message}).join("\n")}f["default"]=a}),66);
__d("StructuredConfigBase",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.getBool=function(a){return this.$1.getValue(a)>0};b.getInt=function(a){return this.$1.getValue(a)};return a}();f["default"]=a}),66);
__d("Configs",["StructuredConfigBase"],(function(a,b,c,d,e,f){"use strict";c=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.$ExampleConfig1=b.getBool(0),b.$ExampleConfig2=b.getBool(2),b.$ExampleConfig3=b.getBool(1724),b.$ExampleConfig4=b.getBool(2044),b.$ExampleConfig5=b.getInt(1),b.$ExampleConfig6=b.getInt(3),b.$ExampleConfig7=b.getInt(2011),babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.updateParams=function(){this.$ExampleConfig1=this.getBool(0),this.$ExampleConfig2=this.getBool(2),this.$ExampleConfig3=this.getBool(1724),this.$ExampleConfig4=this.getBool(2044),this.$ExampleConfig5=this.getInt(1),this.$ExampleConfig6=this.getInt(3),this.$ExampleConfig7=this.getInt(2011)};c.isEnabled=function(){return this.$ExampleConfig1};c.isSomeBoolean=function(){return this.$ExampleConfig2};c.isSomeOtherIntegerHasValue=function(){return this.$ExampleConfig3};c.isSomeOtherBoolean=function(){return this.$ExampleConfig4};c.getSomeInteger=function(){return this.$ExampleConfig5};c.getSomeOtherInteger=function(){return this.$ExampleConfig6};c.getSomeDouble=function(){return this.$ExampleConfig7};return b}(a=b("StructuredConfigBase"));d=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.$PreferredCaptureConfig1=b.getBool(173),b.$PreferredCaptureConfig2=b.getBool(3919),b.$PreferredCaptureConfig3=b.getBool(4478),b.$PreferredCaptureConfig4=b.getInt(174),b.$PreferredCaptureConfig5=b.getInt(175),b.$PreferredCaptureConfig6=b.getInt(176),babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.updateParams=function(){this.$PreferredCaptureConfig1=this.getBool(173),this.$PreferredCaptureConfig2=this.getBool(3919),this.$PreferredCaptureConfig3=this.getBool(4478),this.$PreferredCaptureConfig4=this.getInt(174),this.$PreferredCaptureConfig5=this.getInt(175),this.$PreferredCaptureConfig6=this.getInt(176)};c.isEnabled=function(){return this.$PreferredCaptureConfig1};c.isPreferStableFps=function(){return this.$PreferredCaptureConfig2};c.isEnabledForZenon=function(){return this.$PreferredCaptureConfig3};c.getWidthPx=function(){return this.$PreferredCaptureConfig4};c.getHeightPx=function(){return this.$PreferredCaptureConfig5};c.getFps=function(){return this.$PreferredCaptureConfig6};return b}(a);f=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.$ZenonSdpTransformConfig1=b.getBool(244),b.$ZenonSdpTransformConfig2=b.getBool(420),b.$ZenonSdpTransformConfig3=b.getBool(421),b.$ZenonSdpTransformConfig4=b.getBool(245),b.$ZenonSdpTransformConfig5=b.getBool(246),b.$ZenonSdpTransformConfig6=b.getBool(248),b.$ZenonSdpTransformConfig7=b.getBool(1448),b.$ZenonSdpTransformConfig8=b.getBool(1444),b.$ZenonSdpTransformConfig9=b.getBool(1445),b.$ZenonSdpTransformConfig10=b.getInt(1446),b.$ZenonSdpTransformConfig11=b.getInt(1447),babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.updateParams=function(){this.$ZenonSdpTransformConfig1=this.getBool(244),this.$ZenonSdpTransformConfig2=this.getBool(420),this.$ZenonSdpTransformConfig3=this.getBool(421),this.$ZenonSdpTransformConfig4=this.getBool(245),this.$ZenonSdpTransformConfig5=this.getBool(246),this.$ZenonSdpTransformConfig6=this.getBool(248),this.$ZenonSdpTransformConfig7=this.getBool(1448),this.$ZenonSdpTransformConfig8=this.getBool(1444),this.$ZenonSdpTransformConfig9=this.getBool(1445),this.$ZenonSdpTransformConfig10=this.getInt(1446),this.$ZenonSdpTransformConfig11=this.getInt(1447)};c.isPreserveH264=function(){return this.$ZenonSdpTransformConfig1};c.isPreferH264ForMwCall=function(){return this.$ZenonSdpTransformConfig2};c.isPreferSwH264=function(){return this.$ZenonSdpTransformConfig3};c.isAddAudioNack=function(){return this.$ZenonSdpTransformConfig4};c.isDisableOpusStereo=function(){return this.$ZenonSdpTransformConfig5};c.isPreferIsacForGroupAudio=function(){return this.$ZenonSdpTransformConfig6};c.isEnableOpusFmtpMunging=function(){return this.$ZenonSdpTransformConfig7};c.isSetOpusUsedtx=function(){return this.$ZenonSdpTransformConfig8};c.isSetOpusUseinbandfec=function(){return this.$ZenonSdpTransformConfig9};c.getSetOpusMaxplaybackrate=function(){return this.$ZenonSdpTransformConfig10};c.getSetOpusMaxaveragebitrate=function(){return this.$ZenonSdpTransformConfig11};return b}(a);b=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.$ZenonPeerConnectionConfig1=b.getBool(302),babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.updateParams=function(){this.$ZenonPeerConnectionConfig1=this.getBool(302)};c.isRtpDataChannels=function(){return this.$ZenonPeerConnectionConfig1};return b}(a);var g=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.$ZenonStartCallImmediatelyConfig1=b.getBool(308),babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.updateParams=function(){this.$ZenonStartCallImmediatelyConfig1=this.getBool(308)};c.isEnabled=function(){return this.$ZenonStartCallImmediatelyConfig1};return b}(a),h=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.$ZenonGeneralizedIdentityConfig1=b.getInt(1891),babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.updateParams=function(){this.$ZenonGeneralizedIdentityConfig1=this.getInt(1891)};c.getDuplicatedParticipantsProcessingMode=function(){return this.$ZenonGeneralizedIdentityConfig1};return b}(a),i=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.$ZenonMultiCallSupportConfig1=b.getInt(309),babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.updateParams=function(){this.$ZenonMultiCallSupportConfig1=this.getInt(309)};c.getMaxConnectedCalls=function(){return this.$ZenonMultiCallSupportConfig1};return b}(a),j=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.$ZenonPlatformSupportConfig1=b.getBool(316),b.$ZenonPlatformSupportConfig2=b.getBool(318),b.$ZenonPlatformSupportConfig3=b.getBool(2251),b.$ZenonPlatformSupportConfig4=b.getBool(1900),b.$ZenonPlatformSupportConfig5=b.getInt(317),b.$ZenonPlatformSupportConfig6=b.getInt(319),babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.updateParams=function(){this.$ZenonPlatformSupportConfig1=this.getBool(316),this.$ZenonPlatformSupportConfig2=this.getBool(318),this.$ZenonPlatformSupportConfig3=this.getBool(2251),this.$ZenonPlatformSupportConfig4=this.getBool(1900),this.$ZenonPlatformSupportConfig5=this.getInt(317),this.$ZenonPlatformSupportConfig6=this.getInt(319)};c.isSupportsZenonPlatform=function(){return this.$ZenonPlatformSupportConfig1};c.isStartImmediatelyEnabled=function(){return this.$ZenonPlatformSupportConfig2};c.isUploadSummaryOnCallEnded=function(){return this.$ZenonPlatformSupportConfig3};c.isMultiwayAvEscalationEnabled=function(){return this.$ZenonPlatformSupportConfig4};c.getMaxConnectedCalls=function(){return this.$ZenonPlatformSupportConfig5};c.getParentWindowConnectionTimeoutMs=function(){return this.$ZenonPlatformSupportConfig6};return b}(a),k=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.$ZenonSimulcastConfig1=b.getBool(453),babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.updateParams=function(){this.$ZenonSimulcastConfig1=this.getBool(453)};c.isSimulcastEnabled=function(){return this.$ZenonSimulcastConfig1};return b}(a),l=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.$DynamicRuleConfig1=b.getBool(1342),b.$DynamicRuleConfig2=b.getBool(1597),b.$DynamicRuleConfig3=b.getInt(1359),b.$DynamicRuleConfig4=b.getInt(1510),b.$DynamicRuleConfig5=b.getInt(1612),babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.updateParams=function(){this.$DynamicRuleConfig1=this.getBool(1342),this.$DynamicRuleConfig2=this.getBool(1597),this.$DynamicRuleConfig3=this.getInt(1359),this.$DynamicRuleConfig4=this.getInt(1510),this.$DynamicRuleConfig5=this.getInt(1612)};c.isEnabled=function(){return this.$DynamicRuleConfig1};c.isDebugLoggingEnabled=function(){return this.$DynamicRuleConfig2};c.getProcessIntervalMs=function(){return this.$DynamicRuleConfig3};c.getNetworkProcessIntervalMs=function(){return this.$DynamicRuleConfig4};c.getDebugLoggingIntervalMs=function(){return this.$DynamicRuleConfig5};return b}(a),m=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.$SignalingPingConfig1=b.getInt(1470),babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.updateParams=function(){this.$SignalingPingConfig1=this.getInt(1470)};c.getPingIntervalMs=function(){return this.$SignalingPingConfig1};return b}(a);a=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.$NetEqAiConfig1=b.getBool(4550),b.$NetEqAiConfig2=b.getBool(4551),b.$NetEqAiConfig3=b.getInt(4552),b.$NetEqAiConfig4=b.getInt(5477),babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.updateParams=function(){this.$NetEqAiConfig1=this.getBool(4550),this.$NetEqAiConfig2=this.getBool(4551),this.$NetEqAiConfig3=this.getInt(4552),this.$NetEqAiConfig4=this.getInt(5477)};c.isEnabled=function(){return this.$NetEqAiConfig1};c.isDisableTimeStretching=function(){return this.$NetEqAiConfig2};c.getPacketWaitTimeMs=function(){return this.$NetEqAiConfig3};c.getCngDelayMs=function(){return this.$NetEqAiConfig4};return b}(a);e.exports={ExampleConfig:c,PreferredCaptureConfig:d,ZenonSdpTransformConfig:f,ZenonPeerConnectionConfig:b,ZenonStartCallImmediatelyConfig:g,ZenonGeneralizedIdentityConfig:h,ZenonMultiCallSupportConfig:i,ZenonPlatformSupportConfig:j,ZenonSimulcastConfig:k,DynamicRuleConfig:l,SignalingPingConfig:m,NetEqAiConfig:a}}),null);
__d("E2eeMetricsSerializers",["ThriftTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){return{}}function j(){return{}}function a(){return{p2p_e2ee:i(),group_e2ee:j()}}function k(a,b){b.writeStructBegin("P2pE2eeMetrics");a.engine_type!=null&&(b.writeFieldBegin({fname:"engine_type",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(BigInt(a.engine_type)),b.writeFieldEnd());a.status!=null&&(b.writeFieldBegin({fname:"status",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2}),b.writeI64(BigInt(a.status)),b.writeFieldEnd());a.version!=null&&(b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(BigInt(a.version)),b.writeFieldEnd());a.gen_prekey_bundle_time_ms!=null&&(b.writeFieldBegin({fname:"gen_prekey_bundle_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:4}),b.writeI64(BigInt(a.gen_prekey_bundle_time_ms)),b.writeFieldEnd());a.encrypted_msg_time_ms!=null&&(b.writeFieldBegin({fname:"encrypted_msg_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:5}),b.writeI64(BigInt(a.encrypted_msg_time_ms)),b.writeFieldEnd());a.decrypted_msg_time_ms!=null&&(b.writeFieldBegin({fname:"decrypted_msg_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:6}),b.writeI64(BigInt(a.decrypted_msg_time_ms)),b.writeFieldEnd());a.process_sdp_crypto_time_ms!=null&&(b.writeFieldBegin({fname:"process_sdp_crypto_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:7}),b.writeI64(BigInt(a.process_sdp_crypto_time_ms)),b.writeFieldEnd());a.create_crypto_offer_time_ms!=null&&(b.writeFieldBegin({fname:"create_crypto_offer_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:8}),b.writeI64(BigInt(a.create_crypto_offer_time_ms)),b.writeFieldEnd());a.create_crypto_answer_time_ms!=null&&(b.writeFieldBegin({fname:"create_crypto_answer_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:9}),b.writeI64(BigInt(a.create_crypto_answer_time_ms)),b.writeFieldEnd());a.get_ik_time_ms!=null&&(b.writeFieldBegin({fname:"get_ik_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:10}),b.writeI64(BigInt(a.get_ik_time_ms)),b.writeFieldEnd());a.peer_id!=null&&(b.writeFieldBegin({fname:"peer_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:11}),b.writeI64(BigInt(a.peer_id)),b.writeFieldEnd());a.peer_connection_index!=null&&(b.writeFieldBegin({fname:"peer_connection_index",ftype:(h||(h=c("ThriftTypes"))).I64,fid:12}),b.writeI64(BigInt(a.peer_connection_index)),b.writeFieldEnd());a.srtp_crypto_suite!=null&&(b.writeFieldBegin({fname:"srtp_crypto_suite",ftype:(h||(h=c("ThriftTypes"))).I64,fid:13}),b.writeI64(BigInt(a.srtp_crypto_suite)),b.writeFieldEnd());a.engine_error!=null&&(b.writeFieldBegin({fname:"engine_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:14}),b.writeI64(BigInt(a.engine_error)),b.writeFieldEnd());a.libsignal_error!=null&&(b.writeFieldBegin({fname:"libsignal_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:15}),b.writeI64(BigInt(a.libsignal_error)),b.writeFieldEnd());a.identity_key_mode!=null&&(b.writeFieldBegin({fname:"identity_key_mode",ftype:(h||(h=c("ThriftTypes"))).I64,fid:16}),b.writeI64(BigInt(a.identity_key_mode)),b.writeFieldEnd());a.identity_key_num_persistent!=null&&(b.writeFieldBegin({fname:"identity_key_num_persistent",ftype:(h||(h=c("ThriftTypes"))).I64,fid:17}),b.writeI64(BigInt(a.identity_key_num_persistent)),b.writeFieldEnd());a.identity_key_num_validated!=null&&(b.writeFieldBegin({fname:"identity_key_num_validated",ftype:(h||(h=c("ThriftTypes"))).I64,fid:18}),b.writeI64(BigInt(a.identity_key_num_validated)),b.writeFieldEnd());a.identity_key_num_saved!=null&&(b.writeFieldBegin({fname:"identity_key_num_saved",ftype:(h||(h=c("ThriftTypes"))).I64,fid:19}),b.writeI64(BigInt(a.identity_key_num_saved)),b.writeFieldEnd());a.identity_key_num_existing!=null&&(b.writeFieldBegin({fname:"identity_key_num_existing",ftype:(h||(h=c("ThriftTypes"))).I64,fid:20}),b.writeI64(BigInt(a.identity_key_num_existing)),b.writeFieldEnd());a.is_e2ee_mandated!=null&&(b.writeFieldBegin({fname:"is_e2ee_mandated",ftype:(h||(h=c("ThriftTypes"))).I64,fid:21}),b.writeI64(BigInt(a.is_e2ee_mandated)),b.writeFieldEnd());a.local_trace_id!=null&&(b.writeFieldBegin({fname:"local_trace_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:22}),b.writeI64(BigInt(a.local_trace_id)),b.writeFieldEnd());a.remote_trace_id!=null&&(b.writeFieldBegin({fname:"remote_trace_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:23}),b.writeI64(BigInt(a.remote_trace_id)),b.writeFieldEnd());a.local_device_id!=null&&(b.writeFieldBegin({fname:"local_device_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:24}),b.writeI64(BigInt(a.local_device_id)),b.writeFieldEnd());a.remote_device_id!=null&&(b.writeFieldBegin({fname:"remote_device_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:25}),b.writeI64(BigInt(a.remote_device_id)),b.writeFieldEnd());if(a.events!=null){b.writeFieldBegin({fname:"events",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:26});b.writeListBegin({etype:h.I64,size:a.events.length});for(var d of a.events)b.writeI64(BigInt(d));b.writeListEnd();b.writeFieldEnd()}a.gen_dtls_auth_info_status!=null&&(b.writeFieldBegin({fname:"gen_dtls_auth_info_status",ftype:(h||(h=c("ThriftTypes"))).I64,fid:27}),b.writeI64(BigInt(a.gen_dtls_auth_info_status)),b.writeFieldEnd());a.gen_dtls_auth_info_libsignal_status!=null&&(b.writeFieldBegin({fname:"gen_dtls_auth_info_libsignal_status",ftype:(h||(h=c("ThriftTypes"))).I64,fid:28}),b.writeI64(BigInt(a.gen_dtls_auth_info_libsignal_status)),b.writeFieldEnd());a.gen_dtls_auth_info_time_ms!=null&&(b.writeFieldBegin({fname:"gen_dtls_auth_info_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:29}),b.writeI64(BigInt(a.gen_dtls_auth_info_time_ms)),b.writeFieldEnd());a.verify_dtls_auth_info_status!=null&&(b.writeFieldBegin({fname:"verify_dtls_auth_info_status",ftype:(h||(h=c("ThriftTypes"))).I64,fid:30}),b.writeI64(BigInt(a.verify_dtls_auth_info_status)),b.writeFieldEnd());a.verify_dtls_auth_info_libsignal_status!=null&&(b.writeFieldBegin({fname:"verify_dtls_auth_info_libsignal_status",ftype:(h||(h=c("ThriftTypes"))).I64,fid:31}),b.writeI64(BigInt(a.verify_dtls_auth_info_libsignal_status)),b.writeFieldEnd());a.verify_dtls_auth_info_time_ms!=null&&(b.writeFieldBegin({fname:"verify_dtls_auth_info_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:32}),b.writeI64(BigInt(a.verify_dtls_auth_info_time_ms)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function l(a,b){b.writeStructBegin("GroupE2eeMetrics");a.received_key_message_counter!=null&&(b.writeFieldBegin({fname:"received_key_message_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(BigInt(a.received_key_message_counter)),b.writeFieldEnd());a.sent_key_message_counter!=null&&(b.writeFieldBegin({fname:"sent_key_message_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2}),b.writeI64(BigInt(a.sent_key_message_counter)),b.writeFieldEnd());a.cached_key_message_counter!=null&&(b.writeFieldBegin({fname:"cached_key_message_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(BigInt(a.cached_key_message_counter)),b.writeFieldEnd());a.used_cached_key_counter!=null&&(b.writeFieldBegin({fname:"used_cached_key_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:4}),b.writeI64(BigInt(a.used_cached_key_counter)),b.writeFieldEnd());a.unused_smu_counter!=null&&(b.writeFieldBegin({fname:"unused_smu_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:5}),b.writeI64(BigInt(a.unused_smu_counter)),b.writeFieldEnd());a.missing_key_message_counter!=null&&(b.writeFieldBegin({fname:"missing_key_message_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:6}),b.writeI64(BigInt(a.missing_key_message_counter)),b.writeFieldEnd());a.negotiate_off_status!=null&&(b.writeFieldBegin({fname:"negotiate_off_status",ftype:(h||(h=c("ThriftTypes"))).I64,fid:7}),b.writeI64(BigInt(a.negotiate_off_status)),b.writeFieldEnd());a.cipher_suite_status!=null&&(b.writeFieldBegin({fname:"cipher_suite_status",ftype:(h||(h=c("ThriftTypes"))).I64,fid:8}),b.writeI64(BigInt(a.cipher_suite_status)),b.writeFieldEnd());a.decrypt_used_cached_session_counter!=null&&(b.writeFieldBegin({fname:"decrypt_used_cached_session_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:9}),b.writeI64(BigInt(a.decrypt_used_cached_session_counter)),b.writeFieldEnd());a.encrypt_used_cached_session_counter!=null&&(b.writeFieldBegin({fname:"encrypt_used_cached_session_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:10}),b.writeI64(BigInt(a.encrypt_used_cached_session_counter)),b.writeFieldEnd());a.sent_ack_message_counter!=null&&(b.writeFieldBegin({fname:"sent_ack_message_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:11}),b.writeI64(BigInt(a.sent_ack_message_counter)),b.writeFieldEnd());a.reuse_ackd_uid_counter!=null&&(b.writeFieldBegin({fname:"reuse_ackd_uid_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:12}),b.writeI64(BigInt(a.reuse_ackd_uid_counter)),b.writeFieldEnd());a.total_uids_created_counter!=null&&(b.writeFieldBegin({fname:"total_uids_created_counter",ftype:(h||(h=c("ThriftTypes"))).I64,fid:13}),b.writeI64(BigInt(a.total_uids_created_counter)),b.writeFieldEnd());a.generate_chain_key_failed_error!=null&&(b.writeFieldBegin({fname:"generate_chain_key_failed_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:14}),b.writeI64(BigInt(a.generate_chain_key_failed_error)),b.writeFieldEnd());a.set_chain_key_failed_error!=null&&(b.writeFieldBegin({fname:"set_chain_key_failed_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:15}),b.writeI64(BigInt(a.set_chain_key_failed_error)),b.writeFieldEnd());a.key_provider_not_found_error!=null&&(b.writeFieldBegin({fname:"key_provider_not_found_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:16}),b.writeI64(BigInt(a.key_provider_not_found_error)),b.writeFieldEnd());a.key_message_parse_failed_error!=null&&(b.writeFieldBegin({fname:"key_message_parse_failed_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:17}),b.writeI64(BigInt(a.key_message_parse_failed_error)),b.writeFieldEnd());a.empty_pkb_result_error!=null&&(b.writeFieldBegin({fname:"empty_pkb_result_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:18}),b.writeI64(BigInt(a.empty_pkb_result_error)),b.writeFieldEnd());a.empty_encrypt_result_error!=null&&(b.writeFieldBegin({fname:"empty_encrypt_result_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:19}),b.writeI64(BigInt(a.empty_encrypt_result_error)),b.writeFieldEnd());a.empty_decrypt_result_error!=null&&(b.writeFieldBegin({fname:"empty_decrypt_result_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:20}),b.writeI64(BigInt(a.empty_decrypt_result_error)),b.writeFieldEnd());a.empty_version_error!=null&&(b.writeFieldBegin({fname:"empty_version_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:21}),b.writeI64(BigInt(a.empty_version_error)),b.writeFieldEnd());a.unsupported_version_error!=null&&(b.writeFieldBegin({fname:"unsupported_version_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:22}),b.writeI64(BigInt(a.unsupported_version_error)),b.writeFieldEnd());a.midcall_version_change_error!=null&&(b.writeFieldBegin({fname:"midcall_version_change_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:23}),b.writeI64(BigInt(a.midcall_version_change_error)),b.writeFieldEnd());a.inconsistent_remote_maps_error!=null&&(b.writeFieldBegin({fname:"inconsistent_remote_maps_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:24}),b.writeI64(BigInt(a.inconsistent_remote_maps_error)),b.writeFieldEnd());a.key_message_pkb_mismatch_error!=null&&(b.writeFieldBegin({fname:"key_message_pkb_mismatch_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:25}),b.writeI64(BigInt(a.key_message_pkb_mismatch_error)),b.writeFieldEnd());a.no_key_or_ack_in_e2ee_message_error!=null&&(b.writeFieldBegin({fname:"no_key_or_ack_in_e2ee_message_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:26}),b.writeI64(BigInt(a.no_key_or_ack_in_e2ee_message_error)),b.writeFieldEnd());a.receiver_key_provider_not_found_error!=null&&(b.writeFieldBegin({fname:"receiver_key_provider_not_found_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:27}),b.writeI64(BigInt(a.receiver_key_provider_not_found_error)),b.writeFieldEnd());a.pkb_parse_failed_error!=null&&(b.writeFieldBegin({fname:"pkb_parse_failed_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:28}),b.writeI64(BigInt(a.pkb_parse_failed_error)),b.writeFieldEnd());a.message_deserialized_failed_error!=null&&(b.writeFieldBegin({fname:"message_deserialized_failed_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:29}),b.writeI64(BigInt(a.message_deserialized_failed_error)),b.writeFieldEnd());a.decrypt_no_identity_key_and_cached_session_not_used_error!=null&&(b.writeFieldBegin({fname:"decrypt_no_identity_key_and_cached_session_not_used_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:30}),b.writeI64(BigInt(a.decrypt_no_identity_key_and_cached_session_not_used_error)),b.writeFieldEnd());a.encrypt_no_identity_key_and_cached_session_not_used_error!=null&&(b.writeFieldBegin({fname:"encrypt_no_identity_key_and_cached_session_not_used_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:31}),b.writeI64(BigInt(a.encrypt_no_identity_key_and_cached_session_not_used_error)),b.writeFieldEnd());a.decrypt_ack_wrong_message_error!=null&&(b.writeFieldBegin({fname:"decrypt_ack_wrong_message_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:32}),b.writeI64(BigInt(a.decrypt_ack_wrong_message_error)),b.writeFieldEnd());a.invalid_uid_received_error!=null&&(b.writeFieldBegin({fname:"invalid_uid_received_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:33}),b.writeI64(BigInt(a.invalid_uid_received_error)),b.writeFieldEnd());a.ack_for_absent_user!=null&&(b.writeFieldBegin({fname:"ack_for_absent_user",ftype:(h||(h=c("ThriftTypes"))).I64,fid:34}),b.writeI64(BigInt(a.ack_for_absent_user)),b.writeFieldEnd());a.uid_not_awaiting_ack_error!=null&&(b.writeFieldBegin({fname:"uid_not_awaiting_ack_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:35}),b.writeI64(BigInt(a.uid_not_awaiting_ack_error)),b.writeFieldEnd());a.decrypt_ack_error!=null&&(b.writeFieldBegin({fname:"decrypt_ack_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:36}),b.writeI64(BigInt(a.decrypt_ack_error)),b.writeFieldEnd());a.empty_decrypt_result_ack_error!=null&&(b.writeFieldBegin({fname:"empty_decrypt_result_ack_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:37}),b.writeI64(BigInt(a.empty_decrypt_result_ack_error)),b.writeFieldEnd());a.decrypt_ack_cached_session_not_used_error!=null&&(b.writeFieldBegin({fname:"decrypt_ack_cached_session_not_used_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:38}),b.writeI64(BigInt(a.decrypt_ack_cached_session_not_used_error)),b.writeFieldEnd());a.encrypt_ack_error!=null&&(b.writeFieldBegin({fname:"encrypt_ack_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:39}),b.writeI64(BigInt(a.encrypt_ack_error)),b.writeFieldEnd());a.empty_encrypt_result_ack_error!=null&&(b.writeFieldBegin({fname:"empty_encrypt_result_ack_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:40}),b.writeI64(BigInt(a.empty_encrypt_result_ack_error)),b.writeFieldEnd());a.invalid_message_type_error!=null&&(b.writeFieldBegin({fname:"invalid_message_type_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:41}),b.writeI64(BigInt(a.invalid_message_type_error)),b.writeFieldEnd());a.server_state_deserialized_failed_error!=null&&(b.writeFieldBegin({fname:"server_state_deserialized_failed_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:42}),b.writeI64(BigInt(a.server_state_deserialized_failed_error)),b.writeFieldEnd());a.crypto_engine_failure_error!=null&&(b.writeFieldBegin({fname:"crypto_engine_failure_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:43}),b.writeI64(BigInt(a.crypto_engine_failure_error)),b.writeFieldEnd());a.empty_e2ee_client_state_error!=null&&(b.writeFieldBegin({fname:"empty_e2ee_client_state_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:44}),b.writeI64(BigInt(a.empty_e2ee_client_state_error)),b.writeFieldEnd());a.group_e2ee_negotiated!=null&&(b.writeFieldBegin({fname:"group_e2ee_negotiated",ftype:(h||(h=c("ThriftTypes"))).I64,fid:45}),b.writeI64(BigInt(a.group_e2ee_negotiated)),b.writeFieldEnd());a.negotiation_mode_kn!=null&&(b.writeFieldBegin({fname:"negotiation_mode_kn",ftype:(h||(h=c("ThriftTypes"))).I64,fid:46}),b.writeI64(BigInt(a.negotiation_mode_kn)),b.writeFieldEnd());a.group_e2ee_setup_status!=null&&(b.writeFieldBegin({fname:"group_e2ee_setup_status",ftype:(h||(h=c("ThriftTypes"))).I64,fid:47}),b.writeI64(BigInt(a.group_e2ee_setup_status)),b.writeFieldEnd());a.enable_group_e2ee!=null&&(b.writeFieldBegin({fname:"enable_group_e2ee",ftype:(h||(h=c("ThriftTypes"))).I64,fid:48}),b.writeI64(BigInt(a.enable_group_e2ee)),b.writeFieldEnd());a.identity_key_mode_group!=null&&(b.writeFieldBegin({fname:"identity_key_mode_group",ftype:(h||(h=c("ThriftTypes"))).I64,fid:49}),b.writeI64(BigInt(a.identity_key_mode_group)),b.writeFieldEnd());a.identity_key_num_persistent_group!=null&&(b.writeFieldBegin({fname:"identity_key_num_persistent_group",ftype:(h||(h=c("ThriftTypes"))).I64,fid:50}),b.writeI64(BigInt(a.identity_key_num_persistent_group)),b.writeFieldEnd());a.identity_key_num_validated_group!=null&&(b.writeFieldBegin({fname:"identity_key_num_validated_group",ftype:(h||(h=c("ThriftTypes"))).I64,fid:51}),b.writeI64(BigInt(a.identity_key_num_validated_group)),b.writeFieldEnd());a.identity_key_num_saved_group!=null&&(b.writeFieldBegin({fname:"identity_key_num_saved_group",ftype:(h||(h=c("ThriftTypes"))).I64,fid:52}),b.writeI64(BigInt(a.identity_key_num_saved_group)),b.writeFieldEnd());a.identity_key_num_existing_group!=null&&(b.writeFieldBegin({fname:"identity_key_num_existing_group",ftype:(h||(h=c("ThriftTypes"))).I64,fid:53}),b.writeI64(BigInt(a.identity_key_num_existing_group)),b.writeFieldEnd());a.max_key_message_latency_ms!=null&&(b.writeFieldBegin({fname:"max_key_message_latency_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:54}),b.writeI64(BigInt(a.max_key_message_latency_ms)),b.writeFieldEnd());a.max_key_message_latency_ms_joiner!=null&&(b.writeFieldBegin({fname:"max_key_message_latency_ms_joiner",ftype:(h||(h=c("ThriftTypes"))).I64,fid:55}),b.writeI64(BigInt(a.max_key_message_latency_ms_joiner)),b.writeFieldEnd());a.max_smu_to_key_message_latency_ms!=null&&(b.writeFieldBegin({fname:"max_smu_to_key_message_latency_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:56}),b.writeI64(BigInt(a.max_smu_to_key_message_latency_ms)),b.writeFieldEnd());a.process_smu_time_ms!=null&&(b.writeFieldBegin({fname:"process_smu_time_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:57}),b.writeI64(BigInt(a.process_smu_time_ms)),b.writeFieldEnd());a.decryption_total_frames!=null&&(b.writeFieldBegin({fname:"decryption_total_frames",ftype:(h||(h=c("ThriftTypes"))).I64,fid:58}),b.writeI64(BigInt(a.decryption_total_frames)),b.writeFieldEnd());a.decryption_total_error_frames!=null&&(b.writeFieldBegin({fname:"decryption_total_error_frames",ftype:(h||(h=c("ThriftTypes"))).I64,fid:59}),b.writeI64(BigInt(a.decryption_total_error_frames)),b.writeFieldEnd());a.decryption_error_frames_alloc!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_alloc",ftype:(h||(h=c("ThriftTypes"))).I64,fid:60}),b.writeI64(BigInt(a.decryption_error_frames_alloc)),b.writeFieldEnd());a.decryption_error_frames_invalid_params!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_invalid_params",ftype:(h||(h=c("ThriftTypes"))).I64,fid:61}),b.writeI64(BigInt(a.decryption_error_frames_invalid_params)),b.writeFieldEnd());a.decryption_error_frames_cipher!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_cipher",ftype:(h||(h=c("ThriftTypes"))).I64,fid:62}),b.writeI64(BigInt(a.decryption_error_frames_cipher)),b.writeFieldEnd());a.decryption_error_frames_parse!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_parse",ftype:(h||(h=c("ThriftTypes"))).I64,fid:63}),b.writeI64(BigInt(a.decryption_error_frames_parse)),b.writeFieldEnd());a.decryption_error_frames_invalid_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_invalid_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:64}),b.writeI64(BigInt(a.decryption_error_frames_invalid_key)),b.writeFieldEnd());a.decryption_error_frames_missing_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_missing_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:65}),b.writeI64(BigInt(a.decryption_error_frames_missing_key)),b.writeFieldEnd());a.decryption_error_frames_out_of_ratchet_space!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_out_of_ratchet_space",ftype:(h||(h=c("ThriftTypes"))).I64,fid:66}),b.writeI64(BigInt(a.decryption_error_frames_out_of_ratchet_space)),b.writeFieldEnd());a.decryption_error_frames_cipher_auth!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_cipher_auth",ftype:(h||(h=c("ThriftTypes"))).I64,fid:67}),b.writeI64(BigInt(a.decryption_error_frames_cipher_auth)),b.writeFieldEnd());a.decryption_error_frames_frame_too_old!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_frame_too_old",ftype:(h||(h=c("ThriftTypes"))).I64,fid:68}),b.writeI64(BigInt(a.decryption_error_frames_frame_too_old)),b.writeFieldEnd());a.decryption_error_frames_seen_frame!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_seen_frame",ftype:(h||(h=c("ThriftTypes"))).I64,fid:69}),b.writeI64(BigInt(a.decryption_error_frames_seen_frame)),b.writeFieldEnd());a.decryption_error_frames_invalid_frame!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_invalid_frame",ftype:(h||(h=c("ThriftTypes"))).I64,fid:70}),b.writeI64(BigInt(a.decryption_error_frames_invalid_frame)),b.writeFieldEnd());a.decryption_error_frames_setting_invalid_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_setting_invalid_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:71}),b.writeI64(BigInt(a.decryption_error_frames_setting_invalid_key)),b.writeFieldEnd());a.decryption_error_frames_setting_existing_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_setting_existing_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:72}),b.writeI64(BigInt(a.decryption_error_frames_setting_existing_key)),b.writeFieldEnd());a.decryption_error_frames_escape_data!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_escape_data",ftype:(h||(h=c("ThriftTypes"))).I64,fid:73}),b.writeI64(BigInt(a.decryption_error_frames_escape_data)),b.writeFieldEnd());a.decryption_error_frames_deescape_data!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_deescape_data",ftype:(h||(h=c("ThriftTypes"))).I64,fid:74}),b.writeI64(BigInt(a.decryption_error_frames_deescape_data)),b.writeFieldEnd());a.decryption_error_frames_parse_frame_or_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_parse_frame_or_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:75}),b.writeI64(BigInt(a.decryption_error_frames_parse_frame_or_key)),b.writeFieldEnd());a.decryption_error_frames_unknown!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_unknown",ftype:(h||(h=c("ThriftTypes"))).I64,fid:76}),b.writeI64(BigInt(a.decryption_error_frames_unknown)),b.writeFieldEnd());a.decryption_unencrypted_frames!=null&&(b.writeFieldBegin({fname:"decryption_unencrypted_frames",ftype:(h||(h=c("ThriftTypes"))).I64,fid:77}),b.writeI64(BigInt(a.decryption_unencrypted_frames)),b.writeFieldEnd());a.encryption_total_frames!=null&&(b.writeFieldBegin({fname:"encryption_total_frames",ftype:(h||(h=c("ThriftTypes"))).I64,fid:78}),b.writeI64(BigInt(a.encryption_total_frames)),b.writeFieldEnd());a.encryption_error_frames!=null&&(b.writeFieldBegin({fname:"encryption_error_frames",ftype:(h||(h=c("ThriftTypes"))).I64,fid:79}),b.writeI64(BigInt(a.encryption_error_frames)),b.writeFieldEnd());a.encryption_escape_bytes!=null&&(b.writeFieldBegin({fname:"encryption_escape_bytes",ftype:(h||(h=c("ThriftTypes"))).I64,fid:80}),b.writeI64(BigInt(a.encryption_escape_bytes)),b.writeFieldEnd());a.encryption_total_error_frames!=null&&(b.writeFieldBegin({fname:"encryption_total_error_frames",ftype:(h||(h=c("ThriftTypes"))).I64,fid:81}),b.writeI64(BigInt(a.encryption_total_error_frames)),b.writeFieldEnd());a.encryption_error_frames_alloc!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_alloc",ftype:(h||(h=c("ThriftTypes"))).I64,fid:82}),b.writeI64(BigInt(a.encryption_error_frames_alloc)),b.writeFieldEnd());a.encryption_error_frames_invalid_params!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_invalid_params",ftype:(h||(h=c("ThriftTypes"))).I64,fid:83}),b.writeI64(BigInt(a.encryption_error_frames_invalid_params)),b.writeFieldEnd());a.encryption_error_frames_cipher!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_cipher",ftype:(h||(h=c("ThriftTypes"))).I64,fid:84}),b.writeI64(BigInt(a.encryption_error_frames_cipher)),b.writeFieldEnd());a.encryption_error_frames_parse!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_parse",ftype:(h||(h=c("ThriftTypes"))).I64,fid:85}),b.writeI64(BigInt(a.encryption_error_frames_parse)),b.writeFieldEnd());a.encryption_error_frames_invalid_key!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_invalid_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:86}),b.writeI64(BigInt(a.encryption_error_frames_invalid_key)),b.writeFieldEnd());a.encryption_error_frames_cipher_auth!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_cipher_auth",ftype:(h||(h=c("ThriftTypes"))).I64,fid:87}),b.writeI64(BigInt(a.encryption_error_frames_cipher_auth)),b.writeFieldEnd());a.encryption_error_frames_escape_data!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_escape_data",ftype:(h||(h=c("ThriftTypes"))).I64,fid:88}),b.writeI64(BigInt(a.encryption_error_frames_escape_data)),b.writeFieldEnd());a.encryption_error_frames_unsupported_codec!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_unsupported_codec",ftype:(h||(h=c("ThriftTypes"))).I64,fid:89}),b.writeI64(BigInt(a.encryption_error_frames_unsupported_codec)),b.writeFieldEnd());a.encryption_error_frames_unknown!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_unknown",ftype:(h||(h=c("ThriftTypes"))).I64,fid:90}),b.writeI64(BigInt(a.encryption_error_frames_unknown)),b.writeFieldEnd());a.decryption_total_frames_data_channel!=null&&(b.writeFieldBegin({fname:"decryption_total_frames_data_channel",ftype:(h||(h=c("ThriftTypes"))).I64,fid:91}),b.writeI64(BigInt(a.decryption_total_frames_data_channel)),b.writeFieldEnd());a.decryption_total_error_frames_data_channel!=null&&(b.writeFieldBegin({fname:"decryption_total_error_frames_data_channel",ftype:(h||(h=c("ThriftTypes"))).I64,fid:92}),b.writeI64(BigInt(a.decryption_total_error_frames_data_channel)),b.writeFieldEnd());a.decryption_error_frames_data_channel_alloc!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_alloc",ftype:(h||(h=c("ThriftTypes"))).I64,fid:93}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_alloc)),b.writeFieldEnd());a.decryption_error_frames_data_channel_invalid_params!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_invalid_params",ftype:(h||(h=c("ThriftTypes"))).I64,fid:94}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_invalid_params)),b.writeFieldEnd());a.decryption_error_frames_data_channel_cipher!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_cipher",ftype:(h||(h=c("ThriftTypes"))).I64,fid:95}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_cipher)),b.writeFieldEnd());a.decryption_error_frames_data_channel_parse!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_parse",ftype:(h||(h=c("ThriftTypes"))).I64,fid:96}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_parse)),b.writeFieldEnd());a.decryption_error_frames_data_channel_invalid_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_invalid_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:97}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_invalid_key)),b.writeFieldEnd());a.decryption_error_frames_data_channel_missing_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_missing_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:98}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_missing_key)),b.writeFieldEnd());a.decryption_error_frames_data_channel_out_of_ratchet_space!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_out_of_ratchet_space",ftype:(h||(h=c("ThriftTypes"))).I64,fid:99}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_out_of_ratchet_space)),b.writeFieldEnd());a.decryption_error_frames_data_channel_cipher_auth!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_cipher_auth",ftype:(h||(h=c("ThriftTypes"))).I64,fid:100}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_cipher_auth)),b.writeFieldEnd());a.decryption_error_frames_data_channel_frame_too_old!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_frame_too_old",ftype:(h||(h=c("ThriftTypes"))).I64,fid:101}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_frame_too_old)),b.writeFieldEnd());a.decryption_error_frames_data_channel_seen_frame!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_seen_frame",ftype:(h||(h=c("ThriftTypes"))).I64,fid:102}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_seen_frame)),b.writeFieldEnd());a.decryption_error_frames_data_channel_invalid_frame!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_invalid_frame",ftype:(h||(h=c("ThriftTypes"))).I64,fid:103}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_invalid_frame)),b.writeFieldEnd());a.decryption_error_frames_data_channel_setting_invalid_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_setting_invalid_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:104}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_setting_invalid_key)),b.writeFieldEnd());a.decryption_error_frames_data_channel_setting_existing_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_setting_existing_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:105}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_setting_existing_key)),b.writeFieldEnd());a.decryption_error_frames_data_channel_escape_data!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_escape_data",ftype:(h||(h=c("ThriftTypes"))).I64,fid:106}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_escape_data)),b.writeFieldEnd());a.decryption_error_frames_data_channel_deescape_data!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_deescape_data",ftype:(h||(h=c("ThriftTypes"))).I64,fid:107}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_deescape_data)),b.writeFieldEnd());a.decryption_error_frames_data_channel_parse_frame_or_key!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_parse_frame_or_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:108}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_parse_frame_or_key)),b.writeFieldEnd());a.decryption_error_frames_data_channel_unknown!=null&&(b.writeFieldBegin({fname:"decryption_error_frames_data_channel_unknown",ftype:(h||(h=c("ThriftTypes"))).I64,fid:109}),b.writeI64(BigInt(a.decryption_error_frames_data_channel_unknown)),b.writeFieldEnd());a.decryption_unencrypted_frames_data_channel!=null&&(b.writeFieldBegin({fname:"decryption_unencrypted_frames_data_channel",ftype:(h||(h=c("ThriftTypes"))).I64,fid:110}),b.writeI64(BigInt(a.decryption_unencrypted_frames_data_channel)),b.writeFieldEnd());a.encryption_total_frames_data_channel!=null&&(b.writeFieldBegin({fname:"encryption_total_frames_data_channel",ftype:(h||(h=c("ThriftTypes"))).I64,fid:111}),b.writeI64(BigInt(a.encryption_total_frames_data_channel)),b.writeFieldEnd());a.encryption_error_frames_data_channel!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel",ftype:(h||(h=c("ThriftTypes"))).I64,fid:112}),b.writeI64(BigInt(a.encryption_error_frames_data_channel)),b.writeFieldEnd());a.encryption_total_error_frames_data_channel!=null&&(b.writeFieldBegin({fname:"encryption_total_error_frames_data_channel",ftype:(h||(h=c("ThriftTypes"))).I64,fid:113}),b.writeI64(BigInt(a.encryption_total_error_frames_data_channel)),b.writeFieldEnd());a.encryption_error_frames_data_channel_alloc!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel_alloc",ftype:(h||(h=c("ThriftTypes"))).I64,fid:114}),b.writeI64(BigInt(a.encryption_error_frames_data_channel_alloc)),b.writeFieldEnd());a.encryption_error_frames_data_channel_invalid_params!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel_invalid_params",ftype:(h||(h=c("ThriftTypes"))).I64,fid:115}),b.writeI64(BigInt(a.encryption_error_frames_data_channel_invalid_params)),b.writeFieldEnd());a.encryption_error_frames_data_channel_cipher!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel_cipher",ftype:(h||(h=c("ThriftTypes"))).I64,fid:116}),b.writeI64(BigInt(a.encryption_error_frames_data_channel_cipher)),b.writeFieldEnd());a.encryption_error_frames_data_channel_parse!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel_parse",ftype:(h||(h=c("ThriftTypes"))).I64,fid:117}),b.writeI64(BigInt(a.encryption_error_frames_data_channel_parse)),b.writeFieldEnd());a.encryption_error_frames_data_channel_invalid_key!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel_invalid_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:118}),b.writeI64(BigInt(a.encryption_error_frames_data_channel_invalid_key)),b.writeFieldEnd());a.encryption_error_frames_data_channel_cipher_auth!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel_cipher_auth",ftype:(h||(h=c("ThriftTypes"))).I64,fid:119}),b.writeI64(BigInt(a.encryption_error_frames_data_channel_cipher_auth)),b.writeFieldEnd());a.encryption_error_frames_data_channel_escape_data!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel_escape_data",ftype:(h||(h=c("ThriftTypes"))).I64,fid:120}),b.writeI64(BigInt(a.encryption_error_frames_data_channel_escape_data)),b.writeFieldEnd());a.encryption_error_frames_data_channel_unsupported_codec!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel_unsupported_codec",ftype:(h||(h=c("ThriftTypes"))).I64,fid:121}),b.writeI64(BigInt(a.encryption_error_frames_data_channel_unsupported_codec)),b.writeFieldEnd());a.encryption_error_frames_data_channel_unknown!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_data_channel_unknown",ftype:(h||(h=c("ThriftTypes"))).I64,fid:122}),b.writeI64(BigInt(a.encryption_error_frames_data_channel_unknown)),b.writeFieldEnd());a.num_removed_data_decryptors!=null&&(b.writeFieldBegin({fname:"num_removed_data_decryptors",ftype:(h||(h=c("ThriftTypes"))).I64,fid:123}),b.writeI64(BigInt(a.num_removed_data_decryptors)),b.writeFieldEnd());a.num_frame_decryptor_with_unencrypted_data!=null&&(b.writeFieldBegin({fname:"num_frame_decryptor_with_unencrypted_data",ftype:(h||(h=c("ThriftTypes"))).I64,fid:124}),b.writeI64(BigInt(a.num_frame_decryptor_with_unencrypted_data)),b.writeFieldEnd());a.num_removed_decryptors!=null&&(b.writeFieldBegin({fname:"num_removed_decryptors",ftype:(h||(h=c("ThriftTypes"))).I64,fid:125}),b.writeI64(BigInt(a.num_removed_decryptors)),b.writeFieldEnd());a.data_channel_encryption_not_ready_in_mandated_calls_error!=null&&(b.writeFieldBegin({fname:"data_channel_encryption_not_ready_in_mandated_calls_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:126}),b.writeI64(BigInt(a.data_channel_encryption_not_ready_in_mandated_calls_error)),b.writeFieldEnd());a.num_e2ee_message_total_encrypt!=null&&(b.writeFieldBegin({fname:"num_e2ee_message_total_encrypt",ftype:(h||(h=c("ThriftTypes"))).I64,fid:127}),b.writeI64(BigInt(a.num_e2ee_message_total_encrypt)),b.writeFieldEnd());a.num_e2ee_message_error_encrypt!=null&&(b.writeFieldBegin({fname:"num_e2ee_message_error_encrypt",ftype:(h||(h=c("ThriftTypes"))).I64,fid:128}),b.writeI64(BigInt(a.num_e2ee_message_error_encrypt)),b.writeFieldEnd());a.num_e2ee_message_total_decrypt!=null&&(b.writeFieldBegin({fname:"num_e2ee_message_total_decrypt",ftype:(h||(h=c("ThriftTypes"))).I64,fid:129}),b.writeI64(BigInt(a.num_e2ee_message_total_decrypt)),b.writeFieldEnd());a.num_e2ee_message_error_decrypt!=null&&(b.writeFieldBegin({fname:"num_e2ee_message_error_decrypt",ftype:(h||(h=c("ThriftTypes"))).I64,fid:130}),b.writeI64(BigInt(a.num_e2ee_message_error_decrypt)),b.writeFieldEnd());a.negotiate_off_time!=null&&(b.writeFieldBegin({fname:"negotiate_off_time",ftype:(h||(h=c("ThriftTypes"))).I64,fid:131}),b.writeI64(BigInt(a.negotiate_off_time)),b.writeFieldEnd());a.negotiated_version!=null&&(b.writeFieldBegin({fname:"negotiated_version",ftype:(h||(h=c("ThriftTypes"))).I64,fid:132}),b.writeI64(BigInt(a.negotiated_version)),b.writeFieldEnd());a.decryptor_removed_time!=null&&(b.writeFieldBegin({fname:"decryptor_removed_time",ftype:(h||(h=c("ThriftTypes"))).I64,fid:133}),b.writeI64(BigInt(a.decryptor_removed_time)),b.writeFieldEnd());a.is_e2ee_mandated_group!=null&&(b.writeFieldBegin({fname:"is_e2ee_mandated_group",ftype:(h||(h=c("ThriftTypes"))).I64,fid:134}),b.writeI64(BigInt(a.is_e2ee_mandated_group)),b.writeFieldEnd());if(a.events!=null){b.writeFieldBegin({fname:"events",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:135});b.writeListBegin({etype:h.I64,size:a.events.length});for(var d of a.events)b.writeI64(BigInt(d));b.writeListEnd();b.writeFieldEnd()}a.num_e2ee_message_received!=null&&(b.writeFieldBegin({fname:"num_e2ee_message_received",ftype:(h||(h=c("ThriftTypes"))).I64,fid:136}),b.writeI64(BigInt(a.num_e2ee_message_received)),b.writeFieldEnd());a.num_e2ee_message_error_decrypt_non_e2ee_received!=null&&(b.writeFieldBegin({fname:"num_e2ee_message_error_decrypt_non_e2ee_received",ftype:(h||(h=c("ThriftTypes"))).I64,fid:137}),b.writeI64(BigInt(a.num_e2ee_message_error_decrypt_non_e2ee_received)),b.writeFieldEnd());a.num_e2ee_message_error_decrypt_missing_sender!=null&&(b.writeFieldBegin({fname:"num_e2ee_message_error_decrypt_missing_sender",ftype:(h||(h=c("ThriftTypes"))).I64,fid:138}),b.writeI64(BigInt(a.num_e2ee_message_error_decrypt_missing_sender)),b.writeFieldEnd());a.num_e2ee_message_error_decrypt_exceeding_retry!=null&&(b.writeFieldBegin({fname:"num_e2ee_message_error_decrypt_exceeding_retry",ftype:(h||(h=c("ThriftTypes"))).I64,fid:139}),b.writeI64(BigInt(a.num_e2ee_message_error_decrypt_exceeding_retry)),b.writeFieldEnd());a.max_media_channel_key_message_retry_count!=null&&(b.writeFieldBegin({fname:"max_media_channel_key_message_retry_count",ftype:(h||(h=c("ThriftTypes"))).I64,fid:140}),b.writeI64(BigInt(a.max_media_channel_key_message_retry_count)),b.writeFieldEnd());a.g_e2ee_total_count_of_extra_decryptions!=null&&(b.writeFieldBegin({fname:"g_e2ee_total_count_of_extra_decryptions",ftype:(h||(h=c("ThriftTypes"))).I64,fid:141}),b.writeI64(BigInt(a.g_e2ee_total_count_of_extra_decryptions)),b.writeFieldEnd());a.g_e2ee_total_count_of_extra_decryptions_failures!=null&&(b.writeFieldBegin({fname:"g_e2ee_total_count_of_extra_decryptions_failures",ftype:(h||(h=c("ThriftTypes"))).I64,fid:142}),b.writeI64(BigInt(a.g_e2ee_total_count_of_extra_decryptions_failures)),b.writeFieldEnd());a.g_e2ee_total_count_of_extra_decryptions_failures_due_to_missing_key!=null&&(b.writeFieldBegin({fname:"g_e2ee_total_count_of_extra_decryptions_failures_due_to_missing_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:143}),b.writeI64(BigInt(a.g_e2ee_total_count_of_extra_decryptions_failures_due_to_missing_key)),b.writeFieldEnd());a.g_e2ee_decryption_error_frames_empty_supported_codes!=null&&(b.writeFieldBegin({fname:"g_e2ee_decryption_error_frames_empty_supported_codes",ftype:(h||(h=c("ThriftTypes"))).I64,fid:144}),b.writeI64(BigInt(a.g_e2ee_decryption_error_frames_empty_supported_codes)),b.writeFieldEnd());a.g_e2ee_encryption_error_frames_empty!=null&&(b.writeFieldBegin({fname:"g_e2ee_encryption_error_frames_empty",ftype:(h||(h=c("ThriftTypes"))).I64,fid:146}),b.writeI64(BigInt(a.g_e2ee_encryption_error_frames_empty)),b.writeFieldEnd());a.g_e2ee_encryption_error_frames_empty_nalu_blocks!=null&&(b.writeFieldBegin({fname:"g_e2ee_encryption_error_frames_empty_nalu_blocks",ftype:(h||(h=c("ThriftTypes"))).I64,fid:147}),b.writeI64(BigInt(a.g_e2ee_encryption_error_frames_empty_nalu_blocks)),b.writeFieldEnd());a.g_e2ee_encryption_error_frames_invalid_h264!=null&&(b.writeFieldBegin({fname:"g_e2ee_encryption_error_frames_invalid_h264",ftype:(h||(h=c("ThriftTypes"))).I64,fid:148}),b.writeI64(BigInt(a.g_e2ee_encryption_error_frames_invalid_h264)),b.writeFieldEnd());a.g_e2ee_encryption_error_frames_invalid_h265!=null&&(b.writeFieldBegin({fname:"g_e2ee_encryption_error_frames_invalid_h265",ftype:(h||(h=c("ThriftTypes"))).I64,fid:149}),b.writeI64(BigInt(a.g_e2ee_encryption_error_frames_invalid_h265)),b.writeFieldEnd());a.g_e2ee_encryption_error_frames_invalid_h265_nalu_block!=null&&(b.writeFieldBegin({fname:"g_e2ee_encryption_error_frames_invalid_h265_nalu_block",ftype:(h||(h=c("ThriftTypes"))).I64,fid:150}),b.writeI64(BigInt(a.g_e2ee_encryption_error_frames_invalid_h265_nalu_block)),b.writeFieldEnd());a.g_e2ee_total_count_of_extra_encryptions!=null&&(b.writeFieldBegin({fname:"g_e2ee_total_count_of_extra_encryptions",ftype:(h||(h=c("ThriftTypes"))).I64,fid:151}),b.writeI64(BigInt(a.g_e2ee_total_count_of_extra_encryptions)),b.writeFieldEnd());a.g_e2ee_total_count_of_extra_encryptions_failures!=null&&(b.writeFieldBegin({fname:"g_e2ee_total_count_of_extra_encryptions_failures",ftype:(h||(h=c("ThriftTypes"))).I64,fid:152}),b.writeI64(BigInt(a.g_e2ee_total_count_of_extra_encryptions_failures)),b.writeFieldEnd());a.encryption_error_frames_no_active_key!=null&&(b.writeFieldBegin({fname:"encryption_error_frames_no_active_key",ftype:(h||(h=c("ThriftTypes"))).I64,fid:153}),b.writeI64(BigInt(a.encryption_error_frames_no_active_key)),b.writeFieldEnd());a.key_negotiation_protocol!=null&&(b.writeFieldBegin({fname:"key_negotiation_protocol",ftype:(h||(h=c("ThriftTypes"))).I64,fid:154}),b.writeI64(BigInt(a.key_negotiation_protocol)),b.writeFieldEnd());a.key_messages_received_via_signaling!=null&&(b.writeFieldBegin({fname:"key_messages_received_via_signaling",ftype:(h||(h=c("ThriftTypes"))).I64,fid:155}),b.writeI64(BigInt(a.key_messages_received_via_signaling)),b.writeFieldEnd());a.key_messages_received_via_media!=null&&(b.writeFieldBegin({fname:"key_messages_received_via_media",ftype:(h||(h=c("ThriftTypes"))).I64,fid:156}),b.writeI64(BigInt(a.key_messages_received_via_media)),b.writeFieldEnd());a.key_messages_received_via_signaling_joiner!=null&&(b.writeFieldBegin({fname:"key_messages_received_via_signaling_joiner",ftype:(h||(h=c("ThriftTypes"))).I64,fid:157}),b.writeI64(BigInt(a.key_messages_received_via_signaling_joiner)),b.writeFieldEnd());a.key_messages_received_via_media_joiner!=null&&(b.writeFieldBegin({fname:"key_messages_received_via_media_joiner",ftype:(h||(h=c("ThriftTypes"))).I64,fid:158}),b.writeI64(BigInt(a.key_messages_received_via_media_joiner)),b.writeFieldEnd());a.g_e2ee_participant_hash_verification_failed_error!=null&&(b.writeFieldBegin({fname:"g_e2ee_participant_hash_verification_failed_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:159}),b.writeI64(BigInt(a.g_e2ee_participant_hash_verification_failed_error)),b.writeFieldEnd());a.g_e2ee_invalid_key_distributor_id_error!=null&&(b.writeFieldBegin({fname:"g_e2ee_invalid_key_distributor_id_error",ftype:(h||(h=c("ThriftTypes"))).I64,fid:160}),b.writeI64(BigInt(a.g_e2ee_invalid_key_distributor_id_error)),b.writeFieldEnd());a.g_e2ee_key_message_validation_failure_count!=null&&(b.writeFieldBegin({fname:"g_e2ee_key_message_validation_failure_count",ftype:(h||(h=c("ThriftTypes"))).I64,fid:161}),b.writeI64(BigInt(a.g_e2ee_key_message_validation_failure_count)),b.writeFieldEnd());a.g_e2ee_cached_decrypted_key_count!=null&&(b.writeFieldBegin({fname:"g_e2ee_cached_decrypted_key_count",ftype:(h||(h=c("ThriftTypes"))).I64,fid:162}),b.writeI64(BigInt(a.g_e2ee_cached_decrypted_key_count)),b.writeFieldEnd());a.g_e2ee_reapply_cached_decrypted_key_count!=null&&(b.writeFieldBegin({fname:"g_e2ee_reapply_cached_decrypted_key_count",ftype:(h||(h=c("ThriftTypes"))).I64,fid:163}),b.writeI64(BigInt(a.g_e2ee_reapply_cached_decrypted_key_count)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function b(a,b){b.writeStructBegin("E2eeMetrics");b.writeFieldBegin({fname:"p2p_e2ee",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.p2p_e2ee!=null)k(a.p2p_e2ee,b);else{var d=i();k(d,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"group_e2ee",ftype:h.STRUCT,fid:2});if(a.group_e2ee!=null)l(a.group_e2ee,b);else{d=j();l(d,b)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function m(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.engine_type=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.status=a.readI64().toString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I64?b.version=a.readI64().toString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I64?b.gen_prekey_bundle_time_ms=a.readI64().toString():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).I64?b.encrypted_msg_time_ms=a.readI64().toString():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).I64?b.decrypted_msg_time_ms=a.readI64().toString():a.skip(e);break;case 7:e===(h||(h=c("ThriftTypes"))).I64?b.process_sdp_crypto_time_ms=a.readI64().toString():a.skip(e);break;case 8:e===(h||(h=c("ThriftTypes"))).I64?b.create_crypto_offer_time_ms=a.readI64().toString():a.skip(e);break;case 9:e===(h||(h=c("ThriftTypes"))).I64?b.create_crypto_answer_time_ms=a.readI64().toString():a.skip(e);break;case 10:e===(h||(h=c("ThriftTypes"))).I64?b.get_ik_time_ms=a.readI64().toString():a.skip(e);break;case 11:e===(h||(h=c("ThriftTypes"))).I64?b.peer_id=a.readI64().toString():a.skip(e);break;case 12:e===(h||(h=c("ThriftTypes"))).I64?b.peer_connection_index=a.readI64().toString():a.skip(e);break;case 13:e===(h||(h=c("ThriftTypes"))).I64?b.srtp_crypto_suite=a.readI64().toString():a.skip(e);break;case 14:e===(h||(h=c("ThriftTypes"))).I64?b.engine_error=a.readI64().toString():a.skip(e);break;case 15:e===(h||(h=c("ThriftTypes"))).I64?b.libsignal_error=a.readI64().toString():a.skip(e);break;case 16:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_mode=a.readI64().toString():a.skip(e);break;case 17:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_num_persistent=a.readI64().toString():a.skip(e);break;case 18:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_num_validated=a.readI64().toString():a.skip(e);break;case 19:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_num_saved=a.readI64().toString():a.skip(e);break;case 20:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_num_existing=a.readI64().toString():a.skip(e);break;case 21:e===(h||(h=c("ThriftTypes"))).I64?b.is_e2ee_mandated=a.readI64().toString():a.skip(e);break;case 22:e===(h||(h=c("ThriftTypes"))).I64?b.local_trace_id=a.readI64().toString():a.skip(e);break;case 23:e===(h||(h=c("ThriftTypes"))).I64?b.remote_trace_id=a.readI64().toString():a.skip(e);break;case 24:e===(h||(h=c("ThriftTypes"))).I64?b.local_device_id=a.readI64().toString():a.skip(e);break;case 25:e===(h||(h=c("ThriftTypes"))).I64?b.remote_device_id=a.readI64().toString():a.skip(e);break;case 26:if(e===(h||(h=c("ThriftTypes"))).LIST){b.events=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readI64().toString();b.events.push(g)}}else a.skip(e);break;case 27:e===(h||(h=c("ThriftTypes"))).I64?b.gen_dtls_auth_info_status=a.readI64().toString():a.skip(e);break;case 28:e===(h||(h=c("ThriftTypes"))).I64?b.gen_dtls_auth_info_libsignal_status=a.readI64().toString():a.skip(e);break;case 29:e===(h||(h=c("ThriftTypes"))).I64?b.gen_dtls_auth_info_time_ms=a.readI64().toString():a.skip(e);break;case 30:e===(h||(h=c("ThriftTypes"))).I64?b.verify_dtls_auth_info_status=a.readI64().toString():a.skip(e);break;case 31:e===(h||(h=c("ThriftTypes"))).I64?b.verify_dtls_auth_info_libsignal_status=a.readI64().toString():a.skip(e);break;case 32:e===(h||(h=c("ThriftTypes"))).I64?b.verify_dtls_auth_info_time_ms=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function n(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.received_key_message_counter=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.sent_key_message_counter=a.readI64().toString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I64?b.cached_key_message_counter=a.readI64().toString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I64?b.used_cached_key_counter=a.readI64().toString():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).I64?b.unused_smu_counter=a.readI64().toString():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).I64?b.missing_key_message_counter=a.readI64().toString():a.skip(e);break;case 7:e===(h||(h=c("ThriftTypes"))).I64?b.negotiate_off_status=a.readI64().toString():a.skip(e);break;case 8:e===(h||(h=c("ThriftTypes"))).I64?b.cipher_suite_status=a.readI64().toString():a.skip(e);break;case 9:e===(h||(h=c("ThriftTypes"))).I64?b.decrypt_used_cached_session_counter=a.readI64().toString():a.skip(e);break;case 10:e===(h||(h=c("ThriftTypes"))).I64?b.encrypt_used_cached_session_counter=a.readI64().toString():a.skip(e);break;case 11:e===(h||(h=c("ThriftTypes"))).I64?b.sent_ack_message_counter=a.readI64().toString():a.skip(e);break;case 12:e===(h||(h=c("ThriftTypes"))).I64?b.reuse_ackd_uid_counter=a.readI64().toString():a.skip(e);break;case 13:e===(h||(h=c("ThriftTypes"))).I64?b.total_uids_created_counter=a.readI64().toString():a.skip(e);break;case 14:e===(h||(h=c("ThriftTypes"))).I64?b.generate_chain_key_failed_error=a.readI64().toString():a.skip(e);break;case 15:e===(h||(h=c("ThriftTypes"))).I64?b.set_chain_key_failed_error=a.readI64().toString():a.skip(e);break;case 16:e===(h||(h=c("ThriftTypes"))).I64?b.key_provider_not_found_error=a.readI64().toString():a.skip(e);break;case 17:e===(h||(h=c("ThriftTypes"))).I64?b.key_message_parse_failed_error=a.readI64().toString():a.skip(e);break;case 18:e===(h||(h=c("ThriftTypes"))).I64?b.empty_pkb_result_error=a.readI64().toString():a.skip(e);break;case 19:e===(h||(h=c("ThriftTypes"))).I64?b.empty_encrypt_result_error=a.readI64().toString():a.skip(e);break;case 20:e===(h||(h=c("ThriftTypes"))).I64?b.empty_decrypt_result_error=a.readI64().toString():a.skip(e);break;case 21:e===(h||(h=c("ThriftTypes"))).I64?b.empty_version_error=a.readI64().toString():a.skip(e);break;case 22:e===(h||(h=c("ThriftTypes"))).I64?b.unsupported_version_error=a.readI64().toString():a.skip(e);break;case 23:e===(h||(h=c("ThriftTypes"))).I64?b.midcall_version_change_error=a.readI64().toString():a.skip(e);break;case 24:e===(h||(h=c("ThriftTypes"))).I64?b.inconsistent_remote_maps_error=a.readI64().toString():a.skip(e);break;case 25:e===(h||(h=c("ThriftTypes"))).I64?b.key_message_pkb_mismatch_error=a.readI64().toString():a.skip(e);break;case 26:e===(h||(h=c("ThriftTypes"))).I64?b.no_key_or_ack_in_e2ee_message_error=a.readI64().toString():a.skip(e);break;case 27:e===(h||(h=c("ThriftTypes"))).I64?b.receiver_key_provider_not_found_error=a.readI64().toString():a.skip(e);break;case 28:e===(h||(h=c("ThriftTypes"))).I64?b.pkb_parse_failed_error=a.readI64().toString():a.skip(e);break;case 29:e===(h||(h=c("ThriftTypes"))).I64?b.message_deserialized_failed_error=a.readI64().toString():a.skip(e);break;case 30:e===(h||(h=c("ThriftTypes"))).I64?b.decrypt_no_identity_key_and_cached_session_not_used_error=a.readI64().toString():a.skip(e);break;case 31:e===(h||(h=c("ThriftTypes"))).I64?b.encrypt_no_identity_key_and_cached_session_not_used_error=a.readI64().toString():a.skip(e);break;case 32:e===(h||(h=c("ThriftTypes"))).I64?b.decrypt_ack_wrong_message_error=a.readI64().toString():a.skip(e);break;case 33:e===(h||(h=c("ThriftTypes"))).I64?b.invalid_uid_received_error=a.readI64().toString():a.skip(e);break;case 34:e===(h||(h=c("ThriftTypes"))).I64?b.ack_for_absent_user=a.readI64().toString():a.skip(e);break;case 35:e===(h||(h=c("ThriftTypes"))).I64?b.uid_not_awaiting_ack_error=a.readI64().toString():a.skip(e);break;case 36:e===(h||(h=c("ThriftTypes"))).I64?b.decrypt_ack_error=a.readI64().toString():a.skip(e);break;case 37:e===(h||(h=c("ThriftTypes"))).I64?b.empty_decrypt_result_ack_error=a.readI64().toString():a.skip(e);break;case 38:e===(h||(h=c("ThriftTypes"))).I64?b.decrypt_ack_cached_session_not_used_error=a.readI64().toString():a.skip(e);break;case 39:e===(h||(h=c("ThriftTypes"))).I64?b.encrypt_ack_error=a.readI64().toString():a.skip(e);break;case 40:e===(h||(h=c("ThriftTypes"))).I64?b.empty_encrypt_result_ack_error=a.readI64().toString():a.skip(e);break;case 41:e===(h||(h=c("ThriftTypes"))).I64?b.invalid_message_type_error=a.readI64().toString():a.skip(e);break;case 42:e===(h||(h=c("ThriftTypes"))).I64?b.server_state_deserialized_failed_error=a.readI64().toString():a.skip(e);break;case 43:e===(h||(h=c("ThriftTypes"))).I64?b.crypto_engine_failure_error=a.readI64().toString():a.skip(e);break;case 44:e===(h||(h=c("ThriftTypes"))).I64?b.empty_e2ee_client_state_error=a.readI64().toString():a.skip(e);break;case 45:e===(h||(h=c("ThriftTypes"))).I64?b.group_e2ee_negotiated=a.readI64().toString():a.skip(e);break;case 46:e===(h||(h=c("ThriftTypes"))).I64?b.negotiation_mode_kn=a.readI64().toString():a.skip(e);break;case 47:e===(h||(h=c("ThriftTypes"))).I64?b.group_e2ee_setup_status=a.readI64().toString():a.skip(e);break;case 48:e===(h||(h=c("ThriftTypes"))).I64?b.enable_group_e2ee=a.readI64().toString():a.skip(e);break;case 49:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_mode_group=a.readI64().toString():a.skip(e);break;case 50:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_num_persistent_group=a.readI64().toString():a.skip(e);break;case 51:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_num_validated_group=a.readI64().toString():a.skip(e);break;case 52:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_num_saved_group=a.readI64().toString():a.skip(e);break;case 53:e===(h||(h=c("ThriftTypes"))).I64?b.identity_key_num_existing_group=a.readI64().toString():a.skip(e);break;case 54:e===(h||(h=c("ThriftTypes"))).I64?b.max_key_message_latency_ms=a.readI64().toString():a.skip(e);break;case 55:e===(h||(h=c("ThriftTypes"))).I64?b.max_key_message_latency_ms_joiner=a.readI64().toString():a.skip(e);break;case 56:e===(h||(h=c("ThriftTypes"))).I64?b.max_smu_to_key_message_latency_ms=a.readI64().toString():a.skip(e);break;case 57:e===(h||(h=c("ThriftTypes"))).I64?b.process_smu_time_ms=a.readI64().toString():a.skip(e);break;case 58:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_total_frames=a.readI64().toString():a.skip(e);break;case 59:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_total_error_frames=a.readI64().toString():a.skip(e);break;case 60:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_alloc=a.readI64().toString():a.skip(e);break;case 61:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_invalid_params=a.readI64().toString():a.skip(e);break;case 62:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_cipher=a.readI64().toString():a.skip(e);break;case 63:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_parse=a.readI64().toString():a.skip(e);break;case 64:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_invalid_key=a.readI64().toString():a.skip(e);break;case 65:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_missing_key=a.readI64().toString():a.skip(e);break;case 66:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_out_of_ratchet_space=a.readI64().toString():a.skip(e);break;case 67:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_cipher_auth=a.readI64().toString():a.skip(e);break;case 68:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_frame_too_old=a.readI64().toString():a.skip(e);break;case 69:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_seen_frame=a.readI64().toString():a.skip(e);break;case 70:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_invalid_frame=a.readI64().toString():a.skip(e);break;case 71:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_setting_invalid_key=a.readI64().toString():a.skip(e);break;case 72:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_setting_existing_key=a.readI64().toString():a.skip(e);break;case 73:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_escape_data=a.readI64().toString():a.skip(e);break;case 74:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_deescape_data=a.readI64().toString():a.skip(e);break;case 75:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_parse_frame_or_key=a.readI64().toString():a.skip(e);break;case 76:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_unknown=a.readI64().toString():a.skip(e);break;case 77:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_unencrypted_frames=a.readI64().toString():a.skip(e);break;case 78:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_total_frames=a.readI64().toString():a.skip(e);break;case 79:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames=a.readI64().toString():a.skip(e);break;case 80:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_escape_bytes=a.readI64().toString():a.skip(e);break;case 81:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_total_error_frames=a.readI64().toString():a.skip(e);break;case 82:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_alloc=a.readI64().toString():a.skip(e);break;case 83:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_invalid_params=a.readI64().toString():a.skip(e);break;case 84:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_cipher=a.readI64().toString():a.skip(e);break;case 85:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_parse=a.readI64().toString():a.skip(e);break;case 86:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_invalid_key=a.readI64().toString():a.skip(e);break;case 87:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_cipher_auth=a.readI64().toString():a.skip(e);break;case 88:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_escape_data=a.readI64().toString():a.skip(e);break;case 89:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_unsupported_codec=a.readI64().toString():a.skip(e);break;case 90:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_unknown=a.readI64().toString():a.skip(e);break;case 91:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_total_frames_data_channel=a.readI64().toString():a.skip(e);break;case 92:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_total_error_frames_data_channel=a.readI64().toString():a.skip(e);break;case 93:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_alloc=a.readI64().toString():a.skip(e);break;case 94:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_invalid_params=a.readI64().toString():a.skip(e);break;case 95:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_cipher=a.readI64().toString():a.skip(e);break;case 96:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_parse=a.readI64().toString():a.skip(e);break;case 97:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_invalid_key=a.readI64().toString():a.skip(e);break;case 98:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_missing_key=a.readI64().toString():a.skip(e);break;case 99:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_out_of_ratchet_space=a.readI64().toString():a.skip(e);break;case 100:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_cipher_auth=a.readI64().toString():a.skip(e);break;case 101:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_frame_too_old=a.readI64().toString():a.skip(e);break;case 102:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_seen_frame=a.readI64().toString():a.skip(e);break;case 103:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_invalid_frame=a.readI64().toString():a.skip(e);break;case 104:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_setting_invalid_key=a.readI64().toString():a.skip(e);break;case 105:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_setting_existing_key=a.readI64().toString():a.skip(e);break;case 106:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_escape_data=a.readI64().toString():a.skip(e);break;case 107:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_deescape_data=a.readI64().toString():a.skip(e);break;case 108:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_parse_frame_or_key=a.readI64().toString():a.skip(e);break;case 109:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_error_frames_data_channel_unknown=a.readI64().toString():a.skip(e);break;case 110:e===(h||(h=c("ThriftTypes"))).I64?b.decryption_unencrypted_frames_data_channel=a.readI64().toString():a.skip(e);break;case 111:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_total_frames_data_channel=a.readI64().toString():a.skip(e);break;case 112:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel=a.readI64().toString():a.skip(e);break;case 113:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_total_error_frames_data_channel=a.readI64().toString():a.skip(e);break;case 114:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel_alloc=a.readI64().toString():a.skip(e);break;case 115:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel_invalid_params=a.readI64().toString():a.skip(e);break;case 116:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel_cipher=a.readI64().toString():a.skip(e);break;case 117:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel_parse=a.readI64().toString():a.skip(e);break;case 118:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel_invalid_key=a.readI64().toString():a.skip(e);break;case 119:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel_cipher_auth=a.readI64().toString():a.skip(e);break;case 120:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel_escape_data=a.readI64().toString():a.skip(e);break;case 121:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel_unsupported_codec=a.readI64().toString():a.skip(e);break;case 122:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_data_channel_unknown=a.readI64().toString():a.skip(e);break;case 123:e===(h||(h=c("ThriftTypes"))).I64?b.num_removed_data_decryptors=a.readI64().toString():a.skip(e);break;case 124:e===(h||(h=c("ThriftTypes"))).I64?b.num_frame_decryptor_with_unencrypted_data=a.readI64().toString():a.skip(e);break;case 125:e===(h||(h=c("ThriftTypes"))).I64?b.num_removed_decryptors=a.readI64().toString():a.skip(e);break;case 126:e===(h||(h=c("ThriftTypes"))).I64?b.data_channel_encryption_not_ready_in_mandated_calls_error=a.readI64().toString():a.skip(e);break;case 127:e===(h||(h=c("ThriftTypes"))).I64?b.num_e2ee_message_total_encrypt=a.readI64().toString():a.skip(e);break;case 128:e===(h||(h=c("ThriftTypes"))).I64?b.num_e2ee_message_error_encrypt=a.readI64().toString():a.skip(e);break;case 129:e===(h||(h=c("ThriftTypes"))).I64?b.num_e2ee_message_total_decrypt=a.readI64().toString():a.skip(e);break;case 130:e===(h||(h=c("ThriftTypes"))).I64?b.num_e2ee_message_error_decrypt=a.readI64().toString():a.skip(e);break;case 131:e===(h||(h=c("ThriftTypes"))).I64?b.negotiate_off_time=a.readI64().toString():a.skip(e);break;case 132:e===(h||(h=c("ThriftTypes"))).I64?b.negotiated_version=a.readI64().toString():a.skip(e);break;case 133:e===(h||(h=c("ThriftTypes"))).I64?b.decryptor_removed_time=a.readI64().toString():a.skip(e);break;case 134:e===(h||(h=c("ThriftTypes"))).I64?b.is_e2ee_mandated_group=a.readI64().toString():a.skip(e);break;case 135:if(e===(h||(h=c("ThriftTypes"))).LIST){b.events=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readI64().toString();b.events.push(g)}}else a.skip(e);break;case 136:e===(h||(h=c("ThriftTypes"))).I64?b.num_e2ee_message_received=a.readI64().toString():a.skip(e);break;case 137:e===(h||(h=c("ThriftTypes"))).I64?b.num_e2ee_message_error_decrypt_non_e2ee_received=a.readI64().toString():a.skip(e);break;case 138:e===(h||(h=c("ThriftTypes"))).I64?b.num_e2ee_message_error_decrypt_missing_sender=a.readI64().toString():a.skip(e);break;case 139:e===(h||(h=c("ThriftTypes"))).I64?b.num_e2ee_message_error_decrypt_exceeding_retry=a.readI64().toString():a.skip(e);break;case 140:e===(h||(h=c("ThriftTypes"))).I64?b.max_media_channel_key_message_retry_count=a.readI64().toString():a.skip(e);break;case 141:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_total_count_of_extra_decryptions=a.readI64().toString():a.skip(e);break;case 142:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_total_count_of_extra_decryptions_failures=a.readI64().toString():a.skip(e);break;case 143:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_total_count_of_extra_decryptions_failures_due_to_missing_key=a.readI64().toString():a.skip(e);break;case 144:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_decryption_error_frames_empty_supported_codes=a.readI64().toString():a.skip(e);break;case 146:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_encryption_error_frames_empty=a.readI64().toString():a.skip(e);break;case 147:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_encryption_error_frames_empty_nalu_blocks=a.readI64().toString():a.skip(e);break;case 148:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_encryption_error_frames_invalid_h264=a.readI64().toString():a.skip(e);break;case 149:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_encryption_error_frames_invalid_h265=a.readI64().toString():a.skip(e);break;case 150:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_encryption_error_frames_invalid_h265_nalu_block=a.readI64().toString():a.skip(e);break;case 151:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_total_count_of_extra_encryptions=a.readI64().toString():a.skip(e);break;case 152:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_total_count_of_extra_encryptions_failures=a.readI64().toString():a.skip(e);break;case 153:e===(h||(h=c("ThriftTypes"))).I64?b.encryption_error_frames_no_active_key=a.readI64().toString():a.skip(e);break;case 154:e===(h||(h=c("ThriftTypes"))).I64?b.key_negotiation_protocol=a.readI64().toString():a.skip(e);break;case 155:e===(h||(h=c("ThriftTypes"))).I64?b.key_messages_received_via_signaling=a.readI64().toString():a.skip(e);break;case 156:e===(h||(h=c("ThriftTypes"))).I64?b.key_messages_received_via_media=a.readI64().toString():a.skip(e);break;case 157:e===(h||(h=c("ThriftTypes"))).I64?b.key_messages_received_via_signaling_joiner=a.readI64().toString():a.skip(e);break;case 158:e===(h||(h=c("ThriftTypes"))).I64?b.key_messages_received_via_media_joiner=a.readI64().toString():a.skip(e);break;case 159:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_participant_hash_verification_failed_error=a.readI64().toString():a.skip(e);break;case 160:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_invalid_key_distributor_id_error=a.readI64().toString():a.skip(e);break;case 161:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_key_message_validation_failure_count=a.readI64().toString():a.skip(e);break;case 162:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_cached_decrypted_key_count=a.readI64().toString():a.skip(e);break;case 163:e===(h||(h=c("ThriftTypes"))).I64?b.g_e2ee_reapply_cached_decrypted_key_count=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function d(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.p2p_e2ee=m(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRUCT?b.group_e2ee=n(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.p2p_e2ee===void 0&&(b.p2p_e2ee=i());b.group_e2ee===void 0&&(b.group_e2ee=j());return b}g.P2pE2eeMetrics$DefaultConstructor=i;g.GroupE2eeMetrics$DefaultConstructor=j;g.E2eeMetrics$DefaultConstructor=a;g.serializeP2pE2eeMetrics=k;g.serializeGroupE2eeMetrics=l;g.serializeE2eeMetrics=b;g.deserializeP2pE2eeMetrics=m;g.deserializeGroupE2eeMetrics=n;g.deserializeE2eeMetrics=d}),98);
__d("HorizonWebMqttChannel",["CurrentUser","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig"],(function(a,b,c,d,e,f,g){"use strict";c("MqttEnvInitializer").initialize();function h(){var a;d("MqttEnv").setIsUserLoggedInNow(c("CurrentUser").isLoggedIn);return new(c("MqttChannel"))({appId:(a=c("MqttWebConfig")).appID,capabilities:a.capabilities,chatVisibility:!0,clientCapabilities:a.clientCapabilities,endpoint:a.endpoint,initialSubscribedTopics:a.subscribedTopics,pageId:null,phpOverride:a.hostNameOverride,pollingEndpoint:a.pollingEndpoint,userFbid:a.fbid})}var i=null;function a(){i==null&&(i=h());return i}function b(){i!=null&&(i.shutdown(),i=null)}g.getHorizonWebMqttChannelInstance=a;g.shutdownAndClear=b}),98);
__d("decodeIgSignalingPayload",["TCompactProtocol","TReadBuffer","ThriftTypes"],(function(a,b,c,d,e,f,g){"use strict";var h,i=2;function a(a){a=new(c("TReadBuffer"))(a);a=new(c("TCompactProtocol"))(a);var b=null;a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case i:e===(h||(h=c("ThriftTypes"))).STRING?b=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}g["default"]=a}),98);
__d("IgSignalingListener",["FBLogger","IGDOverLSMqttChannel","RequestStreamBodyUtils","ZenonMWThriftMessageDebugLogger","ZenonMWThriftMessageReliabilityLogger","ZenonMWThriftMessageSerializer","ZenonMWThriftMessageTranslator","decodeIgSignalingPayload","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h=d("IGDOverLSMqttChannel").waitAndGetInstance();a=function(){function a(){}var b=a.prototype;b.setLoggingEventHandler=function(a){this.$1=a};b.subscribe=function(a,b){var e=this;c("promiseDone")(h.then(function(f){f.subscribeBinary("/pubsub",function(f){try{f=c("nullthrows")(c("decodeIgSignalingPayload")(f));f=JSON.parse(f);f=d("RequestStreamBodyUtils").base64ToUint8Array(f.binaryPayload);f=d("ZenonMWThriftMessageSerializer").deserializeMWThriftMessage(f,!0);d("ZenonMWThriftMessageReliabilityLogger").logReceivedMessage(f);c("ZenonMWThriftMessageDebugLogger").logMWThriftMessage("RECEIVED","MQTT Thrift",f);e.$1&&e.$1({mwThriftMessage:f,name:"mwThriftMessageRecv"});var g=d("ZenonMWThriftMessageTranslator").toSignalingMessage(f);if(g==null)return;a(g);b&&e.$2(f,g,b);d("ZenonMWThriftMessageReliabilityLogger").logProcessingMessage(f)}catch(a){c("FBLogger")("rpweb").catching(a).mustfix("Error receiving MQTT message from /pubsub topic")}})}))};b.unsubscribe=function(){c("promiseDone")(h.then(function(a){a.unsubscribeAll("/webrtc"),a.unsubscribeAll("/pubsub")}))};b.$2=function(a,b,d){try{d(a,b)}catch(a){d=c("FBLogger")("rtweb");a instanceof Error&&d.catching(a);d.mustfix("Signaling messages should be json parsable. error")}};return a}();g["default"]=a}),98);
__d("KeyframesPluginLogger",["BanzaiLogger","CurrentUser"],(function(a,b,c,d,e,f,g){"use strict";var h="KeyframesFramePerfLoggerConfig",i={appid:256281040558,isemployee:c("CurrentUser").isEmployee()?1:0},j={LOAD_ATTEMPT:"plugin_load_attempt",LOAD_ATTEMPT_KF3:"plugin_load_attempt_compat"};function k(a,b){if(a==null)return;a.forEach(function(a){c("BanzaiLogger").log(h,babelHelpers["extends"]({},i,{name:b,extras:a}))})}a={log:function(a){k(a,j.LOAD_ATTEMPT)},logCompat:function(a){k(a,j.LOAD_ATTEMPT_KF3)}};g.KeyframesPluginLogger=a}),98);
__d("KeyframesCompatPluginsLoader",["Bootloader","FBLogger","KeyframesPluginLogger","Promise","flatbuffers"],(function(a,b,c,d,e,f,g){"use strict";var h,i={TrimPath:function(a){return c("Bootloader").loadModules(["KeyframesCompatPluginTrimPath","KeyframesPluginTrimPathSchema"],a,"KeyframesCompatPluginsLoader")},RandomSubdocument:function(a){return c("Bootloader").loadModules(["KeyframesCompatPluginRandomSubdocument","KeyframesPluginRandomSubdocumentSchema"],a,"KeyframesCompatPluginsLoader")}};function j(a,b){if(i[a]==null){c("FBLogger")("KeyframesCompatPluginsLoader").warn("Attempted to load undefined module: %s",a);return null}return i[a](b)}function k(a){a=a.map(function(a){return new(h||(h=b("Promise")))(function(b,c){var d=j(a,function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];b(c)});d||c("Error when loading plugin "+a)})});return(h||(h=b("Promise"))).allSettled(a)}a=function(){function a(a,b,c){this.$2={},this.$4=a,this.$3=b,this.$1=c,this.$2={}}a.fromPluginTable=function(b,c){d("KeyframesPluginLogger").KeyframesPluginLogger.logCompat(b);return k(b).then(function(d){d=d.filter(function(a){return a.status==="fulfilled"}).map(function(a){return a.value}).filter(Boolean);return new a(b,d,c)})["catch"](function(){return null})};var b=a.prototype;b.maybeInstantiatePluginsForLayer=function(a,b){if(a==null)return;var c=a.pluginsLength();if(c==null||c===0)return;var e=a.id();e=e+"-"+b.getID();if(this.$2[e]===!0)return;for(var f=0;f<c;f++){var g=a.plugins(f),h=g.index(),i=this.$3[h];if(i==null)continue;g=new(d("flatbuffers").ByteBuffer)(g.contentArray());var j=i[0];i=i[1];h="getRootAsPlugin"+this.$4[h];i=i[h](g);h=new j(i,a,this.$1);h.animationDidLoadCompat(b)}this.$2[e]=!0};return a}();g["default"]=a}),98);
__d("KF2Loader",["BlobFactory","CubicBezier","KFColor","KFComponentNames","KFGradient","KFLoaderUtils","KFManifest","KFPath2d","KFPoint","KFPosition","KFScalar","KeyframesCompatPluginsLoader","KeyframesSchema","Promise","asyncToGeneratorRuntime","flatbuffers"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return a};function e(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){a=new(d("flatbuffers").ByteBuffer)(a);a=c("KeyframesSchema").Document.bufferHasIdentifier(a)?c("KeyframesSchema").Document.getRootAsDocument(a):null;G(a);var f=(yield l(a,b));b.addComponent(m(a,b,e,f),d("KFComponentNames").ROOT);c("KFLoaderUtils").maybeGenerateTrackMatteIDs(b)});return j.apply(this,arguments)}function k(a){var b=[];for(var c=a.pluginsLength()-1;c>=0;c--)b.unshift(a.plugins(c));return b}function l(a,d){return new(h||(h=b("Promise")))(function(b,e){if(a==null)return b(null);e=k(a);return e.length===0?b(null):b(c("KeyframesCompatPluginsLoader").fromPluginTable(e,d))})}function m(a,b,e,f){var g=I(a,e),h=a.subdocumentsLength(),i=[];for(var j=0;j<h;j++)i.push(a.subdocuments(j));j=n(a.rootLayer(),b,e,g,i,f);b.addComponent(j,d("KFComponentNames").SCENE,[j],c("KFLoaderUtils").getDocumentDuration(a),a.frameRate(),C(a.size()));return j}function n(a,b,c,d,e,f){var g=b.createEntity();f!=null&&f.maybeInstantiatePluginsForLayer(a,g);p(g,b,a);q(g,b,a);r(g,b,a);w(g,b,a);t(g,b,a);x(g,b,a,d);o(g,b,a,c,d,e,f);return g}function o(a,b,c,e,f,g,h){c.sublayers();var i=c.sublayersLength(),j=c.subdocumentIndex(),k;if(i){k=b.addComponent(a,d("KFComponentNames").CHILDREN);for(var l=0;l<i;l++)k.addChild(n(c.sublayers(l),b,e,f,g,h))}if(j===-1)return;k=k||b.addComponent(a,d("KFComponentNames").CHILDREN);f=g.map(function(a){return m(a,b,e,h)});var o=b.getComponent(a,d("KFComponentNames").RANDOM_SUBDOCUMENT_CHILDREN);o==null&&(o=b.addComponent(a,d("KFComponentNames").RANDOM_SUBDOCUMENT_CHILDREN));f.forEach(function(a,b){b===j&&k.addChild(a),o.addSwappableChild(a,b===j)})}function p(a,b,c){b.addComponent(a,d("KFComponentNames").IDENTIFICATION,c.id())}function q(a,b,c){b.addComponent(a,d("KFComponentNames").TIME,c.fromProgress(),c.toProgress(),c.progressOffset())}function r(a,b,e){var f=s(e.position());f=new(c("KFPosition"))(D(d("KFScalar").KFScalar,e.xPosition(),i,0),D(d("KFScalar").KFScalar,e.yPosition(),i,0),f?new(c("KFPath2d"))(null,f):void 0);var g=D(d("KFScalar").KFScalar,e.rotation(),i,0),h=D(d("KFPoint").KFPoint,e.scale(),F,[1,1]);e=D(d("KFPoint").KFPoint,e.anchorPoint(),F,[0,0]);b.addComponent(a,d("KFComponentNames").TRANSFORM,f,g,h,e)}function s(a){if(!a)return;var b=a.keyframesLength(),c=u(a.value()),d=[],e=[];for(var f=0;f<b;f++)d.push(a.keyframes(f)),f<b-1&&e.push(H(a.tweens(f)));return{values:c,keyframes:d,tweens:e}}function t(a,b,e){var f=e.path();f=f?D(c("KFPath2d"),e.path(),u):void 0;if(f){var g,h=D((g=d("KFScalar")).KFScalar,void 0,i,0),j=D(g.KFScalar,void 0,i,100),k=D(g.KFScalar,void 0,i,0),l=D(d("KFColor").KFColor,e.fillColor(),y,[255,255,255,0]),m=B(e.gradient()),n=D(g.KFScalar,e.strokeWidth(),i,0),o=D(d("KFColor").KFColor,e.strokeColor(),y,[255,255,255,0]);g=D(g.KFScalar,e.miterLimit(),i,0);b.addComponent(a,d("KFComponentNames").SHAPE,f,h,j,k,l,m,o,n,e.strokeLineCap(),e.strokeLineJoin(),g,e.vectorCompositeOrder())}}function u(a){var b=a.commandsLength(),c=[];for(var d=0;d<b;d++)c.push(v(a.commands(d)));return c}function v(a){var b=a.control1(),c=a.control2();return{type:a.type(),point:F(a.point()),c1:b?F(b):null,c2:c?F(c):null}}function w(a,b,e){var f=D(d("KFScalar").KFScalar,e.opacity(),i,1),g=e.isTrackMatte(),h=e.trackMatteType();e=D(c("KFPath2d"),e.clippingPath(),u);b.addComponent(a,d("KFComponentNames").COMPOSITING,0,f,!0,g,h,void 0,e)}function x(a,b,c,e){c=c.bitmapIndex();c!==-1&&b.addComponent(a,d("KFComponentNames").IMAGE,e.bitmaps[c])}function y(a){return[a.red(),a.green(),a.blue(),a.alpha()]}function z(a){var b=[],c=a.colorsLength();for(var d=0;d<c;d++)b.push(y(a.colors(d)));return b}function A(a){var b=[],c=a.valuesLength();for(var d=0;d<c;d++)b.push(a.values(d));return b}function B(a){if(!a)return;var b=a.type(),e=D(d("KFScalar").KFScalarArray,a.positions(),A),f=D(d("KFColor").KFColorArray,a.colors(),z),g=D(d("KFPoint").KFPoint,a.rampStart(),F),h=D(d("KFPoint").KFPoint,a.rampEnd(),F),j=D(d("KFColor").KFColor,a.colorStart(),y),k=D(d("KFColor").KFColor,a.colorEnd(),y),l,m;b===c("KeyframesSchema").GradientType.Radial&&(l=D(d("KFScalar").KFScalar,a.highlightAngle(),i,0),m=D(d("KFScalar").KFScalar,a.highlightLength(),i,0));return new(c("KFGradient"))(b,e,f,g,h,l,m,j,k)}function C(a){return a?{width:a.width(),height:a.height()}:null}function D(a,b,c,d){d===void 0&&(d=0);if(b){b=E(b,c,d);return new a(b.staticValue,b.animation)}else return new a(d,void 0)}function E(a,b,c){c===void 0&&(c=0);var d={staticValue:void 0,animation:void 0};if(!a)d.staticValue=c;else{var e=a.value(),f=a.valuesLength();e!==null&&(d.staticValue=b(e));if(f!=0){e=a.keyframesLength();f=[];var g=[],h=[];for(var i=0;i<e;i++)f.push(b(a.values(i),c)),g.push(a.keyframes(i)),i<e-1&&h.push(H(a.tweens(i)));d.animation={values:f,keyframes:g,tweens:h}}}return d}function F(a,b){b===void 0&&(b=[0,0]);return a?[a.x(),a.y()]:b}function G(a,b){c("KFManifest")(a.manifestArray(),b)}function H(a){var b=a.type(),d;b===c("KeyframesSchema").TweenType.Bezier&&(d=new(c("CubicBezier"))(F(a.control1()),F(a.control2())));return{type:b,bezier:d}}function I(a,c){var d={bitmaps:{}},e=a.bitmapsLength();if(e){var f=[],g=c.getImages().length;for(var i=0;i<e;i++){var j=g+i;d.bitmaps[i]=j;c.addImageAtIndex(null,j);f.push(J(a.bitmaps(i),j,c))}(h||(h=b("Promise"))).all(f).then(function(){K.bind(null,null,c)})}return d}function J(d,e,f){if(c("BlobFactory").isSupported()){var g=d.contentArray();if(!g)return(h||(h=b("Promise"))).reject("Decode: tried to decode a null bitmap");var i=c("BlobFactory").getBlob([g]),j=d.size().width(),k=d.size().height();return a.createImageBitmap?a.createImageBitmap(i,0,0,j,k)["catch"](function(a){return L(i,j,k)}).then(function(a){f.addImageAtIndex({src:a,width:j,height:k},e);return{src:a,width:j,height:k}}):L(i,j,k)}return(h||(h=b("Promise"))).reject("Decode: browser does not support bitmap creation")}function K(a,b,c){if(!a)return;b=[];for(c=0;c<a.length;c++){var d=a[c].src;if(a.width!==d.width||a.height!==d.height){var e=document.createElement("canvas");e.width=a.width;e.height=a.heigh;var f=e.getContext("2d");f.drawImage(d,0,0,a.width,a.height);b.push(e)}else b.push(d)}return b}function L(a,c,d){return!URL.createObjectURL?(h||(h=b("Promise"))).reject("URL API not supported"):M(URL.createObjectURL(a),c,d)}function M(a,c,d){return new(h||(h=b("Promise")))(function(b,e){var f=new Image(a);f.onload=function(){return b({src:f,width:c,height:d})};f.onerror=function(b){return e("Decode: error requesting image uri "+a)};f.src=a})}g["default"]=e}),98);
__d("LazyLoadInstance",["asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h={LOADING:1,NOT_READY:0,READY:2};a=function(){function a(a,b){this.$1={instantiate:b,moduleReference:a,stage:h.NOT_READY}}var d=a.prototype;d.get=function(a){switch(this.$1.stage){case h.NOT_READY:c("promiseDone")(this.$2(this.$1),a);break;case h.LOADING:c("promiseDone")(this.$1.instancePromise,a);break;case h.READY:a(this.$1.instance);break}};d.getNow=function(){return this.$1.stage===h.READY?this.$1.instance:null};d.preload=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){this.$1.stage===h.NOT_READY&&(yield this.$2(this.$1))});function c(){return a.apply(this,arguments)}return c}();d.$2=function(a){var b=this,c=a.instantiate;a=a.moduleReference;a=a.load().then(function(a){a=c(a);b.$1={instance:a,stage:h.READY};return a});this.$1={instancePromise:a,stage:h.LOADING};return a};return a}();g["default"]=a}),98);
__d("LiveChatWidgetMqttChannel",["MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig"],(function(a,b,c,d,e,f,g){"use strict";c("MqttEnvInitializer").initialize();function h(){var a;d("MqttEnv").setIsUserLoggedInNow(function(){return!0});return new(c("MqttChannel"))({appId:1971595283112096,capabilities:(a=c("MqttWebConfig")).capabilities,chatVisibility:!1,clientCapabilities:a.clientCapabilities,endpoint:a.endpoint,initialSubscribedTopics:a.subscribedTopics,pageId:null,phpOverride:a.hostNameOverride,pollingEndpoint:a.pollingEndpoint,userFbid:a.fbid})}var i=null;function a(){i==null&&(i=h());return i}function b(){i!=null&&(i.shutdown(),i=null)}g.getLiveChatWidgetMqttChannelInstance=a;g.shutdownAndClear=b}),98);
__d("LsRtcEndCallSurveyFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743882");b=d("FalcoLoggerInternal").create("ls_rtc_end_call_survey",a);e=b;g["default"]=e}),98);
__d("LsRtcStarRatingFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743884");b=d("FalcoLoggerInternal").create("ls_rtc_star_rating",a);e=b;g["default"]=e}),98);
__d("MDCMqttChannel",["CurrentUser","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";c("MqttEnvInitializer").initialize();function h(a){d("MqttEnv").setIsUserLoggedInNow(c("CurrentUser").isLoggedIn);a=c("CurrentUser").getAppID()==null?218968626708284:Number(c("CurrentUser").getAppID());return new(c("MqttChannel"))({appId:a,capabilities:c("MqttWebConfig").capabilities,chatVisibility:!0,clientCapabilities:c("MqttWebConfig").clientCapabilities,clientType:"websocket",deviceId:c("uuidv4")(),endpoint:c("MqttWebConfig").endpoint,initialSubscribedTopics:c("MqttWebConfig").subscribedTopics,phpOverride:c("MqttWebConfig").hostNameOverride,pollingEndpoint:c("MqttWebConfig").pollingEndpoint,userFbid:c("CurrentUser").getPossiblyNonFacebookUserID()})}var i=null;function a(a){i==null&&(i=h(a));return i}function b(){return i}function e(){i!=null&&(i.shutdown(),i=null)}g.getMDCMqttChannelInstance=a;g.getMDCMqttChannelInstanceDoNotCreate=b;g.shutdownAndClear=e}),98);
__d("OculusMqttChannel",["CurrentUser","HorizonMetaIsCastingRoute","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";c("HorizonMetaIsCastingRoute").getIsCastingRoute()?c("MqttEnvInitializer").initialize(function(a){return new WebSocket(a,"horizon_webcasting")}):c("MqttEnvInitializer").initialize();function h(a){d("MqttEnv").setIsUserLoggedInNow(c("CurrentUser").isLoggedIn);a=c("CurrentUser").getAppID()==null?2763362503905702:Number(c("CurrentUser").getAppID());return new(c("MqttChannel"))({appId:a,capabilities:c("MqttWebConfig").capabilities,chatVisibility:!0,clientCapabilities:c("MqttWebConfig").clientCapabilities,clientType:"websocket",deviceId:c("uuidv4")(),endpoint:c("MqttWebConfig").endpoint,initialSubscribedTopics:c("MqttWebConfig").subscribedTopics,phpOverride:c("MqttWebConfig").hostNameOverride,pollingEndpoint:c("MqttWebConfig").pollingEndpoint,userFbid:c("CurrentUser").getPossiblyNonFacebookUserID()})}var i=null;function a(a){i==null&&(i=h(a));return i}function b(){return i}function e(){i!=null&&(i.shutdown(),i=null)}g.getOculusMqttChannelInstance=a;g.getOculusMqttChannelInstanceDoNotCreate=b;g.shutdownAndClear=e}),98);
__d("OverlayConfigDefaults",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze([1,0,0,20,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,640,360,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,0,0,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,0,1,-1,-1,-1,-1,-1,-1,1,1,0,2e3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1e3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,16e3,2e4,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6e4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1e3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2e3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,120,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5e3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);b=a;f["default"]=b}),66);
__d("OverlayConfigDefaultsLayer",["OverlayConfigDefaults","OverlayConfigLayerSource"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.getLayerSource=function(){return c("OverlayConfigLayerSource").DEFAULT};b.getValue=function(a){return c("OverlayConfigDefaults")[a]};b.logExposure=function(a){};return a}();g["default"]=a}),98);
__d("OverlayConfigLayerManager",["OverlayConfigConstants","OverlayConfigDefaultsLayer","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=[new(c("OverlayConfigDefaultsLayer"))()]}var b=a.prototype;b.getValue=function(a){for(var b=this.$1.length-1;b>=0;b--){var d=this.$1[b].getValue(a);if(d>c("OverlayConfigConstants").OverlayConfigNotPresentFlagValue)return d}throw c("unrecoverableViolation")("OverlayConfigLayerManager: No value found for id "+String(a),"rtc_www")};b.addLayer=function(a){this.$1.push(a);return this.$1.length-1};b.replaceLayer=function(a,b){if(a===0)throw c("unrecoverableViolation")("OverlayConfigLayerManager: Tried to replace default layer!","rtc_www");else if(this.$1[a]==null)throw c("unrecoverableViolation")("OverlayConfigLayerManager: Layer does not exist at index "+String(a),"rtc_www");this.$1[a]=b};b.clone=function(){var b=new a();b.$1=this.$1.slice();return b};return a}();g["default"]=a}),98);
__d("OverlayConfigManager",["Configs","OverlayConfigLayerManager"],(function(a,b,c,d,e,f){"use strict";var g=(a=b("Configs")).ExampleConfig,h=a.PreferredCaptureConfig,i=a.ZenonSdpTransformConfig,j=a.ZenonPeerConnectionConfig,k=a.ZenonStartCallImmediatelyConfig,l=a.ZenonGeneralizedIdentityConfig,m=a.ZenonMultiCallSupportConfig,n=a.ZenonPlatformSupportConfig,o=a.ZenonSimulcastConfig,p=a.DynamicRuleConfig,q=a.SignalingPingConfig,r=a.NetEqAiConfig;c=function(){function a(){this.layerManager=new(b("OverlayConfigLayerManager"))()}var c=a.prototype;c.getExampleConfig=function(){return new g(this.layerManager)};c.getPreferredCaptureConfig=function(){return new h(this.layerManager)};c.getZenonSdpTransformConfig=function(){return new i(this.layerManager)};c.getZenonPeerConnectionConfig=function(){return new j(this.layerManager)};c.getZenonStartCallImmediatelyConfig=function(){return new k(this.layerManager)};c.getZenonGeneralizedIdentityConfig=function(){return new l(this.layerManager)};c.getZenonMultiCallSupportConfig=function(){return new m(this.layerManager)};c.getZenonPlatformSupportConfig=function(){return new n(this.layerManager)};c.getZenonSimulcastConfig=function(){return new o(this.layerManager)};c.getDynamicRuleConfig=function(){return new p(this.layerManager)};c.getSignalingPingConfig=function(){return new q(this.layerManager)};c.getNetEqAiConfig=function(){return new r(this.layerManager)};return a}();e.exports=c}),null);
__d("OverlayConfigManagerWithServerLayer",["OverlayConfigManager"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b){var c;c=a.call(this)||this;c.$OverlayConfigManagerWithServerLayer$p_1=-1;b!=null&&(c.layerManager=b.layerManager.clone());return c}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.setServerLayer=function(a){if(this.$OverlayConfigManagerWithServerLayer$p_1>-1){this.layerManager.replaceLayer(this.$OverlayConfigManagerWithServerLayer$p_1,a);return}this.$OverlayConfigManagerWithServerLayer$p_1=this.layerManager.addLayer(a)};return b}(c("OverlayConfigManager"));g["default"]=a}),98);
__d("RTWebDropInUtils",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h="drop_in_metadata";a=function(a){var b;return b={},b[h]=JSON.stringify({is_drop_in:a?"1":"0"}),b};b=function(a){a=i(a);a=a.isDropIn;return a};var i=function(a){a=a==null?void 0:a[h];if(a!=null)try{a=JSON.parse(a);return{isDropIn:a.is_drop_in==="1"}}catch(a){c("FBLogger")("rtc_www").catching(a).warn("Failed to parse drop_in_metadata app message");return{isDropIn:!1}}return{isDropIn:!1}};g.getDropInAppMessages=a;g.isDropInFromAppMessages=b}),98);
__d("ZenonCallWindowOpener_Popup",["UserAgent","ZenonUserActionLogger"],(function(a,b,c,d,e,f,g){"use strict";var h=1280,i={LargeForGroup:{height:772,width:1100},LargeForP2P:{height:720,width:1280},Small:{height:540,width:960}},j=["menubar=no","location=no","scrollbars=no","status=no","personalbar=no"];a=function(){function a(){}var b=a.prototype;b.openWindow=function(a){a=this.$1(a.joinContext);var b=this.$2(a),e=b.left;b=b.top;d("ZenonUserActionLogger").logCheckpoint({checkpoint:"Opening_Popup: left="+e+",top="+b+",width="+a.width+",height="+a.height});var f=c("UserAgent").isBrowser("Safari")?window.location.hostname:"";return window.open(f,"",[].concat(j,["height="+a.height,"width="+a.width,"left="+e,"top="+b]).join(","))};b.$1=function(a){if(screen&&screen.width>h)if(a.type==="link"||a.thread.type===2)return{height:i.LargeForGroup.height,width:i.LargeForGroup.width};else return{height:i.LargeForP2P.height,width:i.LargeForP2P.width};else return{height:i.Small.height,width:i.Small.width}};b.$2=function(a){var b=a.height;a=a.width;return{left:Math.floor(window.innerWidth/2-a/2+((a=window.screenLeft)!=null?a:window.screenX)),top:Math.floor(window.innerHeight/2-b/2+((a=window.screenTop)!=null?a:window.screenY))}};return a}();g["default"]=a}),98);
__d("ZenonCallWindowOpener_iFrame",["ZenonUserActionLogger"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.openWindow=function(a){d("ZenonUserActionLogger").logCheckpoint({checkpoint:"Opening_iFrame"});a=document.createElement("iframe");a.setAttribute("data-testid","zenon-call-window");a.frameBorder="0";a.style.width="100%";a.style.height="100vh";a.style.position="fixed";a.style.top="0";a.style.left="0";a.style.zIndex="9999";document.body.appendChild(a);a=a.contentWindow;return a};return a}();g["default"]=a}),98);
__d("RTWebCallWindowOpener",["RTWebDropInUtils","ZenonCallWindowOpener_Popup","ZenonCallWindowOpener_iFrame","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=c("gkx")("15312")?new(c("ZenonCallWindowOpener_iFrame"))():new(c("ZenonCallWindowOpener_Popup"))()}var b=a.prototype;b.openWindow=function(a){if(a.context.intent==="accept invite"&&a.context.controllerParams.appMessages!=null){var b=d("RTWebDropInUtils").isDropInFromAppMessages(a.context.controllerParams.appMessages);if(b)return babelHelpers["extends"]({},window,{close:function(){return null}})}return this.$1.openWindow(a)};return a}();g["default"]=a}),98);
__d("RtcDoorCallingTags",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({OPEN:0,VANISHING:1,SECRET:2,CANVAS:32,LEAD_GEN:128,COPRESENCE:256,CONDUIT:512});c=a;f["default"]=c}),66);
__d("TokenBucketRateLimit",["DateConsts"],(function(a,b,c,d,e,f,g){"use strict";var h=1e3;a=function(){function a(a,b){this.$1=a*h,this.$2=a*h,this.$3=Date.now(),this.$4=b*h}var b=a.prototype;b.take=function(a){a===void 0&&(a=1);a=a*h;this.$5();if(this.$2<a)return!1;this.$2-=a;return!0};b.$5=function(){if(this.$2>=this.$1)return;var a=Date.now(),b=(a-this.$3)/d("DateConsts").MS_PER_SEC;b=Math.round(b*this.$4);if(b===0)return;this.$2=Math.min(this.$1,this.$2+b);this.$3=a};return a}();g["default"]=a}),98);
__d("WebAssemblyMemorySingleton",[],(function(a,b,c,d,e,f){"use strict";var g=64*1024;c=5701632;d=45*g;var h=c+d,i=null,j=0,k=0;function a(){i==null&&(i=new WebAssembly.Memory({initial:h/g,maximum:2147483648/g}),j=h);return i}function b(){if(i!=null){var a=i.buffer.byteLength;a!==j&&(k++,j=a)}return{memory_reallocation_count:k,memory_size_kb:j/1024}}e={INITIAL_MEMORY_ALLOCATED_IN_BYTES:h,get:a,getMetrics:b};f.WebAssemblyMemorySingleton=e}),66);
__d("ZenonCallFalcoEventUtils",["performanceNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return String(Math.trunc(a))};a=function(){return i((h||(h=c("performanceNow")))())};b=function(a){return i(a!=null?a:0)};d=function(a){return a==null?null:i(a!=null?a:0)};e=function(a){return a!=null?a:""};g.truncateNumber=i;g.performanceNowParsed=a;g.nonNullIntNumber=b;g.intNumberOrNull=d;g.nonNullString=e}),98);
__d("ZenonCallInfoManager",["ZenonDeviceId"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.callTrigger,c=a.conferenceName,e=a.isCaller,f=a.isVideo,g=a.localCallID,h=a.peerID,i=a.protocol,j=a.serverInfoData;a=a.signalingID;var k=d("ZenonDeviceId").getZenonLocalStorageDeviceIdWithFallback();b={callTrigger:b!=null?b:"",conferenceName:c!=null?c:"",deviceID:k,isCaller:e,isVideo:f,localCallID:g,peerID:h,protocol:i,signalingID:a};this.$1=babelHelpers["extends"]({},b,{serverInfoData:j})}var b=a.prototype;b.setDeviceID=function(a){this.$1.deviceID=a};b.setLocalCallID=function(a){this.$1.localCallID=a};b.setSharedCallId=function(a){this.$1.serverInfoData=a};b.setSignalingID=function(a){this.$1.signalingID=a};b.getCallInfo=function(){return this.$1};return a}();g["default"]=a}),98);
__d("ZenonCallInviteModelTypes",[],(function(a,b,c,d,e,f){"use strict";a={missed:"missed",ringing:"ringing",unsupported_browser:"unsupported_browser"};f.CallInviteModelType=a}),66);
__d("ZenonCallInviteModel",["BaseEventEmitter","FBLogger","ZenonCallInviteModelTypes","ZenonIncomingRingSDKTypes"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b){var e;e=a.call(this)||this;e.$ZenonCallInviteModel$p_2=function(a){c("FBLogger")("rtc_www").info("Received cancel for: ",a.ringID);if(e.__currentRequest&&e.__currentRequest.model&&e.__currentRequest.model.ringID===a.ringID)switch(a.reason){case d("ZenonIncomingRingSDKTypes").ZenonCancelReason.Hangup:a=((a=e.__currentRequest)==null||(a=a.model)==null?void 0:a.type)!==d("ZenonCallInviteModelTypes").CallInviteModelType.unsupported_browser;e.__currentRequest.model=babelHelpers["extends"]({},e.__currentRequest.model,{type:"missed"});a&&e.emit("callInvite",e.__currentRequest.model);break;case d("ZenonIncomingRingSDKTypes").ZenonCancelReason.OtherDismiss:e.dismiss();break}};e.$ZenonCallInviteModel$p_1=function(a){var b;c("FBLogger")("rtc_www").info("Receiving ring: ",a.ringID);if(((b=e.__currentRequest)==null||(b=b.model)==null?void 0:b.type)==="ringing")return;e.__currentRequest={model:{actorID:a.actorID,context:a.context,controllerParams:a.controllerParams,inviterID:a.inviterID,isE2eeMandated:a.isE2eeMandated,participants:a.otherParticipants,receiverUserId:a.receiverUserId,requestingVideo:a.requestingVideo,ringID:a.ringID,ringRequest:a.ringRequest,type:a.isClientPermissableRing?"ringing":"unsupported_browser"},ringPayload:a};e.emit("callInvite",e.__currentRequest.model);a.isClientPermissableRing||a.onDecline("VersionUnsupported")};e.__eventSource=b;e.__currentRequest=null;return e}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.getCurrentInvite=function(){var a;return(a=(a=this.__currentRequest)==null?void 0:a.model)!=null?a:null};e.startListening=function(a){a=a.callsBlocked;this.__currentRequest&&this.dismiss();this.stopListening();a||(this.__eventSource.addListener("incomingRing",this.$ZenonCallInviteModel$p_1),this.__eventSource.addListener("ringCancel",this.$ZenonCallInviteModel$p_2))};e.stopListening=function(){this.__eventSource.removeAllListeners("incomingRing"),this.__eventSource.removeAllListeners("ringCancel"),this.__currentRequest=null};e.dismiss=function(){var a;c("FBLogger")("rtc_www").info("Dismissing ring: ",(a=this.__currentRequest)==null||(a=a.model)==null?void 0:a.ringID);this.__currentRequest=null;this.emit("callInvite",null)};e.accept=function(a,b){var d=this.__currentRequest;if(d){var e;c("FBLogger")("rtc_www").info("Accepting ring: ",(e=d.model)==null?void 0:e.ringID);((e=d.model)==null?void 0:e.type)==="ringing"&&d.ringPayload.onAccept(a,b);this.dismiss()}};e.decline=function(a,b){a===void 0&&(a="IgnoreCall");var d=this.__currentRequest;if(d){var e;c("FBLogger")("rtc_www").info("Declining ring: ",(e=d.model)==null?void 0:e.ringID);d.ringPayload.onDecline(a,b);this.dismiss();return}};return b}(c("BaseEventEmitter"));g["default"]=a}),98);
__d("ZenonLogPromiseRejection",["FBLogger","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b=!1);return a["catch"](function(a){c("FBLogger")("rtc_www").catching(a).debug(a.message);if(b&&c("gkx")("1083"))throw a})}g["default"]=a}),98);
__d("ZenonCallLogger",["Promise","ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonLogPromiseRejection","isEmployeeTestUserZenonLogging","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Set(["mwMessageSent","mwThriftMessageSent","mwMessageRecv","mwThriftMessageRecv","setMediaStats","updateE2EEStats","updateIceInfo","setRemoteSdpOffer"]),j=new Set(["atLeastOneParticipantAlerted","atLeastOneParticipantAnswered"]);a=function(){function a(a){var b=this,c=a.config,d=a.initLoggerInfo,e=a.isE2eeMandated,f=a.processorConfigs;a=a.startFromNavigation;this.$4=!0;this.$6=[];this.$7=new Set();this.$1=d;this.$2=c;this.$4=a;this.$3=e;this.$5={clientSessionID:d.signalingID,localCallID:d.localCallID,peerID:d.peerID,sharedCallID:d.serverInfoData};f.forEach(function(a){b.addLogProcessor(a)})}var d=a.prototype;d.addLogProcessor=function(a){var b=this;this.$6.push(new a.LogProcessor({config:this.$2,data:this.$1,isE2eeMandated:this.$3,startFromNavigation:this.$4,updateLogIdentifiers:function(a){return b.updateLogIdentifiers(a)}}))};d.updateLogIdentifiers=function(a){Object.assign(this.$5,a),this.log({logIdentifiers:a,name:"updateLogIdentifiers"})};d.log=function(a){if(j.has(a.name)&&this.$7.has(a.name))return;this.$7.add(a.name);this.$8(a);c("promiseDone")(this.logToProcessors(a))};d.logToProcessors=function(a){return c("ZenonLogPromiseRejection")((h||(h=b("Promise"))).all(this.$6.map(function(b){return b.processEvent(a)})).then(function(){}))};d.$8=function(a){if(!c("isEmployeeTestUserZenonLogging")())return;if(i.has(a.name))return;c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] ZenonCallLogger event: "+a.name})};d.getLogIdentifiers=function(){return this.$5};return a}();g["default"]=a}),98);
__d("ZenonCallWindowController",["FBLogger","Promise","ZenonCallWindowErrors","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b){var c=b.callWindowInitializerResource,d=b.callWindowOpener;b=b.uriBuilderResource;this.$2=null;this.$3=!1;this.$5=null;this.$1=a;this.$7=b;this.$4=c;this.$6=d}var e=a.prototype;e.initCall=function(a){var e=this;if(this.$3)throw new(d("ZenonCallWindowErrors").OpeningAnotherCallError)();try{if(this.$2&&!this.$2.closed&&a.joinContext.type==="thread"&&this.$2.inCallWith===a.joinContext.thread.id){this.$2.focus();return[this.$2,(h||(h=b("Promise"))).resolve({alohaEscalatedMW:!1})]}}catch(a){c("FBLogger")("rtc_www").catching(c("getErrorSafe")(a)).warn("Failed to access inCallWith on call window")}var f=this.$6.openWindow(a);try{this.$2&&(this.$2.closed||this.$2.close(),this.$2=null)}catch(a){c("FBLogger")("rtc_www").catching(c("getErrorSafe")(a)).warn("Failed to access close on call window")}this.$2=f;this.$3=!0;return[f,(h||(h=b("Promise"))).all([this.$7.load(),this.$4.load()]).then(function(b){var c=b[0];b=b[1];e.$5===null&&(e.$5=new b(e.$1,new c(e.$1)));return e.$5.initCall(e.$2,a)})["finally"](function(){e.$3=!1})]};return a}();g["default"]=a}),98);
__d("ZenonClientPerfQPLConstants",[],(function(a,b,c,d,e,f){"use strict";a="zenon_popup_opened";b="zenon_call_join_request";c="zenon_sfu_e2ee_negotiation_complete";d="csm_outgoing_start";e="csm_incoming_connection_started";var g="csm_invite_sent",h="csm_invite_ack_recv",i="csm_answer_recv",j="csm_answer_sdp_recv",k="csm_pranswer_sdp_recv",l="csm_offer_sdp_recv",m="csm_answer_sent",n="csm_negotiation_complete",o="csm_network_ready",p="csm_connection_ready",q="csm_dismiss_sent",r="csm_dismiss_recv",s="media_first_audio_packet",t="media_first_audio_packet_sent",u="media_first_video_packet",v="media_first_video_packet_sent",w="media_peer_connection_factory_created",x="signaling_mw_join_req_sent",y="signaling_mw_join_response_recv";f.POINT_ZENON_POPUP_OPENED=a;f.POINT_ZENON_CALL_JOIN_REQUEST=b;f.POINT_ZENON_SFU_E2EE_NEGOTIATION_COMPLETE=c;f.POINT_CONNECTION_OUTGOING_START=d;f.POINT_CONNECTION_INCOMING_CONNECTION_STARTED=e;f.POINT_CONNECTION_INVITE_SENT=g;f.POINT_CONNECTION_INVITE_ACK_RECV=h;f.POINT_CONNECTION_ANSWER_RECV=i;f.POINT_CONNECTION_ANSWER_SDP_RECV=j;f.POINT_CONNECTION_PRANSWER_SDP_RECV=k;f.POINT_CONNECTION_OFFER_SDP_RECV=l;f.POINT_CONNECTION_ANSWER_SENT=m;f.POINT_CONNECTION_NEGOTIATION_COMPLETE=n;f.POINT_CONNECTION_NETWORK_READY=o;f.POINT_CONNECTION_READY=p;f.POINT_CONNECTION_DISMISS_SENT=q;f.POINT_CONNECTION_DISMISS_RECV=r;f.POINT_MEDIA_FIRST_AUDIO_PACKET=s;f.POINT_MEDIA_FIRST_AUDIO_PACKET_SENT=t;f.POINT_MEDIA_FIRST_VIDEO_PACKET=u;f.POINT_MEDIA_FIRST_VIDEO_PACKET_SENT=v;f.POINT_MEDIA_PEER_CONNECTION_FACTORY_CREATED=w;f.POINT_SIGNALING_MW_JOIN_REQ_SENT=x;f.POINT_SIGNALING_MW_JOIN_RESPONSE_RECV=y}),66);
__d("ZenonCollisionContext",["RtcDoorCallingTags"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=null;a.groupThreadID!=null?c={e2eeThreadID:a.groupThreadID,id:a.groupThreadID,type:b?16:2}:a.peerID!=null&&(c={id:a.peerID,secureOneToOneThreadPeerId:b?a.peerID:void 0,type:b?15:1});return c}function b(a){var b=a.call_trigger,d=a.callable_post_id,e=a.calling_tags,f=a.conference_name,g=a.group_thread_id,h=a.ig_thread_id,i=a.immersive_mode_door_id,j=a.is_meta_ai_call,k=a.link_url,l=a.live_broadcast_id,m=a.meeting_id,n=a.peer_id,o=a.rtc_door_id;a=a.server_info_data;return{callablePostID:d,callingTags:c("RtcDoorCallingTags").cast(e),callTrigger:b,conferenceName:f,groupThreadID:g,igThreadID:h,immersiveModeDoorID:i,isMetaAiCall:j,linkUrl:k,liveBroadcastID:l,meetingID:m,peerID:n,rtcDoorID:o,serverInfoData:a}}function d(a){a===void 0&&(a={});return!Object.values(a).some(function(a){return a!=null})}g.getThreadIDAndTypeFromCollisionContext=a;g.fromRTCJoiningContext=b;g.isCollisionContextEmpty=d}),98);
__d("ZenonDGWUtils",["ZenonActorHooks","gkx","justknobx","qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("3376")||d("ZenonActorHooks").ZenonActor.isLiveChatOnlyPerson()&&c("justknobx")._("1812")||c("gkx")("18052")}g.shouldUseDGW=a}),98);
__d("ZenonDeviceInfoHelper",["asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g=-1,h=!1,i={getBatteryStats:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield i.internalGetWindow().navigator.getBattery);if(typeof a!=="function")return{level:g,placeholder:!0,wasCharged:!1};a=(yield a.call(navigator));a.charging?h=!0:a.onchargingchange=function(a){a.target.charging&&(h=!0),a.target.onchargingchange=null};return{level:a.level*100,placeholder:!1,wasCharged:h}});function c(){return a.apply(this,arguments)}return c}(),internalGetWindow:function(){return window}};a=i;f["default"]=a}),66);
__d("ZenonE2eeMandatedStateManager",["$InternalEnum","E2eeStateTypes","MultiwaySharedTypes","ZenonActorHooks","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum").Mirrored(["NONE","ONLY_INFRA_MANDATED_EXP_CONTROL","ONLY_INFRA_MANDATED_EXP_TEST","INFRA_AND_PRODUCT_MANDATED"]),i=null,j=function(){function a(){this.$1=h.NONE}var b=a.prototype;b.processE2eeMandatedStateFromProductAndRing=function(a,b){this.$1=this.$2(a,b)};b.areBothInfraAndProductE2eeMandated=function(){return this.$1===h.INFRA_AND_PRODUCT_MANDATED};b.isInfraE2eeMandated=function(){return this.areBothInfraAndProductE2eeMandated()||this.$3()};b.$3=function(){return this.$1===h.ONLY_INFRA_MANDATED_EXP_TEST};b.processE2eeMandatedStateFromE2eeServerUpdate=function(a){if(this.areBothInfraAndProductE2eeMandated())return;if(a===d("E2eeStateTypes").InfraMandatedExpStatus.TEST&&this.$1===h.ONLY_INFRA_MANDATED_EXP_TEST)return;if(a===d("E2eeStateTypes").InfraMandatedExpStatus.CONTROL&&this.$1===h.ONLY_INFRA_MANDATED_EXP_CONTROL)return;this.$1=h.NONE};b.isEligibleForE2eeInfraMandatedExperiment=function(){var a;return(a=(a=c("qex")._("138"))!=null?a:c("qex")._("192"))!=null?a:!1};b.isP2pMediaPathPreferredForInfraMandatedExperiment=function(){var a;return this.$3()&&((a=(a=c("qex")._("531"))!=null?a:c("qex")._("532"))!=null?a:!1)};b.getE2eeInfraMandatedExpStatus=function(){switch(this.$1){case h.INFRA_AND_PRODUCT_MANDATED:case h.NONE:return d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.NOT_SET;case h.ONLY_INFRA_MANDATED_EXP_CONTROL:return d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.CONTROL;case h.ONLY_INFRA_MANDATED_EXP_TEST:return d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.TEST}};b.$2=function(a,b){if(a)return h.INFRA_AND_PRODUCT_MANDATED;if(d("ZenonActorHooks").ZenonActor.getAppID()===436761779744620..toString())return h.NONE;if(!this.isEligibleForE2eeInfraMandatedExperiment())return h.NONE;a=this.$4();if(b==null)return a;b=this.$5(b);if(b===h.NONE)return h.NONE;return b===h.ONLY_INFRA_MANDATED_EXP_CONTROL?a===h.ONLY_INFRA_MANDATED_EXP_TEST?h.NONE:h.ONLY_INFRA_MANDATED_EXP_CONTROL:a===h.ONLY_INFRA_MANDATED_EXP_CONTROL?h.NONE:h.ONLY_INFRA_MANDATED_EXP_TEST};b.$4=function(){var a=this.$6();if(a===d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.TEST)return h.ONLY_INFRA_MANDATED_EXP_TEST;return a===d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.CONTROL?h.ONLY_INFRA_MANDATED_EXP_CONTROL:h.NONE};b.$6=function(){var a;return(a=c("qex")._("196"))!=null?a:c("qex")._("227")};b.$5=function(a){if(a===d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.TEST)return h.ONLY_INFRA_MANDATED_EXP_TEST;return a===d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.CONTROL?h.ONLY_INFRA_MANDATED_EXP_CONTROL:h.NONE};return a}();function a(){i==null&&(i=new j());return i}e=a();g["default"]=e}),98);
__d("ZenonGenericLocalStorageStore",["CacheStorage","WebStorage","ZenonODSLogger","ZenonUserActionLogger","areEqual","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=2e3,k=3;a=function(){function a(a,b,d){this.$1=a,this.$2=new(c("CacheStorage"))(b,d)}var b=a.prototype;b.getLocalStorageObjects=function(){return this.$2.get(this.$1)||{}};b.removeLocalStorageObjects=function(a){this.mutateLocalStorageObjects(function(b){a.forEach(function(a){var c=a.peerID;a=a.signalingID;b[c]&&b[c][a]&&(delete b[c][a],Object.entries(b[c]).length===0&&delete b[c])});return b})};b.mutateLocalStorageObjects=function(a,b,d,e){var f=this;b===void 0&&(b=k);d===void 0&&(d=!1);e===void 0&&(e=null);var g=this.getLocalStorageObjects(),i=this.getLocalStorageObjects();g=a(g);var l=this.getLocalStorageObjects();(h||(h=c("areEqual")))(i,l)?(this.$2.set(this.$1,g),this.logStorageError(this.$2.getLastSetException(),e)):b>0&&(d?c("setTimeout")(function(){f.mutateLocalStorageObjects(a,b-1,!0)},j):this.mutateLocalStorageObjects(a,b-1,!0))};b.logStorageError=function(a,b){a!=null&&(d("ZenonUserActionLogger").logError({call_id:b==null?void 0:b.signalingID,error_domain:"ZenonGenericLocalStorageStore_storeLocalStorageObjects",error_type:a.name,peer_id:b==null?void 0:b.peerID}),(i||(i=c("WebStorage"))).isLocalStorageQuotaExceeded()&&c("ZenonODSLogger").logCounter("local_storage_quota_exceeded"))};return a}();g["default"]=a}),98);
__d("ZenonLSCallStartEventManager",["ZenonCallFalcoEventUtils","ZenonCallInfoManager","ZenonPeerID"],(function(a,b,c,d,e,f,g){"use strict";var h=["deviceID"];a=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.$ZenonLSCallStartEventManager$p_1={},b.$ZenonLSCallStartEventManager$p_2=!1,b.$ZenonLSCallStartEventManager$p_3=!1,babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.updateEventTimestamp=function(a){this.$ZenonLSCallStartEventManager$p_1[a]==null&&(this.$ZenonLSCallStartEventManager$p_1[a]=d("ZenonCallFalcoEventUtils").performanceNowParsed())};c.receivedFromInvite=function(){this.$ZenonLSCallStartEventManager$p_2=!0};c.receivedFromServer=function(){this.$ZenonLSCallStartEventManager$p_3=!0};c.getStartEventData=function(){var a=this.getCallInfo();a=a.signalingID;var b=babelHelpers["extends"]({},this.getTimestamps(),this.$ZenonLSCallStartEventManager$p_4());a!==""&&(b.local_signaling_id=a);return b};c.$ZenonLSCallStartEventManager$p_4=function(){var a=this.getCallInfo(),b=a.deviceID,c=a.localCallID,e=a.peerID,f=a.serverInfoData;a=a.signalingID;return babelHelpers["extends"]({connection_logging_id:a,local_call_id:c,peer_id:d("ZenonPeerID").convertPeerIDForLogging(e),protocol:"multiway"},f!=null&&{shared_call_id:f},{steady_time_ms:d("ZenonCallFalcoEventUtils").performanceNowParsed(),system_time_ms:String(Date.now()),web_device_id:b})};c.getTimestamps=function(){return this.$ZenonLSCallStartEventManager$p_1};c.save=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.storeCallStartEventManager(c,b,this)};c["delete"]=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.removeLocalStorageObjects([{peerID:c,signalingID:b}])};c.toJsonString=function(){var a=this.getCallInfo(),b=a.signalingID;a={callInfo:a,connectionLoggingId:b,receivedFromInvite:this.$ZenonLSCallStartEventManager$p_2,receivedFromServer:this.$ZenonLSCallStartEventManager$p_3,timestamps:this.getTimestamps()};return JSON.stringify(a)};b.fromJsonString=function(a){var c;try{c=JSON.parse(a)}catch(a){return null}a=c.callInfo;a.deviceID;a=babelHelpers.objectWithoutPropertiesLoose(a,h);a=new b(a);a.$ZenonLSCallStartEventManager$p_2=c.receivedFromInvite;a.$ZenonLSCallStartEventManager$p_3=c.receivedFromServer;a.$ZenonLSCallStartEventManager$p_1=c.timestamps;return a};return b}(c("ZenonCallInfoManager"));g["default"]=a}),98);
__d("ZenonLSCallStartEventStore",["ZenonGenericLocalStorageStore","ZenonLSCallStartEventManager"],(function(a,b,c,d,e,f,g){"use strict";var h="localstorage",i="RTC_LS_CALL_START_",j="ls_call_start",k=3;a=function(a){function b(){return a.call(this,j,h,i)||this}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.retrieveCallStartEventManager=function(a,b){var d=this.getLocalStorageObjects();d=d[a]?d[a][b]:null;if(d)return c("ZenonLSCallStartEventManager").fromJsonString(d.__d);else return null};d.storeCallStartEventManager=function(a,b,c){this.mutateLocalStorageObjects(function(d){d[a]||(d[a]={});d[a][b]={__d:c.toJsonString(),__t:Date.now(),__z:!0};return d},k,!1,{peerID:a,signalingID:b})};return b}(c("ZenonGenericLocalStorageStore"));b=new a();g.ZenonLSCallStartEventStoreInstance=b}),98);
__d("ZenonLSCallSummary",["ZenonCallFalcoEventUtils","ZenonCallInfoManager","ZenonDeviceInfoHelper","ZenonDismissReason","ZenonLoggingEventTypes","ZenonPeerID","asyncToGeneratorRuntime","performanceNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h=["deviceID"],i;a=function(a){function e(b){var e;e=a.call(this,b)||this;e.$ZenonLSCallSummary$p_1={call_answered_time:"-1",call_connected_time:"-1",call_created_time:"-1",call_ended_time:"-1",last_updated_time:"-1"};e.$ZenonLSCallSummary$p_2=!1;e.$ZenonLSCallSummary$p_3=null;e.$ZenonLSCallSummary$p_6=null;e.$ZenonLSCallSummary$p_8=null;e.$ZenonLSCallSummary$p_9=null;e.$ZenonLSCallSummary$p_10=null;e.$ZenonLSCallSummary$p_11=null;e.$ZenonLSCallSummary$p_15=null;e.$ZenonLSCallSummary$p_19=!1;e.$ZenonLSCallSummary$p_12=b.callTrigger;e.$ZenonLSCallSummary$p_7=b.isVideo;e.$ZenonLSCallSummary$p_4=0;e.$ZenonLSCallSummary$p_14=(b=b.joinMode)!=null?b:d("ZenonLoggingEventTypes").ZenonJoinMode.Primary;e.$ZenonLSCallSummary$p_5=(i||(i=c("performanceNow")))();e.setTimestamp("call_created_time");e.updateLastUpdatedTime();c("promiseDone")(e.updateBatteryStart());return e}babelHelpers.inheritsLoose(e,a);var f=e.prototype;f.setTimestamp=function(a){if(this.$ZenonLSCallSummary$p_1[a]!=="-1")return;this.$ZenonLSCallSummary$p_1[a]=String(this.$ZenonLSCallSummary$p_20())};f.getTimestamps=function(){return this.$ZenonLSCallSummary$p_1};f.getExtraInfo=function(){var a={};this.$ZenonLSCallSummary$p_9!=null&&!isNaN(this.$ZenonLSCallSummary$p_9)&&(a.battery_end_level=String(this.$ZenonLSCallSummary$p_9));this.$ZenonLSCallSummary$p_8!=null&&!isNaN(this.$ZenonLSCallSummary$p_8)&&(a.battery_start_level=String(this.$ZenonLSCallSummary$p_8));this.$ZenonLSCallSummary$p_10!=null&&(a.was_device_charged=this.$ZenonLSCallSummary$p_10);this.$ZenonLSCallSummary$p_11!=null&&(a.max_concurrent_connected_participant=this.$ZenonLSCallSummary$p_11);return a};f.getVideoStats=function(){var a={};if(this.$ZenonLSCallSummary$p_6!=null){var b;isNaN(this.$ZenonLSCallSummary$p_6.ld)||(a.local_video_duration=String(this.$ZenonLSCallSummary$p_6.ld));if(!isNaN((b=this.$ZenonLSCallSummary$p_6)==null?void 0:b.rd)){a.remote_video_duration=String((b=(b=this.$ZenonLSCallSummary$p_6)==null?void 0:b.rd)!=null?b:0)}}return a};f.getEndCallStats=function(){var a={};this.$ZenonLSCallSummary$p_16!=null&&(a.end_call_reason=d("ZenonDismissReason").dismissToEndCallReason(this.$ZenonLSCallSummary$p_16));this.$ZenonLSCallSummary$p_17!=null&&(a.end_call_subreason=this.$ZenonLSCallSummary$p_17);this.$ZenonLSCallSummary$p_19!=null&&(a.remote_ended=this.$ZenonLSCallSummary$p_19);if(this.$ZenonLSCallSummary$p_3!=null){var b;a.is_connected_end=(b=this.$ZenonLSCallSummary$p_21())!=null?b:!1}return a};f.getLoggingArgs=function(){var a=this.getCallInfo(),b=a.deviceID,c=a.peerID,e=a.serverInfoData;a=a.signalingID;return{call_id:a,conf_name:(a=this.$ZenonLSCallSummary$p_13)!=null?a:"",peer_id:d("ZenonPeerID").convertPeerIDForLogging(c),serv_info:e!=null?e:"",web_device_id:b}};f.getSummaryLoggingInfo=function(){var a=this.getCallInfo(),b=a.deviceID,c=a.isCaller,e=a.localCallID,f=a.peerID,g=a.serverInfoData;a=a.signalingID;return babelHelpers["extends"]({},this.getTimestamps(),this.getExtraInfo(),this.getVideoStats(),this.getEndCallStats(),g!=null&&{shared_call_id:g},{call_trigger:(g=this.$ZenonLSCallSummary$p_12)!=null?g:"",client_session_id:a==null?null:String(a),invite_requested_video:this.$ZenonLSCallSummary$p_7,is_caller:c,join_mode:String(this.$ZenonLSCallSummary$p_14),local_call_id:e,peer_id:d("ZenonPeerID").convertPeerIDForLogging(f),rtc_actor_id:this.$ZenonLSCallSummary$p_15,steady_time:d("ZenonCallFalcoEventUtils").performanceNowParsed(),system_time:String(Date.now()),web_device_id:b})};f.onCallEscalated=function(){this.updateLastUpdatedTime()};f.onCallAccepted=function(a){this.$ZenonLSCallSummary$p_12=a,this.setTimestamp("call_answered_time"),this.updateLastUpdatedTime()};f.onCallConnected=function(){this.setTimestamp("call_connected_time"),this.updateLastUpdatedTime()};f.setMediaStats=function(a){this.$ZenonLSCallSummary$p_6=a.video,this.updateLastUpdatedTime()};f.setMaxConnectedParticipants=function(a){this.$ZenonLSCallSummary$p_11=d("ZenonCallFalcoEventUtils").nonNullIntNumber(a),this.updateLastUpdatedTime()};f.setRtcActorID=function(a){this.$ZenonLSCallSummary$p_15=a};f.unsetEndCallFields=function(){this.$ZenonLSCallSummary$p_18===!0&&(this.$ZenonLSCallSummary$p_16=null,this.$ZenonLSCallSummary$p_17=null,this.$ZenonLSCallSummary$p_19=null,this.$ZenonLSCallSummary$p_3=null,this.$ZenonLSCallSummary$p_1.call_ended_time="-1",this.$ZenonLSCallSummary$p_5=0,this.$ZenonLSCallSummary$p_18=null)};f.onCallEnded=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){this.$ZenonLSCallSummary$p_16=a,this.$ZenonLSCallSummary$p_17=d,this.$ZenonLSCallSummary$p_18=c,this.$ZenonLSCallSummary$p_19=b,this.$ZenonLSCallSummary$p_3==null&&(this.$ZenonLSCallSummary$p_3=this.$ZenonLSCallSummary$p_22()),yield this.updateBatteryEnd(),this.setTimestamp("call_ended_time"),this.updateLastUpdatedTime()});function c(b,c,d,e){return a.apply(this,arguments)}return c}();f.onPCStateChange=function(a){this.$ZenonLSCallSummary$p_2=a,this.updateLastUpdatedTime()};f.updateBatteryStart=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield c("ZenonDeviceInfoHelper").getBatteryStats()),b=a.level;a=a.placeholder;a!==!0&&(this.$ZenonLSCallSummary$p_8=parseInt(b,10))});function d(){return a.apply(this,arguments)}return d}();f.updateBatteryEnd=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield c("ZenonDeviceInfoHelper").getBatteryStats()),b=a.level,d=a.placeholder;a=a.wasCharged;d!==!0&&(this.$ZenonLSCallSummary$p_9=parseInt(b,10),this.setDeviceCharged(a))});function d(){return a.apply(this,arguments)}return d}();f.setDeviceCharged=function(a){this.$ZenonLSCallSummary$p_10!==!0&&(this.$ZenonLSCallSummary$p_10=a)};f.setConferenceName=function(a){this.$ZenonLSCallSummary$p_13=a,this.updateLastUpdatedTime()};f.getDeviceCharged=function(){return this.$ZenonLSCallSummary$p_10};e.fromJsonString=function(a){var b;try{b=JSON.parse(a)}catch(a){return null}a=b.callInfo;var c=a.deviceID;a=babelHelpers.objectWithoutPropertiesLoose(a,h);a=new e(a);a.setDeviceID(c);a.$ZenonLSCallSummary$p_1=b.timestamps;a.$ZenonLSCallSummary$p_2=b.pcIsConnected;a.$ZenonLSCallSummary$p_3=b.endIsConnected;a.$ZenonLSCallSummary$p_16=b.endCallReason;a.$ZenonLSCallSummary$p_17=b.endCallSubreason;a.$ZenonLSCallSummary$p_19=b.isRemoteEnded;a.$ZenonLSCallSummary$p_7=b.isVideo;a.$ZenonLSCallSummary$p_15=(c=b.rtcActorID)!=null?c:null;a.$ZenonLSCallSummary$p_6={ld:parseInt(b.videoStats.local_video_duration,10),rd:parseInt(b.videoStats.remote_video_duration,10)};a.$ZenonLSCallSummary$p_8=parseInt(b.extraInfo.battery_start_level,10);a.$ZenonLSCallSummary$p_9=parseInt(b.extraInfo.battery_end_level,10);b.extraInfo.was_device_charged!=null&&(a.$ZenonLSCallSummary$p_10=b.extraInfo.was_device_charged);b.extraInfo.max_concurrent_connected_participant!=null&&(a.$ZenonLSCallSummary$p_11=b.extraInfo.max_concurrent_connected_participant);b.unsetOnRetrieve!=null&&(a.$ZenonLSCallSummary$p_18=b.unsetOnRetrieve);b.accumulatedCallTime!=null&&(a.$ZenonLSCallSummary$p_4=b.accumulatedCallTime);b.conferenceName!=null&&(a.$ZenonLSCallSummary$p_13=b.conferenceName);return a};f.toJsonString=function(){var a={accumulatedCallTime:this.$ZenonLSCallSummary$p_20(),callInfo:this.getCallInfo(),conferenceName:this.$ZenonLSCallSummary$p_13,endCallReason:this.$ZenonLSCallSummary$p_16,endCallSubreason:this.$ZenonLSCallSummary$p_17,endIsConnected:this.$ZenonLSCallSummary$p_21(),extraInfo:this.getExtraInfo(),isRemoteEnded:this.$ZenonLSCallSummary$p_19,isVideo:this.$ZenonLSCallSummary$p_7,joinMode:this.$ZenonLSCallSummary$p_14,pcIsConnected:this.$ZenonLSCallSummary$p_22(),rtcActorID:this.$ZenonLSCallSummary$p_15,timestamps:this.getTimestamps(),unsetOnRetrieve:this.$ZenonLSCallSummary$p_18,videoStats:this.getVideoStats()};return JSON.stringify(a)};f.$ZenonLSCallSummary$p_20=function(){var a=(i||(i=c("performanceNow")))()-this.$ZenonLSCallSummary$p_5;return Math.floor(this.$ZenonLSCallSummary$p_4+a)};f.$ZenonLSCallSummary$p_21=function(){return this.$ZenonLSCallSummary$p_3==null?null:this.$ZenonLSCallSummary$p_3&&Number(this.$ZenonLSCallSummary$p_11)>1};f.$ZenonLSCallSummary$p_22=function(){return this.$ZenonLSCallSummary$p_2&&Number(this.$ZenonLSCallSummary$p_11)>1};f.updateLastUpdatedTime=function(){this.$ZenonLSCallSummary$p_1.last_updated_time=String(this.$ZenonLSCallSummary$p_20())};f.save=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.storeCallSummary(c,b,this)};f.remove=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.removeLocalStorageObjects([{peerID:c,signalingID:b}])};return e}(c("ZenonCallInfoManager"));g["default"]=a}),98);
__d("ZenonLSCallSummaryStore",["ZenonGenericLocalStorageStore","ZenonLSCallSummary"],(function(a,b,c,d,e,f,g){"use strict";var h="localstorage",i="RTC_LS_CALL_SUMMARY_",j="ls_summary",k=3;a=function(a){function b(){return a.call(this,j,h,i)||this}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.retrieveCallSummary=function(a,b){var d=this.getLocalStorageObjects();d=d[a]?d[a][b]:null;if(d)return c("ZenonLSCallSummary").fromJsonString(d.__d);else return null};d.storeCallSummary=function(a,b,c){this.mutateLocalStorageObjects(function(d){d[a]||(d[a]={});d[a][b]={__d:c.toJsonString(),__t:Date.now(),__z:!0};return d},k,!1,{peerID:a,signalingID:b})};return b}(c("ZenonGenericLocalStorageStore"));b=new a();g.ZenonLSCallSummaryStoreInstance=b}),98);
__d("ZenonLSE2EEStatsManager",["E2eeMetricsSerializers","WebAssemblyMemorySingleton","ZenonCallFalcoEventUtils","ZenonCallInfoManager","ZenonPeerID"],(function(a,b,c,d,e,f,g){"use strict";var h=["deviceID"];a=function(a){function b(){var b;for(var c=arguments.length,e=new Array(c),f=0;f<c;f++)e[f]=arguments[f];return(b=a.call.apply(a,[this].concat(e))||this,b.$ZenonLSE2EEStatsManager$p_1={group_e2ee_metrics:d("E2eeMetricsSerializers").GroupE2eeMetrics$DefaultConstructor(),p2p_e2ee_metrics:d("E2eeMetricsSerializers").P2pE2eeMetrics$DefaultConstructor(),track_specific_e2ee_stats:new Map(),wasm_metrics:d("WebAssemblyMemorySingleton").WebAssemblyMemorySingleton.getMetrics()},babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.updateE2eeStats=function(a){this.$ZenonLSE2EEStatsManager$p_1=a};c.getGroupE2eeMetricsInFalcoShape=function(){var a=this.getCallInfo(),b=a.deviceID,c=a.localCallID;a=a.serverInfoData;return babelHelpers["extends"]({g_e2ee_web_wasm_final_memory_usage_kb:String(this.$ZenonLSE2EEStatsManager$p_1.wasm_metrics.memory_size_kb),g_e2ee_web_wasm_memory_reallocation_count:String(this.$ZenonLSE2EEStatsManager$p_1.wasm_metrics.memory_reallocation_count),local_call_id:c},a!=null&&{shared_call_id:a},{steady_time_ms:d("ZenonCallFalcoEventUtils").performanceNowParsed(),system_time_ms:String(Date.now()),web_device_id:b},this.$ZenonLSE2EEStatsManager$p_1.group_e2ee_metrics)};c.getP2pE2eeMetricsInFalcoShape=function(){var a=this.getCallInfo(),b=a.deviceID,c=a.localCallID,e=a.peerID;a=a.serverInfoData;return babelHelpers["extends"]({local_call_id:c},a!=null&&{shared_call_id:a},{peer_id:d("ZenonPeerID").convertPeerIDForLogging(e),steady_time_ms:d("ZenonCallFalcoEventUtils").performanceNowParsed(),system_time_ms:String(Date.now()),web_device_id:b},this.$ZenonLSE2EEStatsManager$p_1.p2p_e2ee_metrics)};c.save=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.storeE2eeStats(c,b,this)};c["delete"]=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.removeLocalStorageObjects([{peerID:c,signalingID:b}])};c.toJsonString=function(){var a={callInfo:this.getCallInfo(),groupE2eeMetrics:this.$ZenonLSE2EEStatsManager$p_1.group_e2ee_metrics,p2pE2eeMetrics:this.$ZenonLSE2EEStatsManager$p_1.p2p_e2ee_metrics,trackSpecificE2eeStatsWithTrackId:Array.from(this.$ZenonLSE2EEStatsManager$p_1.track_specific_e2ee_stats),wasmMetrics:this.$ZenonLSE2EEStatsManager$p_1.wasm_metrics};return JSON.stringify(a)};b.fromJsonString=function(a){var c;try{c=JSON.parse(a)}catch(a){return null}a=c.callInfo;a.deviceID;a=babelHelpers.objectWithoutPropertiesLoose(a,h);a=new b(a);a.$ZenonLSE2EEStatsManager$p_1={group_e2ee_metrics:c.groupE2eeMetrics,p2p_e2ee_metrics:c.p2pE2eeMetrics,track_specific_e2ee_stats:new Map(c.trackSpecificE2eeStatsWithTrackId),wasm_metrics:c.wasmMetrics};return a};return b}(c("ZenonCallInfoManager"));g["default"]=a}),98);
__d("ZenonLSE2EEStore",["ZenonGenericLocalStorageStore","ZenonLSE2EEStatsManager"],(function(a,b,c,d,e,f,g){"use strict";var h="localstorage",i="RTC_LS_E2EE_STATS_",j="ls_e2ee_stats",k=3;a=function(a){function b(){return a.call(this,j,h,i)||this}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.retrieveE2eeStats=function(a,b){var d=this.getLocalStorageObjects();d=d[a]?d[a][b]:null;if(d)return c("ZenonLSE2EEStatsManager").fromJsonString(d.__d);else return null};d.storeE2eeStats=function(a,b,c){this.mutateLocalStorageObjects(function(d){d[a]||(d[a]={});d[a][b]={__d:c.toJsonString(),__t:Date.now(),__z:!0};return d},k,!1,{peerID:a,signalingID:b})};return b}(c("ZenonGenericLocalStorageStore"));b=new a();g.ZenonLSE2EEStoreInstance=b}),98);
__d("ZenonLSPeerConnectionSummary",["ZenonCallFalcoEventUtils","ZenonCallInfoManager","ZenonIceStatsParser","ZenonLoggingEventTypes","ZenonMWMessageTypes","ZenonPeerID","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";var h=["deviceID"],i;a=function(a){function b(b){b=a.call(this,b)||this;b.$ZenonLSPeerConnectionSummary$p_1={CoreAudioMetrics:{isstall:"0",voice_detect_pct:[]},CoreVideoMetrics:{screen:{capture_stall:{is_stall:"0"},encode_stall:{is_stall:"0"},sent_stall:{is_stall:"0"}},video:{capture_stall:{is_stall:"0"},encode_stall:{is_stall:"0"},sent_stall:{is_stall:"0"}}},DebugAudioMetrics:{NetworkReceive:{}},audio:{echo_confidence:{}},dataChannelMetrics:{},ecv:{},extraInfo:{},receiver:{},receiver_pct:{audio:{}},receiver_stalls:{screen_recv_stalls:{recv_decode_stall:{is_stall:"0"},recv_no_bytes_stall:{is_stall:"0"},recv_render_stall:{is_stall:"0"}},video_recv_stalls:{recv_decode_stall:{is_stall:"0"},recv_no_bytes_stall:{is_stall:"0"},recv_render_stall:{is_stall:"0"}}},sender:{},sender_pct:{screen:{},video:{}},video:{}};b.$ZenonLSPeerConnectionSummary$p_2={};b.$ZenonLSPeerConnectionSummary$p_3={};b.$ZenonLSPeerConnectionSummary$p_5=-1;b.$ZenonLSPeerConnectionSummary$p_8=null;b.$ZenonLSPeerConnectionSummary$p_9=new Map();b.$ZenonLSPeerConnectionSummary$p_10="unknown";b.$ZenonLSPeerConnectionSummary$p_6=(i||(i=c("performanceNow")))();b.$ZenonLSPeerConnectionSummary$p_4=0;b.$ZenonLSPeerConnectionSummary$p_7=null;return b}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.$ZenonLSPeerConnectionSummary$p_11=function(){var a,b=this,c="",e=0,f=0,g=0,h=0;Object.keys((a=this.$ZenonLSPeerConnectionSummary$p_1.dataChannelMetrics)!=null?a:{}).forEach(function(a){a=b.$ZenonLSPeerConnectionSummary$p_1.dataChannelMetrics[a];if(a==null)return;c+=a.label+":"+a.bytes_sent+":"+a.bytes_received+":"+a.messages_sent+":"+a.messages_received+",";e+=Number(a.bytes_sent);f+=Number(a.bytes_received);g+=Number(a.messages_sent);h+=Number(a.messages_received)});return{data_channel_total_bytes_recv:d("ZenonCallFalcoEventUtils").nonNullIntNumber(f),data_channel_total_bytes_sent:d("ZenonCallFalcoEventUtils").nonNullIntNumber(e),data_channel_total_msg_recv:d("ZenonCallFalcoEventUtils").nonNullIntNumber(h),data_channel_total_msg_sent:d("ZenonCallFalcoEventUtils").nonNullIntNumber(g),data_channel_type:"SCTP",sctp_per_channel_stats_raw:c}};e.$ZenonLSPeerConnectionSummary$p_12=function(){var a=this.$ZenonLSPeerConnectionSummary$p_1.sender,b=a.codec;b=b===void 0?{}:b;var c={gen0_ice_sent_host:d("ZenonCallFalcoEventUtils").nonNullIntNumber(this.$ZenonLSPeerConnectionSummary$p_2.host),gen0_ice_sent_relay:d("ZenonCallFalcoEventUtils").nonNullIntNumber(this.$ZenonLSPeerConnectionSummary$p_2.relay),gen0_ice_sent_srflx:d("ZenonCallFalcoEventUtils").nonNullIntNumber(this.$ZenonLSPeerConnectionSummary$p_2.srflx)};b=b.www;b!=null&&(c.audio_send_codec=String(b));this.$ZenonLSPeerConnectionSummary$p_13(c,"audio_send_bytes_sent",a.bytes);this.$ZenonLSPeerConnectionSummary$p_13(c,"audio_send_level_count",a.taulc);this.$ZenonLSPeerConnectionSummary$p_13(c,"audio_send_level_sum",a.tx_sum_lvl);this.$ZenonLSPeerConnectionSummary$p_13(c,"audio_send_packets_sent",a.psent);this.$ZenonLSPeerConnectionSummary$p_13(c,"avg_video_uplink_bandwidth_estimate",a.ube_avg);this.$ZenonLSPeerConnectionSummary$p_13(c,"transport_conn_rtt_avg",a.avgrtt);return c};e.$ZenonLSPeerConnectionSummary$p_13=function(a,b,c){c!=null&&(a[b]=d("ZenonCallFalcoEventUtils").truncateNumber(c))};e.$ZenonLSPeerConnectionSummary$p_14=function(){var a,b,c;a=(a=this.$ZenonLSPeerConnectionSummary$p_1.video.sender)==null?void 0:a.ss;b=(b=a==null?void 0:a.frames)!=null?b:0;c=(c=a==null?void 0:a.eqps)!=null?c:0;c=b>0&&c>0?c/b:null;b={};this.$ZenonLSPeerConnectionSummary$p_15(b,"avg_video_actual_encode_bitrate_ss",a==null?void 0:a.avbr);this.$ZenonLSPeerConnectionSummary$p_15(b,"avg_video_uplink_bandwidth_estimate_ss",a==null?void 0:a.avbw);this.$ZenonLSPeerConnectionSummary$p_15(b,"video_send_duration_ss",a==null?void 0:a.dur);this.$ZenonLSPeerConnectionSummary$p_15(b,"video_send_frames_send_to_encoder_ss",a==null?void 0:a.eiframes);this.$ZenonLSPeerConnectionSummary$p_15(b,"video_send_total_input_pixel_ss",a==null?void 0:a.video_sum_capture_pixel);this.$ZenonLSPeerConnectionSummary$p_15(b,"video_send_total_output_pixel_ss",a==null?void 0:a.video_sum_encoded_pixel);this.$ZenonLSPeerConnectionSummary$p_15(b,"video_send_frames_encoded_ss",a==null?void 0:a.frames);this.$ZenonLSPeerConnectionSummary$p_15(b,"video_send_qp_sum_ss",c);return b};e.$ZenonLSPeerConnectionSummary$p_15=function(a,b,c){c!=null&&(a[b]=d("ZenonCallFalcoEventUtils").truncateNumber(c))};e.$ZenonLSPeerConnectionSummary$p_16=function(){var a=this.$ZenonLSPeerConnectionSummary$p_1.video.bwe,b={};this.$ZenonLSPeerConnectionSummary$p_17(b,"avg_video_actual_encode_bitrate",a==null?void 0:a.avg_enc_bitrate);this.$ZenonLSPeerConnectionSummary$p_17(b,"avg_video_actual_encode_bitrate_ss",a==null?void 0:a.avg_enc_bitrate_ss);this.$ZenonLSPeerConnectionSummary$p_17(b,"avg_video_retransmit_bitrate",a==null?void 0:a.avg_retrans_bitrate);this.$ZenonLSPeerConnectionSummary$p_17(b,"avg_video_transmit_bitrate",a==null?void 0:a.avg_trans_bitrate);this.$ZenonLSPeerConnectionSummary$p_17(b,"avg_video_uplink_bandwidth_estimate",a==null?void 0:a.avg_send_bw);return b};e.$ZenonLSPeerConnectionSummary$p_17=function(a,b,c){c!=null&&(a[b]=d("ZenonCallFalcoEventUtils").truncateNumber(c))};e.$ZenonLSPeerConnectionSummary$p_18=function(){var a;a=(a=this.$ZenonLSPeerConnectionSummary$p_1.sender_pct.video)==null?void 0:a.vqs;var b={};(a==null?void 0:a.avg)!=null&&(b.video_send_quality_score=d("ZenonCallFalcoEventUtils").truncateNumber(a==null?void 0:a.avg));return b};e.$ZenonLSPeerConnectionSummary$p_19=function(){var a=this.$ZenonLSPeerConnectionSummary$p_1.video.sender,b={video_send_codec:a==null?void 0:a.ename};this.$ZenonLSPeerConnectionSummary$p_20(b,"video_recv_firs_sent",a==null?void 0:a.fir);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_recv_nacks_sent",a==null?void 0:a.nack);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_recv_plis_sent",a==null?void 0:a.pli);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_frame_height",a==null?void 0:a.ah);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_frame_height_input",a==null?void 0:a.ch);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_frame_width",a==null?void 0:a.aw);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_frame_width_input",a==null?void 0:a.cw);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_frames_captured",a==null?void 0:a.fcap);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_frames_encoded",a==null?void 0:a.frames);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_frames_sent",a==null?void 0:a.fcsn);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_frames_send_to_encoder",a==null?void 0:a.eiframes);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_capture_duration_ms",this.$ZenonLSPeerConnectionSummary$p_1.video.ld);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_duration_blur",a==null?void 0:a.video_blur_dur);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_key_frames_encoded",a==null?void 0:a.kframes);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_packets_sent",a==null?void 0:a.psent);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_qp_sum",a==null?void 0:a.eqps);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_total_input_pixel",a==null?void 0:a.video_sum_capture_pixel);this.$ZenonLSPeerConnectionSummary$p_20(b,"video_send_total_output_pixel",a==null?void 0:a.video_sum_encoded_pixel);return b};e.$ZenonLSPeerConnectionSummary$p_20=function(a,b,c){c!=null&&(a[b]=d("ZenonCallFalcoEventUtils").truncateNumber(c))};e.$ZenonLSPeerConnectionSummary$p_21=function(){var a,b=this.$ZenonLSPeerConnectionSummary$p_1.video.receiver,c={video_recv_codec:b==null?void 0:b.dname};this.$ZenonLSPeerConnectionSummary$p_22(c,"audio_recv_jitter_buffer_frames_assembled",b==null?void 0:b.jtasb);this.$ZenonLSPeerConnectionSummary$p_22(c,"audio_recv_jitter_buffer_frames_out",b==null?void 0:b.jtfrm);this.$ZenonLSPeerConnectionSummary$p_22(c,"audio_recv_jitter_buffer_keyframes_out",b==null?void 0:b.jtkey);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_agg_bytes_decoded",b==null?void 0:b.dec_bytes);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_agg_packets_lost",b==null?void 0:b.plost);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_agg_packets_recv",b==null?void 0:b.precv);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_av_sync_abs",b==null?void 0:b.avabs);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_frame_height",b==null?void 0:b.rh);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_frame_width",b==null?void 0:b.rw);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_frames_decoded",b==null?void 0:b.frd);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_freeze_count",b==null?void 0:b.frcnt);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_freeze_duration",b==null?void 0:b.frdur);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_freeze_duration_above_500_ms",b==null?void 0:b.frdur500);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_freeze_duration_above_500_ms_v2",b==null?void 0:b.frdur500);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_pause_count",b==null?void 0:b.pact);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_pause_duration_ms",b==null?void 0:b.padur);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_qp_sum",b==null?void 0:b.qps);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_total_pixels_decoded",b==null?void 0:b.agg_video_sum_decoded_pixel);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_union_decode_time_ms",b==null?void 0:b.dec_time);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_send_firs_recv",b==null?void 0:b.fir);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_send_nacks_recv",b==null?void 0:b.nack);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_send_plis_recv",b==null?void 0:b.pli);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_weighted_vqs",b==null||(a=b.vqs)==null?void 0:a.avg);var d=b==null?void 0:b.dec_time_all_streams;b=b==null?void 0:b.dec_frame;this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_agg_decode_time_ms",d);this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_agg_frames_decoded",b);d!=null&&d>0&&b!=null&&b>0&&this.$ZenonLSPeerConnectionSummary$p_22(c,"video_recv_framerate_decoded",b*1e3/d);return c};e.$ZenonLSPeerConnectionSummary$p_23=function(){var a;a=(a=this.$ZenonLSPeerConnectionSummary$p_1.video.receiver)==null?void 0:a.ss_recv;var b={};this.$ZenonLSPeerConnectionSummary$p_24(b,"video_recv_duration_ss",a==null?void 0:a.ss_recv_dur);return b};e.$ZenonLSPeerConnectionSummary$p_24=function(a,b,c){c!=null&&(a[b]=d("ZenonCallFalcoEventUtils").truncateNumber(c))};e.$ZenonLSPeerConnectionSummary$p_25=function(){var a,b,c;a=(a=this.$ZenonLSPeerConnectionSummary$p_1.receiver_stalls)==null||(a=a.video_recv_stalls)==null?void 0:a.recv_no_bytes_stall;b=(b=this.$ZenonLSPeerConnectionSummary$p_1.receiver_stalls)==null||(b=b.video_recv_stalls)==null?void 0:b.recv_decode_stall;c=(c=this.$ZenonLSPeerConnectionSummary$p_1.receiver_stalls)==null||(c=c.video_recv_stalls)==null?void 0:c.recv_render_stall;var d={};if(a){var e=a.is_stall,f=a.sdur;a=a.nstall;e!=null&&(d.video_recv_byte_received_is_stalled=String(e));f!=null&&(d.video_recv_byte_received_total_stall_duration_ms=String(f));a!=null&&(d.video_recv_byte_received_total_stalls=String(a))}if(b){e=b.is_stall;f=b.sdur;a=b.nstall;e!=null&&(d.video_recv_decoder_is_stalled=String(e));f!=null&&(d.video_recv_decoder_total_stall_duration_ms=String(f));a!=null&&(d.video_recv_decoder_total_stalls=String(a))}if(c){b=c.is_stall;e=c.sdur;f=c.nstall;b!=null&&(d.video_render_is_stalled=String(b));e!=null&&(d.video_render_total_stall_duration_ms=String(e));f!=null&&(d.video_render_total_stalls=String(f))}return d};e.$ZenonLSPeerConnectionSummary$p_26=function(){var a;a=(a=this.$ZenonLSPeerConnectionSummary$p_1.receiver_stalls)==null||(a=a.screen_recv_stalls)==null?void 0:a.recv_decode_stall;var b={};if(a){var c=a.is_stall,d=a.sdur;a=a.nstall;c!=null&&(b.screen_share_recv_decoder_is_stalled=String(c));d!=null&&(b.screen_share_recv_decoder_total_stall_duration_ms=String(d));a!=null&&(b.screen_share_recv_decoder_total_stalls=String(a))}return b};e.$ZenonLSPeerConnectionSummary$p_22=function(a,b,c){c!=null&&(a[b]=d("ZenonCallFalcoEventUtils").truncateNumber(c))};e.$ZenonLSPeerConnectionSummary$p_27=function(){var a,b,c,d=this.$ZenonLSPeerConnectionSummary$p_1.DebugAudioMetrics.NetworkReceive.jb_nm,e=d==null||(a=d.neteq)==null?void 0:a.meanWait,f=d==null||(b=d.speech_expand_rate)==null?void 0:b.avg;d=d==null||(c=d.speech_expand_rate)==null?void 0:c.M;var g={};e!=null&&(g.audio_recv_neteq_mean_wait_ms=String(e));f!=null&&(g.audio_recv_neteq_speech_expand_rate_avg=String(f));d!=null&&(g.audio_recv_neteq_speech_expand_rate_max=String(d));return g};e.$ZenonLSPeerConnectionSummary$p_28=function(){var a=this.$ZenonLSPeerConnectionSummary$p_1.CoreAudioMetrics,b=a.audio_device,c=a.isstall,d=a.sdur;a=a.astall;var e={};b!=null&&(e.audio_device=String(b));c!=null&&(e.audio_device_is_stalled=String(c));d!=null&&(e.audio_device_stall_duration=String(d));a!=null&&(e.audio_device_total_stall=String(a));return e};e.$ZenonLSPeerConnectionSummary$p_29=function(){var a,b={};if(((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_neteq_wait_time_ms)!=null){b.ecv_neteq_wait_time_ms=d("ZenonCallFalcoEventUtils").truncateNumber(Number((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_neteq_wait_time_ms))}if(((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_rtt_ms)!=null){b.ecv_rtt_ms=d("ZenonCallFalcoEventUtils").truncateNumber(Number((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_rtt_ms))}if(((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_plccng_v2)!=null){b.ecv_plccng_v2=d("ZenonCallFalcoEventUtils").truncateNumber(Number((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_plccng_v2))}if(((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_video_freeze_duration_above_500_ms_v2)!=null){b.ecv_video_freeze_duration_above_500_ms_v2=d("ZenonCallFalcoEventUtils").truncateNumber(Number((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_video_freeze_duration_above_500_ms_v2))}if(((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_av_sync_above_1000_ms)!=null){b.ecv_av_sync_above_1000_ms=d("ZenonCallFalcoEventUtils").truncateNumber(Number((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_av_sync_above_1000_ms))}if(((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_decoded_bitrate_duration_sum)!=null){b.ecv_decoded_bitrate_duration_sum=d("ZenonCallFalcoEventUtils").truncateNumber(Number((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_decoded_bitrate_duration_sum))}return b};e.$ZenonLSPeerConnectionSummary$p_30=function(){var a=this.$ZenonLSPeerConnectionSummary$p_1.CoreVideoMetrics.video.capture_stall,b=a.is_stall,c=a.last_sdur,d=a.sdur;a=a.nstall;var e=this.$ZenonLSPeerConnectionSummary$p_1.CoreVideoMetrics.video.encode_stall,f=e.is_stall,g=e.last_sdur,h=e.sdur;e=e.nstall;var i=this.$ZenonLSPeerConnectionSummary$p_1.CoreVideoMetrics.video.sent_stall,j=i.is_stall,k=i.last_sdur,l=i.sdur;i=i.nstall;var m={};b!=null&&(m.video_device_capture_is_stalled=String(b));c!=null&&(m.video_device_capture_last_stall_duration_ms=String(c));d!=null&&(m.video_device_capture_total_stall_duration_ms=String(d));a!=null&&(m.video_device_capture_total_stalls=String(a));f!=null&&(m.video_encode_is_stalled=String(f));g!=null&&(m.video_encode_last_stall_duration_ms=String(g));h!=null&&(m.video_encode_total_stall_duration_ms=String(h));e!=null&&(m.video_encode_total_stalls=String(e));j!=null&&(m.video_send_is_stalled=String(j));k!=null&&(m.video_send_last_stall_duration_ms=String(k));l!=null&&(m.video_send_total_stall_duration_ms=String(l));i!=null&&(m.video_send_total_stalls=String(i));return m};e.$ZenonLSPeerConnectionSummary$p_31=function(){var a=this.$ZenonLSPeerConnectionSummary$p_1,b=a.receiver;a=a.receiver_pct;var c=null;b.codec!=null&&(c=String(Object.values(b.codec).pop()));var e={gen0_ice_received_host:d("ZenonCallFalcoEventUtils").nonNullIntNumber(this.$ZenonLSPeerConnectionSummary$p_3.host),gen0_ice_received_relay:d("ZenonCallFalcoEventUtils").nonNullIntNumber(this.$ZenonLSPeerConnectionSummary$p_3.relay),gen0_ice_received_srflx:d("ZenonCallFalcoEventUtils").nonNullIntNumber(this.$ZenonLSPeerConnectionSummary$p_3.srflx)};c!=null&&(e.audio_recv_codec=String(c));this.$ZenonLSPeerConnectionSummary$p_32(e,"audio_ctp_latency_avg_us",(c=a.audio.jbd)==null?void 0:c.avg,(c=a.audio.rtt)==null?void 0:c.avg);this.$ZenonLSPeerConnectionSummary$p_32(e,"audio_ctp_latency_p5_us",(c=a.audio.jbd)==null?void 0:c.p5,(c=a.audio.rtt)==null?void 0:c.p5);this.$ZenonLSPeerConnectionSummary$p_32(e,"audio_ctp_latency_p50_us",(c=a.audio.jbd)==null?void 0:c.p50,(c=a.audio.rtt)==null?void 0:c.p50);this.$ZenonLSPeerConnectionSummary$p_32(e,"audio_ctp_latency_p95_us",(c=a.audio.jbd)==null?void 0:c.p95,(c=a.audio.rtt)==null?void 0:c.p95);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_bytes_recv",b.bytes);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_concealed_samples",b.sp_c);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_fec_packets_discarded",b.fecpd);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_fec_packets_received",b.fecpr);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_jitter",b.jitter);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_jitter_buffer_flushes",b.dec_pack_flush);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_level_count",b.taulc);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_jitter_buffer_emitted_count",b.jbec);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_jitter_buffer_delay",b.jbd);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_level_sum",b.rx_sum_lvl);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_total_samples_duration",b.sp_dur);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_total_samples_received",b.sp_r);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_neteq_accelerate",b.dec_ar);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_neteq_normal",b.dec_normal);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_neteq_operations",b.neteq_calls);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_neteq_plc",b.dec_plc);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_neteq_plccng",b.dec_plc_cng);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_neteq_preemptive_expand",b.dec_per);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_packets_lost",b.plost);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_packets_recv",b.precv);this.$ZenonLSPeerConnectionSummary$p_33(e,"audio_recv_silent_concealed_samples",b.sp_sc);return e};e.$ZenonLSPeerConnectionSummary$p_34=function(){var a,b={};a=(a=this.$ZenonLSPeerConnectionSummary$p_1.video.sender)==null?void 0:a.ss;if((a==null?void 0:a.dur)!=null&&(a==null?void 0:a.dur)>0){a=this.$ZenonLSPeerConnectionSummary$p_1.CoreVideoMetrics.screen.capture_stall;var c=a.is_stall,d=a.sdur;a=a.nstall;var e=this.$ZenonLSPeerConnectionSummary$p_1.CoreVideoMetrics.screen.encode_stall,f=e.is_stall,g=e.sdur;e=e.nstall;var h=this.$ZenonLSPeerConnectionSummary$p_1.CoreVideoMetrics.screen.sent_stall,i=h.is_stall,j=h.sdur;h=h.nstall;c!=null&&(b.screen_share_capture_is_stalled=String(c));d!=null&&(b.screen_share_capture_total_stall_duration_ms=String(d));a!=null&&(b.screen_share_capture_total_stalls=String(a));f!=null&&(b.screen_share_encode_is_stalled=String(f));g!=null&&(b.screen_share_encode_total_stall_duration_ms=String(g));e!=null&&(b.screen_share_encode_total_stalls=String(e));i!=null&&(b.screen_share_send_is_stalled=String(i));j!=null&&(b.screen_share_send_total_stall_duration_ms=String(j));h!=null&&(b.screen_share_send_total_stalls=String(h))}return b};e.$ZenonLSPeerConnectionSummary$p_33=function(a,b,c){c!=null&&(a[b]=d("ZenonCallFalcoEventUtils").truncateNumber(c))};e.$ZenonLSPeerConnectionSummary$p_35=function(){var a,b=this.$ZenonLSPeerConnectionSummary$p_1.extraInfo,c=b.localIceCandidate;b=b.remoteIceCandidate;return{relay_protocol:c==null?void 0:c.relayProtocol,transport_conn_type:"l:"+((a=c==null?void 0:c.candidateType)!=null?a:"")+"-"+((a=c==null?void 0:c.protocol)!=null?a:"")+";r:"+((c=b==null?void 0:b.candidateType)!=null?c:"")+"-"+((a=b==null?void 0:b.protocol)!=null?a:"")}};e.$ZenonLSPeerConnectionSummary$p_36=function(){var a=this.$ZenonLSPeerConnectionSummary$p_9,b={},c=0,e=!1,f=0,g=0;a.forEach(function(a,b){e!==a&&(a?c>0&&(g++,f+=b-c,c=0):c=b,e=a)});if(c>0){a=this.$ZenonLSPeerConnectionSummary$p_5;a>-1&&a>c&&(g++,f+=a-c)}b.transport_num_gaps=d("ZenonCallFalcoEventUtils").nonNullIntNumber(g);b.transport_total_gap_duration_ms=d("ZenonCallFalcoEventUtils").nonNullIntNumber(f);this.$ZenonLSPeerConnectionSummary$p_8!=null&&(b.transport_connected=this.$ZenonLSPeerConnectionSummary$p_8?"1":"0");return b};e.$ZenonLSPeerConnectionSummary$p_37=function(){var a,b={};b.audio_send_echo_confidence=(a=this.$ZenonLSPeerConnectionSummary$p_1.audio)==null||(a=a.echo_confidence)==null?void 0:a.audio_send_echo_confidence;return b};e.onCallEnded=function(){this.$ZenonLSPeerConnectionSummary$p_5=this.$ZenonLSPeerConnectionSummary$p_38(),this.$ZenonLSPeerConnectionSummary$p_8==null&&(this.$ZenonLSPeerConnectionSummary$p_8=this.$ZenonLSPeerConnectionSummary$p_7)};e.$ZenonLSPeerConnectionSummary$p_32=function(a,b,c,e){var f=0;c!=null&&(f+=c);e!=null&&(f+=e/2);f>0&&(a[b]=d("ZenonCallFalcoEventUtils").truncateNumber(f))};e.getPeerConnectionSummary=function(){var a=this.getCallInfo(),b=a.deviceID,c=a.localCallID,e=a.peerID,f=a.serverInfoData;a=a.signalingID;return babelHelpers["extends"]({},this.$ZenonLSPeerConnectionSummary$p_11(),this.$ZenonLSPeerConnectionSummary$p_28(),this.$ZenonLSPeerConnectionSummary$p_12(),this.$ZenonLSPeerConnectionSummary$p_31(),this.$ZenonLSPeerConnectionSummary$p_14(),this.$ZenonLSPeerConnectionSummary$p_16(),this.$ZenonLSPeerConnectionSummary$p_18(),this.$ZenonLSPeerConnectionSummary$p_19(),this.$ZenonLSPeerConnectionSummary$p_21(),this.$ZenonLSPeerConnectionSummary$p_23(),this.$ZenonLSPeerConnectionSummary$p_27(),this.$ZenonLSPeerConnectionSummary$p_36(),this.$ZenonLSPeerConnectionSummary$p_29(),this.$ZenonLSPeerConnectionSummary$p_30(),this.$ZenonLSPeerConnectionSummary$p_34(),this.$ZenonLSPeerConnectionSummary$p_25(),this.$ZenonLSPeerConnectionSummary$p_26(),this.$ZenonLSPeerConnectionSummary$p_35(),this.$ZenonLSPeerConnectionSummary$p_37(),f!=null&&{shared_call_id:f},{connection_logging_id:a,local_call_id:c,media_path:this.$ZenonLSPeerConnectionSummary$p_10,peer_id:d("ZenonPeerID").convertPeerIDForLogging(e),protocol:"multiway",steady_time_ms:d("ZenonCallFalcoEventUtils").performanceNowParsed(),system_time_ms:String(Date.now()),web_device_id:b})};e.$ZenonLSPeerConnectionSummary$p_38=function(){var a=(i||(i=c("performanceNow")))()-this.$ZenonLSPeerConnectionSummary$p_6;return Math.floor(this.$ZenonLSPeerConnectionSummary$p_4+a)};e.updateIceInfo=function(a,b){var c=b===d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send?this.$ZenonLSPeerConnectionSummary$p_2:this.$ZenonLSPeerConnectionSummary$p_3;b=d("ZenonIceStatsParser").extractIceInfo(a);b.forEach(function(a){var b=a.gen;a=a.type;b===0&&(c[a]==null?c[a]=1:c[a]++)})};e.onPCStateChange=function(a){this.$ZenonLSPeerConnectionSummary$p_7!==a&&(this.$ZenonLSPeerConnectionSummary$p_7=a,this.$ZenonLSPeerConnectionSummary$p_9.set(this.$ZenonLSPeerConnectionSummary$p_38(),a))};e.$ZenonLSPeerConnectionSummary$p_39=function(a){switch(a){case d("ZenonMWMessageTypes").ZenonMWMediaPath.SFU:return"sfu";case d("ZenonMWMessageTypes").ZenonMWMediaPath.P2P:return"p2p";case d("ZenonMWMessageTypes").ZenonMWMediaPath.UNKNOWN:default:return"unknown"}};e.setMediaPath=function(a){this.$ZenonLSPeerConnectionSummary$p_10=this.$ZenonLSPeerConnectionSummary$p_39(a)};e.setMediaStats=function(a){this.$ZenonLSPeerConnectionSummary$p_1=a};e.save=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.storePeerConnectionSummary(c,b,this)};e["delete"]=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.removeLocalStorageObjects([{peerID:c,signalingID:b}])};e.toJsonString=function(){var a=this.getCallInfo();a=a.signalingID;a={accumulatedCallTime:this.$ZenonLSPeerConnectionSummary$p_38(),callInfo:this.getCallInfo(),connectionLoggingId:a,endIsConnected:this.$ZenonLSPeerConnectionSummary$p_8,gen0IceReceivedCount:this.$ZenonLSPeerConnectionSummary$p_3,gen0IceSentCount:this.$ZenonLSPeerConnectionSummary$p_2,mediaPath:this.$ZenonLSPeerConnectionSummary$p_10,mediaStats:this.$ZenonLSPeerConnectionSummary$p_1,pcIsConnected:this.$ZenonLSPeerConnectionSummary$p_7};return JSON.stringify(a)};b.fromJsonString=function(a){var c,d;try{d=JSON.parse(a)}catch(a){return null}a=d.callInfo;a.deviceID;a=babelHelpers.objectWithoutPropertiesLoose(a,h);a=new b(a);a.$ZenonLSPeerConnectionSummary$p_10=d.mediaPath;a.$ZenonLSPeerConnectionSummary$p_1=d.mediaStats;a.$ZenonLSPeerConnectionSummary$p_3=d.gen0IceReceivedCount;a.$ZenonLSPeerConnectionSummary$p_2=d.gen0IceSentCount;a.$ZenonLSPeerConnectionSummary$p_7=(c=d.pcIsConnected)!=null?c:null;a.$ZenonLSPeerConnectionSummary$p_8=d.endIsConnected;d.accumulatedCallTime!=null&&(a.$ZenonLSPeerConnectionSummary$p_4=d.accumulatedCallTime);return a};return b}(c("ZenonCallInfoManager"));g["default"]=a}),98);
__d("ZenonLSPeerConnectionSummaryStore",["ZenonGenericLocalStorageStore","ZenonLSPeerConnectionSummary"],(function(a,b,c,d,e,f,g){"use strict";var h="localstorage",i="RTC_LS_PCS_",j="ls_pcs",k=3;a=function(a){function b(){return a.call(this,j,h,i)||this}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.retrievePeerConnectionSummary=function(a,b){var d=this.getLocalStorageObjects();d=d[a]?d[a][b]:null;if(d)return c("ZenonLSPeerConnectionSummary").fromJsonString(d.__d);else return null};d.storePeerConnectionSummary=function(a,b,c){this.mutateLocalStorageObjects(function(d){d[a]||(d[a]={});d[a][b]={__d:c.toJsonString(),__t:Date.now(),__z:!0};return d},k,!1,{peerID:a,signalingID:b})};return b}(c("ZenonGenericLocalStorageStore"));b=new a();g.ZenonLSPeerConnectionSummaryStoreInstance=b}),98);
__d("ZenonLSStarRatingsManager",["LsRtcEndCallSurveyFalcoEvent","LsRtcStarRatingFalcoEvent","ZenonCallInfoManager","ZenonPeerID"],(function(a,b,c,d,e,f,g){"use strict";var h=["deviceID"];a=function(a){function b(){return a.apply(this,arguments)||this}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.setRating=function(a,b){var e=this.getCallInfo(),f=e.deviceID,g=e.localCallID,h=e.peerID;e=e.serverInfoData;var i={local_call_id:g,peer_id:d("ZenonPeerID").convertPeerIDForLogging(h),shared_call_id:e,web_device_id:f};c("LsRtcStarRatingFalcoEvent").logImmediately(function(){return babelHelpers["extends"]({rating_style:b?"1":null,star_rating:a.toString()},i)})};e.setSurvey=function(a,b,e){b===void 0&&(b=null);e===void 0&&(e=null);var f=this.getCallInfo(),g=f.deviceID,h=f.localCallID,i=f.peerID;f=f.serverInfoData;h={local_call_id:h,peer_id:d("ZenonPeerID").convertPeerIDForLogging(i),shared_call_id:f,web_device_id:g};i=Array.isArray(b)?b:b!=null?[b]:[];var j=babelHelpers["extends"]({rtc_end_call_survey_issue:(g=(f=e)==null?void 0:f.toLocaleLowerCase())!=null?g:"",rtc_end_call_survey_selected_options:i},h,a==null?{}:{rtc_end_call_survey_freeform:a});c("LsRtcEndCallSurveyFalcoEvent").log(function(){return j})};e.save=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.storeStarRatings(c,b,this)};e["delete"]=function(a){var b=this.getCallInfo(),c=b.peerID;b=b.signalingID;a.removeLocalStorageObjects([{peerID:c,signalingID:b}])};e.toJsonString=function(){var a={callInfo:this.getCallInfo()};return JSON.stringify(a)};b.fromJsonString=function(a){var c;try{c=JSON.parse(a)}catch(a){return null}a=c.callInfo;a.deviceID;a=babelHelpers.objectWithoutPropertiesLoose(a,h);return new b(a)};return b}(c("ZenonCallInfoManager"));g["default"]=a}),98);
__d("ZenonLSStarRatingsStore",["ZenonGenericLocalStorageStore","ZenonLSStarRatingsManager"],(function(a,b,c,d,e,f,g){"use strict";var h="localstorage",i="RTC_LS_STAR_RATINGS_",j="ls_star_ratings",k=3;a=function(a){function b(){return a.call(this,j,h,i)||this}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.retrieveStarRatings=function(a,b){var d=this.getLocalStorageObjects();d=d[a]?d[a][b]:null;if(d)return c("ZenonLSStarRatingsManager").fromJsonString(d.__d);else return null};d.storeStarRatings=function(a,b,c){this.mutateLocalStorageObjects(function(d){d[a]||(d[a]={});d[a][b]={__d:c.toJsonString(),__t:Date.now(),__z:!0};return d},k,!1,{peerID:a,signalingID:b})};return b}(c("ZenonGenericLocalStorageStore"));b=new a();g.ZenonLSStarRatingsStoreInstance=b}),98);
__d("promiseAny",["invariant","AggregateError","Promise"],(function(a,b,c,d,e,f,g,h){var i;function j(a){return new(i||(i=b("Promise")))(function(c,d){return(i||(i=b("Promise"))).resolve(a).then(d,c)})}function a(a){a.length!==0||h(0,14837);return(i||(i=b("Promise"))).all(a.map(j)).then(function(a){throw new(c("AggregateError"))(a)},function(a){return a})}g["default"]=a}),98);
__d("ZenonMessageSenderChain",["promiseAny"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.addMessageSender=function(a){this.$1.push(a)};b.sendMessage=function(a){var b=this.$1.map(function(b){return b.sendMessage(a)});return c("promiseAny")(b)};b.setMessageReceiver=function(a){this.$1.forEach(function(b){return b.setMessageReceiver(a)})};b.setLoggingEventHandler=function(a){this.$1.forEach(function(b){return b.setLoggingEventHandler(a)})};return a}();g["default"]=a}),98);
__d("ZenonMqttChannel",["CurrentUser","FBLogger","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig","getErrorSafe","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=-1;try{c("MqttEnvInitializer").initialize();d("MqttEnv").setIsUserLoggedInNow(c("CurrentUser").isLoggedIn);if(c("gkx")("11152")&&c("CurrentUser").getAppID()===String(1358015658191005))a=949958857019662;else{var b;a=Number((b=c("CurrentUser").getAppID())!=null?b:c("MqttWebConfig").appID)}return new(c("MqttChannel"))({appId:a,capabilities:c("MqttWebConfig").capabilities,chatVisibility:!1,clientCapabilities:c("MqttWebConfig").clientCapabilities,endpoint:c("MqttWebConfig").endpoint,initialSubscribedTopics:c("MqttWebConfig").subscribedTopics,phpOverride:c("MqttWebConfig").hostNameOverride,pollingEndpoint:c("MqttWebConfig").pollingEndpoint,userFbid:c("MqttWebConfig").fbid})}catch(d){b=c("getErrorSafe")(d);c("FBLogger")("rtc_www").catching(b).warn("[ZenonMqttChannel][%d] failed to create MqttChannel",a);throw b}}b=a();e=b;g["default"]=e}),98);
__d("ZenonSignalingConstants",[],(function(a,b,c,d,e,f){"use strict";a="/t_rtc_multi";b="config_engine";c="D3F4U1T_F8_TR4CK";f.T_RTC_MULTI_MQTT_TOPIC=a;f.CONFIG_ENGINE_STATE_SYNC_TOPIC=b;f.DEFAULT_TRACK=c}),66);
__d("getZenonMqttChannel",["CurrentUser","FBMqttChannel","HorizonWebMqttChannel","IGDOverLSMqttChannel","LiveChatWidgetMqttChannel","MDCMqttChannel","OculusMqttChannel","RpWebMqttEnabledAppIds","ZenonAppProvider","ZenonMqttChannel","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set(c("RpWebMqttEnabledAppIds").APP_IDS);function a(){if(d("ZenonAppProvider").isInstagramApp())return d("IGDOverLSMqttChannel").getInstance();else if(d("ZenonAppProvider").isOculusCastingSite())return d("OculusMqttChannel").getOculusMqttChannelInstance();else if(d("ZenonAppProvider").isHorizonApp())return d("HorizonWebMqttChannel").getHorizonWebMqttChannelInstance();else if(d("ZenonAppProvider").isMDCApp())return d("MDCMqttChannel").getMDCMqttChannelInstance();else if(d("ZenonAppProvider").isWidgetLiveChatApp()&&c("justknobx")._("2782"))return d("LiveChatWidgetMqttChannel").getLiveChatWidgetMqttChannelInstance();else return h.has(Number(c("CurrentUser").getAppID()))?c("ZenonMqttChannel"):c("FBMqttChannel")}g["default"]=a}),98);
__d("waitForZenonMqttConnected",["Promise","ZenonUserActionLogger","err","getZenonMqttChannel"],(function(a,b,c,d,e,f,g){"use strict";var h,i=15e3;function a(){return new(h||(h=b("Promise")))(function(a,b){var d=c("getZenonMqttChannel")();if(d.getConnectionState()==="Connected")a();else{c("ZenonUserActionLogger").logCheckpoint({checkpoint:"MQTT not connected, deferring sending MWS message"});c("ZenonUserActionLogger").startTimer("MQTT not connected");var e={onMQTTStateChanged:function(b){b==="Connected"&&(c("ZenonUserActionLogger").stopTimer({checkpointName:"MQTT connected after deferring sending MWS message",timerName:"MQTT not connected"}),d.unsubscribeChannelEvents(e),window.clearTimeout(f),a())}},f=window.setTimeout(function(){d.unsubscribeChannelEvents(e),c("ZenonUserActionLogger").stopTimer({checkpointName:"MQTT never connected. Current status: "+d.getConnectionState(),timerName:"MQTT not connected"}),b(c("err")("timeout"))},i);d.subscribeChannelEvents(e)}})}g["default"]=a}),98);
__d("ZenonMqttMWThriftMessageSender",["Promise","RpZenonBinaryThriftSignalingSitevarConfig","ZenonActorHooks","ZenonMWThriftMessageDebugLogger","ZenonMWThriftMessageLogger","ZenonMWThriftMessageMap","ZenonMWThriftMessageReliabilityLogger","ZenonMWThriftMessageSerializer","ZenonMWThriftMessageTranslator","ZenonSignalingConstants","ZenonUserActionLogger","ZenonValidateMWThriftMessage","asyncToGeneratorRuntime","err","filterNulls","getZenonMqttChannel","waitForZenonMqttConnected"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(){var a=c("RpZenonBinaryThriftSignalingSitevarConfig").supported_message_types_mqtt.map(function(a){return d("ZenonMWThriftMessageMap").messageTypeFromString(a)});this.$3=new Set(c("filterNulls")(a))}var e=a.prototype;e.$4=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this,e=!0;yield c("waitForZenonMqttConnected")()["catch"](function(a){c("ZenonUserActionLogger").logCheckpoint({checkpoint:"Not sending MWS Thrift message through MQTT because MQTT could not connect. Error: "+a}),e=!1});if(!e)return;d("ZenonMWThriftMessageReliabilityLogger").logSendingMessage(a);c("ZenonMWThriftMessageDebugLogger").logMWThriftMessage("SENDING","MQTT Thrift",a);this.$2&&d("ZenonMWThriftMessageLogger").logSentMessage(a,this.$2);var f=c("getZenonMqttChannel")();try{yield f.publishBinary(d("ZenonSignalingConstants").T_RTC_MULTI_MQTT_TOPIC,d("ZenonMWThriftMessageSerializer").serializeMWThriftMessage(a)).then(function(){d("ZenonMWThriftMessageReliabilityLogger").logSentMessage(a),b.$2&&b.$2({mwThriftMessage:a,name:"mwThriftMessageSent"})},function(c){b.$5(a,c.toString())})}catch(b){this.$5(a,b.toString())}});function e(b){return a.apply(this,arguments)}return e}();e.$5=function(a,b){b=b!=null?b:"MQTT Thrift Message Send Error";d("ZenonMWThriftMessageReliabilityLogger").logSendMessageFailed(a,"[MQTT Thrift] "+b);c("ZenonMWThriftMessageDebugLogger").logSendMultiwayThriftMessageFailure(b,d("ZenonMWThriftMessageMap").messageTypeToString(a.messageHeader.type))};e.sendMessage=function(a){var e=d("ZenonMWThriftMessageTranslator").toMWThriftMessage(a);if(!e||!c("ZenonValidateMWThriftMessage")(e))return(h||(h=b("Promise"))).reject(c("err")("Invalid MW Thrift message"));if(e.messageHeader.type!=null&&!this.$3.has(e.messageHeader.type))return(h||(h=b("Promise"))).resolve();return a.getHeader().userInfo.userID!==d("ZenonActorHooks").ZenonActor.getAccountID()&&!d("ZenonActorHooks").ZenonActor.isInstagramUser()&&!d("ZenonActorHooks").ZenonActor.isOculusUser()&&!d("ZenonActorHooks").ZenonActor.isKadabraUser()&&!d("ZenonActorHooks").ZenonActor.isLiveChatOnlyPerson()?(h||(h=b("Promise"))).reject(c("err")("MQTT doesn't work with Page users yet")):this.$4(e)};e.setMessageReceiver=function(a){this.$1=a};e.setLoggingEventHandler=function(a){this.$2=a};return a}();g["default"]=a}),98);
__d("ZenonParentClientPerfQPLLogProcessor",["Promise","QuickPerformanceLogger","ZenonClientPerfQPLConstants","ZenonDismissReason","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(){function a(a){var b=a.data;a=a.isE2eeMandated;this.$1=b.localCallID;this.$2=b.serverInfoData;this.$3=b.signalingID;this.$4=a}var e=a.prototype;e.processEvent=function(a){var e=c("qpl")._(41156610,"2039");switch(a.name){case"inviteReceived":this.$2=a.serverInfoData;(i||(i=c("QuickPerformanceLogger"))).markerStartFromNavStart(e,+this.$3);(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(e,{bool:{isE2eeMandated:this.$4},string:{local_call_id:this.$1,server_info_data:this.$2}},{instanceKey:+this.$3});break;case"callEnded":(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(e,{string:{endCallReason:d("ZenonDismissReason").ZenonDismissReason.getName(a.endCallReason),endCallSubreason:a.endCallSubreason}},{instanceKey:+this.$3});(i||(i=c("QuickPerformanceLogger"))).markerEnd(e,4,+this.$3);break;case"popupOpened":(i||(i=c("QuickPerformanceLogger"))).markerPoint(e,d("ZenonClientPerfQPLConstants").POINT_ZENON_POPUP_OPENED,{instanceKey:+this.$3});break}return(h||(h=b("Promise"))).resolve()};return a}();e={LogProcessor:a};g.ZenonParentClientPerfQPLLogProcessor=a;g.ZenonParentClientPerfQPLLogProcessorConfig=e}),98);
__d("ZenonParentLSCallSummaryLogProcessor",["ODS","ZenonDismissReason","ZenonInfraActionsLogger","ZenonLSCallStartEventManager","ZenonLSCallStartEventStore","ZenonLSCallSummary","ZenonLSCallSummaryStore","ZenonLSE2EEStatsManager","ZenonLSE2EEStore","ZenonLSPeerConnectionSummary","ZenonLSPeerConnectionSummaryStore","ZenonLSStarRatingsManager","ZenonLSStarRatingsStore","ZenonPeerID","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){a=a.data;a.peerID=d("ZenonPeerID").ZenonMWPeerID;this.$6=a.protocol;this.$1=new(c("ZenonLSCallSummary"))(a);this.$2=new(c("ZenonLSPeerConnectionSummary"))(a);this.$3=new(c("ZenonLSCallStartEventManager"))(a);this.$4=new(c("ZenonLSE2EEStatsManager"))(a);this.$5=new(c("ZenonLSStarRatingsManager"))(a);c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"NSL - created call summaries in parent window"})}var e=a.prototype;e.processEvent=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){switch(a.name){case"callAccepted":this.$1.onCallAccepted(a.trigger);this.$1.save(d("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance);this.$2.save(d("ZenonLSPeerConnectionSummaryStore").ZenonLSPeerConnectionSummaryStoreInstance);this.$3.save(d("ZenonLSCallStartEventStore").ZenonLSCallStartEventStoreInstance);this.$4.save(d("ZenonLSE2EEStore").ZenonLSE2EEStoreInstance);this.$5.save(d("ZenonLSStarRatingsStore").ZenonLSStarRatingsStoreInstance);break;case"callEnded":yield this.$7(a);break;case"inviteReceived":this.$8(a);break;case"popupOpened":yield this.$9(a);this.$1.save(d("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance);this.$2.save(d("ZenonLSPeerConnectionSummaryStore").ZenonLSPeerConnectionSummaryStoreInstance);this.$3.save(d("ZenonLSCallStartEventStore").ZenonLSCallStartEventStoreInstance);this.$4.save(d("ZenonLSE2EEStore").ZenonLSE2EEStoreInstance);this.$5.save(d("ZenonLSStarRatingsStore").ZenonLSStarRatingsStoreInstance);break}});function c(b){return a.apply(this,arguments)}return c}();e.$8=function(a){a=a.serverInfoData;if(a==null)return;this.$1.setSharedCallId(a);this.$2.setSharedCallId(a);this.$3.setSharedCallId(a);this.$4.setSharedCallId(a)};e.$9=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.$1.onCallEnded(d("ZenonDismissReason").ZenonDismissReason.ClientError,!1,!0,a.isPopupBlocked?"PopupBlocked":"PopupPending"),this.$1.save(d("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance)});function c(b){return a.apply(this,arguments)}return c}();e.$7=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.isRemoteEnded)return;var b=a.endCallReason,c=a.endCallSubreason;a=a.isRemoteEnded;if(b===d("ZenonDismissReason").ZenonDismissReason.OtherInstanceHandled&&a)return;b===d("ZenonDismissReason").ZenonDismissReason.ClientError&&(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_client_crashes","zenon_client_error_end_call_reason");yield this.$1.onCallEnded(b,a,!1,c);this.$1.save(d("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance);this.$2.save(d("ZenonLSPeerConnectionSummaryStore").ZenonLSPeerConnectionSummaryStoreInstance);this.$3.save(d("ZenonLSCallStartEventStore").ZenonLSCallStartEventStoreInstance);this.$4.save(d("ZenonLSE2EEStore").ZenonLSE2EEStoreInstance);this.$5.save(d("ZenonLSStarRatingsStore").ZenonLSStarRatingsStoreInstance)});function c(b){return a.apply(this,arguments)}return c}();return a}();e={LogProcessor:a};g.ZenonParentLSCallSummaryLogProcessor=a;g.ZenonParentLSCallSummaryLogProcessorConfig=e}),98);
__d("ZenonParentQPLLogProcessor",["Promise","QPLUserFlow","ZenonDismissReason","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){var b=a.data;a=a.isE2eeMandated;this.$1=b.localCallID;this.$2=b.serverInfoData;this.$3=b.signalingID;this.$4=a}var e=a.prototype;e.processEvent=function(a){switch(a.name){case"inviteReceived":c("QPLUserFlow").start(c("qpl")._(64225282,"3408"),{annotations:{bool:{isE2eeMandated:this.$4}},instanceKey:+this.$3});c("QPLUserFlow").start(c("qpl")._(398997251,"1544"),{annotations:{bool:{isE2eeMandated:this.$4},string:{localCallID:this.$1,serverInfoData:this.$2}},instanceKey:+this.$3});c("QPLUserFlow").addPoint(c("qpl")._(398997251,"1544"),"invite_received",{instanceKey:+this.$3});break;case"callEnded":c("QPLUserFlow").endCancel(c("qpl")._(398997251,"1544"),{annotations:{string:{endCallReason:d("ZenonDismissReason").ZenonDismissReason.getName(a.endCallReason),endCallSubreason:a.endCallSubreason}},instanceKey:+this.$3});if(a.isRemoteEnded)return(h||(h=b("Promise"))).resolve();c("QPLUserFlow").endCancel(c("qpl")._(64225282,"3408"),{instanceKey:+this.$3});break;case"callAccepted":c("QPLUserFlow").addPoint(c("qpl")._(64225282,"3408"),"call_accepted",{instanceKey:+this.$3});c("QPLUserFlow").addPoint(c("qpl")._(398997251,"1544"),"call_accepted",{instanceKey:+this.$3});break;case"dismissRecv":c("QPLUserFlow").addPoint(c("qpl")._(64225282,"3408"),"dismiss_recv",{instanceKey:+this.$3});c("QPLUserFlow").addPoint(c("qpl")._(398997251,"1544"),"dismiss_recv",{instanceKey:+this.$3});break;case"inviteResponded":c("QPLUserFlow").addPoint(c("qpl")._(64225282,"3408"),"invite_responded",{instanceKey:+this.$3});c("QPLUserFlow").addPoint(c("qpl")._(398997251,"1544"),"invite_responded",{instanceKey:+this.$3});break;case"popupOpened":c("QPLUserFlow").endSuccess(c("qpl")._(64225282,"3408"),{instanceKey:+this.$3});c("QPLUserFlow").addPoint(c("qpl")._(398997251,"1544"),"popup_opened",{instanceKey:+this.$3});break}return(h||(h=b("Promise"))).resolve()};return a}();e={LogProcessor:a};g.ZenonParentQPLLogProcessor=a;g.ZenonParentQPLLogProcessorConfig=e}),98);
__d("ZenonParentSignalingClient",["FBLogger","Promise","ZenonDebugLogger","ZenonSignalingTypes","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b,d,e){var f=this;this.remoteSignalingID=null;this.$4="init";this.$6=null;this.$7=null;this.$8=function(){};this.$9=function(a,b,d){c("ZenonDebugLogger").getInstance().logStateMachine("ParentSignalingClient",f.$4,"received "+a.eventName,f.$1.getSignalingID());switch(a.eventName){case"inviteRequest":f.$11(a,b,d);break;case"remoteSdpRequest":f.$12(a,b);break;case"terminateRequest":f.$13(a,b,d);break}};this.$1=a;this.$3=d;this.$5=e;this.$2=b;b.setReceiver(this.$9);c("ZenonDebugLogger").getInstance().startQPL(c("qpl")._(64234815,"1094"),+a.getSignalingID())}var e=a.prototype;e.setSignalingEventHandlers=function(a){if(this.$6!=null){c("FBLogger")("rtc_www").mustfix("setSignalingEventHandlers should only be called once, to avoid accidentally losing handlers.");return}this.$6=a};e.setLoggingEventHandler=function(a){this.$8=a};e.setSecureDataMessageManager=function(a){throw c("FBLogger")("rtc_www").mustfixThrow("setSecureDataMessageManager called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?")};e.getSignalingModel=function(){return this.$1};e.processReceiveEvent=function(a,b,d){throw c("FBLogger")("rtc_www").mustfixThrow("processReceiveEvent called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?")};e.sendDismiss=function(a){this.$4="terminated";a={eventName:"terminateRequest",fromJoinResponse:!1,reason:a,shouldInformPeer:!0};return this.$10(a)};e.receiveMessage=function(a){this.$2.receiveMessage(a)};e.isTerminated=function(){return this.$4==="terminated"};e.sendAnswerIntent=function(){if(this.$4==="inviteAcknowledged"){this.$4="answered";var a={eventName:"answerIntentRequest"};return this.$10(a)}else throw c("FBLogger")("rtc_www").mustfixThrow("sendAnswerIntent called in unexpected state %s",this.$4)};e.respondToInvite=function(a){if(this.$4==="inviteReceived"){if(this.$7==null)throw c("FBLogger")("rtc_www").mustfixThrow("respondToInvite called without inviteMessageId being populated first");this.$4="inviteAcknowledged";a={ackMessageId:this.$7,eventName:"inviteResponse",status:a};return this.$10(a)}else throw c("FBLogger")("rtc_www").mustfixThrow("respondToInvite called in unexpected state %s",this.$4)};e.initiateClientRenegotiation=function(a){throw c("FBLogger")("rtc_www").mustfixThrow("initiateClientRenegotiation called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?")};e.sendClientEvent=function(a){throw c("FBLogger")("rtc_www").mustfixThrow("sendClientEvent called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?")};e.sendInvite=function(a,b,d){throw c("FBLogger")("rtc_www").mustfixThrow("sendInvite called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?")};e.sendSdp=function(a,b){throw c("FBLogger")("rtc_www").mustfixThrow("sendSdp called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?")};e.sendIceCandidate=function(a){throw c("FBLogger")("rtc_www").mustfixThrow("sendIceCandidate called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?")};e.sendMediaUpdate=function(a){throw c("FBLogger")("rtc_www").mustfixThrow("sendMediaUpdate called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?")};e.sendAddParticipantsMessage=function(a){throw c("FBLogger")("rtc_www").mustfixThrow("sendAddParticipantsMessage called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?")};e.sendRemoveParticipantsRequest=function(a){throw c("FBLogger")("rtc_www").mustfixThrow("sendRemoveParticipantsRequest called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?")};e.sendUsersApprovalRequest=function(a,b){throw c("FBLogger")("rtc_www").mustfixThrow("sendUsersApprovalRequest called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?")};e.sendStateSyncUnsubscribe=function(a){throw c("FBLogger")("rtc_www").mustfixThrow("sendStateSyncUnsubscribe called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?")};e.sendStateSyncUpdate=function(a,b){throw c("FBLogger")("rtc_www").mustfixThrow("sendStateSyncUpdate called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?")};e.sendSubscriptionRequest=function(a){throw c("FBLogger")("rtc_www").mustfixThrow("sendSubscriptionRequest called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?")};e.sendClientInfo=function(a){throw c("FBLogger")("rtc_www").mustfixThrow("sendClientInfo called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?")};e.sendGenericDataMessage=function(a,b,d){throw c("FBLogger")("rtc_www").mustfixThrow("sendGenericDataMessage called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?")};e.silentlyTerminate=function(){throw c("FBLogger")("rtc_www").mustfixThrow("terminate called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?")};e.$10=function(a){var d=this;c("ZenonDebugLogger").getInstance().logStateMachine("ParentSignalingClient",this.$4,"sending "+a.eventName,this.$1.getSignalingID());return new(h||(h=b("Promise")))(function(b,c){return d.$3.sendEvent(a,b,c)})};e.$11=function(a,b,c){this.$4==="init"&&(this.$4="inviteReceived",this.$7=b,this.$5(a,c,this))};e.$13=function(a,b,d){if(this.$4!=="terminated"){this.$4="terminated";d={ackMessageId:b,eventName:"dismissResponse"};this.$3.sendEvent(d);if(this.$6&&this.$6.onDismissReceived){c("promiseDone")(this.$6.onDismissReceived(this.$1.getSignalingID(),a.reason,(b=a.subreason)!=null?b:null,a.detailedReasonFromMW))}}};e.$12=function(a,b){b={ackMessageId:b,acknowledgedVersion:a.sdp.version,eventName:"remoteSdpResponse",negotiateType:a.negotiateType,statusCode:d("ZenonSignalingTypes").ZenonSignalingStatusCode.OK,type:a.sdp.type};this.$3.sendEvent(b)};return a}();g["default"]=a}),98);
__d("ZenonSDKRateLimiter",["TokenBucketRateLimit","ZenonPlatformRateLimitSitevarConfig"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=new Map()}var b=a.prototype;b.take=function(a,b){b===void 0&&(b=1);a=this.$2(a);return a.take(b)};b.$2=function(a){var b,d=this.$1.get(a);if(d)return d;b=(b=c("ZenonPlatformRateLimitSitevarConfig").buckets.get(a))!=null?b:c("ZenonPlatformRateLimitSitevarConfig")["default"];d=new(c("TokenBucketRateLimit"))(b.bucket_size,b.refill_rate);this.$1.set(a,d);return d};return a}();g["default"]=a}),98);
__d("ZenonSignalingTransportTypes",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({CHILD_WINDOW_READY:"rtc_child_window_ready",PARENT_INITIATED_CALL:"rtc_child_window_start_call",PARENT_LOG_IDENTIFIERS:"rtc_parent_log_identifiers",PARENT_PCF_TIMINGS:"rtc_parent_pcf_timings",PARENT_QPL_MARKER:"rtc_parent_qpl_marker",PARENT_TO_CHILD_MESSAGE:"rtc_child_window_message"});f.ChildTransportMessageType=a}),66);
__d("isFacebookishURI",["isFacebookURI","isMessengerDotComURI"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("isFacebookURI")(a)||c("isMessengerDotComURI")(a)}g["default"]=a}),98);
__d("ZenonSignalingParentTransport",["FBLogger","MultiwaySharedTypes","QuickPerformanceLogger","RTWebIncomingRingConfiguration","Random","URI","ZenonBrowsers","ZenonE2eeMandatedStateManager","ZenonIGMediaUtil","ZenonProductConnectFunnel","ZenonSignalingTransportTypes","isFacebookishURI","performanceNow","shouldUseSFUMediaPath"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=45*1e3;a=function(){function a(a){var b=this;this.verificationNonce=null;this.portToChild=null;this.$1=null;this.$2=null;this.localCallID=null;this.$3=new Map();this.$4=new Map();this.$5=window;a!=null&&(this.$5=a);d("RTWebIncomingRingConfiguration").isSupportedClient()&&this.$5.addEventListener&&this.$5.addEventListener("message",function(a){b.handleWindowMessageFromChild(a)},!1)}var b=a.prototype;b.handleWindowMessageFromChild=function(a){var b=this;if(this.windowMessageValid(a)&&a.data.type===d("ZenonSignalingTransportTypes").ChildTransportMessageType.CHILD_WINDOW_READY&&this.hasPort(a)){var c;c=(c=a.data.roomID)!=null?c:null;var e=a.data.serverInfoData;this.portToChild=a.ports[0];a=a.data.childNonce;this.$2=a;this.$5.clearTimeout(this.$1);this.$1=this.$5.setTimeout(function(){b.portToChild=null},k);this.verificationNonce=this.generateNonce();this.startCallInChildWindow(c,e);this.sendQPLToChildWindow();this.sendPCFToChildWindow();this.sendLogIdentifiersToChildWindow(this.localCallID)}};b.generateNonce=function(){return String(d("Random").random())};b.hasPort=function(a){return Boolean(a.ports!=null&&Array.isArray(a.ports)&&a.ports[0]!=null)};b.getRingRequestBySID=function(a){a=l((a=this.$4.get(a))!=null?a:null);return{mwThriftRingRequest:a}};b.startCallInChildWindow=function(a,b){var c=null;if(b!==void 0){if(b!=null){b=this.getRingRequestBySID(b);c=b.mwThriftRingRequest}}else if(a!=null){c=l((b=this.$3.get(a))!=null?b:null)}a={mwThriftRingRequest:c,nonce:this.$2,type:d("ZenonSignalingTransportTypes").ChildTransportMessageType.PARENT_INITIATED_CALL};this.sendMessageToChild(a)};b.sendQPLToChildWindow=function(){var a=new Map();(h||(h=c("QuickPerformanceLogger"))).activeMarkers.forEach(function(b,c){(c===398997251||c===41156610)&&a.set(c,b)});if(a.size>0){var b={markers:a,nonce:this.$2,type:d("ZenonSignalingTransportTypes").ChildTransportMessageType.PARENT_QPL_MARKER,version:2};this.sendMessageToChild(b);a.forEach(function(a){for(a of a){var b=a[0],d=a[1];(h||(h=c("QuickPerformanceLogger"))).markerDrop(d.event,b)}})}};b.sendPCFToChildWindow=function(){var a=Math.trunc((i||(i=c("performanceNow")))()),b=c("ZenonProductConnectFunnel").getPreJoinTimings(),e=b.acceptedTs,f=b.ringingTs;b=b.triggeredTs;e={acceptedTs:e!=null?e-a:null,nonce:this.$2,ringingTs:f!=null?f-a:null,triggeredTs:b!=null?b-a:null,type:d("ZenonSignalingTransportTypes").ChildTransportMessageType.PARENT_PCF_TIMINGS};this.sendMessageToChild(e);c("ZenonProductConnectFunnel").clearPreJoinTimings()};b.sendLogIdentifiersToChildWindow=function(a){a={localCallID:a,nonce:this.$2,type:d("ZenonSignalingTransportTypes").ChildTransportMessageType.PARENT_LOG_IDENTIFIERS};this.sendMessageToChild(a)};b.windowMessageValid=function(a){return Boolean(a.origin===this.$5.location.origin||c("isFacebookishURI")(new(j||(j=c("URI")))(a.origin))&&c("isFacebookishURI")(new(j||(j=c("URI")))(this.$5.location.origin)))&&this.postMessageValid(a)};b.postMessageValid=function(a){var b;return this.verificationNonce!==null&&(a==null||(b=a.data)==null?void 0:b.nonce)===this.verificationNonce};b.sendMessageToChild=function(a){this.portToChild!=null?this.portToChild.postMessage(a):c("FBLogger")("rtc_www").mustfix("The child window port should be available")};b.enqueueRawMWThriftMessage=function(a,b){var c=a.messageBody,d=a.messageHeader;c=c.ringRequest;if(c){c=d.conferenceName;d=d.serverInfoData;c!=null&&this.$3.set(c,{parsedMessage:b,rawMessage:a});d!=null&&this.$4.set(d,{parsedMessage:b,rawMessage:a})}};b.testGetChildNonce=function(){return this.$2};return a}();function l(a){var b;if(a==null)return null;var e=a.parsedMessage;a=a.rawMessage;if(e==null)return null;e=n(e);if((e==null?void 0:e.eventName)!=="inviteRequest")return null;e=(e=(e=a.messageBody.ringRequest)==null?void 0:e.isLegacyCall)!=null?e:!1;b=((b=a.messageBody.ringRequest)==null||(b=b.e2eeEnforcement)==null?void 0:b.mode)===d("MultiwaySharedTypes").E2eeMode.E2EE_MANDATED;c("ZenonE2eeMandatedStateManager").processE2eeMandatedStateFromProductAndRing(b,(b=a.messageBody.ringRequest)==null||(b=b.e2eeEnforcement)==null?void 0:b.infraMandatedExpStatus);return o(e)?a:p(a)}function m(a){return d("ZenonBrowsers").isFirefox()||c("shouldUseSFUMediaPath")(a)||c("ZenonIGMediaUtil").shouldUseSFUOnly()}function n(a){a=a.getEvents().find(function(a){return a.eventName==="inviteRequest"});return a}function o(a){return a||!m(!1)}function p(a){var b;(b=a.messageBody.ringRequest)==null||delete b.offer;return a}g["default"]=a}),98);
__d("ZenonParentCallsManager",["BaseEventEmitter","FBLogger","JSResource","JSResourceForInteraction","LazyLoadInstance","OverlayConfigManagerWithServerLayer","Promise","RTWebIncomingRingConfiguration","ZenonActorHooks","ZenonBrowsers","ZenonCallLogger","ZenonCallsModelTypes","ZenonCollisionContext","ZenonDGWUtils","ZenonDeviceId","ZenonDismissReason","ZenonMessageSenderChain","ZenonMqttMWThriftMessageSender","ZenonParentClientPerfQPLLogProcessor","ZenonParentLSCallSummaryLogProcessor","ZenonParentQPLLogProcessor","ZenonParentSignalingClient","ZenonSDKRateLimiter","ZenonSignalingParentTransport","promiseDone","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(a=c("JSResourceForInteraction"))("setE2eeIsMandatedForZenonLoggers").__setRef("ZenonParentCallsManager"),j=a("ZenonGraphQLMWThriftMessageSender").__setRef("ZenonParentCallsManager"),k=a("ZenonDGWMWThriftMessageSender").__setRef("ZenonParentCallsManager"),l=a("ZenonDGWStreamController").__setRef("ZenonParentCallsManager");e=function(a){function e(e){var f;f=a.call(this)||this;f.$ZenonParentCallsManager$p_4=new Map();f.$ZenonParentCallsManager$p_5=new Set();f.$ZenonParentCallsManager$p_6=null;f.$ZenonParentCallsManager$p_8=[];f.onInviteReceived=function(a,b,e){var g,h=e.getSignalingModel().getSignalingID();e.setSignalingEventHandlers({onDismissReceived:f.onDismissReceived});var i=a.appMessages,j=a.inviterID,k=a.isE2eeMandated,l=a.otherParticipants,m=a.requestingVideo,n=a.roomInfo,o=a.serverInfoData;k===!0&&f.$ZenonParentCallsManager$p_10(h);var p=m&&d("ZenonBrowsers").supportsVideoCalls(),q="multiway_incoming",r=c("uuidv4")(),s=f.$ZenonParentCallsManager$p_11({callTrigger:q,isCaller:!1,isVideo:p,localCallID:r,peerID:j,protocol:b,signalingID:h},k!=null?k:!1);s==null||s.log({name:"inviteReceived",serverInfoData:o});m=d("RTWebIncomingRingConfiguration").isSupportedClient();var t=m?"OK":"NOT_SUPPORTED";c("promiseDone")(e.respondToInvite(t));s==null||s.log({name:"inviteResponded"});t={thread:{id:"0",type:2},type:"thread"};if(n.context!=null&&(((g=n.context)==null?void 0:g.groupThreadID)!=null||((g=n.context)==null?void 0:g.peerID)!=null)){g=(g=a.appMessages)==null?void 0:g.collision_context_payload;var u=null;if(g!=null)try{u=JSON.parse(g).calling_tags}catch(a){}g=k===!0&&u===2;if(n.context!=null){t={thread:(u=d("ZenonCollisionContext").getThreadIDAndTypeFromCollisionContext(n.context,g))!=null?u:{id:"0",type:2},type:"thread"}}}else((g=n.room)==null?void 0:g.linkHash)!=null&&((u=n.room)==null?void 0:u.roomName)!=null&&(t={room:n.room,type:"room"});u=(g=a.actorID)!=null?g:d("ZenonActorHooks").ZenonActor.getID();g={mwThriftRingRequest:null};o!=null&&(g=f.$ZenonParentCallsManager$p_2.getRingRequestBySID(o));i={actorID:a.actorID,context:t,controllerParams:{appMessages:i,callContext:n.name,configuration:b,serverInfoData:(t=(o=n.context)==null?void 0:o.serverInfoData)!=null?t:null,signalingID:h},inviterID:j,isClientPermissableRing:m,isE2eeMandated:k!=null?k:!1,onAccept:function(a,d){d=d.isPopupBlocked;s==null||s.log({name:"callAccepted",trigger:q});c("promiseDone")(e.sendAnswerIntent());f.$ZenonParentCallsManager$p_12(a,{callTrigger:q,isE2eeMandated:k!=null?k:!1,isPopupBlocked:d,isVideo:p,peerID:j,protocol:b,signalingID:h},r)},onDecline:function(a,b){b===void 0&&(b=null),f.onDecline(h,s,a,b)},otherParticipants:l.includes(u)?l:[u].concat(l),receiverUserId:a.userID,requestingVideo:p,ringID:h,ringRequest:g};f.emit("incomingRing",i)};f.onDismissReceived=function(a,c){var e=d("ZenonDismissReason").dismissReasonToCancelReason(c);e={reason:e,ringID:a};f.emit("ringCancel",e);e=f.$ZenonParentCallsManager$p_4.get(a);e!=null&&(e.log({name:"dismissRecv"}),e.log({endCallReason:c,isRemoteEnded:!0,name:"callEnded"}));return(h||(h=b("Promise"))).resolve()};f.$ZenonParentCallsManager$p_7=new(c("OverlayConfigManagerWithServerLayer"))();f.$ZenonParentCallsManager$p_3=e;f.$ZenonParentCallsManager$p_2=new(c("ZenonSignalingParentTransport"))(window);var g=new(c("ZenonMessageSenderChain"))([]);d("ZenonDGWUtils").shouldUseDGW()?(c("promiseDone")(l.load(),function(a){return a.getControllerInstance().setWindowContext("PARENT")}),c("promiseDone")(k.load(),function(a){return g.addMessageSender(new a())})):(g.addMessageSender(new(c("ZenonMqttMWThriftMessageSender"))()),c("promiseDone")(j.load(),function(a){if(e.relayEnvironment){a=new a(e.relayEnvironment);g.addMessageSender(a)}}));f.$ZenonParentCallsManager$p_1=new(c("LazyLoadInstance"))(c("JSResource")("ZenonSignalingClientManager").__setRef("ZenonParentCallsManager"),function(a){return new a(c("ZenonParentSignalingClient"),f.onInviteReceived,g)});f.$ZenonParentCallsManager$p_6=new(c("ZenonSDKRateLimiter"))();return f}babelHelpers.inheritsLoose(e,a);var f=e.prototype;f.startOutgoingCallIntent=function(a,b){if(!this.$ZenonParentCallsManager$p_9("startOutgoingCallIntent"))return;var d=b.callTrigger,e=b.isE2eeMandated,f=b.isVideo,g=b.peerID,h=b.protocol,i=b.signalingID;e&&this.$ZenonParentCallsManager$p_10(i);var j=c("uuidv4")();this.$ZenonParentCallsManager$p_11({callTrigger:d,isCaller:!0,isVideo:f,localCallID:j,peerID:g,protocol:h,signalingID:i},e);this.$ZenonParentCallsManager$p_12(a,b,j)};f.$ZenonParentCallsManager$p_11=function(a,b){var d,e=a.callTrigger,f=a.isCaller,g=a.isVideo,h=a.localCallID,i=a.peerID,j=a.protocol;a=a.signalingID;d=(d=this.$ZenonParentCallsManager$p_4.get(a))!=null?d:null;if(e==="meetup_join")return d;if(d!=null){c("FBLogger")("rtc_www").mustfix("Call logger key collision in parentCallsManager for signalingID: %s, ",a);return d}var k=new(c("ZenonCallLogger"))({config:this.$ZenonParentCallsManager$p_7,initLoggerInfo:{callTrigger:e,isCaller:f,isVideo:g,localCallID:h,peerID:i,protocol:j,signalingID:a},isE2eeMandated:b,processorConfigs:this.getLogProcessors(),startFromNavigation:!0});this.$ZenonParentCallsManager$p_4.set(a,k);this.$ZenonParentCallsManager$p_8.forEach(function(a){a.setLoggingEventHandler(function(a){return k.log(a)})});return k};f.getLogProcessors=function(){var a=[d("ZenonParentLSCallSummaryLogProcessor").ZenonParentLSCallSummaryLogProcessorConfig,d("ZenonParentQPLLogProcessor").ZenonParentQPLLogProcessorConfig,d("ZenonParentClientPerfQPLLogProcessor").ZenonParentClientPerfQPLLogProcessorConfig];return a};f.$ZenonParentCallsManager$p_12=function(a,b,c){var e=b.isPopupBlocked;b=b.signalingID;this.$ZenonParentCallsManager$p_2.localCallID=c;this.$ZenonParentCallsManager$p_2.verificationNonce=a;this.$ZenonParentCallsManager$p_5.add(b);c=this.$ZenonParentCallsManager$p_4.get(b);c!=null&&c.log({isPopupBlocked:e,name:"popupOpened"});d("ZenonDeviceId").setZenonLocalStorageDeviceId(d("ZenonDeviceId").getZenonLocalStorageDeviceIdWithFallback())};f.initListeners=function(a){var b=this;this.$ZenonParentCallsManager$p_8=a;for(a of a)a.subscribe(function(a){return b.onMessageReceived(a)},function(a,c){return b.$ZenonParentCallsManager$p_2.enqueueRawMWThriftMessage(a,c)})};f.onMessageReceived=function(a){var b=a.getHeader().signalingID;if(b!=null&&this.$ZenonParentCallsManager$p_5.has(b))return;this.$ZenonParentCallsManager$p_1.get(function(b){b.receiveMessage(a)})};f.onDecline=function(a,b,e,f){f===void 0&&(f=null),this.$ZenonParentCallsManager$p_1.get(function(g){g=g.getSignalingClient(a);if(g){var h=d("ZenonDismissReason").endCallToDismissReason(e);e!=="VersionUnsupported"&&f!==d("ZenonCallsModelTypes").ZenonEndCallSubreason.CallsBlocked&&c("promiseDone")(g.sendDismiss(h));b==null||b.log({endCallReason:h,endCallSubreason:f==null?null:f,isRemoteEnded:!1,name:"callEnded"})}else c("FBLogger")("rtc_www").mustfix("signaling client should be defined")})};f.removeListeners=function(a){for(a of a)a.unsubscribe()};f.$ZenonParentCallsManager$p_9=function(a){if(this.$ZenonParentCallsManager$p_6&&!this.$ZenonParentCallsManager$p_6.take(a)){c("FBLogger")("rtc_www").warn("[ZP] Dropping %s invocation. This SDK method is being called too rapidly.",a);return!1}return!0};f.$ZenonParentCallsManager$p_10=function(a){c("promiseDone")(i.load(),function(b){return b(a)})};return e}(c("BaseEventEmitter"));g["default"]=e}),98);
__d("delegateZenonCallInviteModel",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a.getCurrentInvite=b.getCurrentInvite.bind(b),a.startListening=b.startListening.bind(b),a.stopListening=b.stopListening.bind(b),a.dismiss=b.dismiss.bind(b),a.accept=b.accept.bind(b),a.decline=b.decline.bind(b),b.addListener("callInvite",function(b){a.emit("callInvite",b)})}f["default"]=a}),66);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/yKsQCAUqcFZ/
 */
__d("dexie-4.0.1",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){(function(b,c){typeof g==="object"&&typeof h!=="undefined"?h.exports=c():(b=typeof globalThis!=="undefined"?globalThis:b||self,b.Dexie=c())})(this,function(){var b=function(a,c){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return b(a,c)};function c(a,c){if(typeof c!=="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");b(a,c);function d(){this.constructor=a}a.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d())}var d=function(){d=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return d.apply(this,arguments)};function e(a,b,c){if(c||arguments.length===2)for(var d=0,e=b.length,f;d<e;d++)(f||!(d in b))&&(f||(f=Array.prototype.slice.call(b,0,d)),f[d]=b[d]);return a.concat(f||Array.prototype.slice.call(b))}var f=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:typeof window!=="undefined"?window:a,g=Object.keys,h=Array.isArray;typeof Promise!=="undefined"&&!f.Promise&&(f.Promise=Promise);function i(a,b){if(typeof b!=="object")return a;g(b).forEach(function(c){a[c]=b[c]});return a}var j=Object.getPrototypeOf,k={}.hasOwnProperty;function l(a,b){return k.call(a,b)}function m(a,b){typeof b==="function"&&(b=b(j(a))),(typeof Reflect==="undefined"?g:Reflect.ownKeys)(b).forEach(function(c){o(a,c,b[c])})}var n=Object.defineProperty;function o(a,b,c,d){n(a,b,i(c&&l(c,"get")&&typeof c.get==="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},d))}function p(a){return{from:function(b){a.prototype=Object.create(b.prototype);o(a.prototype,"constructor",a);return{extend:m.bind(null,a.prototype)}}}}var q=Object.getOwnPropertyDescriptor;function r(a,b){var c=q(a,b);return c||(c=j(a))&&r(c,b)}var s=[].slice;function t(a,b,c){return s.call(a,b,c)}function u(a,b){return b(a)}function v(a){if(!a)throw new Error("Assertion Failed")}function aa(a){f.setImmediate?setImmediate(a):setTimeout(a,0)}function ba(a,b){return a.reduce(function(a,c,d){c=b(c,d);c&&(a[c[0]]=c[1]);return a},{})}function w(a,b){if(typeof b==="string"&&l(a,b))return a[b];if(!b)return a;if(typeof b!=="string"){var c=[];for(var d=0,e=b.length;d<e;++d){var f=w(a,b[d]);c.push(f)}return c}f=b.indexOf(".");if(f!==-1){d=a[b.substr(0,f)];return d==null?void 0:w(d,b.substr(f+1))}return void 0}function x(a,b,c){if(!a||b===void 0)return;if("isFrozen"in Object&&Object.isFrozen(a))return;if(typeof b!=="string"&&"length"in b){v(typeof c!=="string"&&"length"in c);for(var d=0,e=b.length;d<e;++d)x(a,b[d],c[d])}else{d=b.indexOf(".");if(d!==-1){e=b.substr(0,d);d=b.substr(d+1);if(d==="")c===void 0?h(a)&&!isNaN(parseInt(e))?a.splice(e,1):delete a[e]:a[e]=c;else{var f=a[e];(!f||!l(a,e))&&(f=a[e]={});x(f,d,c)}}else c===void 0?h(a)&&!isNaN(parseInt(b))?a.splice(b,1):delete a[b]:a[b]=c}}function ca(a,b){typeof b==="string"?x(a,b,void 0):"length"in b&&[].map.call(b,function(b){x(a,b,void 0)})}function da(a){var b={};for(var c in a)l(a,c)&&(b[c]=a[c]);return b}var ea=[].concat;function fa(a){return ea.apply([],a)}var y="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(fa([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(b){return b+a+"Array"})}))).filter(function(a){return f[a]}),ga=new Set(y.map(function(a){return f[a]}));function ha(a){var b={};for(var c in a)if(l(a,c)){var d=a[c];b[c]=!d||typeof d!=="object"||ga.has(d.constructor)?d:ha(d)}return b}function ia(a){for(var b in a)if(l(a,b))return!1;return!0}var ja=null;function z(a){ja=new WeakMap();a=ka(a);ja=null;return a}function ka(a){if(!a||typeof a!=="object")return a;var b=ja.get(a);if(b)return b;if(h(a)){b=[];ja.set(a,b);for(var c=0,d=a.length;c<d;++c)b.push(ka(a[c]))}else if(ga.has(a.constructor))b=a;else{c=j(a);b=c===Object.prototype?{}:Object.create(c);ja.set(a,b);for(d in a)l(a,d)&&(b[d]=ka(a[d]))}return b}var la={}.toString;function ma(a){return la.call(a).slice(8,-1)}var na=typeof Symbol!=="undefined"?Symbol.iterator:"@@iterator",oa=typeof na==="symbol"?function(a){var b;return a!=null&&(b=a[na])&&b.apply(a)}:function(){return null};function A(a,b){b=a.indexOf(b);b>=0&&a.splice(b,1);return b>=0}var pa={};function B(a){var b,c,d,e;if(arguments.length===1){if(h(a))return a.slice();if(this===pa&&typeof a==="string")return[a];if(e=oa(a)){c=[];while(d=e.next(),!d.done)c.push(d.value);return c}if(a==null)return[a];b=a.length;if(typeof b==="number"){c=new Array(b);while(b--)c[b]=a[b];return c}return[a]}b=arguments.length;c=new Array(b);while(b--)c[b]=arguments[b];return c}var qa=typeof Symbol!=="undefined"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1};y=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"];var C=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"];y=y.concat(C);var ra={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function sa(a,b){this.name=a,this.message=b}p(sa).from(Error).extend({toString:function(){return this.name+": "+this.message}});function ta(a,b){return a+". Errors: "+Object.keys(b).map(function(a){return b[a].toString()}).filter(function(a,b,c){return c.indexOf(a)===b}).join("\n")}function ua(a,b,c,d){this.failures=b,this.failedKeys=d,this.successCount=c,this.message=ta(a,b)}p(ua).from(sa);function va(a,b){this.name="BulkError",this.failures=Object.keys(b).map(function(a){return b[a]}),this.failuresByPos=b,this.message=ta(a,this.failures)}p(va).from(sa);var wa=y.reduce(function(a,b){return a[b]=b+"Error",a},{}),xa=sa,D=y.reduce(function(b,c){var d=c+"Error";function a(a,b){this.name=d,!a?(this.message=ra[c]||d,this.inner=null):typeof a==="string"?(this.message="".concat(a).concat(b?"\n "+b:""),this.inner=b||null):typeof a==="object"&&(this.message="".concat(a.name," ").concat(a.message),this.inner=a)}p(a).from(xa);b[c]=a;return b},{});D.Syntax=SyntaxError;D.Type=TypeError;D.Range=RangeError;var ya=C.reduce(function(a,b){a[b+"Error"]=D[b];return a},{});function za(a,b){if(!a||a instanceof sa||a instanceof TypeError||a instanceof SyntaxError||!a.name||!ya[a.name])return a;b=new ya[a.name](b||a.message,a);"stack"in a&&o(b,"stack",{get:function(){return this.inner.stack}});return b}C=y.reduce(function(a,b){["Syntax","Type","Range"].indexOf(b)===-1&&(a[b+"Error"]=D[b]);return a},{});C.ModifyError=ua;C.DexieError=sa;C.BulkError=va;function E(){}function Aa(a){return a}function Ba(a,b){return a==null||a===Aa?b:function(c){return b(a(c))}}function F(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}function Ca(a,b){return a===E?b:function(){var c=a.apply(this,arguments);c!==void 0&&(arguments[0]=c);var d=this.onsuccess,e=this.onerror;this.onsuccess=null;this.onerror=null;var f=b.apply(this,arguments);d&&(this.onsuccess=this.onsuccess?F(d,this.onsuccess):d);e&&(this.onerror=this.onerror?F(e,this.onerror):e);return f!==void 0?f:c}}function Da(a,b){return a===E?b:function(){a.apply(this,arguments);var c=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null;b.apply(this,arguments);c&&(this.onsuccess=this.onsuccess?F(c,this.onsuccess):c);d&&(this.onerror=this.onerror?F(d,this.onerror):d)}}function Ea(a,b){return a===E?b:function(c){var d=a.apply(this,arguments);i(c,d);var e=this.onsuccess,f=this.onerror;this.onsuccess=null;this.onerror=null;var g=b.apply(this,arguments);e&&(this.onsuccess=this.onsuccess?F(e,this.onsuccess):e);f&&(this.onerror=this.onerror?F(f,this.onerror):f);return d===void 0?g===void 0?void 0:g:i(d,g)}}function Fa(a,b){return a===E?b:function(){return b.apply(this,arguments)===!1?!1:a.apply(this,arguments)}}function Ga(a,b){return a===E?b:function(){var c=a.apply(this,arguments);if(c&&typeof c.then==="function"){var d=this,e=arguments.length,f=new Array(e);while(e--)f[e]=arguments[e];return c.then(function(){return b.apply(d,f)})}return b.apply(this,arguments)}}var G=typeof location!=="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ha(a,b){G=a}var Ia={},Ja=100;y=typeof Promise==="undefined"?[]:function(){var a=Promise.resolve();if(typeof crypto==="undefined"||!crypto.subtle)return[a,j(a),a];var b=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[b,j(b),a]}();var Ka=y[0],H=y[1];y=y[2];H=H&&H.then;var La=Ka&&Ka.constructor,Ma=!!y;function Na(){queueMicrotask(db)}var Oa=function(a,b){Ua.push([a,b]),Qa&&(Na(),Qa=!1)},Pa=!0,Qa=!0,Ra=[],Sa=[],Ta=Aa,I={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:E,pgp:!1,env:{},finalize:E},J=I,Ua=[],Va=0,Wa=[];function K(a){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");this._listeners=[];this._lib=!1;var b=this._PSD=J;if(typeof a!=="function"){if(a!==Ia)throw new TypeError("Not a function");this._state=arguments[1];this._value=arguments[2];this._state===!1&&$a(this,this._value);return}this._state=null;this._value=null;++b.ref;Za(this,a)}var Xa={get:function(){var a=J,b=ob;function c(c,d){var e=this,f=!a.global&&(a!==J||b!==ob),g=f&&!O(),h=new K(function(b,h){bb(e,new Ya(wb(c,a,f,g),wb(d,a,f,g),b,h,a))});this._consoleTask&&(h._consoleTask=this._consoleTask);return h}c.prototype=Ia;return c},set:function(a){o(this,"then",a&&a.prototype===Ia?Xa:{get:function(){return a},set:Xa.set})}};m(K.prototype,{then:Xa,_then:function(a,b){bb(this,new Ya(null,null,a,b,J))},"catch":function(b){if(arguments.length===1)return this.then(null,b);var a=arguments[0],c=arguments[1];return typeof a==="function"?this.then(null,function(b){return b instanceof a?c(b):kb(b)}):this.then(null,function(b){return b&&b.name===a?c(b):kb(b)})},"finally":function(a){return this.then(function(b){return K.resolve(a()).then(function(){return b})},function(b){return K.resolve(a()).then(function(){return kb(b)})})},timeout:function(a,b){var c=this;return a<Infinity?new K(function(d,e){var f=setTimeout(function(){return e(new D.Timeout(b))},a);c.then(d,e)["finally"](clearTimeout.bind(null,f))}):this}});typeof Symbol!=="undefined"&&Symbol.toStringTag&&o(K.prototype,Symbol.toStringTag,"Dexie.Promise");I.env=ub();function Ya(a,b,c,d,e){this.onFulfilled=typeof a==="function"?a:null,this.onRejected=typeof b==="function"?b:null,this.resolve=c,this.reject=d,this.psd=e}m(K,{all:function(){var a=B.apply(null,arguments).map(rb);return new K(function(b,c){a.length===0&&b([]);var d=a.length;a.forEach(function(e,f){return K.resolve(e).then(function(c){a[f]=c,--d||b(a)},c)})})},resolve:function(a){if(a instanceof K)return a;if(a&&typeof a.then==="function")return new K(function(b,c){a.then(b,c)});var b=new K(Ia,!0,a);return b},reject:kb,race:function(){var a=B.apply(null,arguments).map(rb);return new K(function(b,c){a.map(function(a){return K.resolve(a).then(b,c)})})},PSD:{get:function(){return J},set:function(a){return J=a}},totalEchoes:{get:function(){return ob}},newPSD:N,usePSD:vb,scheduler:{get:function(){return Oa},set:function(a){Oa=a}},rejectionMapper:{get:function(){return Ta},set:function(a){Ta=a}},follow:function(a,b){return new K(function(c,d){return N(function(b,c){var d=J;d.unhandleds=[];d.onunhandled=c;d.finalize=F(function(){var a=this;hb(function(){a.unhandleds.length===0?b():c(a.unhandleds[0])})},d.finalize);a()},b,c,d)})}});La&&(La.allSettled&&o(K,"allSettled",function(){var a=B.apply(null,arguments).map(rb);return new K(function(b){a.length===0&&b([]);var c=a.length,d=new Array(c);a.forEach(function(a,e){return K.resolve(a).then(function(a){return d[e]={status:"fulfilled",value:a}},function(a){return d[e]={status:"rejected",reason:a}}).then(function(){return--c||b(d)})})})}),La.any&&typeof AggregateError!=="undefined"&&o(K,"any",function(){var a=B.apply(null,arguments).map(rb);return new K(function(b,c){a.length===0&&c(new AggregateError([]));var d=a.length,e=new Array(d);a.forEach(function(a,f){return K.resolve(a).then(function(a){return b(a)},function(a){e[f]=a,--d||c(new AggregateError(e))})})})}));function Za(a,b){try{b(function(b){if(a._state!==null)return;if(b===a)throw new TypeError("A promise cannot be resolved with itself.");var c=a._lib&&eb();b&&typeof b.then==="function"?Za(a,function(a,c){b instanceof K?b._then(a,c):b.then(a,c)}):(a._state=!0,a._value=b,ab(a));c&&fb()},$a.bind(null,a))}catch(b){$a(a,b)}}function $a(a,b){Sa.push(b);if(a._state!==null)return;var c=a._lib&&eb();b=Ta(b);a._state=!1;a._value=b;ib(a);ab(a);c&&fb()}function ab(a){var b=a._listeners;a._listeners=[];for(var c=0,d=b.length;c<d;++c)bb(a,b[c]);c=a._PSD;--c.ref||c.finalize();Va===0&&(++Va,Oa(function(){--Va===0&&gb()},[]))}function bb(a,b){if(a._state===null){a._listeners.push(b);return}var c=a._state?b.onFulfilled:b.onRejected;if(c===null)return(a._state?b.resolve:b.reject)(a._value);++b.psd.ref;++Va;Oa(cb,[c,a,b])}function cb(a,b,c){try{var d,e=b._value;!b._state&&Sa.length&&(Sa=[]);d=G&&b._consoleTask?b._consoleTask.run(function(){return a(e)}):a(e);!b._state&&Sa.indexOf(e)===-1&&jb(b);c.resolve(d)}catch(a){c.reject(a)}finally{--Va===0&&gb(),--c.psd.ref||c.psd.finalize()}}function db(){vb(I,function(){eb()&&fb()})}function eb(){var a=Pa;Pa=!1;Qa=!1;return a}function fb(){var a,b,c;do while(Ua.length>0){a=Ua;Ua=[];c=a.length;for(b=0;b<c;++b){var d=a[b];d[0].apply(null,d[1])}}while(Ua.length>0);Pa=!0;Qa=!0}function gb(){var a=Ra;Ra=[];a.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});a=Wa.slice(0);var b=a.length;while(b)a[--b]()}function hb(a){function b(){a(),Wa.splice(Wa.indexOf(b),1)}Wa.push(b);++Va;Oa(function(){--Va===0&&gb()},[])}function ib(a){Ra.some(function(b){return b._value===a._value})||Ra.push(a)}function jb(a){var b=Ra.length;while(b)if(Ra[--b]._value===a._value){Ra.splice(b,1);return}}function kb(a){return new K(Ia,!1,a)}function L(a,b){var c=J;return function(){var d=eb(),e=J;try{P(c,!0);return a.apply(this,arguments)}catch(a){b&&b(a)}finally{P(e,!1),d&&fb()}}}var M={awaits:0,echoes:0,id:0},lb=0,mb=[],nb=0,ob=0,pb=0;function N(b,a,c,d){var e=J,f=Object.create(e);f.parent=e;f.ref=0;f.global=!1;f.id=++pb;I.env;f.env=Ma?{Promise:K,PromiseProp:{value:K,configurable:!0,writable:!0},all:K.all,race:K.race,allSettled:K.allSettled,any:K.any,resolve:K.resolve,reject:K.reject}:{};a&&i(f,a);++e.ref;f.finalize=function(){--this.parent.ref||this.parent.finalize()};a=vb(f,b,c,d);f.ref===0&&f.finalize();return a}function qb(){M.id||(M.id=++lb);++M.awaits;M.echoes+=Ja;return M.id}function O(){if(!M.awaits)return!1;--M.awaits===0&&(M.id=0);M.echoes=M.awaits*Ja;return!0}(""+H).indexOf("[native code]")===-1&&(qb=O=E);function rb(a){if(M.echoes&&a&&a.constructor===La){qb();return a.then(function(a){O();return a},function(a){O();return Q(a)})}return a}function sb(a){++ob,(!M.echoes||--M.echoes===0)&&(M.echoes=M.awaits=M.id=0),mb.push(J),P(a,!0)}function tb(){var a=mb[mb.length-1];mb.pop();P(a,!1)}function P(a,b){var c=J;(b?M.echoes&&(!nb++||a!==J):nb&&(!--nb||a!==J))&&queueMicrotask(b?sb.bind(null,a):tb);if(a===J)return;J=a;c===I&&(I.env=ub());if(Ma){b=I.env.Promise;var d=a.env;(c.global||a.global)&&(Object.defineProperty(f,"Promise",d.PromiseProp),b.all=d.all,b.race=d.race,b.resolve=d.resolve,b.reject=d.reject,d.allSettled&&(b.allSettled=d.allSettled),d.any&&(b.any=d.any))}}function ub(){var a=f.Promise;return Ma?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function vb(a,b,c,d,e){var f=J;try{P(a,!0);return b(c,d,e)}finally{P(f,!1)}}function wb(a,b,c,d){return typeof a!=="function"?a:function(){var e=J;c&&qb();P(b,!0);try{return a.apply(this,arguments)}finally{P(e,!1),d&&queueMicrotask(O)}}}function xb(a){Promise===La&&M.echoes===0?nb===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}var Q=K.reject;function yb(a,b,c,d){if(!a.idbdb||!a._state.openComplete&&!J.letThrough&&!a._vip){if(a._state.openComplete)return Q(new D.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen)return Q(new D.DatabaseClosed());a.open()["catch"](E)}return a._state.dbReadyPromise.then(function(){return yb(a,b,c,d)})}else{var e=a._createTransaction(b,c,a._dbSchema);try{e.create(),a._state.PR1398_maxLoop=3}catch(e){if(e.name===wa.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a.close({disableAutoOpen:!1});return a.open().then(function(){return yb(a,b,c,d)})}return Q(e)}return e._promise(b,function(a,b){return N(function(){J.trans=e;return d(a,b,e)})}).then(function(a){if(b==="readwrite")try{e.idbtrans.commit()}catch(a){}return b==="readonly"?a:e._completion.then(function(){return a})})}}Ka="4.0.1";var zb=String.fromCharCode(65535),Ab=-Infinity,R="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Bb="String expected.",Cb=[],Db="__dbnames",Eb="readonly",Fb="readwrite";function Gb(a,b){return a?b?function(){return a.apply(this,arguments)&&b.apply(this,arguments)}:a:b}var Hb={type:3,lower:-Infinity,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ib(a){return typeof a==="string"&&!/\./.test(a)?function(b){b[a]===void 0&&a in b&&(b=z(b),delete b[a]);return b}:function(a){return a}}function Jb(){throw D.Type()}function S(a,b){try{var c=Mb(a),d=Mb(b);if(c!==d){if(c==="Array")return 1;if(d==="Array")return-1;if(c==="binary")return 1;if(d==="binary")return-1;if(c==="string")return 1;if(d==="string")return-1;if(c==="Date")return 1;return d!=="Date"?NaN:-1}switch(c){case"number":case"Date":case"string":return a>b?1:a<b?-1:0;case"binary":return Lb(Nb(a),Nb(b));case"Array":return Kb(a,b)}}catch(a){}return NaN}function Kb(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f){var g=S(a[f],b[f]);if(g!==0)return g}return c===d?0:c<d?-1:1}function Lb(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f)if(a[f]!==b[f])return a[f]<b[f]?-1:1;return c===d?0:c<d?-1:1}function Mb(a){var b=typeof a;if(b!=="object")return b;if(ArrayBuffer.isView(a))return"binary";b=ma(a);return b==="ArrayBuffer"?"binary":b}function Nb(a){if(a instanceof Uint8Array)return a;return ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var Ob=function(){function a(){}a.prototype._trans=function(b,c,d){var e=this._tx||J.trans,f=this.name,a=G&&typeof console!=="undefined"&&console.createTask&&console.createTask("Dexie: ".concat(b==="readonly"?"read":"write"," ").concat(this.name));function g(b,d,a){if(!a.schema[f])throw new D.NotFound("Table "+f+" not part of transaction");return c(a.idbtrans,a)}var h=eb();try{var i=e&&e.db._novip===this.db._novip?e===J.trans?e._promise(b,g,d):N(function(){return e._promise(b,g,d)},{trans:e,transless:J.transless||J}):yb(this.db,b,[this.name],g);a&&(i._consoleTask=a,i=i["catch"](function(a){console.trace(a);return Q(a)}));return i}finally{h&&fb()}};a.prototype.get=function(a,b){var c=this;if(a&&a.constructor===Object)return this.where(a).first(b);return a==null?Q(new D.Type("Invalid argument to Table.get()")):this._trans("readonly",function(b){return c.core.get({trans:b,key:a}).then(function(a){return c.hook.reading.fire(a)})}).then(b)};a.prototype.where=function(a){if(typeof a==="string")return new this.db.WhereClause(this,a);if(h(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var b=g(a);if(b.length===1)return this.where(b[0]).equals(a[b[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(a){if(a.compound&&b.every(function(b){return a.keyPath.indexOf(b)>=0})){for(var c=0;c<b.length;++c)if(b.indexOf(a.keyPath[c])===-1)return!1;return!0}return!1}).sort(function(a,b){return a.keyPath.length-b.keyPath.length})[0];if(c&&this.db._maxKey!==zb){var d=c.keyPath.slice(0,b.length);return this.where(d).equals(d.map(function(b){return a[b]}))}!c&&G&&!1;var e=this.schema.idxByName,f=this.db._deps.indexedDB;function i(a,b){return f.cmp(a,b)===0}d=b.reduce(function(b,c){var d=b[0];b=b[1];var f=e[c],g=a[c];return[d||f,d||!f?Gb(b,f&&f.multi?function(a){a=w(a,c);return h(a)&&a.some(function(a){return i(g,a)})}:function(a){return i(g,w(a,c))}):b]},[null,null]);var j=d[0];d=d[1];return j?this.where(j.name).equals(a[j.keyPath]).filter(d):c?this.filter(d):this.where(b).equals("")};a.prototype.filter=function(a){return this.toCollection().and(a)};a.prototype.count=function(a){return this.toCollection().count(a)};a.prototype.offset=function(a){return this.toCollection().offset(a)};a.prototype.limit=function(a){return this.toCollection().limit(a)};a.prototype.each=function(a){return this.toCollection().each(a)};a.prototype.toArray=function(a){return this.toCollection().toArray(a)};a.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))};a.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,h(a)?"[".concat(a.join("+"),"]"):a))};a.prototype.reverse=function(){return this.toCollection().reverse()};a.prototype.mapToClass=function(a){var b=this,d=b.db,e=b.name;this.schema.mappedClass=a;a.prototype instanceof Jb&&(a=function(a){c(b,a);function b(){return a!==null&&a.apply(this,arguments)||this}Object.defineProperty(b.prototype,"db",{get:function(){return d},enumerable:!1,configurable:!0});b.prototype.table=function(){return e};return b}(a));var f=new Set();for(b=a.prototype;b;b=j(b))Object.getOwnPropertyNames(b).forEach(function(a){return f.add(a)});b=function(b){if(!b)return b;var c=Object.create(a.prototype);for(var d in b)if(!f.has(d))try{c[d]=b[d]}catch(a){}return c};this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook);this.schema.readHook=b;this.hook("reading",b);return a};a.prototype.defineClass=function(){function a(a){i(this,a)}return this.mapToClass(a)};a.prototype.add=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Ib(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"add",keys:b!=null?[b]:null,values:[g]})}).then(function(a){return a.numFailures?K.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype.update=function(a,b){if(typeof a==="object"&&!h(a)){var c=w(a,this.schema.primKey.keyPath);return c===void 0?Q(new D.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(c).modify(b)}else return this.where(":id").equals(a).modify(b)};a.prototype.put=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Ib(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"put",values:[g],keys:b!=null?[b]:null})}).then(function(a){return a.numFailures?K.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype["delete"]=function(a){var b=this;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:[a]})}).then(function(a){return a.numFailures?K.reject(a.failures[0]):void 0})};a.prototype.clear=function(){var a=this;return this._trans("readwrite",function(b){return a.core.mutate({trans:b,type:"deleteRange",range:Hb})}).then(function(a){return a.numFailures?K.reject(a.failures[0]):void 0})};a.prototype.bulkGet=function(a){var b=this;return this._trans("readonly",function(c){return b.core.getMany({keys:a,trans:c}).then(function(a){return a.map(function(a){return b.hook.reading.fire(a)})})})};a.prototype.bulkAdd=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new D.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Ib(d)):b;return e.core.mutate({trans:c,type:"add",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new va("".concat(e.name,".bulkAdd(): ").concat(b," of ").concat(h," operations failed"),a)})})};a.prototype.bulkPut=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new D.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Ib(d)):b;return e.core.mutate({trans:c,type:"put",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new va("".concat(e.name,".bulkPut(): ").concat(b," of ").concat(h," operations failed"),a)})})};a.prototype.bulkUpdate=function(b){var c=this,d=this.core,a=b.map(function(a){return a.key}),e=b.map(function(a){return a.changes}),f=[];return this._trans("readwrite",function(g){return d.getMany({trans:g,keys:a,cache:"clone"}).then(function(h){var i=[],j=[];b.forEach(function(a,b){var d=a.key;a=a.changes;var e=h[b];if(e){for(var g=0,k=Object.keys(a);g<k.length;g++){var l=k[g],m=a[l];if(l===c.schema.primKey.keyPath){if(S(m,d)!==0)throw new D.Constraint("Cannot update primary key in bulkUpdate()")}else x(e,l,m)}f.push(b);i.push(d);j.push(e)}});var k=i.length;return d.mutate({trans:g,type:"put",keys:i,values:j,updates:{keys:a,changeSpecs:e}}).then(function(a){var b=a.numFailures;a=a.failures;if(b===0)return k;for(var d=0,e=Object.keys(a);d<e.length;d++){var g=e[d],h=f[Number(g)];if(h!=null){var i=a[g];delete a[g];a[h]=i}}throw new va("".concat(c.name,".bulkUpdate(): ").concat(b," of ").concat(k," operations failed"),a)})})})};a.prototype.bulkDelete=function(a){var b=this,c=a.length;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:a})}).then(function(a){var d=a.numFailures,e=a.lastResult;a=a.failures;if(d===0)return e;throw new va("".concat(b.name,".bulkDelete(): ").concat(d," of ").concat(c," operations failed"),a)})};return a}();function Pb(a){var b={},c=function(d,e){if(e){var c=arguments.length,f=new Array(c-1);while(--c)f[c-1]=arguments[c];b[d].subscribe.apply(null,f);return a}else if(typeof d==="string")return b[d]};c.addEventType=f;for(var d=1,e=arguments.length;d<e;++d)f(arguments[d]);return c;function f(a,d,e){if(typeof a==="object")return i(a);d||(d=Fa);e||(e=E);var f={subscribers:[],fire:e,subscribe:function(a){f.subscribers.indexOf(a)===-1&&(f.subscribers.push(a),f.fire=d(f.fire,a))},unsubscribe:function(a){f.subscribers=f.subscribers.filter(function(b){return b!==a}),f.fire=f.subscribers.reduce(d,e)}};b[a]=c[a]=f;return f}function i(a){g(a).forEach(function(b){var c=a[b];if(h(c))f(b,a[b][0],a[b][1]);else if(c==="asap")var d=f(b,Aa,function(){var a=arguments.length,b=new Array(a);while(a--)b[a]=arguments[a];d.subscribers.forEach(function(a){aa(function(){a.apply(null,b)})})});else throw new D.InvalidArgument("Invalid event config")})}}function Qb(a,b){p(b).from({prototype:a});return b}function Rb(a){return Qb(Ob.prototype,function(b,c,d){this.db=a,this._tx=d,this.name=b,this.schema=c,this.hook=a._allTables[b]?a._allTables[b].hook:Pb(null,{creating:[Ca,E],reading:[Ba,Aa],updating:[Ea,E],deleting:[Da,E]})})}function Sb(a,b){return!(a.filter||a.algorithm||a.or)&&(b?a.justLimit:!a.replayFilter)}function Tb(a,b){a.filter=Gb(a.filter,b)}function Ub(a,b,c){var d=a.replayFilter;a.replayFilter=d?function(){return Gb(d(),b())}:b;a.justLimit=c&&!d}function Vb(a,b){a.isMatch=Gb(a.isMatch,b)}function Wb(a,b){if(a.isPrimKey)return b.primaryKey;var c=b.getIndexByKeyPath(a.index);if(!c)throw new D.Schema("KeyPath "+a.index+" on object store "+b.name+" is not indexed");return c}function Xb(a,b,c){var d=Wb(a,b.schema);return b.openCursor({trans:c,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:d,range:a.range}})}function Yb(a,b,c,d){var e=a.replayFilter?Gb(a.filter,a.replayFilter()):a.filter;if(!a.or)return Zb(Xb(a,d,c),Gb(a.algorithm,e),b,!a.keysOnly&&a.valueMapper);else{var f={},g=function(a,c,d){if(!e||e(c,d,function(a){return c.stop(a)},function(a){return c.fail(a)})){var g=c.primaryKey,h=""+g;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(g));l(f,h)||(f[h]=!0,b(a,c,d))}};return Promise.all([a.or._iterate(g,c),Zb(Xb(a,d,c),a.algorithm,g,!a.keysOnly&&a.valueMapper)])}}function Zb(a,b,c,d){var e=d?function(a,b,e){return c(d(a),b,e)}:c,f=L(e);return a.then(function(a){if(a)return a.start(function(){var c=function(){return a["continue"]()};(!b||b(a,function(a){return c=a},function(b){a.stop(b),c=E},function(b){a.fail(b),c=E}))&&f(a.value,a,function(a){return c=a});c()})})}y=Symbol();var $b=function(){function a(a){Object.assign(this,a)}a.prototype.execute=function(a){var b;b=(b=this.replacePrefix)===null||b===void 0?void 0:b[0];return b&&typeof a==="string"&&a.startsWith(b)?this.replacePrefix[1]+a.substring(b.length):a};return a}(),ac=function(){function a(){}a.prototype._read=function(a,b){var c=this._ctx;return c.error?c.table._trans(null,Q.bind(null,c.error)):c.table._trans("readonly",a).then(b)};a.prototype._write=function(a){var b=this._ctx;return b.error?b.table._trans(null,Q.bind(null,b.error)):b.table._trans("readwrite",a,"locked")};a.prototype._addAlgorithm=function(a){var b=this._ctx;b.algorithm=Gb(b.algorithm,a)};a.prototype._iterate=function(a,b){return Yb(this._ctx,a,b,this._ctx.table.core)};a.prototype.clone=function(a){var b=Object.create(this.constructor.prototype),c=Object.create(this._ctx);a&&i(c,a);b._ctx=c;return b};a.prototype.raw=function(){this._ctx.valueMapper=null;return this};a.prototype.each=function(a){var b=this._ctx;return this._read(function(c){return Yb(b,a,c,b.table.core)})};a.prototype.count=function(a){var b=this;return this._read(function(a){var c=b._ctx,d=c.table.core;if(Sb(c,!0))return d.count({trans:a,query:{index:Wb(c,d.schema),range:c.range}}).then(function(a){return Math.min(a,c.limit)});else{var e=0;return Yb(c,function(){++e;return!1},a,d).then(function(){return e})}}).then(a)};a.prototype.sortBy=function(a,b){var c=a.split(".").reverse(),d=c[0],e=c.length-1;function f(a,b){return b?f(a[c[b]],b-1):a[d]}var g=this._ctx.dir==="next"?1:-1;function h(a,b){a=f(a,e);b=f(b,e);return a<b?-g:a>b?g:0}return this.toArray(function(a){return a.sort(h)}).then(b)};a.prototype.toArray=function(a){var b=this;return this._read(function(a){var c=b._ctx;if(c.dir==="next"&&Sb(c,!0)&&c.limit>0){var d=c.valueMapper,e=Wb(c,c.table.core.schema);return c.table.core.query({trans:a,limit:c.limit,values:!0,query:{index:e,range:c.range}}).then(function(a){a=a.result;return d?a.map(d):a})}else{var f=[];return Yb(c,function(a){return f.push(a)},a,c.table.core).then(function(){return f})}},a)};a.prototype.offset=function(a){var b=this._ctx;if(a<=0)return this;b.offset+=a;Sb(b)?Ub(b,function(){var b=a;return function(a,c){if(b===0)return!0;if(b===1){--b;return!1}c(function(){a.advance(b),b=0});return!1}}):Ub(b,function(){var b=a;return function(){return--b<0}});return this};a.prototype.limit=function(a){this._ctx.limit=Math.min(this._ctx.limit,a);Ub(this._ctx,function(){var b=a;return function(a,c,d){--b<=0&&c(d);return b>=0}},!0);return this};a.prototype.until=function(a,b){Tb(this._ctx,function(c,d,e){if(a(c.value)){d(e);return b}else return!0});return this};a.prototype.first=function(a){return this.limit(1).toArray(function(a){return a[0]}).then(a)};a.prototype.last=function(a){return this.reverse().first(a)};a.prototype.filter=function(a){Tb(this._ctx,function(b){return a(b.value)});Vb(this._ctx,a);return this};a.prototype.and=function(a){return this.filter(a)};a.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)};a.prototype.reverse=function(){this._ctx.dir=this._ctx.dir==="prev"?"next":"prev";this._ondirectionchange&&this._ondirectionchange(this._ctx.dir);return this};a.prototype.desc=function(){return this.reverse()};a.prototype.eachKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.key,c)})};a.prototype.eachUniqueKey=function(a){this._ctx.unique="unique";return this.eachKey(a)};a.prototype.eachPrimaryKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.primaryKey,c)})};a.prototype.keys=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.key)}).then(function(){return c}).then(a)};a.prototype.primaryKeys=function(a){var b=this._ctx;if(b.dir==="next"&&Sb(b,!0)&&b.limit>0)return this._read(function(a){var c=Wb(b,b.table.core.schema);return b.table.core.query({trans:a,values:!1,limit:b.limit,query:{index:c,range:b.range}})}).then(function(a){a=a.result;return a}).then(a);b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.primaryKey)}).then(function(){return c}).then(a)};a.prototype.uniqueKeys=function(a){this._ctx.unique="unique";return this.keys(a)};a.prototype.firstKey=function(a){return this.limit(1).keys(function(a){return a[0]}).then(a)};a.prototype.lastKey=function(a){return this.reverse().firstKey(a)};a.prototype.distinct=function(){var a=this._ctx;a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var b={};Tb(this._ctx,function(a){a=a.primaryKey.toString();var c=l(b,a);b[a]=!0;return!c});return this};a.prototype.modify=function(a){var b=this,c=this._ctx;return this._write(function(d){var e;if(typeof a==="function")e=a;else{var f=g(a),h=f.length;e=function(b){var c=!1;for(var d=0;d<h;++d){var e=f[d],g=a[e],i=w(b,e);g instanceof $b?(x(b,e,g.execute(i)),c=!0):i!==g&&(x(b,e,g),c=!0)}return c}}var i=c.table.core,j=i.schema.primaryKey,k=j.outbound,l=j.extractKey,m=b.db._options.modifyChunkSize||200,n=[],o=0,p=[],q=function(a,b){var c=b.failures;b=b.numFailures;o+=a-b;for(a=0,b=g(c);a<b.length;a++){var d=b[a];n.push(c[d])}};return b.clone().primaryKeys().then(function(b){var f=function(g){var h=Math.min(m,b.length-g);return i.getMany({trans:d,keys:b.slice(g,g+h),cache:"immutable"}).then(function(j){var n=[],o=[],p=k?[]:null,r=[];for(var s=0;s<h;++s){var t=j[s],u={value:z(t),primKey:b[g+s]};e.call(u,u.value,u)!==!1&&(u.value==null?r.push(b[g+s]):!k&&S(l(t),l(u.value))!==0?(r.push(b[g+s]),n.push(u.value)):(o.push(u.value),k&&p.push(b[g+s])))}var v=Sb(c)&&c.limit===Infinity&&(typeof a!=="function"||a===bc)&&{index:c.index,range:c.range};return Promise.resolve(n.length>0&&i.mutate({trans:d,type:"add",values:n}).then(function(a){for(var b in a.failures)r.splice(parseInt(b),1);q(n.length,a)})).then(function(){return(o.length>0||v&&typeof a==="object")&&i.mutate({trans:d,type:"put",keys:p,values:o,criteria:v,changeSpec:typeof a!=="function"&&a}).then(function(a){return q(o.length,a)})}).then(function(){return(r.length>0||v&&a===bc)&&i.mutate({trans:d,type:"delete",keys:r,criteria:v}).then(function(a){return q(r.length,a)})}).then(function(){return b.length>g+h&&f(g+m)})})};return f(0).then(function(){if(n.length>0)throw new ua("Error modifying one or more objects",n,o,p);return b.length})})})};a.prototype["delete"]=function(){var a=this._ctx,b=a.range;return Sb(a)&&(a.isPrimKey||b.type===3)?this._write(function(c){var d=a.table.core.schema.primaryKey,e=b;return a.table.core.count({trans:c,query:{index:d,range:e}}).then(function(b){return a.table.core.mutate({trans:c,type:"deleteRange",range:e}).then(function(a){var c=a.failures;a.lastResult;a.results;a=a.numFailures;if(a)throw new ua("Could not delete some values",Object.keys(c).map(function(a){return c[a]}),b-a);return b-a})})}):this.modify(bc)};return a}(),bc=function(a,b){return b.value=null};function cc(a){return Qb(ac.prototype,function(b,c){this.db=a;var d=Hb,e=null;if(c)try{d=c()}catch(a){e=a}c=b._ctx;b=c.table;var f=b.hook.reading.fire;this._ctx={table:b,index:c.index,isPrimKey:!c.index||b.schema.primKey.keyPath&&c.index===b.schema.primKey.name,range:d,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:Infinity,error:e,or:c.or,valueMapper:f!==Aa?f:null}})}function dc(a,b){return a<b?-1:a===b?0:1}function ec(a,b){return a>b?-1:a===b?0:1}function T(a,b,c){a=a instanceof lc?new a.Collection(a):a;a._ctx.error=c?new c(b):new TypeError(b);return a}function fc(a){return new a.Collection(a,function(){return kc("")}).limit(0)}function gc(a){return a==="next"?function(a){return a.toUpperCase()}:function(a){return a.toLowerCase()}}function hc(a){return a==="next"?function(a){return a.toLowerCase()}:function(a){return a.toUpperCase()}}function ic(b,c,d,e,a,f){var g=Math.min(b.length,e.length),h=-1;for(var i=0;i<g;++i){var j=c[i];if(j!==e[i]){if(a(b[i],d[i])<0)return b.substr(0,i)+d[i]+d.substr(i+1);if(a(b[i],e[i])<0)return b.substr(0,i)+e[i]+d.substr(i+1);return h>=0?b.substr(0,h)+c[h]+d.substr(h+1):null}a(b[i],j)<0&&(h=i)}if(g<e.length&&f==="next")return b+d.substr(b.length);return g<b.length&&f==="prev"?b.substr(0,d.length):h<0?null:b.substr(0,h)+e[h]+d.substr(h+1)}function jc(a,b,c,d){var e,f,g,h,i,j,k,l=c.length;if(!c.every(function(a){return typeof a==="string"}))return T(a,Bb);function m(a){e=gc(a);f=hc(a);g=a==="next"?dc:ec;var b=c.map(function(a){return{lower:f(a),upper:e(a)}}).sort(function(a,b){return g(a.lower,b.lower)});h=b.map(function(a){return a.upper});i=b.map(function(a){return a.lower});j=a;k=a==="next"?"":d}m("next");a=new a.Collection(a,function(){return U(h[0],i[l-1]+d)});a._ondirectionchange=function(a){m(a)};var n=0;a._addAlgorithm(function(a,c,d){var e=a.key;if(typeof e!=="string")return!1;var m=f(e);if(b(m,i,n))return!0;else{var o=null;for(var p=n;p<l;++p){var q=ic(e,m,h[p],i[p],g,j);q===null&&o===null?n=p+1:(o===null||g(o,q)>0)&&(o=q)}o!==null?c(function(){a["continue"](o+k)}):c(d);return!1}});return a}function U(a,b,c,d){return{type:2,lower:a,upper:b,lowerOpen:c,upperOpen:d}}function kc(a){return{type:1,lower:a,upper:a}}var lc=function(){function a(){}Object.defineProperty(a.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0});a.prototype.between=function(a,b,c,d){c=c!==!1;d=d===!0;try{return this._cmp(a,b)>0||this._cmp(a,b)===0&&(c||d)&&!(c&&d)?fc(this):new this.Collection(this,function(){return U(a,b,!c,!d)})}catch(a){return T(this,R)}};a.prototype.equals=function(a){return a==null?T(this,R):new this.Collection(this,function(){return kc(a)})};a.prototype.above=function(a){return a==null?T(this,R):new this.Collection(this,function(){return U(a,void 0,!0)})};a.prototype.aboveOrEqual=function(a){return a==null?T(this,R):new this.Collection(this,function(){return U(a,void 0,!1)})};a.prototype.below=function(a){return a==null?T(this,R):new this.Collection(this,function(){return U(void 0,a,!1,!0)})};a.prototype.belowOrEqual=function(a){return a==null?T(this,R):new this.Collection(this,function(){return U(void 0,a)})};a.prototype.startsWith=function(a){return typeof a!=="string"?T(this,Bb):this.between(a,a+zb,!0,!0)};a.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):jc(this,function(a,b){return a.indexOf(b[0])===0},[a],zb)};a.prototype.equalsIgnoreCase=function(a){return jc(this,function(a,b){return a===b[0]},[a],"")};a.prototype.anyOfIgnoreCase=function(){var a=B.apply(pa,arguments);return a.length===0?fc(this):jc(this,function(a,b){return b.indexOf(a)!==-1},a,"")};a.prototype.startsWithAnyOfIgnoreCase=function(){var a=B.apply(pa,arguments);return a.length===0?fc(this):jc(this,function(a,b){return b.some(function(b){return a.indexOf(b)===0})},a,zb)};a.prototype.anyOf=function(){var a=this,b=B.apply(pa,arguments),c=this._cmp;try{b.sort(c)}catch(a){return T(this,R)}if(b.length===0)return fc(this);var d=new this.Collection(this,function(){return U(b[0],b[b.length-1])});d._ondirectionchange=function(d){c=d==="next"?a._ascending:a._descending,b.sort(c)};var e=0;d._addAlgorithm(function(a,d,f){var g=a.key;while(c(g,b[e])>0){++e;if(e===b.length){d(f);return!1}}if(c(g,b[e])===0)return!0;else{d(function(){a["continue"](b[e])});return!1}});return d};a.prototype.notEqual=function(a){return this.inAnyRange([[Ab,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})};a.prototype.noneOf=function(){var a=B.apply(pa,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch(a){return T(this,R)}var b=a.reduce(function(a,b){return a?a.concat([[a[a.length-1][1],b]]):[[Ab,b]]},null);b.push([a[a.length-1],this.db._maxKey]);return this.inAnyRange(b,{includeLowers:!1,includeUppers:!1})};a.prototype.inAnyRange=function(c,d){var e=this,a=this._cmp,f=this._ascending,g=this._descending,h=this._min,i=this._max;if(c.length===0)return fc(this);if(!c.every(function(a){return a[0]!==void 0&&a[1]!==void 0&&f(a[0],a[1])<=0}))return T(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",D.InvalidArgument);var j=!d||d.includeLowers!==!1,k=d&&d.includeUppers===!0;function b(b,c){var d=0,e=b.length;for(;d<e;++d){var f=b[d];if(a(c[0],f[1])<0&&a(c[1],f[0])>0){f[0]=h(f[0],c[0]);f[1]=i(f[1],c[1]);break}}d===e&&b.push(c);return b}var l=f;function m(a,b){return l(a[0],b[0])}var n;try{n=c.reduce(b,[]),n.sort(m)}catch(a){return T(this,R)}var o=0,p=k?function(a){return f(a,n[o][1])>0}:function(a){return f(a,n[o][1])>=0},q=j?function(a){return g(a,n[o][0])>0}:function(a){return g(a,n[o][0])>=0};function r(a){return!p(a)&&!q(a)}var s=p;d=new this.Collection(this,function(){return U(n[0][0],n[n.length-1][1],!j,!k)});d._ondirectionchange=function(a){a==="next"?(s=p,l=f):(s=q,l=g),n.sort(m)};d._addAlgorithm(function(a,b,c){var d=a.key;while(s(d)){++o;if(o===n.length){b(c);return!1}}if(r(d))return!0;else if(e._cmp(d,n[o][1])===0||e._cmp(d,n[o][0])===0)return!1;else{b(function(){l===f?a["continue"](n[o][0]):a["continue"](n[o][1])});return!1}});return d};a.prototype.startsWithAnyOf=function(){var a=B.apply(pa,arguments);if(!a.every(function(a){return typeof a==="string"}))return T(this,"startsWithAnyOf() only works with strings");return a.length===0?fc(this):this.inAnyRange(a.map(function(a){return[a,a+zb]}))};return a}();function mc(a){return Qb(lc.prototype,function(b,c,d){this.db=a;this._ctx={table:b,index:c===":id"?null:c,or:d};this._cmp=this._ascending=S;this._descending=function(a,b){return S(b,a)};this._max=function(a,b){return S(a,b)>0?a:b};this._min=function(a,b){return S(a,b)<0?a:b};this._IDBKeyRange=a._deps.IDBKeyRange;if(!this._IDBKeyRange)throw new D.MissingAPI()})}function V(a){return L(function(b){nc(b);a(b.target.error);return!1})}function nc(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var oc="storagemutated",pc="x-storagemutated-1",W=Pb(null,oc),qc=function(){function a(){}a.prototype._lock=function(){v(!J.global);++this._reculock;this._reculock===1&&!J.global&&(J.lockOwnerFor=this);return this};a.prototype._unlock=function(){v(!J.global);if(--this._reculock===0){J.global||(J.lockOwnerFor=null);while(this._blockedFuncs.length>0&&!this._locked()){var a=this._blockedFuncs.shift();try{vb(a[1],a[0])}catch(a){}}}return this};a.prototype._locked=function(){return this._reculock&&J.lockOwnerFor!==this};a.prototype.create=function(a){var b=this;if(!this.mode)return this;var c=this.db.idbdb,d=this.db._state.dbOpenError;v(!this.idbtrans);if(!a&&!c)switch(d&&d.name){case"DatabaseClosedError":throw new D.DatabaseClosed(d);case"MissingAPIError":throw new D.MissingAPI(d.message,d);default:throw new D.OpenFailed(d)}if(!this.active)throw new D.TransactionInactive();v(this._completion._state===null);a=this.idbtrans=a||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):c.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}));a.onerror=L(function(c){nc(c),b._reject(a.error)});a.onabort=L(function(c){nc(c),b.active&&b._reject(new D.Abort(a.error)),b.active=!1,b.on("abort").fire(c)});a.oncomplete=L(function(){b.active=!1,b._resolve(),"mutatedParts"in a&&W.storagemutated.fire(a.mutatedParts)});return this};a.prototype._promise=function(a,b,c){var d=this;if(a==="readwrite"&&this.mode!=="readwrite")return Q(new D.ReadOnly("Transaction is readonly"));if(!this.active)return Q(new D.TransactionInactive());if(this._locked())return new K(function(e,f){d._blockedFuncs.push([function(){d._promise(a,b,c).then(e,f)},J])});else if(c)return N(function(){var a=new K(function(a,c){d._lock();var e=b(a,c,d);e&&e.then&&e.then(a,c)});a["finally"](function(){return d._unlock()});a._lib=!0;return a});else{var e=new K(function(a,c){var e=b(a,c,d);e&&e.then&&e.then(a,c)});e._lib=!0;return e}};a.prototype._root=function(){return this.parent?this.parent._root():this};a.prototype.waitFor=function(a){var b=this._root(),c=K.resolve(a);if(b._waitingFor)b._waitingFor=b._waitingFor.then(function(){return c});else{b._waitingFor=c;b._waitingQueue=[];var d=b.idbtrans.objectStore(b.storeNames[0]);(function a(){++b._spinCount;while(b._waitingQueue.length)b._waitingQueue.shift()();b._waitingFor&&(d.get(-Infinity).onsuccess=a)})()}var e=b._waitingFor;return new K(function(a,d){c.then(function(c){return b._waitingQueue.push(L(a.bind(null,c)))},function(a){return b._waitingQueue.push(L(d.bind(null,a)))})["finally"](function(){b._waitingFor===e&&(b._waitingFor=null)})})};a.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new D.Abort()))};a.prototype.table=function(a){var b=this._memoizedTables||(this._memoizedTables={});if(l(b,a))return b[a];var c=this.schema[a];if(!c)throw new D.NotFound("Table "+a+" not part of transaction");c=new this.db.Table(a,c,this);c.core=this.db.core.table(a);b[a]=c;return c};return a}();function rc(a){return Qb(qc.prototype,function(b,c,d,e,f){var g=this;this.db=a;this.mode=b;this.storeNames=c;this.schema=d;this.chromeTransactionDurability=e;this.idbtrans=null;this.on=Pb(this,"complete","error","abort");this.parent=f||null;this.active=!0;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new K(function(a,b){g._resolve=a,g._reject=b});this._completion.then(function(){g.active=!1,g.on.complete.fire()},function(a){var b=g.active;g.active=!1;g.on.error.fire(a);g.parent?g.parent._reject(a):b&&g.idbtrans&&g.idbtrans.abort();return Q(a)})})}function sc(a,b,c,d,e,f,g){return{name:a,keyPath:b,unique:c,multi:d,auto:e,compound:f,src:(c&&!g?"&":"")+(d?"*":"")+(e?"++":"")+tc(b)}}function tc(a){return typeof a==="string"?a:a?"["+[].join.call(a,"+")+"]":""}function uc(a,b,c){return{name:a,primKey:b,indexes:c,mappedClass:null,idxByName:ba(c,function(a){return[a.name,a]})}}function vc(a){return a.length===1?a[0]:a}var wc=function(a){try{a.only([[]]);wc=function(){return[[]]};return[[]]}catch(a){wc=function(){return zb};return zb}};function xc(a){if(a==null)return function(){return void 0};else if(typeof a==="string")return yc(a);else return function(b){return w(b,a)}}function yc(a){var b=a.split(".");if(b.length===1)return function(b){return b[a]};else return function(b){return w(b,a)}}function zc(a){return[].slice.call(a)}var Ac=0;function Bc(a){return a==null?":id":typeof a==="string"?a:"[".concat(a.join("+"),"]")}function Cc(a,b,c){function d(a,b){var c=zc(a.objectStoreNames);return{schema:{name:a.name,tables:c.map(function(a){return b.objectStore(a)}).map(function(a){var b=a.keyPath,c=a.autoIncrement,d=h(b),e=b==null,f={};e={name:a.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:e,compound:d,keyPath:b,autoIncrement:c,unique:!0,extractKey:xc(b)},indexes:zc(a.indexNames).map(function(b){return a.index(b)}).map(function(b){var c=b.name,d=b.unique,e=b.multiEntry;b=b.keyPath;var a=h(b);c={name:c,compound:a,keyPath:b,unique:d,multiEntry:e,extractKey:xc(b)};f[Bc(b)]=c;return c}),getIndexByKeyPath:function(a){return f[Bc(a)]}};f[":id"]=e.primaryKey;b!=null&&(f[Bc(b)]=e.primaryKey);return e})},hasGetAll:c.length>0&&"getAll"in b.objectStore(c[0])&&!(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function e(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var c=a.lower,d=a.upper,e=a.lowerOpen;a=a.upperOpen;c=c===void 0?d===void 0?null:b.upperBound(d,!!a):d===void 0?b.lowerBound(c,!!e):b.bound(c,d,!!e,!!a);return c}function f(b){var c=b.name;function d(d){var f=d.trans,b=d.type,a=d.keys,g=d.values,h=d.range;return new Promise(function(d,i){d=L(d);i=f.objectStore(c);var j=i.keyPath==null,k=b==="put"||b==="add";if(!k&&b!=="delete"&&b!=="deleteRange")throw new Error("Invalid operation type: "+b);var l=(a||g||{length:1}).length;if(a&&g&&a.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(l===0)return d({numFailures:0,failures:{},results:[],lastResult:void 0});var m,n=[],o=[],p=0,q=function(a){++p,nc(a)};if(b==="deleteRange"){if(h.type===4)return d({numFailures:p,failures:o,results:[],lastResult:void 0});h.type===3?n.push(m=i.clear()):n.push(m=i["delete"](e(h)))}else{j=k?j?[g,a]:[g,null]:[a,null];var r=j[0];j=j[1];if(k)for(k=0;k<l;++k)n.push(m=j&&j[k]!==void 0?i[b](r[k],j[k]):i[b](r[k])),m.onerror=q;else for(k=0;k<l;++k)n.push(m=i[b](r[k])),m.onerror=q}var s=function(c){c=c.target.result;n.forEach(function(a,b){return a.error!=null&&(o[b]=a.error)});d({numFailures:p,failures:o,results:b==="delete"?a:n.map(function(a){return a.result}),lastResult:c})};m.onerror=function(a){q(a),s(a)};m.onsuccess=s})}function a(b){var d=b.trans,f=b.values,a=b.query,g=b.reverse,h=b.unique;return new Promise(function(b,i){b=L(b);var j=a.index,k=a.range,l=d.objectStore(c);l=j.isPrimaryKey?l:l.index(j.name);j=g?h?"prevunique":"prev":h?"nextunique":"next";var m=f||!("openKeyCursor"in l)?l.openCursor(e(k),j):l.openKeyCursor(e(k),j);m.onerror=V(i);m.onsuccess=L(function(a){var c=m.result;if(!c){b(null);return}c.___id=++Ac;c.done=!1;var e=c["continue"].bind(c),f=c.continuePrimaryKey;f&&(f=f.bind(c));var g=c.advance.bind(c);a=function(){throw new Error("Cursor not started")};var h=function(){throw new Error("Cursor not stopped")};c.trans=d;c.stop=c["continue"]=c.continuePrimaryKey=c.advance=a;c.fail=L(i);c.next=function(){var a=this,b=1;return this.start(function(){return b--?a["continue"]():a.stop()}).then(function(){return a})};c.start=function(a){var b=new Promise(function(a,b){a=L(a),m.onerror=V(b),c.fail=b,c.stop=function(b){c.stop=c["continue"]=c.continuePrimaryKey=c.advance=h,a(b)}}),d=function(){if(m.result)try{a()}catch(a){c.fail(a)}else c.done=!0,c.start=function(){throw new Error("Cursor behind last entry")},c.stop()};m.onsuccess=L(function(a){m.onsuccess=d,d()});c["continue"]=e;c.continuePrimaryKey=f;c.advance=g;d();return b};b(c)},i)})}function f(a){return function(b){return new Promise(function(f,g){f=L(f);var h=b.trans,i=b.values,j=b.limit,d=b.query,k=j===Infinity?void 0:j,l=d.index;d=d.range;h=h.objectStore(c);h=l.isPrimaryKey?h:h.index(l.name);l=e(d);if(j===0)return f({result:[]});if(a){d=i?h.getAll(l,k):h.getAllKeys(l,k);d.onsuccess=function(a){return f({result:a.target.result})};d.onerror=V(g)}else{var m=0,n=i||!("openKeyCursor"in h)?h.openCursor(l):h.openKeyCursor(l),o=[];n.onsuccess=function(a){a=n.result;if(!a)return f({result:o});o.push(i?a.value:a.primaryKey);if(++m===j)return f({result:o});a["continue"]()};n.onerror=V(g)}})}}return{name:c,schema:b,mutate:d,getMany:function(b){var d=b.trans,a=b.keys;return new Promise(function(b,e){b=L(b);var f=d.objectStore(c),g=a.length,h=new Array(g),i=0,j=0,k=function(a){a=a.target;(h[a._pos]=a.result)!=null;++j===i&&b(h)};e=V(e);for(var l=0;l<g;++l){var m=a[l];m!=null&&(m=f.get(a[l]),m._pos=l,m.onsuccess=k,m.onerror=e,++i)}i===0&&b(h)})},get:function(a){var b=a.trans,d=a.key;return new Promise(function(a,e){a=L(a);var f=b.objectStore(c);f=f.get(d);f.onsuccess=function(b){return a(b.target.result)};f.onerror=V(e)})},query:f(g),openCursor:a,count:function(b){var a=b.query,d=b.trans,f=a.index,g=a.range;return new Promise(function(a,b){var h=d.objectStore(c);h=f.isPrimaryKey?h:h.index(f.name);var i=e(g);i=i?h.count(i):h.count();i.onsuccess=L(function(b){return a(b.target.result)});i.onerror=V(b)})}}}d=d(a,c);c=d.schema;var g=d.hasGetAll;d=c.tables.map(function(a){return f(a)});var i={};d.forEach(function(a){return i[a.name]=a});return{stack:"dbcore",transaction:a.transaction.bind(a),table:function(a){var b=i[a];if(!b)throw new Error("Table '".concat(a,"' not found"));return i[a]},MIN_KEY:-Infinity,MAX_KEY:wc(b),schema:c}}function Dc(a,b){return b.reduce(function(a,b){b=b.create;return d(d({},a),b(a))},a)}function Ec(a,b,c,d){var e=c.IDBKeyRange;c.indexedDB;c=Dc(Cc(b,e,d),a.dbcore);return{dbcore:c}}function Fc(a,b){var c=b.db;c=Ec(a._middlewares,c,a._deps,b);a.core=c.dbcore;a.tables.forEach(function(b){var c=b.name;a.core.schema.tables.some(function(a){return a.name===c})&&(b.core=a.core.table(c),a[c]instanceof a.Table&&(a[c].core=b.core))})}function Gc(a,b,c,d){c.forEach(function(c){var e=d[c];b.forEach(function(b){var d=r(b,c);(!d||"value"in d&&d.value===void 0)&&(b===a.Transaction.prototype||b instanceof a.Transaction?o(b,c,{get:function(){return this.table(c)},set:function(a){n(this,c,{value:a,writable:!0,configurable:!0,enumerable:!0})}}):b[c]=new a.Table(c,e))})})}function Hc(a,b){b.forEach(function(b){for(var c in b)b[c]instanceof a.Table&&delete b[c]})}function Ic(a,b){return a._cfg.version-b._cfg.version}function Jc(a,b,c,d){var e=a._dbSchema;c.objectStoreNames.contains("$meta")&&!e.$meta&&(e.$meta=uc("$meta",Wc("")[0],[]),a._storeNames.push("$meta"));var f=a._createTransaction("readwrite",a._storeNames,e);f.create(c);f._completion["catch"](d);var h=f._reject.bind(f),i=J.transless||J;N(function(){J.trans=f;J.transless=i;if(b===0)g(e).forEach(function(a){Oc(c,a,e[a].primKey,e[a].indexes)}),Fc(a,c),K.follow(function(){return a.on.populate.fire(f)})["catch"](h);else{Fc(a,c);return Lc(a,f,b).then(function(b){return Mc(a,b,f,c)})["catch"](h)}})}function Kc(a,b){Pc(a._dbSchema,b);b.db.version%10===0&&!b.objectStoreNames.contains("$meta")&&b.db.createObjectStore("$meta").add(Math.ceil(b.db.version/10-1),"version");var c=Sc(a,a.idbdb,b);Vc(a,a._dbSchema,b);c=Nc(c,a._dbSchema);a=function(a){if(a.change.length||a.recreate)return{value:void 0};var c=b.objectStore(a.name);a.add.forEach(function(a){G&&!1,Rc(c,a)})};for(var d=0,c=c.change;d<c.length;d++){var e=c[d];e=a(e);if(typeof e==="object")return e.value}}function Lc(a,b,c){if(b.storeNames.includes("$meta"))return b.table("$meta").get("version").then(function(a){return a!=null?a:c});else return K.resolve(c)}function Mc(a,b,c,d){var e=[],f=a._versions,h=a._dbSchema=Sc(a,a.idbdb,d);f=f.filter(function(a){return a._cfg.version>=b});if(f.length===0)return K.resolve();f.forEach(function(f){e.push(function(){var e=h,i=f._cfg.dbschema;Vc(a,e,d);Vc(a,i,d);h=a._dbSchema=i;var j=Nc(e,i);j.add.forEach(function(a){Oc(d,a[0],a[1].primKey,a[1].indexes)});j.change.forEach(function(a){if(a.recreate)throw new D.Upgrade("Not yet support for changing primary key");else{var b=d.objectStore(a.name);a.add.forEach(function(a){return Rc(b,a)});a.change.forEach(function(a){b.deleteIndex(a.name),Rc(b,a)});a.del.forEach(function(a){return b.deleteIndex(a)})}});var k=f._cfg.contentUpgrade;if(k&&f._cfg.version>b){Fc(a,d);c._memoizedTables={};var l=da(i);j.del.forEach(function(a){l[a]=e[a]});Hc(a,[a.Transaction.prototype]);Gc(a,[a.Transaction.prototype],g(l),l);c.schema=l;var m=qa(k);m&&qb();var n;i=K.follow(function(){n=k(c);if(n&&m){var a=O.bind(null,null);n.then(a,a)}});return n&&typeof n.then==="function"?K.resolve(n):i.then(function(){return n})}}),e.push(function(b){var d=f._cfg.dbschema;Qc(d,b);Hc(a,[a.Transaction.prototype]);Gc(a,[a.Transaction.prototype],a._storeNames,a._dbSchema);c.schema=a._dbSchema}),e.push(function(b){a.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(a.idbdb.version/10)===f._cfg.version?(a.idbdb.deleteObjectStore("$meta"),delete a._dbSchema.$meta,a._storeNames=a._storeNames.filter(function(a){return a!=="$meta"})):b.objectStore("$meta").put(f._cfg.version,"version"))})});function i(){return e.length?K.resolve(e.shift()(c.idbtrans)).then(i):K.resolve()}return i().then(function(){Pc(h,d)})}function Nc(a,b){var c={del:[],add:[],change:[]},d;for(d in a)b[d]||c.del.push(d);for(d in b){var e=a[d],f=b[d];if(!e)c.add.push([d,f]);else{var g={name:d,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(e.primKey.keyPath||"")!==""+(f.primKey.keyPath||"")||e.primKey.auto!==f.primKey.auto)g.recreate=!0,c.change.push(g);else{e=e.idxByName;f=f.idxByName;var h;for(h in e)f[h]||g.del.push(h);for(h in f){var i=e[h],j=f[h];!i?g.add.push(j):i.src!==j.src&&g.change.push(j)}(g.del.length>0||g.add.length>0||g.change.length>0)&&c.change.push(g)}}}return c}function Oc(a,b,c,d){var e=a.db.createObjectStore(b,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});d.forEach(function(a){return Rc(e,a)});return e}function Pc(a,b){g(a).forEach(function(c){b.db.objectStoreNames.contains(c)||(G&&!1,Oc(b,c,a[c].primKey,a[c].indexes))})}function Qc(a,b){[].slice.call(b.db.objectStoreNames).forEach(function(c){return a[c]==null&&b.db.deleteObjectStore(c)})}function Rc(a,b){a.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function Sc(a,b,c){var d={};a=t(b.objectStoreNames,0);a.forEach(function(a){var b=c.objectStore(a),e=b.keyPath,f=sc(tc(e),e||"",!0,!1,!!b.autoIncrement,e&&typeof e!=="string",!0),g=[];for(var h=0;h<b.indexNames.length;++h){var i=b.index(b.indexNames[h]);e=i.keyPath;i=sc(i.name,e,!!i.unique,!!i.multiEntry,!1,e&&typeof e!=="string",!1);g.push(i)}d[a]=uc(a,f,g)});return d}function Tc(a,b,c){a.verno=b.version/10;c=a._dbSchema=Sc(a,b,c);a._storeNames=t(b.objectStoreNames,0);Gc(a,[a._allTables],g(c),c)}function Uc(a,b){b=Sc(a,a.idbdb,b);b=Nc(b,a._dbSchema);return!(b.add.length||b.change.some(function(a){return a.add.length||a.change.length}))}function Vc(a,b,c){var d=c.db.objectStoreNames;for(var e=0;e<d.length;++e){var g=d[e],h=c.objectStore(g);a._hasGetAll="getAll"in h;for(var i=0;i<h.indexNames.length;++i){var j=h.indexNames[i],k=h.index(j).keyPath;k=typeof k==="string"?k:"["+t(k).join("+")+"]";if(b[g]){var l=b[g].idxByName[k];l&&(l.name=j,delete b[g].idxByName[k],b[g].idxByName[j]=l)}}}typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function Wc(a){return a.split(",").map(function(a,b){a=a.trim();var c=a.replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return sc(c,d||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),h(d),b===0)})}var Xc=function(){function a(){}a.prototype._parseStoresSpec=function(a,b){g(a).forEach(function(c){if(a[c]!==null){var d=Wc(a[c]),e=d.shift();e.unique=!0;if(e.multi)throw new D.Schema("Primary key cannot be multi-valued");d.forEach(function(a){if(a.auto)throw new D.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new D.Schema("Index must have a name and cannot be an empty string")});b[c]=uc(c,e,d)}})};a.prototype.stores=function(a){var b=this.db;this._cfg.storesSource=this._cfg.storesSource?i(this._cfg.storesSource,a):a;a=b._versions;var c={},d={};a.forEach(function(a){i(c,a._cfg.storesSource),d=a._cfg.dbschema={},a._parseStoresSpec(c,d)});b._dbSchema=d;Hc(b,[b._allTables,b,b.Transaction.prototype]);Gc(b,[b._allTables,b,b.Transaction.prototype,this._cfg.tables],g(d),d);b._storeNames=g(d);return this};a.prototype.upgrade=function(a){this._cfg.contentUpgrade=Ga(this._cfg.contentUpgrade||E,a);return this};return a}();function Yc(a){return Qb(Xc.prototype,function(b){this.db=a,this._cfg={version:b,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Zc(a,b){var c=a._dbNamesDB;c||(c=a._dbNamesDB=new Y(Db,{addons:[],indexedDB:a,IDBKeyRange:b}),c.version(1).stores({dbnames:"name"}));return c.table("dbnames")}function $c(a){return a&&typeof a.databases==="function"}function ad(a){var b=a.indexedDB;a=a.IDBKeyRange;return $c(b)?Promise.resolve(b.databases()).then(function(a){return a.map(function(a){return a.name}).filter(function(a){return a!==Db})}):Zc(b,a).toCollection().primaryKeys()}function bd(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!$c(c)&&b!==Db&&Zc(c,a).put({name:b})["catch"](E)}function cd(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!$c(c)&&b!==Db&&Zc(c,a)["delete"](b)["catch"](E)}function dd(a){return N(function(){J.letThrough=!0;return a()})}function ed(){var a=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!a||!indexedDB.databases)return Promise.resolve();var b;return new Promise(function(a){var c=function(){return indexedDB.databases()["finally"](a)};b=setInterval(c,100);c()})["finally"](function(){return clearInterval(b)})}function fd(a){return!("from"in a)}var X=function(a,b){if(this)i(this,arguments.length?{d:1,from:a,to:arguments.length>1?b:a}:{d:0});else{var c=new X();a&&"d"in a&&i(c,a);return c}};m(X.prototype,(H={add:function(a){hd(this,a);return this},addKey:function(a){gd(this,a,a);return this},addKeys:function(a){var b=this;a.forEach(function(a){return gd(b,a,a)});return this}},H[na]=function(){return jd(this)},H));function gd(a,b,c){var d=S(b,c);if(isNaN(d))return;if(d>0)throw RangeError();if(fd(a))return i(a,{from:b,to:c,d:1});d=a.l;var e=a.r;if(S(c,a.from)<0){d?gd(d,b,c):a.l={from:b,to:c,d:1,l:null,r:null};return kd(a)}if(S(b,a.to)>0){e?gd(e,b,c):a.r={from:b,to:c,d:1,l:null,r:null};return kd(a)}S(b,a.from)<0&&(a.from=b,a.l=null,a.d=e?e.d+1:1);S(c,a.to)>0&&(a.to=c,a.r=null,a.d=a.l?a.l.d+1:1);b=!a.r;d&&!a.l&&hd(a,d);e&&b&&hd(a,e)}function hd(a,b){function c(a,b){var d=b.from,e=b.to,f=b.l;b=b.r;gd(a,d,e);f&&c(a,f);b&&c(a,b)}fd(b)||c(a,b)}function id(a,b){b=jd(b);var c=b.next();if(c.done)return!1;var d=c.value;a=jd(a);var e=a.next(d.from),f=e.value;while(!c.done&&!e.done){if(S(f.from,d.to)<=0&&S(f.to,d.from)>=0)return!0;S(d.from,f.from)<0?d=(c=b.next(f.from)).value:f=(e=a.next(d.from)).value}return!1}function jd(a){var b=fd(a)?null:{s:0,n:a};return{next:function(a){var c=arguments.length>0;while(b)switch(b.s){case 0:b.s=1;if(c)while(b.n.l&&S(a,b.n.from)<0)b={up:b,n:b.n.l,s:1};else while(b.n.l)b={up:b,n:b.n.l,s:1};case 1:b.s=2;if(!c||S(a,b.n.to)<=0)return{value:b.n,done:!1};case 2:if(b.n.r){b.s=3;b={up:b,n:b.n.r,s:0};continue}case 3:b=b.up}return{done:!0}}}}function kd(a){var b;b=(((b=a.r)===null||b===void 0?void 0:b.d)||0)-(((b=a.l)===null||b===void 0?void 0:b.d)||0);b=b>1?"r":b<-1?"l":"";if(b){var c=b==="r"?"l":"r",e=d({},a),f=a[b];a.from=f.from;a.to=f.to;a[b]=f[b];e[b]=f[c];a[c]=e;e.d=ld(e)}a.d=ld(a)}function ld(a){var b=a.r;a=a.l;return(b?a?Math.max(b.d,a.d):b.d:a?a.d:0)+1}function md(a,b){g(b).forEach(function(c){a[c]?hd(a[c],b[c]):a[c]=ha(b[c])});return a}function nd(a,b){return a.all||b.all||Object.keys(a).some(function(c){return b[c]&&id(b[c],a[c])})}var od={},pd={},qd=!1;function rd(a,b){md(pd,a),qd||(qd=!0,setTimeout(function(){qd=!1;var a=pd;pd={};sd(a,!1)},0))}function sd(a,b){b===void 0&&(b=!1);var c=new Set();if(a.all)for(var d=0,e=Object.values(od);d<e.length;d++){var f=e[d];td(f,a,c,b)}else for(e in a){d=/^idb\:\/\/(.*)\/(.*)\//.exec(e);if(d){var g=d[1];d=d[2];var f=od["idb://".concat(g,"/").concat(d)];f&&td(f,a,c,b)}}c.forEach(function(a){return a()})}function td(a,b,c,d){var e=[];for(var f=0,g=Object.entries(a.queries.query);f<g.length;f++){var h=g[f],i=h[0];h=h[1];var j=[];for(var k=0,h=h;k<h.length;k++){var l=h[k];nd(b,l.obsSet)?l.subscribers.forEach(function(a){return c.add(a)}):d&&j.push(l)}d&&e.push([i,j])}if(d)for(l=0,k=e;l<k.length;l++){h=k[l];var i=h[0],j=h[1];a.queries.query[i]=j}}function ud(a){var b=a._state,c=a._deps.indexedDB;if(b.isBeingOpened||a.idbdb)return b.dbReadyPromise.then(function(){return b.dbOpenError?Q(b.dbOpenError):a});b.isBeingOpened=!0;b.dbOpenError=null;b.openComplete=!1;var d=b.openCanceller,e=Math.round(a.verno*10),f=!1;function g(){if(b.openCanceller!==d)throw new D.DatabaseClosed("db.open() was cancelled")}var h=b.dbReadyResolve,i=null,j=!1,k=function(){return new K(function(d,h){g();if(!c)throw new D.MissingAPI();var l=a.name,m=b.autoSchema||!e?c.open(l):c.open(l,e);if(!m)throw new D.MissingAPI();m.onerror=V(h);m.onblocked=L(a._fireOnBlocked);m.onupgradeneeded=L(function(d){i=m.transaction;if(b.autoSchema&&!a._options.allowEmptyDB){m.onerror=nc;i.abort();m.result.close();var e=c.deleteDatabase(l);e.onsuccess=e.onerror=L(function(){h(new D.NoSuchDatabase("Database ".concat(l," doesnt exist")))})}else{i.onerror=V(h);e=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;j=e<1;a.idbdb=m.result;f&&Kc(a,i);Jc(a,e/10,i,h)}},h);m.onsuccess=L(function(){i=null;var c=a.idbdb=m.result,g=t(c.objectStoreNames);if(g.length>0)try{g=c.transaction(vc(g),"readonly");if(b.autoSchema)Tc(a,c,g);else{Vc(a,a._dbSchema,g);if(!Uc(a,g)&&!f){c.close();e=c.version+1;f=!0;return d(k())}}Fc(a,g)}catch(a){}Cb.push(a);c.onversionchange=L(function(c){b.vcFired=!0,a.on("versionchange").fire(c)});c.onclose=L(function(b){a.on("close").fire(b)});j&&bd(a._deps,l);d()},h)})["catch"](function(a){switch(a===null||a===void 0?void 0:a.name){case"UnknownError":if(b.PR1398_maxLoop>0){b.PR1398_maxLoop--;return k()}break;case"VersionError":if(e>0){e=0;return k()}break}return K.reject(a)})};return K.race([d,(typeof navigator==="undefined"?K.resolve():ed()).then(k)]).then(function(){g();b.onReadyBeingFired=[];return K.resolve(dd(function(){return a.on.ready.fire(a.vip)})).then(function c(){if(b.onReadyBeingFired.length>0){var d=b.onReadyBeingFired.reduce(Ga,E);b.onReadyBeingFired=[];return K.resolve(dd(function(){return d(a.vip)})).then(c)}})})["finally"](function(){b.openCanceller===d&&(b.onReadyBeingFired=null,b.isBeingOpened=!1)})["catch"](function(c){b.dbOpenError=c;try{i&&i.abort()}catch(a){}d===b.openCanceller&&a._close();return Q(c)})["finally"](function(){b.openComplete=!0,h()}).then(function(){if(j){var b={};a.tables.forEach(function(c){c.schema.indexes.forEach(function(d){d.name&&(b["idb://".concat(a.name,"/").concat(c.name,"/").concat(d.name)]=new X(-Infinity,[[[]]]))}),b["idb://".concat(a.name,"/").concat(c.name,"/")]=b["idb://".concat(a.name,"/").concat(c.name,"/:dels")]=new X(-Infinity,[[[]]])});W(oc).fire(b);sd(b,!0)}return a})}function vd(a){var b=function(b){return a.next(b)},c=function(b){return a["throw"](b)},d=f(b),e=f(c);function f(a){return function(b){b=a(b);var c=b.value;return b.done?c:!c||typeof c.then!=="function"?h(c)?Promise.all(c).then(d,e):d(c):c.then(d,e)}}return f(b)()}function wd(a,b,c){var d=arguments.length;if(d<2)throw new D.InvalidArgument("Too few arguments");var e=new Array(d-1);while(--d)e[d-1]=arguments[d];c=e.pop();var f=fa(e);return[a,f,c]}function xd(a,b,c,d,e){return K.resolve().then(function(){var f=J.transless||J,g=a._createTransaction(b,c,a._dbSchema,d);g.explicit=!0;f={trans:g,transless:f};if(d)g.idbtrans=d.idbtrans;else try{g.create(),g.idbtrans._explicit=!0,a._state.PR1398_maxLoop=3}catch(d){if(d.name===wa.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a.close({disableAutoOpen:!1});return a.open().then(function(){return xd(a,b,c,null,e)})}return Q(d)}var h=qa(e);h&&qb();var i;f=K.follow(function(){i=e.call(g,g);if(i)if(h){var a=O.bind(null,null);i.then(a,a)}else typeof i.next==="function"&&typeof i["throw"]==="function"&&(i=vd(i))},f);return(i&&typeof i.then==="function"?K.resolve(i).then(function(a){return g.active?a:Q(new D.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return i})).then(function(a){d&&g._resolve();return g._completion.then(function(){return a})})["catch"](function(a){g._reject(a);return Q(a)})})}function yd(a,b,c){a=h(a)?a.slice():[a];for(var d=0;d<c;++d)a.push(b);return a}function zd(a){return d(d({},a),{table:function(b){var c=a.table(b);b=c.schema;var e={},f=[];function g(a,b,c){var h=Bc(a),i=e[h]=e[h]||[],j=a==null?0:typeof a==="string"?1:a.length,k=b>0;h=d(d({},c),{name:k?"".concat(h,"(virtual-from:").concat(c.name,")"):c.name,lowLevelIndex:c,isVirtual:k,keyTail:b,keyLength:j,extractKey:xc(a),unique:!k&&c.unique});i.push(h);h.isPrimaryKey||f.push(h);if(j>1){k=j===2?a[0]:a.slice(0,j-1);g(k,b+1,c)}i.sort(function(a,b){return a.keyTail-b.keyTail});return h}var h=g(b.primaryKey.keyPath,0,b.primaryKey);e[":id"]=[h];for(var i=0,j=b.indexes;i<j.length;i++){var k=j[i];g(k.keyPath,0,k)}function l(a){a=e[Bc(a)];return a&&a[0]}function m(b,c){return{type:b.type===1?2:b.type,lower:yd(b.lower,b.lowerOpen?a.MAX_KEY:a.MIN_KEY,c),lowerOpen:!0,upper:yd(b.upper,b.upperOpen?a.MIN_KEY:a.MAX_KEY,c),upperOpen:!0}}function n(b){var a=b.query.index;return a.isVirtual?d(d({},b),{query:{index:a.lowLevelIndex,range:m(b.query.range,a.keyTail)}}):b}k=d(d({},c),{schema:d(d({},b),{primaryKey:h,indexes:f,getIndexByKeyPath:l}),count:function(a){return c.count(n(a))},query:function(a){return c.query(n(a))},openCursor:function(d){var b=d.query.index,e=b.keyTail,f=b.isVirtual,g=b.keyLength;if(!f)return c.openCursor(d);function h(b){function c(c){c!=null?b["continue"](yd(c,d.reverse?a.MAX_KEY:a.MIN_KEY,e)):d.unique?b["continue"](b.key.slice(0,g).concat(d.reverse?a.MIN_KEY:a.MAX_KEY,e)):b["continue"]()}c=Object.create(b,{"continue":{value:c},continuePrimaryKey:{value:function(d,c){b.continuePrimaryKey(yd(d,a.MAX_KEY,e),c)}},primaryKey:{get:function(){return b.primaryKey}},key:{get:function(){var a=b.key;return g===1?a[0]:a.slice(0,g)}},value:{get:function(){return b.value}}});return c}return c.openCursor(n(d)).then(function(a){return a&&h(a)})}});return k}})}var Ad={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:zd};function Bd(a,b,c,d){c=c||{};d=d||"";g(a).forEach(function(e){if(!l(b,e))c[d+e]=void 0;else{var f=a[e],g=b[e];if(typeof f==="object"&&typeof g==="object"&&f&&g){var h=ma(f),i=ma(g);h!==i?c[d+e]=b[e]:h==="Object"?Bd(f,g,c,d+e+"."):f!==g&&(c[d+e]=b[e])}else f!==g&&(c[d+e]=b[e])}});g(b).forEach(function(e){l(a,e)||(c[d+e]=b[e])});return c}function Cd(a,b){return b.type==="delete"?b.keys:b.keys||b.values.map(a.extractKey)}var Dd={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return d(d({},a),{table:function(b){var c=a.table(b),f=c.schema.primaryKey,g=d(d({},c),{mutate:function(a){var g=J.trans,h=g.table(b).hook,i=h.deleting,j=h.creating,k=h.updating;switch(a.type){case"add":if(j.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"put":if(j.fire===E&&k.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"delete":if(i.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"deleteRange":if(i.fire===E)break;return g._promise("readwrite",function(){return n(a)},!0)}return c.mutate(a);function m(b){var g=J.trans,a=b.keys||Cd(f,b);if(!a)throw new Error("Keys missing");b=b.type==="add"||b.type==="put"?d(d({},b),{keys:a}):d({},b);b.type!=="delete"&&(b.values=e([],b.values,!0));b.keys&&(b.keys=e([],b.keys,!0));return Ed(c,b,a).then(function(d){var e=a.map(function(a,c){var e=d[c],h={onerror:null,onsuccess:null};if(b.type==="delete")i.fire.call(h,a,e,g);else if(b.type==="add"||e===void 0){var m=j.fire.call(h,a,b.values[c],g);a==null&&m!=null&&(a=m,b.keys[c]=a,f.outbound||x(b.values[c],f.keyPath,a))}else{m=Bd(e,b.values[c]);var n=k.fire.call(h,m,a,e,g);if(n){var o=b.values[c];Object.keys(n).forEach(function(a){l(o,a)?o[a]=n[a]:x(o,a,n[a])})}}return h});return c.mutate(b).then(function(c){var f=c.failures,g=c.results,h=c.numFailures;c=c.lastResult;for(var i=0;i<a.length;++i){var j=g?g[i]:a[i],k=e[i];j==null?k.onerror&&k.onerror(f[i]):k.onsuccess&&k.onsuccess(b.type==="put"&&d[i]?b.values[i]:j)}return{failures:f,results:g,numFailures:h,lastResult:c}})["catch"](function(a){e.forEach(function(b){return b.onerror&&b.onerror(a)});return Promise.reject(a)})})}function n(a){return o(a.trans,a.range,1e4)}function o(a,b,e){return c.query({trans:a,values:!1,query:{index:f,range:b},limit:e}).then(function(c){var f=c.result;return m({type:"delete",keys:f,trans:a}).then(function(c){if(c.numFailures>0)return Promise.reject(c.failures[0]);if(f.length<e)return{failures:[],numFailures:0,lastResult:void 0};else return o(a,d(d({},b),{lower:f[f.length-1],lowerOpen:!0}),e)})})}}});return g}})}};function Ed(a,b,c){return b.type==="add"?Promise.resolve([]):a.getMany({trans:b.trans,keys:c,cache:"immutable"})}function Fd(a,b,c){try{if(!b)return null;if(b.keys.length<a.length)return null;var d=[];for(var e=0,f=0;e<b.keys.length&&f<a.length;++e){if(S(b.keys[e],a[f])!==0)continue;d.push(c?z(b.values[e]):b.values[e]);++f}return d.length===a.length?d:null}catch(a){return null}}var Gd={stack:"dbcore",level:-1,create:function(a){return{table:function(b){var c=a.table(b);return d(d({},c),{getMany:function(a){if(!a.cache)return c.getMany(a);var b=Fd(a.keys,a.trans._cache,a.cache==="clone");return b?K.resolve(b):c.getMany(a).then(function(b){a.trans._cache={keys:a.keys,values:a.cache==="clone"?z(b):b};return b})},mutate:function(a){a.type!=="add"&&(a.trans._cache=null);return c.mutate(a)}})}}}};function Hd(a,b){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!b.schema.primaryKey.outbound}function Id(a,b){switch(a){case"query":return b.values&&!b.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Jd={stack:"dbcore",level:0,name:"Observability",create:function(a){var b=a.schema.name,c=new X(a.MIN_KEY,a.MAX_KEY);return d(d({},a),{transaction:function(b,c,d){if(J.subscr&&c!=="readonly")throw new D.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(J.querier));return a.transaction(b,c,d)},table:function(e){var f=a.table(e),i=f.schema,j=i.primaryKey,k=j.extractKey,l=j.outbound,m=d(d({},f),{mutate:function(g){var k=g.trans,l=g.mutatedParts||(g.mutatedParts={}),m=function(a){a="idb://".concat(b,"/").concat(e,"/").concat(a);return l[a]||(l[a]=new X())},n=m(""),o=m(":dels"),d=g.type,p=g.type==="deleteRange"?[g.range]:g.type==="delete"?[g.keys]:g.values.length<50?[Cd(j,g).filter(function(a){return a}),g.values]:[],a=p[0];p=p[1];var q=g.trans._cache;if(h(a)){n.addKeys(a);d=d==="delete"||a.length===p.length?Fd(a,q):null;d||o.addKeys(a);(d||p)&&Kd(m,i,d,p)}else if(a){q={from:a.lower,to:a.upper};o.add(q);n.add(q)}else n.add(c),o.add(c),i.indexes.forEach(function(a){return m(a.name).add(c)});return f.mutate(g).then(function(b){a&&(g.type==="add"||g.type==="put")&&n.addKeys(b.results);k.mutatedParts=md(k.mutatedParts||{},l);return b})}}),n=function(b){b=b.query;var c=b.index;b=b.range;return[c,new X((c=b.lower)!==null&&c!==void 0?c:a.MIN_KEY,(c=b.upper)!==null&&c!==void 0?c:a.MAX_KEY)]},o={get:function(a){return[j,new X(a.key)]},getMany:function(a){return[j,new X().addKeys(a.keys)]},count:n,query:n,openCursor:n};g(o).forEach(function(a){m[a]=function(g){var h=J.subscr,i=!!h,j=Hd(J,f)&&Id(a,g),m=j?g.obsSet={}:h;if(i){var n=function(a){a="idb://".concat(b,"/").concat(e,"/").concat(a);return m[a]||(m[a]=new X())},p=n(""),q=n(":dels"),r=o[a](g),s=r[0],t=r[1];a==="query"&&s.isPrimaryKey&&!g.values?q.add(t):n(s.name||"").add(t);if(!s.isPrimaryKey)if(a==="count")q.add(c);else{var u=a==="query"&&l&&g.values&&f.query(d(d({},g),{values:!1}));return f[a].apply(this,arguments).then(function(b){if(a==="query"){if(l&&g.values)return u.then(function(a){a=a.result;p.addKeys(a);return b});var c=g.values?b.result.map(k):b.result;g.values?p.addKeys(c):q.addKeys(c)}else if(a==="openCursor"){var d=b,e=g.values;return d&&Object.create(d,{key:{get:function(){q.addKey(d.primaryKey);return d.key}},primaryKey:{get:function(){var a=d.primaryKey;q.addKey(a);return a}},value:{get:function(){e&&p.addKey(d.primaryKey);return d.value}}})}return b})}}return f[a].apply(this,arguments)}});return m}})}};function Kd(a,b,c,d){function e(b){var e=a(b.name||"");function f(a){return a!=null?b.extractKey(a):null}var g=function(a){return b.multiEntry&&h(a)?a.forEach(function(a){return e.addKey(a)}):e.addKey(a)};(c||d).forEach(function(a,b){a=c&&f(c[b]);b=d&&f(d[b]);S(a,b)!==0&&(a!=null&&g(a),b!=null&&g(b))})}b.indexes.forEach(e)}function Ld(a,b,c){if(c.numFailures===0)return b;if(b.type==="deleteRange")return null;a=b.keys?b.keys.length:"values"in b&&b.values?b.values.length:1;if(c.numFailures===a)return null;a=d({},b);h(a.keys)&&(a.keys=a.keys.filter(function(a,b){return!(b in c.failures)}));"values"in a&&h(a.values)&&(a.values=a.values.filter(function(a,b){return!(b in c.failures)}));return a}function Md(a,b){return b.lower===void 0?!0:b.lowerOpen?S(a,b.lower)>0:S(a,b.lower)>=0}function Nd(a,b){return b.upper===void 0?!0:b.upperOpen?S(a,b.upper)<0:S(a,b.upper)<=0}function Od(a,b){return Md(a,b)&&Nd(a,b)}function Pd(a,b,c,d,e,f){if(!c||c.length===0)return a;var g=b.query.index,i=g.multiEntry,j=b.query.range;d=d.schema.primaryKey;var k=d.extractKey,l=g.extractKey,m=(g.lowLevelIndex||g).extractKey;d=c.reduce(function(a,c){var d=a,e=c.type==="add"||c.type==="put"?c.values.filter(function(a){a=l(a);return i&&h(a)?a.some(function(a){return Od(a,j)}):Od(a,j)}).map(function(a){a=z(a);f&&Object.freeze(a);return a}):[];switch(c.type){case"add":d=a.concat(b.values?e:e.map(function(a){return k(a)}));break;case"put":var g=new X().addKeys(c.values.map(function(a){return k(a)}));d=a.filter(function(a){a=b.values?k(a):a;return!id(new X(a),g)}).concat(b.values?e:e.map(function(a){return k(a)}));break;case"delete":var m=new X().addKeys(c.keys);d=a.filter(function(a){a=b.values?k(a):a;return!id(new X(a),m)});break;case"deleteRange":var n=c.range;d=a.filter(function(a){return!Od(k(a),n)});break}return d},a);if(d===a)return a;d.sort(function(a,b){return S(m(a),m(b))||S(k(a),k(b))});b.limit&&b.limit<Infinity&&(d.length>b.limit?d.length=b.limit:a.length===b.limit&&d.length<b.limit&&(e.dirty=!0));return f?Object.freeze(d):d}function Qd(a,b){return S(a.lower,b.lower)===0&&S(a.upper,b.upper)===0&&!!a.lowerOpen===!!b.lowerOpen&&!!a.upperOpen===!!b.upperOpen}function Rd(a,b,c,d){if(a===void 0)return b!==void 0?-1:0;if(b===void 0)return 1;a=S(a,b);if(a===0){if(c&&d)return 0;if(c)return 1;if(d)return-1}return a}function Sd(a,b,c,d){if(a===void 0)return b!==void 0?1:0;if(b===void 0)return-1;a=S(a,b);if(a===0){if(c&&d)return 0;if(c)return-1;if(d)return 1}return a}function Td(a,b){return Rd(a.lower,b.lower,a.lowerOpen,b.lowerOpen)<=0&&Sd(a.upper,b.upper,a.upperOpen,b.upperOpen)>=0}function Ud(b,c,a,d){b=od["idb://".concat(b,"/").concat(c)];if(!b)return[];c=b.queries[a];if(!c)return[null,!1,b,null];var e=d.query?d.query.index.name:null;c=c[e||""];if(!c)return[null,!1,b,null];switch(a){case"query":e=c.find(function(a){return a.req.limit===d.limit&&a.req.values===d.values&&Qd(a.req.query.range,d.query.range)});if(e)return[e,!0,b,c];a=c.find(function(a){var b="limit"in a.req?a.req.limit:Infinity;return b>=d.limit&&(d.values?a.req.values:!0)&&Td(a.req.query.range,d.query.range)});return[a,!1,b,c];case"count":e=c.find(function(a){return Qd(a.req.query.range,d.query.range)});return[e,!!e,b,c]}}function Vd(a,b,c,d){a.subscribers.add(c),d.addEventListener("abort",function(){a.subscribers["delete"](c),a.subscribers.size===0&&Wd(a,b)})}function Wd(a,b){setTimeout(function(){a.subscribers.size===0&&A(b,a)},3e3)}var Xd={stack:"dbcore",level:0,name:"Cache",create:function(a){var b=a.schema.name,c=d(d({},a),{transaction:function(c,d,e){var f=a.transaction(c,d,e);if(d==="readwrite"){var g=new AbortController();e=g.signal;var h=function(e){return function(){g.abort();if(d==="readwrite"){var h=new Set();for(var i=0,j=c;i<j.length;i++){var k=j[i],l=od["idb://".concat(b,"/").concat(k)];if(l){k=a.table(k);var m=l.optimisticOps.filter(function(a){return a.trans===f});if(f._explicit&&e&&f.mutatedParts)for(var n=0,o=Object.values(l.queries.query);n<o.length;n++){var p=o[n];for(var q=0,r=p.slice();q<r.length;q++){var s=r[q];nd(s.obsSet,f.mutatedParts)&&(A(p,s),s.subscribers.forEach(function(a){return h.add(a)}))}}else if(m.length>0){l.optimisticOps=l.optimisticOps.filter(function(a){return a.trans!==f});for(q=0,r=Object.values(l.queries.query);q<r.length;q++){var p=r[q];for(n=0,o=p.slice();n<o.length;n++){var s=o[n];if(s.res!=null&&f.mutatedParts)if(e&&!s.dirty){l=Object.isFrozen(s.res);l=Pd(s.res,s.req,m,k,s,l);s.dirty?(A(p,s),s.subscribers.forEach(function(a){return h.add(a)})):l!==s.res&&(s.res=l,s.promise=K.resolve({result:l}))}else s.dirty&&A(p,s),s.subscribers.forEach(function(a){return h.add(a)})}}}}}h.forEach(function(a){return a()})}}};f.addEventListener("abort",h(!1),{signal:e});f.addEventListener("error",h(!1),{signal:e});f.addEventListener("complete",h(!0),{signal:e})}return f},table:function(c){var e=a.table(c),f=e.schema.primaryKey,g=d(d({},e),{mutate:function(a){var g=J.trans;if(f.outbound||g.db._options.cache==="disabled"||g.explicit)return e.mutate(a);var h=od["idb://".concat(b,"/").concat(c)];if(!h)return e.mutate(a);g=e.mutate(a);(a.type==="add"||a.type==="put")&&(a.values.length>=50||Cd(f,a).some(function(a){return a==null}))?g.then(function(b){var c=d(d({},a),{values:a.values.map(function(a,c){var e;e=((e=f.keyPath)===null||e===void 0?void 0:e.includes("."))?z(a):d({},a);x(e,f.keyPath,b.results[c]);return e})});c=Ld(h,c,b);h.optimisticOps.push(c);queueMicrotask(function(){return a.mutatedParts&&rd(a.mutatedParts)})}):(h.optimisticOps.push(a),a.mutatedParts&&rd(a.mutatedParts),g.then(function(b){if(b.numFailures>0){A(h.optimisticOps,a);b=Ld(h,a,b);b&&h.optimisticOps.push(b);a.mutatedParts&&rd(a.mutatedParts)}}),g["catch"](function(){A(h.optimisticOps,a),a.mutatedParts&&rd(a.mutatedParts)}));return g},query:function(a){var d;if(!Hd(J,e)||!Id("query",a))return e.query(a);var f=((d=J.trans)===null||d===void 0?void 0:d.db._options.cache)==="immutable";d=J;var g=d.requery;d=d.signal;var h=Ud(b,c,"query",a),i=h[0],j=h[1],k=h[2],l=h[3];if(i&&j)i.obsSet=a.obsSet;else{h=e.query(a).then(function(a){var b=a.result;i&&(i.res=b);if(f){for(var c=0,d=b.length;c<d;++c)Object.freeze(b[c]);Object.freeze(b)}else a.result=z(b);return a})["catch"](function(a){l&&i&&A(l,i);return Promise.reject(a)});i={obsSet:a.obsSet,promise:h,subscribers:new Set(),type:"query",req:a,dirty:!1};l?l.push(i):(l=[i],k||(k=od["idb://".concat(b,"/").concat(c)]={queries:{query:{},count:{}},objs:new Map(),optimisticOps:[],unsignaledParts:{}}),k.queries.query[a.query.index.name||""]=l)}Vd(i,l,g,d);return i.promise.then(function(b){return{result:Pd(b.result,a,k===null||k===void 0?void 0:k.optimisticOps,e,i,f)}})}});return g}});return c}};function Yd(a,b){return new Proxy(a,{get:function(a,c,d){return c==="db"?b:Reflect.get(a,c,d)}})}var Y=function(){function a(b,c){var e=this;this._middlewares={};this.verno=0;var f=a.dependencies;this._options=c=d({addons:a.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},c);this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange};f=c.addons;this._dbSchema={};this._versions=[];this._storeNames=[];this._allTables={};this.idbdb=null;this._novip=this;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:E,dbReadyPromise:null,cancelOpen:E,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};g.dbReadyPromise=new K(function(a){g.dbReadyResolve=a});g.openCanceller=new K(function(a,b){g.cancelOpen=b});this._state=g;this.name=b;this.on=Pb(this,"populate","blocked","versionchange","close",{ready:[Ga,E]});this.on.ready.subscribe=u(this.on.ready.subscribe,function(b){return function(c,d){a.vip(function(){var a=e._state;if(a.openComplete)a.dbOpenError||K.resolve().then(c),d&&b(c);else if(a.onReadyBeingFired)a.onReadyBeingFired.push(c),d&&b(c);else{b(c);var f=e;d||b(function a(){f.on.ready.unsubscribe(c),f.on.ready.unsubscribe(a)})}})}});this.Collection=cc(this);this.Table=Rb(this);this.Transaction=rc(this);this.Version=Yc(this);this.WhereClause=mc(this);this.on("versionchange",function(a){a.newVersion>0?!1:!1,e.close({disableAutoOpen:!1})});this.on("blocked",function(a){!a.newVersion||a.newVersion<a.oldVersion?!1:!1});this._maxKey=wc(c.IDBKeyRange);this._createTransaction=function(a,b,c,d){return new e.Transaction(a,b,c,e._options.chromeTransactionDurability,d)};this._fireOnBlocked=function(a){e.on("blocked").fire(a),Cb.filter(function(a){return a.name===e.name&&a!==e&&!a._state.vcFired}).map(function(b){return b.on("versionchange").fire(a)})};this.use(Gd);this.use(Xd);this.use(Jd);this.use(Ad);this.use(Dd);var h=new Proxy(this,{get:function(a,b,c){if(b==="_vip")return!0;if(b==="table")return function(a){return Yd(e.table(a),h)};var d=Reflect.get(a,b,c);if(d instanceof Ob)return Yd(d,h);if(b==="tables")return d.map(function(a){return Yd(a,h)});return b==="_createTransaction"?function(){var a=d.apply(this,arguments);return Yd(a,h)}:d}});this.vip=h;f.forEach(function(a){return a(e)})}a.prototype.version=function(a){if(isNaN(a)||a<.1)throw new D.Type("Given version is not a positive number");a=Math.round(a*10)/10;if(this.idbdb||this._state.isBeingOpened)throw new D.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var b=this._versions,c=b.filter(function(b){return b._cfg.version===a})[0];if(c)return c;c=new this.Version(a);b.push(c);b.sort(Ic);c.stores({});this._state.autoSchema=!1;return c};a.prototype._whenReady=function(a){var b=this;return this.idbdb&&(this._state.openComplete||J.letThrough||this._vip)?a():new K(function(a,c){if(b._state.openComplete)return c(new D.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._state.autoOpen){c(new D.DatabaseClosed());return}b.open()["catch"](E)}b._state.dbReadyPromise.then(a,c)}).then(a)};a.prototype.use=function(a){var b=a.stack,c=a.create,d=a.level;a=a.name;a&&this.unuse({stack:b,name:a});var e=this._middlewares[b]||(this._middlewares[b]=[]);e.push({stack:b,create:c,level:d==null?10:d,name:a});e.sort(function(a,b){return a.level-b.level});return this};a.prototype.unuse=function(a){var b=a.stack,c=a.name,d=a.create;b&&this._middlewares[b]&&(this._middlewares[b]=this._middlewares[b].filter(function(a){return d?a.create!==d:c?a.name!==c:!1}));return this};a.prototype.open=function(){var a=this;return vb(I,function(){return ud(a)})};a.prototype._close=function(){var a=this._state,b=Cb.indexOf(this);b>=0&&Cb.splice(b,1);if(this.idbdb){try{this.idbdb.close()}catch(a){}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new K(function(b){a.dbReadyResolve=b}),a.openCanceller=new K(function(b,c){a.cancelOpen=c}))};a.prototype.close=function(a){a=a===void 0?{disableAutoOpen:!0}:a;a=a.disableAutoOpen;var b=this._state;a?(b.isBeingOpened&&b.cancelOpen(new D.DatabaseClosed()),this._close(),b.autoOpen=!1,b.dbOpenError=new D.DatabaseClosed()):(this._close(),b.autoOpen=this._options.autoOpen||b.isBeingOpened,b.openComplete=!1,b.dbOpenError=null)};a.prototype["delete"]=function(a){var b=this;a===void 0&&(a={disableAutoOpen:!0});var c=arguments.length>0&&typeof arguments[0]!=="object",d=this._state;return new K(function(e,f){var g=function(){b.close(a);var c=b._deps.indexedDB.deleteDatabase(b.name);c.onsuccess=L(function(){cd(b._deps,b.name),e()});c.onerror=V(f);c.onblocked=b._fireOnBlocked};if(c)throw new D.InvalidArgument("Invalid closeOptions argument to db.delete()");d.isBeingOpened?d.dbReadyPromise.then(g):g()})};a.prototype.backendDB=function(){return this.idbdb};a.prototype.isOpen=function(){return this.idbdb!==null};a.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"};a.prototype.hasFailed=function(){return this._state.dbOpenError!==null};a.prototype.dynamicallyOpened=function(){return this._state.autoSchema};Object.defineProperty(a.prototype,"tables",{get:function(){var a=this;return g(this._allTables).map(function(b){return a._allTables[b]})},enumerable:!1,configurable:!0});a.prototype.transaction=function(){var a=wd.apply(this,arguments);return this._transaction.apply(this,a)};a.prototype._transaction=function(a,b,c){var d=this,e=J.trans;(!e||e.db!==this||a.indexOf("!")!==-1)&&(e=null);var f=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");var g,h;try{h=b.map(function(a){a=a instanceof d.Table?a.name:a;if(typeof a!=="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return a});if(a=="r"||a===Eb)g=Eb;else if(a=="rw"||a==Fb)g=Fb;else throw new D.InvalidArgument("Invalid transaction mode: "+a);if(e){if(e.mode===Eb&&g===Fb)if(f)e=null;else throw new D.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");e&&h.forEach(function(a){if(e&&e.storeNames.indexOf(a)===-1)if(f)e=null;else throw new D.SubTransaction("Table "+a+" not included in parent transaction.")});f&&e&&!e.active&&(e=null)}}catch(a){return e?e._promise(null,function(b,c){c(a)}):Q(a)}var i=xd.bind(null,this,g,h,e,c);return e?e._promise(g,i,"lock"):J.trans?vb(J.transless,function(){return d._whenReady(i)}):this._whenReady(i)};a.prototype.table=function(a){if(!l(this._allTables,a))throw new D.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]};return a}(),Zd=typeof Symbol!=="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",$d=function(){function a(a){this._subscribe=a}a.prototype.subscribe=function(a,b,c){return this._subscribe(!a||typeof a==="function"?{next:a,error:b,complete:c}:a)};a.prototype[Zd]=function(){return this};return a}(),ae;try{ae={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch(a){ae={indexedDB:null,IDBKeyRange:null}}function be(a){var b=!1,c,d=new $d(function(d){var e=qa(a);function f(b){var c=eb();try{e&&qb();b=N(a,b);e&&(b=b["finally"](O));return b}finally{c&&fb()}}var g=!1,h,i={},j={},k={get closed(){return g},unsubscribe:function(){if(g)return;g=!0;h&&h.abort();l&&W.storagemutated.unsubscribe(o)}};d.start&&d.start(k);var l=!1,m=function(){return xb(p)};function n(){return nd(j,i)}var o=function(a){md(i,a),n()&&m()},p=function(){if(g||!ae.indexedDB)return;i={};var e={};h&&h.abort();h=new AbortController();var k={subscr:e,signal:h.signal,requery:m,querier:a,trans:null},n=f(k);Promise.resolve(n).then(function(a){b=!0;c=a;if(g||k.signal.aborted)return;i={};j=e;!ia(j)&&!l&&(W(oc,o),l=!0);xb(function(){return!g&&d.next&&d.next(a)})},function(a){b=!1,["DatabaseClosedError","AbortError"].includes(a===null||a===void 0?void 0:a.name)||(g||xb(function(){if(g)return;d.error&&d.error(a)}))})};setTimeout(m,0);return k});d.hasValue=function(){return b};d.getValue=function(){return c};return d}var ce=Y;m(ce,d(d({},C),{"delete":function(a){a=new ce(a,{addons:[]});return a["delete"]()},exists:function(a){return new ce(a,{addons:[]}).open().then(function(a){a.close();return!0})["catch"]("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return ad(ce.dependencies).then(a)}catch(a){return Q(new D.MissingAPI())}},defineClass:function(){function a(a){i(this,a)}return a},ignoreTransaction:function(a){return J.trans?vb(J.transless,a):a()},vip:dd,async:function(a){return function(){try{var b=vd(a.apply(this,arguments));return!b||typeof b.then!=="function"?K.resolve(b):b}catch(a){return Q(a)}}},spawn:function(a,b,c){try{a=vd(a.apply(c,b||[]));return!a||typeof a.then!=="function"?K.resolve(a):a}catch(a){return Q(a)}},currentTransaction:{get:function(){return J.trans||null}},waitFor:function(a,b){a=K.resolve(typeof a==="function"?ce.ignoreTransaction(a):a).timeout(b||6e4);return J.trans?J.trans.waitFor(a):a},Promise:K,debug:{get:function(){return G},set:function(a){Ha(a)}},derive:p,extend:i,props:m,override:u,Events:Pb,on:W,liveQuery:be,extendObservabilitySet:md,getByKeyPath:w,setByKeyPath:x,delByKeyPath:ca,shallowClone:da,deepClone:z,getObjectDiff:Bd,cmp:S,asap:aa,minKey:Ab,addons:[],connections:Cb,errnames:wa,dependencies:ae,cache:od,semVer:Ka,version:Ka.split(".").map(function(a){return parseInt(a)}).reduce(function(a,b,c){return a+b/Math.pow(10,c*2)})}));ce.maxKey=wc(ce.dependencies.IDBKeyRange);typeof dispatchEvent!=="undefined"&&typeof addEventListener!=="undefined"&&(W(oc,function(a){if(!Z){a=new CustomEvent(pc,{detail:a});Z=!0;dispatchEvent(a);Z=!1}}),addEventListener(pc,function(a){a=a.detail;Z||de(a)}));function de(a){var b=Z;try{Z=!0,W.storagemutated.fire(a),sd(a,!0)}finally{Z=b}}var Z=!1,$,ee=function(){};typeof BroadcastChannel!=="undefined"&&(ee=function(){$=new BroadcastChannel(pc),$.onmessage=function(a){return a.data&&de(a.data)}},ee(),typeof $.unref==="function"&&$.unref(),W(oc,function(a){Z||$.postMessage(a)}));typeof addEventListener!=="undefined"&&(addEventListener("pagehide",function(a){if(!Y.disableBfCache&&a.persisted){G&&!1;$===null||$===void 0?void 0:$.close();for(var a=0,b=Cb;a<b.length;a++){var c=b[a];c.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(a){!Y.disableBfCache&&a.persisted&&(G&&!1,ee(),de({all:new X(-Infinity,[[]])}))}));function fe(a,b){return new $b({replacePrefix:[a,b]})}K.rejectionMapper=za;Ha(G);H=Object.freeze({__proto__:null,Dexie:Y,liveQuery:be,Entity:Jb,cmp:S,PropModSymbol:y,PropModification:$b,replacePrefix:fe,"default":Y,RangeSet:X,mergeRanges:hd,rangesOverlap:id});d(Y,H,{"default":Y});return Y})}var j=!1;function k(){j||(j=!0,i());return h.exports}function b(a){switch(a){case void 0:return k()}}e.exports=b}),null);
__d("dexie_maw-next",["dexie-4.0.1"],(function(a,b,c,d,e,f){e.exports=b("dexie-4.0.1")()}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("minisearch-3.0.2",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){(function(b,c){typeof g==="object"&&typeof h!=="undefined"?h.exports=c():(b=typeof globalThis!=="undefined"?globalThis:b||self,b.MiniSearch=c())})(this,function(){var a=function(){a=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return a.apply(this,arguments)};function b(a){var b=typeof Symbol==="function"&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&typeof a.length==="number")return{next:function(){a&&d>=a.length&&(a=void 0);return{value:a&&a[d++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(a,b){var c=typeof Symbol==="function"&&a[Symbol.iterator];if(!c)return a;a=c.call(a);var d,e=[],f;try{while((b===void 0||b-->0)&&!(d=a.next()).done)e.push(d.value)}catch(a){f={error:a}}finally{try{d&&!d.done&&(c=a["return"])&&c.call(a)}finally{if(f)throw f.error}}return e}function d(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(c(arguments[b]));return a}var e="ENTRIES",f="KEYS",g="VALUES",h="",i=function(){function a(a,b){var c=a._tree,d=Object.keys(c);this.set=a;this._type=b;this._path=d.length>0?[{node:c,keys:d}]:[]}a.prototype.next=function(){var a=this.dive();this.backtrack();return a};a.prototype.dive=function(){if(this._path.length===0)return{done:!0,value:void 0};var a=j(this._path),b=a.node;a=a.keys;if(j(a)===h)return{done:!1,value:this.result()};this._path.push({node:b[j(a)],keys:Object.keys(b[j(a)])});return this.dive()};a.prototype.backtrack=function(){if(this._path.length===0)return;j(this._path).keys.pop();if(j(this._path).keys.length>0)return;this._path.pop();this.backtrack()};a.prototype.key=function(){return this.set._prefix+this._path.map(function(a){a=a.keys;return j(a)}).filter(function(a){return a!==h}).join("")};a.prototype.value=function(){return j(this._path).node[h]};a.prototype.result=function(){if(this._type===g)return this.value();return this._type===f?this.key():[this.key(),this.value()]};a.prototype[Symbol.iterator]=function(){return this};return a}(),j=function(a){return a[a.length-1]},k=0,l=1,m=2,n=3,o=function(a,b,d){var e=[{distance:0,i:0,key:"",node:a}],f={},g=[];a=function(){var a=e.pop(),i=a.node,j=a.distance,k=a.key,l=a.i,m=a.edit;Object.keys(i).forEach(function(n){if(n===h){var o=j+(b.length-l),a=c(f[k]||[null,Infinity],2);a=a[1];o<=d&&o<a&&(f[k]=[i[n],o])}else p(b,n,d-j,l,m,g).forEach(function(a){var c=a.distance,b=a.i;a=a.edit;e.push({node:i[n],distance:j+c,key:k+n,i:b,edit:a})})})};while(e.length>0)a();return f},p=function(a,b,c,d,e,f){f.push({distance:0,ia:d,ib:0,edit:e});d=[];while(f.length>0){e=f.pop();var g=e.distance,h=e.ia,i=e.ib;e=e.edit;if(i===b.length){d.push({distance:g,i:h,edit:e});continue}if(a[h]===b[i])f.push({distance:g,ia:h+1,ib:i+1,edit:k});else{if(g>=c)continue;e!==m&&f.push({distance:g+1,ia:h,ib:i+1,edit:n});h<a.length&&(e!==n&&f.push({distance:g+1,ia:h+1,ib:i,edit:m}),e!==n&&e!==m&&f.push({distance:g+1,ia:h+1,ib:i+1,edit:l}))}}return d},q=function(){function a(a,b){a===void 0&&(a={}),b===void 0&&(b=""),this._tree=a,this._prefix=b}a.prototype.atPrefix=function(d){var b;if(!d.startsWith(this._prefix))throw new Error("Mismatched prefix");var e=c(r(this._tree,d.slice(this._prefix.length)),2),f=e[0];e=e[1];if(f===void 0){e=c(y(e),2);var g=e[0],i=e[1];e=Object.keys(g).find(function(a){return a!==h&&a.startsWith(i)});if(e!==void 0)return new a((b={},b[e.slice(i.length)]=g[e],b),d)}return new a(f||{},d)};a.prototype.clear=function(){delete this._size,this._tree={}};a.prototype["delete"]=function(a){delete this._size;return v(this._tree,a)};a.prototype.entries=function(){return new i(this,e)};a.prototype.forEach=function(d){var e,a;try{for(var f=b(this),g=f.next();!g.done;g=f.next()){var h=c(g.value,2),i=h[0];h=h[1];d(i,h,this)}}catch(a){e={error:a}}finally{try{g&&!g.done&&(a=f["return"])&&a.call(f)}finally{if(e)throw e.error}}};a.prototype.fuzzyGet=function(a,b){return o(this._tree,a,b)};a.prototype.get=function(a){a=s(this._tree,a);return a!==void 0?a[h]:void 0};a.prototype.has=function(a){a=s(this._tree,a);return a!==void 0&&a.hasOwnProperty(h)};a.prototype.keys=function(){return new i(this,f)};a.prototype.set=function(a,b){if(typeof a!=="string")throw new Error("key must be a string");delete this._size;a=t(this._tree,a);a[h]=b;return this};Object.defineProperty(a.prototype,"size",{get:function(){var a=this;if(this._size)return this._size;this._size=0;this.forEach(function(){a._size+=1});return this._size},enumerable:!1,configurable:!0});a.prototype.update=function(a,b){if(typeof a!=="string")throw new Error("key must be a string");delete this._size;a=t(this._tree,a);a[h]=b(a[h]);return this};a.prototype.values=function(){return new i(this,g)};a.prototype[Symbol.iterator]=function(){return this.entries()};a.from=function(e){var f,d,g=new a();try{for(var h=b(e),i=h.next();!i.done;i=h.next()){e=c(i.value,2);var j=e[0];e=e[1];g.set(j,e)}}catch(a){f={error:a}}finally{try{i&&!i.done&&(d=h["return"])&&d.call(h)}finally{if(f)throw f.error}}return g};a.fromObject=function(b){return a.from(Object.entries(b))};return a}(),r=function(a,b,c){c===void 0&&(c=[]);if(b.length===0||a==null)return[a,c];var d=Object.keys(a).find(function(a){return a!==h&&b.startsWith(a)});if(d===void 0){c.push([a,b]);return r(void 0,"",c)}c.push([a,d]);return r(a[d],b.slice(d.length),c)},s=function(a,b){if(b.length===0||a==null)return a;var c=Object.keys(a).find(function(a){return a!==h&&b.startsWith(a)});return c===void 0?void 0:s(a[c],b.slice(c.length))},t=function(b,c){var a;if(c.length===0||b==null)return b;var d=Object.keys(b).find(function(a){return a!==h&&c.startsWith(a)});if(d===void 0){var e=Object.keys(b).find(function(a){return a!==h&&a.startsWith(c[0])});if(e===void 0)b[c]={};else{var f=u(c,e);b[f]=(a={},a[e.slice(f.length)]=b[e],a);delete b[e];return t(b[f],c.slice(f.length))}return b[c]}return t(b[d],c.slice(d.length))},u=function(a,b,c,d,e){c===void 0&&(c=0);d===void 0&&(d=Math.min(a.length,b.length));e===void 0&&(e="");if(c>=d)return e;return a[c]!==b[c]?e:u(a,b,c+1,d,e+a[c])},v=function(a,b){a=c(r(a,b),2);b=a[0];a=a[1];if(b===void 0)return;delete b[h];var d=Object.keys(b);d.length===0&&w(a);d.length===1&&x(a,d[0],b[d[0]])},w=function(b){if(b.length===0)return;var a=c(y(b),2),d=a[0];a=a[1];delete d[a];Object.keys(d).length===0&&w(b.slice(0,-1))},x=function(a,b,d){if(a.length===0)return;a=c(y(a),2);var e=a[0];a=a[1];e[a+b]=d;delete e[a]},y=function(a){return a[a.length-1]},z,A="or",B="and",C=function(){function b(b){if((b===null||b===void 0?void 0:b.fields)==null)throw new Error('MiniSearch: option "fields" must be provided');this._options=a(a(a({},J),b),{searchOptions:a(a({},K),b.searchOptions||{})});this._index=new q();this._documentCount=0;this._documentIds={};this._fieldIds={};this._fieldLength={};this._averageFieldLength={};this._nextId=0;this._storedFields={};this.addFields(this._options.fields)}b.prototype.add=function(b){var c=this,a=this._options,d=a.extractField,e=a.tokenize,f=a.processTerm,g=a.fields;a=a.idField;var h=d(b,a);if(h==null)throw new Error('MiniSearch: document does not have ID field "'+a+'"');var i=this.addDocumentId(h);this.saveStoredFields(i,b);g.forEach(function(a){var g=d(b,a);if(g==null)return;g=e(g.toString(),a);c.addFieldLength(i,c._fieldIds[a],c.documentCount-1,g.length);g.forEach(function(b){b=f(b,a);b&&c.addTerm(c._fieldIds[a],i,b)})})};b.prototype.addAll=function(a){var b=this;a.forEach(function(a){return b.add(a)})};b.prototype.addAllAsync=function(a,b){var c=this;b===void 0&&(b={});b=b.chunkSize;var d=b===void 0?10:b;b={chunk:[],promise:Promise.resolve()};a=a.reduce(function(a,e,f){var b=a.chunk;a=a.promise;b.push(e);if((f+1)%d===0)return{chunk:[],promise:a.then(function(){return new Promise(function(a){return setTimeout(a,0)})}).then(function(){return c.addAll(b)})};else return{chunk:b,promise:a}},b);var e=a.chunk;b=a.promise;return b.then(function(){return c.addAll(e)})};b.prototype.remove=function(b){var d=this,a=this._options,e=a.tokenize,f=a.processTerm,g=a.extractField,h=a.fields;a=a.idField;var i=g(b,a);if(i==null)throw new Error('MiniSearch: document does not have ID field "'+a+'"');a=c(Object.entries(this._documentIds).find(function(a){a=c(a,2);a[0];a=a[1];return i===a})||[],1);var j=a[0];if(j==null)throw new Error("MiniSearch: cannot remove document with ID "+i+": it is not in the index");h.forEach(function(a){var c=g(b,a);if(c==null)return;c=e(c.toString(),a);c.forEach(function(b){b=f(b,a);b&&d.removeTerm(d._fieldIds[a],j,b)})});delete this._storedFields[j];delete this._documentIds[j];this._documentCount-=1};b.prototype.removeAll=function(a){var b=this;if(a)a.forEach(function(a){return b.remove(a)});else if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");else this._index=new q(),this._documentCount=0,this._documentIds={},this._fieldLength={},this._averageFieldLength={},this._storedFields={},this._nextId=0};b.prototype.search=function(d,e){var f=this;e===void 0&&(e={});var b=this._options,g=b.tokenize,h=b.processTerm;b=b.searchOptions;var i=a(a({tokenize:g,processTerm:h},b),e);g=i.tokenize;var j=i.processTerm;h=g(d).map(function(a){return j(a)}).filter(function(a){return!!a});b=h.map(H(i));e=b.map(function(a){return f.executeQuery(a,i)});g=this.combineResults(e,i.combineWith);return Object.entries(g).reduce(function(d,a){a=c(a,2);var e=a[0];a=a[1];var b=a.score,g=a.match;a=a.terms;a={id:f._documentIds[e],terms:I(a),score:b,match:g};Object.assign(a,f._storedFields[e]);(i.filter==null||i.filter(a))&&d.push(a);return d},[]).sort(function(a,b){a=a.score;b=b.score;return a<b?1:-1})};b.prototype.autoSuggest=function(b,d){d===void 0&&(d={});d=a(a({},L),d);b=this.search(b,d).reduce(function(c,a){var b=a.score;a=a.terms;var d=a.join(" ");c[d]==null?c[d]={score:b,terms:a,count:1}:(c[d].score+=b,c[d].count+=1);return c},{});return Object.entries(b).map(function(a){a=c(a,2);var d=a[0];a=a[1];var b=a.score,e=a.terms;a=a.count;return{suggestion:d,terms:e,score:b/a}}).sort(function(a,b){a=a.score;b=b.score;return a<b?1:-1})};Object.defineProperty(b.prototype,"documentCount",{get:function(){return this._documentCount},enumerable:!1,configurable:!0});b.loadJSON=function(a,c){if(c==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return b.loadJS(JSON.parse(a),c)};b.getDefault=function(a){if(J.hasOwnProperty(a))return D(J,a);else throw new Error('MiniSearch: unknown option "'+a+'"')};b.loadJS=function(a,c){var d=a.index,e=a.documentCount,f=a.nextId,g=a.documentIds,h=a.fieldIds,i=a.fieldLength,j=a.averageFieldLength;a=a.storedFields;c=new b(c);c._index=new q(d._tree,d._prefix);c._documentCount=e;c._nextId=f;c._documentIds=g;c._fieldIds=h;c._fieldLength=i;c._averageFieldLength=j;c._fieldIds=h;c._storedFields=a||{};return c};b.prototype.executeQuery=function(b,d){var e=this;d=a(a({},this._options.searchOptions),d);var f=(d.fields||this._options.fields).reduce(function(c,d){var b;return a(a({},c),(b={},b[d]=D(c,d)||1,b))},d.boost||{}),g=d.boostDocument;d=d.weights;d=a(a({},K.weights),d);var h=d.fuzzy,i=d.prefix;d=this.termResults(b.term,f,g,this._index.get(b.term));if(!b.fuzzy&&!b.prefix)return d;var j=[d];b.prefix&&this._index.atPrefix(b.term).forEach(function(a,c){var d=.3*(a.length-b.term.length)/a.length;j.push(e.termResults(a,f,g,c,i,d))});if(b.fuzzy){d=b.fuzzy===!0?.2:b.fuzzy;d=d<1?Math.round(b.term.length*d):d;Object.entries(this._index.fuzzyGet(b.term,d)).forEach(function(a){a=c(a,2);var b=a[0];a=c(a[1],2);var d=a[0];a=a[1];a=a/b.length;j.push(e.termResults(b,f,g,d,h,a))})}return j.reduce(E[A],{})};b.prototype.combineResults=function(a,b){b===void 0&&(b=A);if(a.length===0)return{};b=b.toLowerCase();return a.reduce(E[b],null)||{}};b.prototype.toJSON=function(){return{index:this._index,documentCount:this._documentCount,nextId:this._nextId,documentIds:this._documentIds,fieldIds:this._fieldIds,fieldLength:this._fieldLength,averageFieldLength:this._averageFieldLength,storedFields:this._storedFields}};b.prototype.termResults=function(a,b,d,e,f,g){var h=this;g===void 0&&(g=0);return e==null?{}:Object.entries(b).reduce(function(f,b){b=c(b,2);var i=b[0],j=b[1],k=h._fieldIds[i];b=e[k]||{ds:{}};var l=b.df;b=b.ds;Object.entries(b).forEach(function(b){b=c(b,2);var e=b[0];b=b[1];var m=d?d(h._documentIds[e],a):1;if(!m)return;var n=h._fieldLength[e][k]/h._averageFieldLength[k];f[e]=f[e]||{score:0,match:{},terms:[]};f[e].terms.push(a);f[e].match[a]=D(f[e].match,a)||[];f[e].score+=m*G(b,l,h._documentCount,n,j,g);f[e].match[a].push(i)});return f},{})};b.prototype.addTerm=function(b,c,d){this._index.update(d,function(d){d=d||{};var e=d[b]||{df:0,ds:{}};e.ds[c]==null&&(e.df+=1);e.ds[c]=(e.ds[c]||0)+1;return a(a({},d),(d={},d[b]=e,d))})};b.prototype.removeTerm=function(b,c,d){var e=this;if(!this._index.has(d)){this.warnDocumentChanged(c,b,d);return}this._index.update(d,function(f){var g=f[b];if(g==null||g.ds[c]==null){e.warnDocumentChanged(c,b,d);return f}if(g.ds[c]<=1){if(g.df<=1){delete f[b];return f}g.df-=1}if(g.ds[c]<=1){delete g.ds[c];return f}g.ds[c]-=1;return a(a({},f),(f={},f[b]=g,f))});Object.keys(this._index.get(d)).length===0&&this._index["delete"](d)};b.prototype.warnDocumentChanged=function(a,b,d){if(console==null||emptyFunction==null)return;a=Object.entries(this._fieldIds).find(function(a){a=c(a,2);a[0];a=a[1];return a===b})[0]};b.prototype.addDocumentId=function(a){var b=this._nextId.toString(36);this._documentIds[b]=a;this._documentCount+=1;this._nextId+=1;return b};b.prototype.addFields=function(a){var b=this;a.forEach(function(a,c){b._fieldIds[a]=c})};b.prototype.addFieldLength=function(a,b,c,d){this._averageFieldLength[b]=this._averageFieldLength[b]||0;var e=this._averageFieldLength[b]*c+d;this._fieldLength[a]=this._fieldLength[a]||{};this._fieldLength[a][b]=d;this._averageFieldLength[b]=e/(c+1)};b.prototype.saveStoredFields=function(b,c){var d=this,a=this._options,e=a.storeFields,f=a.extractField;if(e==null||e.length===0)return;this._storedFields[b]=this._storedFields[b]||{};e.forEach(function(a){var e=f(c,a);if(e===void 0)return;d._storedFields[b][a]=e})};return b}(),D=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)?a[b]:void 0},E=(z={},z[A]=function(a,b){return Object.entries(b).reduce(function(e,a){a=c(a,2);var f=a[0];a=a[1];var b=a.score,g=a.match;a=a.terms;e[f]==null?e[f]={score:b,match:g,terms:a}:(e[f].score+=b,e[f].score*=1.5,(b=e[f].terms).push.apply(b,d(a)),Object.assign(e[f].match,g));return e},a||{})},z[B]=function(b,e){return b==null?e:Object.entries(e).reduce(function(g,e){e=c(e,2);var h=e[0];e=e[1];var f=e.score,i=e.match;e=e.terms;if(b[h]===void 0)return g;g[h]=g[h]||{};g[h].score=b[h].score+f;g[h].match=a(a({},b[h].match),i);g[h].terms=d(b[h].terms,e);return g},{})},z),F=function(a,b,c){return a*Math.log(c/b)},G=function(a,b,c,d,e,f){e=e/(1+.333*e*f);return e*F(a,b,c)/d},H=function(a){return function(b,c,d){var e=typeof a.fuzzy==="function"?a.fuzzy(b,c,d):a.fuzzy||!1;c=typeof a.prefix==="function"?a.prefix(b,c,d):a.prefix===!0;return{term:b,fuzzy:e,prefix:c}}},I=function(a){return a.filter(function(b,c,a){return a.indexOf(b)===c})},J={idField:"id",extractField:function(a,b){return a[b]},tokenize:function(a,b){return a.split(M)},processTerm:function(a,b){return a.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[]},K={combineWith:A,prefix:!1,fuzzy:!1,boost:{},weights:{fuzzy:.9,prefix:.75}},L={prefix:function(a,b,c){return b===c.length-1}},M=/[\n\r -#%-*,-/:;?@[-\]_{}\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u;return C})}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
__d("minisearch",["minisearch-3.0.2"],(function(a,b,c,d,e,f){e.exports=b("minisearch-3.0.2")()}),null);/*FB_PKG_DELIM*/
__d("EBLSResignCdnUrlDeferred",["gkx","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("EBLSResignCdnUrl").__setRef("EBLSResignCdnUrlDeferred");function a(a){return h.load().then(function(b){if(c("gkx")("12896"))return b.ebdbResignCdnUrlWithGraphQL(a);else return b.DEPRECATED_eblsResignCdnUrlWithGraphQL(a)})}g.eblsResignCdnUrlWithGraphQL=a}),98);
__d("EncryptedBackupsDYIFileUtils",["FBLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h="media";f="messages.zip";function i(){if(navigator.storage!=null&&navigator.storage.getDirectory!=null)return navigator.storage.getDirectory();throw c("FBLogger")("wmi_eb").mustfixThrow("Storage management API is not supported. Please try one of the supported browsers.")}function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield i());return a.getDirectoryHandle(h,{create:!0})});return j.apply(this,arguments)}function d(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){a=(yield a.getFileHandle(b,{create:!0}));try{b=(yield a.createSyncAccessHandle());b.write(d);b.flush();b.close()}catch(e){if(e instanceof Error){if(e instanceof TypeError)try{b=(yield a.createWritable());yield b.write(d);yield b.close();return}catch(a){if(a instanceof Error){if(a instanceof TypeError)throw c("FBLogger")("wmi_eb").mustfixThrow("Write operation is not supported. Please try one of the supported browsers.");throw c("FBLogger")("wmi_eb").mustfixThrow("Failed to write using writable: %e",a.message)}throw a}throw c("FBLogger")("wmi_eb").mustfixThrow("Failed to write using sync access handle: %s",e.message)}throw e}});return k.apply(this,arguments)}function e(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield a.getFileHandle(b));try{var d=(yield a.createSyncAccessHandle()),e=new ArrayBuffer(d.getSize());d.read(e);d.close();return new Blob([e])}catch(d){if(d instanceof Error){if(d instanceof TypeError)return a.getFile();throw c("FBLogger")("wmi_eb").mustfixThrow("Failed to read file %s, %s",b,d.message)}throw d}});return l.apply(this,arguments)}g.DyiMediaFolder=h;g.DyiArchiveFilename=f;g.getRootFolderHandle=i;g.getMediaFolderHandle=a;g.writeFile=d;g.readFile=e}),98);
__d("MAWThreadKeyUtils",["I64","vulture"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return(h||(h=d("I64"))).to_string(a)}function b(a){return a}function e(a){c("vulture")("9DZDuAw4Bd5gY57CNHpZSR8vpLc=");return a}function f(a){return(h||(h=d("I64"))).of_string(a)}function i(a){return a}g.stringThreadKeyFromThreadKey=a;g.toStringThreadKey=b;g.stringThreadKeyFromString=e;g.stringThreadKeyToI64=f;g.stringThreadKeyToString=i}),98);
__d("EncryptedBackupsDYIGenerateThreadMetadata",["CurrentUser","EncryptedBackupsDYISingleton","I64","IGDWebUtils","LSMessagingThreadTypeUtil","MAWThreadKeyUtils","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(){return d("IGDWebUtils").isOnInstagramWeb()?(k||(k=d("I64"))).of_string(c("CurrentUser").getEIMU()):(k||(k=d("I64"))).of_string(c("CurrentUser").getAccountID())}function m(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(d("MAWThreadKeyUtils").stringThreadKeyToI64(b)))}function n(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(b))}function a(a,b){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.contacts).filter(function(a){return b.has((k||(k=d("I64"))).to_string(a.id))}))}function o(a,b){var c;return(c=d("ReQL")).toArrayAsync(c.leftJoin(c.fromTableAscending(a.tables.participants,["contactId"]).getKeyRange(b),c.fromTableAscending(a.tables.contacts,["name"])))}function p(a){return d("LSMessagingThreadTypeUtil").isOneToOne(a)||d("LSMessagingThreadTypeUtil").isOpenOneToOne(a)}function q(a,b,c){if(c!=null&&c.trim()!=="")return c+"_"+b;switch(a.length){case 0:return"Thread_"+b;case 1:return a[0]+"_"+b;case 2:return a[0]+"and"+a[1]+"_"+b;case 3:return""+a[0]+a[1]+"and"+a[2]+"_"+b;case 4:return""+a[0]+a[1]+a[2]+"and1other_"+b;default:return""+a[0]+a[1]+a[2]+"and"+(a.length-3)+"others_"+b}}function r(a,b,c,d,e,f){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g){var i=[],j=[f];f=(yield m(c,a));if(f!=null)if(p(f.threadType)){var l=b.getThreadIdForThreadKey(a);if(l==null){b.getLogger().WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Cannot find thread id for thread key ",""])),a);return}l=(yield n(c,(k||(k=d("I64"))).of_string(l)));(l==null?void 0:l.id)!=null&&(l==null?void 0:l.name)!=null&&b.setContactNameForContactId((k||(k=d("I64"))).to_string(l.id),l.name);l=(l==null?void 0:l.name)||"Unknown User";i.push(l);j.push(l);b.setThreadMetaDataByThreadKey(a,j,q(i,g,f.threadName))}else{l=(yield o(c,f.threadKey));l.forEach(function(a){var c=a[0];a=a[1];(c==null?void 0:c.contactId)!=null&&(a==null?void 0:a.name)!=null&&b.setContactNameForContactId((k||(k=d("I64"))).to_string(c.contactId),a.name);if(!(k||(k=d("I64"))).equal(c.contactId,e)){c=(a==null?void 0:a.name)||"Unknown User";i.push(c);j.push(c)}});b.setThreadMetaDataByThreadKey(a,j,q(i,g,f.threadName))}else b.setThreadMetaDataByThreadKey(a,j,q(i,g))});return s.apply(this,arguments)}function e(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c,e=d("EncryptedBackupsDYISingleton").getSingleton(),f=e.getLogger(),g=(yield e.getDB()),h=(yield n(g,l())),m=(c=h==null?void 0:h.id)!=null?c:(k||(k=d("I64"))).zero,o=(c=h==null?void 0:h.name)!=null?c:"Me";e.setContactNameForContactId((k||(k=d("I64"))).to_string(m),o);return a.reduce(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){yield a;a=e.getThreadIdForThreadKey(b);a==null&&void f.WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Cannot find thread id for thread key ",""])),b);return r(b,e,g,m,o,c)});return function(b,c,d){return a.apply(this,arguments)}}(),(j||(j=b("Promise"))).resolve())});return t.apply(this,arguments)}g.getAllUnmappedContacts=a;g.EncryptedBackupsDYIGenerateThreadMetadata=e}),98);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("fflate-0.6.10",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){var a,b="";try{a={}.Worker}catch(a){}g["default"]=a?function(c,d,e,f,g){var h=!1,i=new a(c+b,{eval:!0}).on("error",function(a){return g(a,null)}).on("message",function(a){return g(null,a)}).on("exit",function(a){a&&!h&&g(new Error("exited with code "+a),null)});i.postMessage(e,f);i.terminate=function(){h=!0;return a.prototype.terminate.call(i)};return i}:function(a,b,c,d,e){setImmediate(function(){return e(new Error("async operations unsupported - update to Node 12+ (or Node 10-11 with the --experimental-worker CLI flag)"),null)});a=function(){};return{terminate:a,postMessage:a}}}var j=!1;function k(){j||(j=!0,i());return h.exports}var l={},m={exports:l};function n(){var a=k(),b=Uint8Array,c=Uint16Array,d=Uint32Array,e=new b([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),f=new b([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),g=new b([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=function(a,b){var e=new c(31);for(var f=0;f<31;++f)e[f]=b+=1<<a[f-1];a=new d(e[30]);for(var f=1;f<30;++f)for(b=e[f];b<e[f+1];++b)a[b]=b-e[f]<<5|f;return[e,a]},i=h(e,2),j=i[0],m=i[1];j[28]=258,m[258]=28;i=h(f,0);var n=i[0],o=i[1],p=new c(32768);for(h=0;h<32768;++h){i=(h&43690)>>>1|(h&21845)<<1;i=(i&52428)>>>2|(i&13107)<<2;i=(i&61680)>>>4|(i&3855)<<4;p[h]=((i&65280)>>>8|(i&255)<<8)>>>1}var q=function(a,b,d){var e=a.length,f=0,g=new c(b);for(;f<e;++f)++g[a[f]-1];var h=new c(b);for(f=0;f<b;++f)h[f]=h[f-1]+g[f-1]<<1;if(d){g=new c(1<<b);d=15-b;for(f=0;f<e;++f)if(a[f]){var i=f<<4|a[f],j=b-a[f],k=h[a[f]-1]++<<j;for(j=k|(1<<j)-1;k<=j;++k)g[p[k]>>>d]=i}}else{g=new c(e);for(f=0;f<e;++f)a[f]&&(g[f]=p[h[a[f]-1]++]>>>15-a[f])}return g},r=new b(288);for(h=0;h<144;++h)r[h]=8;for(h=144;h<256;++h)r[h]=9;for(h=256;h<280;++h)r[h]=7;for(h=280;h<288;++h)r[h]=8;var s=new b(32);for(h=0;h<32;++h)s[h]=5;var t=q(r,9,0),u=q(r,9,1),v=q(s,5,0),w=q(s,5,1),x=function(a){var b=a[0];for(var c=1;c<a.length;++c)a[c]>b&&(b=a[c]);return b},y=function(a,b,c){var d=b/8|0;return(a[d]|a[d+1]<<8)>>(b&7)&c},z=function(a,b){var c=b/8|0;return(a[c]|a[c+1]<<8|a[c+2]<<16)>>(b&7)},aa=function(a){return(a/8|0)+(a&7&&1)},A=function(a,e,f){(e==null||e<0)&&(e=0);(f==null||f>a.length)&&(f=a.length);var g=new(a instanceof c?c:a instanceof d?d:b)(f-e);g.set(a.subarray(e,f));return g},B=function(a,c,d){var h=a.length;if(!h||d&&!d.l&&h<5)return c||new b(0);var i=!c||d,k=!d||d.i;d||(d={});c||(c=new b(h*3));var l=function(a){var d=c.length;if(a>d){d=new b(Math.max(d*2,a));d.set(c);c=d}},m=d.f||0,o=d.p||0,p=d.b||0,r=d.l,s=d.d,t=d.m,v=d.n,B=h*8;do{if(!r){d.f=m=y(a,o,1);var C=y(a,o+1,3);o+=3;if(!C){var D=aa(o)+4,E=a[D-4]|a[D-3]<<8,F=D+E;if(F>h){if(k)throw"unexpected EOF";break}i&&l(p+E);c.set(a.subarray(D,F),p);d.b=p+=E,d.p=o=F*8;continue}else if(C==1)r=u,s=w,t=9,v=5;else if(C==2){E=y(a,o,31)+257;F=y(a,o+10,15)+4;C=E+y(a,o+5,31)+1;o+=14;var G=new b(C),H=new b(19);for(var I=0;I<F;++I)H[g[I]]=y(a,o+I*3,7);o+=F*3;F=x(H);var J=(1<<F)-1;H=q(H,F,1);for(var I=0;I<C;){F=H[y(a,o,J)];o+=F&15;var D=F>>>4;if(D<16)G[I++]=D;else{F=0;var K=0;D==16?(K=3+y(a,o,3),o+=2,F=G[I-1]):D==17?(K=3+y(a,o,7),o+=3):D==18&&(K=11+y(a,o,127),o+=7);while(K--)G[I++]=F}}D=G.subarray(0,E);K=G.subarray(E);t=x(D);v=x(K);r=q(D,t,1);s=q(K,v,1)}else throw"invalid block type";if(o>B){if(k)throw"unexpected EOF";break}}i&&l(p+131072);J=(1<<t)-1;H=(1<<v)-1;C=o;for(;;C=o){F=r[z(a,o)&J];G=F>>>4;o+=F&15;if(o>B){if(k)throw"unexpected EOF";break}if(!F)throw"invalid length/literal";if(G<256)c[p++]=G;else if(G==256){C=o,r=null;break}else{E=G-254;if(G>264){var I=G-257;D=e[I];E=y(a,o,(1<<D)-1)+j[I];o+=D}F=s[z(a,o)&H];G=F>>>4;if(!F)throw"invalid distance";o+=F&15;K=n[G];if(G>3){D=f[G];K+=z(a,o)&(1<<D)-1,o+=D}if(o>B){if(k)throw"unexpected EOF";break}i&&l(p+131072);F=p+E;for(;p<F;p+=4)c[p]=c[p-K],c[p+1]=c[p+1-K],c[p+2]=c[p+2-K],c[p+3]=c[p+3-K];p=F}}d.l=r,d.p=C,d.b=p;r&&(m=1,d.m=t,d.d=s,d.n=v)}while(!m);return p==c.length?c:A(c,0,p)},C=function(a,b,c){c<<=b&7;b=b/8|0;a[b]|=c;a[b+1]|=c>>>8},D=function(a,b,c){c<<=b&7;b=b/8|0;a[b]|=c;a[b+1]|=c>>>8;a[b+2]|=c>>>16},E=function(a,d){var e=[];for(var f=0;f<a.length;++f)a[f]&&e.push({s:f,f:a[f]});a=e.length;var g=e.slice();if(!a)return[L,0];if(a==1){var h=new b(e[0].s+1);h[e[0].s]=1;return[h,1]}e.sort(function(a,b){return a.f-b.f});e.push({s:-1,f:25001});h=e[0];var i=e[1],j=0,k=1,l=2;e[0]={s:-1,f:h.f+i.f,l:h,r:i};while(k!=a-1)h=e[e[j].f<e[l].f?j++:l++],i=e[j!=k&&e[j].f<e[l].f?j++:l++],e[k++]={s:-1,f:h.f+i.f,l:h,r:i};h=g[0].s;for(var f=1;f<a;++f)g[f].s>h&&(h=g[f].s);var m=new c(h+1);i=F(e[k-1],m,0);if(i>d){var f=0;j=0;l=i-d;h=1<<l;g.sort(function(a,b){return m[b.s]-m[a.s]||a.f-b.f});for(;f<a;++f){e=g[f].s;if(m[e]>d)j+=h-(1<<i-m[e]),m[e]=d;else break}j>>>=l;while(j>0){k=g[f].s;m[k]<d?j-=1<<d-m[k]++-1:++f}for(;f>=0&&j;--f){e=g[f].s;m[e]==d&&(--m[e],++j)}i=d}return[new b(m),i]},F=function(a,b,c){return a.s==-1?Math.max(F(a.l,b,c+1),F(a.r,b,c+1)):b[a.s]=c},G=function(a){var b=a.length;while(b&&!a[--b]);var d=new c(++b),e=0,f=a[0],g=1,h=function(a){d[e++]=a};for(var i=1;i<=b;++i)if(a[i]==f&&i!=b)++g;else{if(!f&&g>2){for(;g>138;g-=138)h(32754);g>2&&(h(g>10?g-11<<5|28690:g-3<<5|12305),g=0)}else if(g>3){h(f),--g;for(;g>6;g-=6)h(8304);g>2&&(h(g-3<<5|8208),g=0)}while(g--)h(f);g=1;f=a[i]}return[d.subarray(0,e),b]},H=function(a,b){var c=0;for(var d=0;d<b.length;++d)c+=a[d]*b[d];return c},I=function(a,b,c){var d=c.length;b=aa(b+2);a[b]=d&255;a[b+1]=d>>>8;a[b+2]=a[b]^255;a[b+3]=a[b+1]^255;for(var e=0;e<d;++e)a[b+e+4]=c[e];return(b+4+d)*8},J=function(a,b,d,h,i,j,k,l,m,n,o){C(b,o++,d);++i[256];d=E(i,15);var p=d[0];d=d[1];var u=E(j,15),w=u[0];u=u[1];var x=G(p),y=x[0];x=x[1];var z=G(w),aa=z[0];z=z[1];var A=new c(19);for(var B=0;B<y.length;++B)A[y[B]&31]++;for(var B=0;B<aa.length;++B)A[aa[B]&31]++;var F=E(A,7),J=F[0];F=F[1];var K=19;for(;K>4&&!J[g[K-1]];--K);var L=n+5<<3,M=H(i,r)+H(j,s)+k;i=H(i,p)+H(j,w)+k+14+3*K+H(A,J)+(2*A[16]+3*A[17]+7*A[18]);if(L<=M&&L<=i)return I(b,o,a.subarray(m,m+n));C(b,o,1+(i<M)),o+=2;if(i<M){j=q(p,d,0),k=p,A=q(w,u,0),L=w;a=q(J,F,0);C(b,o,x-257);C(b,o+5,z-1);C(b,o+10,K-4);o+=14;for(var B=0;B<K;++B)C(b,o+3*B,J[g[B]]);o+=3*K;m=[y,aa];for(n=0;n<2;++n){i=m[n];for(var B=0;B<i.length;++B){M=i[B]&31;C(b,o,a[M]),o+=J[M];M>15&&(C(b,o,i[B]>>>5&127),o+=i[B]>>>12)}}}else j=t,k=r,A=v,L=s;for(var B=0;B<l;++B)if(h[B]>255){M=h[B]>>>18&31;D(b,o,j[M+257]),o+=k[M+257];M>7&&(C(b,o,h[B]>>>23&31),o+=e[M]);d=h[B]&31;D(b,o,A[d]),o+=L[d];d>3&&(D(b,o,h[B]>>>5&8191),o+=f[d])}else D(b,o,j[h[B]]),o+=k[h[B]];D(b,o,j[256]);return o+k[256]},K=new d([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),L=new b(0),M=function(a,g,h,i,j,k){var l=a.length,n=new b(i+l+5*(1+Math.ceil(l/7e3))+j),p=n.subarray(i,n.length-j),q=0;if(!g||l<8)for(var r=0;r<=l;r+=65535){var s=r+65535;s<l?q=I(p,q,a.subarray(r,s)):(p[r]=k,q=I(p,q,a.subarray(r,l)))}else{s=K[g-1];g=s>>>13;s=s&8191;var t=(1<<h)-1,u=new c(32768),v=new c(t+1),w=Math.ceil(h/3),x=2*w;h=function(b){return(a[b]^a[b+1]<<w^a[b+2]<<x)&t};var y=new d(25e3),z=new c(288),B=new c(32),C=0,D=0,r=0,E=0,F=0,G=0;for(;r<l;++r){var H=h(r),M=r&32767,N=v[H];u[M]=N;v[H]=M;if(F<=r){var O=l-r;if((C>7e3||E>24576)&&O>423){q=J(a,p,0,y,z,B,D,E,G,r-G,q);E=C=D=0,G=r;for(var P=0;P<286;++P)z[P]=0;for(var P=0;P<30;++P)B[P]=0}var Q=2,R=0,ba=s,S=M-N&32767;if(O>2&&H==h(r-S)){H=Math.min(g,O)-1;var ca=Math.min(32767,r);O=Math.min(258,O);while(S<=ca&&--ba&&M!=N){if(a[r+Q]==a[r+Q-S]){var T=0;for(;T<O&&a[r+T]==a[r+T-S];++T);if(T>Q){Q=T,R=S;if(T>H)break;T=Math.min(S,T-2);var da=0;for(var P=0;P<T;++P){var U=r-S+P+32768&32767,V=u[U];V=U-V+32768&32767;V>da&&(da=V,N=U)}}}M=N,N=u[M];S+=M-N+32768&32767}}if(R){y[E++]=268435456|m[Q]<<18|o[R];V=m[Q]&31;U=o[R]&31;D+=e[V]+f[U];++z[257+V];++B[U];F=r+Q;++C}else y[E++]=a[r],++z[a[r]]}}q=J(a,p,k,y,z,B,D,E,G,r-G,q);!k&&q&7&&(q=I(p,q+1,L))}return A(n,0,i+aa(q)+j)},N=function(){var a=new Int32Array(256);for(var b=0;b<256;++b){var c=b,d=9;while(--d)c=(c&1&&-306674912)^c>>>1;a[b]=c}return a}(),O=function(){var a=-1;return{p:function(b){var c=a;for(var d=0;d<b.length;++d)c=N[c&255^b[d]]^c>>>8;a=c},d:function(){return~a}}},P=function(){var a=1,b=0;return{p:function(c){var d=a,e=b,f=c.length;for(var g=0;g!=f;){var h=Math.min(g+2655,f);for(;g<h;++g)e+=d+=c[g];d=(d&65535)+15*(d>>16),e=(e&65535)+15*(e>>16)}a=d,b=e},d:function(){a%=65521,b%=65521;return(a&255)<<24|a>>>8<<16|(b&255)<<8|b>>>8}}},Q=function(a,b,c,d,e){return M(a,b.level==null?6:b.level,b.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(a.length)))*1.5):12+b.mem,c,d,!e)},R=function(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c},ba=function(b,c,a){var d=b();b=b.toString();b=b.slice(b.indexOf("[")+1,b.lastIndexOf("]")).replace(/ /g,"").split(",");for(var e=0;e<d.length;++e){var f=d[e],g=b[e];if(typeof f=="function"){c+=";"+g+"=";var h=f.toString();if(f.prototype)if(h.indexOf("[native code]")!=-1){var i=h.indexOf(" ",8)+1;c+=h.slice(i,h.indexOf("(",i))}else{c+=h;for(i in f.prototype)c+=";"+g+".prototype."+i+"="+f.prototype[i].toString()}else c+=h}else a[g]=f}return[c,a]},S=[],ca=function(a){var e=[];for(var f in a)(a[f]instanceof b||a[f]instanceof c||a[f]instanceof d)&&e.push((a[f]=new a[f].constructor(a[f])).buffer);return e},T=function(c,d,e,f){var b;if(!S[e]){var g="",h={},i=c.length-1;for(var j=0;j<i;++j)b=ba(c[j],g,h),g=b[0],h=b[1];S[e]=ba(c[i],g,h)}b=R({},S[e][1]);return a["default"](S[e][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+d.toString()+"}",e,b,ca(b),f)},da=function(){return[b,c,d,e,f,g,j,n,u,w,p,q,x,y,z,aa,A,B,za,ha,ia]},U=function(){return[b,c,d,e,f,g,m,o,t,r,v,s,p,K,L,q,C,D,E,F,G,H,I,J,aa,A,M,Q,wa,ha]},V=function(){return[ma,pa,Z,O,N]},ea=function(){return[na,oa]},fa=function(){return[qa,Z,P]},ga=function(){return[ra]},ha=function(a){return postMessage(a,[a.buffer])},ia=function(a){return a&&a.size&&new b(a.size)},ja=function(a,b,c,d,e,f){var g=T(c,d,e,function(b,a){g.terminate(),f(b,a)});g.postMessage([a,b],b.consume?[a.buffer]:[]);return function(){g.terminate()}},W=function(a){a.ondata=function(a,b){return postMessage([a,b],[a.buffer])};return function(b){return a.push(b.data[0],b.data[1])}},ka=function(a,b,c,d,e){var f,g=T(a,d,e,function(a,c){a?(g.terminate(),b.ondata.call(b,a)):(c[1]&&g.terminate(),b.ondata.call(b,a,c[0],c[1]))});g.postMessage(c);b.push=function(a,c){if(f)throw"stream finished";if(!b.ondata)throw"no stream handler";g.postMessage([a,f=c],[a.buffer])};b.terminate=function(){g.terminate()}},X=function(a,b){return a[b]|a[b+1]<<8},Y=function(a,b){return(a[b]|a[b+1]<<8|a[b+2]<<16|a[b+3]<<24)>>>0},la=function(a,b){return Y(a,b)+Y(a,b+4)*4294967296},Z=function(a,b,c){for(;c;++b)a[b]=c,c>>>=8},ma=function(a,b){var c=b.filename;a[0]=31,a[1]=139,a[2]=8,a[8]=b.level<2?4:b.level==9?2:0,a[9]=3;b.mtime!=0&&Z(a,4,Math.floor(new Date(b.mtime||Date.now())/1e3));if(c){a[3]=8;for(b=0;b<=c.length;++b)a[b+10]=c.charCodeAt(b)}},na=function(a){if(a[0]!=31||a[1]!=139||a[2]!=8)throw"invalid gzip data";var b=a[3],c=10;b&4&&(c+=a[10]|(a[11]<<8)+2);for(var d=(b>>3&1)+(b>>4&1);d>0;d-=!a[c++]);return c+(b&2)},oa=function(a){var b=a.length;return(a[b-4]|a[b-3]<<8|a[b-2]<<16|a[b-1]<<24)>>>0},pa=function(a){return 10+(a.filename&&a.filename.length+1||0)},qa=function(a,b){b=b.level;b=b==0?0:b<6?1:b==9?3:2;a[0]=120,a[1]=b<<6|(b?32-2*b:1)},ra=function(a){if((a[0]&15)!=8||a[0]>>>4>7||(a[0]<<8|a[1])%31)throw"invalid zlib data";if(a[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function sa(a,b){!b&&typeof a=="function"&&(b=a,a={});this.ondata=b;return a}var ta=function(){function a(a,b){!b&&typeof a=="function"&&(b=a,a={}),this.ondata=b,this.o=a||{}}a.prototype.p=function(a,b){this.ondata(Q(a,this.o,0,0,!b),b)};a.prototype.push=function(a,b){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=b;this.p(a,b||!1)};return a}();l.Deflate=ta;var ua=function(){function a(a,b){ka([U,function(){return[W,ta]}],this,sa.call(this,a,b),function(a){a=new ta(a.data);onmessage=W(a)},6)}return a}();l.AsyncDeflate=ua;function va(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return ja(a,b,[U],function(a){return ha(wa(a.data[0],a.data[1]))},0,c)}l.deflate=va;function wa(a,b){return Q(a,b||{},0,0)}l.deflateSync=wa;var $=function(){function a(a){this.s={},this.p=new b(0),this.ondata=a}a.prototype.e=function(a){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var c=this.p.length,d=new b(c+a.length);d.set(this.p),d.set(a,c),this.p=d};a.prototype.c=function(a){this.d=this.s.i=a||!1;a=this.s.b;var b=B(this.p,this.o,this.s);this.ondata(A(b,a,this.s.b),this.d);this.o=A(b,this.s.b-32768),this.s.b=this.o.length;this.p=A(this.p,this.s.p/8|0),this.s.p&=7};a.prototype.push=function(a,b){this.e(a),this.c(b)};return a}();l.Inflate=$;var xa=function(){function a(a){this.ondata=a,ka([da,function(){return[W,$]}],this,0,function(){var a=new $();onmessage=W(a)},7)}return a}();l.AsyncInflate=xa;function ya(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return ja(a,b,[da],function(a){return ha(za(a.data[0],ia(a.data[1])))},1,c)}l.inflate=ya;function za(a,b){return B(a,b)}l.inflateSync=za;var Aa=function(){function a(a,b){this.c=O(),this.l=0,this.v=1,ta.call(this,a,b)}a.prototype.push=function(a,b){ta.prototype.push.call(this,a,b)};a.prototype.p=function(a,b){this.c.p(a);this.l+=a.length;a=Q(a,this.o,this.v&&pa(this.o),b&&8,!b);this.v&&(ma(a,this.o),this.v=0);b&&(Z(a,a.length-8,this.c.d()),Z(a,a.length-4,this.l));this.ondata(a,b)};return a}();l.Gzip=Aa;l.Compress=Aa;i=function(){function a(a,b){ka([U,V,function(){return[W,ta,Aa]}],this,sa.call(this,a,b),function(a){a=new Aa(a.data);onmessage=W(a)},8)}return a}();l.AsyncGzip=i;l.AsyncCompress=i;function Ba(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return ja(a,b,[U,V,function(){return[Ca]}],function(a){return ha(Ca(a.data[0],a.data[1]))},2,c)}l.gzip=Ba;l.compress=Ba;function Ca(a,b){b||(b={});var c=O(),d=a.length;c.p(a);a=Q(a,b,pa(b),8);var e=a.length;return ma(a,b),Z(a,e-8,c.d()),Z(a,e-4,d),a}l.gzipSync=Ca;l.compressSync=Ca;var Da=function(){function a(a){this.v=1,$.call(this,a)}a.prototype.push=function(a,b){$.prototype.e.call(this,a);if(this.v){a=this.p.length>3?na(this.p):4;if(a>=this.p.length&&!b)return;this.p=this.p.subarray(a),this.v=0}if(b){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}$.prototype.c.call(this,b)};return a}();l.Gunzip=Da;var Ea=function(){function a(a){this.ondata=a,ka([da,ea,function(){return[W,$,Da]}],this,0,function(){var a=new Da();onmessage=W(a)},9)}return a}();l.AsyncGunzip=Ea;function Fa(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return ja(a,b,[da,ea,function(){return[Ga]}],function(a){return ha(Ga(a.data[0]))},3,c)}l.gunzip=Fa;function Ga(a,c){return B(a.subarray(na(a),-8),c||new b(oa(a)))}l.gunzipSync=Ga;var Ha=function(){function a(a,b){this.c=P(),this.v=1,ta.call(this,a,b)}a.prototype.push=function(a,b){ta.prototype.push.call(this,a,b)};a.prototype.p=function(a,b){this.c.p(a);a=Q(a,this.o,this.v&&2,b&&4,!b);this.v&&(qa(a,this.o),this.v=0);b&&Z(a,a.length-4,this.c.d());this.ondata(a,b)};return a}();l.Zlib=Ha;h=function(){function a(a,b){ka([U,fa,function(){return[W,ta,Ha]}],this,sa.call(this,a,b),function(a){a=new Ha(a.data);onmessage=W(a)},10)}return a}();l.AsyncZlib=h;function Ia(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return ja(a,b,[U,fa,function(){return[Ja]}],function(a){return ha(Ja(a.data[0],a.data[1]))},4,c)}l.zlib=Ia;function Ja(a,b){b||(b={});var c=P();c.p(a);a=Q(a,b,2,4);return qa(a,b),Z(a,a.length-4,c.d()),a}l.zlibSync=Ja;var Ka=function(){function a(a){this.v=1,$.call(this,a)}a.prototype.push=function(a,b){$.prototype.e.call(this,a);if(this.v){if(this.p.length<2&&!b)return;this.p=this.p.subarray(2),this.v=0}if(b){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}$.prototype.c.call(this,b)};return a}();l.Unzlib=Ka;var La=function(){function a(a){this.ondata=a,ka([da,ga,function(){return[W,$,Ka]}],this,0,function(){var a=new Ka();onmessage=W(a)},11)}return a}();l.AsyncUnzlib=La;function Ma(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return ja(a,b,[da,ga,function(){return[Na]}],function(a){return ha(Na(a.data[0],ia(a.data[1])))},5,c)}l.unzlib=Ma;function Na(a,b){return B((ra(a),a.subarray(2,-4)),b)}l.unzlibSync=Na;var Oa=function(){function a(a){this.G=Da,this.I=$,this.Z=Ka,this.ondata=a}a.prototype.push=function(a,c){if(!this.ondata)throw"no stream handler";if(!this.s){if(this.p&&this.p.length){var d=new b(this.p.length+a.length);d.set(this.p),d.set(a,this.p.length)}else this.p=a;if(this.p.length>2){var e=this;d=function(){e.ondata.apply(e,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(d):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(d):new this.Z(d);this.s.push(this.p,c);this.p=null}}else this.s.push(a,c)};return a}();l.Decompress=Oa;i=function(){function a(a){this.G=Ea,this.I=xa,this.Z=La,this.ondata=a}a.prototype.push=function(a,b){Oa.prototype.push.call(this,a,b)};return a}();l.AsyncDecompress=i;function Pa(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return a[0]==31&&a[1]==139&&a[2]==8?Fa(a,b,c):(a[0]&15)!=8||a[0]>>4>7||(a[0]<<8|a[1])%31?ya(a,b,c):Ma(a,b,c)}l.decompress=Pa;function Qa(a,b){return a[0]==31&&a[1]==139&&a[2]==8?Ga(a,b):(a[0]&15)!=8||a[0]>>4>7||(a[0]<<8|a[1])%31?za(a,b):Na(a,b)}l.decompressSync=Qa;var Ra=function(a,c,d,e){for(var f in a){var g=a[f],h=c+f;g instanceof b?d[h]=[g,e]:Array.isArray(g)?d[h]=[g[0],R(e,g[1])]:Ra(g,h+"/",d,e)}},Sa=typeof TextEncoder!="undefined"&&new TextEncoder(),Ta=typeof TextDecoder!="undefined"&&new TextDecoder(),Ua=0;try{Ta.decode(L,{stream:!0}),Ua=1}catch(a){}var Va=function(a){for(var b="",c=0;;){var d=a[c++],e=(d>127)+(d>223)+(d>239);if(c+e>a.length)return[b,A(a,c-1)];!e?b+=String.fromCharCode(d):e==3?(d=((d&15)<<18|(a[c++]&63)<<12|(a[c++]&63)<<6|a[c++]&63)-65536,b+=String.fromCharCode(55296|d>>10,56320|d&1023)):e&1?b+=String.fromCharCode((d&31)<<6|a[c++]&63):b+=String.fromCharCode((d&15)<<12|(a[c++]&63)<<6|a[c++]&63)}};Ba=function(){function a(a){this.ondata=a,Ua?this.t=new TextDecoder():this.p=L}a.prototype.push=function(a,c){if(!this.ondata)throw"no callback";c=!!c;if(this.t){this.ondata(this.t.decode(a,{stream:!0}),c);if(c){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var d=new b(this.p.length+a.length);d.set(this.p);d.set(a,this.p.length);a=Va(d);d=a[0];a=a[1];if(c){if(a.length)throw"invalid utf-8 data";this.p=null}else this.p=a;this.ondata(d,c)};return a}();l.DecodeUTF8=Ba;h=function(){function a(a){this.ondata=a}a.prototype.push=function(a,b){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(Wa(a),this.d=b||!1)};return a}();l.EncodeUTF8=h;function Wa(a,c){if(c){var d=new b(a.length);for(var e=0;e<a.length;++e)d[e]=a.charCodeAt(e);return d}if(Sa)return Sa.encode(a);d=a.length;var f=new b(a.length+(a.length>>1)),g=0,h=function(a){f[g++]=a};for(var e=0;e<d;++e){if(g+5>f.length){var i=new b(g+8+(d-e<<1));i.set(f);f=i}i=a.charCodeAt(e);i<128||c?h(i):i<2048?(h(192|i>>6),h(128|i&63)):i>55295&&i<57344?(i=65536+(i&1023<<10)|a.charCodeAt(++e)&1023,h(240|i>>18),h(128|i>>12&63),h(128|i>>6&63),h(128|i&63)):(h(224|i>>12),h(128|i>>6&63),h(128|i&63))}return A(f,0,g)}l.strToU8=Wa;function Xa(a,b){if(b){b="";for(var c=0;c<a.length;c+=16384)b+=String.fromCharCode.apply(null,a.subarray(c,c+16384));return b}else if(Ta)return Ta.decode(a);else{c=Va(a);b=c[0];a=c[1];if(a.length)throw"invalid utf-8 data";return b}}l.strFromU8=Xa;var Ya=function(a){return a==1?3:a<6?2:a==9?1:0},Za=function(a,b){return b+30+X(a,b+26)+X(a,b+28)},$a=function(a,b,c){var d=X(a,b+28),e=Xa(a.subarray(b+46,b+46+d),!(X(a,b+8)&2048));d=b+46+d;var f=Y(a,b+20);c=c&&f==4294967295?ab(a,d):[f,Y(a,b+24),Y(a,b+42)];f=c[0];var g=c[1];c=c[2];return[X(a,b+10),f,g,e,d+X(a,b+30)+X(a,b+32),c]},ab=function(a,b){for(;X(a,b)!=1;b+=4+X(a,b+2));return[la(a,b+12),la(a,b+4),la(a,b+20)]},bb=function(a){var b=0;if(a)for(var c in a){var d=a[c].length;if(d>65535)throw"extra field too long";b+=d+4}return b},cb=function(b,c,d,e,f,g,h,i){var a=e.length,j=d.extra,k=i&&i.length,l=bb(j);Z(b,c,h!=null?33639248:67324752),c+=4;h!=null&&(b[c++]=20,b[c++]=d.os);b[c]=20,c+=2;b[c++]=d.flag<<1|(g==null&&8),b[c++]=f&&8;b[c++]=d.compression&255,b[c++]=d.compression>>8;f=new Date(d.mtime==null?Date.now():d.mtime);var m=f.getFullYear()-1980;if(m<0||m>119)throw"date not in range 1980-2099";Z(b,c,m<<25|f.getMonth()+1<<21|f.getDate()<<16|f.getHours()<<11|f.getMinutes()<<5|f.getSeconds()>>>1),c+=4;g!=null&&(Z(b,c,d.crc),Z(b,c+4,g),Z(b,c+8,d.size));Z(b,c+12,a);Z(b,c+14,l),c+=16;h!=null&&(Z(b,c,k),Z(b,c+6,d.attrs),(Z(b,c+10,h),c+=14));b.set(e,c);c+=a;if(l)for(m in j){f=j[m];g=f.length;Z(b,c,+m);Z(b,c+2,g);b.set(f,c+4),c+=4+g}k&&(b.set(i,c),c+=k);return c},db=function(a,b,c,d,e){Z(a,b,101010256),Z(a,b+8,c),Z(a,b+10,c),Z(a,b+12,d),Z(a,b+16,e)},eb=function(){function a(a){this.filename=a,this.c=O(),this.size=0,this.compression=0}a.prototype.process=function(a,b){this.ondata(null,a,b)};a.prototype.push=function(a,b){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(a);this.size+=a.length;b&&(this.crc=this.c.d());this.process(a,b||!1)};return a}();l.ZipPassThrough=eb;Ia=function(){function a(a,b){var c=this;b||(b={});eb.call(this,a);this.d=new ta(b,function(a,b){c.ondata(null,a,b)});this.compression=8;this.flag=Ya(b.level)}a.prototype.process=function(a,b){try{this.d.push(a,b)}catch(a){this.ondata(a,null,b)}};a.prototype.push=function(a,b){eb.prototype.push.call(this,a,b)};return a}();l.ZipDeflate=Ia;i=function(){function a(a,b){var c=this;b||(b={});eb.call(this,a);this.d=new ua(b,function(a,b,d){c.ondata(a,b,d)});this.compression=8;this.flag=Ya(b.level);this.terminate=this.d.terminate}a.prototype.process=function(a,b){this.d.push(a,b)};a.prototype.push=function(a,b){eb.prototype.push.call(this,a,b)};return a}();l.AsyncZipDeflate=i;Pa=function(){function a(a){this.ondata=a,this.u=[],this.d=1}a.prototype.add=function(c){var d=this;if(this.d&2)throw"stream finished";var e=Wa(c.filename),a=e.length,f=c.comment,g=f&&Wa(f);f=a!=c.filename.length||g&&f.length!=g.length;var h=a+bb(c.extra)+30;if(a>65535)throw"filename too long";a=new b(h);cb(a,0,c,e,f);var i=[a],j=function(){for(var a=0,b=i;a<b.length;a++){var c=b[a];d.ondata(null,c,!1)}i=[]},k=this.d;this.d=0;var l=this.u.length,m=R(c,{f:e,u:f,o:g,t:function(){c.terminate&&c.terminate()},r:function(){j();if(k){var a=d.u[l+1];a?a.r():d.d=1}k=1}}),n=0;c.ondata=function(a,e,f){if(a)d.ondata(a,e,f),d.terminate();else{n+=e.length;i.push(e);if(f){a=new b(16);Z(a,0,134695760);Z(a,4,c.crc);Z(a,8,n);Z(a,12,c.size);i.push(a);m.c=n,m.b=h+n+16,m.crc=c.crc,m.size=c.size;k&&m.r();k=1}else k&&j()}};this.u.push(m)};a.prototype.end=function(){var a=this;if(this.d&2){if(this.d&1)throw"stream finishing";throw"stream finished"}this.d?this.e():this.u.push({r:function(){if(!(a.d&1))return;a.u.splice(-1,1);a.e()},t:function(){}});this.d=3};a.prototype.e=function(){var c=0,d=0,e=0;for(var f=0,a=this.u;f<a.length;f++){var g=a[f];e+=46+g.f.length+bb(g.extra)+(g.o?g.o.length:0)}a=new b(e+22);for(var f=0,h=this.u;f<h.length;f++){var g=h[f];cb(a,c,g,g.f,g.u,g.c,d,g.o);c+=46+g.f.length+bb(g.extra)+(g.o?g.o.length:0),d+=g.b}db(a,c,this.u.length,e,d);this.ondata(null,a,!0);this.d=2};a.prototype.terminate=function(){for(var b=0,a=this.u;b<a.length;b++){var c=a[b];c.t()}this.d=2};return a}();l.Zip=Pa;function fb(a,c,d){d||(d=c,c={});if(typeof d!="function")throw"no callback";var e={};Ra(a,"",e,c);var f=Object.keys(e),g=f.length,h=0,i=0,j=g,k=new Array(g),l=[],m=function(){for(var a=0;a<l.length;++a)l[a]()},n=function(){var a=new b(i+22),c=h,e=i-h;i=0;for(var f=0;f<j;++f){var g=k[f];try{var l=g.c.length;cb(a,i,g,g.f,g.u,l);var m=30+g.f.length+bb(g.extra),n=i+m;a.set(g.c,n);cb(a,h,g,g.f,g.u,l,i,g.m),h+=16+m+(g.m?g.m.length:0),i=n+l}catch(a){return d(a,null)}}db(a,h,k.length,e,c);d(null,a)};g||n();a=function(b){var c=f[b],a=e[c],j=a[0],o=a[1],p=O(),q=j.length;p.p(j);var r=Wa(c),s=r.length,t=o.comment,u=t&&Wa(t),v=u&&u.length,w=bb(o.extra),x=o.level==0?0:8;a=function(a,e){if(a)m(),d(a,null);else{a=e.length;k[b]=R(o,{size:q,crc:p.d(),c:e,f:r,m:u,u:s!=c.length||u&&t.length!=v,compression:x});h+=30+s+w+a;i+=76+2*(s+w)+(v||0)+a;--g||n()}};s>65535&&a("filename too long",null);if(!x)a(null,j);else if(q<16e4)try{a(null,wa(j,o))}catch(b){a(b,null)}else l.push(va(j,o,a))};for(c=0;c<j;++c)a(c);return m}l.zip=fb;function gb(c,d){d||(d={});var e={},f=[];Ra(c,"",e,d);c=0;d=0;for(var g in e){var a=e[g],h=a[0];a=a[1];var i=a.level==0?0:8,j=Wa(g),k=j.length,l=a.comment,m=l&&Wa(l),n=m&&m.length,o=bb(a.extra);if(k>65535)throw"filename too long";var p=i?wa(h,a):h,q=p.length,r=O();r.p(h);f.push(R(a,{size:h.length,crc:r.d(),c:p,f:j,m:m,u:k!=g.length||m&&l.length!=n,o:c,compression:i}));c+=30+k+o+q;d+=76+2*(k+o)+(n||0)+q}a=new b(d+22);h=c;r=d-c;for(p=0;p<f.length;++p){var j=f[p];cb(a,j.o,j,j.f,j.u,j.c.length);m=30+j.f.length+bb(j.extra);a.set(j.c,j.o+m);cb(a,c,j,j.f,j.u,j.c.length,j.o,j.m),c+=16+m+(j.m?j.m.length:0)}db(a,c,f.length,r,h);return a}l.zipSync=gb;var hb=function(){function a(){}a.prototype.push=function(a,b){this.ondata(null,a,b)};a.compression=0;return a}();l.UnzipPassThrough=hb;Qa=function(){function a(){var a=this;this.i=new $(function(b,c){a.ondata(null,b,c)})}a.prototype.push=function(a,b){try{this.i.push(a,b)}catch(c){this.ondata(c,a,b)}};a.compression=8;return a}();l.UnzipInflate=Qa;Ba=function(){function a(a,b){var c=this;b<32e4?this.i=new $(function(a,b){c.ondata(null,a,b)}):(this.i=new xa(function(a,b,d){c.ondata(a,b,d)}),this.terminate=this.i.terminate)}a.prototype.push=function(a,b){this.i.terminate&&(a=A(a,0)),this.i.push(a,b)};a.compression=8;return a}();l.AsyncUnzipInflate=Ba;h=function(){function a(a){this.onfile=a,this.k=[],this.o={0:hb},this.p=L}a.prototype.push=function(a,c){var d=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var e=Math.min(this.c,a.length),f=a.subarray(0,e);this.c-=e;this.d?this.d.push(f,!this.c):this.k[0].push(f);a=a.subarray(e);if(a.length)return this.push(a,c)}else{f=0;var g=0;e=void 0;var h=void 0;!this.p.length?h=a:!a.length?h=this.p:(h=new b(this.p.length+a.length),(h.set(this.p),h.set(a,this.p.length)));var i=h.length,j=this.c;a=j&&this.d;var k=function(){var a=Y(h,g);if(a==67324752){f=1,e=g;l.d=null;l.c=0;var b=X(h,g+6),c=X(h,g+8),k=b&2048;b=b&8;var m=X(h,g+26),n=X(h,g+28);if(i>g+30+m+n){var o=[];l.k.unshift(o);f=2;var p=Y(h,g+18),q=Y(h,g+22),r=Xa(h.subarray(g+30,g+=30+m),!k);p==4294967295?(m=b?[-2]:ab(h,g),p=m[0],q=m[1]):b&&(p=-1);g+=n;l.c=p;var s,t={name:r,compression:c,start:function(){if(!t.ondata)throw"no callback";if(!p)t.ondata(null,L,!0);else{var a=d.o[c];if(!a)throw"unknown compression type "+c;s=p<0?new a(r):new a(r,p,q);s.ondata=function(c,b,a){t.ondata(c,b,a)};for(var a=0,b=o;a<b.length;a++){var e=b[a];s.push(e,!1)}d.k[0]==o&&d.c?d.d=s:s.push(L,!0)}},terminate:function(){s&&s.terminate&&s.terminate()}};p>=0&&(t.size=p,t.originalSize=q);l.onfile(t)}return"break"}else if(j)if(a==134695760){e=g+=12+(j==-2&&8),f=3,l.c=0;return"break"}else if(a==33639248){e=g-=4,f=3,l.c=0;return"break"}},l=this;for(;g<i-4;++g){var m=k();if(m==="break")break}this.p=L;if(j<0){m=f?h.subarray(0,e-12-(j==-2&&8)-(Y(h,e-16)==134695760&&4)):h.subarray(0,g);a?a.push(m,!!f):this.k[+(f==2)].push(m)}if(f&2)return this.push(h.subarray(g),c);this.p=h.subarray(g)}if(c){if(this.c)throw"invalid zip file";this.p=null}};a.prototype.register=function(a){this.o[a.compression]=a};return a}();l.Unzip=h;function ib(a,c){if(typeof c!="function")throw"no callback";var d=[],e=function(){for(var a=0;a<d.length;++a)d[a]()},f={},g=a.length-22;for(;Y(a,g)!=101010256;--g)if(!g||a.length-g>65558){c("invalid zip file",null);return}var h=X(a,g+8);h||c(null,{});var i=h,j=Y(a,g+16),k=j==4294967295;if(k){g=Y(a,g-12);if(Y(a,g)!=101075792){c("invalid zip file",null);return}i=h=Y(a,g+32);j=Y(a,g+48)}g=function(g){g=$a(a,j,k);var i=g[0],l=g[1],m=g[2],n=g[3],o=g[4];g=g[5];g=Za(a,g);j=o;o=function(a,b){a?(e(),c(a,null)):(f[n]=b,--h||c(null,f))};if(!i)o(null,A(a,g,g+l));else if(i==8){g=a.subarray(g,g+l);if(l<32e4)try{o(null,za(g,new b(m)))}catch(a){o(a,null)}else d.push(ya(g,{size:m},o))}else o("unknown compression type "+i,null)};for(var l=0;l<i;++l)g(l);return e}l.unzip=ib;function jb(c){var d={},e=c.length-22;for(;Y(c,e)!=101010256;--e)if(!e||c.length-e>65558)throw"invalid zip file";var f=X(c,e+8);if(!f)return{};var g=Y(c,e+16),h=g==4294967295;if(h){e=Y(c,e-12);if(Y(c,e)!=101075792)throw"invalid zip file";f=Y(c,e+32);g=Y(c,e+48)}for(e=0;e<f;++e){var a=$a(c,g,h),i=a[0],j=a[1],k=a[2],l=a[3],m=a[4];a=a[5];a=Za(c,a);g=m;if(!i)d[l]=A(c,a,a+j);else if(i==8)d[l]=za(c.subarray(a,a+j),new b(k));else throw"unknown compression type "+i}return d}l.unzipSync=jb}var o=!1;function p(){o||(o=!0,n());return m.exports}function a(a){switch(a){case void 0:return p()}}e.exports=a}),null);
__d("fflate",["fflate-0.6.10"],(function(a,b,c,d,e,f){e.exports=b("fflate-0.6.10")()}),null);
__d("EncryptedBackupsDYIZipUtils",["EncryptedBackupsDYIFileUtils","asyncToGeneratorRuntime","fflate"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m;function a(a,b,c,d,e,f){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g){var n=(yield d("EncryptedBackupsDYIFileUtils").getRootFolderHandle());n=(yield n.getFileHandle("messages.zip",{create:!0}));e("stream_file_start");var p=(yield n.createWritable({keepExisting:!1,mode:"exclusive"}));n=new(d("fflate").Zip)();var q=0;n.ondata=function(a,b,d){if(a){c.ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Generic stream error"])));e("stream_file_error");g(a);return}q++;q%1e3===0&&c.LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Writing chunk #",""])),q);p.write(b)["catch"](function(a){c.ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Error during data event"]))),e("stream_file_error"),g(a)});d&&(c.LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Finished ZIP file generation. Saving the results"]))),e("stream_file_end"),e("write_file_start"),p.close().then(function(){e("write_file_end"),c.LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Closed the writing stream"]))),f()})["catch"](function(a){c.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Error during end event"]))),e("write_file_error"),g(a)}))};for(a of a){var r=a.threadName+".json";r=new(d("fflate").ZipDeflate)(r,{level:9});var s=new TextEncoder().encode(JSON.stringify(a,null,2));n.add(r);r.push(s,!0)}for(r of b)yield o(n,r);n.end()});return n.apply(this,arguments)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.split("/").pop(),e=(yield d("EncryptedBackupsDYIFileUtils").getMediaFolderHandle());e=(yield d("EncryptedBackupsDYIFileUtils").readFile(e,c!=null?c:b));c=(yield e.arrayBuffer());e=new Uint8Array(c);c=new(d("fflate").ZipPassThrough)(b);a.add(c);c.push(e,!0)});return p.apply(this,arguments)}g.generateZipFile=a}),98);
__d("EncryptedBackupsDYISingleton",["EncryptedBackupsDYIFileUtils","EncryptedBackupsDYIGenerateThreadMetadata","EncryptedBackupsDYISingletonFactory","EncryptedBackupsDYITypes","EncryptedBackupsDYIZipUtils","FBLogger","I64","LSIntEnum","MAWBridge","MAWQplProxy","WAHashUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=["senderId"],i,j,k,l,m,n,o,p,q,r,s,t,u,v=null;function w(){try{return WorkerGlobalScope!==void 0&&self instanceof WorkerGlobalScope}catch(a){return!1}}function a(a,b,e){if(v==null)switch(a){case d("EncryptedBackupsDYITypes").EncryptedBackupsDYIConfig.Armadillo:if(w())throw c("FBLogger")("wmi_eb").mustfixThrow("EncryptedBackupsDYISingleton for Armadillo can only be initialised in the main thread");v=d("EncryptedBackupsDYISingletonFactory").getMAWEncryptedBackupsDYISingleton(b,e);break;case d("EncryptedBackupsDYITypes").EncryptedBackupsDYIConfig.Instamadillo:if(!w())throw c("FBLogger")("wmi_eb").mustfixThrow("EncryptedBackupsDYISingleton for Instamadillo can only be initialised in the worker");v=d("EncryptedBackupsDYISingletonFactory").getIGDEncryptedBackupsDYISingleton(b,e);break}}function e(){if(v==null)throw c("FBLogger")("wmi_eb").mustfixThrow("EncryptedBackupsDYISingleton is not initialised. Please call EncryptedBackupsDYISingleton.initSingleton() first.");return v}var x=function(){function a(a,b,c,d){this.$5=new Map(),this.$6=new Set(),this.$7=new Set(),this.$8=new Map(),this.$9=new Map(),this.$10=new Map(),this.$11=new Map(),this.$12=new Map(),this.$1=a,this.$2=b,this.$3=c,this.$4=d}var c=a.prototype;c.getDB=function(){return this.$1()};c.getLogger=function(){return this.$4};c.getAllMediaUrls=function(){return Array.from(this.$5.values())};c.$13=function(a){return this.$5.get(a)};c.setMediaUrlByPlainTextHash=function(a,b){if(this.$5.has(a))return;this.$5.set(a,b)};c.addThreadKeyToThreadsRestoreInProgress=function(a){this.$6.add(a)};c.isThreadRestoreInProgressForThreadKey=function(a){return this.$6.has(a)};c.deleteThreadKeyFromThreadsRestoreInProgress=function(a){this.$6["delete"](a),this.$4.LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Finished handling message range queries for thread with thread key ",". "," threads left"])),a,this.$6.size),this.$14()&&(this.$4.LOG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["DYI flow complete - generating output"]))),void this.$15())};c.isThreadsRestoreComplete=function(){return this.$6.size===0};c.addPlaintextHashToAttachmentDownloadsInProgress=function(a){this.$7.add(a),this.$4.LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Started processing attachment with plaintext hash ","."])),d("WAHashUtils").sanitisePlaintextHash(a))};c.deletePlaintextHashFromAttachmentDownloadsInProgress=function(a){this.$7["delete"](a),this.$4.LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Finished processing attachment with plaintext hash ",". "," attachments left"])),d("WAHashUtils").sanitisePlaintextHash(a),this.$7.size),this.$7.size<30&&this.$4.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Remaining attachments: ",""])),Array.from(this.$7).map(d("WAHashUtils").sanitisePlaintextHash).join(", ")),this.$14()&&(this.$4.LOG(n||(n=babelHelpers.taggedTemplateLiteralLoose(["DYI flow complete - generating output"]))),void this.$15())};c.isAttachmentDownloadInProgressForPlaintextHash=function(a){return this.$7.has(a)};c.isAttachmentDownloadCompleteForPlaintextHash=function(a){return!!this.$5.get(a)};c.isAttachmentDownloadComplete=function(){return this.$7.size===0};c.setMessagesByThreadKey=function(a,b,c){a=this.getMessagesByThreadKey(a);a.set(b,c)};c.getMessagesByThreadKey=function(a){this.$16(a)||this.$8.set(a,new Map());return this.$8.get(a)};c.$16=function(a){return this.$8.has(a)};c.hasMessage=function(a,b){a=this.$8.get(a);return a==null?!1:a.has(b)};c.getThreadIdForThreadKey=function(a){return this.$10.get(a)};c.getThreadKeyForThreadId=function(a){return this.$11.get(a)};c.setThreadMapping=function(a,b){this.$10.set(a,b),this.$11.set(b,a)};c.setThreadMetaDataByThreadKey=function(a,b,c){this.$9.set(a,{participants:b,threadName:c})};c.getThreadMetadataMap=function(){return this.$9};c.setContactNameForContactId=function(a,b){this.$12.set(a,b)};c.getContactNameForContactId=function(a){return this.$12.get(a)};c.getContactNameMap=function(){return this.$12};c.getOutput=function(){var a=this;return Array.from(this.getThreadMetadataMap(),function(b){var c=b[0];b=b[1];var d=a.$16(c);d=d?Array.from(a.getMessagesByThreadKey(c),function(b){b[0];b=b[1];return babelHelpers["extends"]({},b,{media:Array.from(b.media,function(b){b=a.$13(b);return{uri:b!=null?"./"+b:"Failed to download media"}})})}):[];d=d.map(function(b){var c=b.senderId,d=babelHelpers.objectWithoutPropertiesLoose(b,h);if(c!=null&&d.senderName==="Unknown User"){c=a.getContactNameForContactId(c);if(c!=null)return babelHelpers["extends"]({},d,{senderName:c})}return b});c=d.sort(function(a,b){return typeof a.timestamp==="number"&&typeof b.timestamp==="number"?a.timestamp-b.timestamp:0});return babelHelpers["extends"]({},b,{messages:c})})};c.$14=function(){return this.isAttachmentDownloadComplete()&&this.isThreadsRestoreComplete()};c.$17=function(a){switch(a){case 0:return d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.InProgress;case 1:return d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Completed;case 2:return d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Failed;case-1:default:return d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.NotStarted}};c.updateDYIStatus=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield this.getDB());yield c.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield b.encrypted_backups_dyi_backup_restore_status.put({currentStatus:(t||(t=d("LSIntEnum"))).ofNumber(a),pk:(u||(u=d("I64"))).zero})});return function(a){return c.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":521");d("MAWBridge").getBridge().fireAndForget("event","updateDYIStatus",{qplEvent:this.$2,qplInstanceKeyE2E:(c=this.$3)!=null?c:void 0,status:this.$17(a)})});function c(b){return a.apply(this,arguments)}return c}();c.$18=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this,b=new Set();this.getContactNameMap().forEach(function(a,c){a==="Unknown User"&&b.add(c)});var c=(yield this.getDB());c=(yield d("EncryptedBackupsDYIGenerateThreadMetadata").getAllUnmappedContacts(c,b));c.forEach(function(b){var c=(u||(u=d("I64"))).to_string(b.id);a.setContactNameForContactId(c,b.name)});this.$4.LOG(o||(o=babelHelpers.taggedTemplateLiteralLoose(["Fetched remaining contact names, total of "," contacts"])),this.getContactNameMap().size.toString())});function c(){return a.apply(this,arguments)}return c}();c.$15=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this;this.logDYIQPLPoint("complete_dyi_flow_start");yield this.$18();this.$4.LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Generating output"])));var c=this.getOutput(),e=Array.from(this.$5.values());this.$4.LOG(q||(q=babelHelpers.taggedTemplateLiteralLoose(["Generating zip file"])));yield d("EncryptedBackupsDYIZipUtils").generateZipFile(c,e,this.$4,function(b,c){a.logDYIQPLPoint(b,c)},b("asyncToGeneratorRuntime").asyncToGenerator(function*(){a.logDYIQPLPoint("complete_dyi_flow_end"),yield a.updateDYIStatus(1),void a.clear()}),function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){a.$4.ERROR(r||(r=babelHelpers.taggedTemplateLiteralLoose(["Failed to generate zip file: ",""])),b),a.logDYIQPLPoint("complete_dyi_flow_error"),yield a.updateDYIStatus(2),void a.clear()});return function(a){return c.apply(this,arguments)}}())});function c(){return a.apply(this,arguments)}return c}();c.exitDYIEarly=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b!=null&&this.$4.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["DYI Exiting Early - Found "," instamadillo threads"])),b),this.logDYIQPLPoint("dyi_exit_early",{"int":{dyi_threads:b}}),yield this.updateDYIStatus(a?2:1),void this.clear()});function c(b,c){return a.apply(this,arguments)}return c}();c.clear=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){this.$5=new Map();this.$6=new Set();this.$7=new Set();this.$8=new Map();this.$9=new Map();var a=(yield d("EncryptedBackupsDYIFileUtils").getRootFolderHandle());yield a.removeEntry(d("EncryptedBackupsDYIFileUtils").DyiMediaFolder,{recursive:!0})});function c(){return a.apply(this,arguments)}return c}();c.logDYIQPLPoint=function(a,b){this.$3!=null&&d("MAWQplProxy").sendQplPointThroughBridge(this.$2,a,{annotations:b,instanceKey:this.$3})};return a}();g.initSingleton=a;g.getSingleton=e;g.EncryptedBackupsDYISingleton=x}),98);
__d("EncryptedBackupsDYISingletonFactory",["EncryptedBackupsDYISingleton","WATagsLogger","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return new(d("EncryptedBackupsDYISingleton").EncryptedBackupsDYISingleton)(a,c("qpl")._(521478596,"1329"),b,d("WATagsLogger").TAGS(["labyrinth_web","labyrinth_dyi",b==null?"":b.toString()]))}function b(a,b){return new(d("EncryptedBackupsDYISingleton").EncryptedBackupsDYISingleton)(a,c("qpl")._(521479842,"2163"),b,d("WATagsLogger").TAGS(["igd_labyrinth_web","igd_dyi",b==null?"":b.toString()]))}g.getMAWEncryptedBackupsDYISingleton=a;g.getIGDEncryptedBackupsDYISingleton=b}),98);
__d("EncryptedBackupsDYIMediaDownloadHandlers",["EncryptedBackupsDYIFileUtils","EncryptedBackupsDYISingleton","FBLogger","Promise","WAResultOrError","asyncToGeneratorRuntime","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){f=(yield d("EncryptedBackupsDYIFileUtils").getMediaFolderHandle());b=b.split("/")[1];b=c("uuidv4")()+"."+b;yield d("EncryptedBackupsDYIFileUtils").writeFile(f,b,e);f=d("EncryptedBackupsDYISingleton").getSingleton();f.setMediaUrlByPlainTextHash(a,d("EncryptedBackupsDYIFileUtils").DyiMediaFolder+"/"+b);f.deletePlaintextHashFromAttachmentDownloadsInProgress(a);return d("WAResultOrError").makeResult()});return function(b,c,d,e){return a.apply(this,arguments)}}();e=function(){c("FBLogger")("wmi_eb").debug("[DYIMediaPreviewHandler] Skipping previews for DYI");return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult())};g.DYIMediaDownloadHandler=a;g.DYIMediaPreviewHandler=e}),98);
__d("MAWMediaPreviewDownloadManager",["WAResolvable"],(function(a,b,c,d,e,f,g){"use strict";var h=1e4,i=[],j=new Map();function a(a){if(j.has(a))return;l();var b=new(d("WAResolvable").Resolvable)();j.set(a,b);i.push(a)}function b(a,b){var c=j.get(a);if(c==null)return;c.reject(b);k(a)}function c(a){return j.get(a)}function k(a){j["delete"](a)}function l(){if(i.length>=h){var a=i.shift();a!=null&&j["delete"](a)}}function e(){i=[],j.clear()}g.markMediaPreviewAsDownloading=a;g.markMediaPreviewAsFailed=b;g.getMediaPreviewDownloadingResolvable=c;g.removeMediaPreviewDownloadingResolvable=k;g.clear=e}),98);
__d("MAWHandleMediaPreviewBeforeDownloadApi",["MAWMediaPreviewDownloadManager","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a){d("MAWMediaPreviewDownloadManager").markMediaPreviewAsDownloading(a);return(h||(h=b("Promise"))).resolve()};g.handleMediaPreviewBeforeDownload=a}),98);
__d("MAWHandleMediaPreviewDownloadApi",["MAWBridgeTypesCreators","MAWDbMediaTxns","MAWDbMsgTxns","MAWDexieTable","MAWIndexedDb","MAWLoggerUtils","MAWMediaAfterTxns","MAWMediaDownloadStatus","MAWMediaDownloadStatusForUI","MAWMediaPreviewDownloadManager","MAWMediaUtils","MAWTransactionMode","MWFBLogger","WACryptoSha256","WAHashUtils","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("MWFBLogger").MWMediaLogger().tags([d("MAWLoggerUtils").Tag.MediaDownload,d("MAWLoggerUtils").Tag.MessageReceive,"MediaPreview"]);a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){var g=d("WAHashUtils").toPlaintextHash(yield d("WACryptoSha256").sha256(b));d("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"handle_media_download",hash:a,status:c("MAWMediaDownloadStatus").DOWNLOADING,type:"preview"});var h=d("MAWMediaPreviewDownloadManager").getMediaPreviewDownloadingResolvable(a);h!=null&&(h.resolve(new Blob([b],{type:"image/jpeg"})),d("MAWMediaPreviewDownloadManager").removeMediaPreviewDownloadingResolvable(a));return k(a,g,b,e,f)});return function(b,c,d,e){return a.apply(this,arguments)}}();var k=d("MAWIndexedDb").makeMsgrTransactor({chunk:(e=d("MAWTransactionMode")).READWRITE,media:e.READWRITE,messages:e.READONLY,threads:e.READONLY},"handleMediaPreviewDownload",function(a){return function(b,e,f,g,k){return d("MAWDexieTable").dexieAll([d("MAWDbMediaTxns").maybeGetMediaFromPlaintextHash(a,b),d("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(a,k)]).then(function(k){var l=k[0],m=k[1];j.DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Handling preview for main hash ","... preview hash ","..."])),d("WAHashUtils").sanitisePlaintextHash(b),d("WAHashUtils").sanitisePlaintextHash(e));if(l==null){d("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"missing_media_on_save",hash:b,status:c("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE,type:"preview"});j.WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Main media for preview is null. Type: ",""])),g);return d("WAResultOrError").makeError("missing-media-on-save")}k=function(){switch(g){case"image":return a.media.update(l.mediaId,babelHelpers["extends"]({},l,{validatedImageInfo:babelHelpers["extends"]({},l.validatedImageInfo,{jpegThumbnail:f})}));case"video":return a.media.update(l.mediaId,babelHelpers["extends"]({},l,{validatedVideoInfo:babelHelpers["extends"]({},l.validatedVideoInfo,{jpegThumbnail:f})}));default:g;return d("MAWDexieTable").dexieResolve()}};d("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"handle_media_download_success",hash:b,status:c("MAWMediaDownloadStatus").SUCCESS,type:"preview"});return k().then(function(){return a.messages.where("msgId").anyOf(l.msgIds).toArray().then(function(b){return a.threads.where("jid").anyOf(b.map(function(a){return a.threadJid})).toArray().then(function(c){return d("MAWDexieTable").dexieAll(c.map(function(c){var e=d("MAWMediaUtils").createHdTypesForBridgeMedia(b);c=d("MAWBridgeTypesCreators").createBridgeMedia({chatJid:c.jid,filteredMsgIds:d("MAWBridgeTypesCreators").getMsgIdsFilteredByJid(b,c.jid),hasMediaForUI:!0,hdTypes:e,media:l,sortOrderMs:m==null?void 0:m.sortOrderMs});return d("MAWMediaAfterTxns").handleNewMediaAfterTxnWithBridgeMedia(a,c,b)})).then(function(){return d("WAResultOrError").makeResult()})})})})})}});g.handleMediaPreviewDownload=a}),98);
__d("MAWHandleMediaPreviewDownloadAsFailedApi",["MAWMediaPreviewDownloadManager","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,c){d("MAWMediaPreviewDownloadManager").markMediaPreviewAsFailed(a,c);return(h||(h=b("Promise"))).resolve()};g.handleMediaPreviewDownloadFailed=a}),98);
__d("MebWAMediaDownloader",["MAWHandleMediaPreviewBeforeDownloadApi","MAWHandleMediaPreviewDownloadApi","MAWHandleMediaPreviewDownloadAsFailedApi","WAAPI","WAIsMediaExpiredError","WALogger","WAStartMediaDownloadQplFlow","WATimeUtils","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(){function a(a,b,c){this.mediaDownloadMetadata=a,this.downloadCallbacks=b,this.waApiDownloadCall=c}var e=a.prototype;e.handle=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a,b=this.mediaDownloadMetadata.mediaEntry.mediaKeyTimestamp;if(b==null){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][WAMediaDownloader] Cannot download media - missing mediaKeyTimestamp"])));return this.handleError()}b=!d("WATimeUtils").happenedWithin(b,29*d("WATimeUtils").DAY_SECONDS);a=(a=this.mediaDownloadMetadata.isUrlRenewed)!=null?a:!1;if(!a&&(b||c("gkx")("23960"))){d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] downloading media from MI directly"])));return this.handleUrlExpired()}a=this.mediaDownloadMetadata;b=a.hash;var e=a.mediaEntry;a=a.protocolMsgId;b=(yield this.waApiDownloadCall(b,e,a));if(b.success)return this.downloadCallbacks.onDownloadSuccess({mimeType:b.value.mimeType,plaintext:b.value.plaintext});if(d("WAIsMediaExpiredError").isMediaExpiredError(b.error))return this.handleUrlExpired();else return this.handleError()});function e(){return a.apply(this,arguments)}return e}();e.handleUrlExpired=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;yield this.downloadCallbacks.onUrlExpired();return(a=this.mediaDownloadHandler)==null?void 0:a.handle()});function c(){return a.apply(this,arguments)}return c}();e.handleError=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;yield this.downloadCallbacks.onDownloadError();return(a=this.mediaDownloadHandler)==null?void 0:a.handle()});function c(){return a.apply(this,arguments)}return c}();e.getDownloadMetadata=function(){return this.mediaDownloadMetadata};e.setNextHandler=function(a){this.mediaDownloadHandler=a};return a}();e=function(a,b,e){var f=d("WAStartMediaDownloadQplFlow").startMediaDownloadQplFlow({downloadEntry:"MebWAMediaDownloader",msgType:null,protocolMsgId:e,triggerUIView:null});return c("WAAPI").downloadMedia({downloadMediaMetric:f,handleMediaPreviewBeforeDownload:d("MAWHandleMediaPreviewBeforeDownloadApi").handleMediaPreviewBeforeDownload,handleMediaPreviewDownload:d("MAWHandleMediaPreviewDownloadApi").handleMediaPreviewDownload,handleMediaPreviewDownloadFailed:d("MAWHandleMediaPreviewDownloadAsFailedApi").handleMediaPreviewDownloadFailed,hash:a,mediaEntry:b,protocolMsgId:e})};g.MebWAMediaDownloader=a;g.MebWADownloadMediaFromWorker=e}),98);
__d("EncryptedBackupsDYIMessageProcessingUtils",["EncryptedBackupsDYIMediaDownloadHandlers","EncryptedBackupsDYISingleton","FBLogger","MAWBridge","MAWFrontendMediaUtils","MebWAMediaDownloader","Promise","WAHashUtils","WAJids","WALongInt","WAMediaUtils","WAProgressiveJpegGetScanLengths","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r;function a(a,b){return{isUnsent:!1,media:new Set(),reactions:[],senderName:s(a),text:"",timestamp:b!=null?b:0,type:""}}function s(a){var b=d("EncryptedBackupsDYISingleton").getSingleton(),c="Unknown User";if(a!=null){b=b.getContactNameForContactId(a);b!=null&&(c=b)}return c}function e(a,b,c,d){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){var g=d("EncryptedBackupsDYISingleton").getSingleton(),h=g.getLogger(),i=h.TAGS([d("WAHashUtils").sanitisePlaintextHash(a)]);c("FBLogger")("wmi_eb").tags(["labyrinth_dyi"]).debug("Sending the media download bridge call for plaintext hash: %s",d("WAHashUtils").sanitisePlaintextHash(a));f=(yield d("MAWBridge").getBridge().sendAndReceive("backend","dyiDownloadMediaV2",{mediaEntry:f,plaintextHash:a,protocolMsgId:b,sortOrderMs:e}));c("FBLogger")("wmi_eb").tags(["labyrinth_dyi"]).debug("Received the media download result from the bridge for plaintext hash: %s, success: %s, error: %s",d("WAHashUtils").sanitisePlaintextHash(a),f.success?"true":"false",f.error);if(f.success){e=f.value;var j=e.unvalidatedMimeType;e=e.validatedResult;j=e.skipValidation?j:e.mimeType;j=(yield d("EncryptedBackupsDYIMediaDownloadHandlers").DYIMediaDownloadHandler(a,j,e.validatedPlaintext,b));if(!j.success){i.WARN(n||(n=babelHelpers.taggedTemplateLiteralLoose(["Failed to save media: ",", ",""])),j.error,j.payload);h.ERROR(o||(o=babelHelpers.taggedTemplateLiteralLoose(["Failed to save media: ",", ",""])),j.error,j.payload);g.deletePlaintextHashFromAttachmentDownloadsInProgress(a);return}}else{i.WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media: ",", ",""])),f.error,f.payload);h.ERROR(q||(q=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media: ",", ",""])),f.error,f.payload);g.deletePlaintextHashFromAttachmentDownloadsInProgress(a);return}});return t.apply(this,arguments)}function f(a,c,e,f,g,n,o,p,q,s,t){var u=d("EncryptedBackupsDYISingleton").getSingleton(),v=u.getLogger(),w=v.TAGS([d("WAHashUtils").sanitisePlaintextHash(q)]),x={author:d("WAJids").toMsgrUserJid(o),chat:d("WAJids").toMsgrUserJid(g),externalId:p},y={hash:q,isUrlRenewed:!1,mediaEntry:f,protocolMsgId:x,sortOrderMs:s};o={onDownloadError:function(){w.WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media"])));v.ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media"])));u.deletePlaintextHashFromAttachmentDownloadsInProgress(y.hash);return(r||(r=b("Promise"))).resolve()},onDownloadSuccess:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){w.LOG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Successfully downloaded media"])));var b=a.mimeType;a=a.plaintext;yield d("EncryptedBackupsDYIMediaDownloadHandlers").DYIMediaDownloadHandler(y.hash,b,a,x)});function c(b){return a.apply(this,arguments)}return c}(),onUrlExpired:function(){w.LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Media CDN URL has expired and should be renewed"])));return(r||(r=b("Promise"))).resolve()}};var z=new(d("MebWAMediaDownloader").MebWAMediaDownloader)(y,o,a),A=f.serverMediaType;f=f.objectId;if(A!=null&&f!=null&&typeof s==="number"){c={backupEntFbid:c,deliveryObjectId:f,hash:q,mediaType:A,messageId:p,productType:e,sortOrder:s,threadId:g,threadKey:n};f={onResignCdnUrlFailure:function(a){w.WARN(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Failed to resign CDN URL: ",""])),a.message);v.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Failed to resign CDN URL: ",""])),a.message);u.deletePlaintextHashFromAttachmentDownloadsInProgress(y.hash);return(r||(r=b("Promise"))).resolve()},onResignCdnUrlSuccess:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){});function c(){return a.apply(this,arguments)}return c}()};q=t(c,f);z.setNextHandler(q);q.setNextHandler(new(d("MebWAMediaDownloader").MebWAMediaDownloader)(y,o,a))}void z.handle()}function u(a,b,c){var e,f,g,h;e=(e=a.integral)==null||(e=e.transport)==null||(e=e.ancillary)==null?void 0:e.mimetype;if(e==null)return d("WAResultOrError").makeError("mime-type-missing");e=d("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(e,b).serverMediaType;if(e==null)return d("WAResultOrError").makeError("server-media-type-missing");b=(b=a.integral)==null||(b=b.transport)==null||(b=b.integral)==null?void 0:b.directPath;if(b==null)return d("WAResultOrError").makeError("direct-path-missing");f=(f=a.integral)==null||(f=f.transport)==null||(f=f.integral)==null?void 0:f.fileSha256;if(f==null)return d("WAResultOrError").makeError("plaintext-hash-missing");g=d("WALongInt").maybeNumber((g=a.integral)==null||(g=g.transport)==null||(g=g.integral)==null?void 0:g.mediaKeyTimestamp);if(g==null)return d("WAResultOrError").makeError("media-key-timestamp-missing");var i;if(((h=a.ancillary)==null?void 0:h.scanLengths)!=null&&((h=a.ancillary)==null?void 0:h.scansSidecar)!=null){h=a.ancillary;var j=h.scanLengths;h=h.scansSidecar;i={scanLengths:j.map(d("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength),sidecar:h}}var k;if(((j=a.integral)==null||(j=j.transport)==null||(j=j.ancillary)==null||(j=j.thumbnail)==null?void 0:j.downloadableThumbnail)!=null){h=a.integral.transport.ancillary.thumbnail.downloadableThumbnail;j=h.directPath;var l=h.fileEncSha256,m=h.fileSha256,n=h.mediaKey,o=h.mediaKeyTimestamp;h=h.objectId;k={directPath:j,fileEncSha256:l,fileSha256:m,mediaKey:n,mediaKeyTimestamp:d("WALongInt").maybeNumber(o),objectId:h}}o={directPath:b,downloadableThumbnail:k,fileEncSha256:(j=a.integral)==null||(j=j.transport)==null||(j=j.integral)==null?void 0:j.fileEncSha256,filename:c,fileSha256:f,mediaKey:(l=a.integral)==null||(l=l.transport)==null||(l=l.integral)==null?void 0:l.mediaKey,mediaKeyTimestamp:d("WATimeUtils").castToUnixTime(g),objectId:(m=a.integral)==null||(m=m.transport)==null||(m=m.ancillary)==null?void 0:m.objectId,progressiveJpegDetails:i,serverMediaType:e,size:d("WALongInt").maybeNumber((n=a.integral)==null||(n=n.transport)==null||(n=n.ancillary)==null?void 0:n.fileLength)};return d("WAResultOrError").makeResult(d("WAMediaUtils").rawDataToMediaEntry(o))}g.buildBaseDyiMessage=a;g.getSenderName=s;g.downloadMediaWithMediaManager=e;g.startMediaDownloadChain=f;g.decodeMediaEntryFromAttachmentPayload=u}),98);
__d("MAWCatQuery_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29559957360285299"}),null);
__d("MAWCatQuery.instagram.graphql",["MAWCatQuery_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"SecureMessageOverWACATGraphResult",kind:"LinkedField",name:"secure_message_over_wa_cat_query",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"encrypted_serialized_cat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"expiration_time_in_seconds",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MAWCatQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MAWCatQuery",selections:a},params:{id:b("MAWCatQuery_instagramRelayOperation"),metadata:{},name:"MAWCatQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MAWUnstoredQuotedMsgUtils",["FBLogger","MAWMsgType","WAJids","WAMsgType"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a==null)return;var b=a.content;a=a.remoteJid;var e;switch(b.type){case d("MAWMsgType").MSG_TYPE.TEXT:e=j(b);break;case d("MAWMsgType").MSG_TYPE.IMAGE:e=k(b);break;case d("MAWMsgType").MSG_TYPE.VIDEO:e=l(b);break;case d("MAWMsgType").MSG_TYPE.PTT:e=m(b);break;case d("MAWMsgType").MSG_TYPE.GIF:e=n(b);break;case d("MAWMsgType").MSG_TYPE.STICKER:e=o(b);break;case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:e=q(b);break;case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:e=r(b);break;case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:e=s(b);break;case d("WAMsgType").NOTE_REPLY:e=p(b);break;case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:e=t(b);break;default:b.type;throw c("FBLogger")("messenger_web").mustfixThrow("For flow")}return{content:e,remoteJid:a}}function i(a){if(d("WAJids").isAuthorSystem(a.author))throw c("FBLogger")("messenger_web").mustfixThrow("A system message cannot be quoted");return{author:a.author,externalId:a.externalId,ts:a.ts}}function j(a){return babelHelpers["extends"]({},i(a),{msgContent:a.msgContent,type:d("MAWMsgType").MSG_TYPE.TEXT})}function k(a){return babelHelpers["extends"]({},i(a),{type:d("MAWMsgType").MSG_TYPE.IMAGE})}function l(a){return babelHelpers["extends"]({},i(a),{type:d("MAWMsgType").MSG_TYPE.VIDEO})}function m(a){return babelHelpers["extends"]({},i(a),{type:d("MAWMsgType").MSG_TYPE.PTT})}function n(a){return babelHelpers["extends"]({},i(a),{type:d("MAWMsgType").MSG_TYPE.GIF})}function o(a){return babelHelpers["extends"]({},i(a),{type:d("MAWMsgType").MSG_TYPE.STICKER})}function p(a){return babelHelpers["extends"]({},i(a),{expirationTs:a.expirationTs,msgContent:a.msgContent,type:d("WAMsgType").NOTE_REPLY})}function q(a){return babelHelpers["extends"]({},i(a),{type:d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE})}function r(a){return babelHelpers["extends"]({},i(a),{type:d("MAWMsgType").MSG_TYPE.UNAVAILABLE})}function s(a){return babelHelpers["extends"]({},i(a),{type:d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL})}function t(a){return babelHelpers["extends"]({},i(a),{type:d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH})}function a(a){return{quote:h(a.quote)}}g.getWithQuoteMsg=a}),98);
__d("MAWUnstoredTypedMsgUtils",["MAWAdminMsgType","MAWDbMsg","MAWMsgType","MAWRavenUtils","MAWUnstoredQuotedMsgUtils","WAJids"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return{ack:a.ack,author:a.id.author,ebTimestampMs:a.ebTimestampMs,externalId:a.id.externalId,reportingMeta:a.reportingMeta,serverTs:a.serverTs,ts:a.ts}}function i(a){return{forwardingScore:a.forwardingScore,isForwarded:a.isForwarded}}function j(a){return{ephemeralSetting:k(a.ephemeralSetting),messageDeleteTs:a.deleteTs,messageExpirationTs:a.expirationTs}}function k(a){if(a==null)return;return{ephemeralExpirationInSec:a.expirationTs,ephemeralLastUpdatedOrSetTimestamp:a.updatedTs}}function a(a,b){return babelHelpers["extends"]({},h(a),i(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,collapsibleId:a.collapsibleId,isCollapsed:a.isCollapsed,msgContent:{commands:b.commands,content:(a=b.sentWithMessage)!=null?a:"",mentionedJids:b.mentionedJids},type:d("MAWMsgType").MSG_TYPE.XMA,xmaMessageType:b.targetType})}function b(a){return babelHelpers["extends"]({},h(a),i(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,editCount:0,msgContent:a.msgContent,specialTextSize:a.specialTextSize,type:d("MAWMsgType").MSG_TYPE.TEXT})}function c(a){return babelHelpers["extends"]({},h(a),i(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,plaintextHash:(a=a.mediaId)!=null?a:void 0,type:d("MAWMsgType").MSG_TYPE.IMAGE})}function e(a){return babelHelpers["extends"]({},h(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,ravenEphemeralMediaState:d("MAWRavenUtils").getEphemeralMediaState(a.ravenEphemeralMediaState),ravenEphemeralType:a.ravenEphemeralType,ravenMediaType:a.ravenMediaType,type:d("MAWMsgType").MSG_TYPE.RAVEN})}function f(a){return babelHelpers["extends"]({},h(a),i(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,plaintextHash:(a=a.mediaId)!=null?a:void 0,type:d("MAWMsgType").MSG_TYPE.VIDEO})}function l(a){return babelHelpers["extends"]({},h(a),i(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,type:d("MAWMsgType").MSG_TYPE.PTT})}function m(a){return{adminMsgContent:a.adminMsgContent,adminType:a.adminType}}function n(a){return babelHelpers["extends"]({},h(a),{altIndex:void 0,author:d("WAJids").AUTHOR_SYSTEM,msgContent:m(a.msgContent),type:d("MAWMsgType").MSG_TYPE.ADMIN})}function o(a){return babelHelpers["extends"]({},h(a),i(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,plaintextHash:(a=a.mediaId)!=null?a:void 0,type:d("MAWMsgType").MSG_TYPE.GIF})}function p(a){return babelHelpers["extends"]({},h(a),i(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,plaintextHash:(a=a.mediaId)!=null?a:void 0,type:d("MAWMsgType").MSG_TYPE.STICKER})}function q(a){return babelHelpers["extends"]({},h(a),i(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,type:d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE})}function r(a){return babelHelpers["extends"]({},h(a),{altIndex:d("MAWDbMsg").FUTUREPROOF_ALT_INDEX,msgContent:a.msgContent,type:d("MAWMsgType").MSG_TYPE.FUTUREPROOF})}function s(a){return babelHelpers["extends"]({},h(a),{altIndex:void 0,ebTimestampMs:a.ebTimestampMs,revokedExternalId:a.revokedExternalId,type:d("MAWMsgType").MSG_TYPE.REVOKED})}function t(a){return{adminMsgContent:a.adminMsgContent,adminType:a.adminType}}function u(a){return babelHelpers["extends"]({},h(a),{altIndex:void 0,msgContent:t(a.msgContent),type:d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN})}function v(a){return{adminMsgContent:a.adminMsgContent,adminType:a.adminType,screenshotActionType:a.screenshotActionType,version:a.version}}function w(a){return babelHelpers["extends"]({},h(a),{altIndex:void 0,msgContent:v(a.msgContent),type:d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION})}function x(a){return{adminType:a.adminType,authorName:a.authorName}}function y(a){return babelHelpers["extends"]({},h(a),{altIndex:void 0,msgContent:x(a.msgContent),type:d("MAWMsgType").MSG_TYPE.ICDC_ALERT})}function z(a){return babelHelpers["extends"]({},h(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,type:d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE})}function A(a,b){b=b.receiverFetchId;return babelHelpers["extends"]({},h(a),i(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,receiverFetchId:b,type:d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH})}function B(a,b){var c=a.id.author===d("WAJids").AUTHOR_ME;b=[b.name];c||b.unshift(a.id.author!==d("WAJids").AUTHOR_ME&&a.id.author!==d("WAJids").AUTHOR_SYSTEM?d("WAJids").userIdFromJid(a.id.author):a.id.author);c=c?d("MAWAdminMsgType").CURRENT_USER_CREATED_POLL:d("MAWAdminMsgType").PARTICIPANT_CREATED_POLL;return babelHelpers["extends"]({},h(a),{altIndex:void 0,msgContent:{adminMsgContent:b,adminType:c,version:1},type:d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE})}function C(a){return babelHelpers["extends"]({},h(a),{altIndex:void 0,type:d("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE})}g.getXMAMsg=a;g.getTextMsg=b;g.getImageMsg=c;g.getRavenMsg=e;g.getVideoMsg=f;g.getPttMsg=l;g.getAdminMsg=n;g.getGifMsg=o;g.getStickerMsg=p;g.getDocumentFileMsg=q;g.getFutureproofMsg=r;g.getRevokedMsg=s;g.getEphemeralSettingAdminMsg=u;g.getEphemeralScreenshotActionMsg=w;g.getICDCAlertMsg=y;g.getBumpExistingMessageMsg=z;g.getReceiverFetchMsg=A;g.getGroupPollCreateMsg=B;g.getGroupPollUpdateMsg=C}),98);
__d("MAWUnstoredMsgUtils",["FBLogger","MAWMsgType","MAWUnstoredTypedMsgUtils","qex"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.unstoredGroupPollCreateInfo,e=a.unstoredMsg,f=a.unstoredReceiverFetchInfo;a=a.unstoredXMA;if(e==null)return null;switch(e.type){case d("MAWMsgType").MSG_TYPE.TEXT:return d("MAWUnstoredTypedMsgUtils").getTextMsg(e);case d("MAWMsgType").MSG_TYPE.IMAGE:return d("MAWUnstoredTypedMsgUtils").getImageMsg(e);case d("MAWMsgType").MSG_TYPE.VIDEO:return d("MAWUnstoredTypedMsgUtils").getVideoMsg(e);case d("MAWMsgType").MSG_TYPE.PTT:return d("MAWUnstoredTypedMsgUtils").getPttMsg(e);case d("MAWMsgType").MSG_TYPE.ADMIN:return d("MAWUnstoredTypedMsgUtils").getAdminMsg(e);case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:return d("MAWUnstoredTypedMsgUtils").getFutureproofMsg(e);case d("MAWMsgType").MSG_TYPE.REVOKED:return d("MAWUnstoredTypedMsgUtils").getRevokedMsg(e);case d("MAWMsgType").MSG_TYPE.GIF:return d("MAWUnstoredTypedMsgUtils").getGifMsg(e);case d("MAWMsgType").MSG_TYPE.STICKER:return d("MAWUnstoredTypedMsgUtils").getStickerMsg(e);case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return d("MAWUnstoredTypedMsgUtils").getDocumentFileMsg(e);case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:return d("MAWUnstoredTypedMsgUtils").getEphemeralSettingAdminMsg(e);case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:return d("MAWUnstoredTypedMsgUtils").getEphemeralScreenshotActionMsg(e);case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:return d("MAWUnstoredTypedMsgUtils").getICDCAlertMsg(e);case d("MAWMsgType").MSG_TYPE.XMA:if((a==null?void 0:a.xma)==null)throw c("FBLogger")("messenger_web").mustfixThrow("XMA content cannot be parsed without XMA payload");return d("MAWUnstoredTypedMsgUtils").getXMAMsg(e,a==null?void 0:a.xma);case d("MAWMsgType").MSG_TYPE.RAVEN:return d("MAWUnstoredTypedMsgUtils").getRavenMsg(e);case d("MAWMsgType").MSG_TYPE.RAVEN_ACTION:case d("MAWMsgType").MSG_TYPE.REACTION:case d("MAWMsgType").MSG_TYPE.EDIT_ACTION:return null;case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return d("MAWUnstoredTypedMsgUtils").getBumpExistingMessageMsg(e);case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:if(f==null)throw c("FBLogger")("messenger_web").mustfixThrow("Receiver Fetch Info cannot be null for Receiver Fetch Msg");return d("MAWUnstoredTypedMsgUtils").getReceiverFetchMsg(e,f);case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:if(!c("qex")._("3169"))throw c("FBLogger")("messenger_web").mustfixThrow("Group polls are not yet supported");if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("Poll Create Info cannot be null for Poll Create Msg");return d("MAWUnstoredTypedMsgUtils").getGroupPollCreateMsg(e,b);case d("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:if(!c("qex")._("3169"))throw c("FBLogger")("messenger_web").mustfixThrow("Group polls are not yet supported");return d("MAWUnstoredTypedMsgUtils").getGroupPollUpdateMsg(e);default:e.type;return null}}function b(a){if(a==null)return null;switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:return d("MAWUnstoredTypedMsgUtils").getTextMsg(a);case d("MAWMsgType").MSG_TYPE.GIF:return d("MAWUnstoredTypedMsgUtils").getGifMsg(a);case d("MAWMsgType").MSG_TYPE.STICKER:return d("MAWUnstoredTypedMsgUtils").getStickerMsg(a);default:return null}}function e(a){a=a.unstoredMsg;if(!a||a.type!==d("MAWMsgType").MSG_TYPE.REACTION)return null;a=a;return{ack:a.ack,author:a.id.author,externalId:a.id.externalId,groupingKey:a.groupingKey,reaction:a.reaction,reactToAuthor:a.reactToAuthor,reactToExternalId:a.reactToExternalId,senderTimestampMs:a.senderTimestampMs,threadJid:a.id.chat,ts:a.ts}}function f(a){a=a.unstoredMsg;if(!a||a.type!==d("MAWMsgType").MSG_TYPE.RAVEN_ACTION)return null;a=a;return{ack:a.ack,actionTimestamp:a.actionTimestamp,actionType:a.actionType,author:a.id.author,externalId:a.id.externalId,ravenActionToMsgExternalId:a.ravenActionToMsgExternalId,ts:a.ts,type:a.type}}function h(a){a=a.unstoredIncomingGroupInvite;return!a?null:babelHelpers["extends"]({},a)}function i(a){return a==null?null:{ack:a.ack,author:a.id.author,editMsgContent:a.editMsgContent,externalId:a.id.externalId,originalMsgExternalId:a.originalMsgExternalId,reportingMeta:a.reportingMeta,serverTs:a.serverTs,specialTextSize:a.specialTextSize,ts:a.ts,type:a.type}}function j(a){a=a.unstoredReceiverFetchInfo;return a==null?null:babelHelpers["extends"]({},a,{type:"sticker"})}function k(a){a=a.unstoredGroupPollCreateInfo;return a==null?null:babelHelpers["extends"]({},a,{latestSenderTimestampsMs:new Map()})}function l(a){a=a.unstoredGroupPollUpdateInfo;return a==null?null:{encryptedMessage:a.pollUpdateMessage}}g.getUnstoredMsg=a;g.getUnstoredAssociatedMsg=b;g.getUnstoredReaction=e;g.getUnstoredRavenActionMsg=f;g.getGroupInvite=h;g.getUnstoredEditActionMsg=i;g.getUnstoredReceiverFetchInfo=j;g.getUnstoredGroupPollCreateInfo=k;g.getUnstoredDbGroupPollUpdateInfo=l}),98);
__d("MAWUnstoredMediaUtils",["MAWUnstoredMsgUtils","WASortedLists"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a==null?null:{accessibilitySummaryText:a.accessibilitySummaryText,mediaEntry:a.mediaEntry,mediaType:a.mediaType,msgIds:d("WASortedLists").emptySet(),plaintextHash:a.plaintextHash,size:a.size,ts:a.ts,validatedAudioInfo:a.validatedAudioInfo,validatedDocumentFileInfo:a.validatedDocumentFileInfo,validatedImageInfo:a.validatedImageInfo,validatedVideoInfo:a.validatedVideoInfo}}function a(a){a=a.unstoredXMA;if(a==null)return;var b=a.unstoredAssociatedMedia,c=a.unstoredAssociatedMsg,e=a.unstoredFavicon,f=a.unstoredHeaderMedia,g=a.unstoredPreviews;a=a.xma;return{unstoredAssociatedMedia:(b=h(b))!=null?b:void 0,unstoredAssociatedMsg:(b=d("MAWUnstoredMsgUtils").getUnstoredAssociatedMsg(c))!=null?b:void 0,unstoredDbXMA:{author:a.author,contentRef:a.contentRef,ctas:a.ctas,defaultCTA:a.defaultCTA,externalId:a.externalId,headerTitle:a.headerTitle,isTombstoned:a.isTombstoned,maxSubtitleNumOfLines:a.maxSubtitleNumOfLines,maxTitleNumOfLines:a.maxTitleNumOfLines,overlayDescription:a.overlayDescription,overlayIconGlyph:a.overlayIconGlyph,overlayTitle:a.overlayTitle,subtitleText:a.subtitleText,targetExpiringAtSec:a.targetExpiringAtSec,targetId:a.targetId,targetType:a.targetType,targetUsername:a.targetUsername,threadJid:a.threadJid,titleText:a.titleText,xmaDataclass:a.xmaDataclass,xmaLayoutType:a.xmaLayoutType},unstoredFavicon:(c=h(e))!=null?c:void 0,unstoredHeaderMedia:(b=h(f))!=null?b:void 0,unstoredPreviews:g?g.map(function(a){return h(a)}).filter(Boolean):void 0}}g.getUnstoredMedia=h;g.getUnstoredXMA=a}),98);
__d("MAWUnstoredContentToUnstoredDbContentUtils",["MAWUnstoredMediaUtils","MAWUnstoredMsgUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,c=(b=d("MAWUnstoredMsgUtils")).getUnstoredMsg(a),e=d("MAWUnstoredMediaUtils").getUnstoredMedia(a.unstoredMedia),f=b.getUnstoredReaction(a),g=b.getUnstoredRavenActionMsg(a),h=d("MAWUnstoredMediaUtils").getUnstoredXMA(a),i=b.getGroupInvite(a),j=b.getUnstoredEditActionMsg(a.unstoredEditMsg),k=b.getUnstoredReceiverFetchInfo(a),l=b.getUnstoredGroupPollCreateInfo(a);b=b.getUnstoredDbGroupPollUpdateInfo(a);if(i==null)return{contentTypeForLogging:a.contentTypeForLogging,unstoredDbEditActionMsg:j,unstoredDbGroupPollCreateInfo:l,unstoredDbGroupPollUpdateInfo:b,unstoredDbMedia:e,unstoredDbMsg:c,unstoredDbRavenActionMsg:g,unstoredDbReaction:f,unstoredDbReceiverFetchInfo:k,unstoredXMA:h,xmaTargetTypeForLogging:a.xmaTargetTypeForLogging};else return{contentTypeForLogging:a.contentTypeForLogging,unstoredDbEditActionMsg:j,unstoredDbGroupPollCreateInfo:l,unstoredDbGroupPollUpdateInfo:b,unstoredDbMedia:e,unstoredDbMsg:c,unstoredDbRavenActionMsg:g,unstoredDbReaction:f,unstoredDbReceiverFetchInfo:k,unstoredIncomingDbGroupInvite:i,unstoredXMA:h,xmaTargetTypeForLogging:a.xmaTargetTypeForLogging}}g.unstoredContentToUnstoredDbContent=a}),98);
__d("MAWHandleEchoProtobufsRestoreApi",["EBLogger","EchoMessageMediaFieldUtils","EncryptedBackupsDYIMessageProcessingUtils","LSMEBTaskCreationSource","MAWJids","MAWMsg","MAWMsgType","MAWODSProxy","MAWUnstoredContentToUnstoredDbContentUtils","MessageBackupSupplementalKeyGenerator","WAAckLevel","WAArmadilloApplication.pb","WAArmadilloBackupMessage.pb","WABase64","WAConsumerApplication.pb","WAHashUtils","WAJids","WAMediaTransport.pb","WAMsgApplication.pb","WAMsgType","WAOdsEnums","WAParseMediaTransportProtocol","WAParseMessageApplication","WAStanzaUtils","WATimeUtils","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=d("EBLogger").EBLogger().tags(["ProtobufRestore"]);function a(a){var b=a.isMediaGalleryRestore,e=a.taskSource;b!=null&&b?(d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.EB_RESTORE,key:"is_media_gallery_restore_param"}),D.WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["isMediaGalleryRestore is deprecated. Consider using taskSource insted"]))),b=c("LSMEBTaskCreationSource").MEDIA_GALLERY_RESTORE):b=e!=null?e:c("LSMEBTaskCreationSource").UNKNOWN;return babelHelpers["extends"]({},a,{isMediaGalleryRestore:void 0,taskSource:b})}function E(a,b,c){c={author:c,chat:b,externalId:a};return c}function F(a,b,c,e,f,g,h,n,o,p,q,r,s,t,u,v){if(a===d("MAWMsgType").MSG_TYPE.TEXT)if(h==null){D.MUSTFIX(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Text content cannot be null for msg type text - unable to restore msg"])));return}else{h={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,forwardingScore:g,id:e,isForwarded:f,msgContent:{content:h,mentionedJids:n!=null?n.map(d("WAJids").validateUserJid).filter(Boolean):void 0},ts:b,type:d("MAWMsgType").MSG_TYPE.TEXT};return h}else if(a===d("MAWMsgType").MSG_TYPE.VIDEO){n={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,forwardingScore:g,id:e,isForwarded:f,mediaId:void 0,ts:b,type:d("MAWMsgType").MSG_TYPE.VIDEO};return n}else if(a===d("MAWMsgType").MSG_TYPE.GIF){h={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,forwardingScore:g,id:e,isForwarded:f,mediaId:void 0,ts:b,type:d("MAWMsgType").MSG_TYPE.GIF};return h}else if(a===d("MAWMsgType").MSG_TYPE.IMAGE){n={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,forwardingScore:g,id:e,isForwarded:f,mediaId:void 0,ts:b,type:d("MAWMsgType").MSG_TYPE.IMAGE};return n}else if(a===d("MAWMsgType").MSG_TYPE.STICKER){h={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,forwardingScore:g,id:e,isForwarded:f,mediaId:void 0,ts:b,type:d("MAWMsgType").MSG_TYPE.STICKER};return h}else if(a===d("MAWMsgType").MSG_TYPE.PTT){n={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,forwardingScore:g,id:e,isForwarded:f,mediaId:void 0,ts:b,type:d("MAWMsgType").MSG_TYPE.PTT};return n}else if(a===d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE){h={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,forwardingScore:g,id:e,isForwarded:f,mediaId:void 0,ts:b,type:d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE};return h}else if(a===d("MAWMsgType").MSG_TYPE.XMA){n={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,forwardingScore:g,id:e,isForwarded:f,ts:b,type:d("MAWMsgType").MSG_TYPE.XMA};return n}else if(a===d("MAWMsgType").MSG_TYPE.REVOKED){if(o==null){D.MUSTFIX(j||(j=babelHelpers.taggedTemplateLiteralLoose(["No revoked msg external id found for revoked msg"])));return}h={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,ebTimestampMs:null,id:e,msgContent:void 0,revokedExternalId:o,ts:b,type:d("MAWMsgType").MSG_TYPE.REVOKED,unsendMsgContentDeleteTs:b};return h}else if(a===d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE){n={ack:d("WAAckLevel").ACK.SENT,id:e,ts:b,type:d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE};return n}else if(a===d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH){o={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,forwardingScore:g,id:e,isForwarded:f,ts:b,type:d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH};return o}else if(a===d("MAWMsgType").MSG_TYPE.RAVEN){if(p==null){D.MUSTFIX(k||(k=babelHelpers.taggedTemplateLiteralLoose(["No raven msg ephemeral type found for raven msg"])));return}if(q==null){D.MUSTFIX(l||(l=babelHelpers.taggedTemplateLiteralLoose(["No raven msg media type found for raven msg"])));return}h={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,id:e,mediaId:r,ravenEphemeralMediaState:d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN,ravenEphemeralType:p,ravenMediaType:q,ts:b,type:d("MAWMsgType").MSG_TYPE.RAVEN};return h}else if(a===d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE){if(s==null||t==null||u==null||v==null){D.MUSTFIX(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] One of the mandatory fields is missing for the group poll creation msg"])));return}n={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,id:e,ts:b,type:d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE};return n}}function b(a,b,c,e,f){var g,h,i=a.metadata,j=a.msgType;if(i==null){D.MUSTFIX(n||(n=babelHelpers.taggedTemplateLiteralLoose(["Missing required metadata, unable to create db msg from protobuf"])));return}if(j==null){D.MUSTFIX(o||(o=babelHelpers.taggedTemplateLiteralLoose(["Missing required msg type, unable to create db msg from protobuf"])));return}var k=i.messageId;i=i.senderId;g=(g=a.decodedPayload)==null?void 0:g.text;h=(h=a.decodedPayload)==null?void 0:h.mentionedJid;if(k==null){D.MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Missing required message id, unable to create db msg from protobuf"])));return}if(i==null){D.MUSTFIX(q||(q=babelHelpers.taggedTemplateLiteralLoose(["Missing required author, unable to create db msg from protobuf"])));return}var l=d("WATimeUtils").castMilliSecondsToUnixTime(a.sortOrderMs);i=d("MAWJids").toUserJid(i);var m=d("WAStanzaUtils").toStanzaId(k),t=i===c?d("WAJids").AUTHOR_ME:i,u=E(m,b,i);if(a.editMsgData.length>0){var v=l;a.editMsgData.forEach(function(a){var b;if(a.ts>v&&((b=a.editMsgContent.message)==null?void 0:b.text)!=null){v=a.ts;g=(b=a.editMsgContent.message)==null?void 0:b.text;h=(b=a.editMsgContent.message)==null?void 0:b.mentionedJid}})}u=F(j,l,t,u,a.isForwarded,a.forwardingScore,g,h,a.revokedMsgExternalId,a.ravenMsgEphemeralType,a.ravenMsgMediaType,(l=a.ravenUnstoredMedia)==null?void 0:l.plaintextHash,(t=a.groupPollInfo)==null?void 0:t.encKey,(u=a.groupPollInfo)==null?void 0:u.name,(l=a.groupPollInfo)==null?void 0:l.options,(t=a.groupPollInfo)==null?void 0:t.selectableOptionsCount);if(u==null){D.MUSTFIX(r||(r=babelHelpers.taggedTemplateLiteralLoose(["Missing required fields, unable to create db msg from protobuf for thread jid "," and otid ",""])),b,m);return}var w;if(a.xmaData!=null&&((l=a.xmaData)==null?void 0:l.targetType)!=null){l={author:i,externalId:m,targetType:(t=a.xmaData)==null?void 0:t.targetType,threadJid:b};w={unstoredAssociatedMedia:void 0,unstoredAssociatedMsg:void 0,unstoredFavicon:void 0,unstoredHeaderMedia:void 0,unstoredPreviews:void 0,xma:l}}i={unstoredGroupPollCreateInfo:a.groupPollInfo,unstoredMedia:void 0,unstoredMsg:u,unstoredQuotedMedia:void 0,unstoredReceiverFetchInfo:a.receiverFetchInfo,unstoredXMA:w};u.type===d("MAWMsgType").MSG_TYPE.RAVEN&&a.ravenUnstoredMedia!=null&&(i.unstoredMedia=a.ravenUnstoredMedia);t=d("MAWUnstoredContentToUnstoredDbContentUtils").unstoredContentToUnstoredDbContent(i);if(t.unstoredDbMsg!=null){b=t.unstoredDbMsg;b.sortOrderMs=a.sortOrderMs;b.serverTs=d("WATimeUtils").castToUnixTime(a.sortOrderMs/1e3);a.noteReply!=null&&(b.quote={content:a.noteReply,remoteJid:void 0});l=e.get(k);b.author!=null&&c===b.author&&b.author!==d("WAJids").AUTHOR_SYSTEM&&(b.author=d("WAJids").AUTHOR_ME);l!=null&&(b.quoteExternalId=d("WAStanzaUtils").toStanzaId(l));j===d("MAWMsgType").MSG_TYPE.TEXT&&(b.editCount=a.editMsgData.length);u={author:b.author,stanzaId:m,unstoredDbContent:t};t.unstoredDbMedia!=null&&f!=null&&f.set(m,t.unstoredDbMedia);return u}D.MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to create db msg from protobuf"])))}function G(a){switch(a){case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE:return d("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.IMAGE_JPEG;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF:return d("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.GIF;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER:return d("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.STICKER;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO:return d("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.AUDIO_MP4;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO:return d("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.AUDIO_WAV;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.XMA_IMAGE:return d("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.IMAGE_JPEG;default:return null}}function H(a){switch(a){case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE:return d("EchoMessageMediaFieldUtils").AttachmentType.IMAGE;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF:return d("EchoMessageMediaFieldUtils").AttachmentType.GIF;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER:return d("EchoMessageMediaFieldUtils").AttachmentType.STICKER;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO:return d("EchoMessageMediaFieldUtils").AttachmentType.VIDEO;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO:return d("EchoMessageMediaFieldUtils").AttachmentType.PTT;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.XMA_IMAGE:return d("EchoMessageMediaFieldUtils").AttachmentType.XMA;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.DOCUMENT:return d("EchoMessageMediaFieldUtils").AttachmentType.DOCUMENT;default:return null}}function I(a){var b;switch(a){case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE:b="image/jpeg";break;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO:b="audio/wav";break;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO:b="video/mp4";break;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF:b="image/gif";break;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER:b="image/webp";break;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.XMA_IMAGE:b="image/jpeg";break;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.DOCUMENT:b="application/octet-stream";break;default:D.MUSTFIX(t||(t=babelHelpers.taggedTemplateLiteralLoose(["Unsupported media type, cannot get mimetype for attachment"])))}return b}function J(a,b,c){var e,f,g,h,i,j,k,l,m,n;b=b;var o=a.ancillary,p=a.integral,q=p==null||(e=p.transport)==null||(e=e.integral)==null?void 0:e.fileSha256,r=p==null||(f=p.transport)==null||(f=f.integral)==null?void 0:f.fileEncSha256,s=p==null||(g=p.transport)==null||(g=g.integral)==null?void 0:g.mediaKey,t=(p==null||(h=p.transport)==null||(h=h.integral)==null?void 0:h.mediaKeyTimestamp)!=null?typeof (p==null||(i=p.transport)==null?void 0:i.integral.mediaKeyTimestamp)==="number"?p==null||(j=p.transport)==null?void 0:j.integral.mediaKeyTimestamp:void 0:void 0,w=o==null?void 0:o.gifPlayback;w!=null&&w&&(b=d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF);w=p==null||(k=p.transport)==null||(k=k.ancillary)==null||(k=k.thumbnail)==null?void 0:k.thumbnailHeight;var x=p==null||(l=p.transport)==null||(l=l.ancillary)==null||(l=l.thumbnail)==null?void 0:l.thumbnailWidth,y=G(b),z=H(b);if(z===null){D.MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Invalid attachment type, cannot restore attachment"])));return}a=d("EncryptedBackupsDYIMessageProcessingUtils").decodeMediaEntryFromAttachmentPayload(a,z===d("EchoMessageMediaFieldUtils").AttachmentType.XMA,c);a.success||D.WARN(v||(v=babelHelpers.taggedTemplateLiteralLoose(["Cannot generate media entry data, ",""])),a.error);z={attachmentObjectId:p==null||(m=p.transport)==null||(m=m.ancillary)==null?void 0:m.objectId,attachmentType:z,directPath:p==null||(n=p.transport)==null||(n=n.integral)==null?void 0:n.directPath,encryptedHash:r!=null?d("WAHashUtils").toPlaintextHash(r):void 0,filename:c,height:o==null?void 0:o.height,mediaEntryData:a.value,mediaKey:s!=null?d("WABase64").encodeB64UrlSafe(s):void 0,mediaKeyTimestamp:t,mediaPlayableDuration:o==null?void 0:o.seconds,plaintextHash:q!=null?d("WAHashUtils").toPlaintextHash(q):void 0,width:o==null?void 0:o.width,xAttachmentType:b,xContentType:"full"};p=I(b);p!=null&&(z.mediaContentType=p);y!=null&&(z.previewContentType=y,z.previewContentHeight=w,z.previewContentWidth=x);return d("EchoMessageMediaFieldUtils").convertMediaMetadataDetailsToMediaMetadata(z,"protobuf")}function K(a,b,c){var e;b=J(a,b,c);if(b==null)return{mediaMetadata:void 0,previewMetadata:null};c=a.integral;a=null;c=c==null||(e=c.transport)==null||(e=e.ancillary)==null||(e=e.thumbnail)==null?void 0:e.downloadableThumbnail;if(c!=null){var f=c.fileSha256,g=c.fileEncSha256,h=c.mediaKey,i=typeof c.mediaKeyTimestamp==="number"?c.mediaKeyTimestamp:void 0;a={attachmentObjectId:c.objectId,attachmentType:d("EchoMessageMediaFieldUtils").AttachmentType.IMAGE,directPath:c.directPath,encryptedHash:g!=null?d("WAHashUtils").toPlaintextHash(g):void 0,filename:void 0,height:void 0,mediaKey:h!=null?d("WABase64").encodeB64UrlSafe(h):void 0,mediaKeyTimestamp:i,mediaPlayableDuration:void 0,plaintextHash:f!=null?d("WAHashUtils").toPlaintextHash(f):void 0,width:void 0,xAttachmentType:d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.MESSENGER_PREVIEW,xContentType:"preview"};return{mediaMetadata:b,previewMetadata:d("EchoMessageMediaFieldUtils").convertMediaMetadataDetailsToMediaMetadata(a,"protobuf")}}return{mediaMetadata:b,previewMetadata:null}}function L(a,b,c,e,f,g){g===void 0&&(g=null),b!=null&&a!=null&&(c.push({mediaMetadata:b,mediaRestoreType:e,previewMetadata:g}),f.set(d("WAStanzaUtils").toStanzaId(a),c))}function M(a){switch(a){case 0:return d("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE;case 1:return d("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY;case 2:return d("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT;default:return void 0}}function N(a,b,c,e,f,g,h,i,j,k,l){var m,n,o,p,q,r,s,t,u,v=P(a,g,h,i),B=v==null||(m=v.obj.payload)==null?void 0:m.content,C={editMsgData:[],externalId:e,forwardingScore:(n=v==null||(o=v.metadata)==null?void 0:o.forwardingScore)!=null?n:0,isForwarded:(n=v==null||(p=v.metadata)==null?void 0:p.isForwarded)!=null?n:!1,metadata:a.metadata,reactionData:[],sortOrderMs:b,unknownFieldCount:a.$$unknownFieldCount},E=[];if(B!=null){if(B.messageText!=null){C.msgType=d("MAWMsgType").MSG_TYPE.TEXT;C.decodedPayload=B.messageText;return C}else if(B.extendedContentMessage!=null){C.msgType=d("MAWMsgType").MSG_TYPE.XMA;C.xmaData=B.extendedContentMessage;if(((n=B.extendedContentMessage)==null?void 0:n.headerImage)!=null){n=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").ImageTransportSpec,(b=B.extendedContentMessage)==null?void 0:b.headerImage.payload);b=J(n,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);L(e,b,E,"xma_header",j)}if(((n=B.extendedContentMessage)==null?void 0:n.favicon)!=null){n=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").ImageTransportSpec,(b=B.extendedContentMessage)==null?void 0:b.favicon.payload);b=J(n,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);L(e,b,E,"xma_favicon",j)}if(((n=B.extendedContentMessage)==null?void 0:n.previews)!=null){(b=B.extendedContentMessage)==null||b.previews.forEach(function(a){a=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").ImageTransportSpec,a.payload);a=J(a,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);C.mediaMetadata=a;L(e,a,E,"xma_preview",j)})}return C}else if(B.audioMessage!=null){b=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").AudioTransportSpec,(n=B.audioMessage)==null||(n=n.audio)==null?void 0:n.payload);n=J(b,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO);C.msgType=d("MAWMsgType").MSG_TYPE.PTT;C.mediaMetadata=n;L(e,n,E,"attachment",j);return C}else if(B.videoMessage!=null){b=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").VideoTransportSpec,(b=B.videoMessage)==null||(b=b.video)==null?void 0:b.payload);b=K(b,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO);var F=b.mediaMetadata;b=b.previewMetadata;n=F;n!=null&&n.xAttachmentType===d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF?C.msgType=d("MAWMsgType").MSG_TYPE.GIF:C.msgType=d("MAWMsgType").MSG_TYPE.VIDEO;C.mediaMetadata=n;L(e,n,E,"attachment",j,b);return C}else if(B.imageMessage!=null){b=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,(F=B.imageMessage)==null||(F=F.image)==null?void 0:F.payload);F=K(b,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);b=F.mediaMetadata;F=F.previewMetadata;n=b;C.msgType=d("MAWMsgType").MSG_TYPE.IMAGE;C.mediaMetadata=n;L(e,n,E,"attachment",j,F);return C}else if(B.stickerMessage!=null){F=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").StickerTransportSpec,(b=B.stickerMessage)==null||(b=b.sticker)==null?void 0:b.payload);if(((b=F.integral)==null?void 0:b.receiverFetchId)!=null){b=d("WAParseMediaTransportProtocol").parseStickerReceiverFetchInfo(F);if(b==null){D.MUSTFIX(w||(w=babelHelpers.taggedTemplateLiteralLoose(["[MAWHandleEchoProtobufsRestoreApi] consumerMessage has no sticker receiver fetch info"])));return C}C.msgType=d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH;C.receiverFetchInfo=b;return C}n=J(F,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER);C.msgType=d("MAWMsgType").MSG_TYPE.STICKER;C.mediaMetadata=n;L(e,n,E,"attachment",j);return C}else if(B.documentMessage!=null){F=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").DocumentTransportSpec,(b=B.documentMessage)==null||(b=b.document)==null?void 0:b.payload);n=J(F,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.DOCUMENT,(b=B.documentMessage)==null?void 0:b.fileName);C.msgType=d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE;C.mediaMetadata=n;L(e,n,E,"attachment",j);return C}}else if((v==null||(q=v.obj.payload)==null||(q=q.applicationData)==null?void 0:q.revoke)!=null){var G;F=v==null||(G=v.obj.payload)==null||(G=G.applicationData)==null||(G=G.revoke)==null||(G=G.key)==null?void 0:G.id;if(F==null)D.MUSTFIX(x||(x=babelHelpers.taggedTemplateLiteralLoose(["Unable to retrieve revoked message external id"])));else{C.revokedMsgExternalId=d("WAStanzaUtils").toStanzaId(F);C.msgType=d("MAWMsgType").MSG_TYPE.REVOKED;return C}}if((v==null||(r=v.obj.payload)==null||(r=r.content)==null?void 0:r.bumpExistingMessage)!=null){var H;B=v==null||(H=v.obj.payload)==null||(H=H.content)==null?void 0:H.bumpExistingMessage;F=(b=B.key)==null?void 0:b.id;F!=null&&(h.has(F)||g.add(F),i.set(e,F));h=(b=B.key)==null?void 0:b.participant;if(h==null){h=(g=B.key)==null?void 0:g.remoteJid}if(h==null)D.MUSTFIX(y||(y=babelHelpers.taggedTemplateLiteralLoose(["No author found for original message that was bumped - unable to restore"])));else{i=d("WAJids").unsafeCoerceToUserJid(h);F=i===c?d("WAJids").AUTHOR_ME:i;k.set(d("WAStanzaUtils").toStanzaId(e),F);C.msgType=d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE;return C}}if((v==null||(s=v.obj)==null||(s=s.payload)==null||(s=s.content)==null?void 0:s.noteReplyMessage)!=null){var I;b=v==null||(I=v.obj)==null||(I=I.payload)==null||(I=I.content)==null?void 0:I.noteReplyMessage;B=b.noteTimestampMs;g=b.noteText;i=(h=a.metadata)==null?void 0:h.senderId;if(B!=null&&typeof B==="number"&&i!=null&&f!=null){k=d("MAWJids").toUserJid(i);F=d("MAWJids").toUserJid(f);a=F===k?c:F;h={author:a===c?d("WAJids").AUTHOR_ME:a,externalId:d("WAStanzaUtils").toStanzaId(e),ts:d("WATimeUtils").castMilliSecondsToUnixTime(B),type:d("WAMsgType").NOTE_REPLY};if((g==null?void 0:g.text)!=null){i={content:g==null?void 0:g.text,mentionedJids:g==null?void 0:g.mentionedJid.map(function(a){return d("MAWJids").toUserJid(a)})};h.msgContent=i}C.noteReply=h}if(b.textContent!=null){C.msgType=d("MAWMsgType").MSG_TYPE.TEXT;C.decodedPayload=b.textContent;return C}else if(b.stickerContent!=null){f=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").StickerTransportSpec,b.stickerContent.payload);n=J(f,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER);C.msgType=d("MAWMsgType").MSG_TYPE.STICKER;C.mediaMetadata=n;L(e,n,E,"attachment",j);return C}else if(b.videoContent!=null){k=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").VideoTransportSpec,b.videoContent.payload);n=J(k,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO);n!=null&&n.xAttachmentType===d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF?C.msgType=d("MAWMsgType").MSG_TYPE.GIF:C.msgType=d("MAWMsgType").MSG_TYPE.VIDEO;C.mediaMetadata=n;L(e,n,E,"attachment",j);return C}}if((v==null||(t=v.obj)==null||(t=t.payload)==null||(t=t.content)==null?void 0:t.ravenMessageMsgr)!=null){var N,Q,R;C.ravenMsgEphemeralType=M(v==null||(N=v.obj)==null||(N=N.payload)==null||(N=N.content)==null||(N=N.ravenMessageMsgr)==null?void 0:N.ephemeralType);if((v==null||(Q=v.obj)==null||(Q=Q.payload)==null||(Q=Q.content)==null||(Q=Q.ravenMessageMsgr)==null?void 0:Q.imageMessage)!=null){if(l==null||!l){var S;C.ravenUnstoredMedia=d("WAParseMediaTransportProtocol").decodeImageTransport(v==null||(S=v.obj)==null||(S=S.payload)==null||(S=S.content)==null||(S=S.ravenMessageMsgr)==null||(S=S.imageMessage)==null?void 0:S.payload,d("WATimeUtils").castMilliSecondsToUnixTime(C.sortOrderMs),"image")}C.ravenMsgMediaType=d("MAWMsg").MAWRavenMsgMediaType.IMAGE}else if((v==null||(R=v.obj)==null||(R=R.payload)==null||(R=R.content)==null||(R=R.ravenMessageMsgr)==null?void 0:R.videoMessage)!=null){if(l==null||!l){var T;F=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").VideoTransportSpec,v==null||(T=v.obj)==null||(T=T.payload)==null||(T=T.content)==null||(T=T.ravenMessageMsgr)==null||(T=T.videoMessage)==null?void 0:T.payload);c=d("WAParseMediaTransportProtocol").parseVideoMsg(F,d("WATimeUtils").castMilliSecondsToUnixTime(C.sortOrderMs),!1);c!=null?C.ravenUnstoredMedia=c:D.MUSTFIX(z||(z=babelHelpers.taggedTemplateLiteralLoose(["Decoded raven video unstored message is null - unable to restore"])))}C.ravenMsgMediaType=d("MAWMsg").MAWRavenMsgMediaType.VIDEO}C.msgType=d("MAWMsgType").MSG_TYPE.RAVEN;return C}else if((v==null||(u=v.obj)==null||(u=u.payload)==null||(u=u.content)==null?void 0:u.pollCreationMessage)!=null){C.msgType=d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE;a=v.obj.payload.content.pollCreationMessage;B=a.encKey;g=a.name;i=a.options;h=a.selectableOptionsCount;B!=null&&g!=null&&i!=null&&(C.groupPollInfo={encKey:B,name:g,options:i.map(function(a){a=a.optionName;return a}).filter(Boolean),selectableOptionsCount:h||0});return C}v!=null&&O(C,v.obj);D.MUSTFIX(A||(A=babelHelpers.taggedTemplateLiteralLoose(["Unable to retrieve decoded protobuf from backup message - unsupported message type"])));return C}function O(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;(b==null||(c=b.payload)==null||(c=c.content)==null?void 0:c.locationMessage)!=null&&(a.futureProofMessageType="locationMessage");(b==null||(d=b.payload)==null||(d=d.content)==null?void 0:d.liveLocationMessage)!=null&&(a.futureProofMessageType="liveLocationMessage");(b==null||(e=b.payload)==null||(e=e.content)==null?void 0:e.pollUpdateMessage)!=null&&(a.futureProofMessageType="pollUpdateMessage");(b==null||(f=b.payload)==null||(f=f.content)==null?void 0:f.viewOnceMessage)!=null&&(a.futureProofMessageType="viewOnceMessage");(b==null||(g=b.payload)==null||(g=g.content)==null?void 0:g.contactMessage)!=null&&(a.futureProofMessageType="contactMessage");(b==null||(h=b.payload)==null||(h=h.content)==null?void 0:h.extendedTextMessage)!=null&&(a.futureProofMessageType="extendedTextMessage");(b==null||(i=b.payload)==null||(i=i.content)==null?void 0:i.groupInviteMessage)!=null&&(a.futureProofMessageType="groupInviteMessage");(b==null||(j=b.payload)==null||(j=j.content)==null?void 0:j.commonSticker)!=null&&(a.futureProofMessageType="commonSticker");(b==null||(k=b.payload)==null||(k=k.content)==null?void 0:k.screenshotAction)!=null&&(a.futureProofMessageType="screenshotAction");(b==null||(l=b.payload)==null||(l=l.content)==null?void 0:l.extendedMessageContentWithSear)!=null&&(a.futureProofMessageType="extendedMessageContentWithSear");(b==null||(m=b.payload)==null||(m=m.content)==null?void 0:m.imageGalleryMessage)!=null&&(a.futureProofMessageType="imageGalleryMessage");(b==null||(n=b.payload)==null||(n=n.content)==null?void 0:n.paymentsTransactionMessage)!=null&&(a.futureProofMessageType="paymentsTransactionMessage");(b==null||(o=b.payload)==null||(o=o.applicationData)==null?void 0:o.metadataSync)!=null&&(a.futureProofMessageType="metadataSync");(b==null||(p=b.payload)==null||(p=p.applicationData)==null?void 0:p.aiBotResponse)!=null&&(a.futureProofMessageType="aiBotResponse")}function P(a,b,c,e){var f;f=(f=a.metadata)==null?void 0:f.messageId;a=d("decodeProtobuf").decodeProtobuf(d("WAMsgApplication.pb").MessageApplicationSpec,a.encryptedTransportMessage);var g=d("WAParseMessageApplication").parseMessageApplication(a);if(g.type==="error"){D.MUSTFIX(B||(B=babelHelpers.taggedTemplateLiteralLoose(["Message contains unparseable message application - unable to restore message"])));return}a=a.metadata;var h=a==null?void 0:a.quotedMessage;h=h==null?void 0:h.stanzaId;f!=null&&h!=null&&(c.has(h)||b.add(h),e.set(f,h));if(g.subprotocolType==="armadillo"){c=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAArmadilloApplication.pb").ArmadilloSpec,g.payload);return{metadata:a,obj:c}}else if(g.subprotocolType==="consumerMessage")return{metadata:a,obj:d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAConsumerApplication.pb").ConsumerApplicationSpec,g.payload)}}function e(a,b,c,d,e,f,g,h,i){return a.map(function(a){return Q(a,b,c,d,e,f,g,h,i)})}function Q(a,b,c,e,f,g,h,i,j){g===void 0&&(g=new Map());var k=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloBackupMessage.pb").BackupMessageSpec,a.toplevelProtobuf.decryptedProtobuf);k=N(k,a.toplevelProtobuf.protobufTimestampMS,b,a.otid,c,e,f,g,h,i,j);c=a.supplementalProtobufs;for(h of c){i=h[0];j=h[1];c=d("MessageBackupSupplementalKeyGenerator").parseIdentifierString(i);d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_EB_DECODE_MESSAGE_PROTOBUF_SUPPLEMENTAL,key:c.type});var l=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloBackupMessage.pb").BackupMessageSpec,j.decryptedProtobuf);if(l.encryptedTransportMessage==null)continue;switch(c.type){case"raven_action_message":var m=P(l,e,f,g),n=c.senderJid;n=n===b?d("WAJids").AUTHOR_ME:n;if(m!=null){var o,p,q;m=m.obj;o=(o=m.payload)==null||(o=o.content)==null||(o=o.ravenActionNotifMessage)==null?void 0:o.actionTimestamp;p=(p=m.payload)==null||(p=p.content)==null||(p=p.ravenActionNotifMessage)==null?void 0:p.actionType;if(o!=null&&p!=null&&typeof o==="number"&&((q=m.payload)==null||(q=q.content)==null||(q=q.ravenActionNotifMessage)==null||(q=q.key)==null?void 0:q.id)!=null){m=d("WAStanzaUtils").toStanzaId((q=m.payload)==null||(q=q.content)==null||(q=q.ravenActionNotifMessage)==null||(q=q.key)==null?void 0:q.id);if(((q=l.metadata)==null?void 0:q.timestampMs)!=null&&typeof ((q=l.metadata)==null?void 0:q.timestampMs)==="number"&&((q=l.metadata)==null?void 0:q.messageId)!=null){var r;q=(q=l.metadata)==null?void 0:q.messageId;r=d("WATimeUtils").castMilliSecondsToUnixTime((r=l.metadata)==null?void 0:r.timestampMs);q=d("WAStanzaUtils").toStanzaId(q);p=p===0?d("MAWMsg").MAWRavenActionNotifType.PLAYED:p===1?d("MAWMsg").MAWRavenActionNotifType.SCREENSHOTTED:d("MAWMsg").MAWRavenActionNotifType.FORCE_DISABLED;o={ack:d("WAAckLevel").ACK.RECEIVED,actionTimestamp:d("WATimeUtils").castMilliSecondsToUnixTime(o),actionType:p,author:n,externalId:q,ravenActionToMsgExternalId:m,ts:r,type:d("MAWMsgType").MSG_TYPE.RAVEN_ACTION};k.ravenActionUnstoredMsg=o}}}break;case"reaction":n=(p=l.metadata)==null?void 0:p.messageId;m=(q=P(l,e,f,g))==null||(q=q.obj.payload)==null||(q=q.content)==null?void 0:q.reactionMessage;r=d("WAJids").extractUserId(c.senderJid);m!=null&&r!=null&&k.reactionData.push({reaction:m,reactionExternalId:n,senderId:r,ts:d("WATimeUtils").castMilliSecondsToUnixTime(j.protobufTimestampMS)});break;case"edit":p=(o=P(l,e,f,g))==null||(o=o.obj.payload)==null||(o=o.content)==null?void 0:o.editMessage;m=(q=l.metadata)==null?void 0:q.senderId;if(p!=null){r=(n=p.key)==null?void 0:n.id;j=p.timestampMs;if(r!=null&&j!=null&&m!=null&&typeof j==="number"){o=d("MAWJids").toUserJid(m);q=o===b?d("WAJids").AUTHOR_ME:o;k.editMsgData.push({author:q,editMsgContent:p,externalId:d("WAStanzaUtils").toStanzaId(k.externalId),originalMsgExternalId:d("WAStanzaUtils").toStanzaId(r),ts:d("WATimeUtils").castMilliSecondsToUnixTime(j)})}}break;case"poll_update":n=P(l,e,f,g);if(n==null)continue;o=(m=n.obj.payload)==null||(m=m.content)==null?void 0:m.pollUpdateMessage;if(o!=null){q={externalId:d("WAStanzaUtils").toStanzaId(c.rawIdentifierString)};o.addOption!=null&&(q.addOption=o.addOption);o.vote!=null&&(q.vote=o.vote);o.pollCreationMessageKey!=null&&(q.pollCreationMessageKey=o.pollCreationMessageKey);k.groupPollUpdateData!=null?k.groupPollUpdateData.push(q):k.groupPollUpdateData=[q]}break;case"unknown":p=i.split(":");r=p[0];D.MUSTFIX(C||(C=babelHelpers.taggedTemplateLiteralLoose(["Unknown supplemental identifier. Identifier prefix: ",". Parts: ",""])),r||"null",p.length);break;default:c.type}}f.add(a.otid);return k}g.removeDeprecatedProtobufRestoreArgs=a;g.createUnstoredDbContentFromProtobufObject=b;g.decodeProtobufArray=e;g.decodeDecryptedMessageProtobuf=Q}),98);
__d("MAWEBUnstoredDbMsgUtils",["EBLogger","MAWHandleEBRestoreWithHIM","MAWHandleEchoProtobufsRestoreApi","MAWMessageSortOrderUtils","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("EBLogger").EBLogger().tags(["restore","MAWEBUnstoredDbMsgUtils"]);function a(a,b,c,e){var f=c!=null?c:b!=null?d("WAJids").unsafeCoerceToChatJid(b):void 0;if(f==null){j.mustfix("threadId and chatJid are both null - cannot convert protobuf to unstoredDbMsg");return[]}return d("MAWHandleEchoProtobufsRestoreApi").decodeProtobufArray(a,e,void 0,new Set(),new Set(),new Map(),new Map(),new Map(),!0).map(function(a){var b;if((a==null||(b=a.metadata)==null?void 0:b.messageId)!=null)try{var c=d("MAWHandleEchoProtobufsRestoreApi").createUnstoredDbContentFromProtobufObject(a,f,e,new Map(),void 0);if(c!=null&&c.unstoredDbContent.unstoredDbMsg!=null){c=c.unstoredDbContent.unstoredDbMsg;var g=d("MAWMessageSortOrderUtils").generateAuthoritativeMessageSortOrder(c);c.sortOrderMs=g;return c}}catch(b){j.MUSTFIX(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to convert protobuf to unstored db message: type: "," error: ",""])),a.msgType,b.message)}return null}).filter(Boolean)}function b(a,b){return d("MAWHandleEBRestoreWithHIM").convertEchoMessages(a,b).map(function(a){var b;if(a==null||a.length===0||((b=a[0].decodedMsg)==null?void 0:b.unstoredDbMsg)==null){j!=null&&j.MUSTFIX(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Failed to convert echo message to unstored db message"])));return null}return(b=a[0].decodedMsg)==null?void 0:b.unstoredDbMsg}).filter(Boolean)}g.getUnstoredDbMsgFromProtobuf=a;g.getUnstoredDbMsgFromEcho=b}),98);
__d("WACryptoAesGcm",["WABinary","WACryptoDependencies","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,d,e){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){f===void 0&&(f=16);b={name:"AES-GCM",iv:k(b),tagLength:f*8};e!=null&&(b.additionalData=k(e));return d("WACryptoDependencies").getCrypto().subtle.encrypt(b,yield j(a),c)});return h.apply(this,arguments)}function c(a,b,c,d,e){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){f===void 0&&(f=16);b={name:"AES-GCM",iv:k(b),tagLength:f*8};e!=null&&(b.additionalData=k(e));return d("WACryptoDependencies").getCrypto().subtle.decrypt(b,yield j(a),c)});return i.apply(this,arguments)}function j(a){return d("WACryptoDependencies").getCrypto().subtle.importKey("raw",a,"AES-GCM",!1,["encrypt","decrypt"])}function k(a){if(a instanceof Uint8Array)return a;if(typeof a==="string"){var b=new(d("WABinary").Binary)();b.writeString(a);return b.readByteArrayView()}return new Uint8Array(a)}g.gcmEncrypt=a;g.gcmDecrypt=c}),98);
__d("WAUseCaseSecret",["$InternalEnum","WABinary","WACryptoHkdf"],(function(a,b,c,d,e,f,g){"use strict";c=b("$InternalEnum")({POLL_VOTE:"Poll Vote",ENC_REACTION:"Enc Reaction",ENC_COMMENT:"Enc Comment",REPORT_TOKEN:"Report Token",EVENT_RESPONSE:"Event Response",EVENT_EDIT_ENCRYPTED:"Event Edit"});var h=32;function a(a){var b=a.messageSecret,c=a.stanzaId,e=a.parentMsgOriginalSender,f=a.modificationSender;a=a.modificationType;c=d("WABinary").Binary.build(c,e,f,a).readBuffer();return d("WACryptoHkdf").extractAndExpand(b instanceof ArrayBuffer?new Uint8Array(b):b,c,h)}g.UseCaseSecretModificationType=c;g.createUseCaseSecret=a}),98);
__d("MAWGroupPollsDualEncryptionUtils",["MAWDbPoll","WABase64","WAConsumerApplication.pb","WACryptoAesGcm","WACryptoSha256","WAResultOrError","WAUseCaseSecret","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(a.encIv==null||a.encPayload==null)return d("WAResultOrError").makeError("invalid_poll_enc_value");var e=a.encIv;a=a.encPayload;try{b=(yield d("WACryptoAesGcm").gcmDecrypt(b,e,a,c));return d("WAResultOrError").makeResult(b)}catch(a){return d("WAResultOrError").DEPRECATED_makeError("decryption_error",a)}});return i.apply(this,arguments)}function j(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){try{var e=self.crypto.getRandomValues(new Uint8Array(12));b=(yield d("WACryptoAesGcm").gcmEncrypt(b,e,a,c));return d("WAResultOrError").makeResult({encIv:e.buffer,encPayload:b})}catch(a){return d("WAResultOrError").DEPRECATED_makeError("encryption_error",a)}});return k.apply(this,arguments)}function l(a,b){a=a+"\0"+b;return new TextEncoder().encode(a).buffer}function a(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.pollCreationMessageKey,e=b.pollCreationSenderJid,f=b.pollCreationStanzaId,g=b.pollUpdateSenderJid;b=b.pollUpdateStanzaId;c=(yield d("WAUseCaseSecret").createUseCaseSecret({messageSecret:c,modificationSender:g,modificationType:d("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:e,stanzaId:f}));e=l(b,g);f=d("encodeProtobuf").encodeProtobuf(d("WAConsumerApplication.pb").ConsumerApplication$PollVoteMessageSpec,a).readBuffer();return j(f,c,e)});return m.apply(this,arguments)}function c(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.pollCreationMessageKey,e=b.pollCreationSenderJid,f=b.pollCreationStanzaId,g=b.pollUpdateSenderJid;b=b.pollUpdateStanzaId;c=(yield d("WAUseCaseSecret").createUseCaseSecret({messageSecret:c,modificationSender:g,modificationType:d("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:e,stanzaId:f}));e=l(b,g);f=(yield h(a,c,e));if(!f.success)return f;try{return d("WAResultOrError").makeResult(d("decodeProtobuf").decodeProtobuf(d("WAConsumerApplication.pb").ConsumerApplication$PollVoteMessageSpec,f.value))}catch(a){return d("WAResultOrError").DEPRECATED_makeError("protobuf_decode_error",a)}});return n.apply(this,arguments)}function e(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.pollCreationMessageKey,e=b.pollCreationSenderJid,f=b.pollCreationStanzaId,g=b.pollUpdateSenderJid;b=b.pollUpdateStanzaId;c=(yield d("WAUseCaseSecret").createUseCaseSecret({messageSecret:c,modificationSender:g,modificationType:d("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:e,stanzaId:f}));e=l(b,g);f=d("encodeProtobuf").encodeProtobuf(d("WAConsumerApplication.pb").ConsumerApplication$PollAddOptionMessageSpec,a).readBuffer();return j(f,c,e)});return o.apply(this,arguments)}function f(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.pollCreationMessageKey,e=b.pollCreationSenderJid,f=b.pollCreationStanzaId,g=b.pollUpdateSenderJid;b=b.pollUpdateStanzaId;c=(yield d("WAUseCaseSecret").createUseCaseSecret({messageSecret:c,modificationSender:g,modificationType:d("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:e,stanzaId:f}));e=l(b,g);f=(yield h(a,c,e));if(!f.success)return f;try{return d("WAResultOrError").makeResult(d("decodeProtobuf").decodeProtobuf(d("WAConsumerApplication.pb").ConsumerApplication$PollAddOptionMessageSpec,f.value))}catch(a){return d("WAResultOrError").DEPRECATED_makeError("protobuf_decode_error",a)}});return p.apply(this,arguments)}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WACryptoSha256").sha256(new TextEncoder("utf8").encode(a)));return s(a)});return r.apply(this,arguments)}function s(a){return d("MAWDbPoll").convertStringToOptionHash(d("WABase64").encodeB64(a))}g.encryptGroupPollVote=a;g.decryptGroupPollVote=c;g.encryptGroupPollAddOption=e;g.decryptGroupPollAddOption=f;g.getHashForOptionName=q;g.getBase64EncodedHash=s}),98);
__d("MAWLoadDbMigrationVersion",["MAWCurrentUser","MAWDBMigrationUtils","MAWDbAppMeta","MAWDbObjEncryption","MAWIndexedDbMetadata","MWFBLogger","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o=d("MWFBLogger").MWLogger().tags(["db","MAWLoadDbMigrationVersion"]);function a(a){var c=d("MAWCurrentUser").getID(),e=d("MAWIndexedDbMetadata").dbName(c);return new(n||(n=b("Promise")))(function(b){if(!indexedDB){b();return}var c=indexedDB.open(e);c.onupgradeneeded=function(a){a.target.transaction.abort();a=a.target.result;o.DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] "," onupgradeneeded - closing db"])),e);a==null||a.close();b()};c.onsuccess=function(c){var e=c.target.result;if(e==null){b();return}try{c=e.transaction("appMeta","readonly");c.onerror=function(a){o.DEBUG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] Transaction error: ",""])),(a=a.target.error)==null?void 0:a.message);e.close();b()};c=c.objectStore("appMeta");c=c.get(d("MAWDbAppMeta").AppMetaKeysEnum.dbMigrationVersion);c.onerror=function(a){o.DEBUG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] Request error: ",""])),(a=a.target.error)==null?void 0:a.message);e.close();b()};c.onsuccess=function(c){e.close();c=c.target.result;if(c!=null){c=d("MAWDbObjEncryption").decryptDbObj(babelHelpers["extends"]({},c),"appMeta",a);c=c.value.dbMigrationVersion;c!=null&&(d("MAWDBMigrationUtils").mawDbMigrationVersion.version=c)}b()}}catch(a){o.DEBUG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] Error accessing appMeta: ",""])),a.message),e.close(),b()}};c.onerror=function(a){var c;o.DEBUG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] "," error ",""])),e,a==null||(c=a.target)==null||(c=c.error)==null?void 0:c.message);b()};c.onblocked=function(a){a=a.target.result;o.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] "," blocked"])),e);a==null||a.close()}})}g["default"]=a}),98);
__d("ReStoreLocalStorageQuotaExceed",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h="Failed to execute 'setItem' on 'Storage'",i="ReStoreLocalStorageQuotaExceed";function j(){try{var a=window.localStorage,b=[],d=[];if(a!=null&&a.length!==0)for(var e in a){b.length===0&&d.length===0&&(e.includes("falco_queue_log")&&d.push(e));if(!Object.prototype.hasOwnProperty.call(a,e))continue;var f=((a[e]||"").length+e.length)*2;f/1024>2e3&&b.push(e)}c("FBLogger")("messenger_web").mustfix(h+": QuotaExceeded - trying to clean up %s or %s",b.join(","),d.join(","));return b.length!==0?b:d}catch(a){c("FBLogger")("messenger_web").mustfix("Error getting local storage big values for cleanup.");return[]}}function a(){try{var a=window.localStorage,b=j();b.forEach(function(b){a.removeItem(b)})}catch(a){c("FBLogger")("maw_db").mustfix("Couldn't remove vals from localStorage",a)}}b=function(a){function b(b){var c;b=h+": "+b+"; Keys to delete: "+j().join(",");c=a.call(this,b)||this;c.message=b;c.name=i;return c}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));g.ERROR_NAME=i;g.getLocalStorageValuesToRemoveOnExceed=j;g.clearLocalStorageBigValues=a;g.ReStoreLocalStorageQuotaExceed=b}),98);
__d("WAAPIMetrics",["WAGlobals","WAJids","WAPREList","WAPREMetrics"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){c===void 0&&(c={});return function(){var d=h(b,c);for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return a.apply(void 0,[d].concat(f)).then(function(a){d.endSuccess();return a})["catch"](function(a){d.endFail("error",{string:{error:""+a.toString()}});throw a})}}function b(a,b,c){c===void 0&&(c={});return function(){var d=h(b,c);return a.apply(void 0,arguments).then(function(a){d.endSuccess();return a})["catch"](function(a){d.endFail("error",{string:{error:""+a.toString()}});throw a})}}function h(a,b){b===void 0&&(b={});var c=null;try{c=d("WAGlobals").getDependencies().isEmployee()&&d("WAGlobals").getDependencies().isUseridAnnotationEnabled()?d("WAJids").extractUserId(d("WAGlobals").getMyUserJid()).slice(-5):null}catch(a){}return d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.WA_JOB_MANAGER,babelHelpers["extends"]({},b,{string:babelHelpers["extends"]({},(b=(b=b)==null?void 0:b.string)!=null?b:{},{name:a,userHash:c})}))}g.withMetrics=a;g.withMetricWrapper=b}),98);
__d("WAAPIDeferred",["WAAPIMetrics","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=(a=c("requireDeferred"))("WADbPersonalSenderKeyStatusTxns").__setRef("WAAPIDeferred"),i=a("WADbRegistrationApi").__setRef("WAAPIDeferred"),j=a("WADownloadMedia").__setRef("WAAPIDeferred"),k=a("WAGenerateAndUploadPreKeys").__setRef("WAAPIDeferred"),l=a("WAGetCurrentUserDeviceList").__setRef("WAAPIDeferred"),m=a("WAGetDevices").__setRef("WAAPIDeferred"),n=a("WAGetIdentityKeys").__setRef("WAAPIDeferred"),o=a("WANotifyDeviceChange").__setRef("WAAPIDeferred"),p=a("WAPublishAppDataProtocol").__setRef("WAAPIDeferred"),q=a("WAPublishMessage").__setRef("WAAPIDeferred"),r=a("WAQueryGroups").__setRef("WAAPIDeferred"),s=a("WARemoveCurrentDevice").__setRef("WAAPIDeferred"),t=a("WARemoveDevice").__setRef("WAAPIDeferred"),u=a("WASendAppDataFanoutProtocol").__setRef("WAAPIDeferred"),v=a("WASendMsgUtilV2").__setRef("WAAPIDeferred"),w=a("WASendPing").__setRef("WAAPIDeferred"),x=a("WASyncAbProps").__setRef("WAAPIDeferred"),y=a("WAUploadMedia").__setRef("WAAPIDeferred");b={getCurrentUserDeviceList:function(){return l.load().then(function(a){return d("WAAPIMetrics").withMetrics(a.getCurrentUserDeviceList,"getCurrentUserDeviceList")()})},syncAbProps:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return x.load().then(function(a){return d("WAAPIMetrics").withMetrics(a.syncAbProps,"syncAbProps").apply(void 0,b)})},generateAndUploadPreKeys:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return k.load().then(function(a){return d("WAAPIMetrics").withMetrics(a.generateAndUploadPreKeys,"generateAndUploadPreKeys",{bool:{deferred_load:!0}}).apply(void 0,b)})},publishAppData:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return p.load().then(function(a){return d("WAAPIMetrics").withMetrics(a.publishAppData,"publishAppData",{bool:{deferred_load:!0}}).apply(void 0,b)})},getDevicesBeforeSend:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return v.load().then(function(a){a=a.getDevicesBeforeSend;return d("WAAPIMetrics").withMetrics(a,"getDevicesBeforeSend",{bool:{deferred_load:!0}}).apply(void 0,b)})},getIdentityKeys:function(){return n.load().then(function(a){a=a.getIdentityKeysInWorker;return d("WAAPIMetrics").withMetrics(a,"getIdentityKeys",{bool:{deferred_load:!0}})()})},publishMessage:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return q.load().then(function(a){a=a.publishMessage;return d("WAAPIMetrics").withMetricWrapper(a,"publishMessage",{bool:{deferred_load:!0}}).apply(void 0,b)})},sendChatMessage:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return v.load().then(function(a){a=a.sendChatMessage;return d("WAAPIMetrics").withMetrics(a,"sendChatMessage",{bool:{deferred_load:!0}}).apply(void 0,b)})},updateClockSkew:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return w.load().then(function(a){return d("WAAPIMetrics").withMetrics(a.updateClockSkew,"updateClockSkew",{bool:{deferred_load:!0}}).apply(void 0,b)})},queryGroups:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return r.load().then(function(a){return d("WAAPIMetrics").withMetrics(a.queryGroups,"queryGroups",{bool:{deferred_load:!0}}).apply(void 0,b.concat([!1]))})},queryGroupsForce:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return r.load().then(function(a){return d("WAAPIMetrics").withMetrics(a.queryGroups,"queryGroups",{bool:{deferred_load:!0}}).apply(void 0,b.concat([!0]))})},getDevices:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return m.load().then(function(a){return d("WAAPIMetrics").withMetrics(a.getDevices,"getDevices",{bool:{deferred_load:!0}}).apply(void 0,b)})},removeDevice:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return t.load().then(function(a){return d("WAAPIMetrics").withMetrics(a.removeDevice,"=>",{bool:{deferred_load:!0}}).apply(void 0,b)})},removeCurrentDevice:function(){return s.load().then(function(a){return d("WAAPIMetrics").withMetrics(a.removeCurrentDevice,"removeCurrentDevice",{bool:{deferred_load:!0}})()})},notifyDeviceChange:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return o.load().then(function(a){return d("WAAPIMetrics").withMetrics(a.notifyDeviceChange,"notifyDeviceChange",{bool:{deferred_load:!0}}).apply(void 0,b)})},saveLastSessionDeviceWasLinkedTo:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return i.load().then(function(a){return d("WAAPIMetrics").withMetrics(a.saveLastSessionDeviceWasLinkedTo,"saveLastSessionDeviceWasLinkedTo").apply(void 0,b)})},sendAppData:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return u.load().then(function(a){return d("WAAPIMetrics").withMetrics(a.sendAppDataToDevicesProtocol,"sendAppData",{bool:{deferred_load:!0}}).apply(void 0,b)})},setRotateSenderKeyToTrue:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return h.load().then(function(a){return d("WAAPIMetrics").withMetrics(function(b,c){return a.bulkSetRotateSenderKeyToTrue(c)},"setRotateSenderKeyToTrue").apply(void 0,b)})},uploadMedia:function(a){return y.load().then(function(b){return b.uploadMedia(a)})},downloadMedia:function(a){return j.load().then(function(b){return b.downloadMedia(a)})},cachedDownloadFullMediaOnly:function(a){return j.load().then(function(b){return b.cachedDownloadFullMediaOnly(a)})}};e=b;g["default"]=e}),98);/*FB_PKG_DELIM*/
__d("EBAPISharedUtils",["I64","LSAuthorityLevel","LSIntEnum","MAWRotateDTSG","MWEBODSEntityName.enum","ODS","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function a(a,b){if(a!=null){b=b.filter(function(a){return(i||(i=d("I64"))).equal(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))}).map(function(a){return(i||(i=d("I64"))).to_string(a.epochId)});return{backupId:a.backupId,device_id:a.deviceId,locally_available_epochs:b,mailboxRootKey:a.mailboxRootKeyBlob,ocmfClientStateBlob:a.ocmfClientStateBlob}}}function e(a){var b=a==null?void 0:a.backupTenancy;a=a==null?void 0:a.authorityLevel;return b==null||a==null?!1:(i||(i=d("I64"))).equal((j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),a)}function l(a){var b=a.backupId,c=a.devicePrivateKeyBlob,d=a.devicePublicKeyBlob,e=a.epochAuthPrivateKeyBlob,f=a.epochAuthPublicKeyBlob,g=a.epochStoragePrivateKeyBlob,h=a.epochStoragePublicKeyBlob,i=a.mailboxRootKeyBlob,j=a.obliviousValidationTokenBlob,k=a.ocmfClientStateBlob;if(b!=null&&c!=null&&d!=null&&e!=null&&f!=null&&g!=null&&h!=null&&i!=null&&j!=null&&k!=null)return{authorityLevel:a.authorityLevel,backupId:b,backupTenancy:a.backupTenancy,deviceId:a.deviceId,devicePrivateKeyBlob:c,devicePublicKeyBlob:d,encryptionVersion:a.encryptionVersion,epochAuthPrivateKeyBlob:e,epochAuthPublicKeyBlob:f,epochStoragePrivateKeyBlob:g,epochStoragePublicKeyBlob:h,mailboxRootKeyBlob:i,obliviousValidationTokenBlob:j,ocmfClientStateBlob:k,revisionVersion:a.revisionVersion}}function m(a){var b=a.authorityLevel,c=a.backupId,d=a.epochAnonIdBlob,e=a.epochId,f=a.epochRootKeyBlob;a=a.epochStatus;if(b!=null&&c!=null&&d!=null&&e!=null&&f!=null&&a!=null)return{authorityLevel:b,backupId:c,epochAnonIdBlob:d,epochId:e,epochRootKeyBlob:f,epochStatus:a}}function f(a){var b=[],c=new Set(["epochId","authorityLevel","backupId","epochAnonIdBlob","epochRootKeyBlob","epochStatus"]);a=a.get("secure_encrypted_backups_epochs");if(a==null||(a==null?void 0:a.size)===0)return b;if(a!=null){a=a.entries();for(a of a){var d=a[0];a[1];d=d;if(d instanceof Object){d=Object.values(d);d=d[1];if(d instanceof Object){var e={};for(d of Object.entries(d)){var f=d[0],g=d[1];c.has(f)&&(e[f]=g)}f=m(e);f!=null&&b.push(f)}}}}return b}function n(a){a=a.get("secure_encrypted_backups_client_state");var b={};if(a==null||(a==null?void 0:a.size)===0)return;if(a!=null){a=a.entries();for(a of a){var c=a[0];a[1];c=c;if(c instanceof Object){c=Object.values(c);c=c[1];if(c instanceof Object)for(c of Object.entries(c)){var d=c[0],e=c[1];b[d]=e}}break}}d=l(b);return d}function o(a){(k||(k=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,a)}function p(a){return a!=null&&a.message.indexOf("1357004")!==-1?d("MAWRotateDTSG").tryRotateDTSG().then(function(a){if(a)return"token-rotation-successful";else return"token-rotation-failed"}):(h||(h=b("Promise"))).resolve("token-rotation-not-required")}g.getDeviceAndKeyMetadata=a;g.isBackupTenancyAuthoritative=e;g.getAvailableEpochsFromPersistedEBSM=f;g.getClientStateFromPersistedEBSM=n;g.bumpOdsRestoreKey=o;g.handleDTSGTokenRotation=p}),98);
__d("EBBatchRequestResignCdnUrlQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="24784488421147370"}),null);
__d("EBBatchRequestResignCdnUrlQuery.graphql",["EBBatchRequestResignCdnUrlQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"request"}],c=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMailbox",kind:"LinkedField",name:"mailbox",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"payloads",variableName:"request"}],concreteType:"XFBResignCdnUrlResponse",kind:"LinkedField",name:"batch_resigned_attachment_cdn_url",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"instance_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"exception_message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"exception_enum",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"EBBatchRequestResignCdnUrlQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"EBBatchRequestResignCdnUrlQuery",selections:c},params:{id:b("EBBatchRequestResignCdnUrlQuery_facebookRelayOperation"),metadata:{},name:"EBBatchRequestResignCdnUrlQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("EBBatchRequestResignCdnUrl",["EBBatchRequestResignCdnUrlQuery.graphql","EBEnqueueResignCdnUrlRequests","FBLogger","WADirectPath","WAErrorMessage","WAMediaUtils","WAResultOrError","asyncToGeneratorRuntime","createWorkerQuery"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r=function(){return c("FBLogger")("wmi").tags(["labyrinth_web","resign_cdn_url"])};function a(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("EBEnqueueResignCdnUrlRequests").getGqlRestoredCdnUrlMap(),c=[];for(b of b.entries()){var e=b[0],f=b[1];f.pending||c.push([e,f])}if(c.length<1)return;e=c.map(function(a){return{instance_key:a[0],payload:a[1].payload}});c.forEach(function(b){var a=b[0];b=b[1];d("EBEnqueueResignCdnUrlRequests").setGqlRestoredCdnUrlMap(a,{payload:b.payload,pending:!0,resolvable:b.resolvable})});yield t(a,e)});return s.apply(this,arguments)}function t(a,b){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b.length<1)return;var e=d("EBEnqueueResignCdnUrlRequests").getGqlRestoredCdnUrlMap();a==null||a.addPoint("resign_cdn_url_query_start");try{var f,g,h=(yield c("createWorkerQuery")(w,{request:b.map(function(a){return{instance_key:a.instance_key,payload:a.payload.payload}})}));a==null||a.addPoint("resign_cdn_url_query_end");h=h==null||(f=h.viewer)==null||(f=f.messenger_default_encrypted_backup)==null||(f=f.mailbox)==null?void 0:f.batch_resigned_attachment_cdn_url;r().DEBUG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Received "," requests"])),h==null?void 0:h.length);a==null||a.addAnnotations({"int":{resign_cdn_url_gql_batch_size:(g=h==null?void 0:h.length)!=null?g:0}});h==null||h.forEach(function(b){var c=b.instance_key!=null?d("WAMediaUtils").stringToDeliveryObjectId(b.instance_key):null,f=b.path;if(c!=null){var g=d("WADirectPath").validateDirectPath(f);if(!g.success){r().WARN(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url with EBLS GraphQL failed: ",", graphql error: ",""])),g.error,b.exception_message);a==null||a.addAnnotations({string:{resign_cdn_url_exception_enum:(b=b.exception_enum)!=null?b:"unknown"}})}b=(b=e.get(c))==null?void 0:b.resolvable;b!=null?b.resolve(g):r().MUSTFIX(k||(k=babelHelpers.taggedTemplateLiteralLoose(["No resolvable found for instance key: ",""])),c);e["delete"](c)}else r().MUSTFIX(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url came back with no instance key, ",""])),f)})}catch(c){g=d("WAErrorMessage").maybeGetMessageFromError(c);a==null||a.addPoint("resign_cdn_url_query_fail");a==null||a.addAnnotations({string:{resign_cdn_url_gql_error:g}});r().WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url with EBLS GraphQL failed: ",""])),g);b.forEach(function(a){var b;b=(b=e.get(d("WAMediaUtils").stringToDeliveryObjectId(a.instance_key)))==null?void 0:b.resolvable;b!=null?b.resolve(d("WAResultOrError").makeError("resign-cdn-url-gql-error")):r().MUSTFIX(n||(n=babelHelpers.taggedTemplateLiteralLoose(["No resolvable found during error for instance key: ",""])),a.instance_key)})}finally{b.forEach(function(a){var b=d("WAMediaUtils").stringToDeliveryObjectId(a.instance_key);b=(b=e.get(b))==null?void 0:b.resolvable;(b==null?void 0:b.isSettled)===!1&&r().MUSTFIX(o||(o=babelHelpers.taggedTemplateLiteralLoose(["Resolvable was not properly settled"])));e["delete"](d("WAMediaUtils").stringToDeliveryObjectId(a.instance_key))})}});return u.apply(this,arguments)}function e(a,b,c){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){a==null||a.addPoint("resign_cdn_url_query_start");try{var f;b=(yield c("createWorkerQuery")(w,{request:[{instance_key:b,payload:e.payload}]}));a==null||a.addPoint("resign_cdn_url_query_end");e=b==null||(f=b.viewer)==null||(f=f.messenger_default_encrypted_backup)==null||(f=f.mailbox)==null?void 0:f.batch_resigned_attachment_cdn_url;(e==null?void 0:e.length)!==1&&(a==null||a.addPoint("resign_cdn_url_should_have_one_response"));b=e==null?void 0:e[0];e=b==null?void 0:b.path;e=d("WADirectPath").validateDirectPath(e);if(!e.success){r().WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url with EBLS GraphQL failed: ",", graphql error: ",""])),e.error,b==null?void 0:b.exception_message);a==null||a.addAnnotations({string:{resign_cdn_url_exception_enum:(b=b==null?void 0:b.exception_enum)!=null?b:"unknown"}})}return e}catch(c){b=d("WAErrorMessage").maybeGetMessageFromError(c);a==null||a.addPoint("resign_cdn_url_query_fail");a==null||a.addAnnotations({string:{resign_cdn_url_gql_error:b}});r().WARN(q||(q=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url with EBLS GraphQL failed: ",""])),b);return d("WAResultOrError").makeError("resign-cdn-url-gql-error")}});return v.apply(this,arguments)}var w=h!==void 0?h:h=b("EBBatchRequestResignCdnUrlQuery.graphql");g.batchedResignCdnUrlFromMap=a;g.batchedResignCdnUrlWithGraphQL=t;g.resignCdnUrlWithGraphQL=e}),98);
__d("EBEnqueueResignCdnUrlRequests",["EBBatchRequestResignCdnUrl","WACustomError","WAPromiseDelays","WAPromiseTimeout","WAResolvable","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){var a=!0;return{get:function(){return a},set:function(b){a=b}}}(),i=function(){var a=window.performance.now();return{get:function(){return a},set:function(b){a=b}}}(),j=new Map(),k=c("justknobx")._("4662"),l=c("justknobx")._("3244");function a(a,b,c){var e;e=(e=j.get(a))==null?void 0:e.resolvable;if(e!=null){c==null||c.addPoint("resign_cdn_url_map_hit");return m({mediaDownloadFlow:c,objectId:a,payload:b,promise:e.promise})}e=new(d("WAResolvable").Resolvable)();var f=j.size===0;j.set(a,{payload:b,pending:!1,resolvable:e});if(!h.get())return m({mediaDownloadFlow:c,objectId:a,payload:b,promise:e.promise});void n(f);return m({mediaDownloadFlow:c,objectId:a,payload:b,promise:e.promise})}function m(a){var b=a.mediaDownloadFlow,c=a.objectId,e=a.payload;a=a.promise;return d("WAPromiseTimeout").promiseTimeout(a,l).then(function(a){if(!a.success&&a.error==="direct-path-undefined"){j["delete"](c);return d("WAPromiseDelays").delayMs(l).then(function(){return d("EBBatchRequestResignCdnUrl").resignCdnUrlWithGraphQL(b,c,e)})}return a})["catch"](function(a){var f=a instanceof Error&&["NetworkTransportError","NetworkTimeoutError","NetworkRequestError"].includes(a.name);if(a instanceof d("WACustomError").TimeoutError||f){b==null||b.addPoint("resign-cdn-url-gql-timeout");j["delete"](c);return d("EBBatchRequestResignCdnUrl").resignCdnUrlWithGraphQL(b,c,e)}else{b==null||b.addPoint("resign-cdn-url-gql-unexpected-error");b==null||b.addAnnotations({string:{resign_cdn_url_payload_fail_reason:a.message}});throw a}})}function n(a,b){h.set(!1);if(a){h.set(!0);i.set(window.performance.now());return d("EBBatchRequestResignCdnUrl").batchedResignCdnUrlFromMap(b)}else{a=Math.max(k-(window.performance.now()-i.get()),0);return d("WAPromiseDelays").delayMs(a).then(function(){h.set(!0);i.set(window.performance.now());return d("EBBatchRequestResignCdnUrl").batchedResignCdnUrlFromMap(b)})}}function b(){return j}function e(a,b){j.set(a,b)}g.enqueueResignCdnUrl=a;g.getGqlRestoredCdnUrlMap=b;g.setGqlRestoredCdnUrlMap=e}),98);
__d("EBCreateResignCDNUrlPayload",["CreateDerivedKeys","EBBase64Encode","EBWorkerEBDBApi","GetBlobFromInt64BE","Hmac_v2","I64","LSVec","OcmfClientMap","OpeEncrypt","Promise","TruncateSortKey","WAArrayBufferUtils","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j="thread_ope_key",k="__DEVICE_ID_PLACEHOLDER__";function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.accessTokenSecret,c=a.deliveryObjectId,e=a.mediaType,f=a.messageId,g=a.primaryKeySecret,h=a.productType,i=a.sort;i=i===void 0?!1:i;var j=a.sortOrderMs;a=a.threadId;b=(yield m({accessTokenSecret:b,deliveryObjectId:c,mediaType:e,messageId:f,primaryKeySecret:g,productType:h,sortOrderMs:j,threadId:a}));if(!b.success)return b;c=b.value;e=c.device_id;f=babelHelpers["extends"]({},c,{device_id:k});g=i?JSON.stringify(f,Object.keys(f).sort()):JSON.stringify(f);return d("WAResultOrError").makeResult(g.replace('"'+k+'"',String(e)))});return l.apply(this,arguments)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.accessTokenSecret,f=a.deliveryObjectId,g=a.mediaType,h=a.messageId,j=a.primaryKeySecret,k=a.productType,l=a.sortOrderMs;a=a.threadId;var m=(yield d("EBWorkerEBDBApi").getSecureEBClientState());if(m==null)return d("WAResultOrError").makeError("no-eb-client-state");var n=String(m.backupId),q=m.deviceId;if(q==null)return d("WAResultOrError").makeError("no-device-id");var r=c("EBBase64Encode")(m.mailboxRootKeyBlob),s=c("EBBase64Encode")(m.ocmfClientStateBlob);m=(yield (i||(i=b("Promise"))).all([o("attachment_key_scope",JSON.stringify([n,f]),m.ocmfClientStateBlob),o("mailbox_id_scope",n,m.ocmfClientStateBlob),o("message_id_scope",h,m.ocmfClientStateBlob),o("attachment_token_salt_scope",h,m.ocmfClientStateBlob),o("attachment_key_salt_scope",JSON.stringify([n,f]),m.ocmfClientStateBlob),o("attachment_token_salt_scope",JSON.stringify([h,f]),m.ocmfClientStateBlob),o("thread_id_scope",a,m.ocmfClientStateBlob),p(m.mailboxRootKeyBlob,l,a)]));var t=m[0],u=m[1],v=m[2],w=m[3],x=m[4],y=m[5],z=m[6];m=m[7];return m==null?d("WAResultOrError").makeError("no-encrypted-sort-key"):d("WAResultOrError").makeResult({access_token_secret:e,attachment_index_key:c("EBBase64Encode")(t),backup_ent_fbid:-8,backup_id:n,delivery_object_id:f,device_id:q,isOpenEB:0,mailbox_partial_id:c("EBBase64Encode")(u),media_type:g,message_partial_id:c("EBBase64Encode")(v),primary_key_secret:j,product_type:k,raw_identifiers:{otid:h,server_thread_key:null,timestamp:l.toString()},raw_tokens:{mailbox_root_key:r,ocmf_client_state_blob:s},salt_partial_access_token:c("EBBase64Encode")(y),salt_partial_attachment_index_key:c("EBBase64Encode")(x),salt_partial_id:c("EBBase64Encode")(w),sort_key:m,thread_id:a,thread_partial_id:c("EBBase64Encode")(z)})});return n.apply(this,arguments)}function o(a,b,e){return c("Hmac_v2")(d("WAArrayBufferUtils").stringToArrayBuffer(a),d("WAArrayBufferUtils").stringToArrayBuffer(b)).then(function(a){return c("OcmfClientMap")(e,a[0])})}function p(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e=new TextEncoder().encode(j+"_"+e).buffer;e=(yield d("CreateDerivedKeys").CreateDerivedKeys(e,void 0,a,[(h||(h=d("I64"))).of_int32(32)]))[0];if(e==null)return null;a=(yield d("GetBlobFromInt64BE").GetBlobFromInt64BE(h.of_float(b)));b=(yield d("TruncateSortKey").TruncateSortKey(a[0]));a=(yield d("OpeEncrypt").OpeEncrypt(c("LSVec").toArray(e)[0],b[0],h.of_int32(16)));e=Array.from(new Uint8Array(a[0]));b=e.map(function(a){return a.toString(16).padStart(2,"0")});return b.join("").toUpperCase()});return q.apply(this,arguments)}g.createStringifiedMediaRestorePayloadFromEBDB=a}),98);
__d("EBGetContactEpochHead",["EBMinosSecureMailboxKeysForContact","Promise","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.rawContactId;if(a==null)return(h||(h=b("Promise"))).reject(d("WAResultOrError").makeError("invalid-arguments"));a=(yield d("EBMinosSecureMailboxKeysForContact").getSecureMailboxKeysForContact(a));return a==null?d("WAResultOrError").makeResult():d("WAResultOrError").makeResult({epochHead:a.epoch_head,epochHeadCreationTime:a.epoch_head_creation_time})});return i.apply(this,arguments)}g.getContactEpochHead=a}),98);
__d("EBGetLatestChatJids",["I64","MAWBridgeSafeActionsWorkerAndUI","Promise","ReQL","WAResultOrError","asyncToGeneratorRuntime","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=1e3;function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=j);try{a=l(a,b);return d("WAResultOrError").makeResult(yield a)}catch(a){return d("WAResultOrError").makeError(c("getErrorSafe")(a))}});return k.apply(this,arguments)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c===void 0&&(c=j);c=(yield (i||(i=b("Promise"))).all([d("MAWBridgeSafeActionsWorkerAndUI").sendAndReceiveBackendWorkerAndUIShared("getLatestChatJids",{count:c}),yield a.runInTransaction(function(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table).map(function(a){a=a.jid;return(h||(h=d("I64"))).to_string(a)}))},"readonly",void 0,void 0,f.id+":54")]));a=c[0];c=c[1];var e=[];if(c.length>0){var g=new Set(c);a.forEach(function(a){var b=a.split("@")[0];g.has(b)&&e.push(a)})}return e});return m.apply(this,arguments)}g.getLatestChatJids=a}),98);
__d("EBGetMessageKeys",["EBMinosDBDev","FBLogger","Promise","WAResultOrError","WebMps","asyncToGeneratorRuntime","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("EBMinosDBDev").getEBMinosDevDb());c=(yield c.runInTransaction(["secure_minos_message_epoch_heads"],"readonly",function(c){return c.stores.secure_minos_message_epoch_heads.readIndex("[thread_id+message_id]",[a,b])},"LoadNewMinosMessageEpochHead"));return c.length===0?null:{epochHead:c[0].epoch_head}});return function(b,c){return a.apply(this,arguments)}}();function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.messageId,f=a.threadId;try{if(e==null||f==null)return d("WAResultOrError").makeError("invalid-arguments");a=(yield d("WebMps").mps().loadMessage({config:{shouldFetchSupplementals:!0,strategy:"local-only"},debug:{purpose:"get-message-keys"},messageId:e,threadId:f}));e=(yield j(f,e));if(e==null)return d("WAResultOrError").makeError("no-epoch-head-found");if(a.success===!1)return d("WAResultOrError").makeError(a.error);a=a.value;if(a==null)return d("WAResultOrError").makeError("no-message");var g=new Map();yield (i||(i=b("Promise"))).all(Array.from(a.supplementalProtobufs).map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a[0];a=a[1];var c=(yield j(f,a.messageId));if(c==null)return d("WAResultOrError").makeError("no-epoch-head-found");g.set(b,babelHelpers["extends"]({},a,{senderEpochHead:c.epochHead}))});return function(b){return a.apply(this,arguments)}}()));e=babelHelpers["extends"]({},a.toplevelProtobuf,{senderEpochHead:e.epochHead});return d("WAResultOrError").makeResult(babelHelpers["extends"]({},a,{supplementalProtobufs:g,toplevelProtobuf:e}))}catch(a){c("FBLogger")("wmi_minos").catching(c("getErrorSafe")(a)).MUSTFIX(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Runtime error in EBGetMessageKeys"])));throw a}});return k.apply(this,arguments)}g.getMessageKeys=a}),98);
__d("EBMinosWasmDeriveAttachmentTokenPrimaryKey",["EBMinosWasmDeriveAttachmentAccessTokenSecret","EBMinosWasmDeriveAttachmentPrimaryKeySecret","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("EBMinosWasmDeriveAttachmentPrimaryKeySecret").deriveAttachmentPrimaryKeySecret({mediaKey:a}));if(!b.success)return d("WAResultOrError").makeError("derive-primary-key-secret-error");a=(yield d("EBMinosWasmDeriveAttachmentAccessTokenSecret").deriveAttachmentAccessTokenSecret({mediaKey:a}));return!a.success?d("WAResultOrError").makeError("derive-access-token-secret-error"):d("WAResultOrError").makeResult({accessToken:a.value,primaryKey:b.value})});return h.apply(this,arguments)}g.deriveAttachmentTokenPrimaryKeySecret=a}),98);
__d("LSCreateResignCDNUrlPayload",["LSArrayGetObjectAt","LSBase64Encode.nop","LSBinaryToHex.nop","LSCreateDerivedKeys.nop","LSFindBackup","LSGetBlobFromInt64BE.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSIsEncryptionVersionSecure","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSOpeEncrypt.nop","LSTruncateSortKey.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return a[10]?c.sequence([function(e){return c.blobs.neq(a[11],void 0)?c.sequence([function(e){return c.i64.neq(a[8],void 0)?c.sequence([function(e){return a[9]!==void 0?c.sequence([function(e){return c.blobs.neq(a[12],void 0)?c.sequence([function(e){return d[10]=c.createArray(),d[19]=(d[10].push(a[9]),d[10]),d[19]=(d[10].push(a[1]),d[10]),d[11]=c.toJSON(d[10]),d[12]=c.createArray(),d[19]=(d[12].push(c.i64.cast([0,32])),d[12]),c.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",a[5]].join("")).then(function(a){return a=a,d[13]=a[0],a})},function(e){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[13],void 0,a[12],d[12]).then(function(a){return a=a,d[14]=a[0],a})},function(a){return d[14]?d[15]=!1:d[15]=!0,d[15]?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),d[20]="Got null keys while deriving message list OPE key. Returning null blobish",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[20]].join("")),d[19]=c.createArray(),void 0!==void 0?d[21]=(d[19].push(void 0),d[19]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[20],d[19],c.i64.cast([0,3]))},function(a){return d[16]=void 0}]):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[14],c.i64.cast([0,0])).then(function(a){return a=a,d[19]=a[0],d[20]=a[1],a})},function(a){return d[16]=d[19]}])},function(e){return c.blobs.neq(d[16],void 0)?c.sequence([function(e){return c.nativeOperation(b("LSGetBlobFromInt64BE.nop"),a[6]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return c.nativeOperation(b("LSTruncateSortKey.nop"),d[19]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return c.nativeOperation(b("LSOpeEncrypt.nop"),d[16],d[20],c.i64.cast([0,16])).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.nativeOperation(b("LSBinaryToHex.nop"),d[21]).then(function(a){return a=a,d[22]=a[0],a})},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),d[11]).then(function(a){return a=a,d[23]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF9rZXlfc2NvcGU="),d[23]).then(function(a){return a=a,d[24]=a[0],a})},function(e){return c.nativeOperation(b("LSOcmfClientMap.nop"),a[11],d[24]).then(function(a){return a=a,d[25]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[25]).then(function(a){return a=a,d[26]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[9]).then(function(a){return a=a,d[27]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWFpbGJveF9pZF9zY29wZQ=="),d[27]).then(function(a){return a=a,d[28]=a[0],a})},function(e){return c.nativeOperation(b("LSOcmfClientMap.nop"),a[11],d[28]).then(function(a){return a=a,d[29]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[29]).then(function(a){return a=a,d[30]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[4]).then(function(a){return a=a,d[31]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWVzc2FnZV9pZF9zY29wZQ=="),d[31]).then(function(a){return a=a,d[32]=a[0],a})},function(e){return c.nativeOperation(b("LSOcmfClientMap.nop"),a[11],d[32]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[33]).then(function(a){return a=a,d[34]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[4]).then(function(a){return a=a,d[35]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),d[35]).then(function(a){return a=a,d[36]=a[0],a})},function(e){return c.nativeOperation(b("LSOcmfClientMap.nop"),a[11],d[36]).then(function(a){return a=a,d[37]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[37]).then(function(a){return a=a,d[38]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[5]).then(function(a){return a=a,d[39]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("dGhyZWFkX2lkX3Njb3Bl"),d[39]).then(function(a){return a=a,d[40]=a[0],a})},function(e){return c.nativeOperation(b("LSOcmfClientMap.nop"),a[11],d[40]).then(function(a){return a=a,d[41]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[42]=a[0],a})},function(e){return d[43]=new c.Map(),d[43].set("attachment_index_key",d[26]==null?"":d[26]),d[43].set("backup_ent_fbid",a[0]),d[43].set("delivery_object_id",a[1]),d[43].set("device_id",a[8]),d[43].set("mailbox_partial_id",d[30]==null?"":d[30]),d[43].set("media_type",a[3]),d[43].set("message_partial_id",d[34]==null?"":d[34]),d[43].set("product_type",a[2]),d[43].set("salt_partial_id",d[38]==null?"":d[38]),d[43].set("sort_key",d[22]==null?"":d[22]),d[43].set("thread_partial_id",d[42]==null?"":d[42]),d[43].set("isOpenEB",a[10]===!0),d[44]=new c.Map(),d[44].set("otid",a[4]),d[44].set("server_thread_key",a[7]),d[44].set("timestamp",c.i64.to_string(a[6])),c.nativeOperation(b("LSBase64Encode.nop"),a[11]).then(function(a){return a=a,d[45]=a[0],a})},function(e){return c.nativeOperation(b("LSBase64Encode.nop"),a[12]).then(function(a){return a=a,d[46]=a[0],a})},function(e){return d[47]=new c.Map(),d[47].set("ocmf_client_state_blob",d[45]==null?"":d[45]),d[47].set("mailbox_root_key",d[46]==null?"":d[46]),d[48]=c.createArray(),d[60]=(d[48].push(a[4]),d[48]),d[60]=(d[48].push(a[1]),d[48]),d[49]=c.toJSON(d[48]),d[43].set("raw_identifiers",d[44]),d[43].set("backup_id",a[9]),d[43].set("thread_id",a[5]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[49]).then(function(a){return a=a,d[50]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),d[50]).then(function(a){return a=a,d[51]=a[0],a})},function(e){return c.nativeOperation(b("LSOcmfClientMap.nop"),a[11],d[51]).then(function(a){return a=a,d[52]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[52]).then(function(a){return a=a,d[53]=a[0],a})},function(a){return d[43].set("salt_partial_access_token",d[53]==null?"":d[53]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[11]).then(function(a){return a=a,d[54]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF9rZXlfc2FsdF9zY29wZQ=="),d[54]).then(function(a){return a=a,d[55]=a[0],a})},function(e){return c.nativeOperation(b("LSOcmfClientMap.nop"),a[11],d[55]).then(function(a){return a=a,d[56]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[56]).then(function(a){return a=a,d[57]=a[0],a})},function(b){return d[43].set("salt_partial_attachment_index_key",d[57]==null?"":d[57]),d[43].set("raw_tokens",d[47]),a[13]!==void 0?d[43].set("access_token_secret",a[13]):0,a[14]!==void 0?d[43].set("primary_key_secret",a[14]):0,d[58]=c.toJSON(d[43]),d[59]=new c.Map(),d[59].set("payload",d[58]),b=[d[59],void 0],d[17]=b[0],d[18]=b[1]}]):c.resolve((d[19]=new c.Map(),d[19].set("error_code",c.i64.cast([0,25])),d[19].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),d[19].set("error_message","OPE key is null for IssueAttachmentRestoreTask"),e=[void 0,d[19]],d[17]=e[0],d[18]=e[1]))},function(a){return a=[d[17],d[18]],d[8]=a[0],d[9]=a[1],a}]):c.resolve((d[10]=new c.Map(),d[10].set("error_code",c.i64.cast([0,20])),d[10].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),d[10].set("error_message","Missing mailbox_root_key for IssueAttachmentRestoreTask"),e=[void 0,d[10]],d[8]=e[0],d[9]=e[1]))},function(a){return a=[d[8],d[9]],d[6]=a[0],d[7]=a[1],a}]):c.resolve((d[8]=new c.Map(),d[8].set("error_code",c.i64.cast([0,1])),d[8].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),d[8].set("error_message","Missing backup_id for IssueAttachmentRestoreTask"),e=[void 0,d[8]],d[6]=e[0],d[7]=e[1]))},function(a){return a=[d[6],d[7]],d[4]=a[0],d[5]=a[1],a}]):c.resolve((d[6]=new c.Map(),d[6].set("error_code",c.i64.cast([0,24])),d[6].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),d[6].set("error_message","Missing device_id for IssueAttachmentRestoreTask"),e=[void 0,d[6]],d[4]=e[0],d[5]=e[1]))},function(a){return a=[d[4],d[5]],d[2]=a[0],d[3]=a[1],a}]):c.resolve((d[4]=new c.Map(),d[4].set("error_code",c.i64.cast([0,22])),d[4].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),d[4].set("error_message","Missing ocmf_client_state_blob for IssueAttachmentRestoreTask"),e=[void 0,d[4]],d[2]=e[0],d[3]=e[1]))},function(a){return a=[d[2],d[3]],d[0]=a[0],d[1]=a[1],a}]):c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,e){var f=a.done;a=a.value;return f?(f=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,20]),void 0,void 0],d[2]=f[0],d[3]=f[1],d[4]=f[2],d[5]=f[3],d[6]=f[4],d[7]=f[5],d[8]=f[6],d[9]=f[7],d[10]=f[8],d[11]=f[9],d[12]=f[10],d[13]=f[11],d[14]=f[12],d[15]=f[13],d[16]=f[14],d[17]=f[15],d[18]=f[16],d[19]=f[17],f):(e=a.item,c.sequence([function(a){return d[29]=e.backupTenancy,d[28]=e.encryptionVersion,d[24]=void 0,c.i64.neq(d[24],void 0)?c.resolve(d[25]=d[24]):c.sequence([function(a){return d[30]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[31]=a[0],a})},function(a){return d[31]?d[40]=(d[30].push(c.i64.cast([0,0])),d[30]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[32]?d[40]=(d[30].push(c.i64.cast([0,2])),d[30]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[33]?d[40]=(d[30].push(c.i64.cast([0,3])),d[30]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[34]=a[0],a})},function(a){return d[34]?d[40]=(d[30].push(c.i64.cast([0,4])),d[30]):0,d[35]=c.createArray(),d[36]=c.i64.of_int32(d[30].length),c.i64.gt(d[36],c.i64.cast([0,0]))?c.loopAsync(d[36],function(a){return d[40]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[30],d[40]).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return d[43]=(d[35].push(d[41]),d[35])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[40]=c.createArray(),d[41]=c.i64.of_int32(d[35].length),c.i64.gt(d[41],c.i64.cast([0,0]))?c.loopAsync(d[41],function(a){return d[43]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[35],d[43]).then(function(a){return a=a,d[44]=a[0],d[45]=a[1],a})},function(a){return d[46]=(d[40].push(c.i64.to_string(d[44])),d[40])}])}):c.resolve()},function(a){return d[42]=d[40].join(","),d[37]=d[42]}])},function(a){return d[35].some(function(a){return c.i64.eq(d[28],a)})?d[38]=d[28]:d[38]=void 0,c.i64.neq(d[38],void 0)?d[39]=d[38]:d[39]=void 0,d[25]=d[39]}])},function(a){return c.i64.neq(d[25],void 0)?d[26]=d[25]:d[26]=c.i64.cast([0,0]),c.i64.neq(d[29],void 0)?d[27]=d[29]:d[27]=c.i64.cast([0,1]),a=[e.backupId,e.deviceId,e.mailboxRootKeyBlob,e.ocmfClientStateBlob,void 0,void 0,d[26],d[27],e.epochAuthPublicKeyBlob,e.epochAuthPrivateKeyBlob,e.devicePublicKeyBlob,e.devicePrivateKeyBlob,e.epochStoragePublicKeyBlob,e.epochStoragePrivateKeyBlob,e.obliviousValidationTokenBlob,e.authorityLevel,void 0,void 0],d[2]=a[0],d[3]=a[1],d[4]=a[2],d[5]=a[3],d[6]=a[4],d[7]=a[5],d[8]=a[6],d[9]=a[7],d[10]=a[8],d[11]=a[9],d[12]=a[10],d[13]=a[11],d[14]=a[12],d[15]=a[13],d[16]=a[14],d[17]=a[15],d[18]=a[16],d[19]=a[17]}]))})},function(a){return c.storedProcedure(b("LSFindBackup")).then(function(a){return a=a,d[21]=a[0],a})},function(e){return c.blobs.neq(d[5],void 0)?c.sequence([function(e){return c.i64.neq(d[3],void 0)?c.sequence([function(e){return d[21]!==void 0?c.sequence([function(e){return c.blobs.neq(d[4],void 0)?c.sequence([function(e){return d[30]=c.createArray(),d[39]=(d[30].push(d[21]),d[30]),d[39]=(d[30].push(a[1]),d[30]),d[31]=c.toJSON(d[30]),d[32]=c.createArray(),d[39]=(d[32].push(c.i64.cast([0,32])),d[32]),c.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",a[5]].join("")).then(function(a){return a=a,d[33]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[33],void 0,d[4],d[32]).then(function(a){return a=a,d[34]=a[0],a})},function(a){return d[34]?d[35]=!1:d[35]=!0,d[35]?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),d[40]="Got null keys while deriving message list OPE key. Returning null blobish",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[40]].join("")),d[39]=c.createArray(),void 0!==void 0?d[41]=(d[39].push(void 0),d[39]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[40],d[39],c.i64.cast([0,3]))},function(a){return d[36]=void 0}]):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[34],c.i64.cast([0,0])).then(function(a){return a=a,d[39]=a[0],d[40]=a[1],a})},function(a){return d[36]=d[39]}])},function(e){return c.blobs.neq(d[36],void 0)?c.sequence([function(e){return c.nativeOperation(b("LSGetBlobFromInt64BE.nop"),a[6]).then(function(a){return a=a,d[39]=a[0],a})},function(a){return c.nativeOperation(b("LSTruncateSortKey.nop"),d[39]).then(function(a){return a=a,d[40]=a[0],a})},function(a){return c.nativeOperation(b("LSOpeEncrypt.nop"),d[36],d[40],c.i64.cast([0,16])).then(function(a){return a=a,d[41]=a[0],a})},function(a){return c.nativeOperation(b("LSBinaryToHex.nop"),d[41]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),d[31]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF9rZXlfc2NvcGU="),d[43]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[44]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),d[21]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWFpbGJveF9pZF9zY29wZQ=="),d[47]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[48]).then(function(a){return a=a,d[49]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[49]).then(function(a){return a=a,d[50]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[4]).then(function(a){return a=a,d[51]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWVzc2FnZV9pZF9zY29wZQ=="),d[51]).then(function(a){return a=a,d[52]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[52]).then(function(a){return a=a,d[53]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[53]).then(function(a){return a=a,d[54]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[4]).then(function(a){return a=a,d[55]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),d[55]).then(function(a){return a=a,d[56]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[56]).then(function(a){return a=a,d[57]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[57]).then(function(a){return a=a,d[58]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[5]).then(function(a){return a=a,d[59]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("dGhyZWFkX2lkX3Njb3Bl"),d[59]).then(function(a){return a=a,d[60]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[60]).then(function(a){return a=a,d[61]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[61]).then(function(a){return a=a,d[62]=a[0],a})},function(e){return d[63]=new c.Map(),d[63].set("attachment_index_key",d[46]==null?"":d[46]),d[63].set("backup_ent_fbid",a[0]),d[63].set("delivery_object_id",a[1]),d[63].set("device_id",d[3]),d[63].set("mailbox_partial_id",d[50]==null?"":d[50]),d[63].set("media_type",a[3]),d[63].set("message_partial_id",d[54]==null?"":d[54]),d[63].set("product_type",a[2]),d[63].set("salt_partial_id",d[58]==null?"":d[58]),d[63].set("sort_key",d[42]==null?"":d[42]),d[63].set("thread_partial_id",d[62]==null?"":d[62]),d[63].set("isOpenEB",a[10]===!0),d[64]=new c.Map(),d[64].set("otid",a[4]),d[64].set("server_thread_key",a[7]),d[64].set("timestamp",c.i64.to_string(a[6])),c.nativeOperation(b("LSBase64Encode.nop"),d[5]).then(function(a){return a=a,d[65]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[4]).then(function(a){return a=a,d[66]=a[0],a})},function(e){return d[67]=new c.Map(),d[67].set("ocmf_client_state_blob",d[65]==null?"":d[65]),d[67].set("mailbox_root_key",d[66]==null?"":d[66]),d[68]=c.createArray(),d[80]=(d[68].push(a[4]),d[68]),d[80]=(d[68].push(a[1]),d[68]),d[69]=c.toJSON(d[68]),d[63].set("raw_identifiers",d[64]),d[63].set("backup_id",d[21]),d[63].set("thread_id",a[5]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[69]).then(function(a){return a=a,d[70]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),d[70]).then(function(a){return a=a,d[71]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[71]).then(function(a){return a=a,d[72]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[72]).then(function(a){return a=a,d[73]=a[0],a})},function(a){return d[63].set("salt_partial_access_token",d[73]==null?"":d[73]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[31]).then(function(a){return a=a,d[74]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF9rZXlfc2FsdF9zY29wZQ=="),d[74]).then(function(a){return a=a,d[75]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[75]).then(function(a){return a=a,d[76]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[76]).then(function(a){return a=a,d[77]=a[0],a})},function(b){return d[63].set("salt_partial_attachment_index_key",d[77]==null?"":d[77]),d[63].set("raw_tokens",d[67]),a[13]!==void 0?d[63].set("access_token_secret",a[13]):0,a[14]!==void 0?d[63].set("primary_key_secret",a[14]):0,d[78]=c.toJSON(d[63]),d[79]=new c.Map(),d[79].set("payload",d[78]),b=[d[79],void 0],d[37]=b[0],d[38]=b[1]}]):c.resolve((d[39]=new c.Map(),d[39].set("error_code",c.i64.cast([0,25])),d[39].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),d[39].set("error_message","OPE key is null for IssueAttachmentRestoreTask"),e=[void 0,d[39]],d[37]=e[0],d[38]=e[1]))},function(a){return a=[d[37],d[38]],d[28]=a[0],d[29]=a[1],a}]):c.resolve((d[30]=new c.Map(),d[30].set("error_code",c.i64.cast([0,20])),d[30].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),d[30].set("error_message","Missing mailbox_root_key for IssueAttachmentRestoreTask"),e=[void 0,d[30]],d[28]=e[0],d[29]=e[1]))},function(a){return a=[d[28],d[29]],d[26]=a[0],d[27]=a[1],a}]):c.resolve((d[28]=new c.Map(),d[28].set("error_code",c.i64.cast([0,1])),d[28].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),d[28].set("error_message","Missing backup_id for IssueAttachmentRestoreTask"),e=[void 0,d[28]],d[26]=e[0],d[27]=e[1]))},function(a){return a=[d[26],d[27]],d[24]=a[0],d[25]=a[1],a}]):c.resolve((d[26]=new c.Map(),d[26].set("error_code",c.i64.cast([0,24])),d[26].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),d[26].set("error_message","Missing device_id for IssueAttachmentRestoreTask"),e=[void 0,d[26]],d[24]=e[0],d[25]=e[1]))},function(a){return a=[d[24],d[25]],d[22]=a[0],d[23]=a[1],a}]):c.resolve((d[24]=new c.Map(),d[24].set("error_code",c.i64.cast([0,22])),d[24].set("stored_procedure","LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure"),d[24].set("error_message","Missing ocmf_client_state_blob for IssueAttachmentRestoreTask"),e=[void 0,d[24]],d[22]=e[0],d[23]=e[1]))},function(a){return a=[d[22],d[23]],d[0]=a[0],d[1]=a[1],a}])},function(a){return a=[d[0],d[1]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsCreateResignCDNUrlPayloadStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state"];e.exports=a}),null);
__d("LSCreateResignCDNUrlPayloadStoredProcedure",["LSCreateResignCDNUrlPayload","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSCreateResignCDNUrlPayload"),e.backupEntFbid,e.deliveryObjectId,e.productType,e.mediaType,e.messageId,e.threadId,e.sortOrder,e.serverThreadKey,e.deviceId,e.backupId,e.isOpenEb,e.ocmfClientState,e.mailboxRootKey,e.accessTokenSecret,e.primaryKeySecret);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("EBLSResignCdnUrl",["Base64Utils","EBCreateResignCDNUrlPayload","EBEnqueueResignCdnUrlRequests","EBLS","EBMinosCheckWasmFeatureSupport","EBMinosWasmDeriveAttachmentTokenPrimaryKey","FBLogger","I64","LSCreateResignCDNUrlPayloadStoredProcedure","LSFactory","LSShape","MAWConfig","Promise","WAJids","WAResultOrError","asyncToGeneratorRuntime","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=function(){return c("FBLogger")("wmi").tags(["labyrinth_web","resign_cdn_url"])},w="-8",x=(u||(u=d("I64"))).of_string(w);function a(a){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.chatJid,g=a.deliveryObjectId,o=a.externalId,p=a.mediaDownloadFlow,q=a.mediaKey,r=a.mediaType;a=a.sortOrderMs;v().INFO(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url with EBLS GraphQL"])));var s=(yield d("EBMinosCheckWasmFeatureSupport").checkWasFeatureSupportAndGK());p==null||p.addPoint("resign_cdn_url_gql_ebls_start");var w=(yield d("EBLS").init()).db;p==null||p.addPoint("resign_cdn_url_gql_ebls_end");var y=null,z=null;if(s){s=(yield d("EBMinosWasmDeriveAttachmentTokenPrimaryKey").deriveAttachmentTokenPrimaryKeySecret(q));!s.success?v().WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["",""])),s.error):(y=d("Base64Utils").fromArrayBuffer(s.value.accessToken),z=d("Base64Utils").fromArrayBuffer(s.value.primaryKey))}var A={accessTokenSecret:y,backupEntFbid:x,deliveryObjectId:g,mediaType:r,messageId:o,primaryKeySecret:z,productType:d("MAWConfig").getConfig().productTypeForEBAttachments,sortOrder:(u||(u=d("I64"))).of_float(a),threadId:d("WAJids").threadIdForChatJid(e)};p==null||p.addPoint("resign_cdn_url_gql_payload_start");q=[w.runInTransaction(function(a){return c("LSCreateResignCDNUrlPayloadStoredProcedure")(c("LSFactory")(a),A)},"readwrite",void 0,void 0,f.id+":97").then(function(a){var b=a[0];a=a[1];if(b!=null)return d("LSShape").toRecord(b);b=a==null?{}:d("LSShape").toRecord(a);v().MUSTFIX(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Failed to create payload. stored procedure: ",", error code: ",", error message: ",""])),b.stored_procedure,b.error_code,b.error_message);return null})["catch"](function(a){a=c("getErrorSafe")(a);p==null||p.addPoint("resign_cdn_url_gql_lsdb_payload_fail");v().catching(a).MUSTFIX(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Failed to create lsdb payload"])));return null}),d("EBCreateResignCDNUrlPayload").createStringifiedMediaRestorePayloadFromEBDB({accessTokenSecret:y,deliveryObjectId:g,mediaType:r,messageId:o,primaryKeySecret:z,productType:d("MAWConfig").getConfig().productTypeForEBAttachments,sortOrderMs:a,threadId:d("WAJids").threadIdForChatJid(e)}).then(function(a){if(a.success)return{payload:a.value};p==null||p.addPoint("resign_cdn_url_gql_ebdb_payload_fail");p==null||p.addAnnotations({string:{payload_fail_error:a.error}});return null})["catch"](function(a){a=c("getErrorSafe")(a);v().catching(a).MUSTFIX(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Failed to create ebdb payload"])));p==null||p.addAnnotations({string:{payload_fail_error:a.message}});return null})];s=(yield (t||(t=b("Promise"))).all(q));w=s[0];y=s[1];r=w!=null?w:y;w==null&&y!=null&&(p==null||p.addPoint("resign_cdn_url_fallback_to_ebdb"));if(r==null){p==null||p.addPoint("resign_cdn_url_gql_payload_fail");return d("WAResultOrError").makeError("create-payload-failed")}p==null||p.addPoint("resign_cdn_url_gql_payload_end");p==null||p.addPoint("resign_cdn_url_gql_restore_start");o=(yield d("EBEnqueueResignCdnUrlRequests").enqueueResignCdnUrl(g,r,p));if(!o.success){v().MUSTFIX(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url with EBLS GraphQL failed: ",""])),o.error);p==null||p.addPoint("resign_cdn_url_gql_restore_fail");return o}p==null||p.addPoint("resign_cdn_url_gql_restore_end");v().INFO(n||(n=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url with EBLS GraphQL succeeded"])));return d("WAResultOrError").makeResult(o.value)});return y.apply(this,arguments)}function z(a,b){var c=[];for(var d in a)a[d]instanceof Object?!(b[d]instanceof Object)?c.push(d):c.push.apply(c,z(a[d],b[d])):a[d]!==b[d]&&c.push(d);return c}function e(a){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.chatJid,e=a.deliveryObjectId,g=a.externalId,h=a.mediaDownloadFlow,i=a.mediaKey,j=a.mediaType,k=a.sortOrderMs;v().INFO(o||(o=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url with EBDB GraphQL"])));a=(yield d("EBMinosCheckWasmFeatureSupport").checkWasFeatureSupportAndGK());var l=null,m=null;if(a){a=(yield d("EBMinosWasmDeriveAttachmentTokenPrimaryKey").deriveAttachmentTokenPrimaryKeySecret(i));!a.success?v().WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["",""])),a.error):(l=d("Base64Utils").fromArrayBuffer(a.value.accessToken),m=d("Base64Utils").fromArrayBuffer(a.value.primaryKey))}h==null||h.addPoint("resign_cdn_url_gql_payload_start");i=(yield d("EBCreateResignCDNUrlPayload").createStringifiedMediaRestorePayloadFromEBDB({accessTokenSecret:l,deliveryObjectId:e,mediaType:j,messageId:g,primaryKeySecret:m,productType:d("MAWConfig").getConfig().productTypeForEBAttachments,sortOrderMs:k,threadId:d("WAJids").threadIdForChatJid(b)}).then(function(a){if(a.success)return{payload:a.value};h==null||h.addPoint("resign_cdn_url_gql_ebdb_payload_fail");h==null||h.addAnnotations({string:{payload_fail_error:a.error}});return null})["catch"](function(a){a=c("getErrorSafe")(a);v().catching(a).MUSTFIX(q||(q=babelHelpers.taggedTemplateLiteralLoose(["Failed to create ebdb payload"])));h==null||h.addAnnotations({string:{payload_fail_error:a.message}});return null}));if(i==null){h==null||h.addPoint("resign_cdn_url_gql_payload_fail");return d("WAResultOrError").makeError("create-payload-failed")}h==null||h.addPoint("resign_cdn_url_gql_payload_end");h==null||h.addPoint("resign_cdn_url_gql_restore_start");a=(yield d("EBEnqueueResignCdnUrlRequests").enqueueResignCdnUrl(e,i,h));if(!a.success){v().MUSTFIX(r||(r=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url with EBDB GraphQL failed: ",""])),a.error);h==null||h.addPoint("resign_cdn_url_gql_restore_fail");var n=(yield d("EBLS").init()).db;n=(yield n.runInTransaction(function(a){return c("LSCreateResignCDNUrlPayloadStoredProcedure")(c("LSFactory")(a),{accessTokenSecret:l,backupEntFbid:x,deliveryObjectId:e,mediaType:j,messageId:g,primaryKeySecret:m,productType:d("MAWConfig").getConfig().productTypeForEBAttachments,sortOrder:(u||(u=d("I64"))).of_float(k),threadId:d("WAJids").threadIdForChatJid(b)})},"readwrite",void 0,void 0,f.id+":295"))[0];if(n!=null){n=JSON.parse(d("LSShape").toRecord(n).payload,function(a,b){return a==="device_id"?b.toString():b});i=JSON.parse(i.payload,function(a,b){return a==="device_id"?b.toString():b});var t=z(n,i),w=z(i,n);h==null||h.addAnnotations({bool:{string_payload_mismatch:JSON.stringify(n,Object.keys(n).sort())!==JSON.stringify(i,Object.keys(i).sort())},string:{ebdb_mismatches:w.join(","),mismatches:t.join(",")}})}return a}h==null||h.addPoint("resign_cdn_url_gql_restore_end");v().INFO(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Resigning cdn url with EBDB GraphQL succeeded"])));return d("WAResultOrError").makeResult(a.value)});return A.apply(this,arguments)}g.DEPRECATED_eblsResignCdnUrlWithGraphQL=a;g.getPayloadMismatches=z;g.ebdbResignCdnUrlWithGraphQL=e}),98);
__d("EBMainThreadEBDBApi",["$InternalEnum","EBDB","EBDBConsistencyApi","FBLogger","LSDatabaseSingleton","WAResolvable","WormDump","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new(d("WAResolvable").Resolvable)();function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);try{yield d("EBDBConsistencyApi").startListeningDeviceRegistrations(a,d("EBDB").EBDBEnvironment.UI)}catch(a){c("FBLogger")("wmi_eb").catching(a).mustfix("Error on startListeningDeviceRegistrations in UI")}finally{i.resolve(a)}});return j.apply(this,arguments)}function e(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("EBDBConsistencyApi").trackOverprompting(d("EBDB").EBDBEnvironment.UI,a)});return k.apply(this,arguments)}function f(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield i.promise);yield d("EBDBConsistencyApi").addNewDevice(b,d("EBDB").EBDBEnvironment.UI,a)});return l.apply(this,arguments)}function m(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("EBDB").getEBDB());return a.dump({auto_restore_opt_out:{customFields:{optOutKey:(a=d("WormDump")).wormNonSensitiveField,optOutValue:a.wormNonSensitiveField}},device_metadata:{customFields:{backupId:a.wormNonSensitiveField,deviceRegistrationId:a.wormNonSensitiveField,pk:a.wormNonSensitiveField,taskId:a.wormNonSensitiveField}},device_state:{customFields:{deviceId:a.wormNonSensitiveField,env:a.wormNonSensitiveField}},encrypted_backups:{customFields:{authorityLevel:a.wormNonSensitiveField,backupId:a.wormNonSensitiveField,backupTenancy:a.wormNonSensitiveField,hasOtcEligibleDevices:a.wormNonSensitiveField,isUserOptedOut:a.wormNonSensitiveField,pk:a.wormNonSensitiveField}},encrypted_backups_virtual_devices:{customFields:{backupId:a.wormNonSensitiveField,creationTime:a.wormNonSensitiveField,deviceCreatedOn:a.wormNonSensitiveField,pk:a.wormNonSensitiveField,removalStatus:a.wormNonSensitiveField,requiresHsmMigration:a.wormNonSensitiveField}},experiences_shared_state:{},secure_encrypted_backups_client_state:{customFields:{authorityLevel:a.wormNonSensitiveField,backupId:a.wormNonSensitiveField,backupTenancy:a.wormNonSensitiveField,deviceId:a.wormNonSensitiveField,encryptionVersion:a.wormNonSensitiveField}},secure_encrypted_backups_epochs:{customFields:{authorityLevel:a.wormNonSensitiveField,epochId:a.wormNonSensitiveField,epochStatus:a.wormNonSensitiveField}},secure_encrypted_backups_recovery_code_status:{customFields:{pk:a.wormNonSensitiveField,recoveryCodeStatus:a.wormNonSensitiveField}}})});return n.apply(this,arguments)}var o=b("$InternalEnum")({Disabled:0,UIInconsistent:1,WorkerInconsistent:2,Consistent:3});function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield i.promise);void d("EBDBConsistencyApi").trackConsistency(c,d("EBDB").EBDBEnvironment.UI,a,function(){var a=o.Disabled,c=d("EBDBConsistencyApi").getDeviceId();c!=null&&b!=null?a=o.Consistent:c!=null&&b==null?a=o.WorkerInconsistent:c==null&&b!=null&&(a=o.UIInconsistent);return{"int":{crossEnvConsistency:a}}})});return q.apply(this,arguments)}g.startListeningDeviceRegistrations=a;g.trackOverprompting=e;g.addNewDevice=f;g.getEBDBDump=m;g.EBCrossEnvConsistencyResult=o;g.trackConsistency=p}),98);
__d("EBMessageRangeQueryForIndexing",["EBAPIQPLPoints","EBAPISharedUtils","EBAPIWorkerCheck","EBMessageRangeQueryForThreads","I64","LSDatabaseSingleton","LSMEBTaskCreationSource","LSVec","MAWEncryptedBackupUtils","MAWJobDefinitions","Promise","QPLUserFlow","WAHashStringToNumber","WAResultOrError","WATagsLogger","asyncToGeneratorRuntime","ifRequireable","qpl","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=d("WATagsLogger").TAGS(["labyrinth_web","EBMessageRangeQueryForIndexing"]);function n(a,b,e){var f=d("MAWEncryptedBackupUtils").convertLSTypesToJSTypesForRestoreJob(a.protobuf),g=c("LSVec").toArray(a.echo).map(function(a){return d("MAWJobDefinitions").toEncodedEchoMessage(a)});return{echoMessages:g,hasMoreAfter:a.messageRangeInfo.has_more_before,hasMoreBefore:a.messageRangeInfo.has_more_after,isPointQuery:!1,mpsMessageQuery:void 0,nextMessageTimestampMsAfter:(l||(l=d("I64"))).of_string(a.messageRangeInfo.next_message_timestamp_ms_after),nextMessageTimestampMsBefore:l.of_string(a.messageRangeInfo.next_message_timestamp_ms_before),protobufMessages:f,referenceTimestamp:a.args.from[0],requestId:e,taskSource:b}}function a(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e,f=a.traceId!=null?a.traceId:c("uuidv4")(),g=d("WAHashStringToNumber").hashStringToNumber(f);e=(e=a.source)!=null?e:c("LSMEBTaskCreationSource").UNKNOWN;var l=c("qpl")._(521476367,"2704");c("QPLUserFlow").start(l,{annotations:{bool:{mainThreadRestore:!1,rangeQueryForIndexing:!0,workerThreadRestore:!0},"int":{source:e}},instanceKey:g});var o=a.chatJid;if(o==null){c("QPLUserFlow").endFailure(l,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NULL_CHAT_JID,{instanceKey:g});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.range.search.gql.error");return d("WAResultOrError").makeError("null-chat-jid")}try{var p;if(d("EBAPIWorkerCheck").runningInWorker()){var q=new(j||(j=b("Promise")))(function(a,b){return c("ifRequireable")("EBLS",function(b){b=b.getLSStorage;return a(b())},function(){return a(null)})});q=(yield q);if(q==null){m.ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Calling EBLS without EBLS being available for message range query"])));c("QPLUserFlow").endFailure(l,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.EBLS_NOT_INITIALIZED,{instanceKey:g});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.range.search.gql.error");return d("WAResultOrError").makeError("ebls-not-initialized")}}else q=(yield (k||(k=d("LSDatabaseSingleton"))).LSDatabaseSingleton);p=(p=a.sortOrderMs)!=null?p:""+(Date.now()+6e4);a=(yield d("EBMessageRangeQueryForThreads").messageRangeQueryForThreads({instanceKey:f,qplEventObject:l,restoreType:"range",source:(a=a.source)!=null?a:c("LSMEBTaskCreationSource").UNKNOWN,storage:q,threads:[{chatJid:o,direction:"before",from:[p,void 0]}]}));if(a.length>0&&a[0].success){q=a[0].value;o=n(q,e,f);d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.range.search.gql.success");return d("WAResultOrError").makeResult(o)}else{d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.range.search.gql.error");p=a[0].error;return d("WAResultOrError").makeError(p!=null?p:"runtime-error")}}catch(a){m.ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["graphQL range restore error ",""])),a);c("QPLUserFlow").endFailure(l,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RUNTIME_ERROR,{error:a,instanceKey:g});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.range.search.gql.error");return d("WAResultOrError").makeError("runtime-error")}});return o.apply(this,arguments)}g.messageRangeQueryForIndexing=a}),98);
__d("EBMinosWriteKeyChangeAdminMessage",["EBMinosTypes","FBLogger","MAWAdminWriteUserDeviceMsgTxn","MAWBridge","MAWDbAppMeta","MAWDbThreadTxns","MAWDexieTable","MAWExternalId","MAWIndexedDb","MAWTransactionMode","MpsTypes","Promise","WAArmadilloTransportEvent.pb","WABuildMpsPayload","WADbContact","WAGlobals","WAJids","WAStanzaUtils","WebMps","asyncToGeneratorRuntime","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){return a.appMeta.get({key:d("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlert}).then(function(a){return(a=a==null?void 0:a.value.allowSecurityAlert)!=null?a:!1})}function k(a,b){b=d("WAGlobals").getMyUserJid()===b;return!b&&a}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.deviceChangeType;b=b===void 0?d("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REPLACED:b;var e=a.epochHeadCreationTime;a=a.userJid;try{var f=d("MAWExternalId").generateExternalId();e=d("WABuildMpsPayload").buildMpsDeviceChangeAdminMessage(a,e,d("WAStanzaUtils").toStanzaId(f),b);f={directive:null,insertionSource:d("MpsTypes").InsertionSource.Receive,message:e};yield d("WebMps").mps().saveNewMessages([f],{source:"eb-minos-device-change"});c("FBLogger")("wmi_minos").info("Sent device change transport event for user %s with type %s",a,String(b))}catch(b){e=c("getErrorSafe")(b);c("FBLogger")("wmi_minos").catching(e).mustfix("Failed to send device change transport event for user %s",a);throw e}});return m.apply(this,arguments)}function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.contactId,f=a.epochHeadCreationTime,g=d("EBMinosTypes").userFbidToUserJid(e);if(g==null){c("FBLogger")("wmi_minos").MUSTFIX(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Invalid userJid generated in writeKeyChangeAdminMessage"])));return(i||(i=b("Promise"))).resolve()}a=(yield d("MAWIndexedDb").makeMsgrTransactor({participants:d("MAWTransactionMode").READONLY,threads:d("MAWTransactionMode").READONLY},"writeKeyChangeAdminMessage",function(a){return function(){return d("MAWDbThreadTxns").getAllThreadsForUsers(a,[g])}})());e=a.get(g);var m=(yield d("MAWBridge").getBridge().sendAndReceive("event","getLSDBUsersRelationships",{users:[g]}));if(e==null||(e==null?void 0:e.length)===0)return(i||(i=b("Promise"))).resolve();var n=e.filter(function(a){a=d("WAJids").switchOnMsgrChatJidType(a.jid,{group:function(){return"group"},user:function(){return"one_to_one"}});return a==="one_to_one"});a=(yield (i||(i=b("Promise"))).all([l({deviceChangeType:d("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REPLACED,epochHeadCreationTime:f,userJid:g}),d("MAWIndexedDb").makeMsgrTransactor({appMeta:d("MAWTransactionMode").READONLY,ftsBackloggedMessages:d("MAWTransactionMode").READWRITE,groupInfo:d("MAWTransactionMode").READONLY,messages:d("MAWTransactionMode").READWRITE,threads:d("MAWTransactionMode").READWRITE},"writeKeyChangeAdminMessage",function(a){return function(){return d("MAWDexieTable").dexieAll(n.map(function(b){return j(a).then(function(c){k(c,g)&&m.get(g)===d("WADbContact").TWO_WAY_CONTACT?d("MAWAdminWriteUserDeviceMsgTxn").writeUserDeviceAdminMsg(a,g,b,"update",f):d("MAWDexieTable").dexieResolve()})}))}})()]));e=a[1];return e});return n.apply(this,arguments)}g.saveDeviceChangeTransportEvent=l;g.writeMinosKeyChangeAdminMessage=a}),98);
__d("EBMinosWriteSecureStorageAlert",["EBMinosTypes","FBLogger","MAWDbAddDeviceChangeAlertsTxn","MAWDbDeviceChangeAlerts","MAWIndexedDb","MAWTransactionMode","MAWUnsafeCoerce","Promise","WAJids","WASignalOther"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var e=a.contactId,f=a.epochHead,g=a.epochHeadCreationTime,j=d("WAJids").validateDeviceJid(d("EBMinosTypes").userFbidToUserJid(d("EBMinosTypes").unsafeCastToUserFbId(e)));if(j==null){c("FBLogger")("wmi_minos").MUSTFIX(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Invalid deviceJid generated in writeMinosSecureStorageAlert"])));return(i||(i=b("Promise"))).resolve()}return d("MAWIndexedDb").makeMsgrTransactor({deviceChangeAlerts:d("MAWTransactionMode").READWRITE},"writeMinosSecureStorageAlert",function(a){return function(){return d("MAWDbAddDeviceChangeAlertsTxn").addDeviceChangeAlertsTxn(a,{action:d("MAWDbDeviceChangeAlerts").KEY_CHANGE,deviceJid:j,epochHead:f,identity:d("MAWUnsafeCoerce").unsafeCoerce(d("WASignalOther").toBytes(f,32)),isArchived:!1,model:"secure_storage",platform:"Meta",ts:g})}})()}g.writeMinosSecureStorageAlert=a}),98);
__d("EBSetRestoreStatusForInitialRestore",["I64","LSEncryptedBackupsClientRestoreState","LSIntEnum","Promise","ReQL","WAJids","asyncToGeneratorRuntime","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var g=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(e.tables.encrypted_backups_client_restore_status).map(function(a){a=a.threadId;return a})));return e.runInTransaction(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var f=[],l=[];g.forEach(function(a){f.push(e.encrypted_backups_client_restore_status["delete"](a))});yield (k||(k=b("Promise"))).all(f);a.forEach(function(a){l.push(e.encrypted_backups_client_restore_status.put({lastUpdated:(j||(j=d("I64"))).of_float((h||(h=c("performanceAbsoluteNow")))()),restoreStatus:(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsClientRestoreState").RESTORE_IN_PROGRESS),threadId:d("WAJids").threadIdForChatJid(a)}))});yield k.all(l)});return function(a){return e.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":37")});return l.apply(this,arguments)}function e(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.encrypted_backups_client_restore_status).map(function(a){a=a.threadId;return a})));return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var d=[];c.forEach(function(b){d.push(a.encrypted_backups_client_restore_status["delete"](b))});yield (k||(k=b("Promise"))).all(d)});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":75")});return m.apply(this,arguments)}g.setRestoreStatusForInitialRestore=a;g.resetClientRestoreStatus=e}),98);
__d("MAWUISnippetsMessagesMetadataMapObservable",["I64","ReplayLastSubject"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){function b(b){var c;c=a.call(this,b)||this;c.value=b;return c}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.next=function(b){this.value=b,a.prototype.next.call(this,b)};return b}(d("ReplayLastSubject").ReplayLastSubject);a=function(){function a(){this.$1=new Map()}var b=a.prototype;b.get=function(a){a=(h||(h=d("I64"))).to_string(a);var b=this.$1.get(a);if(b==null){var c=new i([]);this.$1.set(a,c);return c}return b};b.set=function(a,b){a=this.get(a);var c=a.value;if(c.length!==b.length){a.next(b);return}c=c.every(function(a,c){c=b[c];return a.externalId===c.externalId&&a.sortOrderMs===c.sortOrderMs});c||a.next(b)};return a}();g.Subject=i;g.MAWUISnippetsMessagesMetadataMapObservable=a}),98);
__d("updateMWLSThreadSnippet",["FBLogger","I64","MAWBridgeBuildThreadSnippet","asyncToGeneratorRuntime","getMAWLastMessageCtaType"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,e=a.thread,f=a.threadSnippet;a=a.txn;var g=f.snippetParams;b=d("MAWBridgeBuildThreadSnippet").buildBridgeThreadSnippet({snippetContactIDs:g.contactIDs,snippetMentionJIDs:(b=g.mentionJIDs)!=null?b:[],snippetParams:g.strings,snippetSenderContactId:f.snippetSenderContactId,snippetType:f.snippetType});b==null&&c("FBLogger")("messenger_web").warn("[updateMWLSThreadSnippet] null snippet is calculated for a thread, snippetType: %s, contactsIDs is null: %s, snippetParams is null: %s",f.snippetType,g.contactIDs==null,g.strings==null);g=f.snippetSenderContactId!=null?(h||(h=d("I64"))).of_string(f.snippetSenderContactId):(h||(h=d("I64"))).zero;f=c("getMAWLastMessageCtaType")(f.snippetType);yield a.threads.put(babelHelpers["extends"]({},e,{lastMessageCtaType:f,snippet:b,snippetSenderContactId:g}))});return i.apply(this,arguments)}g.updateMWLSThreadSnippet=a}),98);
__d("MAWUISnippetsCacheService",["FBLogger","I64","LSDatabaseSingleton","MAWChatJid","MAWJids","MAWMiActGetThreadLifecycleState__DO_NOT_USE","MAWUISnippetsMessagesMetadataMapObservable","Promise","ReStoreVaulting","WAJids","asyncToGeneratorRuntime","promiseDone","updateMWLSThreadSnippet"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=function(){function a(){this.namespace="snippets",this.$1=new(d("MAWUISnippetsMessagesMetadataMapObservable").MAWUISnippetsMessagesMetadataMapObservable)()}var e=a.prototype;e.onCacheChange=function(a,e){c("promiseDone")((j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(c){return c.runInTransaction(function(c){return(h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a[0],f=a[1];a=d("WAJids").unsafeCoerceToChatJid(b);var g=(yield d("MAWChatJid").toThreadMaybe(c,a));if(g==null){yield l(c,a);return}b=f.value.snippet;a=babelHelpers["extends"]({},b.snippetParams,{strings:b.snippetParams.strings.map(function(a){return d("ReStoreVaulting").maybeVault(a)})});return d("updateMWLSThreadSnippet").updateMWLSThreadSnippet({thread:g,threadSnippet:babelHelpers["extends"]({},b,{snippetParams:a}),txn:c}).then(function(){n(g.threadKey,e,f)})});return function(b){return a.apply(this,arguments)}}()))},"readwrite",void 0,void 0,f.id+":47")}))};e.getNewestIncomingMessagesMetadata=function(a){return this.$1.get(a)};return a}();var k="[SnippetsCacheService][UI]";function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("MAWMiActGetThreadLifecycleState__DO_NOT_USE").getThreadLifecycleStateByJid(a,d("MAWJids").convertChatJidToIntJid(b),"MAWUISnippetsCacheService"));c("FBLogger")("MAWCacheService").mustfix(k+" Missing LSDBThread when updating snippet. jid: %s, thread state: %s",b,a.type)});return m.apply(this,arguments)}function n(a,b,e){c("FBLogger")("MAWCacheService").info(k+" Updated thread snippet. threadKey: %s, source: %s, msgId: %s, reactionId: %s, ack level %s",(i||(i=d("I64"))).to_string(a),b,e.value.snippetMsgId,e.value.snippetReactionId,e.value.snippetMsgAckLevel)}var o=new e();function a(){return o}g.getMAWUISnippetsCacheService=a}),98);
__d("MAWUICacheServiceRegistry",["MAWUISnippetsCacheService"],(function(a,b,c,d,e,f,g){"use strict";var h={snippets:d("MAWUISnippetsCacheService").getMAWUISnippetsCacheService()};function a(){return h}g.getUICacheServiceRegistry=a}),98);
__d("MAWUICacheServices",["BroadcastChannelFallback","FBLogger","MAWBridgeSendAndReceive","MAWCacheServiceQPL","MAWCacheServiceUtils","MAWLoggerUtils","MAWUICacheServiceRegistry","MAWUICacheServicesBase","asyncToGeneratorRuntime","promiseDone","shallowArrayEqual"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(){this.$1=new(d("MAWUICacheServicesBase").MAWUICacheServicesBase)(d("MAWUICacheServiceRegistry").getUICacheServiceRegistry()),this.$2=d("MAWCacheServiceUtils").getMAWCacheServiceBroadcastChannel(),this.$3()}var e=a.prototype;e.$3=function(){var a=this,b=function(b){var d;if(typeof b==="object"&&b!=null&&typeof b.data==="object"&&b.data!==null&&typeof ((d=b.data)==null?void 0:d.namespace)==="string"&&((d=b.data)==null?void 0:d.namespace)!==null&&typeof ((d=b.data)==null?void 0:d.source)==="string"&&((d=b.data)==null?void 0:d.source)!==null&&typeof ((d=b.data)==null?void 0:d.cache)==="object"&&((d=b.data)==null?void 0:d.cache)!==null&&Array.isArray(b.data.cache)){var e;d=b.data.namespace;var f=b.data.cache,g=b.data.source,h;typeof ((e=b.data)==null?void 0:e.instanceKey)==="number"&&((e=b.data)==null?void 0:e.instanceKey)!==null?(h=b.data.instanceKey,g==="realtime-update"&&c("MAWCacheServiceQPL").registerInstanceKeyInUI(h),c("MAWCacheServiceQPL").addPointQPL(h,"broadcasting_to_ui_end",g)):c("FBLogger")("MAWCacheService").info("Invalid instance key received via broadcast channel.");a.$1.updateInMemoryCacheAndTriggerCallback(d,f,g,h)}else throw c("FBLogger")("messenger_web").mustfixThrow("Invalid payload received via broadcast channel.")};this.$2==null?d("BroadcastChannelFallback").registerBroadcastChannelFallbackListener(d("MAWCacheServiceUtils").MAW_CACHE_SERVICE_BROADCAST_CHANNEL,b):this.$2.onmessage=b};e.resetInMemoryCache=function(a,b){this.$1.resetInMemoryCache(a,b)};e.checkExistingCacheOrGetFromScratchAndNotifyListenersFor=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=this;b=Array.from(new Set(b));var f=d("MAWLoggerUtils").getInstanceKey();c("MAWCacheServiceQPL").startQPL(f,a);c("MAWCacheServiceQPL").addAnnotationsQPL(f,{string:{instanceKey:f.toString()},string_array:{allKeys:c("MAWCacheServiceQPL").redactKeysForNonEmployee(b)}});var g=this.$1.checkInMemoryCacheAndTriggerCallback(a,b,f);if(g.length===0){c("FBLogger")("MAWUICacheServices").info("All keys are in memory cache. Namespace: %s",a);return}var h=(yield this.$1.checkPersistedCacheAndTriggerCallback(a,g,f)["catch"](function(b){c("FBLogger")("MAWCacheService").catching(b).mustfix("Failed to read from persisted cache in UI.",a);c("MAWCacheServiceQPL").addPointQPL(f,"read_from_persisted_cache_failed");return g}));!c("shallowArrayEqual")(g,h)?(c("FBLogger")("MAWUICacheServices").info("Sending low priority bridge call to invalidate cache for keys: %s",g.join(", ")),c("MAWCacheServiceQPL").addPointQPL(f,"invalidating_cache"),c("MAWCacheServiceQPL").addAnnotationsQPL(f,{string_array:{keysToInvalidateCacheFor:c("MAWCacheServiceQPL").redactKeysForNonEmployee(g)}}),c("promiseDone")(d("MAWBridgeSendAndReceive").sendAndReceive("backend","computeCachePayloadFromScratch",{instanceKey:f,isLowPriority:!0,keys:g,namespace:a})["catch"](function(b){c("MAWCacheServiceQPL").addPointQPL(f,"invalidating_cache_failed"),c("FBLogger")("MAWCacheService").catching(b).mustfix("Failed to invalidate potential outdated persisted cache.",a)}))):this.$1.QPLMetadata.set(f,"all-from-scratch");c("MAWCacheServiceQPL").addAnnotationsQPL(f,{"int":{memoryHitRate:Math.floor((b.length-g.length)/b.length*100),persistedHitRate:Math.floor((g.length-h.length)/g.length*100)}});if(h.length===0){c("FBLogger")("MAWUICacheServices").info("All keys are in persisted cache. Namespace: %s",a);return}c("FBLogger")("MAWUICacheServices").info("Sending bridge call to calculate cache from scratch for keys: %s",h.join(", "));c("MAWCacheServiceQPL").addPointQPL(f,"sending_bridge_call_to_compute_from_scratch");c("MAWCacheServiceQPL").addAnnotationsQPL(f,{string_array:{keysToBeCalculatedFromScratch:c("MAWCacheServiceQPL").redactKeysForNonEmployee(h)}});yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","computeCachePayloadFromScratch",{instanceKey:f,isLowPriority:!1,keys:h,namespace:a})["catch"](function(b){c("MAWCacheServiceQPL").endFailureQPL(f,"sending_bridge_call_to_compute_from_scratch_failed"),c("MAWCacheServiceQPL").addAnnotationsQPL(f,{string:{error:b.message}}),e.$1.QPLMetadata["delete"](f),c("FBLogger")("MAWCacheService").catching(b).mustfix("Failed to compute cache from scratch for",a)})});function e(b,c){return a.apply(this,arguments)}return e}();e.getFromScratchSkippingCacheAndNotifyListenersFor=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=this,f;b=Array.from(new Set(b));var g=d("MAWLoggerUtils").getInstanceKey();(f=c("MAWCacheServiceQPL")).startQPL(g,a);f.addAnnotationsQPL(g,{string:{instanceKey:g.toString()},string_array:{allKeys:f.redactKeysForNonEmployee(b)}});this.$1.QPLMetadata.set(g,"all-from-scratch");f.addPointQPL(g,"sending_bridge_call_to_compute_from_scratch_skipping_cache");yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","computeCachePayloadFromScratch",{instanceKey:g,isLowPriority:!1,keys:b,namespace:a})["catch"](function(b){c("MAWCacheServiceQPL").endFailureQPL(g,"sending_bridge_call_to_compute_from_scratch_failed"),c("MAWCacheServiceQPL").addAnnotationsQPL(g,{string:{error:b.message}}),e.$1.QPLMetadata["delete"](g),c("FBLogger")("MAWCacheService").catching(b).mustfix("Failed to compute cache from scratch for",a)})});function e(b,c){return a.apply(this,arguments)}return e}();return a}(),i=null;a=function(){i==null&&(i=new h());return i};g.getMAWUICacheServices=a}),98);
__d("MWEncryptedBackupsInitializeRestore",["EBGetLatestChatJids","EBSetRestoreStatusForInitialRestore","ExecutionEnvironment","FBLogger","LSRequestId","MAWBridge","MAWBridgeSendAndReceive","MAWEBRestoreTrackingUtils","MAWMpsGating","MAWUICacheServices","MpsOverBridge","MpsTypes","Promise","asyncToGeneratorRuntime","getErrorSafe","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=20;function a(a){var b=c("LSRequestId").generate();if(d("MAWMpsGating").isFullMpsEnabled())return l(a,b,n,"FULL_MPS");else return l(a,b,o,"MPS")}function l(a,b,c,d){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){c("FBLogger")("messenger_web").INFO(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Initializing restore with ",""])),f);p(f);try{d("MAWEBRestoreTrackingUtils").markEBRestoreInitial({querySource:"GQL_MAIN_THREAD",traceId:b});f=(yield d("EBGetLatestChatJids").getLatestChatJids(a,50));if(f.success===!1){d("MAWEBRestoreTrackingUtils").markEBRestoreFail(b,(j||(j=c("ExecutionEnvironment"))).isInWorker,"latestChatJidsResultOrError: "+c("getErrorSafe")(f.error).message);return}yield d("EBSetRestoreStatusForInitialRestore").setRestoreStatusForInitialRestore(f.value,a);if(d("MAWMpsGating").isMpsSnippetsCacheServiceEnabled()||c("gkx")("2792")){var g=d("MAWUICacheServices").getMAWUICacheServices();c("promiseDone")(g.getFromScratchSkippingCacheAndNotifyListenersFor("snippets",f.value.map(d("MpsTypes").toThreadId)))}yield e(f.value);d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(b)}catch(a){d("MAWEBRestoreTrackingUtils").markEBRestoreFail(b,(j||(j=c("ExecutionEnvironment"))).isInWorker,"initialize_restore_failed: "+c("getErrorSafe")(a).message);throw a}finally{yield d("EBSetRestoreStatusForInitialRestore").resetClientRestoreStatus(a)}});return m.apply(this,arguments)}function n(a){return(i||(i=b("Promise"))).all(a.map(function(a){return d("MpsOverBridge").mps().loadMessages({debug:{purpose:"InitializeRestore"},direction:"desc",from:[d("MpsTypes").toTimestamp(Number.MAX_SAFE_INTEGER),void 0],numMessages:k,threadId:d("MpsTypes").toThreadId(a)})})).then(function(){})}function o(a){return d("MAWBridgeSendAndReceive").sendAndReceive("backend","maw_load_msgs_by_chat_jids_into_maw",{actionType:"pre-load",config:a.map(function(a){return{chatJid:a,direction:"before",includeLowerBoundMsg:!0,lowerBoundSortOrderMs:Date.now(),numMsgs:k}})})}function p(a){d("MAWBridge").getBridge().fireAndForget("backend","logInitRestoreMethodForDebugging",{method:a})}g.initializeRestore=a}),98);
__d("X25519",["$InternalEnum","Promise","WACryptoCurve25519Dependencies","WASignalKeys","WASignalOther","WASignalSignatures"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("$InternalEnum").Mirrored(["Encryption","Signing"]),j=b("$InternalEnum")({PublicKey:0,PrivateKey:1,Signature:2});function k(a,b){if(b===i.Encryption)return[];b=1;switch(a){case j.PublicKey:b=1;break;case j.PrivateKey:b=2;break;case j.Signature:b=3;break}return[255,b]}function l(a,b,c){b=k(b,c);c=b.length;if(c<=0)return a;var d=new Uint8Array(c+a.byteLength);d.set(Array.from(b));d.set(a,c);return d}function m(a,b,c){b=k(b,c).length;return a.slice(b)}function n(a,b){return{privateKey:l(a.privateKey,j.PrivateKey,b),publicKey:l(a.publicKey,j.PublicKey,b)}}function a(a){a=n(d("WASignalKeys").makeKeyPair(),a);return{pk:a.publicKey,sk:a.privateKey}}function o(a,b){if(b===i.Encryption)return 32;switch(a){case j.PublicKey:case j.PrivateKey:return 32;case j.Signature:return 64}}function p(a,b,c){var d=k(b,c),e=d.length;b=o(b,c);c=b!=null?e+b:0;if(a.length!==c)return!1;var f=a.subarray(0,e);b=new Uint8Array(d);return b.length===f.length&&b.every(function(a,b){return a===f[b]})}function q(a,b){if(p(a,j.PublicKey,b))return a;return}function r(a,b){if(p(a,j.PrivateKey,b))return a;return}function c(a,b){var c=q(a.pkBytes,b);a=r(a.skBytes,b);if(c!=null&&a!=null)return{pk:c,sk:a}}function e(a,c){a=m(a,j.PrivateKey,i.Signing);return d("WASignalSignatures").signMsg(d("WASignalKeys").makeKeyPairFrom(d("WASignalOther").ensureSize(a,32)),c).then(function(a){a=l(a,j.Signature,i.Signing);return(h||(h=b("Promise"))).resolve(a)})}function f(a){if(p(a,j.Signature,i.Signing))return a}function s(a,b,c){b=m(b,j.PublicKey,i.Signing);return d("WASignalSignatures").verifyMsgSignalVariant(d("WASignalKeys").serializeIdentity(b),c,d("WASignalOther").ensureSize(m(a,j.Signature,i.Signing),64))}function t(a,c){c=c;a=a;return!p(a,j.PublicKey,i.Encryption)||!p(c,j.PrivateKey,i.Encryption)?(h||(h=b("Promise"))).resolve():d("WACryptoCurve25519Dependencies").calculateAgreement(a,c).then(function(a){return(h||(h=b("Promise"))).resolve(new Uint8Array(a))})}g.KeyPurpose=i;g.generateKeys=a;g.publicKeyFromBytes=q;g.secretKeyFromBytes=r;g.keysFromBytes=c;g.sign=e;g.signatureFromBytes=f;g.verify=s;g.exchangeKeys=t}),98);
__d("PublicKeyCrypto",["Promise","UInt8Array","X25519"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,c){return(h||(h=b("Promise"))).all([a,c]).then(function(a){return(h||(h=b("Promise"))).resolve(a[0]!=null&&a[1]!=null?d("UInt8Array").concatBytes([a[0],a[1]]):void 0)})}function a(a,b,c){return i(d("X25519").exchangeKeys(c,a),d("X25519").exchangeKeys(c,b))}function c(a,b,c){return i(d("X25519").exchangeKeys(c,a),d("X25519").exchangeKeys(b,a))}g.senderDeriveSharedSecret=a;g.receiverDeriveSharedSecret=c}),98);
__d("ReverbWriteFailureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5829");b=d("FalcoLoggerInternal").create("reverb_write_failure",a);e=b;g["default"]=e}),98);
__d("ReverbWriteSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5831");b=d("FalcoLoggerInternal").create("reverb_write_success",a);e=b;g["default"]=e}),98);
__d("WASmaxInAbPropsIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInAbPropsIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInAbPropsIQErrorFeatureNotImplementedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","feature-not-implemented");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",501);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorFeatureNotImplementedMixin=a}),98);
__d("WASmaxInAbPropsNoRetryErrors",["WAResultOrError","WASmaxInAbPropsIQErrorBadRequestMixin","WASmaxInAbPropsIQErrorFeatureNotImplementedMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInAbPropsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInAbPropsIQErrorFeatureNotImplementedMixin").parseIQErrorFeatureNotImplementedMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IQErrorFeatureNotImplemented",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorFeatureNotImplemented"],[b,c])}g.parseNoRetryErrors=a}),98);
__d("WASmaxInAbPropsGetExperimentConfigResponseErrorNoRetry",["WAResultOrError","WASmaxInAbPropsIQErrorResponseMixin","WASmaxInAbPropsNoRetryErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInAbPropsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInAbPropsNoRetryErrors").parseNoRetryErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorNoRetryErrors:b.value}))}g.parseGetExperimentConfigResponseErrorNoRetry=a}),98);
__d("WASmaxInAbPropsIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInAbPropsGetExperimentConfigResponseErrorRetry",["WAResultOrError","WASmaxInAbPropsIQErrorInternalServerErrorMixin","WASmaxInAbPropsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;c=d("WASmaxInAbPropsIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(c.value);if(!c.success)return c;a=d("WASmaxInAbPropsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorIQErrorInternalServerErrorMixin:c.value},a.value))}g.parseGetExperimentConfigResponseErrorRetry=a}),98);
__d("WASmaxInAbPropsExperimentConfigMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"prop");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"config_code",1,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"config_value");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"config_expo_key",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({configCode:b.value,configValue:c.value,configExpoKey:a.value})}g.parseExperimentConfigMixin=a}),98);
__d("WASmaxInAbPropsSamplingConfigMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"prop");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"event_code",1,void 0);if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"sampling_weight",-1e4,1e4);return!a.success?a:d("WAResultOrError").makeResult({eventCode:b.value,samplingWeight:a.value})}g.parseSamplingConfigMixin=a}),98);
__d("WASmaxInAbPropsConfigs",["WAResultOrError","WASmaxInAbPropsExperimentConfigMixin","WASmaxInAbPropsSamplingConfigMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInAbPropsExperimentConfigMixin").parseExperimentConfigMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ExperimentConfig",value:b.value});var c=d("WASmaxInAbPropsSamplingConfigMixin").parseSamplingConfigMixin(a);return c.success?d("WAResultOrError").makeResult({name:"SamplingConfig",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ExperimentConfig","SamplingConfig"],[b,c])}g.parseConfigs=a}),98);
__d("WASmaxInAbPropsIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInAbPropsGetExperimentConfigResponseSuccess",["WAResultOrError","WASmaxInAbPropsConfigs","WASmaxInAbPropsIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"prop");if(!b.success)return b;b=d("WASmaxInAbPropsConfigs").parseConfigs(a);return!b.success?b:d("WAResultOrError").makeResult({configs:b.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"erid");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytesRange(a,1,100);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"props");if(!c.success)return c;var e=d("WASmaxParseUtils").optionalChildWithTag(a,"erid",i);if(!e.success)return e;var f=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"protocol","1");if(!f.success)return f;var g=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,c.value,"ab_key");if(!g.success)return g;var j=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,c.value,"hash");if(!j.success)return j;var k=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,c.value,"refresh",0,void 0);if(!k.success)return k;var l=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,c.value,"refresh_id",0,void 0);if(!l.success)return l;a=d("WASmaxInAbPropsIQResultResponseMixin").parseIQResultResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"prop",0,Infinity,h);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({propsProtocol:f.value,propsAbKey:g.value,propsHash:j.value,propsRefresh:k.value,propsRefreshId:l.value},a.value,{erid:e.value,propsProp:b.value}))}g.parseGetExperimentConfigResponseSuccessPropsProp=h;g.parseGetExperimentConfigResponseSuccessErid=i;g.parseGetExperimentConfigResponseSuccess=a}),98);
__d("WASmaxOutAbPropsBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutAbPropsGetExperimentConfigRequest",["WASmaxAttrs","WASmaxJsx","WASmaxOutAbPropsBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){a=a.propsHash;a=d("WASmaxOutAbPropsBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{xmlns:"abt",to:d("WAWap").S_WHATSAPP_NET},d("WASmaxJsx").smax("props",{protocol:"1",hash:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)})));return a}g.makeGetExperimentConfigRequest=a}),98);
__d("WASmaxAbPropsGetExperimentConfigRPC",["WAComms","WASmaxInAbPropsGetExperimentConfigResponseErrorNoRetry","WASmaxInAbPropsGetExperimentConfigResponseErrorRetry","WASmaxInAbPropsGetExperimentConfigResponseSuccess","WASmaxOutAbPropsGetExperimentConfigRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WASmaxOutAbPropsGetExperimentConfigRequest").makeGetExperimentConfigRequest(a);b=(yield d("WAComms").sendSmaxStanza(a,b));var c=d("WASmaxInAbPropsGetExperimentConfigResponseSuccess").parseGetExperimentConfigResponseSuccess(b,a);if(c.success)return{name:"GetExperimentConfigResponseSuccess",value:c.value};var e=d("WASmaxInAbPropsGetExperimentConfigResponseErrorNoRetry").parseGetExperimentConfigResponseErrorNoRetry(b,a);if(e.success)return{name:"GetExperimentConfigResponseErrorNoRetry",value:e.value};b=d("WASmaxInAbPropsGetExperimentConfigResponseErrorRetry").parseGetExperimentConfigResponseErrorRetry(b,a);if(b.success)return{name:"GetExperimentConfigResponseErrorRetry",value:b.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GetExperimentConfig",{Success:c,ErrorNoRetry:e,ErrorRetry:b}))});return h.apply(this,arguments)}g.sendGetExperimentConfigRPC=a}),98);
__d("WAGetAbPropsProtocol",["WALogger","WAResultOrError","WASmaxAbPropsGetExperimentConfigRPC","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WASmaxAbPropsGetExperimentConfigRPC").sendGetExperimentConfigRPC({propsHash:a}));if(a.name==="GetExperimentConfigResponseSuccess"){var b=a.value,c=b.propsAbKey,e=b.propsHash,f=b.propsRefresh,g=b.propsRefreshId,i=b.propsProp;b=b.erid;i=j(i);var k=i.newProps;i=i.samplingConfigs;return d("WAResultOrError").makeResult({abKey:c,hash:e,refresh:f,refreshId:g,props:k,samplingConfigs:i,erid:b==null?void 0:b.elementValue})}d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["getAbPropsProtocol failed ",""])),a.value);return d("WAResultOrError").makeError()});return i.apply(this,arguments)}function j(a){var b=[],c=[];a.forEach(function(a){a=a.configs;if(a.name==="ExperimentConfig"){var d;b.push({configCode:a.value.configCode,configValue:a.value.configValue,configExpoKey:(d=a.value.configExpoKey)==null?void 0:d.toString()})}else a.name==="SamplingConfig"&&c.push({eventCode:a.value.eventCode,samplingWeight:a.value.samplingWeight})});return{newProps:b,samplingConfigs:c}}g.getAbPropsProtocol=a}),98);
__d("WAAbPropsSync",["WAAbProps","WAAbPropsHelpers","WAGetAbPropsProtocol","WALogger","WAPromiseManagement","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;c=d("WAPromiseManagement").cacheWhilePending(function(){return"abProps"},a);function a(a){var b=a.sendHash;b=b===void 0?!0:b;var c=a.eventFlow;c==null||c.addPoint("sync_ab_props",{bool:{sendHash:b}});return b==null||b===!1?l(null,c):d("WAAbProps").getHash().then(function(a){return l(a,c)})}e=a;function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b==null||b.addPoint("fetch_ab_props");a=(yield d("WAGetAbPropsProtocol").getAbPropsProtocol(a));if(!a.success)d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["fetchAbProps failed"])));else{a=a.value;var c=a.abKey,e=a.hash,f=a.refresh;a=a.props;a=d("WAAbPropsHelpers").parseAbProps(d("WAAbProps").getConfig(),a);b==null||b.addPoint("save_ab_props");b=(yield n(c,e,f,a));b.success===!1&&(b.error,d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["syncAbProps: detected no hash"]))))}c=(yield d("WAAbProps").getRefreshSecs());return{seconds:c}});return m.apply(this,arguments)}function n(a,b,c,d){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=(yield d("WAAbProps").getAbProps());a={abKey:a!=null?a:f.abKey,hash:b!=null?b:f.hash,refresh:d("WAAbPropsHelpers").maybeUpdateRefresh(c),lastSyncTime:d("WATimeUtils").unixTime(),propValues:f.propValues,propExpoKeys:f.propExpoKeys,internalExpoKeys:f.internalExpoKeys,expoKeyStr:f.expoKeyStr};if(b==null){yield d("WAAbProps").setAbProps(a);d("WALogger").LOG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["WAAbProps.update: detected no hash"])));return d("WAResultOrError").makeError("noHash")}d("WALogger").LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["WAAbProps.update: updating ab configs"])));c=e.values;b=e.expoKeys;e=d("WAAbPropsHelpers").maybeUpdatePropValues(c,f.propValues,d("WAAbProps").getConfig());c=d("WAAbPropsHelpers").maybeUpdateExpoKeys(b,f.propExpoKeys,d("WAAbProps").getConfig());b=c.propExpoKeys;c=c.expoKeysToDelete;var g,h;c=d("WAAbPropsHelpers").maybeUpdateInternalExpoKeys(c,f.internalExpoKeys);c!=null&&(g=c.internalExpoKeys,h=c.expoKeyStr);yield d("WAAbProps").setAbProps(babelHelpers["extends"]({},a,{propValues:e,propExpoKeys:b,internalExpoKeys:g,expoKeyStr:h}));return d("WAResultOrError").makeResult()});return o.apply(this,arguments)}g.syncAbProps=c;g.syncAbPropsDebug=e}),98);
__d("WACheckCiphertextInServer",["WAHttpResumeCheck","WAMediaUrl","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c,e,f){return f.run(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,f){b=d("WAMediaUrl").buildUploadUrl(a,e,c,b.domain,f,!0);f=(yield d("WAHttpResumeCheck").httpResumeCheck(b));if(f.success)return d("WAResultOrError").makeResult(f);else{b=f.error;switch(b){case"server-timeout":case"unspecified-http-error":return d("WAResultOrError").makeError({progressMade:!0});default:return d("WAResultOrError").makeResult(d("WAResultOrError").makeError(b))}}});return function(a,b){return f.apply(this,arguments)}}()).then(function(a){return a!=null?a:d("WAResultOrError").makeError("max-attempts-exceeded")})}g.checkCiphertextInServer=a}),98);
__d("WAIsMediaKeyReusable",["WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=2*d("WATimeUtils").DAY_SECONDS;function a(a){var b=Math.floor(Math.random()*d("WATimeUtils").DAY_SECONDS);return a!=null&&d("WATimeUtils").happenedWithin(a,h+b)}g.MMS_MEDIA_KEY_TTL=h;g.isMediaKeyReusable=a}),98);
__d("WAFindReusableMediaEntry",["WAIsMediaKeyReusable","WAMediaUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=["fileEncSha256","mediaKey","mediaKeyTimestamp","uploadToken"];function a(a,b){if(a==null)return null;b=b.get(a);if(b==null)return null;a=d("WAMediaUtils").decodeMediaEntryData(b);b=a.fileEncSha256;var c=a.mediaKey,e=a.mediaKeyTimestamp,f=a.uploadToken;a=babelHelpers.objectWithoutPropertiesLoose(a,h);return c!=null&&f!=null&&b!=null&&e!=null&&d("WAIsMediaKeyReusable").isMediaKeyReusable(e)?babelHelpers["extends"]({},a,{fileEncSha256:b,mediaKey:c,mediaKeyTimestamp:e,uploadToken:f}):null}g.findReusableMediaEntryForArmadillo=a}),98);
__d("WASmaxInDevicesFetchSelfResponseError",["WAResultOrError","WASmaxInDevicesIQErrorResponseMixin","WASmaxInDevicesRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInDevicesIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInDevicesRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup").parseRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup:b.value}))}g.parseFetchSelfResponseError=a}),98);
__d("WASmaxInDevicesDeviceInfoMixin",["WAResultOrError","WASmaxInDevicesIdentityKeyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"platform");if(!b.success)return b;b=d("WASmaxParseUtils").contentString(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"manufacturer");if(!b.success)return b;b=d("WASmaxParseUtils").contentString(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function j(a){var b=d("WASmaxParseUtils").assertTag(a,"model");if(!b.success)return b;b=d("WASmaxParseUtils").contentString(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function k(a){var b=d("WASmaxParseUtils").assertTag(a,"seen");if(!b.success)return b;b=d("WASmaxParseUtils").contentInt(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function l(a){var b=d("WASmaxParseUtils").assertTag(a,"creation");if(!b.success)return b;b=d("WASmaxParseUtils").contentInt(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function m(a){var b=d("WASmaxParseUtils").assertTag(a,"ip");if(!b.success)return b;b=d("WASmaxParseUtils").contentString(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function n(a){var b=d("WASmaxParseUtils").assertTag(a,"location");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"latitude");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"longitude");if(!c.success)return c;a=d("WASmaxParseUtils").contentString(a);return!a.success?a:d("WAResultOrError").makeResult({latitude:b.value,longitude:c.value,elementValue:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"device");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"platform",h);if(!b.success)return b;var c=d("WASmaxParseUtils").optionalChildWithTag(a,"manufacturer",i);if(!c.success)return c;var e=d("WASmaxParseUtils").optionalChildWithTag(a,"model",j);if(!e.success)return e;var f=d("WASmaxParseUtils").optionalChildWithTag(a,"seen",k);if(!f.success)return f;var g=d("WASmaxParseUtils").optionalChildWithTag(a,"creation",l);if(!g.success)return g;var o=d("WASmaxParseUtils").optionalChildWithTag(a,"ip",m);if(!o.success)return o;var p=d("WASmaxParseUtils").optionalChildWithTag(a,"location",n);if(!p.success)return p;var q=d("WASmaxParseUtils").attrIntRange(a,"id",1,999);if(!q.success)return q;a=d("WASmaxInDevicesIdentityKeyMixin").parseIdentityKeyMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({id:q.value},a.value,{platform:b.value,manufacturer:c.value,model:e.value,seen:f.value,creation:g.value,ip:o.value,location:p.value}))}g.parseDeviceInfoPlatform=h;g.parseDeviceInfoManufacturer=i;g.parseDeviceInfoModel=j;g.parseDeviceInfoSeen=k;g.parseDeviceInfoCreation=l;g.parseDeviceInfoIp=m;g.parseDeviceInfoLocation=n;g.parseDeviceInfoMixin=a}),98);
__d("WASmaxInDevicesFetchSelfResponseSuccess",["WAResultOrError","WASmaxInDevicesDeviceInfoMixin","WASmaxInDevicesIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"device");if(!b.success)return b;b=d("WASmaxInDevicesDeviceInfoMixin").parseDeviceInfoMixin(a);return!b.success?b:b}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"self");if(!c.success)return c;a=d("WASmaxInDevicesIQResultResponseMixin").parseIQResultResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"device",1,25,h);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{selfDevice:b.value}))}g.parseFetchSelfResponseSuccessSelfDevice=h;g.parseFetchSelfResponseSuccess=a}),98);
__d("WASmaxOutDevicesFetchSelfRequest",["WASmaxJsx","WASmaxOutDevicesBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(){var a=d("WASmaxOutDevicesBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"fbid:devices"},d("WASmaxJsx").smax("self",null)));return a}g.makeFetchSelfRequest=a}),98);
__d("WASmaxDevicesFetchSelfRPC",["WAComms","WASmaxInDevicesFetchSelfResponseError","WASmaxInDevicesFetchSelfResponseSuccess","WASmaxOutDevicesFetchSelfRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WASmaxOutDevicesFetchSelfRequest").makeFetchSelfRequest();a=(yield d("WAComms").sendSmaxStanza(b,a));var c=d("WASmaxInDevicesFetchSelfResponseSuccess").parseFetchSelfResponseSuccess(a,b);if(c.success)return{name:"FetchSelfResponseSuccess",value:c.value};a=d("WASmaxInDevicesFetchSelfResponseError").parseFetchSelfResponseError(a,b);if(a.success)return{name:"FetchSelfResponseError",value:a.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("FetchSelf",{Success:c,Error:a}))});return h.apply(this,arguments)}g.sendFetchSelfRPC=a}),98);
__d("WAGetCurrentUserDeviceList",["WAAssertUnreachable","WAGlobals","WAJids","WALogger","WAPersistedJobManager","WASignalKeys","WASmaxDevicesFetchSelfRPC","WATimeUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b){if(a.isCurrentDevice&&b.isCurrentDevice){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Two devices were detected as isCurrentDevice in getCurrentUserDeviceList"])));return 0}if(a.isCurrentDevice)return-1;if(b.isCurrentDevice)return 1;if(a.lastSeen!=null&&b.lastSeen==null)return-1;if(a.lastSeen==null&&b.lastSeen!=null)return 1;if(a.lastSeen!=null&&b.lastSeen!=null){a=a.lastSeen;b=b.lastSeen;return b.getTime()-a.getTime()}return 0}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WASmaxDevicesFetchSelfRPC").sendFetchSelfRPC());switch(a.name){case"FetchSelfResponseError":var b=a.value.errorRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup;switch(b.name){case"RetryableIQError":var e=b.value.backoff;if(e!=null)throw new(d("WAPersistedJobManager").RetryOnBackoff)({algo:{delay:e,type:"constant"},jitter:0});else throw new(d("WAPersistedJobManager").RetryOnBackoff)({algo:{first:d("WATimeUtils").HOUR_MILLISECONDS/60,type:"exponential"},jitter:.1});default:b.name;e=b.value.code;throw c("err")("Failed with an error code "+e)}case"FetchSelfResponseSuccess":var f=d("WAJids").extractDeviceId(d("WAGlobals").getMyDeviceJid());return a.value.selfDevice.map(function(a){var b=a.creation,c=a.elementValue,e=a.id,g=a.ip,h=a.location,i=a.manufacturer,j=a.model,k=a.platform;a=a.seen;return{creationTime:b==null?null:d("WATimeUtils").toDate(d("WATimeUtils").castToUnixTime(b.elementValue)),id:d("WAJids").interpretAsDeviceId(e),identityKey:d("WASignalKeys").serializeIdentity(c),ipAddress:(b=g==null?void 0:g.elementValue)!=null?b:null,isCurrentDevice:e===f,lastSeen:a==null?null:d("WATimeUtils").toDate(d("WATimeUtils").castToUnixTime(a.elementValue)),latitude:h==null?null:parseFloat(h.latitude),location:(c=h==null?void 0:h.elementValue)!=null?c:null,longitude:h==null?null:parseFloat(h.longitude),manufacturer:(g=i==null?void 0:i.elementValue)!=null?g:null,model:(b=j==null?void 0:j.elementValue)!=null?b:null,platform:(e=k==null?void 0:k.elementValue)!=null?e:null}}).sort(i);default:return c("WAAssertUnreachable")(a.name)}});return j.apply(this,arguments)}g.getCurrentUserDeviceList=a}),98);
__d("WAPublishAppDataProtocol",["FBLogger","WABridge","WAEncUserMsg","WAGetCurrentUserDeviceInfoApi","WAGlobals","WAOdsEnums","WASmaxAppdataPublishPeerRPC","WATagsLogger","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("WATagsLogger").TAGS(["sendAppDataFanout"]);function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.messagePayload;a=b.identities;b=b.externalId;a=a.get(d("WAGlobals").getMyUserJid());if(a==null)throw c("FBLogger")("wmi").mustfixThrow("Missing my user identities");a=Array.from(a.entries()).map(function(a){var b=a[0];a=a[1];return{identity:a,jid:b}});var f=[{devicesInfo:a,user:d("WAGlobals").getMyUserJid()}];a=(yield d("WAGlobals").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return d("WAEncUserMsg").encryptUserMsg(f,{messageBytes:e.messageBytes,type:"appdata"},{cryptoManager:a})},{operationType:"encrypt",flush:!0}));var g=a.phash,k=!1,l=[];a.participants!=null&&a.participants.forEach(function(a){a.type==="pkmsg"&&(k=!0),l.push({toJid:a.to,encTypeIndividualMixinArgs:{encType:a.type,encElementValue:a.ciphertext},encVersionFutureproofMixinArgs:{encV:parseInt(a.v,10)}})});a={appdataTo:d("WAGlobals").getMyUserJid(),toArgs:l};a={peerPeerFanout:a};var m=void 0;if(k){var n=(yield d("WAGetCurrentUserDeviceInfoApi").getCurrentUserDeviceInfo());n=n==null?void 0:n.identityKey;if(n==null){j.ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to fetch current device public identity key"])));throw c("FBLogger")("wmi").mustfixThrow("No public identity key")}m={deviceIdentityElementValue:n}}n={appdataDeviceListCheck:"true"};b={appdataId:b,peerMsgTypesArgs:a,deviceIdentityMixinArgs:m,withDeviceListCheckMixinArgs:n};a=(yield d("WASmaxAppdataPublishPeerRPC").sendPeerRPC(b));switch(a.name){case"PeerResponseSuccess":n=(m=a.value.deviceListStaleMixin)==null?void 0:m.phash;if(n!=null&&g!=null&&n!==g){j.LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Got phash mismatch on appdata, local[","] server[","]"])),g,n);d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.PHASH_MISMATCH,key:"appdata"});return{type:"success",ts:d("WATimeUtils").castToUnixTime(a.value.t),phash:{type:"mismatch",local:g,server:n},count:null,reportingMeta:null}}else return{type:"success",ts:d("WATimeUtils").castToUnixTime(a.value.t),phash:{type:"ok"},count:null,reportingMeta:null};default:a.name;throw c("FBLogger")("wmi").mustfixThrow("Failed to send appdata %s",a.value.error)}});return k.apply(this,arguments)}g.publishAppData=a}),98);
__d("WASaveReceiptApi",["MAWTransactionMode","WADbTransactor","WAMsg"],(function(a,b,c,d,e,f,g){"use strict";a=d("WADbTransactor").makeSignalTransactor({receipts:d("MAWTransactionMode").READWRITE},"saveReceipt",function(a){return function(b){return a.receipts.put({msgId:b.id.externalId.toString(),permittedIdentitiesPerDevice:b.permittedIdentitiesPerDevice,recipientDevices:b.recipientDevices,waMsgId:d("WAMsg").craftWAMsgIdString(b.id)}).then(function(){})}});g.saveReceipt=a}),98);
__d("WAPublishMessage",["FBLogger","Promise","WAGenReportingMeta","WAGlobals","WAJids","WALoadReceiptApi","WALogger","WAMsg","WASaveReceiptApi","WASendMsgInternal","WASentBytesCache","WATimeUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.identities;a=a.messagePayload;a={author:a.protocolMsgId.author,chat:a.protocolMsgId.chat,externalId:a.protocolMsgId.externalId};var e=(yield d("WALoadReceiptApi").loadReceipt(a));if(e.success)return e.value;e=new Map();for(c of c){c[0];var f=c[1];for(f of f){var g=f[0],h=f[1];if(g===d("WAGlobals").getMyDeviceJid())continue;e.set(g,{pubKey:h})}}g=new Set();h={permittedIdentitiesPerDevice:e,recipientDevices:g,id:a};b.addPoint("save_receipts_start");yield d("WASaveReceiptApi").saveReceipt(h);b.addPoint("save_receipts_end");return h});return l.apply(this,arguments)}function a(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=a.messagePayload,g=a.identities;a=a.sendIdentity;a=a===void 0?!1:a;e.addPoint("prepare_receipt_start");g=(yield k({messagePayload:f,identities:g},e));e.addPoint("prepare_receipt_end");e.addPoint("calculate_recipients_start");var i=f.frankingKey,l=f.frankingVersion,m=f.messageBytes,p=f.backupDirective,q=f.messageType;f=f.protocolMsgId;g=n(g.permittedIdentitiesPerDevice);g=q.type==="text"&&q.invitedParticipantUserJid!=null?g.filter(function(a){return a.user===q.invitedParticipantUserJid||a.user===d("WAGlobals").getMyUserJid()}):g;e.addPoint("calculate_recipients_end",{"int":{recipientsCount:g.length}});var r=q.type==="text"&&q.invitedParticipantUserJid!=null?q.invitedParticipantUserJid:f.chat,s=f.chat===d("WAGlobals").getMyUserJid();if(g.length===0&&!s)throw c("FBLogger")("wmi").mustfixThrow("Trying to send a message with no recipients");else if(g.length===0&&s)return{serverResponse:{type:"success",ts:d("WATimeUtils").unixTime(),phash:{type:"ok"},count:null,reportingMeta:null},encryption:{type:"user",messageTo:d("WAGlobals").getMyUserJid(),participants:[],phash:""}};s=a?yield d("WAGlobals").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return o(a)},{operationType:"get_my_device_identity",flush:!1,afterInit:!0}):null;a=(yield q.isRevoked===!0?(j||(j=b("Promise"))).resolve(null):d("WAGenReportingMeta").genReportingMeta(m.bytes,i,l));r=(yield d("WASendMsgInternal").sendMessageV2({type:"chat",messageBytes:m,chat:r,deviceIdentity:s,messageType:q,protocolMsgId:f,externalId:f.externalId,recipients:g,reportingMeta:a,backupDirective:p},e));s=r.serverResponse;s.type==="success"&&(yield d("WASentBytesCache").sentBytesCache().saveSentBytes({ts:s.ts,frankingKey:i,frankingVersion:l,messageBytes:m,backupDirective:p,messageType:q,protocolMsgId:f,waMsgId:d("WAMsg").craftWAMsgIdString({author:f.author,chat:f.chat,externalId:f.externalId})})["catch"](function(a){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg failed to save sent bytes to cache: ",""])),a)}));return r});return m.apply(this,arguments)}function n(a){var b=new Map();a.forEach(function(a,c){a=a.pubKey;var e=d("WAJids").extractUserJid(c);a={identity:a,jid:c};c=b.get(e)||[];c.push(a);b.set(e,c)});return Array.from(b,function(a){var b=a[0];a=a[1];return{devicesInfo:a,user:b}})}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{a=(yield a.storage.loadIdentities(d("WAGlobals").getMyUserJid()));a=a.get(d("WAGlobals").getMyDeviceJid());if(a!=null)return a;throw c("err")("missing-identity")}catch(a){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Error loading current device identity ",""])),a)}});return p.apply(this,arguments)}g.publishMessage=a}),98);
__d("WASmaxInDevicesIQErrorBadRequestOrItemNotFoundMixinGroup",["WAResultOrError","WASmaxInDevicesIQErrorBadRequestMixin","WASmaxInDevicesIQErrorItemNotFoundMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInDevicesIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInDevicesIQErrorItemNotFoundMixin").parseIQErrorItemNotFoundMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IQErrorItemNotFound",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorItemNotFound"],[b,c])}g.parseIQErrorBadRequestOrItemNotFoundMixinGroup=a}),98);
__d("WASmaxInDevicesNonRetryableRemoveDeviceIQErrorMixin",["WAResultOrError","WASmaxInDevicesIQErrorBadRequestOrItemNotFoundMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxInDevicesIQErrorBadRequestOrItemNotFoundMixinGroup").parseIQErrorBadRequestOrItemNotFoundMixinGroup(a);return!b.success?b:d("WAResultOrError").makeResult({iQErrorBadRequestOrItemNotFoundMixinGroup:b.value})}g.parseNonRetryableRemoveDeviceIQErrorMixin=a}),98);
__d("WASmaxInDevicesRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup",["WAResultOrError","WASmaxInDevicesNonRetryableRemoveDeviceIQErrorMixin","WASmaxInDevicesRetryableIQErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInDevicesRetryableIQErrorMixin").parseRetryableIQErrorMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"RetryableIQError",value:b.value});var c=d("WASmaxInDevicesNonRetryableRemoveDeviceIQErrorMixin").parseNonRetryableRemoveDeviceIQErrorMixin(a);return c.success?d("WAResultOrError").makeResult({name:"NonRetryableRemoveDeviceIQError",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["RetryableIQError","NonRetryableRemoveDeviceIQError"],[b,c])}g.parseRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup=a}),98);
__d("WASmaxInDevicesRemoveResponseError",["WAResultOrError","WASmaxInDevicesIQErrorResponseMixin","WASmaxInDevicesRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInDevicesIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInDevicesRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup").parseRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup:b.value}))}g.parseRemoveResponseError=a}),98);
__d("WASmaxInDevicesRemoveResponseSuccess",["WASmaxInDevicesIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInDevicesIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!c.success?c:c}g.parseRemoveResponseSuccess=a}),98);
__d("WASmaxOutDevicesKeyDataMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.anyElementValue;a=d("WASmaxJsx").smax("smax$any",null,a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeKeyDataMixin=a}),98);
__d("WASmaxOutDevicesIdentityKeyMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutDevicesKeyDataMixin"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxOutDevicesKeyDataMixin").mergeKeyDataMixin(d("WASmaxJsx").smax("identity",null),a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIdentityKeyMixin=a}),98);
__d("WASmaxOutDevicesRemoveRequest",["WASmaxJsx","WASmaxOutDevicesBaseIQSetRequestMixin","WASmaxOutDevicesIdentityKeyMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=a.removeId;a=a.identityKeyMixinArgs;b=d("WASmaxOutDevicesBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"fbid:devices"},d("WASmaxOutDevicesIdentityKeyMixin").mergeIdentityKeyMixin(d("WASmaxJsx").smax("remove",{id:d("WAWap").INT(b)}),a)));return b}g.makeRemoveRequest=a}),98);
__d("WASmaxDevicesRemoveRPC",["WAComms","WASmaxInDevicesRemoveResponseError","WASmaxInDevicesRemoveResponseSuccess","WASmaxOutDevicesRemoveRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WASmaxOutDevicesRemoveRequest").makeRemoveRequest(a);b=(yield d("WAComms").sendSmaxStanza(a,b));var c=d("WASmaxInDevicesRemoveResponseSuccess").parseRemoveResponseSuccess(b,a);if(c.success)return{name:"RemoveResponseSuccess",value:c.value};b=d("WASmaxInDevicesRemoveResponseError").parseRemoveResponseError(b,a);if(b.success)return{name:"RemoveResponseError",value:b.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Remove",{Success:c,Error:b}))});return h.apply(this,arguments)}g.sendRemoveRPC=a}),98);
__d("WARemoveDevice",["WALogger","WAPersistedJobManager","WAPushSafeTypes","WAResultOrError","WASignalOther","WASmaxDevicesRemoveRPC","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WAPushSafeTypes").unsafeNotNullable(b);b=a.deviceId;a=a.identity;d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["removeDevice called for device "," and identity ",""])),b,a);a=d("WASignalOther").sliceBytes(a,1,32);a=(yield d("WASmaxDevicesRemoveRPC").sendRemoveRPC({removeId:b,identityKeyMixinArgs:{anyElementValue:a}}));d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["removeDevice result for ",": "," "])),b,a);if(a.name==="RemoveResponseSuccess")return d("WAResultOrError").makeResult();else{a.name;b=a.value.errorRetryableOrNonRetryableRemoveDeviceIQErrorMixinGroup;if(b.name!=="RetryableIQError")return d("WAResultOrError").makeError();b.name;a=b.value.backoff;if(a!=null)throw new(d("WAPersistedJobManager").RetryOnBackoff)({algo:{type:"constant",delay:a},jitter:0});else throw new(d("WAPersistedJobManager").RetryOnBackoff)({algo:{type:"exponential",first:d("WATimeUtils").HOUR_MILLISECONDS/60},jitter:.1})}});return j.apply(this,arguments)}g.removeDevice=a}),98);
__d("WARemoveCurrentDevice",["WAGetCurrentUserDeviceInfoApi","WAGlobals","WALogger","WARemoveDevice","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["removeCurrentDevice called for current device"])));var b=(yield d("WAGetCurrentUserDeviceInfoApi").getCurrentUserDeviceInfo());if(b==null){d("WALogger").WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["There is no stored user info, it was already deleted or this job was called twice, possibly from another tab"])));return d("WAResultOrError").makeResult()}var c=b.deviceId;b=b.identityKey;a=(yield d("WARemoveDevice").removeDevice(a,{deviceId:c,identity:b}));if(a.success){yield d("WAGlobals").getDependencies().clearSignalAndTempStores();return d("WAResultOrError").makeResult()}return d("WAResultOrError").makeResult()});return function(b){return a.apply(this,arguments)}}();g.removeCurrentDevice=a}),98);
__d("WASendAppDataFanoutProtocol",["WAAsMessageApplication","WABridge","WAConvertAppData","WAEncUserMsg","WAErrorMessage","WAGetCurrentUserDeviceInfoApi","WAGlobals","WAMsgApplication.pb","WAOdsEnums","WAResultOrError","WASmaxAppdataPublishPeerRPC","WATagsLogger","WATimeUtils","asyncToGeneratorRuntime","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o=d("WATagsLogger").TAGS(["sendAppDataFanout"]),p=24;function a(a,b){a=b.contents;var c=b.externalId,e=b.permittedIdentitiesPerDevice;b=b.checkPhash;b=b===void 0?"checkPhash":b;return q(a,c,e,b)["catch"](function(a){a=d("WAErrorMessage").maybeGetMessageFromError(a);o.ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to send appdata to devices with error: ",""])),a);return d("WAResultOrError").makeError("runtime-error")})}function q(a,b,c,d){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){e===void 0&&(e="checkPhash");o.LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Sending appdata, externalId: ",""])),b);a=d("WAConvertAppData").convertAppData(a);var f={bytes:d("WAAsMessageApplication").castToMessageApplicationBytes(d("encodeProtobuf").encodeProtobuf(d("WAMsgApplication.pb").MessageApplicationSpec,a).readByteArrayView()),version:"v3"},g=[];a=Array.from(c.entries()).map(function(a){var b=a[0];a=a[1];return{identity:a.pubKey,jid:b}});c=p;a.length>c&&(o.WARN(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Attempting to send an appData stanza to "," devices"])),a.length),o.ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Attempting to send an appData stanza to more than the allowed "," devices"])),c),a=a.slice(0,c));var h=[{devicesInfo:a,user:d("WAGlobals").getMyUserJid()}];c=(yield d("WAGlobals").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return d("WAEncUserMsg").encryptUserMsg(h,{messageBytes:f,type:"appdata"},{cryptoManager:a})},{operationType:"encrypt",flush:!0}));a=c.phash;var q=!1;c.participants!=null&&c.participants.forEach(function(a){a.type==="pkmsg"&&(q=!0),g.push({toJid:a.to,encTypeIndividualMixinArgs:{encType:a.type,encElementValue:a.ciphertext},encVersionFutureproofMixinArgs:{encV:parseInt(a.v,10)}})});c={appdataTo:d("WAGlobals").getMyUserJid(),toArgs:g};c={peerPeerFanout:c};var r=void 0;if(q){var s=(yield d("WAGetCurrentUserDeviceInfoApi").getCurrentUserDeviceInfo());s=s==null?void 0:s.identityKey;if(s==null){o.ERROR(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Failed to fetch current device public identity key"])));return d("WAResultOrError").makeError("no-public-identity")}r={deviceIdentityElementValue:s}}s={appdataDeviceListCheck:e==="checkPhash"?"true":"false"};e={appdataId:b,peerMsgTypesArgs:c,deviceIdentityMixinArgs:r,withDeviceListCheckMixinArgs:s};b=(yield d("WASmaxAppdataPublishPeerRPC").sendPeerRPC(e));switch(b.name){case"PeerResponseSuccess":r=(c=b.value.deviceListStaleMixin)==null?void 0:c.phash;if(r!=null&&a!=null&&r!==a){o.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Got phash mismatch on appdata, local[","] server[","]"])),a,r);d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.PHASH_MISMATCH,key:"appdata"});return d("WAResultOrError").makeResult({phashMismatch:!0,serverTs:d("WATimeUtils").castToUnixTime(b.value.t)})}else return d("WAResultOrError").makeResult({phashMismatch:!1,serverTs:d("WATimeUtils").castToUnixTime(b.value.t)});default:b.name;o.ERROR(n||(n=babelHelpers.taggedTemplateLiteralLoose(["Failed to send appdata. Error: ",""])),b.value.error);return d("WAResultOrError").makeError("ack-failure")}});return r.apply(this,arguments)}g.MAX_APPDATA_RECIPIENTS=p;g.sendAppDataToDevicesProtocol=a}),98);
__d("WASendMsgUtilV2",["Promise","WADevicesState","WAGenReportingMeta","WAGlobals","WAJids","WALoadReceiptApi","WALogger","WAMsg","WAResultOrError","WASaveReceiptApi","WASendMsgInternal","WASentBytesCache","WATimeUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o;function p(a){return(o||(o=b("Promise"))).resolve()}function q(a,b){return d("WADevicesState").getDevicesState().waitForUserDevices(Array.from(new Set([a,d("WAGlobals").getMyUserJid()])),"GetDevicesBeforeSend: "+b)}function r(a,c){a=c.chatJid;var e=c.reason;return d("WAJids").switchOnChatJidType(a,{group:function(a){return p(a)},interopUser:function(a){return q(a,e)},lidUser:function(a){return q(a,e)},msgrUser:function(a){return q(a,e)},phoneUser:function(a){return q(a,e)}})["catch"](function(a){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Error during get devices before sending: ",""])),a);return(o||(o=b("Promise"))).resolve()})}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.messagePayload;a=a.loadThreadParticipants;var e={author:c.protocolMsgId.author,chat:c.protocolMsgId.chat,externalId:c.protocolMsgId.externalId},f=(yield d("WALoadReceiptApi").loadReceipt(e));if(f.success)return f;b.addPoint("get_devices_before_send_start");yield r(void 0,{chatJid:c.protocolMsgId.chat,reason:"prepareReceipt"});b.addPoint("get_devices_before_send_end");var g=(yield a(c.protocolMsgId.chat));b.addPoint("get_identities_start");f=(yield d("WAGlobals").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return a.storage.bulkLoadIdentities(g)},{flush:!1,afterInit:!0,operationType:"prepare_receipt_load_identities"}));a=[];if(f.size===0)a=[].concat(g);else for(c of f){var h=c[0],j=c[1];j.size===0&&a.push(h)}a.length>0&&(yield d("WADevicesState").getDevicesState().waitForUserDevices(a,"GetDevicesBeforeSend: prepareReceipt",!0),f=(yield d("WAGlobals").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return a.storage.bulkLoadIdentities(g)},{afterInit:!0,flush:!1,operationType:"prepare_receipt_load_identities"})));j=new Map();for(h of f){h[0];c=h[1];for(a of c){f=a[0];c=a[1];if(f===d("WAGlobals").getMyDeviceJid())continue;j.set(f,{pubKey:c})}}b.addPoint("get_identities_end");f=new Set();c={permittedIdentitiesPerDevice:j,recipientDevices:f,id:e};b.addPoint("save_receipts_start");yield d("WASaveReceiptApi").saveReceipt(c)["catch"](function(a){b.addPoint("save_receipts_fail");d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Failed to save receipt for message with error ",""])),a);return d("WAResultOrError").makeError("missing-receipt")});b.addPoint("save_receipts_end");return d("WAResultOrError").makeResult(c)});return t.apply(this,arguments)}function a(a,b,c){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){a=c.messagePayload;var f=c.loadThreadParticipants,g=c.sendIdentity;g=g===void 0?!1:g;c=c.isInstamadillo;c=c===void 0?!1:c;e.addPoint("prepare_receipt_start");f=(yield s({messagePayload:a,loadThreadParticipants:f},e));if(f.success===!1){e.addPoint("prepare_receipt_fail");d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Trying to send a message that does not have a receipt in db"])));return d("WAResultOrError").makeError({type:"missing-receipt"})}e.addPoint("prepare_receipt_end");f=f.value;var h=a.frankingKey,i=a.frankingVersion,n=a.messageBytes,p=a.backupDirective,q=a.messageType,r=a.protocolMsgId;a=v(f.permittedIdentitiesPerDevice);f=q.type==="text"&&q.invitedParticipantUserJid!=null?a.filter(function(a){return a.user===q.invitedParticipantUserJid||a.user===d("WAGlobals").getMyUserJid()}):a;e.addPoint("recipients-calculated",{"int":{recipientsCount:f.length},string:{msgType:q.type}});a=q.type==="text"&&q.invitedParticipantUserJid!=null?q.invitedParticipantUserJid:r.chat;var t=r.chat===d("WAGlobals").getMyUserJid();if(f.length===0&&!t){d("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Trying to send a message with no recipients"])));return d("WAResultOrError").makeError({type:"no-recipients",isRetriable:!1})}else if(f.length===0&&t){d("WALogger").LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Trying to send a message with no recipients, but it is a self thread"])));return d("WAResultOrError").makeResult({baseKey:null,reportingMeta:null,serverTs:d("WATimeUtils").unixTime()})}t=g?yield d("WAGlobals").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return w(a)},{operationType:"get_my_device_identity",flush:!1,afterInit:!0}):null;g=(yield q.isRevoked===!0?(o||(o=b("Promise"))).resolve(null):d("WAGenReportingMeta").genReportingMeta(n.bytes,h,i));return d("WASendMsgInternal").sendMessage({type:"chat",messageBytes:n,chat:a,deviceIdentity:t,messageType:q,protocolMsgId:r,externalId:r.externalId,recipients:f,reportingMeta:g,backupDirective:p},e,c).then(function(a){if(a.success)return d("WASentBytesCache").sentBytesCache().saveSentBytes({ts:a.value.serverTs,frankingKey:h,frankingVersion:i,messageBytes:n,backupDirective:p,messageType:q,protocolMsgId:r,waMsgId:d("WAMsg").craftWAMsgIdString({author:r.author,chat:r.chat,externalId:r.externalId})})["catch"](function(a){d("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg failed to save sent bytes to cache: ",""])),a)}).then(function(){return a});else return a})});return u.apply(this,arguments)}function v(a){var b=new Map();a.forEach(function(a,c){a=a.pubKey;var e=d("WAJids").extractUserJid(c);a={identity:a,jid:c};c=b.get(e)||[];c.push(a);b.set(e,c)});return Array.from(b,function(a){var b=a[0];a=a[1];return{devicesInfo:a,user:b}})}function w(a){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{a=(yield a.storage.loadIdentities(d("WAGlobals").getMyUserJid()));a=a.get(d("WAGlobals").getMyDeviceJid());if(a!=null)return a;throw c("err")("missing-identity")}catch(a){d("WALogger").ERROR(n||(n=babelHelpers.taggedTemplateLiteralLoose(["Error loading current device identity ",""])),a)}});return x.apply(this,arguments)}g.getDevicesBeforeSend=r;g.sendChatMessage=a}),98);
__d("WASetClockSkewApi",["WASetMetaApi"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){a=a.clockSkew;return d("WASetMetaApi").setMeta({clockSkew:a})};g.setClockSkew=a}),98);
__d("WASendPing",["WAComms","WALogger","WASetClockSkewApi","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["sendPing: sending"]))),d("WAComms").sendPing()}function c(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=b.clockSkew;d("WATimeUtils").setClockSkew(a);yield d("WASetClockSkewApi").setClockSkew({clockSkew:a})});return i.apply(this,arguments)}g.sendPing=a;g.updateClockSkew=c}),98);
__d("WASyncAbProps",["WAAbPropsSync","WALogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=b.sendHash;d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Syncing ABProps"])));yield d("WAAbPropsSync").syncAbProps({sendHash:b,eventFlow:a!=null?a:void 0})});return i.apply(this,arguments)}g.syncAbProps=a}),98);
__d("WAUploadMedia",["WABase64","WABlobToArrayBuffer","WACheckCiphertextInServer","WACreateRetrier","WAEncryptAndUploadPlaintext","WAErrorMessage","WAFindReusableMediaEntry","WALogger","WAMediaUtils","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,t,u;function a(a){var b=a.uploadMediaMetric;return v(babelHelpers["extends"]({},a))["catch"](function(a){a=d("WAErrorMessage").maybeGetMessageFromError(a);d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: unexpected runtime error: ",""])),a);return d("WAResultOrError").makeError("runtime-error")}).then(function(a){a.success?b.endSuccess():b.endFail(a.error,{string:{failReason:a.error}});return a})}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a.chatJid;var b=a.filename,c=a.hash,e=a.mediaTypeDetails,f=a.protocolMsgId,g=a.size,h=a.uploadMediaMetric,i=a.getMediaKnownEntries,v=a.getMediaPlaintext,w=a.updateMediaEntryForMsg,y=a.updateMediaEntryForOptimisticUpload;a=a.getDownloadableThumbnailForMedia;var z;e.type==="regular"?z=e.mediaType:(z="preview",h.addAnnotations({string:{fullSizeMediaType:e.messageType}}));h.addPoint("create_upload_retrier_start");e=(yield d("WACreateRetrier").createUploadRetrier(z,h));if(!e.success){d("WALogger").WARN(j||(j=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: fail to gather media routes"])));h.addPoint("create_upload_retrier_fail");return e}h.addPoint("create_upload_retrier_end");e=e.value;w=x(f,c,w,y,h);h.addPoint("get_media_entry_start");y=(yield i(c)["catch"](function(a){d("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: get media entry unexpected runtime error: ",""])),d("WAErrorMessage").maybeGetMessageFromError(a));h.addPoint("get_media_entry_fail");throw a}));i=d("WAFindReusableMediaEntry").findReusableMediaEntryForArmadillo(f,y);h.addPoint("get_media_entry_end");if(i==null){h.addPoint("create_media_key_start");d("WALogger").LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: no media entry found, need to upload media"])));f=d("WAMediaUtils").createMediaKey();y=d("WAMediaUtils").createUploadToken();var A=d("WATimeUtils").unixTime();h.addPoint("create_media_key_end");h.addPoint("get_media_plaintext_start");var B=(yield v(c).then(function(a){return a==null?null:d("WABlobToArrayBuffer").blobToArrayBuffer(a)}));if(B==null){d("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["encryptAndUploadPlaintext: no plaintext"])));h.addPoint("get_media_plaintext_fail");return d("WAResultOrError").makeError("no-plaintext")}h.addPoint("get_media_plaintext_end");return d("WAEncryptAndUploadPlaintext").encryptAndUploadPlaintext({size:g,filename:b,mediaKey:f,mediaKeyTimestamp:A,serverMediaType:z,mediaUploadFlow:h,plaintext:B,plaintextHash:c,updateMediaEntry:w,uploadRetrier:e,uploadToken:y,getDownloadableThumbnailForMedia:a})}f=i.directPath;A=i.downloadableThumbnail;B=i.fileEncSha256;y=i.fileSha256;var C=i.mediaKey,D=i.mediaKeyTimestamp,E=i.objectId;i=i.uploadToken;A={directPath:f,downloadableThumbnail:A,fileEncSha256:B,filename:b,fileSha256:y||d("WABase64").decodeB64UrlSafe(c),mediaKey:C,mediaKeyTimestamp:D,objectId:E,serverMediaType:z,size:g,uploadToken:i};if(f!=null){d("WALogger").LOG(n||(n=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: async upload"])));yield w(A);h.addAnnotations({bool:{reused_media_entry:!0}});return d("WAResultOrError").makeResult(A)}h.addPoint("resume_check_start");y=(yield d("WACheckCiphertextInServer").checkCiphertextInServer(z,B,i,e)["catch"](function(a){d("WALogger").ERROR(o||(o=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: resume check unexpected runtime error: ",""])),d("WAErrorMessage").maybeGetMessageFromError(a));h.addPoint("resume_check_fail");throw a}));if(!y.success){h.addPoint("resume_check_fail");d("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: resume/exist check exhausted available retries"])));return y}h.addPoint("resume_check_end");E=y.value;if(E.type==="media-found"){d("WALogger").LOG(q||(q=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: media is on the server"])));h.addAnnotations({bool:{existingMediaFound:!0}});f=babelHelpers["extends"]({},A,{directPath:E.directPath,objectId:E.objectId});yield w(f);h.addAnnotations({bool:{reused_media_entry:!0}});return d("WAResultOrError").makeResult(f)}else if(E.type==="media-partial-found"){d("WALogger").LOG(r||(r=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: media is partially on the server, start uploading from byteOffset ",""])),E.resumeFromBytes);B=E.resumeFromBytes;h.addPoint("get_media_plaintext_start");y=(yield v(c).then(function(a){return a==null?null:d("WABlobToArrayBuffer").blobToArrayBuffer(a)}));if(y==null){d("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["encryptAndUploadPlaintext: no plaintext"])));h.addPoint("get_media_plaintext_fail");return d("WAResultOrError").makeError("no-plaintext")}h.addPoint("get_media_plaintext_end");return d("WAEncryptAndUploadPlaintext").encryptAndUploadPlaintext({size:g,filename:b,fromOffset:B,mediaKey:C,mediaKeyTimestamp:D,serverMediaType:z,mediaUploadFlow:h,plaintext:y,plaintextHash:c,updateMediaEntry:w,uploadRetrier:e,uploadToken:i,getDownloadableThumbnailForMedia:a})}d("WALogger").LOG(t||(t=babelHelpers.taggedTemplateLiteralLoose(["uploadMedia: media is not on the server, start uploading"])));A=d("WATimeUtils").unixTime();h.addPoint("get_media_plaintext_start");f=(yield v(c).then(function(a){return a==null?null:d("WABlobToArrayBuffer").blobToArrayBuffer(a)}));if(f==null){d("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["encryptAndUploadPlaintext: no plaintext"])));h.addPoint("get_media_plaintext_fail");return d("WAResultOrError").makeError("no-plaintext")}h.addPoint("get_media_plaintext_end");return d("WAEncryptAndUploadPlaintext").encryptAndUploadPlaintext({size:g,filename:b,mediaKey:C,mediaKeyTimestamp:A,serverMediaType:z,mediaUploadFlow:h,plaintext:f,plaintextHash:c,updateMediaEntry:w,uploadRetrier:e,uploadToken:i,getDownloadableThumbnailForMedia:a})});return w.apply(this,arguments)}function x(a,b,c,e,f){return function(g){f.addPoint("update_media_entry_start");var h=d("WAMediaUtils").encodeMediaEntryForUpload(g);g=a==null?e(b,function(){return h},g==null?void 0:g.objectId,g==null?void 0:g.serverMediaType):c(b,a,function(){return h},g==null?void 0:g.objectId,g==null?void 0:g.serverMediaType);return g.then(function(a){f.addPoint("update_media_entry_end");return a})["catch"](function(a){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["updateMediaEntry unexpected runtime error: ",""])),d("WAErrorMessage").maybeGetMessageFromError(a));f.addPoint("update_media_entry_fail");throw a})}}g.uploadMedia=a}),98);